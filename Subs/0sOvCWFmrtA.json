[
  {
    "start": 0.0,
    "end": 5.92,
    "text": "This massive and comprehensive Python API course is taught by Sanjeev Thiagarajan.",
    "textdich": ""
  },
  {
    "start": 6.48,
    "end": 10.48,
    "text": "He's an excellent teacher and has taught many popular courses.",
    "textdich": ""
  },
  {
    "start": 10.48,
    "end": 14.96,
    "text": "Hey, how's it going, everyone? I just wanted to welcome you to my Python API development course.",
    "textdich": ""
  },
  {
    "start": 14.96,
    "end": 19.28,
    "text": "So in this course, I'm going to walk you through building out your very own API in Python. However,",
    "textdich": ""
  },
  {
    "start": 19.28,
    "end": 23.52,
    "text": "keep in mind, this course is so much more than just building out a simple API. In fact,",
    "textdich": ""
  },
  {
    "start": 23.52,
    "end": 28.24,
    "text": "as I'm sure you saw the video length, this course does come out to a whopping 19 hours in length.",
    "textdich": ""
  },
  {
    "start": 28.24,
    "end": 31.36,
    "text": "And so you're probably wondering, well, what exactly are we going to be covering for 19 hours?",
    "textdich": ""
  },
  {
    "start": 31.36,
    "end": 35.76,
    "text": "We don't need 19 hours to create an API. Well, first of all, we're going to build out a fully",
    "textdich": ""
  },
  {
    "start": 35.76,
    "end": 40.0,
    "text": "featured API that includes authentication, current operations, scheme of validation,",
    "textdich": ""
  },
  {
    "start": 40.0,
    "end": 43.2,
    "text": "and we're going to set up documentation for our API, because that's very important.",
    "textdich": ""
  },
  {
    "start": 43.2,
    "end": 47.76,
    "text": "However, the learning doesn't stop just there. This course is going to extend well past just",
    "textdich": ""
  },
  {
    "start": 47.76,
    "end": 51.84,
    "text": "basic API development. We'll also learn all of the tooling that surrounds building a complete and",
    "textdich": ""
  },
  {
    "start": 51.84,
    "end": 56.72,
    "text": "robust API. I've dedicated a large section of this course to learning SQL. And I've noticed",
    "textdich": ""
  },
  {
    "start": 56.72,
    "end": 61.6,
    "text": "that a lot of the other API and web development courses, they just quickly gloss over SQL without",
    "textdich": ""
  },
  {
    "start": 61.6,
    "end": 67.2,
    "text": "diving into the nitty gritty of how SQL databases work. For this course, we're going to cover SQL",
    "textdich": ""
  },
  {
    "start": 67.2,
    "end": 70.88,
    "text": "extensively. And we're going to start from the absolute basics. So you don't need to know a",
    "textdich": ""
  },
  {
    "start": 70.88,
    "end": 75.44,
    "text": "single thing about databases or SQL in general. But by the time you complete this course, you",
    "textdich": ""
  },
  {
    "start": 75.44,
    "end": 79.68,
    "text": "will be very proficient at generating database schemas, you'll know core SQL concepts like",
    "textdich": ""
  },
  {
    "start": 79.68,
    "end": 84.08,
    "text": "primary keys, foreign keys, table constraints, and you can pretty much be able to generate SQL",
    "textdich": ""
  },
  {
    "start": 84.08,
    "end": 88.96,
    "text": "queries to grab the exact data that you're looking for. And on top of that, I'll show you how to",
    "textdich": ""
  },
  {
    "start": 88.96,
    "end": 95.12,
    "text": "integrate your SQL databases in your API using two different methods. So we'll cover both using raw",
    "textdich": ""
  },
  {
    "start": 95.12,
    "end": 100.4,
    "text": "SQL queries as well as ORMs so that no matter which method you ultimately prefer, you'll have",
    "textdich": ""
  },
  {
    "start": 100.4,
    "end": 105.6,
    "text": "all the skills and resources to start building out your own projects. We'll also familiarize",
    "textdich": ""
  },
  {
    "start": 105.6,
    "end": 109.84,
    "text": "ourselves with database migration tools like alembic, which allow us to make incremental",
    "textdich": ""
  },
  {
    "start": 109.84,
    "end": 114.32,
    "text": "changes to our database schema to track changes and get just like we can with our regular Python",
    "textdich": ""
  },
  {
    "start": 114.32,
    "end": 119.36,
    "text": "code. We'll also learn how to use tools like postman to construct HTTP packets so that we",
    "textdich": ""
  },
  {
    "start": 119.36,
    "end": 124.0,
    "text": "could test our API during the whole development process. And when it comes to testing, I've added",
    "textdich": ""
  },
  {
    "start": 124.0,
    "end": 128.4,
    "text": "about you know, two to three hours of content going over how to set up automated integration",
    "textdich": ""
  },
  {
    "start": 128.4,
    "end": 132.64,
    "text": "tests so that when you make changes to your code, you can run these automated tests to verify that",
    "textdich": ""
  },
  {
    "start": 132.64,
    "end": 138.4,
    "text": "your code changes haven't broke any pre existing functionality. And then after testing, we're going",
    "textdich": ""
  },
  {
    "start": 138.4,
    "end": 143.12,
    "text": "to move on to the deployment phase, we're going to actually deploy our application. And I didn't",
    "textdich": ""
  },
  {
    "start": 143.12,
    "end": 147.76,
    "text": "just include one method of deployment, I've actually included two different deployment scenarios.",
    "textdich": ""
  },
  {
    "start": 147.76,
    "end": 151.92,
    "text": "The first scenario is probably the most common scenario, which is deploying our app onto like",
    "textdich": ""
  },
  {
    "start": 151.92,
    "end": 157.84,
    "text": "an Ubuntu machine that can be hosted on any cloud provider like AWS, GCP, Azure, or even digital",
    "textdich": ""
  },
  {
    "start": 157.84,
    "end": 162.56,
    "text": "ocean. And you know, we'll cover things like how to set up nginx to act as a reverse proxy,",
    "textdich": ""
  },
  {
    "start": 162.56,
    "end": 167.52,
    "text": "we'll, we'll configure our own system D service, we'll set up a firewall to block all non HTTP",
    "textdich": ""
  },
  {
    "start": 167.52,
    "end": 173.12,
    "text": "traffic. And we'll even set up SSL so that our application can handle HTTPS traffic. But after",
    "textdich": ""
  },
  {
    "start": 173.12,
    "end": 178.08,
    "text": "that, we'll also take a look at how we can deploy our application onto Heroku. Just because if you",
    "textdich": ""
  },
  {
    "start": 178.08,
    "end": 184.24,
    "text": "don't have, you know, maybe you can't afford to pay for cloud services, or you just don't have the",
    "textdich": ""
  },
  {
    "start": 184.24,
    "end": 188.96,
    "text": "ability to sign up for an account or something like that, I do want to make sure that you still",
    "textdich": ""
  },
  {
    "start": 188.96,
    "end": 193.12,
    "text": "have a way of deploying your applications that you can show off to your friends and family what you",
    "textdich": ""
  },
  {
    "start": 193.12,
    "end": 198.4,
    "text": "created. So I added the Heroku section, because they've got a very, very nice and convenient free",
    "textdich": ""
  },
  {
    "start": 198.4,
    "end": 202.24,
    "text": "tier where we can deploy our entire application for free, we don't need to sign up with the credit",
    "textdich": ""
  },
  {
    "start": 202.24,
    "end": 206.32,
    "text": "card. So that's why I included that second deployment scenario. And since all the cool",
    "textdich": ""
  },
  {
    "start": 206.32,
    "end": 211.2,
    "text": "kids are hardcore into Docker today, I'm going to show you how to Dockerize your API in case that",
    "textdich": ""
  },
  {
    "start": 211.2,
    "end": 215.76,
    "text": "is your preferred method of deployment. And then finally, we're going to wrap things up by building",
    "textdich": ""
  },
  {
    "start": 215.76,
    "end": 221.2,
    "text": "out our very own CI CD pipeline using GitHub actions. This will allow us to push out changes",
    "textdich": ""
  },
  {
    "start": 221.2,
    "end": 226.08,
    "text": "to GitHub, resulting in our pipeline running, which will pull our code, run all of our integration",
    "textdich": ""
  },
  {
    "start": 226.08,
    "end": 230.88,
    "text": "tests, build all of the necessary images. And if all the tests ultimately pass, it'll actually push",
    "textdich": ""
  },
  {
    "start": 230.88,
    "end": 235.44,
    "text": "out our changes to our production environment, so that we can do all of this in an automated fashion",
    "textdich": ""
  },
  {
    "start": 235.44,
    "end": 241.04,
    "text": "without having to manually go in and run each step manually. So let's take a look at our tech stack.",
    "textdich": ""
  },
  {
    "start": 241.04,
    "end": 245.76,
    "text": "Since this is a Python API course, we will be using Python to build out our API. There were",
    "textdich": ""
  },
  {
    "start": 245.76,
    "end": 249.36,
    "text": "a couple of different web frameworks in Python that we could have used most notably Django and",
    "textdich": ""
  },
  {
    "start": 249.36,
    "end": 254.4,
    "text": "flask, I decided to use neither one of them. And I decided to use a newer framework called fast API.",
    "textdich": ""
  },
  {
    "start": 255.2,
    "end": 260.56,
    "text": "And the reason why I chose to use this framework was because it has API's kind of built in mind,",
    "textdich": ""
  },
  {
    "start": 260.56,
    "end": 265.44,
    "text": "right? It wasn't there to address like the model view controller type scenario, it really is all",
    "textdich": ""
  },
  {
    "start": 265.44,
    "end": 271.6,
    "text": "about building out API's. And on top of that, it is really fast, right? But when I say fast,",
    "textdich": ""
  },
  {
    "start": 271.6,
    "end": 276.08,
    "text": "it's not just fast from a performance perspective, which it is. But it's also fast from the fact",
    "textdich": ""
  },
  {
    "start": 276.08,
    "end": 282.48,
    "text": "that it can, it makes it really easy and quick to spin up new API's. And one of my favorite features",
    "textdich": ""
  },
  {
    "start": 282.48,
    "end": 287.92,
    "text": "of this framework is the auto documentation functionality. When you build an API, you have",
    "textdich": ""
  },
  {
    "start": 287.92,
    "end": 292.48,
    "text": "to document how your API works. And this is a very cumbersome task. Because anytime you make",
    "textdich": ""
  },
  {
    "start": 292.48,
    "end": 296.24,
    "text": "any changes to your API, you have to remember to update your API, or then the front end can be",
    "textdich": ""
  },
  {
    "start": 296.24,
    "end": 300.96,
    "text": "making the wrong request. Fast API automatically documents your API for you so that you don't have",
    "textdich": ""
  },
  {
    "start": 300.96,
    "end": 306.08,
    "text": "to do it yourself. It's truly a game changer. And finally, the most important reason why I chose",
    "textdich": ""
  },
  {
    "start": 306.08,
    "end": 311.52,
    "text": "fast API is because of this. You see this magnificent beast? This is the creator of the",
    "textdich": ""
  },
  {
    "start": 311.52,
    "end": 316.64,
    "text": "fast API framework. And my mom always told me when someone with a mustache as glorious as that",
    "textdich": ""
  },
  {
    "start": 316.64,
    "end": 321.76,
    "text": "creates a web framework, you use that damn framework. Now, as I mentioned, we will be covering",
    "textdich": ""
  },
  {
    "start": 321.76,
    "end": 326.8,
    "text": "SQL extensively. And I've decided to go with Postgres. It doesn't really matter what type of SQL",
    "textdich": ""
  },
  {
    "start": 326.8,
    "end": 330.72,
    "text": "database you use. They're all fundamentally the same with only minor differences. I chose",
    "textdich": ""
  },
  {
    "start": 330.72,
    "end": 335.84,
    "text": "Postgres because that's my favorite. And who doesn't like elephants anyways, for our ORM,",
    "textdich": ""
  },
  {
    "start": 335.84,
    "end": 341.92,
    "text": "when we do eventually migrate to ORMs from using raw SQL queries, we will be using SQL alchemy.",
    "textdich": ""
  },
  {
    "start": 341.92,
    "end": 345.6,
    "text": "I decided to use that because that seems like that's the most standard one for Python. I really",
    "textdich": ""
  },
  {
    "start": 345.6,
    "end": 349.6,
    "text": "could have chose any of them. I didn't really care which one I used. So I just picked the most popular",
    "textdich": ""
  },
  {
    "start": 349.6,
    "end": 354.8,
    "text": "one. So that covers our tech stack. Let's now take a look at the project that we'll be building.",
    "textdich": ""
  },
  {
    "start": 354.8,
    "end": 358.32,
    "text": "Now I would love to show you some cool flashy website that you can show off to your friends.",
    "textdich": ""
  },
  {
    "start": 358.32,
    "end": 361.84,
    "text": "However, we're not building a website, we're building an API. And unfortunately,",
    "textdich": ""
  },
  {
    "start": 361.84,
    "end": 366.4,
    "text": "API's don't really have a visual aspect to them. So I don't really have anything to show you. I",
    "textdich": ""
  },
  {
    "start": 366.4,
    "end": 370.72,
    "text": "mean, I could I guess construct a couple of HTTP packets that send it and verify that we get the",
    "textdich": ""
  },
  {
    "start": 370.72,
    "end": 374.16,
    "text": "proper JSON response. But that's not really exciting. So I'm going to do is I'm going to show",
    "textdich": ""
  },
  {
    "start": 374.16,
    "end": 378.08,
    "text": "you our documentation for our project so that you can see all the different features that we",
    "textdich": ""
  },
  {
    "start": 378.08,
    "end": 382.16,
    "text": "implement. And the nice part about the documentation is these are interactive docs. So from the",
    "textdich": ""
  },
  {
    "start": 382.16,
    "end": 387.36,
    "text": "documentation, I can actually send HTTP requests to my application and get a response back. So you",
    "textdich": ""
  },
  {
    "start": 387.36,
    "end": 390.88,
    "text": "can really see all of the different features, things like the authentication and the crowd",
    "textdich": ""
  },
  {
    "start": 390.88,
    "end": 395.28,
    "text": "operations that we'll be performing and setting up in our API. So the app that we're going to",
    "textdich": ""
  },
  {
    "start": 395.28,
    "end": 400.24,
    "text": "build for this course is going to be a social media type application where users can create",
    "textdich": ""
  },
  {
    "start": 400.24,
    "end": 404.88,
    "text": "posts, they can read other people's posts, they'll be able to perform all the crowd operations. So",
    "textdich": ""
  },
  {
    "start": 404.88,
    "end": 411.68,
    "text": "they're able to create, read, update, and delete posts. And we'll also be able to vote on posts.",
    "textdich": ""
  },
  {
    "start": 411.68,
    "end": 417.04,
    "text": "So you know, most social media apps have some sort of like system or voting system. And so we will",
    "textdich": ""
  },
  {
    "start": 417.04,
    "end": 422.24,
    "text": "be able to like other users posts as well. So this is the built in documentation that comes with fast",
    "textdich": ""
  },
  {
    "start": 422.24,
    "end": 426.64,
    "text": "API. And you'll be able to see all of the API endpoints that we're going to create in this course.",
    "textdich": ""
  },
  {
    "start": 426.64,
    "end": 431.04,
    "text": "So we're going to have all of the posts endpoint, which is going to be responsible for retrieving",
    "textdich": ""
  },
  {
    "start": 431.04,
    "end": 435.92,
    "text": "all posts, creating posts, retrieving an individual post, updating a post as well as deleting a post.",
    "textdich": ""
  },
  {
    "start": 436.48,
    "end": 441.2,
    "text": "Then we'll have the user specific endpoints of things like creating a user getting a user's",
    "textdich": ""
  },
  {
    "start": 441.2,
    "end": 446.0,
    "text": "information. And then we've got our authentication, which is going to be used for logging in. And then",
    "textdich": ""
  },
  {
    "start": 446.0,
    "end": 452.16,
    "text": "finally, we've got the one for voting. So when you want to vote on a specific, a specific post that",
    "textdich": ""
  },
  {
    "start": 452.16,
    "end": 457.44,
    "text": "you like, you can go ahead and like that post. So let's just use the documentation to actually,",
    "textdich": ""
  },
  {
    "start": 458.0,
    "end": 463.92,
    "text": "you know, test out our API. So first things first, let's actually try to retrieve any or all of our",
    "textdich": ""
  },
  {
    "start": 463.92,
    "end": 468.88,
    "text": "posts. So if I hit this Get button right here, we can actually try to send a request to our API",
    "textdich": ""
  },
  {
    "start": 468.88,
    "end": 473.36,
    "text": "with the built in documentation. So you can just say execute, right, and you'll see that we got a",
    "textdich": ""
  },
  {
    "start": 473.36,
    "end": 478.56,
    "text": "401, which means that we are right now not logged in. So we are unauthorized to retrieve any of the",
    "textdich": ""
  },
  {
    "start": 478.56,
    "end": 482.72,
    "text": "posts. So the API that we're going to build is going to require all users to be logged in to be",
    "textdich": ""
  },
  {
    "start": 482.72,
    "end": 487.44,
    "text": "to even be able to read the posts. So let's actually go ahead and create a user. And so",
    "textdich": ""
  },
  {
    "start": 487.44,
    "end": 492.72,
    "text": "we'll go down to the user's endpoint under Create user. And I'm going to do try it out. And it's",
    "textdich": ""
  },
  {
    "start": 492.72,
    "end": 496.8,
    "text": "going to give us an example of the structure of the data that we have to send to our API",
    "textdich": ""
  },
  {
    "start": 496.8,
    "end": 500.24,
    "text": "to create a user. So we need to provide a username or an email and a password.",
    "textdich": ""
  },
  {
    "start": 500.24,
    "end": 507.92,
    "text": "So I'm going to create an email, I'll call this john at gmail.com. And the password is going to",
    "textdich": ""
  },
  {
    "start": 507.92,
    "end": 516.8,
    "text": "be something simple, just for demonstration purposes. And we'll execute that, right? So it'll",
    "textdich": ""
  },
  {
    "start": 516.8,
    "end": 521.12,
    "text": "actually send that data back to our back end, you can see we get a 201, which means we were successfully",
    "textdich": ""
  },
  {
    "start": 521.12,
    "end": 525.92,
    "text": "able to create it, you can see the ID of the user account that was created, we can see the email is",
    "textdich": ""
  },
  {
    "start": 525.92,
    "end": 530.08,
    "text": "what it is, and then we can see the date that it was created at as well. And so now we can actually",
    "textdich": ""
  },
  {
    "start": 530.08,
    "end": 534.16,
    "text": "log in as this user. So there's a couple of different ways to log in, I can go to the login",
    "textdich": ""
  },
  {
    "start": 534.16,
    "end": 538.8,
    "text": "endpoint, or we can just go up here at the top and just do authorize. And then we can provide",
    "textdich": ""
  },
  {
    "start": 538.8,
    "end": 544.8,
    "text": "that information. So I'll do john at gmail.com. And we'll provide his password. And if we do",
    "textdich": ""
  },
  {
    "start": 544.8,
    "end": 550.8,
    "text": "authorize now, we can see that we have successfully logged in. So I'll close this out. And so now if",
    "textdich": ""
  },
  {
    "start": 550.8,
    "end": 556.48,
    "text": "I try to retrieve the posts, and then hit execute, you can see that we were able to retrieve all of",
    "textdich": ""
  },
  {
    "start": 556.48,
    "end": 560.72,
    "text": "the posts in our database right now, there's only two. But you can see that these were created by",
    "textdich": ""
  },
  {
    "start": 560.72,
    "end": 566.16,
    "text": "some other users like Sanjeev in this case, and then Sanjeev 123. And if we want to create our",
    "textdich": ""
  },
  {
    "start": 566.16,
    "end": 571.2,
    "text": "own posts, we can go ahead and do that. So I'll go to the create post endpoint. And we'll do try it",
    "textdich": ""
  },
  {
    "start": 571.2,
    "end": 576.08,
    "text": "out. And it's going to give us an example here. So we have to provide title content, as well as is",
    "textdich": ""
  },
  {
    "start": 576.08,
    "end": 581.2,
    "text": "this post going to be published, or is it going to be a draft. And you'll actually see the structure",
    "textdich": ""
  },
  {
    "start": 581.2,
    "end": 590.56,
    "text": "of this schema right down here. I think it's at the bottom, actually. So if you go to post,",
    "textdich": ""
  },
  {
    "start": 590.56,
    "end": 595.12,
    "text": "create here, this is going to show us the the schema that we have to pass, we have to provide",
    "textdich": ""
  },
  {
    "start": 595.12,
    "end": 601.28,
    "text": "a title content. So the asterisk means it's required, the published is not required. And",
    "textdich": ""
  },
  {
    "start": 601.28,
    "end": 605.52,
    "text": "you can see that it defaults to true. So if we don't provide a value, it'll default to true.",
    "textdich": ""
  },
  {
    "start": 605.52,
    "end": 612.08,
    "text": "So let's test that out. And so I'll just say favorite foods is going to be the title.",
    "textdich": ""
  },
  {
    "start": 613.04,
    "end": 618.56,
    "text": "And the content is going to be pizza and burgers. And I will remove the published",
    "textdich": ""
  },
  {
    "start": 618.56,
    "end": 623.92,
    "text": "section because it is optional and no default to true anyways. And we'll hit execute. And if we",
    "textdich": ""
  },
  {
    "start": 623.92,
    "end": 628.08,
    "text": "take a look at the response, we get a 201, which means it successfully created it. And you can see",
    "textdich": ""
  },
  {
    "start": 628.08,
    "end": 631.92,
    "text": "what the post looks like in our database. You've got the title content, we can see the published",
    "textdich": ""
  },
  {
    "start": 631.92,
    "end": 637.04,
    "text": "got defaulted to true, we could see the ID of the post when it was created, we could see the owner",
    "textdich": ""
  },
  {
    "start": 637.04,
    "end": 640.96,
    "text": "ID, which is, you know, who created the post. And so that's the idea of our account, which is 17.",
    "textdich": ""
  },
  {
    "start": 641.6,
    "end": 644.8,
    "text": "And we can see the information about the owner. So this is john at gmail.com.",
    "textdich": ""
  },
  {
    "start": 646.08,
    "end": 650.4,
    "text": "And then, you know, as usual, we could perform all the other CRUD operations. So we can retrieve",
    "textdich": ""
  },
  {
    "start": 650.4,
    "end": 656.16,
    "text": "an individual post, update it and delete it. And then once again, if we go down here, we can also",
    "textdich": ""
  },
  {
    "start": 656.16,
    "end": 662.8,
    "text": "vote to like a post as well. And so, you know, this kind of forms the backbone of a traditional",
    "textdich": ""
  },
  {
    "start": 662.8,
    "end": 667.2,
    "text": "social media type application. So once you can really do this, you can really create any",
    "textdich": ""
  },
  {
    "start": 667.2,
    "end": 671.68,
    "text": "application you want. And I think this covers enough things from an API perspective, as well",
    "textdich": ""
  },
  {
    "start": 671.68,
    "end": 675.92,
    "text": "as from a SQL and database perspective, that you will have a solid foundation to really build out",
    "textdich": ""
  },
  {
    "start": 675.92,
    "end": 679.92,
    "text": "any API that you're interested in building out. And so I think that's enough talking, let's get to",
    "textdich": ""
  },
  {
    "start": 679.92,
    "end": 685.2,
    "text": "actually start coding out our application. In this video, we'll take a look at how to set up Python,",
    "textdich": ""
  },
  {
    "start": 685.2,
    "end": 689.52,
    "text": "as well as VS code on a Mac machine. The first thing we're going to do is we're going to just",
    "textdich": ""
  },
  {
    "start": 689.52,
    "end": 694.24,
    "text": "search for Python. And the first result should take us to the main Python page. And what we want",
    "textdich": ""
  },
  {
    "start": 694.24,
    "end": 698.56,
    "text": "to do is like downloads, it's automatically going to give us a button to download whatever the latest",
    "textdich": ""
  },
  {
    "start": 698.56,
    "end": 703.76,
    "text": "version of Python is. And the nice part is it automatically detect what platform you're using,",
    "textdich": ""
  },
  {
    "start": 703.76,
    "end": 708.0,
    "text": "so it'll know that we're on a Mac. And right now, it says that the latest version of 3.9.6. So it's",
    "textdich": ""
  },
  {
    "start": 708.0,
    "end": 711.44,
    "text": "going to offer me that keep in mind, if you're watching this video in the future, it's going to",
    "textdich": ""
  },
  {
    "start": 711.44,
    "end": 715.68,
    "text": "show a different version. And it's okay for you to download a newer version, as long as it's later",
    "textdich": ""
  },
  {
    "start": 715.68,
    "end": 720.48,
    "text": "than 3.7, you should be okay for this course. So I'm going to select this and it's going to download",
    "textdich": ""
  },
  {
    "start": 720.48,
    "end": 725.2,
    "text": "it like any other application. Once it's finished downloading, we're gonna select that and then",
    "textdich": ""
  },
  {
    "start": 725.2,
    "end": 729.2,
    "text": "select the file that we just downloaded. And then this is going to take us through the Python",
    "textdich": ""
  },
  {
    "start": 729.2,
    "end": 736.0,
    "text": "installation process. So we'll hit Continue, we'll hit Continue again, continue. We'll hit Agree,",
    "textdich": ""
  },
  {
    "start": 736.0,
    "end": 741.04,
    "text": "and then install. And then it's going to prompt us for a password.",
    "textdich": ""
  },
  {
    "start": 744.24,
    "end": 748.08,
    "text": "Alright, and so once you get this pop up, it means that Python was successfully installed.",
    "textdich": ""
  },
  {
    "start": 748.08,
    "end": 754.48,
    "text": "So we can then close that out real quick. And then we can move this to trash. And the next thing",
    "textdich": ""
  },
  {
    "start": 754.48,
    "end": 759.92,
    "text": "that we want to do is go up to your search bar at the top. And I want you to search for the terminal",
    "textdich": ""
  },
  {
    "start": 759.92,
    "end": 766.32,
    "text": "application. And you should find that just double click on that. So we can open up a terminal.",
    "textdich": ""
  },
  {
    "start": 768.88,
    "end": 774.56,
    "text": "And with our terminal, what we want to do is we want to type in Python, three, dash, dash version.",
    "textdich": ""
  },
  {
    "start": 774.56,
    "end": 779.76,
    "text": "And the reason we specify Python three is that you can actually have a Python two and a Python",
    "textdich": ""
  },
  {
    "start": 779.76,
    "end": 784.56,
    "text": "three version simultaneously installed simultaneously on your machine, we want to make sure that we got",
    "textdich": ""
  },
  {
    "start": 784.56,
    "end": 788.88,
    "text": "Python three successfully installed. So if we type this in, it should then print out the version that",
    "textdich": ""
  },
  {
    "start": 788.88,
    "end": 792.96,
    "text": "we installed. So we can see that we did successfully install Python three dot nine dot six. So we should",
    "textdich": ""
  },
  {
    "start": 792.96,
    "end": 797.84,
    "text": "be set from a Python perspective. And now that we have Python installed, let's go ahead and install",
    "textdich": ""
  },
  {
    "start": 797.84,
    "end": 803.68,
    "text": "VS code. So like I said, VS code is going to act as our text editor or ID. And so what we're going",
    "textdich": ""
  },
  {
    "start": 803.68,
    "end": 810.48,
    "text": "to do is just search for VS code. And this is going to take us to the Microsoft page. And then",
    "textdich": ""
  },
  {
    "start": 810.48,
    "end": 814.16,
    "text": "once again, Microsoft will automatically detect that we're running a Mac. And then we could just",
    "textdich": ""
  },
  {
    "start": 814.16,
    "end": 821.36,
    "text": "go ahead and select download Mac universal. Alright, and once that's done installing or",
    "textdich": ""
  },
  {
    "start": 821.36,
    "end": 826.4,
    "text": "downloading, we can select that and open it up. And you'll get this warning, just go ahead and",
    "textdich": ""
  },
  {
    "start": 826.4,
    "end": 834.32,
    "text": "select open. And so this is going to open up our VS code. And what we need to do is VS code is just",
    "textdich": ""
  },
  {
    "start": 834.32,
    "end": 839.36,
    "text": "a very basic text editor. However, it comes with extensions that we can install that make it",
    "textdich": ""
  },
  {
    "start": 839.36,
    "end": 845.04,
    "text": "significantly more feature rich. So it'll almost act like a traditional ID. And if you select the",
    "textdich": ""
  },
  {
    "start": 845.04,
    "end": 849.6,
    "text": "extension icon, which is this icon right here with the extra blocks, select that and I want you to",
    "textdich": ""
  },
  {
    "start": 849.6,
    "end": 854.96,
    "text": "search for Python. And the first result should be the one you want and it should be the one that's",
    "textdich": ""
  },
  {
    "start": 854.96,
    "end": 859.6,
    "text": "made by Microsoft. So this is going to provide things like linting, IntelliSense debugging and",
    "textdich": ""
  },
  {
    "start": 859.6,
    "end": 863.68,
    "text": "a few other features that are going to come in handy when it comes to writing Python code within",
    "textdich": ""
  },
  {
    "start": 863.68,
    "end": 869.28,
    "text": "VS code. So go ahead and install this. Alright, so now that it's installed, what we want to do is",
    "textdich": ""
  },
  {
    "start": 869.28,
    "end": 873.12,
    "text": "select this icon to go back to our folder menu. And we want to select open folder. So what we're",
    "textdich": ""
  },
  {
    "start": 873.12,
    "end": 877.04,
    "text": "going to do is we're going to create a folder to store all of our project code, I'm going to select",
    "textdich": ""
  },
  {
    "start": 877.04,
    "end": 882.4,
    "text": "open folder. Now we haven't created a folder to actually store our application. So I'm going to",
    "textdich": ""
  },
  {
    "start": 882.4,
    "end": 888.32,
    "text": "go under my traditional users, Sanjeev, and then I'm just going to store this within my documents,",
    "textdich": ""
  },
  {
    "start": 888.32,
    "end": 893.68,
    "text": "I'm going to make a new folder called, I'll call this, we'll just call this fast API.",
    "textdich": ""
  },
  {
    "start": 893.68,
    "end": 899.28,
    "text": "Well, create that and then we're going to open up the fast API folder that we just created.",
    "textdich": ""
  },
  {
    "start": 901.28,
    "end": 904.56,
    "text": "And so this is going to open up all of our project code. Right now we have no files,",
    "textdich": ""
  },
  {
    "start": 904.56,
    "end": 909.12,
    "text": "and that's to be expected. But what I want to do is I want to right click here and select new file.",
    "textdich": ""
  },
  {
    "start": 909.12,
    "end": 916.64,
    "text": "And we want to do is type in main.py. And before we hit enter, I want you to look down here.",
    "textdich": ""
  },
  {
    "start": 916.64,
    "end": 920.8,
    "text": "But when I hit enter, you'll see that something's happening. So it's activating the Python",
    "textdich": ""
  },
  {
    "start": 920.8,
    "end": 925.84,
    "text": "extension. And it's automatically going to selected Python interpreter. And so like I said,",
    "textdich": ""
  },
  {
    "start": 925.84,
    "end": 929.84,
    "text": "you can have multiple different versions of Python. So technically, we could, you know,",
    "textdich": ""
  },
  {
    "start": 929.84,
    "end": 933.36,
    "text": "for any one of our projects, we can be running three dot nine dot six, or maybe we're running",
    "textdich": ""
  },
  {
    "start": 933.36,
    "end": 937.36,
    "text": "two dot seven, if we want to stick to Python two, we can actually select which specific",
    "textdich": ""
  },
  {
    "start": 937.36,
    "end": 942.56,
    "text": "Python interpreter we want to run on a per project basis. And if you ever want to change this,",
    "textdich": ""
  },
  {
    "start": 942.56,
    "end": 947.28,
    "text": "or for some reason, it wasn't able to find this correctly, just go ahead and select view,",
    "textdich": ""
  },
  {
    "start": 947.28,
    "end": 952.56,
    "text": "command palette. And then it automatically found the most recently used ones, but you would just",
    "textdich": ""
  },
  {
    "start": 952.56,
    "end": 958.16,
    "text": "search for Python, select interpreter, select this. And it shows the currently selected interpreter,",
    "textdich": ""
  },
  {
    "start": 958.16,
    "end": 962.48,
    "text": "but you can also enter in the path to find a specific interpreter. So you would just find",
    "textdich": ""
  },
  {
    "start": 962.48,
    "end": 967.2,
    "text": "wherever Python two dot seven was installed. If you wanted to use that, or if it was unable to",
    "textdich": ""
  },
  {
    "start": 967.2,
    "end": 971.76,
    "text": "find three dot nine dot six, go ahead and just find where Python three dot nine to six was",
    "textdich": ""
  },
  {
    "start": 971.76,
    "end": 977.36,
    "text": "installed on your machine and point to that Python dot exe file. Actually, it's not called dot exe",
    "textdich": ""
  },
  {
    "start": 977.36,
    "end": 981.36,
    "text": "within Mac, I forget what it's called on a Mac, I actually use a Windows machine for most of my",
    "textdich": ""
  },
  {
    "start": 981.36,
    "end": 986.48,
    "text": "things. But that's all you have to do. And so at this point, we've got Python setup. And then we've",
    "textdich": ""
  },
  {
    "start": 986.48,
    "end": 993.68,
    "text": "got our VS code setup. So once again, anytime VS code closes, you want to open it back up and then",
    "textdich": ""
  },
  {
    "start": 993.68,
    "end": 1000.32,
    "text": "open up the folder fast API in this case. In this video, I'm going to walk you through setting up",
    "textdich": ""
  },
  {
    "start": 1000.32,
    "end": 1006.08,
    "text": "Python as well as VS code on a Windows machine. So the first thing that we're going to do is within",
    "textdich": ""
  },
  {
    "start": 1006.08,
    "end": 1010.32,
    "text": "your web browser, just search for Python. And then we're going to select the first result.",
    "textdich": ""
  },
  {
    "start": 1010.32,
    "end": 1014.16,
    "text": "So this is going to take us to the main Python page, we want to go to the download section.",
    "textdich": ""
  },
  {
    "start": 1014.72,
    "end": 1019.12,
    "text": "And so here, Python, the website's going to offer you up whatever the latest version of Python is.",
    "textdich": ""
  },
  {
    "start": 1019.12,
    "end": 1023.44,
    "text": "In this case, it happens to be three dot nine dot six. Keep in mind, if you're watching this video",
    "textdich": ""
  },
  {
    "start": 1023.44,
    "end": 1026.56,
    "text": "in the future, it's going to show some other version. And that's okay, go ahead and just",
    "textdich": ""
  },
  {
    "start": 1026.56,
    "end": 1030.96,
    "text": "download the latest version. As long as it's a later than three dot seven, you should be okay.",
    "textdich": ""
  },
  {
    "start": 1030.96,
    "end": 1035.76,
    "text": "So I'm going to just hit download Python three dot nine at six. I'm going to download that once",
    "textdich": ""
  },
  {
    "start": 1035.76,
    "end": 1038.72,
    "text": "it's finished downloading, I'm going to select that and it's going to open up the installer.",
    "textdich": ""
  },
  {
    "start": 1039.6,
    "end": 1044.96,
    "text": "Now with this installer open, it's very important that you select add Python three dot nine to",
    "textdich": ""
  },
  {
    "start": 1044.96,
    "end": 1049.12,
    "text": "path. Do not forget to do this, or then you're going to run into some issues. So make sure that's",
    "textdich": ""
  },
  {
    "start": 1049.12,
    "end": 1053.2,
    "text": "selected and then hit install. Now, if you go through the installation process, and you realize",
    "textdich": ""
  },
  {
    "start": 1053.2,
    "end": 1057.92,
    "text": "you forgot to do this, technically, there's a way to fix it afterwards. But instead of me explaining",
    "textdich": ""
  },
  {
    "start": 1057.92,
    "end": 1062.64,
    "text": "to do that, the best thing to do is just uninstall Python and reinstall it. So hit install. Now,",
    "textdich": ""
  },
  {
    "start": 1063.28,
    "end": 1067.92,
    "text": "you'll get a pop up, just go ahead and hit Yes. All right. And once you see this message where",
    "textdich": ""
  },
  {
    "start": 1067.92,
    "end": 1071.6,
    "text": "it says set up was successful, that means Python was installed. And the next thing that we want to",
    "textdich": ""
  },
  {
    "start": 1071.6,
    "end": 1075.76,
    "text": "do is just quickly verify that Python is up and running and working. So what we're gonna do is",
    "textdich": ""
  },
  {
    "start": 1075.76,
    "end": 1080.8,
    "text": "we're just going to search for CMD. So it's going to open up our command prompt or terminal. And",
    "textdich": ""
  },
  {
    "start": 1080.8,
    "end": 1089.84,
    "text": "then in here, just type in Python, dash three, dash dash version. Sorry, we should actually type",
    "textdich": ""
  },
  {
    "start": 1089.84,
    "end": 1095.36,
    "text": "in Python py dash three, dash dash version. Alright, and so when you type this command in,",
    "textdich": ""
  },
  {
    "start": 1096.0,
    "end": 1099.36,
    "text": "it's going to tell us the specific version that we installed. So we can see that I was successfully",
    "textdich": ""
  },
  {
    "start": 1099.36,
    "end": 1104.4,
    "text": "installed Python three dot nine dot six. If you get any kind of error, or any message saying that",
    "textdich": ""
  },
  {
    "start": 1104.4,
    "end": 1108.72,
    "text": "this command is not available, that means that Python wasn't installed successfully. So just go",
    "textdich": ""
  },
  {
    "start": 1108.72,
    "end": 1113.36,
    "text": "ahead and redo that process just in case. Now, the next thing that we want to do is install VS code.",
    "textdich": ""
  },
  {
    "start": 1113.36,
    "end": 1119.28,
    "text": "So let's open up a new tab, just search for VS code. And then we'll select this is going to take",
    "textdich": ""
  },
  {
    "start": 1119.28,
    "end": 1123.68,
    "text": "us to this page. And you'll see that VS code will automatically detect what version you're running.",
    "textdich": ""
  },
  {
    "start": 1123.68,
    "end": 1130.64,
    "text": "So you can just like download for Windows. And then once it's finished in downloading,",
    "textdich": ""
  },
  {
    "start": 1130.64,
    "end": 1138.88,
    "text": "go ahead and open it up at the accept agreement at next, next, next, and then you can leave everything",
    "textdich": ""
  },
  {
    "start": 1138.88,
    "end": 1144.56,
    "text": "as default. And then go ahead and run install. Alright, and then go ahead and finish it's going",
    "textdich": ""
  },
  {
    "start": 1144.56,
    "end": 1153.2,
    "text": "to automatically open up VS code. Now there's a couple of things I want to do. So VS code at its",
    "textdich": ""
  },
  {
    "start": 1153.2,
    "end": 1159.04,
    "text": "core is just a basic text editor. However, we can install extensions that give it extra functionality,",
    "textdich": ""
  },
  {
    "start": 1159.04,
    "end": 1164.56,
    "text": "extra features that will make it operate a little bit more like a full blown ID. So go ahead and",
    "textdich": ""
  },
  {
    "start": 1164.56,
    "end": 1169.28,
    "text": "select this icon right here. This is for extensions. And then what we want to do is we want to search",
    "textdich": ""
  },
  {
    "start": 1169.28,
    "end": 1174.88,
    "text": "for Python. And we usually just want to select the first one, it'll have a star and it's gonna be the",
    "textdich": ""
  },
  {
    "start": 1174.88,
    "end": 1179.04,
    "text": "one made by Microsoft, you'll see that there's other ones made by other users, but we want the",
    "textdich": ""
  },
  {
    "start": 1179.04,
    "end": 1183.76,
    "text": "main Microsoft one, hit install. And so this extension is going to give us IntelliSense,",
    "textdich": ""
  },
  {
    "start": 1183.76,
    "end": 1187.68,
    "text": "linting, debugging, and a few other features that are going to make it a little bit easier to start",
    "textdich": ""
  },
  {
    "start": 1187.68,
    "end": 1192.88,
    "text": "working with Python within VS code. Alright, and so now that it's done installing, we can just",
    "textdich": ""
  },
  {
    "start": 1192.88,
    "end": 1199.12,
    "text": "close this, close this, and then select this one to get back to your main file browser. And right",
    "textdich": ""
  },
  {
    "start": 1199.12,
    "end": 1204.0,
    "text": "now we haven't opened up any folder. So what we want to do is we want to create a folder to store",
    "textdich": ""
  },
  {
    "start": 1204.0,
    "end": 1209.28,
    "text": "all of our application code. So select open folder, and then figure out where you want to",
    "textdich": ""
  },
  {
    "start": 1209.28,
    "end": 1212.48,
    "text": "store your application code. So I'm just gonna store this in my documents, you can store this",
    "textdich": ""
  },
  {
    "start": 1212.48,
    "end": 1217.12,
    "text": "wherever you want. I'm gonna create a new file or a new folder, I'm just gonna call it fast API.",
    "textdich": ""
  },
  {
    "start": 1217.12,
    "end": 1223.36,
    "text": "But you can name your project whatever you want. So just select folder. And so that's going to not",
    "textdich": ""
  },
  {
    "start": 1223.36,
    "end": 1227.2,
    "text": "have only create not only create the folder, but it's going to open it up within VS code. If you",
    "textdich": ""
  },
  {
    "start": 1227.2,
    "end": 1232.32,
    "text": "get this error, just select Trust the author, and just like yes. And then we can close out this",
    "textdich": ""
  },
  {
    "start": 1232.32,
    "end": 1238.8,
    "text": "welcome menu. And so now what we have is we've opened up whoops, we've opened up VS code. And",
    "textdich": ""
  },
  {
    "start": 1238.8,
    "end": 1243.76,
    "text": "within VS code, we've opened up our project code. So right now there's no code that's to be expected.",
    "textdich": ""
  },
  {
    "start": 1243.76,
    "end": 1248.56,
    "text": "But what I want to do is I want to create a new file real quick, just for testing purposes.",
    "textdich": ""
  },
  {
    "start": 1248.56,
    "end": 1252.64,
    "text": "So I'm just gonna right click hit new file, and I'm going to name it name main.py.",
    "textdich": ""
  },
  {
    "start": 1253.84,
    "end": 1258.24,
    "text": "And so we want to name it.py, because there's gonna be a Python file. And before I hit enter,",
    "textdich": ""
  },
  {
    "start": 1258.24,
    "end": 1261.76,
    "text": "I want you to focus your eyes right down here. And you'll notice something happens down there.",
    "textdich": ""
  },
  {
    "start": 1262.4,
    "end": 1266.72,
    "text": "So when I hit enter, you'll see activating extension. So it's activating the Python extension.",
    "textdich": ""
  },
  {
    "start": 1266.72,
    "end": 1271.04,
    "text": "And what the Python extension is going to do is it's automatically going to select the correct",
    "textdich": ""
  },
  {
    "start": 1271.04,
    "end": 1274.96,
    "text": "Python interpreter, or it may not be correct, depending on what happens on your machine.",
    "textdich": ""
  },
  {
    "start": 1274.96,
    "end": 1278.48,
    "text": "For me, it automatically detected Python three dot nine dot six was installed on the machine. So",
    "textdich": ""
  },
  {
    "start": 1278.48,
    "end": 1283.28,
    "text": "let's selected that one for me. Keep in mind, if you have multiple versions of Python installed,",
    "textdich": ""
  },
  {
    "start": 1283.28,
    "end": 1287.6,
    "text": "it may select the wrong interpreter. So what you can do is if you ever want to change the",
    "textdich": ""
  },
  {
    "start": 1287.6,
    "end": 1293.04,
    "text": "interpreter or specify a specific interpreter, go to view command palette. And what I want you to",
    "textdich": ""
  },
  {
    "start": 1293.04,
    "end": 1300.08,
    "text": "do is search for Python interpreter, and then look for a Python select interpreter. So right now,",
    "textdich": ""
  },
  {
    "start": 1300.08,
    "end": 1304.88,
    "text": "it's going to highlight where the current Python interpreters which one selected and what's the",
    "textdich": ""
  },
  {
    "start": 1304.88,
    "end": 1309.36,
    "text": "executable for it. But if you want to change that you can select enter interpreter path and then",
    "textdich": ""
  },
  {
    "start": 1309.36,
    "end": 1313.6,
    "text": "provide the path to the specific version that you want. So you can always change it. But usually",
    "textdich": ""
  },
  {
    "start": 1313.6,
    "end": 1317.76,
    "text": "it's able to detect the latest version. So you should be good to go. And so that's all I wanted",
    "textdich": ""
  },
  {
    "start": 1317.76,
    "end": 1322.72,
    "text": "to do from a setup perspective. There's one more thing that we'll cover later. But we'll get to",
    "textdich": ""
  },
  {
    "start": 1322.72,
    "end": 1327.2,
    "text": "that in the next section. But right now we've got Python installed and we've got VS code set up.",
    "textdich": ""
  },
  {
    "start": 1327.2,
    "end": 1332.88,
    "text": "And we've got our project directory setup, so we should be good to go. So now that we have Python",
    "textdich": ""
  },
  {
    "start": 1332.88,
    "end": 1337.28,
    "text": "and VS code setup, the next thing that we have to do is set up our virtual environment. Before we",
    "textdich": ""
  },
  {
    "start": 1337.28,
    "end": 1341.28,
    "text": "do that, we have to actually talk about what our virtual environments and what problem do they try",
    "textdich": ""
  },
  {
    "start": 1341.28,
    "end": 1346.4,
    "text": "to address. So let me give you a little bit of an example scenario of the issue that we can run",
    "textdich": ""
  },
  {
    "start": 1346.4,
    "end": 1351.52,
    "text": "into when working with specific packages within Python on your local machine. So let's say that",
    "textdich": ""
  },
  {
    "start": 1351.52,
    "end": 1355.68,
    "text": "we created a project and this project is called project one. And what we need to do is we need",
    "textdich": ""
  },
  {
    "start": 1355.68,
    "end": 1361.36,
    "text": "to install fast API version one dot two dot one. So what do we do, we install version one dot two",
    "textdich": ""
  },
  {
    "start": 1361.36,
    "end": 1366.64,
    "text": "dot one on our machine so that we can actually use that version. Now let's say later down the road,",
    "textdich": ""
  },
  {
    "start": 1366.64,
    "end": 1372.96,
    "text": "we start a new project called project two. And let's say this version requires us to run fast",
    "textdich": ""
  },
  {
    "start": 1372.96,
    "end": 1376.48,
    "text": "API version two dot four dot three, because we want to try out some of the newer features.",
    "textdich": ""
  },
  {
    "start": 1377.04,
    "end": 1382.24,
    "text": "Well, at this point, if we need to try out a newer version, we have to upgrade fast API to version",
    "textdich": ""
  },
  {
    "start": 1382.24,
    "end": 1387.12,
    "text": "two dot four dot three on our local machine. And this may or may not be a problem, it really just",
    "textdich": ""
  },
  {
    "start": 1387.12,
    "end": 1392.32,
    "text": "depends on if version two dot four dot three is backwards compatible with version one dot two dot",
    "textdich": ""
  },
  {
    "start": 1392.32,
    "end": 1397.44,
    "text": "one. Because if version two dot four dot three has breaking changes, then ultimately, that's going",
    "textdich": ""
  },
  {
    "start": 1397.44,
    "end": 1401.52,
    "text": "to create issues with our project one because that project expects us to run version one dot two dot",
    "textdich": ""
  },
  {
    "start": 1401.52,
    "end": 1406.32,
    "text": "one. And so if we can upgrade, well, we're in a little bit of a pickle because one project needs",
    "textdich": ""
  },
  {
    "start": 1406.32,
    "end": 1410.16,
    "text": "one version, the other project needs another version, we can have two different versions",
    "textdich": ""
  },
  {
    "start": 1410.16,
    "end": 1415.28,
    "text": "installed on our machine. So what exactly do we do? Well, this is where virtual environments come",
    "textdich": ""
  },
  {
    "start": 1415.28,
    "end": 1420.48,
    "text": "into play. So with virtual environments, let's say we want to create a project. So we create",
    "textdich": ""
  },
  {
    "start": 1420.48,
    "end": 1424.72,
    "text": "project one. And what we do is we create a virtual environment, call it whatever you want. And so this",
    "textdich": ""
  },
  {
    "start": 1424.72,
    "end": 1429.84,
    "text": "is a isolated environment that will not affect any other environments. And within this environment,",
    "textdich": ""
  },
  {
    "start": 1429.84,
    "end": 1435.2,
    "text": "we can install any Python packages running whatever version we want. And it's completely isolated to",
    "textdich": ""
  },
  {
    "start": 1435.2,
    "end": 1440.08,
    "text": "this project. And so when we create a second project, what we can do is we can create its very",
    "textdich": ""
  },
  {
    "start": 1440.08,
    "end": 1444.08,
    "text": "own virtual environment as well, we'll call it virtual environment two. And within this virtual",
    "textdich": ""
  },
  {
    "start": 1444.08,
    "end": 1448.88,
    "text": "environment, we can install any version of any package that we want. So then we can install",
    "textdich": ""
  },
  {
    "start": 1448.88,
    "end": 1454.0,
    "text": "version two dot four dot three. And so both of these virtual environments are completely separated,",
    "textdich": ""
  },
  {
    "start": 1454.0,
    "end": 1458.88,
    "text": "completely isolated with one another. And so we can essentially install multiple different versions",
    "textdich": ""
  },
  {
    "start": 1458.88,
    "end": 1464.24,
    "text": "of a single package for each of our projects. And that way, our projects don't end up stepping on",
    "textdich": ""
  },
  {
    "start": 1464.24,
    "end": 1468.96,
    "text": "the toes of other projects. And so now that we have a basic understanding of virtual environments,",
    "textdich": ""
  },
  {
    "start": 1468.96,
    "end": 1472.96,
    "text": "let's go ahead and figure out how we can actually create our first virtual environment and use it",
    "textdich": ""
  },
  {
    "start": 1472.96,
    "end": 1479.2,
    "text": "within our project. In this video, I'm going to walk you through setting up a virtual environment",
    "textdich": ""
  },
  {
    "start": 1479.2,
    "end": 1484.0,
    "text": "on a Windows machine. Now, if you already close out your VS code window, go ahead and open up a",
    "textdich": ""
  },
  {
    "start": 1484.0,
    "end": 1489.44,
    "text": "new one and make sure you open up the specific directory we created a couple lessons ago. Now,",
    "textdich": ""
  },
  {
    "start": 1489.44,
    "end": 1493.84,
    "text": "what we want to do is we want to select terminal, and we want to select new terminal. And this is",
    "textdich": ""
  },
  {
    "start": 1493.84,
    "end": 1499.28,
    "text": "a awesome feature with VS code, it allows us to have a integrated terminal within our VS code",
    "textdich": ""
  },
  {
    "start": 1499.28,
    "end": 1504.16,
    "text": "window. And this terminal is fundamentally no different than a regular terminal within Windows,",
    "textdich": ""
  },
  {
    "start": 1504.16,
    "end": 1507.84,
    "text": "it's just built into VS code so that we don't have to keep flipping between different windows.",
    "textdich": ""
  },
  {
    "start": 1508.56,
    "end": 1512.72,
    "text": "And if you actually take a look at this right column, we can have multiple terminals open and",
    "textdich": ""
  },
  {
    "start": 1512.72,
    "end": 1517.2,
    "text": "we can even use different terminals. So the default one on this machine happens to be PowerShell.",
    "textdich": ""
  },
  {
    "start": 1517.2,
    "end": 1520.48,
    "text": "But you can also use command prompt if that's what you prefer. So if you select command prompt,",
    "textdich": ""
  },
  {
    "start": 1520.48,
    "end": 1524.24,
    "text": "it's going to create a new terminal. And you can see that this is a traditional command prompt,",
    "textdich": ""
  },
  {
    "start": 1524.24,
    "end": 1527.92,
    "text": "I'm going to use this one because that's the one I normally use. However, if you're more comfortable",
    "textdich": ""
  },
  {
    "start": 1527.92,
    "end": 1533.68,
    "text": "with PowerShell, feel free to use that. Now the command to actually create a virtual environment",
    "textdich": ""
  },
  {
    "start": 1533.68,
    "end": 1542.0,
    "text": "within Windows is p y dash three dash m b n v. So that stands for virtual environment. And then you",
    "textdich": ""
  },
  {
    "start": 1542.0,
    "end": 1546.16,
    "text": "want to give it a name. So give whatever name you want for your virtual environment, you can name it",
    "textdich": ""
  },
  {
    "start": 1546.16,
    "end": 1553.2,
    "text": "after your project name, or you could just do what I do, which is just call it V and V. And what I",
    "textdich": ""
  },
  {
    "start": 1553.2,
    "end": 1557.6,
    "text": "like to do is for all of my projects, I give it the same exact name. And that's perfectly okay,",
    "textdich": ""
  },
  {
    "start": 1557.6,
    "end": 1563.04,
    "text": "because this virtual environment is going to be isolated to this project directory. And so even",
    "textdich": ""
  },
  {
    "start": 1563.04,
    "end": 1567.84,
    "text": "though this project has a virtual environment in V and V, I can create another virtual environment",
    "textdich": ""
  },
  {
    "start": 1567.84,
    "end": 1571.92,
    "text": "in any other project with the same exact name, they're all going to be isolated to that specific",
    "textdich": ""
  },
  {
    "start": 1571.92,
    "end": 1577.36,
    "text": "project folder. So go ahead and hit enter. And take a look over here, you'll see that a folder",
    "textdich": ""
  },
  {
    "start": 1577.36,
    "end": 1582.64,
    "text": "was created called via virtual environment or V and V. And that's going to be the name of this",
    "textdich": ""
  },
  {
    "start": 1582.64,
    "end": 1587.04,
    "text": "folder is always going to refer to whatever name you gave it. So if I named this cookies,",
    "textdich": ""
  },
  {
    "start": 1587.04,
    "end": 1591.12,
    "text": "this would open up a new folder called cookies. And if you want, you can take a look at what's",
    "textdich": ""
  },
  {
    "start": 1591.12,
    "end": 1595.68,
    "text": "in here. And if you go under scripts specifically, you'll notice that we've got our Python executable.",
    "textdich": ""
  },
  {
    "start": 1595.68,
    "end": 1601.12,
    "text": "So this is going to act as our new interpreter. And so what we want to do is right now we are",
    "textdich": ""
  },
  {
    "start": 1601.12,
    "end": 1606.24,
    "text": "using our global interpreter. And we want to change that we don't want to use the global one,",
    "textdich": ""
  },
  {
    "start": 1606.24,
    "end": 1611.52,
    "text": "we want to use the specific one in our virtual environment. And that way we can install packages",
    "textdich": ""
  },
  {
    "start": 1611.52,
    "end": 1616.32,
    "text": "that are exclusive to just this specific virtual environment. And so to do that, go ahead and",
    "textdich": ""
  },
  {
    "start": 1616.32,
    "end": 1621.84,
    "text": "select view once again. And we want to go to command palette, and then search for Python",
    "textdich": ""
  },
  {
    "start": 1621.84,
    "end": 1628.16,
    "text": "select interpreter, as usual. And then you'll see the one we're currently using, but we want to pass",
    "textdich": ""
  },
  {
    "start": 1628.16,
    "end": 1633.36,
    "text": "in our newest one. So select enter interpreter path. And then we want to give it the path to",
    "textdich": ""
  },
  {
    "start": 1633.36,
    "end": 1638.48,
    "text": "our interpreter, which is the path from the root of our project directory to this Python dot exe",
    "textdich": ""
  },
  {
    "start": 1638.48,
    "end": 1643.84,
    "text": "file, we're going to say dot, which is our current folder. So this is going to be the fast API folder.",
    "textdich": ""
  },
  {
    "start": 1643.84,
    "end": 1650.88,
    "text": "And then within here, we want to go into scripts. And then within scripts, well, sorry, we want to",
    "textdich": ""
  },
  {
    "start": 1650.88,
    "end": 1659.36,
    "text": "go into the virtual envy folder, then scripts, and then Python dot exe, go ahead and hit enter.",
    "textdich": ""
  },
  {
    "start": 1660.08,
    "end": 1664.08,
    "text": "And then if you look down here, you'll see that this gets updated. So now we're still using three",
    "textdich": ""
  },
  {
    "start": 1664.08,
    "end": 1669.28,
    "text": "dot nine dot six, but we're using our virtual environment. And so that's all we need to do.",
    "textdich": ""
  },
  {
    "start": 1669.28,
    "end": 1674.32,
    "text": "And it should remember this every time we open up our project, however, double check every time you",
    "textdich": ""
  },
  {
    "start": 1674.32,
    "end": 1678.32,
    "text": "open up just to make sure you're using that if it's for some reason moved back to the default one,",
    "textdich": ""
  },
  {
    "start": 1678.32,
    "end": 1683.52,
    "text": "just do the same process. Now, the second thing that we need to do is we need to make sure our",
    "textdich": ""
  },
  {
    "start": 1683.52,
    "end": 1688.88,
    "text": "terminal is also using the virtual environment. And so what we want to do to do that is just type in",
    "textdich": ""
  },
  {
    "start": 1690.96,
    "end": 1696.4,
    "text": "the path to this specific activate dot bat file, this is going to activate that virtual environment",
    "textdich": ""
  },
  {
    "start": 1696.4,
    "end": 1705.52,
    "text": "within our command line as well. So I'm going to say virtual envy. And then we want to pass in",
    "textdich": ""
  },
  {
    "start": 1705.52,
    "end": 1715.76,
    "text": "our scripts folder, and then activate dot that hit enter. And then notice what's changed, right.",
    "textdich": ""
  },
  {
    "start": 1715.76,
    "end": 1719.28,
    "text": "So when you're using a virtual environment, right, you're going to see the name of the virtual",
    "textdich": ""
  },
  {
    "start": 1719.28,
    "end": 1723.68,
    "text": "environment to the side of it. So always double check whenever you start up VS code, and you start",
    "textdich": ""
  },
  {
    "start": 1723.68,
    "end": 1728.24,
    "text": "up your project, that this is enabled, if you don't see this, then just run the same exact command.",
    "textdich": ""
  },
  {
    "start": 1728.24,
    "end": 1732.24,
    "text": "And that's going to reactivate the virtual environment. And so at this point, we are good",
    "textdich": ""
  },
  {
    "start": 1732.24,
    "end": 1737.92,
    "text": "to go with our virtual environment. And we can start coding out our project. In this video,",
    "textdich": ""
  },
  {
    "start": 1737.92,
    "end": 1741.68,
    "text": "I'm going to walk you through setting up a virtual environment on a Mac machine. Now,",
    "textdich": ""
  },
  {
    "start": 1741.68,
    "end": 1745.92,
    "text": "if you've already closed out your VS code window, go ahead and open it back up and open up the",
    "textdich": ""
  },
  {
    "start": 1745.92,
    "end": 1751.36,
    "text": "folder that we created a couple lessons ago. And within here, what we want to do is we want to",
    "textdich": ""
  },
  {
    "start": 1751.36,
    "end": 1755.52,
    "text": "access our terminal. So we can access our terminal just by selecting this. And then this is our",
    "textdich": ""
  },
  {
    "start": 1755.52,
    "end": 1760.08,
    "text": "terminal. However, VS code has a feature where we can access the terminal directly within our VS",
    "textdich": ""
  },
  {
    "start": 1760.08,
    "end": 1764.88,
    "text": "code window. So if we select terminal and the new terminal, that's going to create a new terminal",
    "textdich": ""
  },
  {
    "start": 1764.88,
    "end": 1772.16,
    "text": "for us. All right. And so this is fundamentally the same thing as this terminal right here,",
    "textdich": ""
  },
  {
    "start": 1772.16,
    "end": 1776.16,
    "text": "it's no different. But at least by having it built into VS code, we don't have to keep flipping",
    "textdich": ""
  },
  {
    "start": 1776.16,
    "end": 1779.76,
    "text": "back and forth between the two. So you can use either one, whichever your preferences,",
    "textdich": ""
  },
  {
    "start": 1779.76,
    "end": 1783.84,
    "text": "keep in mind that when you open up the terminal within VS code, it automatically moves you",
    "textdich": ""
  },
  {
    "start": 1783.84,
    "end": 1788.64,
    "text": "to the the directory folder of your project. So you don't have to move there yourself.",
    "textdich": ""
  },
  {
    "start": 1788.64,
    "end": 1792.56,
    "text": "You can use whichever one you want. Now, I'm actually using I'm running Mac on a virtual",
    "textdich": ""
  },
  {
    "start": 1792.56,
    "end": 1797.04,
    "text": "machine right now, just because I natively use a Windows machine. So I don't actually own a Mac.",
    "textdich": ""
  },
  {
    "start": 1797.04,
    "end": 1801.52,
    "text": "So this is a little bit buggy. And if you see me type things, you can see it vanish. So for",
    "textdich": ""
  },
  {
    "start": 1801.52,
    "end": 1805.36,
    "text": "demonstration purposes, I'm just going to use the regular terminal, but I strongly recommend you use",
    "textdich": ""
  },
  {
    "start": 1805.36,
    "end": 1810.8,
    "text": "the one built into VS code. So you don't have to keep flipping back and forth. Now to actually",
    "textdich": ""
  },
  {
    "start": 1810.8,
    "end": 1816.8,
    "text": "create a virtual environment, there's a one command that we have to run. So you run Python,",
    "textdich": ""
  },
  {
    "start": 1816.8,
    "end": 1825.28,
    "text": "three dash M, V, N, V for virtual environment, and then you have to give it a name. So what name do",
    "textdich": ""
  },
  {
    "start": 1825.28,
    "end": 1828.56,
    "text": "you want to give your virtual environment? You can technically give it any name you want. You can",
    "textdich": ""
  },
  {
    "start": 1828.56,
    "end": 1833.84,
    "text": "name it after your project, you can give it some arbitrary name. What I like to do is I like to",
    "textdich": ""
  },
  {
    "start": 1833.84,
    "end": 1839.84,
    "text": "name all of my virtual environments, V, N, V. And so for every project that I create, I just create",
    "textdich": ""
  },
  {
    "start": 1840.56,
    "end": 1845.04,
    "text": "the same exact virtual environment name, V, N, V. And that's not going to create an issue. It's",
    "textdich": ""
  },
  {
    "start": 1845.04,
    "end": 1848.72,
    "text": "perfectly okay to name all of your virtual environments the same thing, because it's all",
    "textdich": ""
  },
  {
    "start": 1848.72,
    "end": 1853.04,
    "text": "going to be exclusive to this specific project folder. So no other projects can access it. So",
    "textdich": ""
  },
  {
    "start": 1853.04,
    "end": 1857.6,
    "text": "it's okay, if they all use the same name, it's just easier. And so that way, you know, if I ever",
    "textdich": ""
  },
  {
    "start": 1857.6,
    "end": 1863.28,
    "text": "create a get ignore file, I can automatically add V, N, V. And I can make sure to just use the same",
    "textdich": ""
  },
  {
    "start": 1863.28,
    "end": 1868.48,
    "text": "exact get ignore template across all of my Python projects. So I'm going to use V, N, V. And I want",
    "textdich": ""
  },
  {
    "start": 1868.48,
    "end": 1872.4,
    "text": "to make sure that you pay attention right here. Because after I run this command, take a look at",
    "textdich": ""
  },
  {
    "start": 1872.4,
    "end": 1878.24,
    "text": "what happens. It creates a folder called V, N, V. And that's based off of the name of the virtual",
    "textdich": ""
  },
  {
    "start": 1878.24,
    "end": 1882.16,
    "text": "environment. And if we take a look at our virtual environment, you can see a couple of different",
    "textdich": ""
  },
  {
    "start": 1882.16,
    "end": 1887.84,
    "text": "files, you can see the, the Python file as well. So if you go under bin, this is going to be the",
    "textdich": ""
  },
  {
    "start": 1887.84,
    "end": 1892.96,
    "text": "new Python file or the Python three file that we're going to use for our interpreter. So down here",
    "textdich": ""
  },
  {
    "start": 1892.96,
    "end": 1897.92,
    "text": "at the bottom, you'll see that we are still using the global interpreter, we no longer want to use",
    "textdich": ""
  },
  {
    "start": 1897.92,
    "end": 1902.08,
    "text": "the global one, we want to use the one in our virtual environment. That way, we don't, you know,",
    "textdich": ""
  },
  {
    "start": 1902.08,
    "end": 1906.08,
    "text": "cause any issues with other projects, we want to use the virtual environment. So to do that,",
    "textdich": ""
  },
  {
    "start": 1906.08,
    "end": 1914.0,
    "text": "what we want to do is we want to select a view, command palette. And then we want to do the",
    "textdich": ""
  },
  {
    "start": 1914.0,
    "end": 1919.36,
    "text": "Python select interpreter again. So we'll select that. Right. And so right now, it shows us that",
    "textdich": ""
  },
  {
    "start": 1920.08,
    "end": 1925.2,
    "text": "we are using the global one, however, we're going to pass in the path to our specific interpreter",
    "textdich": ""
  },
  {
    "start": 1925.2,
    "end": 1930.64,
    "text": "within our virtual environment. So we'll select enter interpreter path. We'll say dot for current",
    "textdich": ""
  },
  {
    "start": 1930.64,
    "end": 1935.92,
    "text": "directory. And so that's going to mean the current fast API directory, then within there, we want to",
    "textdich": ""
  },
  {
    "start": 1935.92,
    "end": 1941.76,
    "text": "go into the virtual environment folder. And then within there, we want to go into bin. And then",
    "textdich": ""
  },
  {
    "start": 1941.76,
    "end": 1948.48,
    "text": "just say Python. And so we'll hit enter. And then take a look at what happens down here.",
    "textdich": ""
  },
  {
    "start": 1949.6,
    "end": 1954.16,
    "text": "Right, you notice that the version still says three dot nine dot six, but our interpreter is",
    "textdich": ""
  },
  {
    "start": 1954.16,
    "end": 1959.36,
    "text": "actually pointing to our local virtual environment now, because we changed the interpreter to use",
    "textdich": ""
  },
  {
    "start": 1959.36,
    "end": 1964.88,
    "text": "this specific Python file right here. And so this is what's going to allow us to install our own",
    "textdich": ""
  },
  {
    "start": 1964.88,
    "end": 1969.12,
    "text": "specific fast API version, as well as any other version of any package that we want. So it doesn't",
    "textdich": ""
  },
  {
    "start": 1969.12,
    "end": 1973.6,
    "text": "actually install it globally on our machine. Now, we're almost done. But there's one other thing to",
    "textdich": ""
  },
  {
    "start": 1973.6,
    "end": 1978.24,
    "text": "note. If you look at our terminal, our terminal isn't using our virtual environment. So if I run",
    "textdich": ""
  },
  {
    "start": 1978.24,
    "end": 1982.8,
    "text": "pip install any package, it's not going to install it for a specific virtual environment, it's going",
    "textdich": ""
  },
  {
    "start": 1982.8,
    "end": 1987.12,
    "text": "to install globally. So we have to enable the virtual environment for the command line as well.",
    "textdich": ""
  },
  {
    "start": 1988.96,
    "end": 1997.12,
    "text": "And to do that, all you have to do is type in source. And then we want to pass in the path to",
    "textdich": ""
  },
  {
    "start": 1997.12,
    "end": 2006.48,
    "text": "this specific activate file right here within bin. So we do the env slash bin slash activate,",
    "textdich": ""
  },
  {
    "start": 2006.48,
    "end": 2012.64,
    "text": "hit enter. And then notice how our command line changes. Now it's prepended by the name of our",
    "textdich": ""
  },
  {
    "start": 2012.64,
    "end": 2017.04,
    "text": "virtual environment. So since we named it v env, you can see that it shows it right before the",
    "textdich": ""
  },
  {
    "start": 2017.04,
    "end": 2022.08,
    "text": "terminal. And so that's all you have to do. Our virtual environment is set up, keep in mind,",
    "textdich": ""
  },
  {
    "start": 2022.08,
    "end": 2027.92,
    "text": "if you close out your terminal, and then reopen it, you'll notice that your virtual environment",
    "textdich": ""
  },
  {
    "start": 2027.92,
    "end": 2031.84,
    "text": "is gone. So you have to run that same exact command every time you open up your terminal to ensure",
    "textdich": ""
  },
  {
    "start": 2031.84,
    "end": 2037.76,
    "text": "that you are in your virtual environment. And anytime you close out VS code, make sure that",
    "textdich": ""
  },
  {
    "start": 2037.76,
    "end": 2041.92,
    "text": "when you reopen your project, it still points to the virtual environment. If for some reason it",
    "textdich": ""
  },
  {
    "start": 2041.92,
    "end": 2046.48,
    "text": "changes, then just go back to that command palette, by going to view command palette, and then",
    "textdich": ""
  },
  {
    "start": 2046.48,
    "end": 2051.28,
    "text": "selecting the interpreter that you specifically want. But that's all we have to do guys. So our",
    "textdich": ""
  },
  {
    "start": 2051.28,
    "end": 2055.68,
    "text": "virtual environment set up. And so at this point, we can go ahead and get started on coding out our",
    "textdich": ""
  },
  {
    "start": 2055.68,
    "end": 2061.68,
    "text": "project. But now that we got our environment set up, it's time to get started coding out",
    "textdich": ""
  },
  {
    "start": 2061.68,
    "end": 2066.8,
    "text": "our project. And what I want you guys to do is first of all, go to the fast API documentation,",
    "textdich": ""
  },
  {
    "start": 2066.8,
    "end": 2071.2,
    "text": "this is really important. What I want you guys to do is really get a solid understanding of how",
    "textdich": ""
  },
  {
    "start": 2071.2,
    "end": 2076.24,
    "text": "the documentation works. So pull up the fast API website, and then head on over to the tutorial",
    "textdich": ""
  },
  {
    "start": 2076.24,
    "end": 2080.8,
    "text": "section and then select the intro part. So this is going to walk us through setting up our project.",
    "textdich": ""
  },
  {
    "start": 2080.8,
    "end": 2086.4,
    "text": "And what we will need to do is first of all, we need to install the fast API package. And so what",
    "textdich": ""
  },
  {
    "start": 2086.4,
    "end": 2093.76,
    "text": "we can do is we can either do pip install fast API, or we can do pip install fast API, all when we do",
    "textdich": ""
  },
  {
    "start": 2094.32,
    "end": 2098.96,
    "text": "pip install fast API, all it's going to install all of the optional dependencies as well, which",
    "textdich": ""
  },
  {
    "start": 2098.96,
    "end": 2102.96,
    "text": "we may or may not need depending on what features we want, we're going to go ahead and use the all",
    "textdich": ""
  },
  {
    "start": 2102.96,
    "end": 2106.88,
    "text": "option because we're going to use a lot of them. And there's no point in having to go one by one",
    "textdich": ""
  },
  {
    "start": 2106.88,
    "end": 2112.24,
    "text": "and install them. So that's what we're going to do. So here, in our command line, and make sure that",
    "textdich": ""
  },
  {
    "start": 2112.24,
    "end": 2119.52,
    "text": "we are in our virtual environment, and then just type in pip install fast API. And then we'll pass",
    "textdich": ""
  },
  {
    "start": 2119.52,
    "end": 2126.0,
    "text": "in all and we'll let that run. Now it's moving fairly fast. But if you kind of scroll through",
    "textdich": ""
  },
  {
    "start": 2126.0,
    "end": 2130.96,
    "text": "the history, you'll notice a lot of packages, and a lot of dependencies that are getting installed.",
    "textdich": ""
  },
  {
    "start": 2130.96,
    "end": 2134.8,
    "text": "So we'll take a look at those once it's done, just to see what are the different dependencies",
    "textdich": ""
  },
  {
    "start": 2134.8,
    "end": 2140.96,
    "text": "that were installed. And so now that that's done, if we type in pip freeze, this is going to show",
    "textdich": ""
  },
  {
    "start": 2140.96,
    "end": 2145.28,
    "text": "all of the packages that were installed. So it's not going to be just fast API, it's going to include",
    "textdich": ""
  },
  {
    "start": 2145.28,
    "end": 2150.4,
    "text": "a lot of the optional dependencies as well. So if we take a look, you can see that we've got",
    "textdich": ""
  },
  {
    "start": 2150.4,
    "end": 2155.68,
    "text": "graph ql installed, if we want to use any graph ql, we have B crypt UV coin, that's going to be",
    "textdich": ""
  },
  {
    "start": 2155.68,
    "end": 2160.48,
    "text": "like our web server web sockets, we want to work with web sockets. So it already comes bundled with",
    "textdich": ""
  },
  {
    "start": 2160.48,
    "end": 2164.48,
    "text": "a lot of things that we're going to use. And I just wanted to make sure that you guys understood",
    "textdich": ""
  },
  {
    "start": 2164.48,
    "end": 2169.12,
    "text": "what's happening when we pass in the that all flag. And if you want to, if you open up your",
    "textdich": ""
  },
  {
    "start": 2169.12,
    "end": 2176.32,
    "text": "virtual environment folder, and you go under lib, you'll see all of the the code associated",
    "textdich": ""
  },
  {
    "start": 2176.32,
    "end": 2179.44,
    "text": "with those packages that we installed. So that's where all of them are going to reside, they're",
    "textdich": ""
  },
  {
    "start": 2179.44,
    "end": 2184.4,
    "text": "all going to reside within the lib folder. Alright, so now that we've got fast API installed,",
    "textdich": ""
  },
  {
    "start": 2184.4,
    "end": 2188.64,
    "text": "the first thing that we have to do is we have to import fast API. And to import fast API,",
    "textdich": ""
  },
  {
    "start": 2188.64,
    "end": 2196.64,
    "text": "we just say from fast API, which is the name of the library, we import fast API.",
    "textdich": ""
  },
  {
    "start": 2196.64,
    "end": 2203.12,
    "text": "Alright, so we've now successfully imported fast API, let's create an instance of fast API. So",
    "textdich": ""
  },
  {
    "start": 2203.12,
    "end": 2210.24,
    "text": "we'll say app equals fast API. And then we'll call that function. Keep in mind, you can name",
    "textdich": ""
  },
  {
    "start": 2210.24,
    "end": 2214.0,
    "text": "this anything you want. But if you take a look at the documentation, and just follow along,",
    "textdich": ""
  },
  {
    "start": 2214.8,
    "end": 2218.32,
    "text": "you can see that it's going to name an app. So I think it's best if we just kind of follow along",
    "textdich": ""
  },
  {
    "start": 2218.32,
    "end": 2222.72,
    "text": "with that convention, then what we're going to do is we're going to just copy this code right here.",
    "textdich": ""
  },
  {
    "start": 2222.72,
    "end": 2226.88,
    "text": "So this is going to be what's referred to as a path operation. And we'll go over what that means",
    "textdich": ""
  },
  {
    "start": 2226.88,
    "end": 2232.24,
    "text": "in a bit. And we'll just paste this here. I want you to save your code, you'll see if you get this",
    "textdich": ""
  },
  {
    "start": 2232.24,
    "end": 2237.28,
    "text": "warning or this message saying format or auto pep eight is not installed, go ahead and hit yes.",
    "textdich": ""
  },
  {
    "start": 2238.4,
    "end": 2243.12,
    "text": "And so this is nice, because it will automatically format our code. So if we ever put too many spaces",
    "textdich": ""
  },
  {
    "start": 2243.12,
    "end": 2246.64,
    "text": "or things like that, you'll see that as soon as you save it, it's going to snap into place and make",
    "textdich": ""
  },
  {
    "start": 2246.64,
    "end": 2250.72,
    "text": "everything look nice and pretty. So let's save this. And so once we've got our code, let's actually",
    "textdich": ""
  },
  {
    "start": 2250.72,
    "end": 2254.96,
    "text": "start our web server up. So how do we actually start our web server? Well, once again, let's",
    "textdich": ""
  },
  {
    "start": 2254.96,
    "end": 2260.72,
    "text": "go to our documentation. So we're going to make use of the uvcoin library. So because we installed",
    "textdich": ""
  },
  {
    "start": 2261.6,
    "end": 2266.24,
    "text": "fast API with the all flag, it automatically installed uvcoin. If you didn't use the all flag,",
    "textdich": ""
  },
  {
    "start": 2266.24,
    "end": 2269.76,
    "text": "then you'll have to do pip install uvcoin as well. But we already got it installed.",
    "textdich": ""
  },
  {
    "start": 2270.4,
    "end": 2278.48,
    "text": "And so let's go back here. And let's run our API. So we do uvcoin. Then what we have to do is we",
    "textdich": ""
  },
  {
    "start": 2278.48,
    "end": 2282.96,
    "text": "have to reference the name of our file. So this is their entry point into our application, which",
    "textdich": ""
  },
  {
    "start": 2282.96,
    "end": 2287.44,
    "text": "is our main file. So here, we're going to say main, keep in mind if this file was named anything",
    "textdich": ""
  },
  {
    "start": 2287.44,
    "end": 2291.36,
    "text": "else, if you don't have to name it main, you can name it anything else, you would just want to pass",
    "textdich": ""
  },
  {
    "start": 2291.36,
    "end": 2296.32,
    "text": "the name of whatever the file name is, then you do colon, then you pass in the name of your fast",
    "textdich": ""
  },
  {
    "start": 2296.32,
    "end": 2303.2,
    "text": "API instance. So we named it app. And so we'll do app. And then we'll start that. Right. And so this",
    "textdich": ""
  },
  {
    "start": 2303.2,
    "end": 2307.6,
    "text": "is saying that we started our server. Perfect. And we could see the URL that our server is running",
    "textdich": ""
  },
  {
    "start": 2307.6,
    "end": 2312.48,
    "text": "on. So it's going to say HTTP colon slash slash 127 dot zero, zero to one. So if you guys don't",
    "textdich": ""
  },
  {
    "start": 2312.48,
    "end": 2317.36,
    "text": "know what that address is, that means it's this machine. So whatever IP address, this machine",
    "textdich": ""
  },
  {
    "start": 2317.36,
    "end": 2322.08,
    "text": "runs on, that's what this is going to be. So it's just saying a we want to refer to the local host,",
    "textdich": ""
  },
  {
    "start": 2322.08,
    "end": 2326.4,
    "text": "and it's going to run on port 8000. So if you want to, you could just copy this URL,",
    "textdich": ""
  },
  {
    "start": 2327.6,
    "end": 2332.88,
    "text": "go to your web browser, paste it in here, and then see what happens. And then look at this,",
    "textdich": ""
  },
  {
    "start": 2332.88,
    "end": 2338.48,
    "text": "I'm going to zoom in for you. It says message Hello World, and that's coming from our code.",
    "textdich": ""
  },
  {
    "start": 2340.64,
    "end": 2345.44,
    "text": "Right. And that's coming from this return statement right here. So that so this kind of",
    "textdich": ""
  },
  {
    "start": 2345.44,
    "end": 2350.24,
    "text": "verifies that everything worked perfectly. Alright, so now that we've got everything up and running",
    "textdich": ""
  },
  {
    "start": 2350.24,
    "end": 2355.2,
    "text": "and working, and you can see that when we go to our website, we can see that we are properly",
    "textdich": ""
  },
  {
    "start": 2355.2,
    "end": 2360.32,
    "text": "getting back our message. Let's pause this video. And in the next video, we'll take a look at exactly",
    "textdich": ""
  },
  {
    "start": 2360.32,
    "end": 2365.84,
    "text": "what each line of this code actually means. Alright guys, so let's take a look at the code",
    "textdich": ""
  },
  {
    "start": 2365.84,
    "end": 2370.72,
    "text": "that we added and actually dissect what each line means. So we've got these three lines of code. And",
    "textdich": ""
  },
  {
    "start": 2370.72,
    "end": 2375.28,
    "text": "if you take a look at the fast API documentation that we were on, it's going to define those three",
    "textdich": ""
  },
  {
    "start": 2375.28,
    "end": 2380.24,
    "text": "lines of code as a path operation. So that's the terminology is using it refers to this as a path",
    "textdich": ""
  },
  {
    "start": 2380.24,
    "end": 2385.68,
    "text": "operation. Now, the name itself doesn't really matter. You'll see that in other web frameworks,",
    "textdich": ""
  },
  {
    "start": 2385.68,
    "end": 2390.8,
    "text": "especially in other languages, sometimes they refer to this as a route. But they within the",
    "textdich": ""
  },
  {
    "start": 2390.8,
    "end": 2394.88,
    "text": "documentation for fast API refer to as a path operation. So you'll see me flip between those",
    "textdich": ""
  },
  {
    "start": 2394.88,
    "end": 2399.12,
    "text": "two terms, but they fundamentally mean the same thing. So let's actually take a look at this",
    "textdich": ""
  },
  {
    "start": 2399.12,
    "end": 2403.92,
    "text": "specific path operation. And we can really see that it's made up of two components. The first",
    "textdich": ""
  },
  {
    "start": 2403.92,
    "end": 2408.08,
    "text": "component is going to be the function. And the second thing is going to be the decorator. So",
    "textdich": ""
  },
  {
    "start": 2408.08,
    "end": 2412.48,
    "text": "we'll come back to the decorator in a bit. Let's take a look at this function. So this function",
    "textdich": ""
  },
  {
    "start": 2412.48,
    "end": 2416.8,
    "text": "is fundamentally no different than any other Python function. It's a plain old function,",
    "textdich": ""
  },
  {
    "start": 2416.8,
    "end": 2421.04,
    "text": "you'll see that there's this async keyword, technically, this is optional. This keywords",
    "textdich": ""
  },
  {
    "start": 2421.04,
    "end": 2424.32,
    "text": "only needed if you're going to be performing some sort of asynchronous tasks, so something that",
    "textdich": ""
  },
  {
    "start": 2424.32,
    "end": 2428.8,
    "text": "takes a certain amount of time. So things like, you know, making an API call, things like talking",
    "textdich": ""
  },
  {
    "start": 2428.8,
    "end": 2433.12,
    "text": "to the database, if you want to do that asynchronously, you do have to pass in the async keyword.",
    "textdich": ""
  },
  {
    "start": 2433.12,
    "end": 2436.64,
    "text": "But we're not doing that right now. So what we can do is we can actually just remove that. So I'm",
    "textdich": ""
  },
  {
    "start": 2436.64,
    "end": 2441.04,
    "text": "going to delete that, and just remove that. And so now it's just a regular function. And you'll see",
    "textdich": ""
  },
  {
    "start": 2441.04,
    "end": 2446.56,
    "text": "that the code behaves exactly the same. So we have a function, we give the function a name. So",
    "textdich": ""
  },
  {
    "start": 2446.56,
    "end": 2451.28,
    "text": "the documentation just shows an arbitrary name of root, keep in mind the name itself doesn't matter.",
    "textdich": ""
  },
  {
    "start": 2451.28,
    "end": 2457.2,
    "text": "So if I wanted to name this, you know, get user, then that's going to be fine, it's not going to",
    "textdich": ""
  },
  {
    "start": 2457.2,
    "end": 2463.12,
    "text": "change anything, it's an arbitrary name. However, I do recommend you name your functions, your path",
    "textdich": ""
  },
  {
    "start": 2463.12,
    "end": 2468.56,
    "text": "operation functions to be as descriptive as possible. So if you're trying to log in a user,",
    "textdich": ""
  },
  {
    "start": 2468.56,
    "end": 2474.0,
    "text": "then maybe you should call this login user, or just log in so that it's as descriptive as possible.",
    "textdich": ""
  },
  {
    "start": 2474.0,
    "end": 2478.16,
    "text": "But keep in mind, the name that we put here does not matter. So I'll change this back to root for",
    "textdich": ""
  },
  {
    "start": 2478.16,
    "end": 2483.44,
    "text": "now. And then we have so then within this function, you can perform any kind of logic. So if this",
    "textdich": ""
  },
  {
    "start": 2483.44,
    "end": 2488.4,
    "text": "function is meant to log in a user, it's going to have all the code for logging in a user,",
    "textdich": ""
  },
  {
    "start": 2488.4,
    "end": 2492.08,
    "text": "whatever that may be. So maybe you know, checking the passwords in a database to make sure that",
    "textdich": ""
  },
  {
    "start": 2492.08,
    "end": 2497.52,
    "text": "they match and to make sure that the credentials are properly accurate. And then after that,",
    "textdich": ""
  },
  {
    "start": 2497.52,
    "end": 2501.52,
    "text": "you know, just like any other function, we can return something. So whatever we return here is",
    "textdich": ""
  },
  {
    "start": 2501.52,
    "end": 2506.56,
    "text": "going to be the data that gets sent back to the user. So if we go back to the website, go to our",
    "textdich": ""
  },
  {
    "start": 2506.56,
    "end": 2511.12,
    "text": "web server, take a look at this message, Hello, world, that's exactly what we sent. And if we",
    "textdich": ""
  },
  {
    "start": 2511.12,
    "end": 2515.36,
    "text": "change this to be whatever we want, it's going to get returned back in the same way. So here,",
    "textdich": ""
  },
  {
    "start": 2515.36,
    "end": 2522.8,
    "text": "we're just returning a Python dictionary, I guess. And what happens is, fast API will automatically",
    "textdich": ""
  },
  {
    "start": 2522.8,
    "end": 2529.52,
    "text": "convert this to JSON, which is the main universal language of API, right? We all talk to we use",
    "textdich": ""
  },
  {
    "start": 2529.52,
    "end": 2534.88,
    "text": "JSONs to send data back and forth between an API. So it converts this JSON, and it sends it back to",
    "textdich": ""
  },
  {
    "start": 2534.88,
    "end": 2539.92,
    "text": "the user. And that's why we see that on the web browser. Now, the next thing that we have is this",
    "textdich": ""
  },
  {
    "start": 2539.92,
    "end": 2544.24,
    "text": "decorator, if you're not really familiar with decorators in Python, it's okay, you don't really",
    "textdich": ""
  },
  {
    "start": 2544.24,
    "end": 2549.2,
    "text": "actually need to understand, you know, the core concept of a decorator, just understand that when",
    "textdich": ""
  },
  {
    "start": 2549.2,
    "end": 2554.16,
    "text": "you apply a decorator to a function, it's going to perform a little magic to this function. Because",
    "textdich": ""
  },
  {
    "start": 2554.16,
    "end": 2559.04,
    "text": "if I remove this decorator, if we just comment it out, take a look at this code, this code has",
    "textdich": ""
  },
  {
    "start": 2559.04,
    "end": 2563.6,
    "text": "nothing to do with fast API, it's a plain old function. So how do we actually make it, you know,",
    "textdich": ""
  },
  {
    "start": 2563.6,
    "end": 2569.04,
    "text": "act like an API? Well, we have to use this magical decorator, this decorator turns this into an",
    "textdich": ""
  },
  {
    "start": 2569.04,
    "end": 2575.12,
    "text": "actual path operation, so that someone who wants to use our API can hit this endpoint. And so you",
    "textdich": ""
  },
  {
    "start": 2575.12,
    "end": 2579.52,
    "text": "just specify at the at symbol, that's what the that's how we clarify that this is going to be a",
    "textdich": ""
  },
  {
    "start": 2579.52,
    "end": 2585.04,
    "text": "decorator, then we reference our fast API instance. And then we have a couple of different options.",
    "textdich": ""
  },
  {
    "start": 2585.04,
    "end": 2591.2,
    "text": "So what here we pass in is the HTTP method that the user should use. So this is a get method,",
    "textdich": ""
  },
  {
    "start": 2591.2,
    "end": 2598.72,
    "text": "which means that we have to send a get request to our API. And, but we can use plenty of different",
    "textdich": ""
  },
  {
    "start": 2598.72,
    "end": 2603.92,
    "text": "HTTP methods. And I strongly recommend you actually take a look at the different HTTP methods. If you",
    "textdich": ""
  },
  {
    "start": 2603.92,
    "end": 2612.32,
    "text": "do HTTP methods, we can select this one, this is the Mozilla page, you can see all of the different",
    "textdich": ""
  },
  {
    "start": 2612.32,
    "end": 2617.68,
    "text": "HTTP methods. So there's get, post, put, delete. So those are the main ones. There's a couple of",
    "textdich": ""
  },
  {
    "start": 2617.68,
    "end": 2623.6,
    "text": "other ones that are sometimes used. But for the most part, those are the core ones. And so here,",
    "textdich": ""
  },
  {
    "start": 2623.6,
    "end": 2630.32,
    "text": "once again, just the HTTP method. And then finally, we have the path. And so this is the root path.",
    "textdich": ""
  },
  {
    "start": 2630.32,
    "end": 2636.08,
    "text": "And so, and so it's a little bit hard to explain the path, but it's basically the path after the",
    "textdich": ""
  },
  {
    "start": 2636.08,
    "end": 2641.76,
    "text": "specific domain name of your API. So if you take a look at our, our URL, our web server is hosted",
    "textdich": ""
  },
  {
    "start": 2641.76,
    "end": 2648.56,
    "text": "on this specific URL. If I go to this page, let's open up a new link, just paste it in here. So,",
    "textdich": ""
  },
  {
    "start": 2648.56,
    "end": 2652.72,
    "text": "so the URL and the path in this case is just slash. So that's equivalent of just hitting",
    "textdich": ""
  },
  {
    "start": 2652.72,
    "end": 2657.12,
    "text": "enter right here, or putting a slash, which doesn't change anything, right? Right, whether",
    "textdich": ""
  },
  {
    "start": 2657.12,
    "end": 2661.6,
    "text": "there's slashes there or not, it's basically going to take you to the same URL. It's very similar to",
    "textdich": ""
  },
  {
    "start": 2661.6,
    "end": 2667.2,
    "text": "going to, you know, google.com. Right, that's going to take us to google.com. But if you go",
    "textdich": ""
  },
  {
    "start": 2667.2,
    "end": 2673.12,
    "text": "to google.com slash, it's, it's the same thing. So it's the root path. So whatever domain name,",
    "textdich": ""
  },
  {
    "start": 2673.12,
    "end": 2678.96,
    "text": "our API is hosted on, whatever URL is just saying it's the root path. You know, if I change this to,",
    "textdich": ""
  },
  {
    "start": 2680.32,
    "end": 2685.52,
    "text": "you know, log in, right, that means that this path operation will only apply if the user",
    "textdich": ""
  },
  {
    "start": 2685.52,
    "end": 2694.0,
    "text": "goes to our URL, and then goes to slash login. So that decorator, this path right here just",
    "textdich": ""
  },
  {
    "start": 2694.0,
    "end": 2699.6,
    "text": "references the path that we have to go to in the URL. And so if this is actually changed to,",
    "textdich": ""
  },
  {
    "start": 2700.32,
    "end": 2706.08,
    "text": "how about posts, and then you know, like vote, so maybe this is the URL for voting on a specific",
    "textdich": ""
  },
  {
    "start": 2706.08,
    "end": 2711.2,
    "text": "post, then we would have to go and do the same thing here. So we'd have to go to post slash",
    "textdich": ""
  },
  {
    "start": 2711.2,
    "end": 2717.04,
    "text": "vote. So nothing too complicated. But those are the two pieces that make up a simple path operation,",
    "textdich": ""
  },
  {
    "start": 2717.04,
    "end": 2721.2,
    "text": "you've got the function, then you've got this decorator, where you have to pass in the specific",
    "textdich": ""
  },
  {
    "start": 2721.2,
    "end": 2726.16,
    "text": "HTTP method, and then the URL you want it to go to. And I'm going to change this back to the default.",
    "textdich": ""
  },
  {
    "start": 2727.92,
    "end": 2732.64,
    "text": "And now what I want to do is, let's go ahead and make a simple change. So what I'm going to do is",
    "textdich": ""
  },
  {
    "start": 2732.64,
    "end": 2741.6,
    "text": "I'm going to change this, I'm going to change the message to be welcome to my API, we'll save this,",
    "textdich": ""
  },
  {
    "start": 2741.6,
    "end": 2744.24,
    "text": "go back to the root URL, because we changed it to the root URL.",
    "textdich": ""
  },
  {
    "start": 2745.68,
    "end": 2751.28,
    "text": "Let's hit refresh. Notice how it still says Hello, world, nothing changed. So what gives, right,",
    "textdich": ""
  },
  {
    "start": 2751.28,
    "end": 2755.6,
    "text": "it, you know, our codes changed, I saved it, why are we not updating it so that it returns welcome",
    "textdich": ""
  },
  {
    "start": 2755.6,
    "end": 2761.12,
    "text": "to my API? Well, the problem is, is that anytime you make a change, we have to restart our server.",
    "textdich": ""
  },
  {
    "start": 2761.12,
    "end": 2765.92,
    "text": "So to restart our server, you hit Ctrl C, which is going to stop it, then you could just hit the",
    "textdich": ""
  },
  {
    "start": 2765.92,
    "end": 2771.04,
    "text": "up arrow keys that you can find that command that you ran before, and just run it again. And so now",
    "textdich": ""
  },
  {
    "start": 2771.04,
    "end": 2775.84,
    "text": "if I hit refresh, we can see that it updated. And I'm sure you're thinking, well, that's a little",
    "textdich": ""
  },
  {
    "start": 2775.84,
    "end": 2780.8,
    "text": "annoying. Every time I change my code, I have to do a Ctrl C, and then an up arrow and then hit",
    "textdich": ""
  },
  {
    "start": 2780.8,
    "end": 2785.28,
    "text": "Enter, just that I can, you know, make sure that the server actually implements those changes.",
    "textdich": ""
  },
  {
    "start": 2785.28,
    "end": 2788.72,
    "text": "And it is a little annoying, but there is a workaround. So if we go to the documentation,",
    "textdich": ""
  },
  {
    "start": 2788.72,
    "end": 2793.28,
    "text": "you'll see that when they run uvcorn, they pass in the dash dash reload flag. And the dash dash",
    "textdich": ""
  },
  {
    "start": 2793.28,
    "end": 2797.2,
    "text": "reload flag will actually take a look at your code and monitor your code. So anytime that you change",
    "textdich": ""
  },
  {
    "start": 2797.2,
    "end": 2801.36,
    "text": "your code, it'll automatically restart your server for you. So let's try that out. I'm going to do a",
    "textdich": ""
  },
  {
    "start": 2801.36,
    "end": 2806.96,
    "text": "Ctrl C. I'm going to hit the up arrow, and I'm gonna pass in the dash dash reload flag. So we'll",
    "textdich": ""
  },
  {
    "start": 2806.96,
    "end": 2812.16,
    "text": "hit enter. And now what I want you to do is make some changes. So it doesn't really matter what you",
    "textdich": ""
  },
  {
    "start": 2812.16,
    "end": 2816.88,
    "text": "change, I'm just gonna add a couple of exclamation points. And then I'm going to hit save. And I want",
    "textdich": ""
  },
  {
    "start": 2816.88,
    "end": 2822.0,
    "text": "you to focus what on what happens down here. So if I hit save, look at that, it automatically",
    "textdich": ""
  },
  {
    "start": 2822.0,
    "end": 2828.48,
    "text": "restarted the server for me. And so now if I go back to my website, or my API, hit refresh, you can",
    "textdich": ""
  },
  {
    "start": 2828.48,
    "end": 2832.96,
    "text": "see that the exclamation points are there. So moving forward, in a development environment,",
    "textdich": ""
  },
  {
    "start": 2832.96,
    "end": 2837.28,
    "text": "only when we're in a development environment, we're going to pass in the dash dash reload flag.",
    "textdich": ""
  },
  {
    "start": 2837.28,
    "end": 2840.96,
    "text": "When we go to production, we don't need that, we're not going to be setting it up because we're not",
    "textdich": ""
  },
  {
    "start": 2840.96,
    "end": 2844.4,
    "text": "going to be changing our code in a production environment. And so I think that's a good",
    "textdich": ""
  },
  {
    "start": 2844.4,
    "end": 2850.64,
    "text": "stopping point here. In the next video, we'll just quickly review exactly what is a path operation,",
    "textdich": ""
  },
  {
    "start": 2850.64,
    "end": 2856.08,
    "text": "so that we could just reinforce what we learned in this lecture. All right, guys, so let's quickly",
    "textdich": ""
  },
  {
    "start": 2856.08,
    "end": 2859.52,
    "text": "recap what we learned in the previous lecture, I want to make sure that you guys have a solid",
    "textdich": ""
  },
  {
    "start": 2859.52,
    "end": 2863.68,
    "text": "understanding of the different components of a path operation, because ultimately, that's all your",
    "textdich": ""
  },
  {
    "start": 2863.68,
    "end": 2869.76,
    "text": "API is, it's just a bunch of path operations. So first things first, we have our decorator. So our",
    "textdich": ""
  },
  {
    "start": 2869.76,
    "end": 2874.88,
    "text": "decorator has the little at symbol. And so that's what signifies it as a decorator. And then we",
    "textdich": ""
  },
  {
    "start": 2874.88,
    "end": 2881.12,
    "text": "reference our fast API instance, which we called app. And then we have our HTTP method. So in this",
    "textdich": ""
  },
  {
    "start": 2881.12,
    "end": 2888.32,
    "text": "case, this is going to match only get methods. And then we have the specific path or the URL. So this",
    "textdich": ""
  },
  {
    "start": 2888.32,
    "end": 2893.92,
    "text": "is the root URL in this case. And then below that we've got our specific path operation function. So",
    "textdich": ""
  },
  {
    "start": 2893.92,
    "end": 2898.24,
    "text": "this function is going to contain all the logic for performing some kind of task. And when it's",
    "textdich": ""
  },
  {
    "start": 2898.24,
    "end": 2902.8,
    "text": "going to return some data, and that's the data that gets returned to the user when they hit this",
    "textdich": ""
  },
  {
    "start": 2902.8,
    "end": 2908.64,
    "text": "specific path operation. So now that we have a solid understanding of how path operations work,",
    "textdich": ""
  },
  {
    "start": 2908.64,
    "end": 2913.52,
    "text": "let's see if we can create a new path operation. And let's say this one represents retrieving a",
    "textdich": ""
  },
  {
    "start": 2913.52,
    "end": 2919.04,
    "text": "bunch of social media posts from our application. So in this case, you know, there's two things that",
    "textdich": ""
  },
  {
    "start": 2919.04,
    "end": 2923.52,
    "text": "we need. So the first thing is our function, our path operation function. So we'll say def. And",
    "textdich": ""
  },
  {
    "start": 2923.52,
    "end": 2927.12,
    "text": "then we'll give this function any name, I think, since we're going to be retrieving a bunch of",
    "textdich": ""
  },
  {
    "start": 2927.12,
    "end": 2933.52,
    "text": "posts, I think a good name is going to be get underscore posts. But keep in mind, you can name",
    "textdich": ""
  },
  {
    "start": 2933.52,
    "end": 2939.12,
    "text": "this anything you want. Like I said, it does not impact the behavior of anything. And then we want",
    "textdich": ""
  },
  {
    "start": 2939.12,
    "end": 2943.76,
    "text": "to see. So here we would pass in all of our logic for retrieving posts, but we don't actually have",
    "textdich": ""
  },
  {
    "start": 2943.76,
    "end": 2951.92,
    "text": "an application. So I'm just gonna say return. And then we'll just say, maybe, I don't know, data.",
    "textdich": ""
  },
  {
    "start": 2951.92,
    "end": 2960.4,
    "text": "And this is going to be, this is your post, but in reality, we would provide a list of posts. So",
    "textdich": ""
  },
  {
    "start": 2960.4,
    "end": 2964.64,
    "text": "let's save that. And then there's one last thing we have to pass in our decorator, like we did before",
    "textdich": ""
  },
  {
    "start": 2964.64,
    "end": 2969.68,
    "text": "to actually make this turn into a special path operation function. So we'll say at and we",
    "textdich": ""
  },
  {
    "start": 2969.68,
    "end": 2975.84,
    "text": "reference the instance, the fast API instance, we'll do app dot, and then we have to figure out",
    "textdich": ""
  },
  {
    "start": 2975.84,
    "end": 2980.88,
    "text": "what HTTP method we want to use for this path operation. So when it comes to retrieving data,",
    "textdich": ""
  },
  {
    "start": 2980.88,
    "end": 2986.08,
    "text": "you usually use a get operation. And if you don't know which one to use, you can just go back to",
    "textdich": ""
  },
  {
    "start": 2986.08,
    "end": 2990.08,
    "text": "this page right here, and it's going to explain what each one's for. So if you select get, it's",
    "textdich": ""
  },
  {
    "start": 2990.08,
    "end": 2994.96,
    "text": "going to explain when you would use a get, if you want to use a post, it's going to explain when",
    "textdich": ""
  },
  {
    "start": 2994.96,
    "end": 3000.4,
    "text": "you should use post. But I already know that for retrieving data, it's usually a get operation. So",
    "textdich": ""
  },
  {
    "start": 3000.4,
    "end": 3007.28,
    "text": "we're going to keep it as a get method. Now for the URL, I'm going to say, to retrieve a post,",
    "textdich": ""
  },
  {
    "start": 3007.28,
    "end": 3014.48,
    "text": "we want to go to the slash posts URL. So we'll save this. And then let's see if we can retrieve",
    "textdich": ""
  },
  {
    "start": 3014.48,
    "end": 3019.84,
    "text": "that data. So if I hit refresh here, it's going to say Hello World. But that's because if you take",
    "textdich": ""
  },
  {
    "start": 3019.84,
    "end": 3024.8,
    "text": "a look at this, we're at the root path. And that's going to match this specific path operation.",
    "textdich": ""
  },
  {
    "start": 3025.76,
    "end": 3029.52,
    "text": "And this path operations on slash posts. So if we go to slash posts,",
    "textdich": ""
  },
  {
    "start": 3031.52,
    "end": 3036.72,
    "text": "and then hit enter, take a look at that, we have now got our data, which is our posts. So we have",
    "textdich": ""
  },
  {
    "start": 3036.72,
    "end": 3041.44,
    "text": "hit that second path operation that we just created. And it really is as simple as that you",
    "textdich": ""
  },
  {
    "start": 3041.44,
    "end": 3047.12,
    "text": "just define a function, you define the HTTP method, and then the URL. Now there's one thing to know,",
    "textdich": ""
  },
  {
    "start": 3047.12,
    "end": 3052.88,
    "text": "and that is that, you know, the way that fast API works is that when anytime we send a request to",
    "textdich": ""
  },
  {
    "start": 3052.88,
    "end": 3058.72,
    "text": "our API server, it's going to actually go down the list of all of our path operations. And then",
    "textdich": ""
  },
  {
    "start": 3058.72,
    "end": 3062.32,
    "text": "it's going to find the first match. And as soon as it finds the first match, it's going to stop",
    "textdich": ""
  },
  {
    "start": 3062.32,
    "end": 3067.92,
    "text": "running your code. So if I actually change this to just the slash URL, just like this one above,",
    "textdich": ""
  },
  {
    "start": 3068.48,
    "end": 3073.2,
    "text": "what do you think is going to happen, right? They both reference the get method, and they both",
    "textdich": ""
  },
  {
    "start": 3073.2,
    "end": 3077.92,
    "text": "reference the same URL. So which one do you think is going to win? Well, let's take a look.",
    "textdich": ""
  },
  {
    "start": 3080.16,
    "end": 3086.4,
    "text": "If I do just the slash again, it says Hello World. So it looks like the first one, one. And the",
    "textdich": ""
  },
  {
    "start": 3086.4,
    "end": 3090.4,
    "text": "reason for that is that once again, fast API literally just goes to the code, and it looks for",
    "textdich": ""
  },
  {
    "start": 3090.4,
    "end": 3094.56,
    "text": "the first match. So there's really only two criteria. In this case, what's the HTTP method,",
    "textdich": ""
  },
  {
    "start": 3094.56,
    "end": 3098.64,
    "text": "it's a get. So anytime you work in your browser, your browser is always going to send a get method",
    "textdich": ""
  },
  {
    "start": 3098.64,
    "end": 3104.24,
    "text": "by default. And then what's the URL. So the URL is a slash URL. So it matches this one. And it does",
    "textdich": ""
  },
  {
    "start": 3104.24,
    "end": 3109.28,
    "text": "not continue past that. So it never runs this code. So it sends that back. Now, if I took this,",
    "textdich": ""
  },
  {
    "start": 3110.24,
    "end": 3116.48,
    "text": "copied it, and moved it to the top. What do you think is going to happen? Which one do you think",
    "textdich": ""
  },
  {
    "start": 3116.48,
    "end": 3123.12,
    "text": "is going to run? Well, let's hit refresh. Look at that. So that one ran. So the first path operation",
    "textdich": ""
  },
  {
    "start": 3123.12,
    "end": 3127.76,
    "text": "that matches is always going to be the one that runs simple as that. So the order does in fact",
    "textdich": ""
  },
  {
    "start": 3127.76,
    "end": 3136.8,
    "text": "matter. However, if I change this to posts, and leave this at the top, right, if I hit refresh,",
    "textdich": ""
  },
  {
    "start": 3136.8,
    "end": 3143.36,
    "text": "we get Hello World. So what happened was fast API went down the list. And it received a request",
    "textdich": ""
  },
  {
    "start": 3143.36,
    "end": 3149.44,
    "text": "that let me just put some comments. So the rec request comes in. Sorry, that's not the way to",
    "textdich": ""
  },
  {
    "start": 3149.44,
    "end": 3156.16,
    "text": "comment in Python. request comes in with a get method. And it comes in with the, the URL is going",
    "textdich": ""
  },
  {
    "start": 3156.16,
    "end": 3163.12,
    "text": "to be slash. All right. And so these are the two things that it looks forward to match. So it hits",
    "textdich": ""
  },
  {
    "start": 3163.12,
    "end": 3167.92,
    "text": "the first path operation. So this is a get so those two match, and then it looks at the URL,",
    "textdich": ""
  },
  {
    "start": 3167.92,
    "end": 3172.64,
    "text": "which is slash, but that does not match. So it skips past with this one. And then it goes to the",
    "textdich": ""
  },
  {
    "start": 3172.64,
    "end": 3178.16,
    "text": "next one, you know, does, and then checks to see if that matches. So then get matches, the URL",
    "textdich": ""
  },
  {
    "start": 3178.16,
    "end": 3182.56,
    "text": "matches. So then it returns Hello World. And that's why you return Hello World. And the reason I",
    "textdich": ""
  },
  {
    "start": 3182.56,
    "end": 3187.68,
    "text": "wanted to highlight this is that the order in fact, does matter. So you have to keep that in mind. And",
    "textdich": ""
  },
  {
    "start": 3187.68,
    "end": 3193.68,
    "text": "it can impact the way your API ultimately works. I'm going to just take this move this to the bottom.",
    "textdich": ""
  },
  {
    "start": 3194.4,
    "end": 3200.72,
    "text": "But in this case, the order doesn't matter because they're hitting two different paths or two",
    "textdich": ""
  },
  {
    "start": 3200.72,
    "end": 3208.48,
    "text": "different URLs. Till now, we've been using our web browser to generate HTTP requests to test our API.",
    "textdich": ""
  },
  {
    "start": 3209.28,
    "end": 3215.76,
    "text": "And that's fine for now. However, once we start getting into more complex path operations and",
    "textdich": ""
  },
  {
    "start": 3215.76,
    "end": 3222.4,
    "text": "routes, so things that involve having to send a HTTP point or patch, or any of the other methods",
    "textdich": ""
  },
  {
    "start": 3222.4,
    "end": 3226.96,
    "text": "and having to send data to our API, it gets very complicated, because there's no way to natively",
    "textdich": ""
  },
  {
    "start": 3226.96,
    "end": 3233.36,
    "text": "do that in the browser, without generating or building out a complete full front end application.",
    "textdich": ""
  },
  {
    "start": 3233.36,
    "end": 3237.92,
    "text": "And to test an API, you shouldn't have to build an entire front end application to do that,",
    "textdich": ""
  },
  {
    "start": 3237.92,
    "end": 3242.88,
    "text": "that would be, you know, unmanageable, unscalable. And so there's a lot of different tools that we",
    "textdich": ""
  },
  {
    "start": 3242.88,
    "end": 3250.0,
    "text": "have, that we can use to test our API. And so one of these tools is called postman. If you go to",
    "textdich": ""
  },
  {
    "start": 3250.0,
    "end": 3254.8,
    "text": "postman.com slash downloads, you can download this app. So go ahead and just hit the download",
    "textdich": ""
  },
  {
    "start": 3254.8,
    "end": 3260.96,
    "text": "button, it's going to automatically detect what your operating system is. But this is a very",
    "textdich": ""
  },
  {
    "start": 3260.96,
    "end": 3265.68,
    "text": "simple tool. It's just a tool that allows us to construct our own HTTP request. So we get to",
    "textdich": ""
  },
  {
    "start": 3265.68,
    "end": 3271.04,
    "text": "specify the individual fields of an HTTP request. So we could specify, you know, what is the HTTP",
    "textdich": ""
  },
  {
    "start": 3271.04,
    "end": 3275.84,
    "text": "method? What's the URL? What are the headers that we're going to apply? What's the body? What kind",
    "textdich": ""
  },
  {
    "start": 3275.84,
    "end": 3279.36,
    "text": "of data is that going to carry? Is it going to have any authorization headers? So all of these",
    "textdich": ""
  },
  {
    "start": 3279.36,
    "end": 3285.44,
    "text": "things we get to construct in a nice GUI so that we can test our API. So go ahead and download this.",
    "textdich": ""
  },
  {
    "start": 3285.44,
    "end": 3289.84,
    "text": "Now I've already got it downloaded. But once you've got it downloaded, open up the desktop",
    "textdich": ""
  },
  {
    "start": 3289.84,
    "end": 3294.08,
    "text": "application. And you should see something like this, right? Everything should be relatively",
    "textdich": ""
  },
  {
    "start": 3294.08,
    "end": 3299.68,
    "text": "empty. And what we want to do is, if we want to create a new HTTP request, all we have to do is",
    "textdich": ""
  },
  {
    "start": 3299.68,
    "end": 3304.8,
    "text": "hit the plus button. And before I do that, what I'm going to do is, let's change this to dark",
    "textdich": ""
  },
  {
    "start": 3304.8,
    "end": 3310.48,
    "text": "theme. So themes, I think this looks a little bit better. Yeah, that looks a lot better. And I'm",
    "textdich": ""
  },
  {
    "start": 3310.48,
    "end": 3316.24,
    "text": "also going to zoom in for you guys. Let's make it a little bit more. There you go. Hopefully,",
    "textdich": ""
  },
  {
    "start": 3316.24,
    "end": 3320.8,
    "text": "that's nice and easy for you guys to see now. So what we want to do is let's create a new HTTP",
    "textdich": ""
  },
  {
    "start": 3320.8,
    "end": 3325.36,
    "text": "request. So hit this plus button. And you can see that this provides us all of the fields that we",
    "textdich": ""
  },
  {
    "start": 3325.36,
    "end": 3330.32,
    "text": "need to actually create an HTTP request. So the first thing that we need to do is specify what's",
    "textdich": ""
  },
  {
    "start": 3330.32,
    "end": 3336.72,
    "text": "the HTTP method. So if we go back to our code, right, we only have get requests. So whether we",
    "textdich": ""
  },
  {
    "start": 3336.72,
    "end": 3342.0,
    "text": "want to hit either one of these path operations, it's going to have to be a get request. So we're",
    "textdich": ""
  },
  {
    "start": 3342.0,
    "end": 3346.24,
    "text": "going to leave it as get but you can see we have all the other whoops, we have all of the other",
    "textdich": ""
  },
  {
    "start": 3346.24,
    "end": 3351.68,
    "text": "options. Then we have to specify the URL. So this is no different than the URL that we went to in",
    "textdich": ""
  },
  {
    "start": 3351.68,
    "end": 3361.28,
    "text": "our browser. We just copy this URL. And we actually need the HTTP in there as well probably. So if we",
    "textdich": ""
  },
  {
    "start": 3361.28,
    "end": 3366.32,
    "text": "actually go back to our server, and see where we started it, and actually the best way to get the",
    "textdich": ""
  },
  {
    "start": 3366.32,
    "end": 3371.52,
    "text": "URL is just to stop it, start it. And then that's going to give us the URL. So we just needed the",
    "textdich": ""
  },
  {
    "start": 3371.52,
    "end": 3379.44,
    "text": "HTTP beforehand. And then we just paste that in there. Okay, and so if I leave this as the,",
    "textdich": ""
  },
  {
    "start": 3379.44,
    "end": 3383.2,
    "text": "you know, the root path, whether I include the slash, it doesn't really matter, actually,",
    "textdich": ""
  },
  {
    "start": 3383.2,
    "end": 3389.12,
    "text": "I can just hit send. And you look at this, this is the result that we got back from our API server.",
    "textdich": ""
  },
  {
    "start": 3389.12,
    "end": 3394.24,
    "text": "So it says message Hello, world. And once again, you guys already know where that came from. And",
    "textdich": ""
  },
  {
    "start": 3394.24,
    "end": 3400.64,
    "text": "that came from this specific return statement. And so you can see that this is so much easier",
    "textdich": ""
  },
  {
    "start": 3400.64,
    "end": 3405.52,
    "text": "than using a web browser. Well, you guys may not notice how easy it is at this point. But once we",
    "textdich": ""
  },
  {
    "start": 3405.52,
    "end": 3409.28,
    "text": "get to constructing more complex path operations, you'll see that it's so much easier to use a",
    "textdich": ""
  },
  {
    "start": 3409.28,
    "end": 3413.44,
    "text": "tool like this. And keep in mind, this isn't the only tool that does this, there are plenty of",
    "textdich": ""
  },
  {
    "start": 3413.44,
    "end": 3417.84,
    "text": "other applications that also do this, this is just the one that I'm familiar with, and the one that",
    "textdich": ""
  },
  {
    "start": 3417.84,
    "end": 3422.8,
    "text": "I use, but I don't want to, you know, force any specific application down your throat, you guys",
    "textdich": ""
  },
  {
    "start": 3422.8,
    "end": 3426.48,
    "text": "can use whichever one you want. So if you already use one that you prefer, feel free to stick with",
    "textdich": ""
  },
  {
    "start": 3426.48,
    "end": 3432.88,
    "text": "it. But before we wrap up this video, let's just test out our other specific path. So this one's",
    "textdich": ""
  },
  {
    "start": 3432.88,
    "end": 3438.4,
    "text": "going to reside on slash posts, we're going to try that and we'll do slash posts. We'll hit send.",
    "textdich": ""
  },
  {
    "start": 3438.4,
    "end": 3442.8,
    "text": "And look at that, we got our data that says this is your posts. So now we were successfully able",
    "textdich": ""
  },
  {
    "start": 3442.8,
    "end": 3448.72,
    "text": "to test both of our path operations using postman. And moving forward for the rest of this course,",
    "textdich": ""
  },
  {
    "start": 3448.72,
    "end": 3452.96,
    "text": "we're no longer going to use the web browser, we're going to use postman to test out our API.",
    "textdich": ""
  },
  {
    "start": 3455.52,
    "end": 3460.88,
    "text": "Till now, we've only been working with get requests. So all of the HTTP requests we've",
    "textdich": ""
  },
  {
    "start": 3460.88,
    "end": 3466.4,
    "text": "sent to our API, all have been get requests. And so now we're going to learn about post requests,",
    "textdich": ""
  },
  {
    "start": 3466.4,
    "end": 3470.32,
    "text": "they're a little bit different. And I want to kind of highlight what makes post requests different",
    "textdich": ""
  },
  {
    "start": 3470.32,
    "end": 3474.64,
    "text": "than get requests. Now, we're going to compare the two right now. And I've drawn out a little",
    "textdich": ""
  },
  {
    "start": 3474.64,
    "end": 3480.0,
    "text": "diagram for us. So at the left side, we've got our web browser, or it could be our mobile device,",
    "textdich": ""
  },
  {
    "start": 3480.0,
    "end": 3484.4,
    "text": "depending on whatever the front end is. And on the right side, we've got our API server. So this is",
    "textdich": ""
  },
  {
    "start": 3484.4,
    "end": 3489.84,
    "text": "our fast API server. Now, what they get requests, what we do is we just send an HTTP get requests.",
    "textdich": ""
  },
  {
    "start": 3489.84,
    "end": 3494.4,
    "text": "And then we send that to our API server. And then our API server sends back some kind of data",
    "textdich": ""
  },
  {
    "start": 3494.4,
    "end": 3496.88,
    "text": "depending on what they're trying to get. So if they're trying to get a whole bunch of posts,",
    "textdich": ""
  },
  {
    "start": 3496.88,
    "end": 3502.64,
    "text": "we send back the posts. Now with a post request, it's going to be similar, except there's one",
    "textdich": ""
  },
  {
    "start": 3502.64,
    "end": 3508.4,
    "text": "minor difference. And that is that with a post request, we can send data to the API server.",
    "textdich": ""
  },
  {
    "start": 3508.4,
    "end": 3513.12,
    "text": "So in this case, a lot of times what you'd use a post request for is for creating things. So if",
    "textdich": ""
  },
  {
    "start": 3513.12,
    "end": 3518.8,
    "text": "I want to create a post, I would, when I say post, I mean, like a social media post, not post as in",
    "textdich": ""
  },
  {
    "start": 3518.8,
    "end": 3525.04,
    "text": "post request. But if I wanted to create a social media post, I would send an HTTP post request.",
    "textdich": ""
  },
  {
    "start": 3525.04,
    "end": 3531.04,
    "text": "And I would include all of the data needed to create a post on my API server. So we'll send",
    "textdich": ""
  },
  {
    "start": 3531.04,
    "end": 3535.68,
    "text": "that data over to the API server. And the API server will send back whatever data it thinks it",
    "textdich": ""
  },
  {
    "start": 3535.68,
    "end": 3541.36,
    "text": "needs to send. And so in real life, if we were trying to create a post, you we would include",
    "textdich": ""
  },
  {
    "start": 3541.36,
    "end": 3545.36,
    "text": "whatever data we needed for posts. So in this case, we would include what's the title of the post,",
    "textdich": ""
  },
  {
    "start": 3545.36,
    "end": 3549.6,
    "text": "what's the content of the post, what's the user of the post, we send that to the API server,",
    "textdich": ""
  },
  {
    "start": 3550.16,
    "end": 3555.12,
    "text": "the API server can then talk to whatever database to actually create the post. And then it can send",
    "textdich": ""
  },
  {
    "start": 3555.12,
    "end": 3560.08,
    "text": "back some data, you know, something like, hey, I've successfully created the post. And then here's",
    "textdich": ""
  },
  {
    "start": 3560.08,
    "end": 3565.36,
    "text": "the final post after I created and then send that the send those details back to your web browser",
    "textdich": ""
  },
  {
    "start": 3565.36,
    "end": 3571.44,
    "text": "or your mobile devices. So think of it like this, a get request is basically saying, Hey, API server,",
    "textdich": ""
  },
  {
    "start": 3571.44,
    "end": 3576.16,
    "text": "give me some data. Whereas a post request is saying, hey, API server, here's some data,",
    "textdich": ""
  },
  {
    "start": 3576.16,
    "end": 3579.68,
    "text": "do whatever you need to do with it. So it's like, so it really controls the direction",
    "textdich": ""
  },
  {
    "start": 3580.88,
    "end": 3587.92,
    "text": "of flow of data between the front end and the API server. So get requests are getting data from the",
    "textdich": ""
  },
  {
    "start": 3587.92,
    "end": 3593.36,
    "text": "API server, whereas a post request is sending data to the API server. So now that we have a",
    "textdich": ""
  },
  {
    "start": 3593.36,
    "end": 3598.96,
    "text": "basic understanding of how post requests work, let's go back to our code and see if we can create",
    "textdich": ""
  },
  {
    "start": 3598.96,
    "end": 3604.24,
    "text": "a path operation for a post request. So let's go below our last path operation, which was forgetting",
    "textdich": ""
  },
  {
    "start": 3604.24,
    "end": 3609.2,
    "text": "posts. And let's create one for creating posts. So first things first, let's, let's just actually",
    "textdich": ""
  },
  {
    "start": 3609.2,
    "end": 3614.32,
    "text": "create our decorator. First, we'll do app dot. And instead of guest, sorry, instead of get,",
    "textdich": ""
  },
  {
    "start": 3614.32,
    "end": 3619.04,
    "text": "we're gonna say post. So that's all it takes to convert a traditional get request to a post",
    "textdich": ""
  },
  {
    "start": 3619.04,
    "end": 3623.68,
    "text": "request, you just say dot post. And then once again, we're gonna say whatever specific URL the",
    "textdich": ""
  },
  {
    "start": 3623.68,
    "end": 3628.0,
    "text": "user should go to, to actually create the post. Now, I'm going to do something a little bit bad,",
    "textdich": ""
  },
  {
    "start": 3628.0,
    "end": 3632.48,
    "text": "I'm going to say the path that we want to go to is called create posts. And if you've ever worked",
    "textdich": ""
  },
  {
    "start": 3632.48,
    "end": 3636.72,
    "text": "with API, this is kind of going against best practice. But don't worry, we'll correct this",
    "textdich": ""
  },
  {
    "start": 3636.72,
    "end": 3641.76,
    "text": "in the next lesson. Because there are certain best practices is not going to break our application by",
    "textdich": ""
  },
  {
    "start": 3641.76,
    "end": 3646.32,
    "text": "any means. We'll say this, and then we'll say def. And then here, we'll just name our function,",
    "textdich": ""
  },
  {
    "start": 3646.32,
    "end": 3649.84,
    "text": "I'll just say create post, like I said, the name of the function never matters.",
    "textdich": ""
  },
  {
    "start": 3649.84,
    "end": 3657.84,
    "text": "And then here, which all we're gonna do is we're going to return, we'll say message, oops, message.",
    "textdich": ""
  },
  {
    "start": 3657.84,
    "end": 3670.08,
    "text": "And then we'll say successfully created posts. Let's save that. And let's go to our postman.",
    "textdich": ""
  },
  {
    "start": 3670.08,
    "end": 3676.8,
    "text": "And so we've got already one request. So I could just change this to post. And then we have to",
    "textdich": ""
  },
  {
    "start": 3676.8,
    "end": 3681.92,
    "text": "change the URL in this case. So we'll go back and see that create posts. So it's going to be a",
    "textdich": ""
  },
  {
    "start": 3681.92,
    "end": 3689.36,
    "text": "create posts. And let's hit send. And let's see what happens. Look at that message successfully",
    "textdich": ""
  },
  {
    "start": 3689.36,
    "end": 3695.52,
    "text": "created. So we have successfully sent a post request to our API. Now, one thing I like to do",
    "textdich": ""
  },
  {
    "start": 3695.52,
    "end": 3700.64,
    "text": "with postman is that you can create multiple requests and then have them saved. So I'm going",
    "textdich": ""
  },
  {
    "start": 3700.64,
    "end": 3707.04,
    "text": "to actually change this back to just go to posts. And then go to get and then we'll keep that. And",
    "textdich": ""
  },
  {
    "start": 3707.04,
    "end": 3711.04,
    "text": "what we can do is we can just add another request. And so I'm just going to copy the URL here.",
    "textdich": ""
  },
  {
    "start": 3712.0,
    "end": 3716.24,
    "text": "I'm going to paste this. And then this is actually going to be create posts. And then this could be",
    "textdich": ""
  },
  {
    "start": 3716.24,
    "end": 3721.76,
    "text": "a post request. And so now we can hit a get request and then hit a post request really",
    "textdich": ""
  },
  {
    "start": 3721.76,
    "end": 3727.04,
    "text": "quickly, because they're essentially, we've got them in two different windows. And let's just",
    "textdich": ""
  },
  {
    "start": 3727.04,
    "end": 3731.44,
    "text": "quickly double check that still works. That's good. And then let's double check get posts that",
    "textdich": ""
  },
  {
    "start": 3731.44,
    "end": 3737.84,
    "text": "still works perfect. Now, that's cool. And all, however, the whole idea behind a post request is",
    "textdich": ""
  },
  {
    "start": 3737.84,
    "end": 3743.44,
    "text": "to send some data to our API server. So how do we do that? Well, let's go to our post requests.",
    "textdich": ""
  },
  {
    "start": 3743.44,
    "end": 3750.4,
    "text": "And what we want to do is we want to send some data in the body of the request. And to do that,",
    "textdich": ""
  },
  {
    "start": 3750.4,
    "end": 3756.88,
    "text": "within postman, you would go to the body section right here. And then we can do that. And then",
    "textdich": ""
  },
  {
    "start": 3756.88,
    "end": 3763.2,
    "text": "within body, what we want to do is go to raw, and then select the type. And normally, when you're",
    "textdich": ""
  },
  {
    "start": 3763.2,
    "end": 3768.72,
    "text": "working with API's, you want to use JSON, however, you can use a XML and a few others, however,",
    "textdich": ""
  },
  {
    "start": 3769.28,
    "end": 3777.28,
    "text": "most people use JSON. So we'll select JSON. And then we'll do and JSON looks very, it operates",
    "textdich": ""
  },
  {
    "start": 3777.28,
    "end": 3782.8,
    "text": "very similarly to a Python dictionary. So it's, you know, curly braces, and then it's going to be",
    "textdich": ""
  },
  {
    "start": 3782.8,
    "end": 3788.32,
    "text": "a whole bunch of key value pairs. So here, I'll say, what's the title of my post? Well,",
    "textdich": ""
  },
  {
    "start": 3788.32,
    "end": 3792.64,
    "text": "title, my post is going to be say, I will say, top beaches in Florida.",
    "textdich": ""
  },
  {
    "start": 3796.24,
    "end": 3803.92,
    "text": "And then the content of the post is going to say, check out these awesome beaches, beaches.",
    "textdich": ""
  },
  {
    "start": 3803.92,
    "end": 3813.76,
    "text": "All right. And so now, if we hit send, let's see what happens. Great. So it says successfully",
    "textdich": ""
  },
  {
    "start": 3813.76,
    "end": 3820.0,
    "text": "create post, we successfully hit this endpoint. But in our path operation, how do we actually",
    "textdich": ""
  },
  {
    "start": 3820.0,
    "end": 3826.64,
    "text": "extract the data that we sent in the body? How do we retrieve that body data? Well, what we can do",
    "textdich": ""
  },
  {
    "start": 3826.64,
    "end": 3832.88,
    "text": "is within our path operation function, I can say, I can just assign it some variable. So what",
    "textdich": ""
  },
  {
    "start": 3832.88,
    "end": 3837.2,
    "text": "variable do we want to store all that body data, you can pick any name you want. I'm just gonna",
    "textdich": ""
  },
  {
    "start": 3837.2,
    "end": 3841.44,
    "text": "say this represents payload, although it could be something like body or anything else. So we'll",
    "textdich": ""
  },
  {
    "start": 3841.44,
    "end": 3847.76,
    "text": "say payload. And then what we want to do is colon. And then we want to say, it's going to be of a type",
    "textdich": ""
  },
  {
    "start": 3847.76,
    "end": 3855.92,
    "text": "dict. And we want to set this equal to body. And we want to import this. So this is actually",
    "textdich": ""
  },
  {
    "start": 3855.92,
    "end": 3861.04,
    "text": "something that comes from the fast API library. So if you do tab, if you hit tab, it's going to",
    "textdich": ""
  },
  {
    "start": 3861.04,
    "end": 3867.52,
    "text": "automatically import it, or you can select it. So you hit body, and then do that, and then triple",
    "textdich": ""
  },
  {
    "start": 3867.52,
    "end": 3874.88,
    "text": "dots. And just to keep in mind, right, if you see that from fast API params, it imported body. So",
    "textdich": ""
  },
  {
    "start": 3874.88,
    "end": 3882.08,
    "text": "what this is going to do is, it's going to extract all of the fields from the body, it's going to",
    "textdich": ""
  },
  {
    "start": 3882.08,
    "end": 3887.76,
    "text": "basically convert it to a Python dictionary. And it's going to store it inside a variable named",
    "textdich": ""
  },
  {
    "start": 3887.76,
    "end": 3894.32,
    "text": "payload. Pretty simple. And all we have to do is let's say print. Let's just print out payload.",
    "textdich": ""
  },
  {
    "start": 3897.44,
    "end": 3905.36,
    "text": "Now if we hit that post request, again, look at this, right here, we can see that it converted",
    "textdich": ""
  },
  {
    "start": 3905.36,
    "end": 3911.12,
    "text": "into a Python dictionary, and we extracted the title field, as well as the content field. And",
    "textdich": ""
  },
  {
    "start": 3911.12,
    "end": 3919.28,
    "text": "so that's how we extract the data from the body of the payload. And just to quickly recap, once again,",
    "textdich": ""
  },
  {
    "start": 3919.28,
    "end": 3924.72,
    "text": "we imported body from fast API dot params. And we let VS code do it automatically for us,",
    "textdich": ""
  },
  {
    "start": 3924.72,
    "end": 3929.84,
    "text": "I always recommend letting VS code do it for you, so that you don't have to memorize. And remember,",
    "textdich": ""
  },
  {
    "start": 3929.84,
    "end": 3936.48,
    "text": "you know, where in the fast API library, this, this property is stored. So we're taking this,",
    "textdich": ""
  },
  {
    "start": 3936.48,
    "end": 3942.0,
    "text": "taking the body, and then we're converting it into a dictionary. And then we're storing it inside a",
    "textdich": ""
  },
  {
    "start": 3942.0,
    "end": 3947.92,
    "text": "property called payload, but you can name this whatever you want. And so what we can do is we",
    "textdich": ""
  },
  {
    "start": 3947.92,
    "end": 3956.24,
    "text": "can take this data. And then we can say, let's say we're going to return back a new new post,",
    "textdich": ""
  },
  {
    "start": 3956.24,
    "end": 3962.16,
    "text": "and then we're just going to send the data. So we'll say title, and we can actually change this",
    "textdich": ""
  },
  {
    "start": 3962.16,
    "end": 3975.68,
    "text": "to a f string. And we'll say title. And then we can pass in payload. And you'll see that we can",
    "textdich": ""
  },
  {
    "start": 3975.68,
    "end": 3984.32,
    "text": "just reference the title property because it's just a regular Python dictionary. And we'll say",
    "textdich": ""
  },
  {
    "start": 3984.32,
    "end": 4002.08,
    "text": "that the content is going to be payload content. So let's save that. And then now let's hit send.",
    "textdich": ""
  },
  {
    "start": 4003.52,
    "end": 4009.2,
    "text": "Now look at this, we got our new post innocent. Whoops, it looks like I made a mistake. Yeah,",
    "textdich": ""
  },
  {
    "start": 4009.2,
    "end": 4013.92,
    "text": "no, actually, that's correct. title, top beaches in Florida content, check out these awesome beaches.",
    "textdich": ""
  },
  {
    "start": 4016.72,
    "end": 4022.08,
    "text": "So that's pretty simple, guys, I showed you guys how to not only send data in the body within a",
    "textdich": ""
  },
  {
    "start": 4022.08,
    "end": 4028.08,
    "text": "postman request, we're also able to extract that data and send it right back to the user. Now in",
    "textdich": ""
  },
  {
    "start": 4028.08,
    "end": 4033.52,
    "text": "a real application, we would take the data, and then we would normally store that data inside",
    "textdich": ""
  },
  {
    "start": 4033.52,
    "end": 4038.32,
    "text": "our database so that we can create a new post stored in the database. And then now anytime the",
    "textdich": ""
  },
  {
    "start": 4038.32,
    "end": 4042.08,
    "text": "user tries to retrieve the post, we can fetch that data from the database, we don't have a",
    "textdich": ""
  },
  {
    "start": 4042.08,
    "end": 4046.48,
    "text": "database set up just yet. So for now, I'm just showing you guys how to extract that data and",
    "textdich": ""
  },
  {
    "start": 4046.48,
    "end": 4052.64,
    "text": "then send it back in the request. In the last lecture, we learned about how to work with post",
    "textdich": ""
  },
  {
    "start": 4052.64,
    "end": 4057.6,
    "text": "requests, we learned about how to send data in the body, using postman as well as how to extract that",
    "textdich": ""
  },
  {
    "start": 4057.6,
    "end": 4063.04,
    "text": "data within our path operation so that we can perform some logic. And there's some issues that",
    "textdich": ""
  },
  {
    "start": 4063.04,
    "end": 4068.4,
    "text": "we're running into at the moment, based off of the way we've kind of set up things. Alright, and",
    "textdich": ""
  },
  {
    "start": 4068.4,
    "end": 4074.16,
    "text": "the first thing is, it's kind of hard to get all of those values from the body, we have to, you know,",
    "textdich": ""
  },
  {
    "start": 4074.16,
    "end": 4080.08,
    "text": "extract each one individually. On top of that, the client can send whatever data that it wants. And",
    "textdich": ""
  },
  {
    "start": 4080.08,
    "end": 4084.96,
    "text": "this is a big issue, right? I don't want the front end to send arbitrary data. If the user is trying",
    "textdich": ""
  },
  {
    "start": 4084.96,
    "end": 4089.6,
    "text": "to create a post, I want the title, I want the content, nothing else, right? I don't want them",
    "textdich": ""
  },
  {
    "start": 4089.6,
    "end": 4095.2,
    "text": "to send any extra data. And on top of that, the data itself isn't getting validated, right? So",
    "textdich": ""
  },
  {
    "start": 4095.2,
    "end": 4100.88,
    "text": "how do I ensure that the user is sending what I want, right? What if the user sends a blank title,",
    "textdich": ""
  },
  {
    "start": 4100.88,
    "end": 4106.64,
    "text": "I can't have a post with a blank title. So how can we validate that the data that the user sends",
    "textdich": ""
  },
  {
    "start": 4106.64,
    "end": 4111.68,
    "text": "is actually valid, right? And ultimately, what we want to do is we want to force the user into",
    "textdich": ""
  },
  {
    "start": 4111.68,
    "end": 4116.08,
    "text": "a schema that we can expect, right? That's the term that we always use the API schema,",
    "textdich": ""
  },
  {
    "start": 4116.08,
    "end": 4120.56,
    "text": "where we want to define exactly what the data should look like, so that it's almost like a",
    "textdich": ""
  },
  {
    "start": 4120.56,
    "end": 4124.96,
    "text": "contract between the front end and the back end saying, Hey, the back end sends a message to the",
    "textdich": ""
  },
  {
    "start": 4124.96,
    "end": 4129.12,
    "text": "front end saying, Listen, I expect my data to look like this. If you don't send me the data looks",
    "textdich": ""
  },
  {
    "start": 4129.12,
    "end": 4133.44,
    "text": "exactly like this, I'm going to give you an error. And that's the way you want to work with APIs,",
    "textdich": ""
  },
  {
    "start": 4133.44,
    "end": 4139.28,
    "text": "you want to explicitly define what the data should look like, so that the front end can send you",
    "textdich": ""
  },
  {
    "start": 4139.28,
    "end": 4145.36,
    "text": "exactly what you expect it. So let's see how we can do that using fast API. Now, what we're going",
    "textdich": ""
  },
  {
    "start": 4145.36,
    "end": 4149.92,
    "text": "to do is we're going to make use of a library called pedantic. Now, we've already got this",
    "textdich": ""
  },
  {
    "start": 4149.92,
    "end": 4154.8,
    "text": "installed, because we use that all flag when we did pip install fast API. So if you actually go",
    "textdich": ""
  },
  {
    "start": 4154.8,
    "end": 4161.36,
    "text": "back to your code, and go to your lib folder, you should see pedantic somewhere in here. And you can",
    "textdich": ""
  },
  {
    "start": 4161.36,
    "end": 4165.52,
    "text": "see that pedantic is already installed. So we can make use of pedantic to define what our schema",
    "textdich": ""
  },
  {
    "start": 4165.52,
    "end": 4170.72,
    "text": "should look like. So let me quickly show you how to work with pedantic. It's really simple. But",
    "textdich": ""
  },
  {
    "start": 4170.72,
    "end": 4175.76,
    "text": "keep in mind, technically, pedantic has nothing to do with fast API, it's its own complete and",
    "textdich": ""
  },
  {
    "start": 4175.76,
    "end": 4181.04,
    "text": "separate library that you can use with any of your Python applications. Fast API just makes use of",
    "textdich": ""
  },
  {
    "start": 4181.04,
    "end": 4187.52,
    "text": "it so that we can define a schema. So let's import pedantic. So let's say from pedantic,",
    "textdich": ""
  },
  {
    "start": 4188.72,
    "end": 4196.4,
    "text": "import, base model. And so if we go down to our, you know, our create posts,",
    "textdich": ""
  },
  {
    "start": 4196.4,
    "end": 4202.08,
    "text": "path operation, you know, ultimately, what we want to do is we want to tell the front end what",
    "textdich": ""
  },
  {
    "start": 4202.08,
    "end": 4206.96,
    "text": "a post or a new post should look like, what data do we expect? So let's figure out what data we",
    "textdich": ""
  },
  {
    "start": 4206.96,
    "end": 4212.8,
    "text": "want for a specific post request. So two things that we want, we want a title, which is going to",
    "textdich": ""
  },
  {
    "start": 4212.8,
    "end": 4219.04,
    "text": "have, which is going to be, you know, a string, essentially. And then we want the content, which",
    "textdich": ""
  },
  {
    "start": 4219.04,
    "end": 4223.92,
    "text": "is the content of the post, which is going to be, you know, some sort of string, right. And so we",
    "textdich": ""
  },
  {
    "start": 4223.92,
    "end": 4228.0,
    "text": "want the we expect the user to send both of those things. And then we don't really want anything",
    "textdich": ""
  },
  {
    "start": 4228.0,
    "end": 4231.84,
    "text": "else. We don't want the user to send any other piece of data, we just want these two things.",
    "textdich": ""
  },
  {
    "start": 4232.4,
    "end": 4236.88,
    "text": "And we can put in any other pieces of data we want. So if we want the user to pass in something like,",
    "textdich": ""
  },
  {
    "start": 4237.36,
    "end": 4244.56,
    "text": "you know, what is the category of the post, we can include that, we can maybe include maybe the",
    "textdich": ""
  },
  {
    "start": 4244.56,
    "end": 4250.0,
    "text": "number of I mean, I don't know, you can really think of anything, maybe a Boolean that kind of",
    "textdich": ""
  },
  {
    "start": 4250.0,
    "end": 4255.2,
    "text": "represents, you know, is this a published post? Or do you want this to be saved as a draft? So you",
    "textdich": ""
  },
  {
    "start": 4255.2,
    "end": 4260.24,
    "text": "can construct it however you want. But we're just going to stick to title and content. So the way",
    "textdich": ""
  },
  {
    "start": 4260.24,
    "end": 4266.56,
    "text": "that this works is, I'm going to remove this comment right here. We're going to define a class,",
    "textdich": ""
  },
  {
    "start": 4266.56,
    "end": 4270.16,
    "text": "we'll call this class, and then we'll give it whatever name we want, it's going to represent",
    "textdich": ""
  },
  {
    "start": 4270.16,
    "end": 4276.08,
    "text": "what a post should look like. So I'm just going to call this post. And then this is going to",
    "textdich": ""
  },
  {
    "start": 4276.08,
    "end": 4282.8,
    "text": "extend base model. So this is what makes it a special pydantic model, we just extend base model.",
    "textdich": ""
  },
  {
    "start": 4284.24,
    "end": 4290.0,
    "text": "And then here, we pass in the different properties for our post. And like I said, we want a title.",
    "textdich": ""
  },
  {
    "start": 4292.88,
    "end": 4302.88,
    "text": "And we also want a the content. Now, what we pass here is going to be what is this type of data. So",
    "textdich": ""
  },
  {
    "start": 4302.88,
    "end": 4307.52,
    "text": "if we go to this pydantic library, you'll see that there's the different field types. So we can set",
    "textdich": ""
  },
  {
    "start": 4307.52,
    "end": 4313.36,
    "text": "things to be a Boolean, we can set it to be an int float string. So all of the common Python types",
    "textdich": ""
  },
  {
    "start": 4313.36,
    "end": 4321.12,
    "text": "list tuple, it's all available within pydantic. So we know what a ultimately what a title should look",
    "textdich": ""
  },
  {
    "start": 4321.12,
    "end": 4326.48,
    "text": "like. So what do you guys think should be the field type for the title property? Well, I think",
    "textdich": ""
  },
  {
    "start": 4326.48,
    "end": 4330.72,
    "text": "it makes sense. It should be a string because this looks like a string, it's got some text,",
    "textdich": ""
  },
  {
    "start": 4330.72,
    "end": 4334.88,
    "text": "it's got some text, it probably should be a string. So let's set this to be string. And the content",
    "textdich": ""
  },
  {
    "start": 4334.88,
    "end": 4343.68,
    "text": "should be the same thing, it should also be set to string. And now what we can do is let's take this",
    "textdich": ""
  },
  {
    "start": 4343.68,
    "end": 4352.4,
    "text": "model and go down to create posts. Instead of extracting the payload, what I'm going to do is",
    "textdich": ""
  },
  {
    "start": 4352.4,
    "end": 4363.28,
    "text": "I'm going to reference that post pydantic model. And then I'm going to save this as a variable",
    "textdich": ""
  },
  {
    "start": 4363.84,
    "end": 4368.8,
    "text": "called post. Once again, they don't have to match. But since this will represent the post,",
    "textdich": ""
  },
  {
    "start": 4368.8,
    "end": 4375.12,
    "text": "I can call this maybe new underscore post or something like that. And then, and then reference",
    "textdich": ""
  },
  {
    "start": 4375.12,
    "end": 4380.88,
    "text": "the post pydantic model. So what's going to happen is, because we pass this into our path operation,",
    "textdich": ""
  },
  {
    "start": 4380.88,
    "end": 4386.8,
    "text": "fast API is automatically going to validate the data that it receives from the client based off",
    "textdich": ""
  },
  {
    "start": 4386.8,
    "end": 4392.4,
    "text": "of this model. So it's going to check, hey, does it have a title? If so, is it a string? If it if",
    "textdich": ""
  },
  {
    "start": 4392.4,
    "end": 4396.4,
    "text": "the title doesn't exist, or if it's not a string, and maybe we pass an integer, then it's going to",
    "textdich": ""
  },
  {
    "start": 4396.4,
    "end": 4401.44,
    "text": "throw an error, it's also going to check for us if contents available. If it is available,",
    "textdich": ""
  },
  {
    "start": 4401.44,
    "end": 4405.92,
    "text": "it's going to make sure that it's a string. And if contents not available, or if it's not a string,",
    "textdich": ""
  },
  {
    "start": 4405.92,
    "end": 4410.8,
    "text": "it's going to throw an error. So it's doing all of the validation for us. And then we can",
    "textdich": ""
  },
  {
    "start": 4410.8,
    "end": 4416.08,
    "text": "it's defining the schema of what it should look like for the front end, what kind of data should",
    "textdich": ""
  },
  {
    "start": 4416.08,
    "end": 4421.68,
    "text": "the front end send to us. So we're going to remove all of this nonsense.",
    "textdich": ""
  },
  {
    "start": 4424.08,
    "end": 4429.76,
    "text": "I'm just gonna for now just say data. I don't know, new post for now.",
    "textdich": ""
  },
  {
    "start": 4431.92,
    "end": 4436.0,
    "text": "And now what I'm gonna do instead of print payload, we're going to say print new underscore post.",
    "textdich": ""
  },
  {
    "start": 4436.0,
    "end": 4444.24,
    "text": "So let's save this. And then I'm gonna send a post request. Okay, so that updated fine.",
    "textdich": ""
  },
  {
    "start": 4444.8,
    "end": 4448.64,
    "text": "But let's take a look at what this printed out. So take a look at what you're printing out. Look at",
    "textdich": ""
  },
  {
    "start": 4448.64,
    "end": 4456.24,
    "text": "that. It automatically extracted all of that data for us. So now we can access, you know, post dot",
    "textdich": ""
  },
  {
    "start": 4456.24,
    "end": 4461.2,
    "text": "title, and we can get the title of the post. And we can also access post dot content to get the",
    "textdich": ""
  },
  {
    "start": 4461.2,
    "end": 4468.8,
    "text": "content of the post. And just to prove that to you guys, we'll say post dot title. So we'll save",
    "textdich": ""
  },
  {
    "start": 4468.8,
    "end": 4475.6,
    "text": "that will send a request. And now look at that look how easy it is to extract that data because",
    "textdich": ""
  },
  {
    "start": 4475.6,
    "end": 4480.96,
    "text": "it's already assigned to that new post variable. And we can just access each property based off of",
    "textdich": ""
  },
  {
    "start": 4480.96,
    "end": 4487.2,
    "text": "what the model is defined as. Now that's great and all. But let's check to see if it's actually",
    "textdich": ""
  },
  {
    "start": 4487.2,
    "end": 4494.08,
    "text": "performing all of that validation. So if I go to my postman, and I remove title,",
    "textdich": ""
  },
  {
    "start": 4496.64,
    "end": 4503.04,
    "text": "let's see what happens. I'll hit send. Look at this. Look at this, it's saying that the inside",
    "textdich": ""
  },
  {
    "start": 4503.04,
    "end": 4509.2,
    "text": "the body, there's a title field and it's saying a value error, it's missing. Now we didn't tell",
    "textdich": ""
  },
  {
    "start": 4509.2,
    "end": 4514.0,
    "text": "fast API just to send this, but it automatically does the validation for us and sends back an",
    "textdich": ""
  },
  {
    "start": 4514.0,
    "end": 4518.32,
    "text": "error message. And then it sends back a status code. So this is the status code of the message",
    "textdich": ""
  },
  {
    "start": 4518.32,
    "end": 4523.28,
    "text": "it sends a 422, we can change that later, don't worry about that. But it's automatically performing",
    "textdich": ""
  },
  {
    "start": 4523.28,
    "end": 4529.84,
    "text": "the validation. And that's what's awesome about this. And if we, if I add the title back,",
    "textdich": ""
  },
  {
    "start": 4533.2,
    "end": 4539.92,
    "text": "what was it top beaches in Florida? And instead, actually, I changed this to be",
    "textdich": ""
  },
  {
    "start": 4539.92,
    "end": 4548.48,
    "text": "a one or something. And I need that comma. Let's see what happens if I hit send. It looks like",
    "textdich": ""
  },
  {
    "start": 4548.48,
    "end": 4556.0,
    "text": "there's no errors. And that's because the number one can actually be converted into a string. So",
    "textdich": ""
  },
  {
    "start": 4556.0,
    "end": 4561.44,
    "text": "it's not going to throw an error on that. And that's perfectly fine. And I'll and that's perfectly",
    "textdich": ""
  },
  {
    "start": 4561.44,
    "end": 4566.48,
    "text": "fine. So that's not a big deal. But let's change this back. Like I said, it's going to try to",
    "textdich": ""
  },
  {
    "start": 4566.48,
    "end": 4570.72,
    "text": "convert whatever data we give it to a string. So as long as it's able to convert it to a string,",
    "textdich": ""
  },
  {
    "start": 4570.72,
    "end": 4574.88,
    "text": "it's okay in any integer that we pass can be converted to a string. So I'm going to change",
    "textdich": ""
  },
  {
    "start": 4574.88,
    "end": 4582.56,
    "text": "this back and I'll add top beaches in Florida. Florida. Let's see what happens if we remove the",
    "textdich": ""
  },
  {
    "start": 4582.56,
    "end": 4591.44,
    "text": "content now. I hit send. Look at that. Now it's saying the content is missing. Perfect. So our",
    "textdich": ""
  },
  {
    "start": 4591.44,
    "end": 4600.72,
    "text": "validation is working exactly how we expect it to. And then I forget what what was it something",
    "textdich": ""
  },
  {
    "start": 4600.72,
    "end": 4607.04,
    "text": "something beaches. I can't remember what it was. Now let's say that we want to",
    "textdich": ""
  },
  {
    "start": 4609.6,
    "end": 4615.52,
    "text": "assign a property. That's optional, right? Like what if we want it to make it so that the front",
    "textdich": ""
  },
  {
    "start": 4615.52,
    "end": 4620.8,
    "text": "end can either choose to send some piece of data or not send a piece of data. So let's say that",
    "textdich": ""
  },
  {
    "start": 4620.8,
    "end": 4626.72,
    "text": "we want the user to be able to define if a property if a post should be published or not,",
    "textdich": ""
  },
  {
    "start": 4626.72,
    "end": 4633.52,
    "text": "well, we can create a field called published, which is going to be set, which is gonna be a type of",
    "textdich": ""
  },
  {
    "start": 4633.52,
    "end": 4646.16,
    "text": "Boolean. And we can say, you know, first of all, we can say, if the user doesn't provide us a value,",
    "textdich": ""
  },
  {
    "start": 4646.16,
    "end": 4652.48,
    "text": "we can give it a default value. So here I'll say true. And so if the user doesn't provide published,",
    "textdich": ""
  },
  {
    "start": 4653.52,
    "end": 4658.24,
    "text": "then it's going to default to true. If it does provide published, then whatever value you give",
    "textdich": ""
  },
  {
    "start": 4658.24,
    "end": 4663.92,
    "text": "it, that's what we're going to use it as. And I'm going to go down here. And we're going to change",
    "textdich": ""
  },
  {
    "start": 4663.92,
    "end": 4678.16,
    "text": "this to we're going to grab the published value. And then down here, we'll say published, whoops,",
    "textdich": ""
  },
  {
    "start": 4678.16,
    "end": 4687.28,
    "text": "can be set to true. So let's hit send. And we can see that it got set to true. That's good.",
    "textdich": ""
  },
  {
    "start": 4687.28,
    "end": 4695.76,
    "text": "If we set this to false, it's send, we can see that it's false. And then if we remove this all",
    "textdich": ""
  },
  {
    "start": 4695.76,
    "end": 4705.36,
    "text": "together, move that comma as well, hit send. Look at that, it defaults to true. So now we've created",
    "textdich": ""
  },
  {
    "start": 4705.36,
    "end": 4711.28,
    "text": "an app an optional field for our schema. So the user doesn't have to provide this, and it's going",
    "textdich": ""
  },
  {
    "start": 4711.28,
    "end": 4717.68,
    "text": "to default to true in this case. Now, let's say we wanted to create another field. However, instead",
    "textdich": ""
  },
  {
    "start": 4717.68,
    "end": 4722.88,
    "text": "of giving it a default value, if it's not sent, we want it to default to none. So we want it to be",
    "textdich": ""
  },
  {
    "start": 4722.88,
    "end": 4727.28,
    "text": "completely optional. And we're not going to store any value. And if the user doesn't provide it,",
    "textdich": ""
  },
  {
    "start": 4727.28,
    "end": 4731.92,
    "text": "what we can do is let's say the field is a rating, let's say the user can give each post a rating,",
    "textdich": ""
  },
  {
    "start": 4732.48,
    "end": 4739.04,
    "text": "what we can say is optional. And we're going to have to import optional from typing from the",
    "textdich": ""
  },
  {
    "start": 4739.04,
    "end": 4744.64,
    "text": "typing library. So import optional. And then we have to pass in the type. So what is it going to",
    "textdich": ""
  },
  {
    "start": 4744.64,
    "end": 4751.2,
    "text": "be? In this case, a rating, I think an integer makes sense. And then we can say equals to none.",
    "textdich": ""
  },
  {
    "start": 4752.64,
    "end": 4755.84,
    "text": "So this is going to be a fully optional field. And if the user doesn't provide it,",
    "textdich": ""
  },
  {
    "start": 4755.84,
    "end": 4764.0,
    "text": "it's going to default to a value of none. And so here, I'm just going to get the the value of our",
    "textdich": ""
  },
  {
    "start": 4764.0,
    "end": 4774.08,
    "text": "rating. And so if I hit send right now, in our body, we don't have a rating field, I hit send,",
    "textdich": ""
  },
  {
    "start": 4774.08,
    "end": 4780.48,
    "text": "you can see that it defaults to a value of none, because we set this to be optional, none. However,",
    "textdich": ""
  },
  {
    "start": 4782.08,
    "end": 4788.08,
    "text": "if I pass in a rating field, I need to give it a value, some kind of value. So I'll say we'll give",
    "textdich": ""
  },
  {
    "start": 4788.08,
    "end": 4796.32,
    "text": "this maybe like four stars or something. I hit send, we can see that now look, the value of rating",
    "textdich": ""
  },
  {
    "start": 4796.32,
    "end": 4802.4,
    "text": "is set to four. And then finally, the last thing I want to note is because we set the type to be an",
    "textdich": ""
  },
  {
    "start": 4802.4,
    "end": 4807.04,
    "text": "integer, so even though it's optional, we still have to specify the type. If I give this a value",
    "textdich": ""
  },
  {
    "start": 4807.04,
    "end": 4811.6,
    "text": "of a string, so you know, something like Hello, which is not a valid rating, take a look at what",
    "textdich": ""
  },
  {
    "start": 4811.6,
    "end": 4817.44,
    "text": "happens. Look at that. It says in the body, the rating field, the value is not a valid integer.",
    "textdich": ""
  },
  {
    "start": 4817.44,
    "end": 4822.72,
    "text": "So it wasn't able to convert whatever value we sent into integer. And so that's why it's throwing",
    "textdich": ""
  },
  {
    "start": 4822.72,
    "end": 4827.28,
    "text": "an error and saying like, this does not match up with schema, and it's throwing an error. And so",
    "textdich": ""
  },
  {
    "start": 4827.28,
    "end": 4831.28,
    "text": "that's what's awesome about this is now we can ensure that our front end is sending the exact",
    "textdich": ""
  },
  {
    "start": 4831.28,
    "end": 4837.12,
    "text": "data that we expect by using these pedantic models. So moving forward in this course,",
    "textdich": ""
  },
  {
    "start": 4837.92,
    "end": 4844.0,
    "text": "we are going to really make use of pedantic models to ensure that the schemas not only receiving",
    "textdich": ""
  },
  {
    "start": 4844.0,
    "end": 4852.0,
    "text": "data from the front end, but also sending data back is all matching up with our organized schema.",
    "textdich": ""
  },
  {
    "start": 4852.56,
    "end": 4857.68,
    "text": "And actually, there's one last thing I want to show you guys. And that is that when we actually",
    "textdich": ""
  },
  {
    "start": 4858.56,
    "end": 4864.16,
    "text": "kind of extract that data and save it into new post, it actually stores it as a pedantic model.",
    "textdich": ""
  },
  {
    "start": 4864.16,
    "end": 4871.12,
    "text": "So it's a specific pedantic model. And each pedantic model has a method called dot dict.",
    "textdich": ""
  },
  {
    "start": 4871.12,
    "end": 4877.52,
    "text": "So if I do, if I print new post below this, what we can do is if you ever need to convert",
    "textdich": ""
  },
  {
    "start": 4878.16,
    "end": 4884.64,
    "text": "your pedantic model to a dictionary, all we have to do is write the name of the variable,",
    "textdich": ""
  },
  {
    "start": 4885.2,
    "end": 4893.44,
    "text": "we say dot dict. This is going to take that pedantic model, and then it's going to convert",
    "textdich": ""
  },
  {
    "start": 4893.44,
    "end": 4905.36,
    "text": "it to a dictionary. So let's print that out. Let's save it. Let's hit send. Whoops,",
    "textdich": ""
  },
  {
    "start": 4905.36,
    "end": 4909.84,
    "text": "and I forgot to, it's still throwing a validation error, but that's to be expected. So we'll say",
    "textdich": ""
  },
  {
    "start": 4909.84,
    "end": 4915.52,
    "text": "change that to four. All right, take a look at the two different things. So this is a pedantic",
    "textdich": ""
  },
  {
    "start": 4915.52,
    "end": 4920.32,
    "text": "model that's just printing out the different properties of that of that model, whereas this",
    "textdich": ""
  },
  {
    "start": 4920.32,
    "end": 4925.2,
    "text": "is a regular Python dictionary. So we can just send back a dictionary if we want to. So we do",
    "textdich": ""
  },
  {
    "start": 4925.2,
    "end": 4932.88,
    "text": "return new post and save that now if I hit send, we're just sending back a dictionary. And so now",
    "textdich": ""
  },
  {
    "start": 4932.88,
    "end": 4937.04,
    "text": "we send back the data with all of the different properties. And so you'll see that this is actually",
    "textdich": ""
  },
  {
    "start": 4937.04,
    "end": 4941.28,
    "text": "a nice little handy tool to be able to convert it to a dictionary, which is something that we'll be",
    "textdich": ""
  },
  {
    "start": 4941.28,
    "end": 4945.76,
    "text": "needing to do in some of the future lectures. So I wanted to make sure we just cover our bases real",
    "textdich": ""
  },
  {
    "start": 4945.76,
    "end": 4951.04,
    "text": "quick on that. And also, I don't like calling this new post, I'm just going to change this to post",
    "textdich": ""
  },
  {
    "start": 4951.04,
    "end": 4956.4,
    "text": "for now, because I think that's a little bit better, my opinion, because it is just a post,",
    "textdich": ""
  },
  {
    "start": 4956.4,
    "end": 4958.72,
    "text": "we don't need to know that it's a new post, it clearly is.",
    "textdich": ""
  },
  {
    "start": 4961.36,
    "end": 4966.64,
    "text": "And let's just double check that everything works, hit send. Perfect. In this lesson,",
    "textdich": ""
  },
  {
    "start": 4966.64,
    "end": 4971.2,
    "text": "we're going to talk about what a CRUD application is, as well as what our standard conventions when",
    "textdich": ""
  },
  {
    "start": 4971.2,
    "end": 4977.36,
    "text": "it comes to creating an API for a CRUD based application. So CRUD is an acronym that represents",
    "textdich": ""
  },
  {
    "start": 4977.36,
    "end": 4982.72,
    "text": "the four main functions of an application. So any application, regardless of what it is, needs to be",
    "textdich": ""
  },
  {
    "start": 4982.72,
    "end": 4988.0,
    "text": "able to create things. So in our case, since we're building a, you know, a social media type",
    "textdich": ""
  },
  {
    "start": 4988.0,
    "end": 4994.0,
    "text": "application, we need to be able to create posts make new posts, we need to be able to read posts.",
    "textdich": ""
  },
  {
    "start": 4994.0,
    "end": 4998.16,
    "text": "And so that includes, you know, retrieving all of the pre existing posts, we need to be able to",
    "textdich": ""
  },
  {
    "start": 4998.16,
    "end": 5002.16,
    "text": "update a post if we want to implement that functionality. So if we decide to change what",
    "textdich": ""
  },
  {
    "start": 5002.16,
    "end": 5006.24,
    "text": "our post says, we would use the update functionality. And then finally, we need to be able to delete a",
    "textdich": ""
  },
  {
    "start": 5006.24,
    "end": 5013.36,
    "text": "post. And so the CRUD that represents the four main functions of any CRUD based application. So",
    "textdich": ""
  },
  {
    "start": 5013.36,
    "end": 5017.76,
    "text": "it's nothing more than an acronym. However, I created this slide so that you guys can understand",
    "textdich": ""
  },
  {
    "start": 5017.76,
    "end": 5021.84,
    "text": "what our standard conventions when it comes to creating an API for a CRUD based application,",
    "textdich": ""
  },
  {
    "start": 5021.84,
    "end": 5028.8,
    "text": "because there are certain best practices that we need to follow. And so when it comes to naming",
    "textdich": ""
  },
  {
    "start": 5028.8,
    "end": 5034.64,
    "text": "the URL and the paths for each operation, there's a standard convention. And the first thing that I",
    "textdich": ""
  },
  {
    "start": 5034.64,
    "end": 5039.04,
    "text": "want to point out is since we're working with posts, it makes sense to name all of the URLs,",
    "textdich": ""
  },
  {
    "start": 5039.04,
    "end": 5044.64,
    "text": "all the paths with slash posts. And it's important that you use the plural form of posts, you don't",
    "textdich": ""
  },
  {
    "start": 5044.64,
    "end": 5049.68,
    "text": "want to do slash post, you want to do slash posts as in plural, this is standard convention for",
    "textdich": ""
  },
  {
    "start": 5049.68,
    "end": 5054.48,
    "text": "API's. And if we were working with users, and we want to do be able to create, read, update and",
    "textdich": ""
  },
  {
    "start": 5054.48,
    "end": 5059.92,
    "text": "delete users, it wouldn't be slash user, it would be slash users. So always use the plural that",
    "textdich": ""
  },
  {
    "start": 5059.92,
    "end": 5066.24,
    "text": "standard convention. Now when it comes to creating a post, right, that's always going to be a post",
    "textdich": ""
  },
  {
    "start": 5066.24,
    "end": 5070.56,
    "text": "request. So we've got the create functionality right here. And we can see that we have to send",
    "textdich": ""
  },
  {
    "start": 5070.56,
    "end": 5075.36,
    "text": "a post request standard convention, anytime you want to create an entity, it's going to be a post",
    "textdich": ""
  },
  {
    "start": 5075.36,
    "end": 5081.68,
    "text": "request. And the URL or the path for that specific request is always going to be slash posts in this",
    "textdich": ""
  },
  {
    "start": 5081.68,
    "end": 5086.0,
    "text": "case. And if you want to see what that looks like, for the decorator and fast API, it's pretty simple,",
    "textdich": ""
  },
  {
    "start": 5086.0,
    "end": 5090.72,
    "text": "you just do app dot post slash post. So this is something you guys already know. Now, when it",
    "textdich": ""
  },
  {
    "start": 5090.72,
    "end": 5095.36,
    "text": "comes to read functionality, which would be, you know, reading or retrieving pre existing posts,",
    "textdich": ""
  },
  {
    "start": 5095.36,
    "end": 5099.28,
    "text": "there's actually two different path operations we're going to create. So the first one is going",
    "textdich": ""
  },
  {
    "start": 5099.28,
    "end": 5104.4,
    "text": "to be slash posts. And this is going to be for retrieving either all of the posts or multiple",
    "textdich": ""
  },
  {
    "start": 5104.4,
    "end": 5110.72,
    "text": "posts, depending on what filter that we use. And so when it comes to retrieving information from a",
    "textdich": ""
  },
  {
    "start": 5110.72,
    "end": 5114.8,
    "text": "database or anything like that, retrieving data, it's always going to be a get operation. So you",
    "textdich": ""
  },
  {
    "start": 5114.8,
    "end": 5120.48,
    "text": "send a get request to slash posts. And if you want to see what that face to the decorator on fast",
    "textdich": ""
  },
  {
    "start": 5120.48,
    "end": 5124.4,
    "text": "API would look like, it's just app dot get slash posts. Once again, we already have this set up in",
    "textdich": ""
  },
  {
    "start": 5124.4,
    "end": 5129.36,
    "text": "our application so far. However, there's also going to be another path operation for reading,",
    "textdich": ""
  },
  {
    "start": 5129.36,
    "end": 5133.28,
    "text": "right? And that's if you want to get one individual post. So if we want to get detailed",
    "textdich": ""
  },
  {
    "start": 5133.28,
    "end": 5139.6,
    "text": "information about one specific post, we're going to send a get request to slash posts slash and",
    "textdich": ""
  },
  {
    "start": 5139.6,
    "end": 5145.68,
    "text": "then we've got this ID right here. So anytime you create something, what's going to happen is",
    "textdich": ""
  },
  {
    "start": 5145.68,
    "end": 5150.32,
    "text": "anytime you add something to a database, the database is going to give it that specific item,",
    "textdich": ""
  },
  {
    "start": 5150.32,
    "end": 5156.8,
    "text": "a unique identifier so that we can uniquely identify that specific entry. And so if I want",
    "textdich": ""
  },
  {
    "start": 5156.8,
    "end": 5161.84,
    "text": "to get detailed information about a specific post, I would just send a request to slash posts,",
    "textdich": ""
  },
  {
    "start": 5161.84,
    "end": 5166.4,
    "text": "and then pass the ID of that specific post I'm interested in. So that's what this ID represents.",
    "textdich": ""
  },
  {
    "start": 5166.96,
    "end": 5170.8,
    "text": "And within fast API, if you want to see what that actually looks like, you would just do app dot get",
    "textdich": ""
  },
  {
    "start": 5170.8,
    "end": 5175.68,
    "text": "slash posts. And then you do curly braces, and then ID and that'll allow you to extract",
    "textdich": ""
  },
  {
    "start": 5175.68,
    "end": 5180.8,
    "text": "the ID from the specific URL of the request. And then we can, you know, take that URL,",
    "textdich": ""
  },
  {
    "start": 5180.8,
    "end": 5184.16,
    "text": "sorry, take that ID, and then you know, send it out to our database so that we can retrieve",
    "textdich": ""
  },
  {
    "start": 5184.16,
    "end": 5189.76,
    "text": "the information. So there's always going to be two specific path operations for read functionality.",
    "textdich": ""
  },
  {
    "start": 5189.76,
    "end": 5196.4,
    "text": "Then we have update. So this would involve updating a pre existing post. So maybe we,",
    "textdich": ""
  },
  {
    "start": 5196.4,
    "end": 5199.28,
    "text": "you know, posted out something, and then we realized we said something offensive,",
    "textdich": ""
  },
  {
    "start": 5199.28,
    "end": 5204.32,
    "text": "and we want to update it before anyone takes a screenshot of it. Now, when it comes to updating,",
    "textdich": ""
  },
  {
    "start": 5204.32,
    "end": 5209.28,
    "text": "right, there's two different HTTP methods that we can use, we can use put or patch. And it's really",
    "textdich": ""
  },
  {
    "start": 5209.28,
    "end": 5212.88,
    "text": "a matter of user preference, the only difference is that I want to I don't want to spend too much",
    "textdich": ""
  },
  {
    "start": 5212.88,
    "end": 5218.88,
    "text": "time on it is that when we use put that you the idea is that you pass all of the information",
    "textdich": ""
  },
  {
    "start": 5218.88,
    "end": 5224.48,
    "text": "all of the information for updating it. So all of the fields have to be sent to the to the API",
    "textdich": ""
  },
  {
    "start": 5224.48,
    "end": 5229.68,
    "text": "server, whereas a patch, we can just send the specific field that we want to change. So put,",
    "textdich": ""
  },
  {
    "start": 5229.68,
    "end": 5233.52,
    "text": "you want to change the entire thing, you have to pass every, every field, even if it's going to be",
    "textdich": ""
  },
  {
    "start": 5233.52,
    "end": 5237.44,
    "text": "the same, and most fields don't change. Whereas a patch, we would just change the one specific",
    "textdich": ""
  },
  {
    "start": 5237.44,
    "end": 5241.76,
    "text": "field. So as an example, as a, you know, if we're working with users, actually, if we're working",
    "textdich": ""
  },
  {
    "start": 5241.76,
    "end": 5246.32,
    "text": "with posts, and let's say I wanted to change the title, all right, I want to update the title of",
    "textdich": ""
  },
  {
    "start": 5246.32,
    "end": 5251.28,
    "text": "a post, if I used a put request, I'd have to give the new title, and I would have to give the",
    "textdich": ""
  },
  {
    "start": 5251.28,
    "end": 5256.72,
    "text": "pre existing content, right? Because the put, the idea behind put is that you have to provide all",
    "textdich": ""
  },
  {
    "start": 5256.72,
    "end": 5260.8,
    "text": "of the same information, so that we can on the back end, just take all the information and then",
    "textdich": ""
  },
  {
    "start": 5260.8,
    "end": 5265.52,
    "text": "update the entity. Whereas a patch operation, I can just send the title, and then my back end",
    "textdich": ""
  },
  {
    "start": 5265.52,
    "end": 5270.88,
    "text": "should know how to just update that one field, we're going to stick with put I believe, in our",
    "textdich": ""
  },
  {
    "start": 5270.88,
    "end": 5274.08,
    "text": "application, but really, at the end of the day, it doesn't really matter. It's just a matter of use",
    "textdich": ""
  },
  {
    "start": 5274.08,
    "end": 5279.28,
    "text": "of preference. But with update, just like when it comes to retrieving one specific post, we have to",
    "textdich": ""
  },
  {
    "start": 5279.28,
    "end": 5286.24,
    "text": "pass in the ID so that we know which specific post we want to update. And for the decorator and fast",
    "textdich": ""
  },
  {
    "start": 5286.24,
    "end": 5291.6,
    "text": "API, the only thing that we change is it's going to be app dot put. And then we can pass in the ID",
    "textdich": ""
  },
  {
    "start": 5291.6,
    "end": 5295.52,
    "text": "like we did before. And then finally, we have delete. So if you want to delete a post, once again,",
    "textdich": ""
  },
  {
    "start": 5295.52,
    "end": 5300.16,
    "text": "you're going to send a delete request, so that the HTTP verb is going to be delete. And then we have",
    "textdich": ""
  },
  {
    "start": 5300.16,
    "end": 5305.84,
    "text": "to pass in the specific ID of the post as well. And then this is what the fast API decorator is",
    "textdich": ""
  },
  {
    "start": 5305.84,
    "end": 5310.64,
    "text": "going to look like. So it's actually not that hard. It's fairly simple. And you'll see that once you",
    "textdich": ""
  },
  {
    "start": 5310.64,
    "end": 5315.92,
    "text": "create one crud API, creating another one is almost a matter of copying and pasting really.",
    "textdich": ""
  },
  {
    "start": 5316.56,
    "end": 5321.36,
    "text": "And so in the next video, we're going to make a few changes to our API so that we can make sure",
    "textdich": ""
  },
  {
    "start": 5321.36,
    "end": 5326.8,
    "text": "that we follow this naming convention. Because right now, I believe when it comes to creating a",
    "textdich": ""
  },
  {
    "start": 5326.8,
    "end": 5331.44,
    "text": "post, instead of just using slash posts, we call it slash create posts, which once again is not",
    "textdich": ""
  },
  {
    "start": 5331.44,
    "end": 5335.2,
    "text": "following best practice. So we'll update that in the next video. Alright guys, so in the last",
    "textdich": ""
  },
  {
    "start": 5335.2,
    "end": 5339.76,
    "text": "lesson, we learned about best practice and naming conventions for an API. So what I want to do is",
    "textdich": ""
  },
  {
    "start": 5339.76,
    "end": 5344.88,
    "text": "quickly go into all the code that we have and make changes so that we follow best practices. And so",
    "textdich": ""
  },
  {
    "start": 5344.88,
    "end": 5349.92,
    "text": "if you take a look at our get requests, you can see we say send a get request slash posts. That's",
    "textdich": ""
  },
  {
    "start": 5349.92,
    "end": 5354.48,
    "text": "perfect. We don't need to change anything to that. However, the issue is, is our create post",
    "textdich": ""
  },
  {
    "start": 5354.48,
    "end": 5359.52,
    "text": "functionality. So the path for creating posts, we can see that we send it to a URL of slash create",
    "textdich": ""
  },
  {
    "start": 5359.52,
    "end": 5365.76,
    "text": "posts, that is not going and following best practice. So what we do just change this to be slash posts.",
    "textdich": ""
  },
  {
    "start": 5367.52,
    "end": 5375.44,
    "text": "And that's all we have to do. And so we'll save this. And we'll just double check inside our post",
    "textdich": ""
  },
  {
    "start": 5375.44,
    "end": 5379.44,
    "text": "man just to make sure we update that as well. So this is going to be to slash posts. And then we'll",
    "textdich": ""
  },
  {
    "start": 5379.44,
    "end": 5382.96,
    "text": "just test this out to make sure we didn't break anything. And it looks like it's still working",
    "textdich": ""
  },
  {
    "start": 5382.96,
    "end": 5388.72,
    "text": "just fine. Alright guys, so if we take a look at our code, you can see that for our create post",
    "textdich": ""
  },
  {
    "start": 5388.72,
    "end": 5392.96,
    "text": "path function, we're not actually doing anything with the data, we're not actually saving the post",
    "textdich": ""
  },
  {
    "start": 5392.96,
    "end": 5396.96,
    "text": "anywhere right now, we just print it out and then send it back to the user. So that's not exactly",
    "textdich": ""
  },
  {
    "start": 5396.96,
    "end": 5401.28,
    "text": "how a real application would work. And so what I want to do is I want to start saving these posts,",
    "textdich": ""
  },
  {
    "start": 5401.28,
    "end": 5405.92,
    "text": "I want to start turning this into a real fully functioning application. Now, ideally, we're going",
    "textdich": ""
  },
  {
    "start": 5405.92,
    "end": 5410.0,
    "text": "to save this within a database, because that's how any application works, you want to take a post,",
    "textdich": ""
  },
  {
    "start": 5410.0,
    "end": 5415.12,
    "text": "you want to save it in database so that you can persist that data. However, we're not quite ready",
    "textdich": ""
  },
  {
    "start": 5415.12,
    "end": 5419.12,
    "text": "to handle working with the database, a little complex, we're going to get to it in this course,",
    "textdich": ""
  },
  {
    "start": 5419.12,
    "end": 5423.36,
    "text": "however, I want to keep things simple. So we're going to do is we're going to save the posts in",
    "textdich": ""
  },
  {
    "start": 5423.36,
    "end": 5428.56,
    "text": "memory. And how do we do that easy, I'm just going to create a variable, just globally,",
    "textdich": ""
  },
  {
    "start": 5428.56,
    "end": 5432.4,
    "text": "that's going to store all of our posts. So I'm going to say my underscore posts.",
    "textdich": ""
  },
  {
    "start": 5433.76,
    "end": 5438.48,
    "text": "And this is just going to be an array. And so this array is going to contain a whole bunch of",
    "textdich": ""
  },
  {
    "start": 5438.48,
    "end": 5442.56,
    "text": "posts objects, right. And what each post is going to be is going to it's going to be essentially a",
    "textdich": ""
  },
  {
    "start": 5442.56,
    "end": 5446.88,
    "text": "dictionary. And the dictionary is going to look kind of like this. So we're going to have a couple",
    "textdich": ""
  },
  {
    "start": 5446.88,
    "end": 5451.2,
    "text": "properties. So we already know that our post is going to have a title. And then that'll have,",
    "textdich": ""
  },
  {
    "start": 5451.2,
    "end": 5457.6,
    "text": "you know, whatever, you know, title of post one or whatever. And then we're going to have the content,",
    "textdich": ""
  },
  {
    "start": 5457.6,
    "end": 5465.52,
    "text": "of course. And I'll just say content of post one, this is just an example post. And then what we'll",
    "textdich": ""
  },
  {
    "start": 5465.52,
    "end": 5471.2,
    "text": "also do is, like I mentioned before, anytime you save an applicant, save a piece of information",
    "textdich": ""
  },
  {
    "start": 5471.2,
    "end": 5477.12,
    "text": "within a database, the database is going to create a unique identifier and ID. Now, since we're not",
    "textdich": ""
  },
  {
    "start": 5477.12,
    "end": 5482.64,
    "text": "working with databases, there's no ID, however, it's going to create issues. Because, you know,",
    "textdich": ""
  },
  {
    "start": 5482.64,
    "end": 5488.0,
    "text": "if you remember, when it when it comes to working with CRUD based API is we need to be able to fetch",
    "textdich": ""
  },
  {
    "start": 5488.0,
    "end": 5491.84,
    "text": "data and update data based off of the ID of a specific post. So we do need to still have an",
    "textdich": ""
  },
  {
    "start": 5491.84,
    "end": 5497.2,
    "text": "ID so that we can uniquely reference any single item within this array. So we're going to have",
    "textdich": ""
  },
  {
    "start": 5497.2,
    "end": 5504.4,
    "text": "another field called ID. And then this is just going to have, you know, be some random integer,",
    "textdich": ""
  },
  {
    "start": 5504.4,
    "end": 5508.64,
    "text": "you know, 12345. It doesn't matter. It's just got to be unique. That's all that matters. So this",
    "textdich": ""
  },
  {
    "start": 5508.64,
    "end": 5511.44,
    "text": "is what our post is going to look like. And we're going to just store it in this array. So we're",
    "textdich": ""
  },
  {
    "start": 5511.44,
    "end": 5516.32,
    "text": "going to have multiple posts. And I'm going to keep this one hard coded in here. Because every",
    "textdich": ""
  },
  {
    "start": 5516.32,
    "end": 5520.96,
    "text": "time we change our code, and hit Save and refresh, guess what, it's going to clear this out. Because",
    "textdich": ""
  },
  {
    "start": 5520.96,
    "end": 5524.8,
    "text": "remember, this is just stored in memory. So every time our application restarts, we're going to lose",
    "textdich": ""
  },
  {
    "start": 5524.8,
    "end": 5530.96,
    "text": "that data. So just to keep things simple, I'm going to hardcode another another entry. So for",
    "textdich": ""
  },
  {
    "start": 5530.96,
    "end": 5544.8,
    "text": "this post, we'll say the title is favorite foods. And the content will be I like pizza. And we'll",
    "textdich": ""
  },
  {
    "start": 5544.8,
    "end": 5555.04,
    "text": "just give this an ID of two. All right. And so now that we actually have some place to store our",
    "textdich": ""
  },
  {
    "start": 5555.04,
    "end": 5560.08,
    "text": "posts, we can actually test out our get post functionality to see if it works. So I'm going",
    "textdich": ""
  },
  {
    "start": 5560.08,
    "end": 5564.48,
    "text": "to save this, we're going to go back to postman. So find the one with the get operation where",
    "textdich": ""
  },
  {
    "start": 5564.48,
    "end": 5570.08,
    "text": "we're retrieving the posts. And then we'll hit send. Let's see. Well, when we hit send, nothing",
    "textdich": ""
  },
  {
    "start": 5570.08,
    "end": 5573.92,
    "text": "happens, of course, because we actually have to update the code to send that data. So let's go",
    "textdich": ""
  },
  {
    "start": 5573.92,
    "end": 5579.52,
    "text": "back to our code. And let's go to our get posts. So right now, we're just sending back this",
    "textdich": ""
  },
  {
    "start": 5579.52,
    "end": 5586.88,
    "text": "information. So let's update this so that we return my posts. And this should be fairly",
    "textdich": ""
  },
  {
    "start": 5586.88,
    "end": 5591.12,
    "text": "straightforward. What we can do is we can just keep this property called data. And we can just",
    "textdich": ""
  },
  {
    "start": 5591.12,
    "end": 5597.04,
    "text": "remove this and just pass along my underscore posts. And so what's going to happen is fast API",
    "textdich": ""
  },
  {
    "start": 5597.04,
    "end": 5601.52,
    "text": "is great. Because if I pass in an array like this, it'll automatically serialize it. So it's going",
    "textdich": ""
  },
  {
    "start": 5601.52,
    "end": 5606.8,
    "text": "to convert it into JSON, JSON has something that's also very similar to an array. And it's going to",
    "textdich": ""
  },
  {
    "start": 5606.8,
    "end": 5611.44,
    "text": "change that into a JSON format so that we can send it over our API. So that's all we have to do,",
    "textdich": ""
  },
  {
    "start": 5611.44,
    "end": 5618.24,
    "text": "we just have to pass in the array, and it's going to send that. Now, if we try this, look at that,",
    "textdich": ""
  },
  {
    "start": 5618.24,
    "end": 5623.44,
    "text": "so we get the data property. And within here, we have an array. So this is JSON also has a concept",
    "textdich": ""
  },
  {
    "start": 5623.44,
    "end": 5631.04,
    "text": "of arrays. And then within here, you can see we've got our post one and our posts two. So that's",
    "textdich": ""
  },
  {
    "start": 5631.04,
    "end": 5635.76,
    "text": "really as simple as how to work with our API how to actually retrieve posts. In the next video,",
    "textdich": ""
  },
  {
    "start": 5635.76,
    "end": 5642.16,
    "text": "we're going to update the create post path operation so that we can figure out how to add",
    "textdich": ""
  },
  {
    "start": 5642.16,
    "end": 5650.16,
    "text": "a new post into our my posts array. All right, guys, so let's update our create post path",
    "textdich": ""
  },
  {
    "start": 5650.16,
    "end": 5655.76,
    "text": "operation function so that we can retrieve the title and the content from our front end,",
    "textdich": ""
  },
  {
    "start": 5655.76,
    "end": 5661.52,
    "text": "and then create a brand new post and store it within our my posts array. So how do we do that?",
    "textdich": ""
  },
  {
    "start": 5661.52,
    "end": 5666.72,
    "text": "Well, we already know that we can retrieve our post by referencing this post variable,",
    "textdich": ""
  },
  {
    "start": 5666.72,
    "end": 5672.24,
    "text": "because this will take our schema, which remember, we defined with pedantic, it's going to do all the",
    "textdich": ""
  },
  {
    "start": 5672.24,
    "end": 5677.2,
    "text": "validation, and it's going to store it within post. And so this is still going to be a pedantic model.",
    "textdich": ""
  },
  {
    "start": 5677.2,
    "end": 5682.64,
    "text": "However, our our array is going to be an array of dictionaries. So we have to convert that to",
    "textdich": ""
  },
  {
    "start": 5682.64,
    "end": 5686.96,
    "text": "dictionaries. And we already know that we can convert any pedantic model to a dictionary by",
    "textdich": ""
  },
  {
    "start": 5686.96,
    "end": 5692.64,
    "text": "doing dot dict. And then that'll turn it into a standard Python dictionary. And at that point,",
    "textdich": ""
  },
  {
    "start": 5692.64,
    "end": 5697.44,
    "text": "it's pretty simple. This is just standard Python. At this point, we can just do a my underscore",
    "textdich": ""
  },
  {
    "start": 5697.44,
    "end": 5705.44,
    "text": "posts dot append. And then we can append post dot dict, just like we did before, we don't we can",
    "textdich": ""
  },
  {
    "start": 5705.44,
    "end": 5711.84,
    "text": "remove these print statements, they're just cluttering things up. However, there's one little",
    "textdich": ""
  },
  {
    "start": 5711.84,
    "end": 5719.44,
    "text": "issue. Like I said, we need to have an ID for every entry. And normally, the database handles",
    "textdich": ""
  },
  {
    "start": 5719.44,
    "end": 5723.2,
    "text": "that. But since we're not actually working with a real database, we're going to have to do this in",
    "textdich": ""
  },
  {
    "start": 5723.2,
    "end": 5727.92,
    "text": "software. So what I'm going to do is we're just going to assign it a random integer, not really",
    "textdich": ""
  },
  {
    "start": 5727.92,
    "end": 5732.32,
    "text": "that reliable. But if we pick a random number between one and, you know, 10 million, the odds",
    "textdich": ""
  },
  {
    "start": 5732.32,
    "end": 5736.48,
    "text": "of us hitting the same number twice is almost next to none. So what we're going to do is we're going",
    "textdich": ""
  },
  {
    "start": 5736.48,
    "end": 5743.76,
    "text": "to use the random package. So we'll say from random import, ran range. And this is what we're",
    "textdich": ""
  },
  {
    "start": 5743.76,
    "end": 5754.8,
    "text": "going to use to create a random number, or a random integer. And so instead of doing this,",
    "textdich": ""
  },
  {
    "start": 5754.8,
    "end": 5760.0,
    "text": "I'm actually going to remove this for a second. And I spelled append wrong as well. What we're",
    "textdich": ""
  },
  {
    "start": 5760.0,
    "end": 5765.52,
    "text": "going to do is I'm going to say, post underscore dict, which is going to be the post pedantic",
    "textdich": ""
  },
  {
    "start": 5765.52,
    "end": 5770.72,
    "text": "model converted to a dictionary. I'm going to set that equal to post dot dict. Okay, so this is",
    "textdich": ""
  },
  {
    "start": 5770.72,
    "end": 5774.56,
    "text": "going to be the dictionary. And so now that we have a regular Python dictionary, what we can say",
    "textdich": ""
  },
  {
    "start": 5774.56,
    "end": 5781.76,
    "text": "is post underscore dict. And then I'm going to reference the ID field that I'm creating. And I'm",
    "textdich": ""
  },
  {
    "start": 5781.76,
    "end": 5787.84,
    "text": "going to assign that to be a random number. So we're going to give it a range of zero to and then",
    "textdich": ""
  },
  {
    "start": 5787.84,
    "end": 5792.4,
    "text": "just pick some really, really, really, really large number. So this is going to ensure that pretty",
    "textdich": ""
  },
  {
    "start": 5792.4,
    "end": 5799.2,
    "text": "much any entry won't it for development purposes is going to be unique. We'll append that to the",
    "textdich": ""
  },
  {
    "start": 5799.2,
    "end": 5805.68,
    "text": "array. And then here's the thing when it comes to how a usual API works is that when a front end",
    "textdich": ""
  },
  {
    "start": 5805.68,
    "end": 5810.48,
    "text": "sends the data to create a new post, after we create the post stored in our database, we should",
    "textdich": ""
  },
  {
    "start": 5810.48,
    "end": 5816.08,
    "text": "send back the newly created post, including the brand new ID. So let's send that back. So in this",
    "textdich": ""
  },
  {
    "start": 5816.08,
    "end": 5822.72,
    "text": "case, I'm going to send back post underscore dict, because that's going to be the brand new post",
    "textdich": ""
  },
  {
    "start": 5822.72,
    "end": 5832.24,
    "text": "that we add to the specific add to our posts array. So let's try this out. Let's go to our post",
    "textdich": ""
  },
  {
    "start": 5832.24,
    "end": 5838.24,
    "text": "request that we have. And let's see all of our data. So we've got a couple of things title content",
    "textdich": ""
  },
  {
    "start": 5838.24,
    "end": 5843.2,
    "text": "rating, I don't really care about the rating. But I'll just leave it in there for now. It shouldn't",
    "textdich": ""
  },
  {
    "start": 5843.2,
    "end": 5847.92,
    "text": "matter. And then we'll just hit send. And let's see what happens. And it looks like we got an",
    "textdich": ""
  },
  {
    "start": 5847.92,
    "end": 5858.72,
    "text": "error. So let's see what happened. All right, it looks like there's an and I already see what",
    "textdich": ""
  },
  {
    "start": 5858.72,
    "end": 5863.6,
    "text": "happened. I forgot to actually include post underscore dict. We actually have to pass in",
    "textdich": ""
  },
  {
    "start": 5863.6,
    "end": 5869.04,
    "text": "what we want to append to the array. Let's save that. Try this again. Hopefully no errors. Look",
    "textdich": ""
  },
  {
    "start": 5869.04,
    "end": 5874.64,
    "text": "at that, guys. So it looks like we got back the newly created entry. And we can see that it has",
    "textdich": ""
  },
  {
    "start": 5874.64,
    "end": 5880.24,
    "text": "an ID of whatever that number is. And if we do a get request now to retrieve all of our posts,",
    "textdich": ""
  },
  {
    "start": 5880.24,
    "end": 5886.0,
    "text": "we should see that newly created entry. So let's take a look. But we've got post one post two.",
    "textdich": ""
  },
  {
    "start": 5886.64,
    "end": 5891.68,
    "text": "And then we've got that brand new post. Look at that, guys. So we are a little bit less than",
    "textdich": ""
  },
  {
    "start": 5891.68,
    "end": 5897.6,
    "text": "halfway done with creating our CRUD based application. Now, before moving any further",
    "textdich": ""
  },
  {
    "start": 5897.6,
    "end": 5901.52,
    "text": "and writing any more code, what I want to do is I want to actually save these requests,",
    "textdich": ""
  },
  {
    "start": 5901.52,
    "end": 5905.52,
    "text": "because right now they're just kind of stored in memory. If we close out postman, it'll still",
    "textdich": ""
  },
  {
    "start": 5905.52,
    "end": 5909.84,
    "text": "remember it. But what we can do is we can create a collection. So here, I'm going to select create",
    "textdich": ""
  },
  {
    "start": 5909.84,
    "end": 5913.28,
    "text": "collection. And I'm going to give this a name. So I'm just going to name this after my project.",
    "textdich": ""
  },
  {
    "start": 5913.28,
    "end": 5918.8,
    "text": "So I can call this, you know, fast API course, or, you know, since this is social media app,",
    "textdich": ""
  },
  {
    "start": 5918.8,
    "end": 5923.2,
    "text": "we can call it whatever we were to call it, I'm just gonna call it fast API course. We'll save",
    "textdich": ""
  },
  {
    "start": 5923.2,
    "end": 5929.68,
    "text": "that. And then what I want to do is I want to save these two requests, so that I don't have to",
    "textdich": ""
  },
  {
    "start": 5929.68,
    "end": 5935.36,
    "text": "remember this in case they actually get deleted. So I'll hit save, save as, we'll save it. And then",
    "textdich": ""
  },
  {
    "start": 5935.36,
    "end": 5940.48,
    "text": "you can give it any name. So this is going to be, I forget, this is the get request. So I'm going",
    "textdich": ""
  },
  {
    "start": 5940.48,
    "end": 5946.64,
    "text": "to say I'm gonna call this get posts, and then store it inside this collection. And so now within",
    "textdich": ""
  },
  {
    "start": 5946.64,
    "end": 5949.92,
    "text": "this collection, you can see this request is stored in there. I'm gonna do the same thing for",
    "textdich": ""
  },
  {
    "start": 5949.92,
    "end": 5955.2,
    "text": "the post request. So this is for creating posts, we'll do save as again, I'm going to say, create",
    "textdich": ""
  },
  {
    "start": 5955.2,
    "end": 5960.8,
    "text": "post. And then it's already remembers the most recent collection, but go ahead and select the",
    "textdich": ""
  },
  {
    "start": 5960.8,
    "end": 5965.04,
    "text": "collection if it didn't remember that. And then we'll hit save. And so now they're both saved in",
    "textdich": ""
  },
  {
    "start": 5965.04,
    "end": 5970.08,
    "text": "here. And we can easily bring these up anytime even if we close out all of our requests. So I",
    "textdich": ""
  },
  {
    "start": 5970.08,
    "end": 5974.08,
    "text": "closed everything out, and bring that right back up, it's going to remember everything. And then",
    "textdich": ""
  },
  {
    "start": 5974.08,
    "end": 5978.56,
    "text": "same thing with the post request, I go to the body, it even remembers the fields. So Postman,",
    "textdich": ""
  },
  {
    "start": 5978.56,
    "end": 5983.28,
    "text": "one of my favorite tools, when it comes to working with API's, and you know, as this course goes",
    "textdich": ""
  },
  {
    "start": 5983.28,
    "end": 5989.36,
    "text": "along, you're going to continue to learn more and more things about Postman. Okay, guys, let's",
    "textdich": ""
  },
  {
    "start": 5989.36,
    "end": 5994.08,
    "text": "continue building out our CRUD application, the next function I want to implement is retrieving",
    "textdich": ""
  },
  {
    "start": 5994.08,
    "end": 6000.96,
    "text": "one individual post. And so let's define a function for that. So here, I'll call this get post,",
    "textdich": ""
  },
  {
    "start": 6000.96,
    "end": 6005.36,
    "text": "keep in mind that this is singular. So I call this get post, whereas to retrieve all posts,",
    "textdich": ""
  },
  {
    "start": 6005.36,
    "end": 6010.08,
    "text": "it's get posts. But like I said, the name of these functions don't actually matter. It's just more",
    "textdich": ""
  },
  {
    "start": 6010.08,
    "end": 6016.72,
    "text": "for for you more for readability. And the decorator is going to look like this. And so this is based",
    "textdich": ""
  },
  {
    "start": 6016.72,
    "end": 6021.2,
    "text": "off of that slide I already showed you. So it's going to be a get method. And then here, the URL",
    "textdich": ""
  },
  {
    "start": 6021.2,
    "end": 6029.92,
    "text": "is going to be slash posts. Id, right, because the user is going to provide us the ID of the",
    "textdich": ""
  },
  {
    "start": 6029.92,
    "end": 6036.64,
    "text": "specific post that they're interested in. And so that's going to get embedded in the URL. So they'll",
    "textdich": ""
  },
  {
    "start": 6036.64,
    "end": 6040.88,
    "text": "send a get request to slash post slash and then whatever ID so if they want to see the information",
    "textdich": ""
  },
  {
    "start": 6040.88,
    "end": 6046.56,
    "text": "for post one, they'll pass in a value of one. And what this is actually referred to the proper",
    "textdich": ""
  },
  {
    "start": 6046.56,
    "end": 6052.32,
    "text": "terminology for this is that this is called a path parameter. So this ID field represents a path",
    "textdich": ""
  },
  {
    "start": 6052.32,
    "end": 6057.28,
    "text": "parameter. And this parameter happens to represent the ID of a specific post, the user's interest in",
    "textdich": ""
  },
  {
    "start": 6057.28,
    "end": 6062.16,
    "text": "seeing. And so what we can do is fast API will automatically extract this ID. And then we can",
    "textdich": ""
  },
  {
    "start": 6062.16,
    "end": 6067.12,
    "text": "pass it right into our function. So now our function has access to whatever value was in that",
    "textdich": ""
  },
  {
    "start": 6067.12,
    "end": 6073.28,
    "text": "URL right there. And so if we want to, I can do a quick print of ID. And then we'll just return",
    "textdich": ""
  },
  {
    "start": 6073.28,
    "end": 6079.04,
    "text": "some hard coded data. So I'll just say data, as we'll call this, how about post underscore detail,",
    "textdich": ""
  },
  {
    "start": 6079.04,
    "end": 6089.68,
    "text": "I'll say this is the post you're interested in. Or even better, I can do is we'll change this to",
    "textdich": ""
  },
  {
    "start": 6089.68,
    "end": 6099.52,
    "text": "an f string. And I'll just say here is post. And then we can just pass an ID. So let's save that",
    "textdich": ""
  },
  {
    "start": 6099.52,
    "end": 6103.92,
    "text": "will go to postman. And what we want to do is we want to create a new post, but let's create it in",
    "textdich": ""
  },
  {
    "start": 6103.92,
    "end": 6108.4,
    "text": "our collection. So I'm going to go in there, select Add request, give it whatever name you want,",
    "textdich": ""
  },
  {
    "start": 6108.4,
    "end": 6119.12,
    "text": "I'll say, get one post. And then for the URL, just copy the get posts URL. And then we want to pass",
    "textdich": ""
  },
  {
    "start": 6119.12,
    "end": 6124.0,
    "text": "in the ID that we're interested in. So we just do slash. And then in this case, I'm going to get",
    "textdich": ""
  },
  {
    "start": 6124.0,
    "end": 6128.48,
    "text": "the post with an ID of two. And the reason why I'm doing that is because we've hard coded one",
    "textdich": ""
  },
  {
    "start": 6128.48,
    "end": 6133.2,
    "text": "of our posts have an ID of two. So I know that's always going to be there. And then we can just",
    "textdich": ""
  },
  {
    "start": 6133.2,
    "end": 6138.08,
    "text": "try sending this and see what happens. So it says post detail, here is post, and then post number",
    "textdich": ""
  },
  {
    "start": 6138.08,
    "end": 6143.52,
    "text": "two. So it looks like we were successfully able to extract the ID, the path parameter that was",
    "textdich": ""
  },
  {
    "start": 6143.52,
    "end": 6148.56,
    "text": "passed into the specific URL that the user sent a request to. So we now have access to that at that",
    "textdich": ""
  },
  {
    "start": 6148.56,
    "end": 6156.16,
    "text": "point, we can just find whichever entry in my posts has that specific ID. Now we have to implement",
    "textdich": ""
  },
  {
    "start": 6156.16,
    "end": 6160.4,
    "text": "the logic for actually getting that post. And so there's many different ways of doing this. And",
    "textdich": ""
  },
  {
    "start": 6160.4,
    "end": 6164.24,
    "text": "I'm telling you right now, this is probably not the best way of doing this. I'm not really even",
    "textdich": ""
  },
  {
    "start": 6164.24,
    "end": 6168.64,
    "text": "a Python expert, I'm sure there's much better ways of grabbing this information. However,",
    "textdich": ""
  },
  {
    "start": 6168.64,
    "end": 6172.72,
    "text": "keep in mind the code is going to be changed later on once we start working with the database. So",
    "textdich": ""
  },
  {
    "start": 6172.72,
    "end": 6177.84,
    "text": "this at this point is just basic Python logic. And I do want to keep you I do want you guys to keep",
    "textdich": ""
  },
  {
    "start": 6177.84,
    "end": 6182.24,
    "text": "in mind that this may not be best practice for the best way of retrieving an individual post,",
    "textdich": ""
  },
  {
    "start": 6182.24,
    "end": 6186.88,
    "text": "but I'm just going to create a simple function. And it's going to be called find post. So this",
    "textdich": ""
  },
  {
    "start": 6186.88,
    "end": 6191.76,
    "text": "is how you find a post by an ID. So the so we'll pass in an ID in this function to retrieve the",
    "textdich": ""
  },
  {
    "start": 6191.76,
    "end": 6198.56,
    "text": "post. And what we'll do is we'll iterate over the my posts, we'll say for P in my posts.",
    "textdich": ""
  },
  {
    "start": 6201.44,
    "end": 6206.32,
    "text": "And we'll say if P so P represents the specific post that we're iterating over.",
    "textdich": ""
  },
  {
    "start": 6206.32,
    "end": 6215.12,
    "text": "So if this specific post has an ID, which equals the ID that was passed into the function,",
    "textdich": ""
  },
  {
    "start": 6215.12,
    "end": 6227.6,
    "text": "then we'll return P or return that specific post. And then at this point, we can call this",
    "textdich": ""
  },
  {
    "start": 6227.6,
    "end": 6233.12,
    "text": "function. So I'm going to remove that print statement and say post equals find underscore post",
    "textdich": ""
  },
  {
    "start": 6234.48,
    "end": 6243.44,
    "text": "ID. And then for this, we can just remove this and just return post. Let's save this,",
    "textdich": ""
  },
  {
    "start": 6243.44,
    "end": 6250.72,
    "text": "let's go to back to postman. And let's try this out. And it looks like I got an error. So something",
    "textdich": ""
  },
  {
    "start": 6250.72,
    "end": 6259.6,
    "text": "happened. And let's actually take a look at our code. Well, guys, I think I found the issue. So",
    "textdich": ""
  },
  {
    "start": 6259.6,
    "end": 6264.88,
    "text": "the reason why we keep getting none, right, if I keep sending things send, it says none. And what",
    "textdich": ""
  },
  {
    "start": 6264.88,
    "end": 6269.84,
    "text": "I did was I just printed out the post to see what we got. And it actually just prints out none. So",
    "textdich": ""
  },
  {
    "start": 6269.84,
    "end": 6273.92,
    "text": "for some reason, we're unable to find posts. And I think I know exactly why. And so what I'm going",
    "textdich": ""
  },
  {
    "start": 6273.92,
    "end": 6279.2,
    "text": "to do is I'm going to do a print of ID again. And this is going to teach us an important lesson.",
    "textdich": ""
  },
  {
    "start": 6279.2,
    "end": 6286.24,
    "text": "So send another request. And it prints out two. However, what we're going to do is,",
    "textdich": ""
  },
  {
    "start": 6286.8,
    "end": 6293.04,
    "text": "I'm actually going to get the type of ID. So I forget how to do that. I think it's the type,",
    "textdich": ""
  },
  {
    "start": 6293.68,
    "end": 6298.96,
    "text": "I think you can just do type in Python. So I'm going to figure out what is the actual type of",
    "textdich": ""
  },
  {
    "start": 6298.96,
    "end": 6306.96,
    "text": "ID. And now if I send this request again, right, you could see that the type is actually a string",
    "textdich": ""
  },
  {
    "start": 6306.96,
    "end": 6313.92,
    "text": "and not an integer. And so when we pass this check in where we say if P ID, so if we get the ID",
    "textdich": ""
  },
  {
    "start": 6313.92,
    "end": 6318.16,
    "text": "field and compare it to the ID that we pass in, it's never going to equal that because one's an",
    "textdich": ""
  },
  {
    "start": 6318.16,
    "end": 6322.24,
    "text": "integer, the other one's a string, they're never going to be equal. So the first thing that we",
    "textdich": ""
  },
  {
    "start": 6322.24,
    "end": 6326.16,
    "text": "actually have to do is before we call this function, we have to convert it to an integer.",
    "textdich": ""
  },
  {
    "start": 6326.16,
    "end": 6330.64,
    "text": "So I can just say, int, that's going to convert it to an int.",
    "textdich": ""
  },
  {
    "start": 6332.88,
    "end": 6338.48,
    "text": "Save that. And at this point, if I send this, it should now work. Look at that. So keep in mind,",
    "textdich": ""
  },
  {
    "start": 6338.48,
    "end": 6343.44,
    "text": "guys, anytime we have a path parameter, it's always going to be returned as a string, even",
    "textdich": ""
  },
  {
    "start": 6343.44,
    "end": 6348.0,
    "text": "if it represents an integer or a number, we always have to manually convert it ourselves.",
    "textdich": ""
  },
  {
    "start": 6348.0,
    "end": 6353.52,
    "text": "So don't forget to do that. Now, there is one little issue with what we're doing. So everything's",
    "textdich": ""
  },
  {
    "start": 6353.52,
    "end": 6358.8,
    "text": "working. And if I actually change this to a one, we should get a different post. So everything's",
    "textdich": ""
  },
  {
    "start": 6358.8,
    "end": 6365.6,
    "text": "working great. However, what happens if I type this? Well, let's hit send. Well, we get an error,",
    "textdich": ""
  },
  {
    "start": 6365.6,
    "end": 6370.32,
    "text": "right? Because we're trying to convert this to an int. And it's going to throw an error. And then",
    "textdich": ""
  },
  {
    "start": 6370.32,
    "end": 6375.52,
    "text": "instead of sending back a nice, you know, built in response, we just get an internal server error.",
    "textdich": ""
  },
  {
    "start": 6375.52,
    "end": 6380.4,
    "text": "And the user has no idea what exactly is wrong. So we want to provide it feedback. So how can we",
    "textdich": ""
  },
  {
    "start": 6380.4,
    "end": 6385.76,
    "text": "perform some kind of validation to ensure that whatever data that's passed into this path",
    "textdich": ""
  },
  {
    "start": 6385.76,
    "end": 6390.8,
    "text": "parameter can actually be properly converted to an integer? Well, we can perform validation with",
    "textdich": ""
  },
  {
    "start": 6390.8,
    "end": 6395.6,
    "text": "fast API. So here, for ID, what we can do is we can say I want this to be an integer. So what it's",
    "textdich": ""
  },
  {
    "start": 6395.6,
    "end": 6399.36,
    "text": "going to do is it's first of all going to validate that it can be converted to an integer. And then",
    "textdich": ""
  },
  {
    "start": 6399.36,
    "end": 6404.48,
    "text": "it'll automatically convert it to an integer for us. So we no longer have to convert this ourselves.",
    "textdich": ""
  },
  {
    "start": 6404.48,
    "end": 6408.48,
    "text": "So here, I could just pass an ID because this will make sure that it's already converted.",
    "textdich": ""
  },
  {
    "start": 6408.48,
    "end": 6415.28,
    "text": "And so now, if I save this, and I change this back to a number, first, let's make sure that",
    "textdich": ""
  },
  {
    "start": 6415.84,
    "end": 6420.72,
    "text": "everything's working. So it automatically converted it to an integer. And now if I pass in, you know,",
    "textdich": ""
  },
  {
    "start": 6420.72,
    "end": 6426.4,
    "text": "a string, it's now going to throw an error, it's gonna say for a path parameter of ID, you can see",
    "textdich": ""
  },
  {
    "start": 6426.4,
    "end": 6431.44,
    "text": "that this value is not a valid integer. And so now the front end has a good way of understanding",
    "textdich": ""
  },
  {
    "start": 6431.44,
    "end": 6437.44,
    "text": "what they did wrong. And, you know, this can be anything, right? So if you wanted this to be a",
    "textdich": ""
  },
  {
    "start": 6437.44,
    "end": 6442.08,
    "text": "string, right, we can have this automatically get validated as a string and convert it into a string,",
    "textdich": ""
  },
  {
    "start": 6442.08,
    "end": 6448.24,
    "text": "so that if they do actually send a string, no errors, right. And then if they tried to actually,",
    "textdich": ""
  },
  {
    "start": 6448.24,
    "end": 6451.6,
    "text": "even if you put in a number, it's not going to throw an error, because any number can actually",
    "textdich": ""
  },
  {
    "start": 6451.6,
    "end": 6457.28,
    "text": "be converted into a string. But we want an integer. So I'm going to change this back to an integer.",
    "textdich": ""
  },
  {
    "start": 6459.52,
    "end": 6466.4,
    "text": "And then we'll just code this as two. Perfect. Make sure you save your request. And so now we've now",
    "textdich": ""
  },
  {
    "start": 6466.4,
    "end": 6471.92,
    "text": "implemented our third function within our CRUD app. So we've just got two more, we got to handle",
    "textdich": ""
  },
  {
    "start": 6471.92,
    "end": 6477.76,
    "text": "updating and deleting posts. But we've got all getting all posts, creating a post and then getting",
    "textdich": ""
  },
  {
    "start": 6477.76,
    "end": 6482.72,
    "text": "an individual post. And you'll see that for the last two, it's pretty much the same thing, right,",
    "textdich": ""
  },
  {
    "start": 6482.72,
    "end": 6486.96,
    "text": "we just have to define our specific decorator, and then define the logic for actually creating",
    "textdich": ""
  },
  {
    "start": 6486.96,
    "end": 6493.84,
    "text": "and deleting a post from that array or updating a post as well. Now, before we move on, I do want",
    "textdich": ""
  },
  {
    "start": 6493.84,
    "end": 6498.32,
    "text": "to show you guys one potential issue that you could run into if you don't quite understand",
    "textdich": ""
  },
  {
    "start": 6498.32,
    "end": 6503.36,
    "text": "how these routes work and how order matters within fast API. So what I'm going to do is I'm just",
    "textdich": ""
  },
  {
    "start": 6503.36,
    "end": 6506.88,
    "text": "going to create a dummy route and you guys don't need to follow along on this is just a quick",
    "textdich": ""
  },
  {
    "start": 6506.88,
    "end": 6511.52,
    "text": "little demonstration. And I'm just going to make this another get request or handler for a get",
    "textdich": ""
  },
  {
    "start": 6511.52,
    "end": 6517.52,
    "text": "request. And then this one's going to be posts slash latest. So what this will do is when the user",
    "textdich": ""
  },
  {
    "start": 6517.52,
    "end": 6521.76,
    "text": "sends a request, a get request to this specific path, I use path, we're going to grab whatever",
    "textdich": ""
  },
  {
    "start": 6521.76,
    "end": 6538.08,
    "text": "the latest post is. And so here, I'll just say def get latest post. And so all I'm going to do",
    "textdich": ""
  },
  {
    "start": 6538.08,
    "end": 6544.96,
    "text": "is I'm going to reference our my posts list. And I'll say we'll get the length of my post.",
    "textdich": ""
  },
  {
    "start": 6544.96,
    "end": 6552.24,
    "text": "And then we'll just minus one. So this will grab the latest post. And then what we're going to do",
    "textdich": ""
  },
  {
    "start": 6552.24,
    "end": 6561.84,
    "text": "is just return that here, we'll say detail. And then we'll pass in and actually, let me store",
    "textdich": ""
  },
  {
    "start": 6561.84,
    "end": 6572.32,
    "text": "this in a variable post equals and then we'll return post. We'll save this and I'm going to",
    "textdich": ""
  },
  {
    "start": 6572.32,
    "end": 6578.32,
    "text": "show you what happened. So let's create a new request. I'll just copy the URL from the previous",
    "textdich": ""
  },
  {
    "start": 6578.32,
    "end": 6584.8,
    "text": "one. Then here, we're going to change this to latest. Let's see what happens. Interesting,",
    "textdich": ""
  },
  {
    "start": 6584.8,
    "end": 6589.2,
    "text": "we get an error. So what exactly happened? Well, let's take a look at the error. It's saying that",
    "textdich": ""
  },
  {
    "start": 6590.4,
    "end": 6597.2,
    "text": "we have a path parameter called ID. And it looks like it's saying that this is not a valid integer.",
    "textdich": ""
  },
  {
    "start": 6597.2,
    "end": 6602.32,
    "text": "So I'm not even sure why it's referencing this error. I guess if we take a look at our code,",
    "textdich": ""
  },
  {
    "start": 6602.32,
    "end": 6606.72,
    "text": "right, there's, there's no path parameter here. So what is exactly happening? Well,",
    "textdich": ""
  },
  {
    "start": 6606.72,
    "end": 6611.84,
    "text": "let's take a look, right? Our request looks like this. So it's going to slash posts slash latest.",
    "textdich": ""
  },
  {
    "start": 6611.84,
    "end": 6615.28,
    "text": "So when we send this request, what's going to happen is that we're going to start all the way",
    "textdich": ""
  },
  {
    "start": 6615.28,
    "end": 6622.88,
    "text": "at the top. And fast API is going to go through the list of all of our all of our paths. And it's",
    "textdich": ""
  },
  {
    "start": 6622.88,
    "end": 6628.08,
    "text": "going to find the first match. So we have one at just the root URL. So it's not going to match",
    "textdich": ""
  },
  {
    "start": 6628.08,
    "end": 6633.84,
    "text": "that. We have one at slash posts, it's once again, not going to match that. This one is for a post",
    "textdich": ""
  },
  {
    "start": 6633.84,
    "end": 6637.68,
    "text": "request. So it's not going to match that because we sent a get request. But then something interesting",
    "textdich": ""
  },
  {
    "start": 6637.68,
    "end": 6642.24,
    "text": "happens here when we get to this get request, right? So this handles a get request, and then it",
    "textdich": ""
  },
  {
    "start": 6642.24,
    "end": 6648.16,
    "text": "matches slash posts, and then some variable. So technically, that variable could be latest,",
    "textdich": ""
  },
  {
    "start": 6648.16,
    "end": 6652.0,
    "text": "you see the issue that we're running into, because there's no way for fast API to know",
    "textdich": ""
  },
  {
    "start": 6652.0,
    "end": 6657.68,
    "text": "that that route was meant for that that request was meant for this specific path, right? Because",
    "textdich": ""
  },
  {
    "start": 6657.68,
    "end": 6661.84,
    "text": "it does technically match on this. And then what happens is since it matches on this route, it then",
    "textdich": ""
  },
  {
    "start": 6661.84,
    "end": 6667.92,
    "text": "tries to perform validation on ID, which is in this case, it's going to end up being latest.",
    "textdich": ""
  },
  {
    "start": 6667.92,
    "end": 6671.28,
    "text": "And then it's going to throw an error because latest can't be converted to an integer.",
    "textdich": ""
  },
  {
    "start": 6671.92,
    "end": 6676.72,
    "text": "And so this is the example of where order matters. So you have to be careful when you structure your",
    "textdich": ""
  },
  {
    "start": 6676.72,
    "end": 6681.6,
    "text": "API, especially with your with your paths and your URLs, you want to make sure that you don't run",
    "textdich": ""
  },
  {
    "start": 6681.6,
    "end": 6685.92,
    "text": "into this type of issue. So you know, one thing in this case, you could do is just move this up,",
    "textdich": ""
  },
  {
    "start": 6686.48,
    "end": 6692.8,
    "text": "that would fix the issue. Because now if you save this, and then run this, right, it works.",
    "textdich": ""
  },
  {
    "start": 6692.8,
    "end": 6699.68,
    "text": "And if you try to reference a specific ID, that's going to work as well. Well, in that case,",
    "textdich": ""
  },
  {
    "start": 6699.68,
    "end": 6705.84,
    "text": "let's try one. Yep. And so that works as well. Because slash posts slash one will never match",
    "textdich": ""
  },
  {
    "start": 6705.84,
    "end": 6713.44,
    "text": "this one, it'll only match this one. So be very careful when it comes to the order, it always works",
    "textdich": ""
  },
  {
    "start": 6713.44,
    "end": 6718.16,
    "text": "top down. So anytime you're working with path parameters, it could potentially result in you",
    "textdich": ""
  },
  {
    "start": 6718.16,
    "end": 6724.08,
    "text": "guys accidentally matching other routes by accident. So you know, there's different ways to",
    "textdich": ""
  },
  {
    "start": 6724.08,
    "end": 6727.28,
    "text": "get around this, like I said, you can just move this up. Or if you wanted to change the URL",
    "textdich": ""
  },
  {
    "start": 6727.28,
    "end": 6734.0,
    "text": "altogether, so that this is like a slash post slash, I don't know, you know, just put in another",
    "textdich": ""
  },
  {
    "start": 6734.0,
    "end": 6739.2,
    "text": "keyword, something like a recent or something recent slash latest or something. Well, actually,",
    "textdich": ""
  },
  {
    "start": 6739.2,
    "end": 6744.16,
    "text": "even then that would, yeah. And so just keep. And so I just want to make sure you keep that in mind",
    "textdich": ""
  },
  {
    "start": 6744.16,
    "end": 6749.2,
    "text": "when you're structuring your API, because anytime you have a path parameter, it could result in you",
    "textdich": ""
  },
  {
    "start": 6750.32,
    "end": 6756.4,
    "text": "accidentally matching requests that were meant for a different, for a different route. So I'm just",
    "textdich": ""
  },
  {
    "start": 6756.4,
    "end": 6760.08,
    "text": "going to delete this, this was merely just for demonstration purposes. And I just want to make",
    "textdich": ""
  },
  {
    "start": 6760.08,
    "end": 6764.48,
    "text": "sure that you guys understand the fast API just looks at all of your paths and just works its way",
    "textdich": ""
  },
  {
    "start": 6764.48,
    "end": 6771.76,
    "text": "down the list till finds the first batch. For our get post path operation, specifically the one",
    "textdich": ""
  },
  {
    "start": 6771.76,
    "end": 6776.8,
    "text": "where we retrieved one specific post, we do run into a little bit of an issue. So if we go to our",
    "textdich": ""
  },
  {
    "start": 6776.8,
    "end": 6782.64,
    "text": "postman real quick, and send a request to get one post, but in this case, instead of doing one or",
    "textdich": ""
  },
  {
    "start": 6782.64,
    "end": 6789.28,
    "text": "two, what I want to do is I want you to put in the ID, put in an ID that doesn't exist. So we only",
    "textdich": ""
  },
  {
    "start": 6789.28,
    "end": 6794.4,
    "text": "have right now, posts with an ID of one and two, what happens if we send it with a ID of five,",
    "textdich": ""
  },
  {
    "start": 6795.52,
    "end": 6801.04,
    "text": "you can see what we get back, it says, null, right? And I don't like that, because it doesn't really",
    "textdich": ""
  },
  {
    "start": 6801.04,
    "end": 6806.64,
    "text": "give the front end any feedback as to what exactly is happening. So they don't actually know, you",
    "textdich": ""
  },
  {
    "start": 6806.64,
    "end": 6810.48,
    "text": "know, they don't know if some kind of error occurred, or if we were unable to retrieve this",
    "textdich": ""
  },
  {
    "start": 6810.48,
    "end": 6816.48,
    "text": "information properly, or if there's a server error, or if this item doesn't ultimately exist. And so",
    "textdich": ""
  },
  {
    "start": 6816.48,
    "end": 6821.2,
    "text": "we need a way to accurately tell the front end that, hey, the ID that you're searching for does",
    "textdich": ""
  },
  {
    "start": 6821.2,
    "end": 6826.08,
    "text": "not actually exist in our database. And the best way to do that is through a method that I'm sure",
    "textdich": ""
  },
  {
    "start": 6826.08,
    "end": 6832.0,
    "text": "you guys are already a little bit familiar with. So right here, I've got my GitHub page for our",
    "textdich": ""
  },
  {
    "start": 6832.0,
    "end": 6837.44,
    "text": "course. And you can see it's just GitHub, my username and then the name of the repo. But if",
    "textdich": ""
  },
  {
    "start": 6837.44,
    "end": 6841.2,
    "text": "I search for if I put in a whole bunch of letters afterward, what's going to happen is GitHub is",
    "textdich": ""
  },
  {
    "start": 6841.2,
    "end": 6845.12,
    "text": "going to look for a repo with this name that doesn't exist. And let's see what happens. It",
    "textdich": ""
  },
  {
    "start": 6845.12,
    "end": 6851.28,
    "text": "gets a 404. And I'm sure you guys have seen a 404 error at least once before in your life. So",
    "textdich": ""
  },
  {
    "start": 6851.28,
    "end": 6857.44,
    "text": "that's a specific HTTP status code that represents that this item was not found though it does not",
    "textdich": ""
  },
  {
    "start": 6857.44,
    "end": 6862.32,
    "text": "exist. And HTTP status codes are important. We haven't really talked about it in this course up",
    "textdich": ""
  },
  {
    "start": 6862.32,
    "end": 6866.24,
    "text": "at this point, but there's a lot of different status codes. And if you actually just search",
    "textdich": ""
  },
  {
    "start": 6866.24,
    "end": 6872.88,
    "text": "for HTTP status code, you can just grab one of the top links, I'm going to go take a look at the",
    "textdich": ""
  },
  {
    "start": 6872.88,
    "end": 6877.28,
    "text": "Mozilla one, and you'll see all of the different HTTP status codes. And you'll see when to use",
    "textdich": ""
  },
  {
    "start": 6877.28,
    "end": 6882.24,
    "text": "them. Now, most of the time, you're going to see that we get a 200 response back, that's the default",
    "textdich": ""
  },
  {
    "start": 6882.24,
    "end": 6886.4,
    "text": "one, the fast API sends that usually means that everything's good, everything worked. That's why",
    "textdich": ""
  },
  {
    "start": 6886.4,
    "end": 6891.6,
    "text": "it says okay. However, we do have other ones that we do also commonly use. So anytime you create",
    "textdich": ""
  },
  {
    "start": 6891.6,
    "end": 6896.64,
    "text": "something, so within your CRUD application for create, anytime you send a POST request,",
    "textdich": ""
  },
  {
    "start": 6896.64,
    "end": 6901.84,
    "text": "usually, after you create the entity, you send a 201 back instead of a traditional 200. So there's",
    "textdich": ""
  },
  {
    "start": 6901.84,
    "end": 6906.08,
    "text": "a lot of HTTP status codes, and we're going to cover all of those in future lectures. But the ones",
    "textdich": ""
  },
  {
    "start": 6906.08,
    "end": 6911.76,
    "text": "we're interested in is for when we have an error. So we scroll down 400 usually means there's some",
    "textdich": ""
  },
  {
    "start": 6911.76,
    "end": 6916.88,
    "text": "kind of bad error, something happened. And most importantly, we want the 404 not found. So the",
    "textdich": ""
  },
  {
    "start": 6916.88,
    "end": 6921.44,
    "text": "server cannot find the requested resource. So that's exactly what we're looking for. Keep in",
    "textdich": ""
  },
  {
    "start": 6921.44,
    "end": 6926.72,
    "text": "mind, there's also 500 status codes, which means you know, some kind of server error, server error",
    "textdich": ""
  },
  {
    "start": 6926.72,
    "end": 6933.2,
    "text": "or server failure. So what we're going to do is I'm going to go back to our code. And what we need",
    "textdich": ""
  },
  {
    "start": 6933.2,
    "end": 6938.4,
    "text": "to do is we need to manipulate the response. Because right now, we're getting a 200 back,",
    "textdich": ""
  },
  {
    "start": 6938.4,
    "end": 6942.8,
    "text": "we're getting a status code of 200. If I send it, it says null, and then it just sends 200. So that",
    "textdich": ""
  },
  {
    "start": 6942.8,
    "end": 6946.88,
    "text": "doesn't really give us a good idea as to what's happening. So how do we manipulate the response?",
    "textdich": ""
  },
  {
    "start": 6946.88,
    "end": 6953.92,
    "text": "Well, we have to, first of all, import the response from fast API. And then what we're going to do is",
    "textdich": ""
  },
  {
    "start": 6953.92,
    "end": 6958.96,
    "text": "we're just going to pass it in as a parameter into our path operation function. So I'll just call",
    "textdich": ""
  },
  {
    "start": 6958.96,
    "end": 6964.16,
    "text": "this stored in a variable called response. And so once you get access to the response object,",
    "textdich": ""
  },
  {
    "start": 6964.16,
    "end": 6969.04,
    "text": "we can tweak it however we want. So what I'm going to do is, after we search for post,",
    "textdich": ""
  },
  {
    "start": 6969.04,
    "end": 6975.36,
    "text": "if we didn't find a post, I'm just going to do a quick check, and I say, if not post,",
    "textdich": ""
  },
  {
    "start": 6976.64,
    "end": 6980.8,
    "text": "that means if we didn't find a post, we're going to do is we're going to set the response. And then",
    "textdich": ""
  },
  {
    "start": 6980.8,
    "end": 6984.88,
    "text": "we're going to grab a property out for response called status code. So here we can tweak the",
    "textdich": ""
  },
  {
    "start": 6984.88,
    "end": 6991.36,
    "text": "status code of the response, I'm gonna say, hey, I want this to be a 404. All right, now let's save",
    "textdich": ""
  },
  {
    "start": 6991.36,
    "end": 6997.92,
    "text": "it. Now if I hit send, it still says post detail none, but take a look at the status code, it's now",
    "textdich": ""
  },
  {
    "start": 6997.92,
    "end": 7004.32,
    "text": "updated to 404. And if I change this to an ID that does exist, right, we get the post properly,",
    "textdich": ""
  },
  {
    "start": 7004.32,
    "end": 7008.96,
    "text": "and the status code changes to 200, which means everything is good. But one way of doing it,",
    "textdich": ""
  },
  {
    "start": 7008.96,
    "end": 7014.8,
    "text": "however, there's a slightly better way of doing it, same concept. But instead of hard coding,",
    "textdich": ""
  },
  {
    "start": 7014.8,
    "end": 7022.32,
    "text": "the value or trying to remember it, what we can do is we can import from the fast API library,",
    "textdich": ""
  },
  {
    "start": 7022.32,
    "end": 7030.8,
    "text": "something called status. And so now instead of having to remember what to use, we could just",
    "textdich": ""
  },
  {
    "start": 7030.8,
    "end": 7037.2,
    "text": "type in status. And then it's going to show you all of the different HTTP codes. And so now you",
    "textdich": ""
  },
  {
    "start": 7037.2,
    "end": 7041.36,
    "text": "could just quickly just look through which one ever one sounds the most accurate. So we'll grab",
    "textdich": ""
  },
  {
    "start": 7041.36,
    "end": 7045.76,
    "text": "the 404. And now you don't need to worry about putting hard coding in a number, we can just",
    "textdich": ""
  },
  {
    "start": 7045.76,
    "end": 7051.12,
    "text": "reference, you know, I guess it's an it's probably an enumerator, but I'm not really sure. So it",
    "textdich": ""
  },
  {
    "start": 7051.12,
    "end": 7058.88,
    "text": "doesn't really matter. And then that's all you have to do. So let's test this out again. So 200",
    "textdich": ""
  },
  {
    "start": 7058.88,
    "end": 7066.96,
    "text": "good changes to five 404 perfect. But the next thing I want to do is I don't want to return",
    "textdich": ""
  },
  {
    "start": 7066.96,
    "end": 7071.68,
    "text": "null that looks ugly. So instead, I'd like to actually throw an error. So in this case,",
    "textdich": ""
  },
  {
    "start": 7072.24,
    "end": 7075.92,
    "text": "in this if statement, I'm just going to call a return that only is going to ever run if",
    "textdich": ""
  },
  {
    "start": 7076.64,
    "end": 7083.52,
    "text": "post doesn't exist. And we'll just say, in this case, detail, or we'll say message, I'll just say",
    "textdich": ""
  },
  {
    "start": 7083.52,
    "end": 7098.72,
    "text": "message. f string, I'll say post with ID. And we'll pass in what was the ID, I'll say was not found.",
    "textdich": ""
  },
  {
    "start": 7101.44,
    "end": 7107.68,
    "text": "All right. And now if we try this, look at that, we get our error post with ID was not found,",
    "textdich": ""
  },
  {
    "start": 7107.68,
    "end": 7113.68,
    "text": "that matches up with the ID that we gave it. And we got our 404. Now this was a, this is one solution.",
    "textdich": ""
  },
  {
    "start": 7113.68,
    "end": 7117.84,
    "text": "However, I think this is a little bit sloppy. And there's a better way of doing it. Instead,",
    "textdich": ""
  },
  {
    "start": 7117.84,
    "end": 7122.56,
    "text": "what we can do is we can rage raise an HTTP exception. So this is a built in exception into",
    "textdich": ""
  },
  {
    "start": 7122.56,
    "end": 7128.24,
    "text": "fast API, that'll automatically, you know, you can pass in what the specific error code you want,",
    "textdich": ""
  },
  {
    "start": 7128.24,
    "end": 7132.96,
    "text": "as well as the message. And so that way, you don't have to hard code all of this. And it just makes",
    "textdich": ""
  },
  {
    "start": 7132.96,
    "end": 7137.84,
    "text": "everything look a lot simpler. So we'll go to the fast API up here. And we're going to import something",
    "textdich": ""
  },
  {
    "start": 7137.84,
    "end": 7146.16,
    "text": "called HTTP exception. And now we can delete all of this nonsense code. Actually, I'm just going to",
    "textdich": ""
  },
  {
    "start": 7146.16,
    "end": 7151.04,
    "text": "comment it for now, just so I can reference it in a second. And all we have to say is we'll raise an",
    "textdich": ""
  },
  {
    "start": 7151.04,
    "end": 7158.08,
    "text": "exception. So we raise HTTP exception. And then we have to pass in two things. So first is the status",
    "textdich": ""
  },
  {
    "start": 7158.08,
    "end": 7164.64,
    "text": "code. So we'll set the status code to be status dot and then same thing, right? So far, nothing's",
    "textdich": ""
  },
  {
    "start": 7164.64,
    "end": 7169.92,
    "text": "really changed. And then here, we'll just pass in the value for detail, which is going to be the",
    "textdich": ""
  },
  {
    "start": 7169.92,
    "end": 7175.28,
    "text": "message that fast API automatically responds back with, and I'm going to pass in the same exact F",
    "textdich": ""
  },
  {
    "start": 7175.28,
    "end": 7183.04,
    "text": "string. And so now we've basically replaced this with just this one line right here, this HTTP",
    "textdich": ""
  },
  {
    "start": 7183.04,
    "end": 7187.6,
    "text": "exception, I think this looks a little bit nicer. I don't like having to do the set the response,",
    "textdich": ""
  },
  {
    "start": 7187.6,
    "end": 7191.92,
    "text": "and then having to pass in, I don't like having to pass in the response into the path operation",
    "textdich": ""
  },
  {
    "start": 7191.92,
    "end": 7196.64,
    "text": "function, having to set a property, and then having to return my message, we can remove all of this",
    "textdich": ""
  },
  {
    "start": 7196.64,
    "end": 7201.36,
    "text": "nonsense. And I can get rid of all of these comments. And I think this is just a little bit",
    "textdich": ""
  },
  {
    "start": 7201.36,
    "end": 7205.76,
    "text": "cleaner. And moving forward, we're going to be using these HTTP exceptions a lot. Because all we",
    "textdich": ""
  },
  {
    "start": 7205.76,
    "end": 7209.44,
    "text": "have to do is just pass in what's the HTTP status code, and then the message we want to send back",
    "textdich": ""
  },
  {
    "start": 7209.44,
    "end": 7213.92,
    "text": "to the user. And then that's what's going to be sent to them. So now once again, we're going to",
    "textdich": ""
  },
  {
    "start": 7213.92,
    "end": 7223.52,
    "text": "try this out. And look at that. Alright, so we got the 404. And we got the message, the detailed",
    "textdich": ""
  },
  {
    "start": 7223.52,
    "end": 7230.64,
    "text": "message, right, lot cleaner, a lot simpler. Now, before we move any further, and before we wrap up",
    "textdich": ""
  },
  {
    "start": 7230.64,
    "end": 7238.0,
    "text": "this video, I did mention that anytime we create something, we should send back a 201. So if we go",
    "textdich": ""
  },
  {
    "start": 7238.0,
    "end": 7245.2,
    "text": "back to our create post, and then we'll just create a new post again, you just send this, we created",
    "textdich": ""
  },
  {
    "start": 7245.2,
    "end": 7251.44,
    "text": "a new post, look at the status code that gets sent back, it's got it gets sent back at 200. And that",
    "textdich": ""
  },
  {
    "start": 7251.44,
    "end": 7255.52,
    "text": "is wrong. Remember, anytime we create an entity based off of that documentation, we should send",
    "textdich": ""
  },
  {
    "start": 7255.52,
    "end": 7261.68,
    "text": "a 201. So how exactly do we send how do we change what the default status code is for a specific",
    "textdich": ""
  },
  {
    "start": 7261.68,
    "end": 7269.2,
    "text": "path operation? Well, what we can do is we'll go back to our code. And let's find our create post.",
    "textdich": ""
  },
  {
    "start": 7270.16,
    "end": 7276.0,
    "text": "And if you want to change the default status code, what we do is inside the inside the decorator,",
    "textdich": ""
  },
  {
    "start": 7276.0,
    "end": 7281.6,
    "text": "we'll pass in another option. So we'll say status code here. And then we set this to be status and",
    "textdich": ""
  },
  {
    "start": 7281.6,
    "end": 7285.84,
    "text": "then whatever our specific status code is. So I want to a one. And then that's all you have to do.",
    "textdich": ""
  },
  {
    "start": 7285.84,
    "end": 7290.88,
    "text": "So now, by default, anytime someone sends a request to create posts, we're going to send a",
    "textdich": ""
  },
  {
    "start": 7290.88,
    "end": 7296.48,
    "text": "201 created. So we'll save that we'll give it another shot. If I try this again, now we get a",
    "textdich": ""
  },
  {
    "start": 7296.48,
    "end": 7302.16,
    "text": "201. Perfect. At this point, I think you guys will have a solid understanding of how to change status",
    "textdich": ""
  },
  {
    "start": 7302.16,
    "end": 7305.84,
    "text": "codes, whether it's because we're trying to throw an exception, or if we want to just change the",
    "textdich": ""
  },
  {
    "start": 7305.84,
    "end": 7313.04,
    "text": "default status code of a specific path operation. All right, guys, so now it's time to move on to",
    "textdich": ""
  },
  {
    "start": 7314.08,
    "end": 7319.44,
    "text": "deleting a post. So to delete a post, remember, we're going to start off with our decorator,",
    "textdich": ""
  },
  {
    "start": 7319.44,
    "end": 7327.92,
    "text": "and it's going to request or it's going to require a delete HTTP request. Right. And then the URL is",
    "textdich": ""
  },
  {
    "start": 7327.92,
    "end": 7331.76,
    "text": "going to be the same. So it's going to be posts, and then we're going to need the ID. So we can",
    "textdich": ""
  },
  {
    "start": 7331.76,
    "end": 7337.2,
    "text": "figure out which post to actually delete. Right, then let's define our function. So I'm just going",
    "textdich": ""
  },
  {
    "start": 7337.2,
    "end": 7355.12,
    "text": "to call this delete post. And so here, we have to implement the logic for deleting posts. So what",
    "textdich": ""
  },
  {
    "start": 7355.12,
    "end": 7360.56,
    "text": "are we going to do? Well, for me, there's many different ways, you know, deleting a post is just",
    "textdich": ""
  },
  {
    "start": 7360.56,
    "end": 7368.08,
    "text": "a matter of trying to figure out which specific dictionary within this array has a specific ID",
    "textdich": ""
  },
  {
    "start": 7368.08,
    "end": 7372.8,
    "text": "of whatever ID we give it, and then we just remove it from the array. So however you want to do it,",
    "textdich": ""
  },
  {
    "start": 7372.8,
    "end": 7377.04,
    "text": "go ahead and do it. I'm going to just show you the first way that I thought of. Like I said,",
    "textdich": ""
  },
  {
    "start": 7377.04,
    "end": 7381.04,
    "text": "this doesn't actually have anything to do with fast API, this is more of just simply working",
    "textdich": ""
  },
  {
    "start": 7381.04,
    "end": 7385.12,
    "text": "with Python. So I'm telling you right up front, this may not be the most efficient way to do it.",
    "textdich": ""
  },
  {
    "start": 7385.12,
    "end": 7388.0,
    "text": "But like I said, we're eventually going to implement a real database. So it doesn't really",
    "textdich": ""
  },
  {
    "start": 7388.0,
    "end": 7394.64,
    "text": "matter how you do it as long as it works. And so the first thing that we're going to do is I'm going",
    "textdich": ""
  },
  {
    "start": 7394.64,
    "end": 7405.92,
    "text": "to look to find the index in the array that has required ID, we're going to look for what we're",
    "textdich": ""
  },
  {
    "start": 7405.92,
    "end": 7410.64,
    "text": "going to try to get the index of that specific item. And then all we're going to do is we'll do a",
    "textdich": ""
  },
  {
    "start": 7410.64,
    "end": 7418.48,
    "text": "my underscore posts, dot pop, and then just pass in the index. And so that's how we remove it from",
    "textdich": ""
  },
  {
    "start": 7418.48,
    "end": 7422.08,
    "text": "that array. Pretty simple. And what I'm going to do is I'm going to actually just define a function",
    "textdich": ""
  },
  {
    "start": 7422.08,
    "end": 7429.68,
    "text": "out here, just to keep things simple. So this is going to be called find underscore index underscore",
    "textdich": ""
  },
  {
    "start": 7429.68,
    "end": 7434.56,
    "text": "post. And then we're going to pass in the ID that we're interested in. And then we're going to iterate",
    "textdich": ""
  },
  {
    "start": 7434.56,
    "end": 7440.56,
    "text": "over the array. But we're also going to grab the specific index as we iterate over it. And so you",
    "textdich": ""
  },
  {
    "start": 7440.56,
    "end": 7449.04,
    "text": "do that by using enumerate. So this is going to iterate over it, we'll get the access to the",
    "textdich": ""
  },
  {
    "start": 7449.04,
    "end": 7455.76,
    "text": "individual posts that we're iterating over, as well as the index. And so we'll say, if P, if the ID",
    "textdich": ""
  },
  {
    "start": 7456.88,
    "end": 7467.36,
    "text": "equals equals ID, and I forgot the n keyword here, we'll just return i. So this is going to give us",
    "textdich": ""
  },
  {
    "start": 7467.36,
    "end": 7476.72,
    "text": "the index of the dictionary with that specific ID. So here, we can just call that function. And we'll",
    "textdich": ""
  },
  {
    "start": 7476.72,
    "end": 7482.16,
    "text": "set it equal to the index. So index equals find underscore index of post pass an ID. So we now",
    "textdich": ""
  },
  {
    "start": 7482.16,
    "end": 7490.32,
    "text": "have the index. And at this point, I can just do a my posts dot pop, and then just pass in index.",
    "textdich": ""
  },
  {
    "start": 7490.32,
    "end": 7498.08,
    "text": "And then we'll try to do a return. And then here, I'm just going to pass in. We'll say message.",
    "textdich": ""
  },
  {
    "start": 7500.8,
    "end": 7508.08,
    "text": "We'll say post was successfully deleted. Let's give this a shot. So first of all,",
    "textdich": ""
  },
  {
    "start": 7508.08,
    "end": 7516.56,
    "text": "let's get all the posts. If I do a get all posts, you'll see that we have two posts. And then I'm",
    "textdich": ""
  },
  {
    "start": 7516.56,
    "end": 7526.32,
    "text": "going to create a new request. And this will be called delete post. Copy that URL, pass it in",
    "textdich": ""
  },
  {
    "start": 7526.32,
    "end": 7536.88,
    "text": "there. And so here, I'm going to try and delete with a post of a value of one. And I realized I",
    "textdich": ""
  },
  {
    "start": 7536.88,
    "end": 7544.16,
    "text": "still left as get so we're gonna change the delete. And so now it throws an error. So what exactly",
    "textdich": ""
  },
  {
    "start": 7544.16,
    "end": 7551.44,
    "text": "happened? Well, if we go back to here, and then go back to our console, it says, says non type object",
    "textdich": ""
  },
  {
    "start": 7551.44,
    "end": 7557.84,
    "text": "cannot be interpreted as an integer. And, and I realized I forgot to actually pass in ID",
    "textdich": ""
  },
  {
    "start": 7557.84,
    "end": 7562.0,
    "text": "into our function. So that's why it was giving us that error. But now let's try this again.",
    "textdich": ""
  },
  {
    "start": 7564.8,
    "end": 7569.92,
    "text": "And we see that we get the message says post was successfully deleted. That's good. However,",
    "textdich": ""
  },
  {
    "start": 7569.92,
    "end": 7576.24,
    "text": "you'll see that the status code is 200. And so if we actually go back to our status codes, you'll",
    "textdich": ""
  },
  {
    "start": 7576.24,
    "end": 7583.28,
    "text": "see that there's a specific status code that we should be using for when we delete something. And",
    "textdich": ""
  },
  {
    "start": 7583.28,
    "end": 7588.0,
    "text": "that status code is a 204. And like I said, you know, you can read the documentation, but this is",
    "textdich": ""
  },
  {
    "start": 7588.0,
    "end": 7592.0,
    "text": "something that just, you know, comes with time of working with API. So you'll know that anytime you",
    "textdich": ""
  },
  {
    "start": 7592.0,
    "end": 7597.04,
    "text": "want to delete something, you want to use a 204. But before we actually do that, let's verify that",
    "textdich": ""
  },
  {
    "start": 7597.04,
    "end": 7601.84,
    "text": "it actually deleted it. So we'll go to get posts. And I'll send a request. And we can see that",
    "textdich": ""
  },
  {
    "start": 7601.84,
    "end": 7607.2,
    "text": "there's only one post. So it clearly did work. But let's update the status code. So do you guys",
    "textdich": ""
  },
  {
    "start": 7607.2,
    "end": 7612.24,
    "text": "remember how to update the status code, the default status code of a specific path operation,",
    "textdich": ""
  },
  {
    "start": 7612.8,
    "end": 7616.88,
    "text": "we just pass in status code into the decorator. And then we'll do status. And then we'll just",
    "textdich": ""
  },
  {
    "start": 7616.88,
    "end": 7627.52,
    "text": "get our 204. Now let's try to delete something again. We'll try to delete, where's my delete?",
    "textdich": ""
  },
  {
    "start": 7628.64,
    "end": 7633.44,
    "text": "We'll try to delete post one again, let's see what happens. So you'll see here that we get the 204.",
    "textdich": ""
  },
  {
    "start": 7633.44,
    "end": 7638.64,
    "text": "So everything looks good, we didn't get any data back. And if we go back to our application,",
    "textdich": ""
  },
  {
    "start": 7638.64,
    "end": 7644.8,
    "text": "you'll see that we got a an error, which says too much data for declared content length. And what's",
    "textdich": ""
  },
  {
    "start": 7644.8,
    "end": 7648.88,
    "text": "happening here is I actually had to look up this error. And that's because anytime you send back",
    "textdich": ""
  },
  {
    "start": 7648.88,
    "end": 7653.68,
    "text": "a 204, the idea is that since we delete anything, we shouldn't really be sending any data back.",
    "textdich": ""
  },
  {
    "start": 7653.68,
    "end": 7657.92,
    "text": "And so when we try to send this message back, fast API essentially throws an error saying like,",
    "textdich": ""
  },
  {
    "start": 7657.92,
    "end": 7662.64,
    "text": "Listen, you're sending a 204, we should not be sending anything back. So that's how they kind",
    "textdich": ""
  },
  {
    "start": 7662.64,
    "end": 7669.84,
    "text": "of implemented fast API. And so the what you should be doing is, if you want to do if you",
    "textdich": ""
  },
  {
    "start": 7669.84,
    "end": 7676.8,
    "text": "what we should do is actually just delete this, we should grab the response. And then just pass",
    "textdich": ""
  },
  {
    "start": 7676.8,
    "end": 7686.4,
    "text": "in status code status HTTP 204. Right? So basically, we don't want to actually send any data back",
    "textdich": ""
  },
  {
    "start": 7686.4,
    "end": 7690.8,
    "text": "anytime someone delete something, we just want to send a 204. And then one of the requirements for",
    "textdich": ""
  },
  {
    "start": 7690.8,
    "end": 7695.6,
    "text": "that to work is that we don't send any data back. I know it's a little confusing. If you actually",
    "textdich": ""
  },
  {
    "start": 7695.6,
    "end": 7701.36,
    "text": "just Google this error, you'll probably get better explanation. But 204, when you delete something,",
    "textdich": ""
  },
  {
    "start": 7701.36,
    "end": 7706.08,
    "text": "you don't want to send any data back. That's kind of the expected result. So let's try this again.",
    "textdich": ""
  },
  {
    "start": 7708.8,
    "end": 7716.24,
    "text": "Let's send it. All right, so we got the 204, no data comes back. And no errors. So that's all we",
    "textdich": ""
  },
  {
    "start": 7716.24,
    "end": 7721.2,
    "text": "have to do. So this is just something special that you have to do for delete within fast API. Just",
    "textdich": ""
  },
  {
    "start": 7721.2,
    "end": 7726.72,
    "text": "keep that in mind. It's more of just a copy of a cut and paste type scenario. However, before we",
    "textdich": ""
  },
  {
    "start": 7726.72,
    "end": 7735.44,
    "text": "wrap up this delete video, we are still running into one tiny issue. If I try to grab a an ID,",
    "textdich": ""
  },
  {
    "start": 7736.56,
    "end": 7741.92,
    "text": "that doesn't exist, let's see what happens. Well, now we get a 500 error. And we get an error because",
    "textdich": ""
  },
  {
    "start": 7743.12,
    "end": 7748.64,
    "text": "well, none type object cannot be interpreted as an integer. So since we tried to grab the index,",
    "textdich": ""
  },
  {
    "start": 7748.64,
    "end": 7753.28,
    "text": "from this find index post, it's going to return nothing because there's no post that has an idea",
    "textdich": ""
  },
  {
    "start": 7753.28,
    "end": 7758.08,
    "text": "of five. So we get nothing. And then we try to pop with an index of non that creates an error.",
    "textdich": ""
  },
  {
    "start": 7758.96,
    "end": 7762.64,
    "text": "So we need to put in a simple if statement to actually catch that scenario. So we'll say if",
    "textdich": ""
  },
  {
    "start": 7763.84,
    "end": 7769.36,
    "text": "index equals equals non, so return none, if it doesn't exist, what are we going to do? Well,",
    "textdich": ""
  },
  {
    "start": 7769.36,
    "end": 7776.72,
    "text": "we're going to raise an exception again. So we can use that raise HTTP exception. And we'll just",
    "textdich": ""
  },
  {
    "start": 7776.72,
    "end": 7783.12,
    "text": "say status code equals in this case, we want to send a 404 like we normally do. So we'll say status",
    "textdich": ""
  },
  {
    "start": 7783.12,
    "end": 7794.16,
    "text": "dot HTTP 404. And then we can send a detailed message. So in this case, you know, we'll do once",
    "textdich": ""
  },
  {
    "start": 7794.16,
    "end": 7810.96,
    "text": "again, another f string. And we'll say post with ID past the ID does not exist. Let's try this out.",
    "textdich": ""
  },
  {
    "start": 7813.44,
    "end": 7817.68,
    "text": "Perfect 404 post with ID doesn't exist. Let's just make sure we didn't break the original",
    "textdich": ""
  },
  {
    "start": 7817.68,
    "end": 7823.28,
    "text": "functionality. We delete it. Perfect. And let's just double check there's no errors. There we go.",
    "textdich": ""
  },
  {
    "start": 7823.28,
    "end": 7828.56,
    "text": "So everything looks good to go, guys. So we'll wrap up this video. And then in the next video,",
    "textdich": ""
  },
  {
    "start": 7828.56,
    "end": 7834.24,
    "text": "we'll take a look at how we can update posts. All right, guys, we're almost done with all of",
    "textdich": ""
  },
  {
    "start": 7834.24,
    "end": 7839.92,
    "text": "our credit operations. The final one is update. So let's create a new request. We're gonna call",
    "textdich": ""
  },
  {
    "start": 7839.92,
    "end": 7849.92,
    "text": "this update post. And I'm just gonna grab the URL from the delete post, because it's gonna follow",
    "textdich": ""
  },
  {
    "start": 7849.92,
    "end": 7854.56,
    "text": "the same exact structure. So we're gonna pass the ID of the post that we want to update.",
    "textdich": ""
  },
  {
    "start": 7856.96,
    "end": 7860.56,
    "text": "Now, since we are updating it, we need our front end, or in this case, postman,",
    "textdich": ""
  },
  {
    "start": 7860.56,
    "end": 7865.6,
    "text": "to actually send the data that we want to update with. So since we are working with posts,",
    "textdich": ""
  },
  {
    "start": 7865.6,
    "end": 7871.2,
    "text": "and we take a look at our structure of our posts, it's very simple, we just have title content,",
    "textdich": ""
  },
  {
    "start": 7872.08,
    "end": 7875.76,
    "text": "and then, you know, published as well, if you want to add that in ratings as well.",
    "textdich": ""
  },
  {
    "start": 7875.76,
    "end": 7879.92,
    "text": "And I'm actually going to remove that. So I don't actually want to have that I'll actually",
    "textdich": ""
  },
  {
    "start": 7879.92,
    "end": 7885.84,
    "text": "will keep it in for now. But we'll definitely remove that a little bit later on. And so if",
    "textdich": ""
  },
  {
    "start": 7885.84,
    "end": 7889.76,
    "text": "I go back to postman, we can go to our body and then provide all of those fields. So we'll go to",
    "textdich": ""
  },
  {
    "start": 7889.76,
    "end": 7894.48,
    "text": "raw, and then JSON. But this is just like when we were trying to create a post, we just passed",
    "textdich": ""
  },
  {
    "start": 7894.48,
    "end": 7904.88,
    "text": "that data in. And so here, we'll get the title. And we'll give it a new title. So updated title.",
    "textdich": ""
  },
  {
    "start": 7904.88,
    "end": 7912.8,
    "text": "So this, this, this update request is just going to update the title. Now, we are going to use",
    "textdich": ""
  },
  {
    "start": 7912.8,
    "end": 7919.36,
    "text": "the put method. So with put method, we have to actually pass in the data for all of the fields,",
    "textdich": ""
  },
  {
    "start": 7919.36,
    "end": 7923.68,
    "text": "right, we want to pass in what the final post will look like after we update it, we don't just want",
    "textdich": ""
  },
  {
    "start": 7923.68,
    "end": 7930.56,
    "text": "to pass in the fields that we want to update. So if I go to let's say, you know, post one, right,",
    "textdich": ""
  },
  {
    "start": 7930.56,
    "end": 7936.56,
    "text": "we have the title, and then we have the content. So if I wanted to update just the title, right,",
    "textdich": ""
  },
  {
    "start": 7936.56,
    "end": 7939.92,
    "text": "I would make sure that I pass the content as well. So I'm just going to copy this.",
    "textdich": ""
  },
  {
    "start": 7941.44,
    "end": 7944.64,
    "text": "Since we're not updating, I'm just going to send back the same exact content.",
    "textdich": ""
  },
  {
    "start": 7949.6,
    "end": 7951.92,
    "text": "All right, and then this is going to be a put operation.",
    "textdich": ""
  },
  {
    "start": 7953.76,
    "end": 7957.52,
    "text": "And so this is what the request is going to look like. Now, let's go to our code. And let's",
    "textdich": ""
  },
  {
    "start": 7957.52,
    "end": 7968.56,
    "text": "actually create our path operation for that. So here, we're going to do app dot put is going",
    "textdich": ""
  },
  {
    "start": 7968.56,
    "end": 7987.68,
    "text": "to go to posts ID. And then we'll define our function, I'm gonna call this update post. We're",
    "textdich": ""
  },
  {
    "start": 7987.68,
    "end": 7994.8,
    "text": "gonna get the ID, and I'm gonna convert that to an int. And then one other thing, right, because",
    "textdich": ""
  },
  {
    "start": 7994.8,
    "end": 8001.76,
    "text": "we are receiving data from the front end, just like we did for creating a post, we want to make",
    "textdich": ""
  },
  {
    "start": 8001.76,
    "end": 8007.28,
    "text": "sure that it adheres to a very strict structure. So we get to use so I want to use our schema again,",
    "textdich": ""
  },
  {
    "start": 8007.28,
    "end": 8012.72,
    "text": "so that the front end can't just send whatever it wants to. Now, I can create a new model called",
    "textdich": ""
  },
  {
    "start": 8013.36,
    "end": 8019.52,
    "text": "class, you know, update post. And then we can pass in all the fields that we expect. However,",
    "textdich": ""
  },
  {
    "start": 8019.52,
    "end": 8023.92,
    "text": "it's going to be the same thing as the post because we expect the title content. And then",
    "textdich": ""
  },
  {
    "start": 8023.92,
    "end": 8029.36,
    "text": "any of the other fields, depending on what we want, ultimately, but it's going to be a post. So",
    "textdich": ""
  },
  {
    "start": 8029.36,
    "end": 8032.8,
    "text": "it doesn't make sense to create a new schema, we can just use the pre existing schema.",
    "textdich": ""
  },
  {
    "start": 8036.4,
    "end": 8041.92,
    "text": "And so here, I'm just going to pass in post and make this type of post, so that it's going to",
    "textdich": ""
  },
  {
    "start": 8041.92,
    "end": 8053.44,
    "text": "make sure that the request comes in with the right schema. And then for now, I'm just going",
    "textdich": ""
  },
  {
    "start": 8053.44,
    "end": 8061.84,
    "text": "to hard code the return to be a message. And I'll just say, updated post. And then here,",
    "textdich": ""
  },
  {
    "start": 8061.84,
    "end": 8074.0,
    "text": "I'm going to do a print, let's just see what the post looks like. All right, so we were able to",
    "textdich": ""
  },
  {
    "start": 8074.0,
    "end": 8080.24,
    "text": "extract all of that data. So perfect. And then what we're going to do now is, there's a couple",
    "textdich": ""
  },
  {
    "start": 8080.24,
    "end": 8087.44,
    "text": "things. So first things first, I need to find the index that of the post with this specific ID. So",
    "textdich": ""
  },
  {
    "start": 8087.44,
    "end": 8092.0,
    "text": "just like we did with delete, I'm just going to copy this. Actually, we can copy all of this right",
    "textdich": ""
  },
  {
    "start": 8092.0,
    "end": 8097.2,
    "text": "here. Because if that ID doesn't exist, we want to send a 404. So we can reuse all of that logic.",
    "textdich": ""
  },
  {
    "start": 8100.24,
    "end": 8104.64,
    "text": "But if we did find an index, that means we do need to update it. So what I'm going to do is",
    "textdich": ""
  },
  {
    "start": 8104.64,
    "end": 8112.24,
    "text": "we're going to grab post underscore dict, which equals post dot dict, that's going to take the",
    "textdich": ""
  },
  {
    "start": 8112.24,
    "end": 8116.32,
    "text": "data we received from our front end, which is stored in post. And it's going to convert it to",
    "textdich": ""
  },
  {
    "start": 8116.32,
    "end": 8122.8,
    "text": "a dictionary. That's all it's doing. And then what I want to do is I want to set post underscore dict",
    "textdich": ""
  },
  {
    "start": 8122.8,
    "end": 8130.8,
    "text": "of ID to be equal to ID. So we're going to set the ID inside this new dictionary to be that ID.",
    "textdich": ""
  },
  {
    "start": 8130.8,
    "end": 8142.4,
    "text": "And then we're going to say my underscore post. And we're going to pass in the index of this",
    "textdich": ""
  },
  {
    "start": 8142.4,
    "end": 8148.72,
    "text": "specific post we want to update and set that equal to post underscore dict. And then lastly,",
    "textdich": ""
  },
  {
    "start": 8148.72,
    "end": 8154.88,
    "text": "we're going to return, I'll say data. And we're going to return our new post, which is going to",
    "textdich": ""
  },
  {
    "start": 8154.88,
    "end": 8162.0,
    "text": "be post underscore dict. So let's just quickly recap what's happening. So first of all, the user",
    "textdich": ""
  },
  {
    "start": 8162.0,
    "end": 8167.68,
    "text": "is going to send a put request to the specific ID of the post he wants to update. And we're going",
    "textdich": ""
  },
  {
    "start": 8167.68,
    "end": 8173.2,
    "text": "to just do a quick check. So we're going to see if we can find what is the index of that specific post",
    "textdich": ""
  },
  {
    "start": 8173.2,
    "end": 8180.32,
    "text": "within my my posts, Ray. If it doesn't exist, then we're gonna throw a 404. If it does exist,",
    "textdich": ""
  },
  {
    "start": 8180.32,
    "end": 8185.2,
    "text": "whoops, if it doesn't exist, we're gonna throw a 404. If it does exist, well, first thing, we're",
    "textdich": ""
  },
  {
    "start": 8185.2,
    "end": 8188.48,
    "text": "going to take all the data we received from the front end, which is stored in post, we're going",
    "textdich": ""
  },
  {
    "start": 8188.48,
    "end": 8193.44,
    "text": "to convert it to a regular Python dictionary. And then we're going to add the ID so that this final",
    "textdich": ""
  },
  {
    "start": 8193.44,
    "end": 8199.28,
    "text": "dictionary has the ID built in. And then we're going to say, for the post within index, we're",
    "textdich": ""
  },
  {
    "start": 8199.28,
    "end": 8205.04,
    "text": "going to just replace it with our new post underscore dict. So that's how we update that specific spot",
    "textdich": ""
  },
  {
    "start": 8205.04,
    "end": 8213.68,
    "text": "in the array. And so let's give this a shot. So if I do get all posts, right, we can see we have",
    "textdich": ""
  },
  {
    "start": 8213.68,
    "end": 8218.48,
    "text": "post one, and then the title is title of post one. And then let's go to our update. And we can see",
    "textdich": ""
  },
  {
    "start": 8218.48,
    "end": 8223.2,
    "text": "that we're going to change the title to be updated title. And let's see if that works. Okay, so it",
    "textdich": ""
  },
  {
    "start": 8223.2,
    "end": 8228.32,
    "text": "looks like it worked. We got back the new post. So let's do a get all posts again. And let's see",
    "textdich": ""
  },
  {
    "start": 8228.32,
    "end": 8235.76,
    "text": "if it actually did update. And we can see that it did in fact, update. Now, just to just to make",
    "textdich": ""
  },
  {
    "start": 8235.76,
    "end": 8241.76,
    "text": "sure everything else is good, let's also change the content. So let's say this is the new content.",
    "textdich": ""
  },
  {
    "start": 8243.04,
    "end": 8249.92,
    "text": "Let's send an update. And then we're going to run this again. And we can see that the content is",
    "textdich": ""
  },
  {
    "start": 8249.92,
    "end": 8255.36,
    "text": "updated. So now we're able to successfully update each and every post. And that's going to wrap up",
    "textdich": ""
  },
  {
    "start": 8255.36,
    "end": 8259.92,
    "text": "all of our CRUD operations. So you can see that building out an API, building out your CRUD",
    "textdich": ""
  },
  {
    "start": 8259.92,
    "end": 8264.88,
    "text": "functionality is fairly straightforward within fast API. We've got one more lesson where we're",
    "textdich": ""
  },
  {
    "start": 8264.88,
    "end": 8268.96,
    "text": "just going to restructure our code a little bit just to make things a little bit cleaner. And then",
    "textdich": ""
  },
  {
    "start": 8268.96,
    "end": 8272.96,
    "text": "we're going to start getting to the fun stuff, which is working with databases. So I'm going to",
    "textdich": ""
  },
  {
    "start": 8272.96,
    "end": 8277.6,
    "text": "show you guys how we can actually get a Postgres database installed on our machines and running.",
    "textdich": ""
  },
  {
    "start": 8277.6,
    "end": 8284.8,
    "text": "And then we'll actually start saving data into an actual database. In this lesson, we're going to",
    "textdich": ""
  },
  {
    "start": 8284.8,
    "end": 8290.48,
    "text": "talk about one of my favorite features of fast API. And that is the built in support for documentation.",
    "textdich": ""
  },
  {
    "start": 8290.48,
    "end": 8294.32,
    "text": "So normally, when you build an API, you're going to want to create documentation so that users know",
    "textdich": ""
  },
  {
    "start": 8294.32,
    "end": 8298.88,
    "text": "how to use it. And one of the challenges with that is that it's not exactly a simple process. And",
    "textdich": ""
  },
  {
    "start": 8298.88,
    "end": 8304.24,
    "text": "anytime you make changes to your API, you have to make sure that you update your documentation. And",
    "textdich": ""
  },
  {
    "start": 8304.24,
    "end": 8310.08,
    "text": "it's very easy to forget to do that with fast API, fast API automatically generates the documentation",
    "textdich": ""
  },
  {
    "start": 8310.08,
    "end": 8314.16,
    "text": "based off of the path operations that you've defined. So it does it all for you. And you don't",
    "textdich": ""
  },
  {
    "start": 8314.16,
    "end": 8319.12,
    "text": "have to write a single piece of code to actually get the documentation in place. And so to actually",
    "textdich": ""
  },
  {
    "start": 8319.12,
    "end": 8324.32,
    "text": "see the documentation, you just go to the normal URL, but you just do slash docs. And so this is",
    "textdich": ""
  },
  {
    "start": 8324.32,
    "end": 8328.88,
    "text": "going to show you the built in documentation powered by swagger UI. And so what's really nice",
    "textdich": ""
  },
  {
    "start": 8328.88,
    "end": 8333.6,
    "text": "is and if you've ever looked at the documentation for our some other API's, you may have noticed",
    "textdich": ""
  },
  {
    "start": 8333.6,
    "end": 8337.92,
    "text": "something that looks similar to this. And that usually means that they used swagger UI as well.",
    "textdich": ""
  },
  {
    "start": 8337.92,
    "end": 8343.2,
    "text": "So fast API has built in swagger UI support, and it automatically generates all of the routes,",
    "textdich": ""
  },
  {
    "start": 8343.2,
    "end": 8347.36,
    "text": "and the documentation for all of your paths. And so if you take a look at all of our operations,",
    "textdich": ""
  },
  {
    "start": 8347.36,
    "end": 8351.92,
    "text": "our path operations, we've got the one for getting all posts, we've got the one for creating posts,",
    "textdich": ""
  },
  {
    "start": 8351.92,
    "end": 8356.72,
    "text": "we've got the one for getting an individual post, we got the one for updating an individual post,",
    "textdich": ""
  },
  {
    "start": 8356.72,
    "end": 8361.2,
    "text": "as well as deleting a post. And what's really cool about this is if we do hit the drop down,",
    "textdich": ""
  },
  {
    "start": 8361.2,
    "end": 8368.08,
    "text": "right, it's going to show you how to use this specific path, or how to use this specific API",
    "textdich": ""
  },
  {
    "start": 8368.08,
    "end": 8372.16,
    "text": "endpoint. So if you want to actually try it out, you can do that. So you could say try it out.",
    "textdich": ""
  },
  {
    "start": 8372.16,
    "end": 8377.92,
    "text": "And then you can just hit execute. And so now it actually ran the query against our API server,",
    "textdich": ""
  },
  {
    "start": 8377.92,
    "end": 8381.28,
    "text": "and it shows us what the output is. So these are the two documents that we have,",
    "textdich": ""
  },
  {
    "start": 8381.92,
    "end": 8387.76,
    "text": "or the two posts that we've created. And we can do this with all of the API endpoints. So if we",
    "textdich": ""
  },
  {
    "start": 8387.76,
    "end": 8393.04,
    "text": "want to create a new post, it's going to give you an example of the data that we can pass in,",
    "textdich": ""
  },
  {
    "start": 8393.04,
    "end": 8397.44,
    "text": "so we can try try it out. And then it's going to give us all the fields that we have to pass in,",
    "textdich": ""
  },
  {
    "start": 8397.44,
    "end": 8403.28,
    "text": "and then we can just customize this. So if I want to say, creating new post with documents,",
    "textdich": ""
  },
  {
    "start": 8404.8,
    "end": 8407.76,
    "text": "and then I'll just for content, I'll say this is really cool.",
    "textdich": ""
  },
  {
    "start": 8410.08,
    "end": 8415.76,
    "text": "We'll give it a random rating, we hit execute, right, it actually runs that it's going to show",
    "textdich": ""
  },
  {
    "start": 8415.76,
    "end": 8421.52,
    "text": "you how to perform the same actions using curl as well. And then it's going to show you the data",
    "textdich": ""
  },
  {
    "start": 8421.52,
    "end": 8428.48,
    "text": "that we got back from our API server. And we can see that we got a 201 response code. And so I want",
    "textdich": ""
  },
  {
    "start": 8428.48,
    "end": 8433.44,
    "text": "you guys to just kind of play around with this, get familiar with it. So there's going to be times",
    "textdich": ""
  },
  {
    "start": 8433.44,
    "end": 8438.72,
    "text": "where you may not even have to use a tool like postman, you could just test things out using",
    "textdich": ""
  },
  {
    "start": 8438.72,
    "end": 8446.24,
    "text": "swagger UI in the built in documentation. And what's even nicer about this is that we have",
    "textdich": ""
  },
  {
    "start": 8446.24,
    "end": 8450.64,
    "text": "built in support for two different types of documentation. So this is using swagger UI,",
    "textdich": ""
  },
  {
    "start": 8450.64,
    "end": 8456.64,
    "text": "but if you use redox, sorry, there shouldn't be an S at the end, it's just redoc, right,",
    "textdich": ""
  },
  {
    "start": 8456.64,
    "end": 8460.24,
    "text": "you could see a different format of the documentation using a tool called redoc.",
    "textdich": ""
  },
  {
    "start": 8461.04,
    "end": 8464.72,
    "text": "So it's going to fundamentally do the same thing. It's just a different documentation tool. So it's",
    "textdich": ""
  },
  {
    "start": 8464.72,
    "end": 8468.88,
    "text": "going to look a little different. Feel free to use whichever one you ultimately prefer. But",
    "textdich": ""
  },
  {
    "start": 8469.52,
    "end": 8474.08,
    "text": "by having it automatically get generated by fast API, you don't ever have to worry about updating",
    "textdich": ""
  },
  {
    "start": 8474.08,
    "end": 8479.6,
    "text": "anything. So if you take a look at like create post, right, we've defined the pieces of data",
    "textdich": ""
  },
  {
    "start": 8479.6,
    "end": 8484.64,
    "text": "that we need. And in the future, if we decide that the user needs to pass in another field,",
    "textdich": ""
  },
  {
    "start": 8484.64,
    "end": 8489.04,
    "text": "maybe like the date that they wanted to get published, it'll automatically update this,",
    "textdich": ""
  },
  {
    "start": 8489.04,
    "end": 8492.8,
    "text": "you don't have to tell it you don't have to manually go in and update it yourself.",
    "textdich": ""
  },
  {
    "start": 8495.12,
    "end": 8498.64,
    "text": "All right, guys, so we're going to make one slight change to how we structure our code.",
    "textdich": ""
  },
  {
    "start": 8498.64,
    "end": 8505.28,
    "text": "And what I want to do is instead of just having my main file within my base project directory,",
    "textdich": ""
  },
  {
    "start": 8505.28,
    "end": 8508.64,
    "text": "I want to actually create a folder called app. So that's going to store all of our application",
    "textdich": ""
  },
  {
    "start": 8508.64,
    "end": 8512.96,
    "text": "specific code, and then put that main file in there. So it's a very small change. But we do",
    "textdich": ""
  },
  {
    "start": 8512.96,
    "end": 8516.24,
    "text": "have to change a couple of things to make sure that it doesn't actually break anything. So I'm",
    "textdich": ""
  },
  {
    "start": 8516.24,
    "end": 8525.52,
    "text": "going to create a new folder. And I'm going to call this app. And so this in Python, if you",
    "textdich": ""
  },
  {
    "start": 8525.52,
    "end": 8531.6,
    "text": "aren't too familiar with how Python works, Python has a concept of packages, and a package is nothing",
    "textdich": ""
  },
  {
    "start": 8531.6,
    "end": 8537.68,
    "text": "more than a fancy name for a folder. However, for something to properly act as a package,",
    "textdich": ""
  },
  {
    "start": 8537.68,
    "end": 8543.28,
    "text": "Python requires you to create a dummy file. And this file is called underscore underscore in it,",
    "textdich": ""
  },
  {
    "start": 8544.0,
    "end": 8551.36,
    "text": "underscore underscore p y. All right, and so that's going to turn this into a proper Python package.",
    "textdich": ""
  },
  {
    "start": 8551.36,
    "end": 8554.96,
    "text": "Just know that you have to add this file, you don't have to put anything in the file. But any",
    "textdich": ""
  },
  {
    "start": 8554.96,
    "end": 8558.8,
    "text": "time you create a new folder, just make sure you create a file with this exact name. And that's",
    "textdich": ""
  },
  {
    "start": 8558.8,
    "end": 8564.48,
    "text": "going to ensure that it is in fact a Python package. So now that this is an actual Python",
    "textdich": ""
  },
  {
    "start": 8564.48,
    "end": 8571.68,
    "text": "package, we can just drag this main file into our app folder. Right, and then now we're going to get",
    "textdich": ""
  },
  {
    "start": 8571.68,
    "end": 8578.08,
    "text": "an error. And that's perfectly okay. So we're going to cancel out of this. And I want you to",
    "textdich": ""
  },
  {
    "start": 8578.08,
    "end": 8582.88,
    "text": "take a look at the command that we run to start our application. So the command to start our",
    "textdich": ""
  },
  {
    "start": 8582.88,
    "end": 8589.84,
    "text": "application was we do uv corn, we do the name of the main file, which is just main. And then within",
    "textdich": ""
  },
  {
    "start": 8589.84,
    "end": 8595.44,
    "text": "main, if you take a look at what's the name of our fast API instance, it's called app. However,",
    "textdich": ""
  },
  {
    "start": 8595.44,
    "end": 8600.64,
    "text": "now when we run this command line, this command, it's going to look for a file named main. However,",
    "textdich": ""
  },
  {
    "start": 8600.64,
    "end": 8605.36,
    "text": "there's no file named main within our base project directory, because it's now been moved into app.",
    "textdich": ""
  },
  {
    "start": 8605.36,
    "end": 8611.36,
    "text": "So to actually reference the main file that's inside of a Python package, it's pretty simple,",
    "textdich": ""
  },
  {
    "start": 8611.36,
    "end": 8617.12,
    "text": "you just put the name of the package beforehand. So you do app, and then dot. So it's going to",
    "textdich": ""
  },
  {
    "start": 8617.12,
    "end": 8622.56,
    "text": "tell uv coin to look inside the app directory for a file name main. So then we go in there,",
    "textdich": ""
  },
  {
    "start": 8622.56,
    "end": 8627.12,
    "text": "we see the main file. And then within our main file, we look for the app instance,",
    "textdich": ""
  },
  {
    "start": 8627.12,
    "end": 8631.44,
    "text": "which is our fast API instance right here. Let's give this a shot. Let's see if we broke anything.",
    "textdich": ""
  },
  {
    "start": 8632.16,
    "end": 8635.92,
    "text": "It looks like everything started out fine. I'm just going to do a couple of requests. So this",
    "textdich": ""
  },
  {
    "start": 8635.92,
    "end": 8640.24,
    "text": "is going to be just get an individual post. Looks like everything is good. I just want to make sure",
    "textdich": ""
  },
  {
    "start": 8640.24,
    "end": 8644.48,
    "text": "that there's no errors. And yep, everything looks good. So I think this is just a little bit better",
    "textdich": ""
  },
  {
    "start": 8644.48,
    "end": 8647.92,
    "text": "of a way to structure our application, we're going to put all of our app code moving forward",
    "textdich": ""
  },
  {
    "start": 8647.92,
    "end": 8651.28,
    "text": "inside of this app directory, so that we can keep everything else separate.",
    "textdich": ""
  },
  {
    "start": 8652.72,
    "end": 8656.88,
    "text": "I think at this point, we have a basic understanding of how to work with fast API,",
    "textdich": ""
  },
  {
    "start": 8656.88,
    "end": 8661.76,
    "text": "and how to set up basic routes and work with path operations. Until now, we've been storing all of",
    "textdich": ""
  },
  {
    "start": 8661.76,
    "end": 8666.48,
    "text": "our posts in memory. And I think we've made it to a point where we are ready to now start working",
    "textdich": ""
  },
  {
    "start": 8666.48,
    "end": 8670.88,
    "text": "with databases. And so if you don't know what a database is, a database is a collection of",
    "textdich": ""
  },
  {
    "start": 8670.88,
    "end": 8675.68,
    "text": "organized data that can be easily accessed and managed. And so when it comes to any kind of",
    "textdich": ""
  },
  {
    "start": 8675.68,
    "end": 8680.56,
    "text": "application related data, so things like users that have registered posts that have been created,",
    "textdich": ""
  },
  {
    "start": 8680.56,
    "end": 8684.72,
    "text": "all of these pieces of information are going to be stored within a database. So it's going to be",
    "textdich": ""
  },
  {
    "start": 8684.72,
    "end": 8689.68,
    "text": "stored on disk, so that we can retrieve this information at a later point in time. Now,",
    "textdich": ""
  },
  {
    "start": 8689.68,
    "end": 8695.04,
    "text": "when it comes to databases, we never actually interact with the databases directly. Instead,",
    "textdich": ""
  },
  {
    "start": 8695.04,
    "end": 8700.56,
    "text": "what we have is a database management system that's going to sit in the middle. So when we",
    "textdich": ""
  },
  {
    "start": 8700.56,
    "end": 8704.96,
    "text": "want to perform an operation on a database, we're going to send that request to a database",
    "textdich": ""
  },
  {
    "start": 8704.96,
    "end": 8709.36,
    "text": "management system, that management system is then going to actually perform that operation,",
    "textdich": ""
  },
  {
    "start": 8709.36,
    "end": 8713.28,
    "text": "and then it's going to send the result back to us. So we never talked to the databases directly.",
    "textdich": ""
  },
  {
    "start": 8713.28,
    "end": 8717.84,
    "text": "Instead, we have a piece of software that sits in the middle and access the brains behind the",
    "textdich": ""
  },
  {
    "start": 8717.84,
    "end": 8726.64,
    "text": "database. Now, there's two major branches of databases, there's relational and no SQL databases,",
    "textdich": ""
  },
  {
    "start": 8726.64,
    "end": 8731.04,
    "text": "relational databases are usually SQL based databases. And we're going to cover that in the",
    "textdich": ""
  },
  {
    "start": 8731.04,
    "end": 8736.16,
    "text": "next slide or so. But these are just some of the more popular relational and no SQL databases",
    "textdich": ""
  },
  {
    "start": 8736.16,
    "end": 8740.4,
    "text": "that you guys have probably heard of. In this course, we're going to work exclusively with",
    "textdich": ""
  },
  {
    "start": 8740.4,
    "end": 8745.68,
    "text": "relational databases. And more specifically, we're going to work with Postgres. Now, if you ultimately",
    "textdich": ""
  },
  {
    "start": 8745.68,
    "end": 8750.0,
    "text": "want to learn how to work with MySQL or Oracle or SQL Server or any of the other databases,",
    "textdich": ""
  },
  {
    "start": 8750.0,
    "end": 8754.16,
    "text": "keep in mind that at the core, they are fundamentally no different than Postgres,",
    "textdich": ""
  },
  {
    "start": 8754.16,
    "end": 8758.24,
    "text": "you know, 90, I would say 97% of the things that we cover when it comes to Postgres is going to",
    "textdich": ""
  },
  {
    "start": 8758.24,
    "end": 8762.24,
    "text": "be almost identical in all of these other databases, because they all at the end of the day,",
    "textdich": ""
  },
  {
    "start": 8762.24,
    "end": 8768.4,
    "text": "use SQL. However, SQL, there is a little bit of slight nuances when it comes to each database,",
    "textdich": ""
  },
  {
    "start": 8768.4,
    "end": 8773.12,
    "text": "each of them will implement it in a slightly different way. So you'll see that certain SQL",
    "textdich": ""
  },
  {
    "start": 8773.12,
    "end": 8777.52,
    "text": "commands aren't available in others. But for the most part, all of the core things that we cover",
    "textdich": ""
  },
  {
    "start": 8777.52,
    "end": 8785.28,
    "text": "from a SQL perspective is going to be applicable to any of the other relational based databases.",
    "textdich": ""
  },
  {
    "start": 8785.28,
    "end": 8789.92,
    "text": "And so let's talk about SQL now. So SQL or structured query language is a language that's",
    "textdich": ""
  },
  {
    "start": 8789.92,
    "end": 8794.56,
    "text": "used to communicate with the database management system. And so, you know, when we want to perform",
    "textdich": ""
  },
  {
    "start": 8794.56,
    "end": 8799.28,
    "text": "an operation, we're going to send a specific SQL statement to the database management system,",
    "textdich": ""
  },
  {
    "start": 8799.28,
    "end": 8803.28,
    "text": "it's going to then take that statement and then perform the operation on the database.",
    "textdich": ""
  },
  {
    "start": 8803.28,
    "end": 8808.08,
    "text": "And then it's going to send that result back to us. So SQL is the language that we use to communicate",
    "textdich": ""
  },
  {
    "start": 8808.08,
    "end": 8814.24,
    "text": "with the database management system. Now, in the next video, what we're going to do is we're going",
    "textdich": ""
  },
  {
    "start": 8814.24,
    "end": 8818.8,
    "text": "to install Postgres on both Windows and Mac, depending on what you're using. And there's an",
    "textdich": ""
  },
  {
    "start": 8818.8,
    "end": 8823.52,
    "text": "important thing to note when it comes to installing Postgres, or really any database, when you install",
    "textdich": ""
  },
  {
    "start": 8823.52,
    "end": 8830.16,
    "text": "an instance of Postgres, what we can actually do is we can carve out multiple separate databases,",
    "textdich": ""
  },
  {
    "start": 8830.16,
    "end": 8833.12,
    "text": "right? And this is kind of confusing at first, because you're thinking, well, we installed",
    "textdich": ""
  },
  {
    "start": 8833.12,
    "end": 8838.0,
    "text": "Postgres, we have a database. Yes, but what we can do is we can actually create two different",
    "textdich": ""
  },
  {
    "start": 8838.0,
    "end": 8842.56,
    "text": "databases that are completely isolate, isolated, and have nothing to do with one another. And that",
    "textdich": ""
  },
  {
    "start": 8842.56,
    "end": 8848.24,
    "text": "way, if I have application one, we can create a database just for app one. And then if I have a",
    "textdich": ""
  },
  {
    "start": 8848.24,
    "end": 8852.96,
    "text": "second application that I create, this application can have a separate database as well. And there,",
    "textdich": ""
  },
  {
    "start": 8852.96,
    "end": 8856.96,
    "text": "these two databases are going to be completely separate, and completely isolated so that they",
    "textdich": ""
  },
  {
    "start": 8856.96,
    "end": 8860.64,
    "text": "don't step on each other's toes. So it's pretty cool. And it's a pretty awesome feature to be",
    "textdich": ""
  },
  {
    "start": 8860.64,
    "end": 8865.84,
    "text": "able to kind of carve out your Postgres instance to multiple databases. And keep in mind that you",
    "textdich": ""
  },
  {
    "start": 8865.84,
    "end": 8872.64,
    "text": "don't necessarily always create a separate database in database instance for each application,",
    "textdich": ""
  },
  {
    "start": 8872.64,
    "end": 8876.16,
    "text": "right? There are scenarios where you might actually create an app that's going to make use",
    "textdich": ""
  },
  {
    "start": 8876.16,
    "end": 8882.72,
    "text": "of more than one database instance within Postgres. However, those are very specific situations,",
    "textdich": ""
  },
  {
    "start": 8882.72,
    "end": 8886.4,
    "text": "maybe if you want some sort of multi tendency or things like that. However, we're just going to",
    "textdich": ""
  },
  {
    "start": 8886.4,
    "end": 8890.8,
    "text": "create one individual database instance for our application, that's going to handle everything",
    "textdich": ""
  },
  {
    "start": 8890.8,
    "end": 8896.0,
    "text": "that we need. Now, when we install Postgres, what's going to happen is that the installation",
    "textdich": ""
  },
  {
    "start": 8896.0,
    "end": 8901.52,
    "text": "process is going to create a database within the Postgres instance, called Postgres, little",
    "textdich": ""
  },
  {
    "start": 8901.52,
    "end": 8905.68,
    "text": "confusing, right? It's Postgres within Postgres. But it's actually going to create this database",
    "textdich": ""
  },
  {
    "start": 8905.68,
    "end": 8910.88,
    "text": "named Postgres. And the reason we need to do this is that if you ever want to connect to a Postgres",
    "textdich": ""
  },
  {
    "start": 8910.88,
    "end": 8914.8,
    "text": "instance, what you have to do is you have to specify a database that you want to connect to",
    "textdich": ""
  },
  {
    "start": 8914.8,
    "end": 8918.64,
    "text": "some some kind of default database that you want to connect to, you can't just connect to Postgres,",
    "textdich": ""
  },
  {
    "start": 8918.64,
    "end": 8924.0,
    "text": "you have to specify a database. And so that's why the installation process creates one database for",
    "textdich": ""
  },
  {
    "start": 8924.0,
    "end": 8929.28,
    "text": "you so that you can have something to connect to. However, we won't necessarily need that instance",
    "textdich": ""
  },
  {
    "start": 8929.28,
    "end": 8933.2,
    "text": "once we create our own. However, I usually just keep it in by default, because it's not going to",
    "textdich": ""
  },
  {
    "start": 8933.2,
    "end": 8940.56,
    "text": "hurt anyone. In this video, we'll take a look at how we can install Postgres on a Windows machine.",
    "textdich": ""
  },
  {
    "start": 8940.56,
    "end": 8947.28,
    "text": "So let's go ahead and just search for Postgres. And it's almost always going to be the first",
    "textdich": ""
  },
  {
    "start": 8947.28,
    "end": 8953.12,
    "text": "instance. So just go to Postgres ql.org. And then we can just select the downloads button.",
    "textdich": ""
  },
  {
    "start": 8954.0,
    "end": 8958.4,
    "text": "Here, go ahead and select Windows. And then up here, just like the download the installer link.",
    "textdich": ""
  },
  {
    "start": 8959.52,
    "end": 8963.44,
    "text": "And so here, you'll see all of the downloads options. So right now, the latest version is",
    "textdich": ""
  },
  {
    "start": 8963.44,
    "end": 8968.24,
    "text": "13.4. So I'm going to just download that one, you may see a newer version, feel free to download",
    "textdich": ""
  },
  {
    "start": 8968.24,
    "end": 8974.08,
    "text": "that nothing's going to really change between each version. Once that's downloaded, start the",
    "textdich": ""
  },
  {
    "start": 8974.08,
    "end": 8980.8,
    "text": "installer. If you see this pop up, just select Yes. With the installer open, select Next,",
    "textdich": ""
  },
  {
    "start": 8981.52,
    "end": 8985.36,
    "text": "you can leave the default installation directory, no one usually messes with that.",
    "textdich": ""
  },
  {
    "start": 8985.36,
    "end": 8988.8,
    "text": "Now here, you can select the different components that you want to install with your Postgres",
    "textdich": ""
  },
  {
    "start": 8988.8,
    "end": 8993.52,
    "text": "instance. So for the first thing that you have is the Postgres SQL Server, that's obviously what you",
    "textdich": ""
  },
  {
    "start": 8993.52,
    "end": 8998.8,
    "text": "want to download. The next one is PG admin. So this is a GUI that can be used to manage your",
    "textdich": ""
  },
  {
    "start": 8998.8,
    "end": 9002.88,
    "text": "Postgres instance, we're going to be using that to actually manage Postgres. So you want to make",
    "textdich": ""
  },
  {
    "start": 9002.88,
    "end": 9008.72,
    "text": "sure that you've got that downloaded stack builder, this is a an extra feature that can be used to",
    "textdich": ""
  },
  {
    "start": 9008.72,
    "end": 9013.6,
    "text": "install extensions and extra features within Postgres, we're not going to be installing any",
    "textdich": ""
  },
  {
    "start": 9013.6,
    "end": 9016.96,
    "text": "of those extensions. So there's no need to have stack builder. However, it's not going to break",
    "textdich": ""
  },
  {
    "start": 9016.96,
    "end": 9021.52,
    "text": "anything if you do leave it checked. And then we'll we won't be using any command line tools to",
    "textdich": ""
  },
  {
    "start": 9021.52,
    "end": 9025.44,
    "text": "manage Postgres. However, go ahead and just leave that check just in case, you know, down the road,",
    "textdich": ""
  },
  {
    "start": 9025.44,
    "end": 9030.32,
    "text": "you actually do want to use it. All right, and then once again, leave the default data directory,",
    "textdich": ""
  },
  {
    "start": 9031.2,
    "end": 9036.64,
    "text": "then you have to pass in the password for the super user. So make sure you remember this password.",
    "textdich": ""
  },
  {
    "start": 9038.56,
    "end": 9043.28,
    "text": "Then you got to specify the port that you want your database to be listening on. The default",
    "textdich": ""
  },
  {
    "start": 9043.28,
    "end": 9048.16,
    "text": "Postgres port is going to be 5432. You can change it if you want, but you have to make sure that you",
    "textdich": ""
  },
  {
    "start": 9048.16,
    "end": 9053.44,
    "text": "update everything else. When it comes to creating our code to update that port number, I'm going to",
    "textdich": ""
  },
  {
    "start": 9053.44,
    "end": 9059.2,
    "text": "leave it as default as do most people. And then just hit Next on this window, and then next here,",
    "textdich": ""
  },
  {
    "start": 9059.2,
    "end": 9061.6,
    "text": "next, and then it's going to start the installation process.",
    "textdich": ""
  },
  {
    "start": 9063.76,
    "end": 9068.24,
    "text": "And once that's complete, just hit Finish. And then like I said, we're going to be using the",
    "textdich": ""
  },
  {
    "start": 9068.24,
    "end": 9075.04,
    "text": "PG admin GUI software to manage our Postgres instance. So if you just search for PG admin,",
    "textdich": ""
  },
  {
    "start": 9075.04,
    "end": 9079.36,
    "text": "you'll see that it's right there, just like that and open it up. And then at that point in the next",
    "textdich": ""
  },
  {
    "start": 9079.36,
    "end": 9084.4,
    "text": "video, we'll start taking a look at how we can use that to not only create individual database",
    "textdich": ""
  },
  {
    "start": 9084.4,
    "end": 9091.44,
    "text": "instances, but also create tables and things like that. In this video, we'll take a look at how we",
    "textdich": ""
  },
  {
    "start": 9091.44,
    "end": 9097.36,
    "text": "can install Postgres on a Mac machine. So let's search for Postgres in Google. And the first",
    "textdich": ""
  },
  {
    "start": 9097.36,
    "end": 9101.76,
    "text": "result should be the one that we're looking for. And within the Postgres website, just like the",
    "textdich": ""
  },
  {
    "start": 9101.76,
    "end": 9105.84,
    "text": "downloads button, and this is going to show you the different platforms it supports. So we're",
    "textdich": ""
  },
  {
    "start": 9105.84,
    "end": 9112.8,
    "text": "going to install this for Mac. And then select Download the installer. And then here, we could",
    "textdich": ""
  },
  {
    "start": 9112.8,
    "end": 9116.16,
    "text": "see all of the versions that we can download, we're going to download whatever the latest version",
    "textdich": ""
  },
  {
    "start": 9116.16,
    "end": 9120.56,
    "text": "is. So in my case, it's 13.4. If you're watching this video in the future, it's probably going to",
    "textdich": ""
  },
  {
    "start": 9120.56,
    "end": 9124.48,
    "text": "be some other version, but it should all be relatively the same. So we'll just download",
    "textdich": ""
  },
  {
    "start": 9124.48,
    "end": 9136.72,
    "text": "under Mac. Alright, and once it's finished downloading, just go ahead and select the",
    "textdich": ""
  },
  {
    "start": 9136.72,
    "end": 9141.52,
    "text": "dmg file that you downloaded. And then we'll set up the installer. And if you get this pop up,",
    "textdich": ""
  },
  {
    "start": 9141.52,
    "end": 9149.84,
    "text": "just like to open and then specify your password. With the installer window open, select Next,",
    "textdich": ""
  },
  {
    "start": 9149.84,
    "end": 9156.0,
    "text": "leave the default installation directory. Now within here, by default, it's going to install",
    "textdich": ""
  },
  {
    "start": 9156.0,
    "end": 9160.16,
    "text": "four different components. I'm going to walk you through what each of these components does. The",
    "textdich": ""
  },
  {
    "start": 9160.16,
    "end": 9165.28,
    "text": "first one is the Postgres server. So this is the actual Postgres database. So we definitely want",
    "textdich": ""
  },
  {
    "start": 9165.28,
    "end": 9170.88,
    "text": "to install that below that is PG admin. This is a GUI that can be used to manage your Postgres",
    "textdich": ""
  },
  {
    "start": 9170.88,
    "end": 9174.48,
    "text": "databases. We're definitely going to install that because that's what we're going to use in this",
    "textdich": ""
  },
  {
    "start": 9174.48,
    "end": 9180.72,
    "text": "course to actually manage our database. Stack Builder is an extra, almost like an extra",
    "textdich": ""
  },
  {
    "start": 9180.72,
    "end": 9186.0,
    "text": "installer that's used to install extra extensions that give Postgres some extra functionality,",
    "textdich": ""
  },
  {
    "start": 9186.0,
    "end": 9190.4,
    "text": "we're not going to use any of those extensions. So go ahead and uncheck Stack Builder. And the last",
    "textdich": ""
  },
  {
    "start": 9190.4,
    "end": 9195.04,
    "text": "one is command line tools. So we can manage Postgres through the GUI, as well as the command line.",
    "textdich": ""
  },
  {
    "start": 9195.76,
    "end": 9198.32,
    "text": "In this course, we're going to stick exclusively to the GUI. However,",
    "textdich": ""
  },
  {
    "start": 9198.32,
    "end": 9202.08,
    "text": "I would still recommend downloading the command line tools, just in case you ever do want to use",
    "textdich": ""
  },
  {
    "start": 9202.08,
    "end": 9209.28,
    "text": "them. And then specify the default data directory, that's fine. Then you want to give the password",
    "textdich": ""
  },
  {
    "start": 9209.28,
    "end": 9215.2,
    "text": "to your Postgres instance. So this is kind of like the root user equivalent. Here, we specify what",
    "textdich": ""
  },
  {
    "start": 9215.2,
    "end": 9219.84,
    "text": "port we want our Postgres instance to run. This is the default Postgres port. If you want to change,",
    "textdich": ""
  },
  {
    "start": 9219.84,
    "end": 9225.44,
    "text": "you can do it. But just make sure that you know, whenever we get to actually coding out our API",
    "textdich": ""
  },
  {
    "start": 9225.44,
    "end": 9229.92,
    "text": "and specifying what port we connect to the Postgres database, make sure you update those",
    "textdich": ""
  },
  {
    "start": 9229.92,
    "end": 9235.04,
    "text": "accordingly. However, I recommend just keeping it as the default. And then everything else just",
    "textdich": ""
  },
  {
    "start": 9235.04,
    "end": 9243.44,
    "text": "keep hitting next. And then it'll start the installation. All right, and once that's complete,",
    "textdich": ""
  },
  {
    "start": 9243.44,
    "end": 9248.08,
    "text": "just like finish, it's going to be at that point, Postgres has been successfully installed,",
    "textdich": ""
  },
  {
    "start": 9248.08,
    "end": 9253.92,
    "text": "then what you want to do is just hit the little search icon. I want you to search for PG admin.",
    "textdich": ""
  },
  {
    "start": 9253.92,
    "end": 9260.16,
    "text": "All right, and so if you want to open up PGV admin, which we'll cover in the either the next lecture",
    "textdich": ""
  },
  {
    "start": 9260.16,
    "end": 9263.68,
    "text": "or the lecture after that, just search for it, select it. And that's going to open up the GUI",
    "textdich": ""
  },
  {
    "start": 9263.68,
    "end": 9270.16,
    "text": "tool used to manage your database. Before we get started with configuring our Postgres database,",
    "textdich": ""
  },
  {
    "start": 9270.16,
    "end": 9274.64,
    "text": "there are a few things that we need to cover. And one of those things is the concept of tables. And",
    "textdich": ""
  },
  {
    "start": 9274.64,
    "end": 9280.32,
    "text": "this is a very important concept when it comes to working with relational databases. So a table",
    "textdich": ""
  },
  {
    "start": 9280.32,
    "end": 9285.84,
    "text": "represents a subject or event in an application. And so what exactly does that mean? Let's use a",
    "textdich": ""
  },
  {
    "start": 9285.84,
    "end": 9291.2,
    "text": "example. Let's say we're building out a e commerce application, you're going to have a table that",
    "textdich": ""
  },
  {
    "start": 9291.2,
    "end": 9296.0,
    "text": "represents each part of your application. So you're going to have a table for all of the users that",
    "textdich": ""
  },
  {
    "start": 9296.0,
    "end": 9300.48,
    "text": "have registered, you're going to have a table for all of the different products that you will plan",
    "textdich": ""
  },
  {
    "start": 9300.48,
    "end": 9305.2,
    "text": "to sell on your website. And then you can have a table for things like purchases and reviews. So",
    "textdich": ""
  },
  {
    "start": 9305.2,
    "end": 9310.88,
    "text": "each table represents a different subject or event in an application. And what's amazing about these",
    "textdich": ""
  },
  {
    "start": 9310.88,
    "end": 9315.2,
    "text": "tables is that all of these tables are going to form some sort of relationship. That's why it's",
    "textdich": ""
  },
  {
    "start": 9315.2,
    "end": 9320.72,
    "text": "referred to as a relational database. And if you think about it, right, the tables that we have",
    "textdich": ""
  },
  {
    "start": 9320.72,
    "end": 9326.64,
    "text": "listed right here, they're all going to have a very basic and obvious relationship, right purchases,",
    "textdich": ""
  },
  {
    "start": 9326.64,
    "end": 9331.2,
    "text": "when a user purchases something that automatically implies a relationship, because every purchase",
    "textdich": ""
  },
  {
    "start": 9331.2,
    "end": 9335.76,
    "text": "order has to be associated with the user account that actually filed that purchase order. And a",
    "textdich": ""
  },
  {
    "start": 9335.76,
    "end": 9340.8,
    "text": "purchase order is going to have a list of products that the user wants to buy. So we could see right",
    "textdich": ""
  },
  {
    "start": 9340.8,
    "end": 9346.0,
    "text": "there, all of the tables that we have already form some sort of relationship. And it's really",
    "textdich": ""
  },
  {
    "start": 9346.0,
    "end": 9350.8,
    "text": "important that when you design your database, that you figure out what are these relationships",
    "textdich": ""
  },
  {
    "start": 9350.8,
    "end": 9356.72,
    "text": "beforehand so that you can design a very efficient database, right, just like if we're building a",
    "textdich": ""
  },
  {
    "start": 9356.72,
    "end": 9361.52,
    "text": "social media application, right, we are you, we know, we're going to have a table for users,",
    "textdich": ""
  },
  {
    "start": 9361.52,
    "end": 9365.76,
    "text": "we're going to have a table for posts as well. And we already know that there's going to be a",
    "textdich": ""
  },
  {
    "start": 9365.76,
    "end": 9370.16,
    "text": "relationship between the two because every post has to be associated with a user because users",
    "textdich": ""
  },
  {
    "start": 9370.16,
    "end": 9375.6,
    "text": "create posts. So you can see that, you know, all data has some sort of relationship with one another.",
    "textdich": ""
  },
  {
    "start": 9376.64,
    "end": 9382.72,
    "text": "Now, when it comes to tables, we have columns, and we have rows, a column represents a different",
    "textdich": ""
  },
  {
    "start": 9382.72,
    "end": 9388.8,
    "text": "attribute. And so if we're building out a table for users, we would create a column for for the",
    "textdich": ""
  },
  {
    "start": 9388.8,
    "end": 9393.76,
    "text": "name. So this column represents the name of the user, we might create a column for their age,",
    "textdich": ""
  },
  {
    "start": 9393.76,
    "end": 9397.92,
    "text": "their gender, you might create another column for the email that they used to sign up, you might",
    "textdich": ""
  },
  {
    "start": 9397.92,
    "end": 9403.28,
    "text": "have a column for their billing or shipping address, right, it's up to you to figure out",
    "textdich": ""
  },
  {
    "start": 9403.28,
    "end": 9409.2,
    "text": "what are the different attributes we need to model a specific user, then we have rows, rows are very",
    "textdich": ""
  },
  {
    "start": 9409.2,
    "end": 9413.52,
    "text": "simple, right, each row represents a different entry in the table. So we have a users table,",
    "textdich": ""
  },
  {
    "start": 9413.52,
    "end": 9420.8,
    "text": "then each row represents a unique user. So row one, this is the user, Vanessa, row two is going",
    "textdich": ""
  },
  {
    "start": 9420.8,
    "end": 9427.04,
    "text": "to be the user Carl. So each row just represents a different entry within the table. Now databases",
    "textdich": ""
  },
  {
    "start": 9427.04,
    "end": 9431.36,
    "text": "have data types, just like any programming language. And the reason why this is important",
    "textdich": ""
  },
  {
    "start": 9431.36,
    "end": 9435.84,
    "text": "is that when you create a column within a table, you need to specify what kind of data type you",
    "textdich": ""
  },
  {
    "start": 9435.84,
    "end": 9440.88,
    "text": "want to use. And that decision is going to be ultimately based off of what attribute this column",
    "textdich": ""
  },
  {
    "start": 9440.88,
    "end": 9446.64,
    "text": "represents. And so we have data types, just like any other programming language like Python.",
    "textdich": ""
  },
  {
    "start": 9446.64,
    "end": 9451.92,
    "text": "And so if we were building out a table for, you know, social media posts, one of the things that",
    "textdich": ""
  },
  {
    "start": 9451.92,
    "end": 9458.24,
    "text": "we might have is a column for what are the total number of likes or retweets. And so for something",
    "textdich": ""
  },
  {
    "start": 9458.24,
    "end": 9463.2,
    "text": "like that, you would want some sort of data type that numerics, you know, a data type that models",
    "textdich": ""
  },
  {
    "start": 9463.2,
    "end": 9468.16,
    "text": "numbers. And in Python, you know, we have two main data types, we have integers, and we have floats,",
    "textdich": ""
  },
  {
    "start": 9468.16,
    "end": 9472.96,
    "text": "integers being whole numbers, floats, giving you decimals, or Postgres has the same thing, right,",
    "textdich": ""
  },
  {
    "start": 9472.96,
    "end": 9477.2,
    "text": "it's going to have integers, it's going to have decimals, and a few others, keep in mind that",
    "textdich": ""
  },
  {
    "start": 9477.2,
    "end": 9480.72,
    "text": "you don't need to worry too much about that, just understand that there are numeric data types within",
    "textdich": ""
  },
  {
    "start": 9480.72,
    "end": 9485.36,
    "text": "Postgres that are just like Python. So when it comes to the number of likes of postgifts,",
    "textdich": ""
  },
  {
    "start": 9485.36,
    "end": 9488.48,
    "text": "you know, maybe we would use something like an integer, because we're not going to have a half",
    "textdich": ""
  },
  {
    "start": 9488.48,
    "end": 9494.88,
    "text": "a like or anything like that. Then if you're trying to model, you know, someone's name or",
    "textdich": ""
  },
  {
    "start": 9494.88,
    "end": 9501.28,
    "text": "email, or address, right, we would use some form of text. And within Python or any programming",
    "textdich": ""
  },
  {
    "start": 9501.28,
    "end": 9505.44,
    "text": "language, you have strings that allow you to represent text. Within Postgres, we have the",
    "textdich": ""
  },
  {
    "start": 9505.44,
    "end": 9509.76,
    "text": "same thing, it's just called something different. We have varchar, which is just short for varying",
    "textdich": ""
  },
  {
    "start": 9509.76,
    "end": 9513.92,
    "text": "character, which is once again, just a string fundamentally. And then we have text, right,",
    "textdich": ""
  },
  {
    "start": 9513.92,
    "end": 9517.04,
    "text": "they're both going to do the same thing, don't worry too much about the differences, just understand",
    "textdich": ""
  },
  {
    "start": 9517.04,
    "end": 9521.6,
    "text": "that Postgres does allow you to work with text, just like any other programming language,",
    "textdich": ""
  },
  {
    "start": 9521.6,
    "end": 9527.68,
    "text": "it's just called something different. And then, for Booleans, Postgres, and Python,",
    "textdich": ""
  },
  {
    "start": 9527.68,
    "end": 9530.56,
    "text": "they both support Booleans, they're going to work the same way, it's either true or false,",
    "textdich": ""
  },
  {
    "start": 9530.56,
    "end": 9536.56,
    "text": "very simple. And then within Python, we have lists. So anytime you want to model, you know,",
    "textdich": ""
  },
  {
    "start": 9536.56,
    "end": 9541.04,
    "text": "multiple instances, or a list of something, we have arrays within Postgres. And you'll see that",
    "textdich": ""
  },
  {
    "start": 9541.04,
    "end": 9545.44,
    "text": "when you work with relational databases, you'll see that arrays aren't used very, very much,",
    "textdich": ""
  },
  {
    "start": 9545.44,
    "end": 9549.6,
    "text": "because a lot of times if you're using an array, it may be better to take that column and just",
    "textdich": ""
  },
  {
    "start": 9549.6,
    "end": 9554.4,
    "text": "convert it into its own table. But like, like I said, you know, don't worry too much about that,",
    "textdich": ""
  },
  {
    "start": 9554.4,
    "end": 9560.96,
    "text": "we'll go over that in some upcoming upcoming lectures. When we create a table, we have to",
    "textdich": ""
  },
  {
    "start": 9560.96,
    "end": 9566.48,
    "text": "specify something called a primary key. And a primary key is a column or a group of columns",
    "textdich": ""
  },
  {
    "start": 9566.48,
    "end": 9571.52,
    "text": "that uniquely identifies each row in a table. But what exactly does that mean? Well, we need to",
    "textdich": ""
  },
  {
    "start": 9571.52,
    "end": 9577.76,
    "text": "tell Postgres essentially, how can we uniquely identify each entry in our table, each row? And",
    "textdich": ""
  },
  {
    "start": 9577.76,
    "end": 9583.44,
    "text": "so we have to give it a special column that ensures that every entry for that specific column is",
    "textdich": ""
  },
  {
    "start": 9583.44,
    "end": 9588.4,
    "text": "unique. And keep in mind that we can only have one primary key per table, you can't have more than",
    "textdich": ""
  },
  {
    "start": 9588.4,
    "end": 9593.44,
    "text": "one. However, a primary key can span multiple columns. However, let's keep things simple for",
    "textdich": ""
  },
  {
    "start": 9593.44,
    "end": 9598.88,
    "text": "now. And just assume that primary keys are really just one column. And so a lot of times when you",
    "textdich": ""
  },
  {
    "start": 9598.88,
    "end": 9605.76,
    "text": "create a table, what we have is a column for a unique identifier. So anytime you create a new",
    "textdich": ""
  },
  {
    "start": 9605.76,
    "end": 9609.84,
    "text": "user, usually you're going to have an ID associated with that account, and that ID is going to be",
    "textdich": ""
  },
  {
    "start": 9609.84,
    "end": 9616.72,
    "text": "unique. And so the ID associated with john is going to be 77498. And that's how we uniquely",
    "textdich": ""
  },
  {
    "start": 9616.72,
    "end": 9622.48,
    "text": "identify each user based off of that ID. And so it makes sense to select that as the primary key,",
    "textdich": ""
  },
  {
    "start": 9622.48,
    "end": 9627.2,
    "text": "because we already know that each ID is going to be unique. So it fits the perfect definition of",
    "textdich": ""
  },
  {
    "start": 9627.2,
    "end": 9632.4,
    "text": "what a primary key is. Right. And so the only requirement for something to be a primary is each",
    "textdich": ""
  },
  {
    "start": 9632.4,
    "end": 9637.76,
    "text": "entry must be unique, no duplicates, we can't have the same ID for another user. And so you're",
    "textdich": ""
  },
  {
    "start": 9637.76,
    "end": 9641.28,
    "text": "probably thinking at this point that hey, we're going to create an ID column for every table and",
    "textdich": ""
  },
  {
    "start": 9641.28,
    "end": 9645.04,
    "text": "then make that the primary key. I'm going to tell you that that's not quite correct.",
    "textdich": ""
  },
  {
    "start": 9646.4,
    "end": 9651.84,
    "text": "The primary key doesn't have to be the ID column always. In fact, your table doesn't even have to",
    "textdich": ""
  },
  {
    "start": 9651.84,
    "end": 9655.76,
    "text": "have an ID column, right? It's up to you to decide if you actually want to have that there's certain",
    "textdich": ""
  },
  {
    "start": 9655.76,
    "end": 9660.72,
    "text": "instances where you may not want an ID column. And so if you don't want to use the ID column,",
    "textdich": ""
  },
  {
    "start": 9660.72,
    "end": 9664.32,
    "text": "or if you don't have an ID column, you need to ensure that you have some column that's",
    "textdich": ""
  },
  {
    "start": 9664.88,
    "end": 9669.68,
    "text": "able to uniquely identify each and every entry. And so one good example of that when sticking to",
    "textdich": ""
  },
  {
    "start": 9669.68,
    "end": 9675.84,
    "text": "the users table example, is that generally in an application, a user can only sign up with an email",
    "textdich": ""
  },
  {
    "start": 9675.84,
    "end": 9681.28,
    "text": "once. So we know that an email is always going to be associated uniquely with one account, right,",
    "textdich": ""
  },
  {
    "start": 9681.28,
    "end": 9684.96,
    "text": "we can't have two users with the same exact email, that's not going to work, that's usually not",
    "textdich": ""
  },
  {
    "start": 9684.96,
    "end": 9691.92,
    "text": "allowed. So we could definitely use our email column as a primary key. But there's plenty of",
    "textdich": ""
  },
  {
    "start": 9691.92,
    "end": 9696.0,
    "text": "other examples, right, phone numbers, right, generally, I can't sign up with the same phone",
    "textdich": ""
  },
  {
    "start": 9696.0,
    "end": 9701.52,
    "text": "number for two different accounts. So we know phone numbers are going to be unique. For the",
    "textdich": ""
  },
  {
    "start": 9701.52,
    "end": 9705.84,
    "text": "guys that are in the United States, you know what a social security number is, two people can't have",
    "textdich": ""
  },
  {
    "start": 9705.84,
    "end": 9710.08,
    "text": "the same exact social security number. And so there's a lot of different things that you can",
    "textdich": ""
  },
  {
    "start": 9710.08,
    "end": 9715.36,
    "text": "use to choose for the primary key. Just keep in mind, it's not always the ID. So that's the main",
    "textdich": ""
  },
  {
    "start": 9715.36,
    "end": 9721.52,
    "text": "thing I wanted to focus on in this slide. Now, as we go through creating our table, and creating",
    "textdich": ""
  },
  {
    "start": 9721.52,
    "end": 9727.36,
    "text": "each of the individual columns that represent a certain attribute for that table, we can add in",
    "textdich": ""
  },
  {
    "start": 9727.36,
    "end": 9733.28,
    "text": "extra constraints for each column. So we can put in extra little conditions. And so we already",
    "textdich": ""
  },
  {
    "start": 9733.28,
    "end": 9737.68,
    "text": "talked about the column that's going to be the primary key. And we know that the primary key has",
    "textdich": ""
  },
  {
    "start": 9737.68,
    "end": 9742.96,
    "text": "to be unique for each and every row. But what happens if we have another column that isn't the",
    "textdich": ""
  },
  {
    "start": 9742.96,
    "end": 9749.44,
    "text": "primary key, but we want to ensure that each and every entry has a unique value for that specific",
    "textdich": ""
  },
  {
    "start": 9749.44,
    "end": 9755.36,
    "text": "column, right? So take a look at the name column. In this case, let's say that we won't allow two",
    "textdich": ""
  },
  {
    "start": 9755.36,
    "end": 9759.6,
    "text": "users to share the same exact name. Is there any way we can tell Postgres to perform that check",
    "textdich": ""
  },
  {
    "start": 9759.6,
    "end": 9764.8,
    "text": "for us? Well, we can add in what's called a unique constraint. So we can when we create the table,",
    "textdich": ""
  },
  {
    "start": 9764.8,
    "end": 9769.04,
    "text": "say that I want to make this column unique by adding the unique constraint. And so that way,",
    "textdich": ""
  },
  {
    "start": 9769.04,
    "end": 9772.72,
    "text": "anytime I add in a new user, it's going to check the name, and it's going to check to make sure",
    "textdich": ""
  },
  {
    "start": 9772.72,
    "end": 9776.96,
    "text": "that there's no other users with the same exact name. And if there is, it's going to throw an",
    "textdich": ""
  },
  {
    "start": 9776.96,
    "end": 9781.52,
    "text": "error. And we can do this with any column, you can do with all your columns, if you wanted to,",
    "textdich": ""
  },
  {
    "start": 9781.52,
    "end": 9784.48,
    "text": "that's not necessarily something you're going to do. But I just want to make sure you guys",
    "textdich": ""
  },
  {
    "start": 9784.48,
    "end": 9790.0,
    "text": "understand that, you know, we can perform extra checks for each entry. By adding in a constraint,",
    "textdich": ""
  },
  {
    "start": 9790.0,
    "end": 9793.6,
    "text": "the first constraint that we covered is the unique constraint, but there are plenty more.",
    "textdich": ""
  },
  {
    "start": 9793.6,
    "end": 9799.04,
    "text": "Now, the next constraint is called the null constraint. And when it comes to creating",
    "textdich": ""
  },
  {
    "start": 9799.04,
    "end": 9806.0,
    "text": "columns, by default, Postgres allows you to leave a column blank, essentially. So I can add in a new",
    "textdich": ""
  },
  {
    "start": 9806.0,
    "end": 9812.08,
    "text": "user. And I can say that I can leave the name column blank. So instead of having Vanessa for",
    "textdich": ""
  },
  {
    "start": 9812.08,
    "end": 9816.48,
    "text": "the first one, I could just leave it blank and not put any data in. And so what Postgres will do is",
    "textdich": ""
  },
  {
    "start": 9816.48,
    "end": 9820.0,
    "text": "it'll put in a value of null because we didn't provide it. And I can do the same thing for age,",
    "textdich": ""
  },
  {
    "start": 9820.0,
    "end": 9824.08,
    "text": "I don't have to pass in an age by default. And I don't have to pass an agenda by default as well.",
    "textdich": ""
  },
  {
    "start": 9824.08,
    "end": 9828.96,
    "text": "And it will put in a null value for each and every one of those. But let's say, we want to tell",
    "textdich": ""
  },
  {
    "start": 9828.96,
    "end": 9834.48,
    "text": "Postgres to perform a check and say, hey, I don't want you to be able to create a user that doesn't",
    "textdich": ""
  },
  {
    "start": 9834.48,
    "end": 9839.12,
    "text": "have an age. So what we can do is we can put in a constraint. And this constraint is called a not",
    "textdich": ""
  },
  {
    "start": 9839.12,
    "end": 9845.36,
    "text": "null. That means we are not going to allow it to be null, right, we are not going to allow Postgres",
    "textdich": ""
  },
  {
    "start": 9845.36,
    "end": 9850.72,
    "text": "to use a null value. So if we try to add in a new user called Carl, and we don't give it an age,",
    "textdich": ""
  },
  {
    "start": 9850.72,
    "end": 9855.68,
    "text": "well, Postgres sees that this column is not allowed to be null, and it's going to throw an error",
    "textdich": ""
  },
  {
    "start": 9855.68,
    "end": 9860.0,
    "text": "because it's not null. So that's the second constraint. And I think these are the two main",
    "textdich": ""
  },
  {
    "start": 9860.0,
    "end": 9864.4,
    "text": "things that I want to focus on. And I think at this point, we have a good enough understanding",
    "textdich": ""
  },
  {
    "start": 9864.4,
    "end": 9868.48,
    "text": "of the different things that we can do with tables, columns and rows, that we can go ahead and start",
    "textdich": ""
  },
  {
    "start": 9868.48,
    "end": 9876.32,
    "text": "playing around with Postgres, and really digging deep into how tables are created and how they work.",
    "textdich": ""
  },
  {
    "start": 9876.32,
    "end": 9880.56,
    "text": "In this video, we'll start taking a look at PG admin, which is the GUI that we use to manage",
    "textdich": ""
  },
  {
    "start": 9880.56,
    "end": 9885.84,
    "text": "our Postgres instance, we'll take a look at how we can define our tables for Postgres, we'll take a",
    "textdich": ""
  },
  {
    "start": 9885.84,
    "end": 9891.28,
    "text": "look at how we can create entries in our database, as well as how to modify and delete them as well.",
    "textdich": ""
  },
  {
    "start": 9891.28,
    "end": 9894.56,
    "text": "So go ahead and search into under your applications for PG admin.",
    "textdich": ""
  },
  {
    "start": 9894.56,
    "end": 9901.36,
    "text": "And you'll see that once it pops up for the first time, it's going to ask you to set the master",
    "textdich": ""
  },
  {
    "start": 9901.36,
    "end": 9906.56,
    "text": "password for PG admin. And it's important to understand that this password is for the PG",
    "textdich": ""
  },
  {
    "start": 9906.56,
    "end": 9911.6,
    "text": "admin GUI, it has nothing to do with the password that you created during the Postgres installation,",
    "textdich": ""
  },
  {
    "start": 9911.6,
    "end": 9917.12,
    "text": "this is strictly for PG admin itself. And the reason to ask for a password is that ultimately,",
    "textdich": ""
  },
  {
    "start": 9917.12,
    "end": 9923.36,
    "text": "we can store our passwords for connecting to our different Postgres instances within PG admin so",
    "textdich": ""
  },
  {
    "start": 9923.36,
    "end": 9927.28,
    "text": "that we don't have to enter it every time we want to connect to our database. And so that's why we",
    "textdich": ""
  },
  {
    "start": 9927.28,
    "end": 9931.52,
    "text": "have to create a master password so that we could store all of the individual passwords for all of",
    "textdich": ""
  },
  {
    "start": 9931.52,
    "end": 9937.36,
    "text": "our Postgres instances. So I'm just going to create a random password in this case. And keep in mind,",
    "textdich": ""
  },
  {
    "start": 9937.36,
    "end": 9942.0,
    "text": "it does not have to match the password that was created for your Postgres instance, these two have",
    "textdich": ""
  },
  {
    "start": 9942.0,
    "end": 9947.28,
    "text": "nothing to do with one another. Now, the first thing that we want to do is specify the connection",
    "textdich": ""
  },
  {
    "start": 9947.28,
    "end": 9952.0,
    "text": "details for connecting to our Postgres instance. And what's nice about PG admin is that we can,",
    "textdich": ""
  },
  {
    "start": 9952.0,
    "end": 9956.08,
    "text": "it'll remember all of the servers that we've ever connected to so that we don't have to manually",
    "textdich": ""
  },
  {
    "start": 9956.08,
    "end": 9961.76,
    "text": "input this information every time we log in. Now, PG admin has done a little bit of the work for us",
    "textdich": ""
  },
  {
    "start": 9961.76,
    "end": 9965.84,
    "text": "automatically. So if you see under the server section, this is where we define our individual",
    "textdich": ""
  },
  {
    "start": 9965.84,
    "end": 9971.2,
    "text": "Postgres instances, just hit the little drop down arrow. And you'll see that there was a",
    "textdich": ""
  },
  {
    "start": 9971.2,
    "end": 9977.44,
    "text": "server called Postgres ql 13 already created for us. So by default, when you install Postgres,",
    "textdich": ""
  },
  {
    "start": 9977.44,
    "end": 9981.52,
    "text": "we know that we're going to have a local Postgres instance running on our local machine. So it's",
    "textdich": ""
  },
  {
    "start": 9981.52,
    "end": 9985.6,
    "text": "going to automatically set up the connection details. For that instance, the only thing you have",
    "textdich": ""
  },
  {
    "start": 9985.6,
    "end": 9990.32,
    "text": "to provide is the password for connecting to that instance. And so now we want to pass in the password",
    "textdich": ""
  },
  {
    "start": 9990.32,
    "end": 9995.6,
    "text": "for the Postgres user for the Postgres instance. And this password isn't the password that we just",
    "textdich": ""
  },
  {
    "start": 9995.6,
    "end": 10000.8,
    "text": "created a few seconds ago, this password is the password for Postgres itself. So this is the one",
    "textdich": ""
  },
  {
    "start": 10000.8,
    "end": 10006.48,
    "text": "we created during the installation process. So go ahead and put that in there. And then you can",
    "textdich": ""
  },
  {
    "start": 10006.48,
    "end": 10012.0,
    "text": "choose to save this password so that you don't have to reenter it. I'm just going to skip that for now.",
    "textdich": ""
  },
  {
    "start": 10012.0,
    "end": 10016.88,
    "text": "And so now it's taken that password, and it's now connected to our local Postgres instance.",
    "textdich": ""
  },
  {
    "start": 10016.88,
    "end": 10022.64,
    "text": "And so you'll see a little bit of information about things like, you know, what's the sessions,",
    "textdich": ""
  },
  {
    "start": 10022.64,
    "end": 10027.52,
    "text": "what are the transactions per second, so you'll see a lot of nice little pretty charts. However,",
    "textdich": ""
  },
  {
    "start": 10027.52,
    "end": 10031.28,
    "text": "I want to make sure that you guys actually understand how to define a new server instance.",
    "textdich": ""
  },
  {
    "start": 10031.28,
    "end": 10034.08,
    "text": "So what we're going to do is we're actually going to create this from scratch. So I'm just going to",
    "textdich": ""
  },
  {
    "start": 10034.08,
    "end": 10039.76,
    "text": "select this, we're going to select remove server. I'm going to do this straight from scratch. So I'll",
    "textdich": ""
  },
  {
    "start": 10039.76,
    "end": 10045.44,
    "text": "do create server. Let's give this a name, I'm going to call this my local Postgres instance,",
    "textdich": ""
  },
  {
    "start": 10045.44,
    "end": 10050.0,
    "text": "because that's what it is local Postgres. Then we have to specify the connection details. So here",
    "textdich": ""
  },
  {
    "start": 10050.0,
    "end": 10056.0,
    "text": "we give the IP address that the Postgres instance runs on. Because this is running on our local",
    "textdich": ""
  },
  {
    "start": 10056.0,
    "end": 10062.08,
    "text": "machine, we can just say localhost. However, if this was running within AWS or some cloud provider,",
    "textdich": ""
  },
  {
    "start": 10062.08,
    "end": 10066.8,
    "text": "that cloud provider would have would provide you a password, sorry, an IP address, or even a domain",
    "textdich": ""
  },
  {
    "start": 10066.8,
    "end": 10069.84,
    "text": "name to connect to. And that's what you would specify here in this case. But since we're",
    "textdich": ""
  },
  {
    "start": 10069.84,
    "end": 10074.16,
    "text": "connecting to our local machine, we just say localhost. Then here we give the Postgres password.",
    "textdich": ""
  },
  {
    "start": 10075.44,
    "end": 10079.2,
    "text": "Right when we did the installation for Postgres, we use the default port. So that's why we could",
    "textdich": ""
  },
  {
    "start": 10079.2,
    "end": 10084.32,
    "text": "just leave this as 5432. And then as I mentioned, when we connect to Postgres, we always have to",
    "textdich": ""
  },
  {
    "start": 10084.32,
    "end": 10089.12,
    "text": "give it a the name of a database to connect to, we always have to provide the name of a database",
    "textdich": ""
  },
  {
    "start": 10089.12,
    "end": 10093.36,
    "text": "to connect to. Since this is a fresh installation, the only database that's going to be there is",
    "textdich": ""
  },
  {
    "start": 10093.36,
    "end": 10097.12,
    "text": "going to be a database named Postgres. So it's going to connect to that by default.",
    "textdich": ""
  },
  {
    "start": 10098.24,
    "end": 10103.84,
    "text": "Then we have to give the username and password. And we haven't created a user yet. So there's",
    "textdich": ""
  },
  {
    "start": 10103.84,
    "end": 10109.12,
    "text": "always one default user, this is a super user. And the username for that user is always Postgres,",
    "textdich": ""
  },
  {
    "start": 10109.12,
    "end": 10114.08,
    "text": "a little confusing, because the database name is Postgres, the name of the actual DBMS is Postgres,",
    "textdich": ""
  },
  {
    "start": 10114.08,
    "end": 10119.52,
    "text": "and then our username is also Postgres. So try not to get all three of those things confused. Then",
    "textdich": ""
  },
  {
    "start": 10119.52,
    "end": 10123.36,
    "text": "here we could save in our password. So this is where we put in our Postgres password.",
    "textdich": ""
  },
  {
    "start": 10124.64,
    "end": 10127.6,
    "text": "And then if you want to save this for a future so that you don't have to enter in every time,",
    "textdich": ""
  },
  {
    "start": 10127.6,
    "end": 10132.32,
    "text": "you can go ahead and do that. At that point, hit Save. And then you can see that once again,",
    "textdich": ""
  },
  {
    "start": 10132.32,
    "end": 10137.28,
    "text": "we created this from scratch. Now within PG admin, there's going to be a lot of menus,",
    "textdich": ""
  },
  {
    "start": 10137.28,
    "end": 10141.44,
    "text": "a lot of things that you see. And you may be a little overwhelmed. But I want you to keep in",
    "textdich": ""
  },
  {
    "start": 10141.44,
    "end": 10146.0,
    "text": "mind that a majority of the stuff we won't really even care about. Alright, so when you focus on",
    "textdich": ""
  },
  {
    "start": 10146.0,
    "end": 10150.08,
    "text": "just things that we care about, you'll see that there aren't many things involved when it comes",
    "textdich": ""
  },
  {
    "start": 10150.08,
    "end": 10156.4,
    "text": "to PG admin. And so like I said, within a Postgres installation, we're going to have individual",
    "textdich": ""
  },
  {
    "start": 10156.4,
    "end": 10160.8,
    "text": "databases, right? So we can create a separate database for each of our applications. So under",
    "textdich": ""
  },
  {
    "start": 10160.8,
    "end": 10164.64,
    "text": "our server, right, you'll see a section called databases. So this looks a little interesting,",
    "textdich": ""
  },
  {
    "start": 10164.64,
    "end": 10170.96,
    "text": "let's click this. And then if we drop this down, or expand this, you'll see that we have our one",
    "textdich": ""
  },
  {
    "start": 10170.96,
    "end": 10176.56,
    "text": "default Postgres instance that was created for us during the installation process. Now we're not",
    "textdich": ""
  },
  {
    "start": 10176.56,
    "end": 10180.0,
    "text": "going to touch this, we're just going to leave this there. But let's create our own Postgres",
    "textdich": ""
  },
  {
    "start": 10180.0,
    "end": 10185.04,
    "text": "instance. So right click on databases, it create, and then database. And then here,",
    "textdich": ""
  },
  {
    "start": 10185.04,
    "end": 10188.64,
    "text": "we just want to give the database a name, I'm going to call this, I usually just name it after",
    "textdich": ""
  },
  {
    "start": 10188.64,
    "end": 10192.64,
    "text": "my application name. So since this project is called fast API, I'm just going to call this my",
    "textdich": ""
  },
  {
    "start": 10192.64,
    "end": 10198.24,
    "text": "fast API database. And you'll see that there's a couple of other windows, we won't touch any of",
    "textdich": ""
  },
  {
    "start": 10198.24,
    "end": 10203.84,
    "text": "these. However, go to the last section right here, where it says SQL. And as I mentioned before,",
    "textdich": ""
  },
  {
    "start": 10203.84,
    "end": 10210.8,
    "text": "SQL is the language that we use to actually talk to Postgres. And, you know, since this GUI is here",
    "textdich": ""
  },
  {
    "start": 10210.8,
    "end": 10214.48,
    "text": "to manage Postgres, it's going to make our life a little bit easier. But at the end of the day,",
    "textdich": ""
  },
  {
    "start": 10215.36,
    "end": 10220.4,
    "text": "it's just passing in SQL statements. And so because we created a database through the GUI,",
    "textdich": ""
  },
  {
    "start": 10221.2,
    "end": 10225.68,
    "text": "it's kind of abstracting a lot of the SQL away from us. However, what's nice about PG admin is",
    "textdich": ""
  },
  {
    "start": 10225.68,
    "end": 10230.88,
    "text": "it's going to give you the underlying SQL that's used to actually create this database. So we could",
    "textdich": ""
  },
  {
    "start": 10230.88,
    "end": 10234.88,
    "text": "see that it's just a command that says create database, and then the name of the database we",
    "textdich": ""
  },
  {
    "start": 10234.88,
    "end": 10240.08,
    "text": "gave it. Here, it's just specifying the owner, the encoding and the connection limit. Technically,",
    "textdich": ""
  },
  {
    "start": 10240.08,
    "end": 10244.96,
    "text": "we could remove all of these lines and just take the semicolon and just put it right here.",
    "textdich": ""
  },
  {
    "start": 10246.0,
    "end": 10250.08,
    "text": "And then we can just do create database fast API. And that's how you do it through the command line.",
    "textdich": ""
  },
  {
    "start": 10250.08,
    "end": 10253.36,
    "text": "I think it's just nice and helpful that it provides this for us. However,",
    "textdich": ""
  },
  {
    "start": 10253.36,
    "end": 10257.36,
    "text": "ultimately, we won't need to do that because we do have PG admin. So we can do it all through the",
    "textdich": ""
  },
  {
    "start": 10257.36,
    "end": 10261.68,
    "text": "GUI. And, you know, if you guys are worried that we're not going to cover SQL, believe me, we will,",
    "textdich": ""
  },
  {
    "start": 10261.68,
    "end": 10266.24,
    "text": "but I just want to make sure we start off by, you know, taking a look at the GUI, learning it the",
    "textdich": ""
  },
  {
    "start": 10266.24,
    "end": 10271.68,
    "text": "easy way, then we'll learn how to do it the harder and proper way. But once we got this set up, go",
    "textdich": ""
  },
  {
    "start": 10271.68,
    "end": 10278.0,
    "text": "ahead and hit Save. And you'll see that we have our new database right now there's an x. But as",
    "textdich": ""
  },
  {
    "start": 10278.0,
    "end": 10282.4,
    "text": "soon as you click on it, it's going to turn yellow, which means that we have now successfully connected",
    "textdich": ""
  },
  {
    "start": 10282.4,
    "end": 10288.48,
    "text": "to this database. And then under this database, you're going to see a lot of different options.",
    "textdich": ""
  },
  {
    "start": 10288.48,
    "end": 10292.72,
    "text": "And like I said, we're not going to touch most of these. Instead, the only thing that we want to",
    "textdich": ""
  },
  {
    "start": 10292.72,
    "end": 10298.48,
    "text": "focus on is under schemas. So under schemas, and then under public, and I'm going to move this over",
    "textdich": ""
  },
  {
    "start": 10298.48,
    "end": 10303.84,
    "text": "for you guys, you'll see that there's one important section called tables. So this is where we actually",
    "textdich": ""
  },
  {
    "start": 10303.84,
    "end": 10309.6,
    "text": "create and define our tables. So right click this. And actually, if we do it, if we hit the dropdown,",
    "textdich": ""
  },
  {
    "start": 10309.6,
    "end": 10312.72,
    "text": "you can see there's no tables, but that's to be expected because this is a brand new database.",
    "textdich": ""
  },
  {
    "start": 10313.76,
    "end": 10317.44,
    "text": "And let's go ahead and create our first table. So we'll do right click, create, and then table.",
    "textdich": ""
  },
  {
    "start": 10319.44,
    "end": 10323.44,
    "text": "And then let's give this our table a name. So let's say we're sticking with the whole ecommerce",
    "textdich": ""
  },
  {
    "start": 10323.44,
    "end": 10328.48,
    "text": "example. So we're going to create a table called products. So this table represents the different",
    "textdich": ""
  },
  {
    "start": 10328.48,
    "end": 10333.52,
    "text": "products that we're going to sell. Don't worry about any of these other fields. It says the",
    "textdich": ""
  },
  {
    "start": 10333.52,
    "end": 10337.84,
    "text": "owner's Postgres because we're logged in as the Postgres user. However, you know, if we logged in",
    "textdich": ""
  },
  {
    "start": 10337.84,
    "end": 10344.32,
    "text": "as a separate user, that then you'd see the owner get updated accordingly. If we go into the column",
    "textdich": ""
  },
  {
    "start": 10344.32,
    "end": 10348.48,
    "text": "section, this is where we define our column. So this is where we're defining what is referred to",
    "textdich": ""
  },
  {
    "start": 10348.48,
    "end": 10356.32,
    "text": "as the schema of the database. So to add a new column, just hit the plus icon. And so now,",
    "textdich": ""
  },
  {
    "start": 10357.04,
    "end": 10361.04,
    "text": "the first thing that we need to do is let's figure out what attributes does a product need.",
    "textdich": ""
  },
  {
    "start": 10361.04,
    "end": 10368.56,
    "text": "And, you know, a product is going to need a name. So let's give it a name. And so we'll call this",
    "textdich": ""
  },
  {
    "start": 10368.56,
    "end": 10375.52,
    "text": "column name because it represents the name of a product. All right, then we have to give it the",
    "textdich": ""
  },
  {
    "start": 10375.52,
    "end": 10380.56,
    "text": "data type, as I mentioned, there's going to be different data types that closely resemble or",
    "textdich": ""
  },
  {
    "start": 10380.56,
    "end": 10384.72,
    "text": "match the data types of a programming language. So a name is going to be, you know, a certain",
    "textdich": ""
  },
  {
    "start": 10384.72,
    "end": 10389.36,
    "text": "amount of text, right? So we need whatever data tape represents text. And so we've got a couple,",
    "textdich": ""
  },
  {
    "start": 10389.36,
    "end": 10394.24,
    "text": "right, we do have text. And then we also have a varying character or character varying,",
    "textdich": ""
  },
  {
    "start": 10394.24,
    "end": 10398.56,
    "text": "this is the one I'm going to ultimately use. So we're going to select character varying.",
    "textdich": ""
  },
  {
    "start": 10398.56,
    "end": 10401.36,
    "text": "If you actually want to see the difference between these, I recommend you go",
    "textdich": ""
  },
  {
    "start": 10402.48,
    "end": 10410.08,
    "text": "online, search search for Postgres data types. Right. And then just it's usually chapter eight",
    "textdich": ""
  },
  {
    "start": 10410.08,
    "end": 10413.68,
    "text": "of the documentation, you can select this. And then this is going to give you a breakdown of",
    "textdich": ""
  },
  {
    "start": 10413.68,
    "end": 10417.92,
    "text": "the different data types. And it's going to break it down based off of, you know, numeric types,",
    "textdich": ""
  },
  {
    "start": 10417.92,
    "end": 10423.92,
    "text": "we've got a date, time, a Booleans enumeration enumerated, we've got, you know, if you want to",
    "textdich": ""
  },
  {
    "start": 10423.92,
    "end": 10428.0,
    "text": "represent IP addresses, we've got a data type for that. So there's a ton of different data types,",
    "textdich": ""
  },
  {
    "start": 10428.64,
    "end": 10433.44,
    "text": "definitely take a quick read over all of these. However, we're just going to stick to the basics.",
    "textdich": ""
  },
  {
    "start": 10433.44,
    "end": 10438.0,
    "text": "So if you don't want to go through all of that, then we'll stick to just the core fundamentals",
    "textdich": ""
  },
  {
    "start": 10438.0,
    "end": 10443.28,
    "text": "for now. Anytime we're working with text, we're going to use character varying. And then as I",
    "textdich": ""
  },
  {
    "start": 10443.28,
    "end": 10450.16,
    "text": "mentioned, we've got a couple of options. So we've got the not null. And so right now it's set to",
    "textdich": ""
  },
  {
    "start": 10450.16,
    "end": 10456.4,
    "text": "no, which means that technically, we can leave this entry blank. So we can create a brand new",
    "textdich": ""
  },
  {
    "start": 10456.4,
    "end": 10461.6,
    "text": "product with no name at all. And then Postgres is going to put in a value of null if we do that.",
    "textdich": ""
  },
  {
    "start": 10461.6,
    "end": 10466.96,
    "text": "But if we think about our application, right, would we really want to be able to create a product",
    "textdich": ""
  },
  {
    "start": 10466.96,
    "end": 10471.36,
    "text": "without a name doesn't really make sense. So I think we should set this to be yes, so that it",
    "textdich": ""
  },
  {
    "start": 10471.36,
    "end": 10475.68,
    "text": "actually throws an error if we try to do that. And you'll see a flag for a primary key. So we",
    "textdich": ""
  },
  {
    "start": 10475.68,
    "end": 10480.56,
    "text": "get to specify which column is ultimately our primary key, I don't think the name of a product",
    "textdich": ""
  },
  {
    "start": 10480.56,
    "end": 10485.76,
    "text": "should be a good primary key, we need the primary key to be a column that really emphasizes what",
    "textdich": ""
  },
  {
    "start": 10485.76,
    "end": 10489.52,
    "text": "makes each entry unique. And I don't think the name actually does that. So we're going to leave",
    "textdich": ""
  },
  {
    "start": 10489.52,
    "end": 10496.48,
    "text": "that set to no for now. And we're going to add a new new column. And this time, we'll add in,",
    "textdich": ""
  },
  {
    "start": 10496.48,
    "end": 10504.56,
    "text": "let's say, the price. And so now we have to specify a data type. So for numeric data types,",
    "textdich": ""
  },
  {
    "start": 10504.56,
    "end": 10508.56,
    "text": "we have an integer, which is going to be whole numbers, which probably isn't a good data type",
    "textdich": ""
  },
  {
    "start": 10508.56,
    "end": 10516.88,
    "text": "for prices, because we need decimals. We do have numeric. And there's a couple of other ones. So",
    "textdich": ""
  },
  {
    "start": 10516.88,
    "end": 10522.96,
    "text": "if we go back to our documentation, hit numeric types, right, we've got numeric. So this allows",
    "textdich": ""
  },
  {
    "start": 10522.96,
    "end": 10528.16,
    "text": "us to specify also decimals as well versus integers. And then we also have floating point",
    "textdich": ""
  },
  {
    "start": 10528.16,
    "end": 10533.04,
    "text": "types as well. Either one of these can be used the they operate a little bit differently. But",
    "textdich": ""
  },
  {
    "start": 10533.04,
    "end": 10537.2,
    "text": "both of them will work. But since we since I want to keep things simple, and I don't want to confuse",
    "textdich": ""
  },
  {
    "start": 10537.2,
    "end": 10541.6,
    "text": "you guys too much, I'm just going to use an integer to define a price. And I know technically",
    "textdich": ""
  },
  {
    "start": 10541.6,
    "end": 10545.28,
    "text": "there's no application that would ever use an integer to represent price. But you know,",
    "textdich": ""
  },
  {
    "start": 10545.28,
    "end": 10549.36,
    "text": "I want to keep this simple. And I actually want to show you guys something unique.",
    "textdich": ""
  },
  {
    "start": 10549.36,
    "end": 10553.6,
    "text": "So you see that there's a couple of different types of integers, we have, first of all, a",
    "textdich": ""
  },
  {
    "start": 10553.6,
    "end": 10559.92,
    "text": "plain old integer, we've got a small int. And then we've got a big end. So what is the difference",
    "textdich": ""
  },
  {
    "start": 10559.92,
    "end": 10564.88,
    "text": "between all of those? Well, it's the number of bits that we have. So a small int has the fewest",
    "textdich": ""
  },
  {
    "start": 10564.88,
    "end": 10569.76,
    "text": "number of bits, which means that the maximum number we can go to is going to be a lot smaller,",
    "textdich": ""
  },
  {
    "start": 10569.76,
    "end": 10574.96,
    "text": "versus a traditional integer. And if we need to go up to a really high value, we're going to use",
    "textdich": ""
  },
  {
    "start": 10574.96,
    "end": 10579.44,
    "text": "big int, which is going to have the most number of bits, right. And if you want a good explanation,",
    "textdich": ""
  },
  {
    "start": 10579.44,
    "end": 10586.88,
    "text": "just search for what is the difference between big int versus int. Right. And so we can see here,",
    "textdich": ""
  },
  {
    "start": 10586.88,
    "end": 10590.64,
    "text": "the difference between them is you can see the minimum value, and you can see the maximum value.",
    "textdich": ""
  },
  {
    "start": 10590.64,
    "end": 10595.36,
    "text": "And so I think that's what minus 2 billion to 2 billion. So we get it in the negative and the",
    "textdich": ""
  },
  {
    "start": 10595.36,
    "end": 10600.08,
    "text": "positive direction versus a big in which nine, negative nine to 9 billion. So you got to figure",
    "textdich": ""
  },
  {
    "start": 10600.08,
    "end": 10604.56,
    "text": "out what's the best fit for you if you don't, if you don't think you'll even hit 2 billion,",
    "textdich": ""
  },
  {
    "start": 10604.56,
    "end": 10609.68,
    "text": "then there's no reason to go to a big int. So I'm just gonna leave this as a plain integer,",
    "textdich": ""
  },
  {
    "start": 10609.68,
    "end": 10613.44,
    "text": "we could definitely get away with a small integer. But let's not worry about that. I don't think",
    "textdich": ""
  },
  {
    "start": 10613.44,
    "end": 10619.76,
    "text": "we're ever gonna have a product that's going to be $2 billion, but that's fine. All right. And then",
    "textdich": ""
  },
  {
    "start": 10619.76,
    "end": 10625.2,
    "text": "once again, we have the not null option. So it doesn't make sense to create a product that",
    "textdich": ""
  },
  {
    "start": 10625.2,
    "end": 10631.76,
    "text": "doesn't have a price. So let's make sure that's not nullable. And then the length and the precision,",
    "textdich": ""
  },
  {
    "start": 10631.76,
    "end": 10636.08,
    "text": "this is for floating points. So you can say like, how many decimals do you want to support it for?",
    "textdich": ""
  },
  {
    "start": 10636.88,
    "end": 10640.72,
    "text": "For an integer, though, it shouldn't matter. And it looks like I didn't properly select this.",
    "textdich": ""
  },
  {
    "start": 10640.72,
    "end": 10648.08,
    "text": "We'll do integer. All right. And then the last thing that we need is each product should have",
    "textdich": ""
  },
  {
    "start": 10648.08,
    "end": 10653.52,
    "text": "a unique ID, right? And like I said, a lot of our tables are going to have an ID column. So here,",
    "textdich": ""
  },
  {
    "start": 10653.52,
    "end": 10658.72,
    "text": "we're going to create a column called ID. And so what kind of data type should we use for this?",
    "textdich": ""
  },
  {
    "start": 10658.72,
    "end": 10663.92,
    "text": "Well, I think what makes sense is an integer, right? An ID is just going to be some random number.",
    "textdich": ""
  },
  {
    "start": 10663.92,
    "end": 10668.88,
    "text": "So we could use int, big int, or small int. And so let's just say we'll use an integer.",
    "textdich": ""
  },
  {
    "start": 10670.48,
    "end": 10675.12,
    "text": "I'm going to search for integer. However, I don't actually want to leave it like this.",
    "textdich": ""
  },
  {
    "start": 10675.92,
    "end": 10681.12,
    "text": "I did mention in one of the previous lectures that most databases support the ability to",
    "textdich": ""
  },
  {
    "start": 10681.12,
    "end": 10686.64,
    "text": "automatically generate a ID for you. So I don't want to have to be a be the one responsible for",
    "textdich": ""
  },
  {
    "start": 10686.64,
    "end": 10691.2,
    "text": "creating an ID and then putting that information into Postgres. I want to just provide the name",
    "textdich": ""
  },
  {
    "start": 10691.2,
    "end": 10697.2,
    "text": "and the price and I want Postgres to generate a unique and random ID for that product. So how do",
    "textdich": ""
  },
  {
    "start": 10697.2,
    "end": 10704.64,
    "text": "we do that? Well, it's pretty easy. There's a there's a data type called serial. And so a serial",
    "textdich": ""
  },
  {
    "start": 10704.64,
    "end": 10713.04,
    "text": "is just a regular integer. However, it automatically creates a random number. And it's actually not a",
    "textdich": ""
  },
  {
    "start": 10713.04,
    "end": 10718.72,
    "text": "random number. What it does is the first product we create will get a value of one. The second one",
    "textdich": ""
  },
  {
    "start": 10718.72,
    "end": 10722.72,
    "text": "will get a value of two, and it'll just increment by one for each product we add. So it's going to",
    "textdich": ""
  },
  {
    "start": 10722.72,
    "end": 10728.72,
    "text": "ensure that every single product we create gets a unique integer value for the ID column. And like",
    "textdich": ""
  },
  {
    "start": 10728.72,
    "end": 10733.68,
    "text": "I said, you know, we do have, you know, small ints, big ints, and regular integers, this is the same",
    "textdich": ""
  },
  {
    "start": 10733.68,
    "end": 10737.68,
    "text": "thing, but it's just auto incrementing for those three kinds. So I'm just going to say it's going",
    "textdich": ""
  },
  {
    "start": 10737.68,
    "end": 10744.32,
    "text": "to be a regular integer that increments by one automatically. And then this is going to be what's",
    "textdich": ""
  },
  {
    "start": 10744.32,
    "end": 10748.72,
    "text": "going to be the primary key, right? We know that the ID has to be unique, I think that makes sense",
    "textdich": ""
  },
  {
    "start": 10748.72,
    "end": 10755.36,
    "text": "to make it the primary key. And I think for now, this is a good enough starting point to learn about",
    "textdich": ""
  },
  {
    "start": 10755.36,
    "end": 10760.8,
    "text": "SQL and Postgres in general. So let's save this. And we have then successfully created our first",
    "textdich": ""
  },
  {
    "start": 10760.8,
    "end": 10766.48,
    "text": "table. And so under tables, you'll now see our products table. So let's start playing with this",
    "textdich": ""
  },
  {
    "start": 10766.48,
    "end": 10770.32,
    "text": "product table, let's create entries, let's delete entries, let's really start to have fun with it.",
    "textdich": ""
  },
  {
    "start": 10770.96,
    "end": 10778.16,
    "text": "So right click on it. And select view, edit data. And then you really select any one of these,",
    "textdich": ""
  },
  {
    "start": 10778.16,
    "end": 10782.4,
    "text": "if you select all rows, what it's going to do is, it's going to fetch every single entry that we",
    "textdich": ""
  },
  {
    "start": 10782.4,
    "end": 10786.4,
    "text": "have in the database and show it to you. We don't have anything in the database. So doesn't really",
    "textdich": ""
  },
  {
    "start": 10786.4,
    "end": 10791.44,
    "text": "matter. If you select first 100 rows, it's going to grab the first 100 rows in the database. And",
    "textdich": ""
  },
  {
    "start": 10791.44,
    "end": 10796.16,
    "text": "if you select last 100 rows, it's going to grab the last 100. Now, if this was a production server",
    "textdich": ""
  },
  {
    "start": 10796.16,
    "end": 10800.24,
    "text": "or something like that, we might have millions of entries. So you may not want to do all rows and",
    "textdich": ""
  },
  {
    "start": 10800.24,
    "end": 10804.56,
    "text": "then just get flooded with all of this data. So you may want to select one of these or filter out",
    "textdich": ""
  },
  {
    "start": 10804.56,
    "end": 10808.56,
    "text": "the rows based off of some criteria. But we have no actual data on it. So I'm just gonna select all",
    "textdich": ""
  },
  {
    "start": 10808.56,
    "end": 10816.24,
    "text": "rows. And you'll see that within PG admin, we have these different tabs. So it opened up a new tab.",
    "textdich": ""
  },
  {
    "start": 10816.24,
    "end": 10819.6,
    "text": "And you see that there's like a little pop up window. So if you can pause it and rewind,",
    "textdich": ""
  },
  {
    "start": 10819.6,
    "end": 10825.04,
    "text": "it says that it actually ran a query. And so what it did is it ran a query to retrieve all that all",
    "textdich": ""
  },
  {
    "start": 10825.04,
    "end": 10829.76,
    "text": "the rows because that's what I selected, right? I say like, I selected, you know, get me all of the",
    "textdich": ""
  },
  {
    "start": 10829.76,
    "end": 10835.92,
    "text": "all of the rows by selecting all rows. And if you look at this query editor right here,",
    "textdich": ""
  },
  {
    "start": 10835.92,
    "end": 10842.32,
    "text": "this is the actual underlying SQL that it ran. So it ran select star from my products table order",
    "textdich": ""
  },
  {
    "start": 10842.32,
    "end": 10847.76,
    "text": "by ID in an ascending fashion. So it's going to grab the first product with the lowest ID number,",
    "textdich": ""
  },
  {
    "start": 10847.76,
    "end": 10851.92,
    "text": "and the next product with the second lowest ID number, and it's going to keep incrementing up,",
    "textdich": ""
  },
  {
    "start": 10851.92,
    "end": 10854.72,
    "text": "we've got nothing in our database. So it didn't return anything. But I think it's cool that it",
    "textdich": ""
  },
  {
    "start": 10854.72,
    "end": 10859.2,
    "text": "does show us the underlying SQL. Now, like I said, we don't have anything in our database",
    "textdich": ""
  },
  {
    "start": 10859.2,
    "end": 10864.56,
    "text": "at the moment. So let's go ahead and create our first entry. And so I'm going to create select",
    "textdich": ""
  },
  {
    "start": 10864.56,
    "end": 10868.24,
    "text": "this column, and I'm just going to give it a name. So this is going to be a let's say a TV.",
    "textdich": ""
  },
  {
    "start": 10871.2,
    "end": 10879.04,
    "text": "And let's give it a price, I'll say this is $200. And then the ID, this is going to be",
    "textdich": ""
  },
  {
    "start": 10879.04,
    "end": 10883.04,
    "text": "automatically generated. So we don't need to provide a value. And so at this point,",
    "textdich": ""
  },
  {
    "start": 10883.04,
    "end": 10887.44,
    "text": "you may be thinking, well, it looks like we created an entry, right? We have our TV price of 200.",
    "textdich": ""
  },
  {
    "start": 10887.44,
    "end": 10892.96,
    "text": "Well, not exactly. To actually store this data in the database, right now, we're just proposing",
    "textdich": ""
  },
  {
    "start": 10892.96,
    "end": 10897.6,
    "text": "changes, we have to select this button right here. So if you hover over this, this says save",
    "textdich": ""
  },
  {
    "start": 10897.6,
    "end": 10902.16,
    "text": "data changes. So when you select this, this is actually going to push this data into the database.",
    "textdich": ""
  },
  {
    "start": 10902.16,
    "end": 10907.44,
    "text": "So let's do that. You can see that the data was saved successfully. And now it's actually in here,",
    "textdich": ""
  },
  {
    "start": 10907.44,
    "end": 10913.28,
    "text": "in the database. So let's create a new entry. I'll say this is a DVD player. I don't know",
    "textdich": ""
  },
  {
    "start": 10913.28,
    "end": 10918.32,
    "text": "if anyone uses these anymore. And then let's give this a price, I'll say this is $80.",
    "textdich": ""
  },
  {
    "start": 10920.96,
    "end": 10925.6,
    "text": "And then we can we can just keep adding as many as we want. So let's add in a remote",
    "textdich": ""
  },
  {
    "start": 10927.68,
    "end": 10934.56,
    "text": "is going to be 10 bucks. And you'll see that anything that's kind of bolded, so you notice",
    "textdich": ""
  },
  {
    "start": 10934.56,
    "end": 10939.04,
    "text": "how TV isn't as bold as DVD and remote. So bolded means we haven't actually pushed it out to the",
    "textdich": ""
  },
  {
    "start": 10939.04,
    "end": 10943.44,
    "text": "database, it's just proposed changes. So we can push out both of these at the same time by pressing",
    "textdich": ""
  },
  {
    "start": 10943.44,
    "end": 10947.2,
    "text": "this again. So we push that and then you can see that they got pushed out and take a look at the",
    "textdich": ""
  },
  {
    "start": 10947.2,
    "end": 10951.92,
    "text": "ID column, right? The first item got an ID of one, the second one got an ID of two, and then three,",
    "textdich": ""
  },
  {
    "start": 10951.92,
    "end": 10956.56,
    "text": "and it just keeps it's just going to keep incrementing. Now, let's have a little fun.",
    "textdich": ""
  },
  {
    "start": 10956.56,
    "end": 10960.32,
    "text": "Let's create a new item. This time, let's create let's make it a microphone or something.",
    "textdich": ""
  },
  {
    "start": 10960.32,
    "end": 10965.76,
    "text": "And let's leave this price column blank. And let's see what happens. What? So now if I press this,",
    "textdich": ""
  },
  {
    "start": 10965.76,
    "end": 10972.4,
    "text": "take a look at this error, null value in column price. So we left this value empty. So Postgres",
    "textdich": ""
  },
  {
    "start": 10972.4,
    "end": 10977.36,
    "text": "interpreted as null, but we set the column to be not null. So we told posters to do a check and say,",
    "textdich": ""
  },
  {
    "start": 10977.36,
    "end": 10982.16,
    "text": "Hey, listen, if we ever don't provide a value, we want you to throw an error. So this is forcing us",
    "textdich": ""
  },
  {
    "start": 10982.16,
    "end": 10987.84,
    "text": "to provide a value for this because creating a product without a price just doesn't seem to",
    "textdich": ""
  },
  {
    "start": 10987.84,
    "end": 10996.24,
    "text": "make sense. So let's give this a price. Save that. And so now that worked. And then this time,",
    "textdich": ""
  },
  {
    "start": 10996.24,
    "end": 11004.08,
    "text": "let's try creating a product with a price. But no name this time, right? So what do you expect to",
    "textdich": ""
  },
  {
    "start": 11004.08,
    "end": 11010.64,
    "text": "happen? Well, since we set the column to be not null, it's going to throw an error or it should",
    "textdich": ""
  },
  {
    "start": 11010.64,
    "end": 11016.08,
    "text": "hopefully. And look at that, null value and column name. So once again, it's not going to be",
    "textdich": ""
  },
  {
    "start": 11016.08,
    "end": 11020.08,
    "text": "supported. And it's gonna throw an error. So let's just give it name. Let's say this is a car,",
    "textdich": ""
  },
  {
    "start": 11020.08,
    "end": 11027.76,
    "text": "the world's cheapest car, hit, okay, save that. That's been successfully added. Alright, so now",
    "textdich": ""
  },
  {
    "start": 11027.76,
    "end": 11031.28,
    "text": "that we've kind of played around with it a little bit, let's make this a little bit more interesting.",
    "textdich": ""
  },
  {
    "start": 11031.28,
    "end": 11036.24,
    "text": "And let's add in a brand new column to our products table. So right click on the products table",
    "textdich": ""
  },
  {
    "start": 11036.24,
    "end": 11040.56,
    "text": "right here and select properties. Then under columns, we're going to add in a brand new column.",
    "textdich": ""
  },
  {
    "start": 11040.56,
    "end": 11045.2,
    "text": "So we're just going to follow the same steps. And this column is going to represent if a",
    "textdich": ""
  },
  {
    "start": 11045.2,
    "end": 11049.68,
    "text": "an item is on sale. So I'm gonna call this is underscore bull. Sorry, not is underscore bull,",
    "textdich": ""
  },
  {
    "start": 11049.68,
    "end": 11053.84,
    "text": "it's going to be is underscore sale. And it's going to be a simple Boolean as a data type,",
    "textdich": ""
  },
  {
    "start": 11053.84,
    "end": 11057.6,
    "text": "because they are going to be set to true, which means the items on sale, or false that the item",
    "textdich": ""
  },
  {
    "start": 11057.6,
    "end": 11062.16,
    "text": "is not on sale. So we'll do Boolean. And then everything else, we're just going to leave",
    "textdich": ""
  },
  {
    "start": 11062.16,
    "end": 11068.56,
    "text": "the by default. So for not null, we're going to leave this to be no, so we are going to allow",
    "textdich": ""
  },
  {
    "start": 11068.56,
    "end": 11074.32,
    "text": "the user to input a value of null in this case. However, what we're going to do is we're going",
    "textdich": ""
  },
  {
    "start": 11074.32,
    "end": 11081.6,
    "text": "to add in an extra constraint, I guess, actually, we're not going to we're going to set a default",
    "textdich": ""
  },
  {
    "start": 11081.6,
    "end": 11087.2,
    "text": "value. So if the user does not provide a value for is underscore sale, we're going to give it a",
    "textdich": ""
  },
  {
    "start": 11087.2,
    "end": 11091.68,
    "text": "default value and say that by default, if a product doesn't receive a property for a sale,",
    "textdich": ""
  },
  {
    "start": 11091.68,
    "end": 11100.24,
    "text": "it's going to be set to false. So it's not going to be on sale. So let's hit save. All right. And",
    "textdich": ""
  },
  {
    "start": 11100.24,
    "end": 11104.64,
    "text": "then right now, you don't see a new column. But that's because you don't see the new is on sale",
    "textdich": ""
  },
  {
    "start": 11104.64,
    "end": 11109.2,
    "text": "column. But that's just because we need to refresh this page. So let's go under object, I think we",
    "textdich": ""
  },
  {
    "start": 11109.2,
    "end": 11116.72,
    "text": "could do it here. I think it should be a refresh. I didn't do anything. So I think we're just going",
    "textdich": ""
  },
  {
    "start": 11116.72,
    "end": 11121.68,
    "text": "to do the same thing as we did before. There should be a way to refresh this. But it looks like if I",
    "textdich": ""
  },
  {
    "start": 11121.68,
    "end": 11125.84,
    "text": "just press it here, it doesn't do anything. So instead, I'm just going to do a view, edit data,",
    "textdich": ""
  },
  {
    "start": 11125.84,
    "end": 11132.0,
    "text": "all rows again, it's gonna open up a brand new tab. And now we can see the is underscore sale",
    "textdich": ""
  },
  {
    "start": 11132.0,
    "end": 11138.16,
    "text": "column here. And what's awesome about this is that because I provided a default value, it went",
    "textdich": ""
  },
  {
    "start": 11138.16,
    "end": 11142.4,
    "text": "to all of the other items in my database that didn't that were created before this column was",
    "textdich": ""
  },
  {
    "start": 11142.4,
    "end": 11147.2,
    "text": "created. And it provided the value of false because I said, Listen, if, if the value is null,",
    "textdich": ""
  },
  {
    "start": 11147.2,
    "end": 11151.6,
    "text": "or if we didn't provide that data, go ahead and put in the default value of false. And so now if",
    "textdich": ""
  },
  {
    "start": 11151.6,
    "end": 11159.52,
    "text": "I create a brand new item, and I'll say this is for a pencil, and the pencil is probably only $2.",
    "textdich": ""
  },
  {
    "start": 11160.4,
    "end": 11166.96,
    "text": "Now, since this can be set to null, I'm going to just leave that blank. And now if I save this,",
    "textdich": ""
  },
  {
    "start": 11166.96,
    "end": 11171.2,
    "text": "take a look at this, it gets the default value that we provided. So you'll see that for a lot of",
    "textdich": ""
  },
  {
    "start": 11171.2,
    "end": 11175.2,
    "text": "your columns, you're going to want to provide default values, if you expect it to be frequently",
    "textdich": ""
  },
  {
    "start": 11175.2,
    "end": 11179.84,
    "text": "inputted without a value, and you want it to receive a default value. And now once again,",
    "textdich": ""
  },
  {
    "start": 11179.84,
    "end": 11184.56,
    "text": "I'm going to actually create a brand new column once more. And then we'll go to properties,",
    "textdich": ""
  },
  {
    "start": 11184.56,
    "end": 11192.16,
    "text": "we'll go to columns. And then we'll add a column. And we'll call this column inventory. So this is",
    "textdich": ""
  },
  {
    "start": 11192.16,
    "end": 11197.12,
    "text": "how many of the items that we have in stock. And so here, I'm going to this is going to be an",
    "textdich": ""
  },
  {
    "start": 11197.12,
    "end": 11205.92,
    "text": "integer. And I think it makes sense for in our application to have a, a value for our inventory,",
    "textdich": ""
  },
  {
    "start": 11205.92,
    "end": 11211.2,
    "text": "we shouldn't leave it now. So I'm gonna set it to yes. And I want you guys to see what happens",
    "textdich": ""
  },
  {
    "start": 11211.2,
    "end": 11217.44,
    "text": "when we hit save. Because the big issue is, right, this column doesn't exist at the moment. And so",
    "textdich": ""
  },
  {
    "start": 11217.44,
    "end": 11222.16,
    "text": "all of these items were created before there was an inventory column that was created. However,",
    "textdich": ""
  },
  {
    "start": 11222.16,
    "end": 11228.88,
    "text": "this column has a not null value, but it doesn't have a default value, right, we gave his sale a",
    "textdich": ""
  },
  {
    "start": 11228.88,
    "end": 11233.2,
    "text": "default value. So Postgres was smart enough to go into all of these pre existing items, and give",
    "textdich": ""
  },
  {
    "start": 11233.2,
    "end": 11236.8,
    "text": "it a value of false. Well, what's going to happen with the inventory, I didn't give it a default",
    "textdich": ""
  },
  {
    "start": 11236.8,
    "end": 11241.6,
    "text": "value. So let's see what happens. If I hit save, eight, there was an error, it says column inventory",
    "textdich": ""
  },
  {
    "start": 11241.6,
    "end": 11245.12,
    "text": "of relation products contains null value. So it's basically saying all of these products that you",
    "textdich": ""
  },
  {
    "start": 11245.12,
    "end": 11252.24,
    "text": "had before, don't have a value for inventory. So at this point, you know, you have a couple of",
    "textdich": ""
  },
  {
    "start": 11252.24,
    "end": 11261.2,
    "text": "different options, you could delete your all of the previous products if you wanted to. And since",
    "textdich": ""
  },
  {
    "start": 11261.2,
    "end": 11264.16,
    "text": "this is a development environment, that's not a big deal. If you're in a production environment,",
    "textdich": ""
  },
  {
    "start": 11264.16,
    "end": 11268.64,
    "text": "that could lead to issues, obviously, you don't want to delete your production data. So we could",
    "textdich": ""
  },
  {
    "start": 11268.64,
    "end": 11273.36,
    "text": "just give it a default value like we did before. And so I can just go back into const Whoops, not",
    "textdich": ""
  },
  {
    "start": 11273.36,
    "end": 11277.92,
    "text": "there, we want to select this little button, go into constraints, and we'll say the default value",
    "textdich": ""
  },
  {
    "start": 11277.92,
    "end": 11289.04,
    "text": "is mostly there's gonna be zero items. So let's hit save. And once again, I'm just going to open",
    "textdich": ""
  },
  {
    "start": 11289.04,
    "end": 11294.72,
    "text": "this up, I still don't know how to refresh it. I know there has to be a way. I can't find it. So",
    "textdich": ""
  },
  {
    "start": 11294.72,
    "end": 11299.6,
    "text": "it's okay, we could just open up this again. And then we can just delete these, I don't want too",
    "textdich": ""
  },
  {
    "start": 11299.6,
    "end": 11309.2,
    "text": "many of these. And I don't know why it's got squished up like that. But because we provided a",
    "textdich": ""
  },
  {
    "start": 11309.2,
    "end": 11315.44,
    "text": "default value, it all it got all values of zero. And so now if I create a brand new item, and I'll",
    "textdich": ""
  },
  {
    "start": 11315.44,
    "end": 11325.92,
    "text": "call this one, this will be a pencil sharpener. We'll give a price of $4 is sale, also to be true.",
    "textdich": ""
  },
  {
    "start": 11325.92,
    "end": 11336.88,
    "text": "That's true. And then if we don't provide an inventory, it's gonna get that default value of",
    "textdich": ""
  },
  {
    "start": 11336.88,
    "end": 11342.8,
    "text": "zero. Alright, so I think we've almost wrapped up our schema for our products table. However,",
    "textdich": ""
  },
  {
    "start": 11342.8,
    "end": 11348.0,
    "text": "I want to add one more thing. And this is something that's pretty common. Anytime you create an entry",
    "textdich": ""
  },
  {
    "start": 11348.0,
    "end": 11352.72,
    "text": "within almost any other table, you usually want some sort of timestamp, right? So what when did",
    "textdich": ""
  },
  {
    "start": 11352.72,
    "end": 11359.2,
    "text": "we add this product? When did this user create as account? When did this user create this post,",
    "textdich": ""
  },
  {
    "start": 11359.2,
    "end": 11363.68,
    "text": "right? So anything that we add into our database or an application, it is generally best practice",
    "textdich": ""
  },
  {
    "start": 11363.68,
    "end": 11368.48,
    "text": "to store when that item was created, because you never know when you need to know that information.",
    "textdich": ""
  },
  {
    "start": 11368.48,
    "end": 11373.12,
    "text": "So let's create another column. And let's see how we can work with timestamps. So I'm going to",
    "textdich": ""
  },
  {
    "start": 11373.12,
    "end": 11378.72,
    "text": "right click on products as usual, go to properties. And then under columns, we're going to add in a",
    "textdich": ""
  },
  {
    "start": 11378.72,
    "end": 11387.6,
    "text": "new column. And we'll call this column created that. And then here, we have to select something",
    "textdich": ""
  },
  {
    "start": 11387.6,
    "end": 11394.32,
    "text": "that represents time. So what I recommend you guys do is just go to the documentation. And then look",
    "textdich": ""
  },
  {
    "start": 11394.32,
    "end": 11399.92,
    "text": "at date time types. So there's a couple of different ones, but we're going to do is timestamp",
    "textdich": ""
  },
  {
    "start": 11399.92,
    "end": 11404.32,
    "text": "with timezone. So we got timestamp without timezone, and then timestamp with timezone,",
    "textdich": ""
  },
  {
    "start": 11404.32,
    "end": 11408.64,
    "text": "we've got just the date, and then we've got just the time, but I want the date, time and the time",
    "textdich": ""
  },
  {
    "start": 11408.64,
    "end": 11415.92,
    "text": "zone. So that's the most detailed. So I'm just gonna search for timestamp. And we want timestamp",
    "textdich": ""
  },
  {
    "start": 11415.92,
    "end": 11423.28,
    "text": "with timezone. All right, and we obviously want this field always filled in. However,",
    "textdich": ""
  },
  {
    "start": 11423.28,
    "end": 11429.2,
    "text": "I don't want to have fast API API be responsible for creating the timestamp, I want Postgres",
    "textdich": ""
  },
  {
    "start": 11429.2,
    "end": 11433.84,
    "text": "to automatically create the timestamp for when the entry was created. So I want to be able to",
    "textdich": ""
  },
  {
    "start": 11433.84,
    "end": 11437.36,
    "text": "just create a product. And then as soon as it gets added to our database, Postgres will just",
    "textdich": ""
  },
  {
    "start": 11437.36,
    "end": 11442.32,
    "text": "fill it in with whatever that current time is. So how do we do that? Well, we can go into",
    "textdich": ""
  },
  {
    "start": 11442.32,
    "end": 11447.44,
    "text": "this right here. So let's configure this add a constraint. And then here, all we have to do is",
    "textdich": ""
  },
  {
    "start": 11447.44,
    "end": 11452.72,
    "text": "for the default value, I want you to just write now. So what this is going to do is the default",
    "textdich": ""
  },
  {
    "start": 11452.72,
    "end": 11459.2,
    "text": "value for any product that gets added, it's going to run this specific command on the CLI. So this",
    "textdich": ""
  },
  {
    "start": 11459.2,
    "end": 11464.08,
    "text": "command just grabs what is the current time, pretty simple, right? Now, I think it's pretty straightforward,",
    "textdich": ""
  },
  {
    "start": 11464.08,
    "end": 11469.44,
    "text": "what is how what time is it now, right? And so this will set the default value. So if I hit save",
    "textdich": ""
  },
  {
    "start": 11469.44,
    "end": 11474.56,
    "text": "at this point, right, since we had all of these other items that were created previously before",
    "textdich": ""
  },
  {
    "start": 11474.56,
    "end": 11478.64,
    "text": "there's a timestamp, what it's going to do is it's going to set the create a time to whatever time it",
    "textdich": ""
  },
  {
    "start": 11478.64,
    "end": 11483.6,
    "text": "is now, which technically, that's not accurate, because that's not when they were added. But",
    "textdich": ""
  },
  {
    "start": 11483.6,
    "end": 11487.12,
    "text": "these were created before we were smart enough to actually have a timestamp. So",
    "textdich": ""
  },
  {
    "start": 11487.84,
    "end": 11491.36,
    "text": "if we refresh this, so I'm just going to do a view edit all rows again.",
    "textdich": ""
  },
  {
    "start": 11493.84,
    "end": 11498.32,
    "text": "Right, you can see that they've all been given the same timestamp of whatever that current time was.",
    "textdich": ""
  },
  {
    "start": 11498.96,
    "end": 11502.64,
    "text": "And now if we add in a new item, and I'll add in how about a keyboard,",
    "textdich": ""
  },
  {
    "start": 11502.64,
    "end": 11512.24,
    "text": "we'll give this a price of 28 is sale, we can just leave that empty, how many in our inventory,",
    "textdich": ""
  },
  {
    "start": 11512.24,
    "end": 11518.0,
    "text": "we'll give it 50. And then we leave this blank. And so let's see if it automatically fills in",
    "textdich": ""
  },
  {
    "start": 11518.0,
    "end": 11522.24,
    "text": "what is the current time and it should be later than this time, obviously. So let's save. And so",
    "textdich": ""
  },
  {
    "start": 11522.24,
    "end": 11527.2,
    "text": "if we just double check, yep, we could see that this is about a minute later. And so now we've",
    "textdich": ""
  },
  {
    "start": 11527.2,
    "end": 11533.44,
    "text": "successfully added the created at timestamp. In this lesson, we'll run our first SQL command.",
    "textdich": ""
  },
  {
    "start": 11533.44,
    "end": 11537.68,
    "text": "However, before we do that, what I want you guys to do is create a few more entries within your",
    "textdich": ""
  },
  {
    "start": 11537.68,
    "end": 11543.68,
    "text": "database. And so you could see that off camera, I added about, you know, six or seven more entries.",
    "textdich": ""
  },
  {
    "start": 11543.68,
    "end": 11549.44,
    "text": "And you want to make sure that you provide enough varying data to your database. So make sure,",
    "textdich": ""
  },
  {
    "start": 11549.44,
    "end": 11553.28,
    "text": "you know, the price is all different, make sure that the is sale Boolean is, you know,",
    "textdich": ""
  },
  {
    "start": 11553.28,
    "end": 11557.76,
    "text": "a good mix of true or false, make sure that the inventory numbers vary enough, and then try to",
    "textdich": ""
  },
  {
    "start": 11557.76,
    "end": 11562.24,
    "text": "create them at different times as well. If you can do that, that way, when we actually go to make",
    "textdich": ""
  },
  {
    "start": 11562.24,
    "end": 11566.64,
    "text": "queries, we can see a variety of different output. And that won't happen if you only have three to",
    "textdich": ""
  },
  {
    "start": 11566.64,
    "end": 11573.68,
    "text": "four entries. But once you do that, we should be ready to start our first query. And what we want",
    "textdich": ""
  },
  {
    "start": 11573.68,
    "end": 11578.64,
    "text": "to do is right click on your database. So my database is called past API, and then select",
    "textdich": ""
  },
  {
    "start": 11578.64,
    "end": 11583.52,
    "text": "query tool. So that's going to open up a brand new tab. And what we can do is we can run our query",
    "textdich": ""
  },
  {
    "start": 11583.52,
    "end": 11587.44,
    "text": "from here. So here we type out our query. And then we just hit the play button. And that's going to",
    "textdich": ""
  },
  {
    "start": 11587.44,
    "end": 11592.72,
    "text": "run our query. So how do we make a query within a SQL database? So first of all, let's start off",
    "textdich": ""
  },
  {
    "start": 11592.72,
    "end": 11596.72,
    "text": "with the most basic query, I'm going to type it out. And then after we type it out and run it,",
    "textdich": ""
  },
  {
    "start": 11596.72,
    "end": 11602.16,
    "text": "I'm going to explain to you exactly what each part of the command actually does. But here,",
    "textdich": ""
  },
  {
    "start": 11602.16,
    "end": 11611.12,
    "text": "we'll do select star from products, colon, then once we've typed this out, what we can do is just",
    "textdich": ""
  },
  {
    "start": 11611.12,
    "end": 11615.04,
    "text": "hit the play button. And let's see what happens. So this is going to run the query, we got the same",
    "textdich": ""
  },
  {
    "start": 11615.04,
    "end": 11620.72,
    "text": "output here, saying that it successfully ran. And it says 13 rows affected. And so what we can see",
    "textdich": ""
  },
  {
    "start": 11620.72,
    "end": 11627.2,
    "text": "here is it just printed out every single entry within our products table. Now we only have one",
    "textdich": ""
  },
  {
    "start": 11627.2,
    "end": 11631.52,
    "text": "table. So it's essentially just dumping out the entire database. But if we had more tables, you",
    "textdich": ""
  },
  {
    "start": 11631.52,
    "end": 11636.96,
    "text": "would see that this would only print out whatever was in our products table. So this command right",
    "textdich": ""
  },
  {
    "start": 11636.96,
    "end": 11641.12,
    "text": "here does one simple thing. And that is, it's going to give us every single row within the",
    "textdich": ""
  },
  {
    "start": 11641.12,
    "end": 11645.44,
    "text": "products database. So let's actually break this down. So first of all, we start this command with",
    "textdich": ""
  },
  {
    "start": 11645.44,
    "end": 11650.0,
    "text": "select. So we're basically saying, hey, I want to select these rows. Ignore this for now, we're",
    "textdich": ""
  },
  {
    "start": 11650.0,
    "end": 11655.92,
    "text": "going to come back to this. And then what we do is we run from, and then products. And so you say,",
    "textdich": ""
  },
  {
    "start": 11655.92,
    "end": 11660.96,
    "text": "what table you ultimately want to run this command for. So you say from, and then the table name.",
    "textdich": ""
  },
  {
    "start": 11660.96,
    "end": 11664.88,
    "text": "And then it's going to run that query against that table. If we had a table called users,",
    "textdich": ""
  },
  {
    "start": 11664.88,
    "end": 11670.8,
    "text": "and we wanted to get every user, we could do select star from users, no different, right. So",
    "textdich": ""
  },
  {
    "start": 11670.8,
    "end": 11675.84,
    "text": "it's just a matter of providing your specific table name. So every query is going to be with",
    "textdich": ""
  },
  {
    "start": 11675.84,
    "end": 11681.6,
    "text": "regards to some table. And the thing about SQL is every single command is going to end with a semi",
    "textdich": ""
  },
  {
    "start": 11681.6,
    "end": 11686.48,
    "text": "colon. So if I don't put the semi colon, it's not going to do anything. Well, in this case,",
    "textdich": ""
  },
  {
    "start": 11686.48,
    "end": 11690.08,
    "text": "it actually ended up working. But that's just because we're using pg admin. If you did this",
    "textdich": ""
  },
  {
    "start": 11690.08,
    "end": 11695.04,
    "text": "in the command line, it wouldn't have worked. So remember semi colon at the end of every command.",
    "textdich": ""
  },
  {
    "start": 11696.0,
    "end": 11701.04,
    "text": "Now let's talk about what this star or asterisk actually does. And so you could see by default,",
    "textdich": ""
  },
  {
    "start": 11701.04,
    "end": 11706.64,
    "text": "we get every row and that's coming from this part of the command. But what does this do? Well,",
    "textdich": ""
  },
  {
    "start": 11706.64,
    "end": 11712.8,
    "text": "if you see here, we get every single column back from our table. And that's because we use the star",
    "textdich": ""
  },
  {
    "start": 11712.8,
    "end": 11719.2,
    "text": "here. However, in an actual database, your tables could have 50 columns, maybe more, they could have",
    "textdich": ""
  },
  {
    "start": 11719.2,
    "end": 11723.68,
    "text": "a ton of columns. And if you're running a simple query to get, you know, some specific information,",
    "textdich": ""
  },
  {
    "start": 11723.68,
    "end": 11727.6,
    "text": "you may not want to get all of that data back, you may not care about most of the columns,",
    "textdich": ""
  },
  {
    "start": 11727.6,
    "end": 11732.96,
    "text": "you may only want one or two columns. And so we can filter out what columns we want returned back",
    "textdich": ""
  },
  {
    "start": 11732.96,
    "end": 11737.44,
    "text": "for each row. So the star means I want every single column. So we got every single column that we",
    "textdich": ""
  },
  {
    "start": 11737.44,
    "end": 11743.36,
    "text": "defined for the table. But if I wanted to run a query against the products table, but I only wanted",
    "textdich": ""
  },
  {
    "start": 11743.36,
    "end": 11750.16,
    "text": "a list of the different names of each product, I can specify just name. And so what this is going",
    "textdich": ""
  },
  {
    "start": 11750.16,
    "end": 11756.24,
    "text": "to do is this is going to grab just the name column from my products table. So if I run this",
    "textdich": ""
  },
  {
    "start": 11756.24,
    "end": 11761.76,
    "text": "again, you can see we got the same exact data, we got all 13 entries, but it only returned just",
    "textdich": ""
  },
  {
    "start": 11761.76,
    "end": 11767.84,
    "text": "the name column. And then we can add in as many columns we want. So if I wanted the ID column as",
    "textdich": ""
  },
  {
    "start": 11767.84,
    "end": 11774.96,
    "text": "well, and the price, I can hit run. And so now we got the ID and the price. And what's really nice",
    "textdich": ""
  },
  {
    "start": 11774.96,
    "end": 11779.6,
    "text": "is it's going to line up with the order that I write them here. So if I want the ID first,",
    "textdich": ""
  },
  {
    "start": 11779.6,
    "end": 11785.92,
    "text": "and then the name and then the price, I could change this to ID, name, price. And so now it's",
    "textdich": ""
  },
  {
    "start": 11785.92,
    "end": 11792.08,
    "text": "going to order it in that in that exact order. So we got ID, name and price. But if you do a star,",
    "textdich": ""
  },
  {
    "start": 11792.08,
    "end": 11799.6,
    "text": "it's just going to return every single column. Now, before we dig any deeper into SQL and how",
    "textdich": ""
  },
  {
    "start": 11799.6,
    "end": 11805.6,
    "text": "to structure SQL commands, I want to talk about capitalization. And so you'll notice that when I",
    "textdich": ""
  },
  {
    "start": 11805.6,
    "end": 11812.64,
    "text": "ran this command, the word select and the word from is capitalized. And I want to make this very",
    "textdich": ""
  },
  {
    "start": 11812.64,
    "end": 11818.72,
    "text": "clear, capitalization doesn't matter. So if I make this lowercase, and I make this lowercase as well,",
    "textdich": ""
  },
  {
    "start": 11818.72,
    "end": 11823.2,
    "text": "and then hit run, you'll see that everything works just fine as it did when it was capitalized. So",
    "textdich": ""
  },
  {
    "start": 11823.2,
    "end": 11829.68,
    "text": "capitalization doesn't matter. However, with a any SQL statement, we have two types of words,",
    "textdich": ""
  },
  {
    "start": 11829.68,
    "end": 11835.6,
    "text": "we've got SQL specific keywords, which is part of the SQL syntax. And then we have our user provided",
    "textdich": ""
  },
  {
    "start": 11835.6,
    "end": 11840.96,
    "text": "information. And so let's quickly talk about what those two things are. So the user provided",
    "textdich": ""
  },
  {
    "start": 11840.96,
    "end": 11846.72,
    "text": "information is keywords that I'm inputting in. So I'm asking SQL, or my Postgres database,",
    "textdich": ""
  },
  {
    "start": 11846.72,
    "end": 11850.8,
    "text": "I want the information from my products table. So I'm passing in this data. And so that one,",
    "textdich": ""
  },
  {
    "start": 11850.8,
    "end": 11854.88,
    "text": "you just you have to make sure you just match this up with whatever it's called within our table.",
    "textdich": ""
  },
  {
    "start": 11855.84,
    "end": 11860.72,
    "text": "But all of the SQL specific words that I don't create that don't match up with anything in our",
    "textdich": ""
  },
  {
    "start": 11860.72,
    "end": 11866.16,
    "text": "database, right, those can be either capitalized or lowercase, it doesn't matter, it's not going",
    "textdich": ""
  },
  {
    "start": 11866.16,
    "end": 11871.6,
    "text": "to impact your SQL statement. But you'll see that best practice is to capitalize it. So we'll do",
    "textdich": ""
  },
  {
    "start": 11871.6,
    "end": 11877.92,
    "text": "capital select and then capital from. And the reason we do that is that we can much easier tell",
    "textdich": ""
  },
  {
    "start": 11877.92,
    "end": 11883.28,
    "text": "which parts of our SQL statement is user provided information. And what parts of our SQL statement",
    "textdich": ""
  },
  {
    "start": 11883.28,
    "end": 11888.0,
    "text": "is just basic SQL keywords. So this just makes it a little bit easier to read. You may not notice",
    "textdich": ""
  },
  {
    "start": 11888.0,
    "end": 11892.64,
    "text": "the benefit of it now. But you'll see that these SQL commands can get really long, they can span",
    "textdich": ""
  },
  {
    "start": 11892.64,
    "end": 11896.64,
    "text": "multiple lines. And so having those keywords capitalized, it makes it a little bit easier",
    "textdich": ""
  },
  {
    "start": 11896.64,
    "end": 11901.84,
    "text": "to understand. But keep in mind, it doesn't actually impact how the command how the SQL",
    "textdich": ""
  },
  {
    "start": 11901.84,
    "end": 11905.52,
    "text": "statement actually runs. So it doesn't matter. But if you want to follow along with what I do,",
    "textdich": ""
  },
  {
    "start": 11905.52,
    "end": 11911.76,
    "text": "I like to capitalize them. Now with SQL, what we can do is when we perform a query,",
    "textdich": ""
  },
  {
    "start": 11911.76,
    "end": 11915.92,
    "text": "we can rename any of these columns. So if we find that this name is a little inconvenient,",
    "textdich": ""
  },
  {
    "start": 11915.92,
    "end": 11920.08,
    "text": "and maybe, you know, renaming it makes it a little bit easier on our back end code,",
    "textdich": ""
  },
  {
    "start": 11920.08,
    "end": 11924.88,
    "text": "to better interpret the data, we can pick any column we want and rename it. So let's say we're",
    "textdich": ""
  },
  {
    "start": 11924.88,
    "end": 11928.4,
    "text": "trying to fetch the ID column, I'm just going to run this, we can see we grabbed the ID column,",
    "textdich": ""
  },
  {
    "start": 11928.4,
    "end": 11934.08,
    "text": "and it's named ID. But let's say this confuses our back end, because we're retrieving maybe data",
    "textdich": ""
  },
  {
    "start": 11934.08,
    "end": 11938.56,
    "text": "from another database that also, you know, for users or something, and then we also have an ID",
    "textdich": ""
  },
  {
    "start": 11938.56,
    "end": 11943.12,
    "text": "field. And we don't want them to get mixed up, I can rename this column. And we can rename it by",
    "textdich": ""
  },
  {
    "start": 11943.12,
    "end": 11948.08,
    "text": "using the as keyword. So I say ID as and then specify the new name. So I can name this",
    "textdich": ""
  },
  {
    "start": 11948.08,
    "end": 11955.2,
    "text": "products underscore ID. But now if I run this, we can see that the column is now products underscore",
    "textdich": ""
  },
  {
    "start": 11955.2,
    "end": 11960.32,
    "text": "ID instead of just ID. And I can do this for any and as many columns as I want. So if I wanted to",
    "textdich": ""
  },
  {
    "start": 11960.32,
    "end": 11972.32,
    "text": "rename the is sale column, I can save it as on sale. And so there you go, guys, it's really as",
    "textdich": ""
  },
  {
    "start": 11972.32,
    "end": 11979.68,
    "text": "simple as that. Keep in mind, I kind of continued with my normal SQL format of capitalizing the",
    "textdich": ""
  },
  {
    "start": 11979.68,
    "end": 11984.56,
    "text": "SQL specific keywords just because it makes it a little bit easier to read. Alright, so let's",
    "textdich": ""
  },
  {
    "start": 11984.56,
    "end": 11989.2,
    "text": "clean this up a bit, I'm just going to change this back to star so that we can retrieve every single",
    "textdich": ""
  },
  {
    "start": 11989.2,
    "end": 11993.28,
    "text": "column, I'm just going to run that just to make sure nothing's broken. And so till now we've been",
    "textdich": ""
  },
  {
    "start": 11993.28,
    "end": 11998.4,
    "text": "retrieving every single entry in the table. And that's because we've provided no filter criteria,",
    "textdich": ""
  },
  {
    "start": 11998.4,
    "end": 12003.92,
    "text": "no filter condition. So let's figure out how we can filter the specific rows that we want based",
    "textdich": ""
  },
  {
    "start": 12003.92,
    "end": 12010.16,
    "text": "off a certain criteria. So let's say I want to match all entries that have a specific ID of",
    "textdich": ""
  },
  {
    "start": 12010.16,
    "end": 12014.96,
    "text": "something, right? And we know there's only going to be one entry that has a specific ID because",
    "textdich": ""
  },
  {
    "start": 12014.96,
    "end": 12020.88,
    "text": "the ID field is a primary key. So we know that two different items can't have the same exact ID. But",
    "textdich": ""
  },
  {
    "start": 12020.88,
    "end": 12026.16,
    "text": "you'll see one of the more common tasks when it comes to working with databases is retrieving a",
    "textdich": ""
  },
  {
    "start": 12026.16,
    "end": 12030.56,
    "text": "a row based off of a specific ID. So, you know, a lot of times our background will be like, Hey,",
    "textdich": ""
  },
  {
    "start": 12030.56,
    "end": 12036.96,
    "text": "I want you to retrieve the product with an ID of 10. So how do we do that? Easy, we add the keyword",
    "textdich": ""
  },
  {
    "start": 12036.96,
    "end": 12042.64,
    "text": "where then we specify the column that we're interested in, that we want to match on. So we're",
    "textdich": ""
  },
  {
    "start": 12042.64,
    "end": 12048.96,
    "text": "going to use the ID column. And then we say ID equals and then we pass in the value, it's really",
    "textdich": ""
  },
  {
    "start": 12048.96,
    "end": 12054.4,
    "text": "is that simple. So if I want the ID of and so if I want to get the product with an ID of 10,",
    "textdich": ""
  },
  {
    "start": 12054.4,
    "end": 12060.4,
    "text": "I just pass in 10. And remember to make sure you have the semicolon at the end, hit run. And look",
    "textdich": ""
  },
  {
    "start": 12060.4,
    "end": 12066.32,
    "text": "at that, we've now got our product that has the ID of 10. And then keep in mind, just like we did",
    "textdich": ""
  },
  {
    "start": 12066.32,
    "end": 12070.56,
    "text": "before, we can filter down based off of just the fields we want. So if we want just the ID and the",
    "textdich": ""
  },
  {
    "start": 12070.56,
    "end": 12079.2,
    "text": "name, we can do that. And it should work just fine. We'll change this back and run that. And so we",
    "textdich": ""
  },
  {
    "start": 12079.2,
    "end": 12085.92,
    "text": "got that, if we want to grab the ID of product, an ID of three, run that. And so now we get the",
    "textdich": ""
  },
  {
    "start": 12085.92,
    "end": 12093.04,
    "text": "product with an ID of three. But what's nice about this is that we can choose any column to match on.",
    "textdich": ""
  },
  {
    "start": 12093.04,
    "end": 12100.32,
    "text": "So let's say that I first dump everything so I can just see what I've got. And let's say I want",
    "textdich": ""
  },
  {
    "start": 12100.32,
    "end": 12106.88,
    "text": "to match on any product that has an inventory of zero. So that's basically saying like, which",
    "textdich": ""
  },
  {
    "start": 12106.88,
    "end": 12111.92,
    "text": "products do we not have inventory of so that maybe we can place an order? Well, we can just say",
    "textdich": ""
  },
  {
    "start": 12111.92,
    "end": 12120.08,
    "text": "where. And once again, I'm capitalizing the SQL keywords, I can say where inventory equals zero.",
    "textdich": ""
  },
  {
    "start": 12122.08,
    "end": 12126.32,
    "text": "And so now we've got, we've got a list of products where we need to place an order is really is as",
    "textdich": ""
  },
  {
    "start": 12126.32,
    "end": 12131.28,
    "text": "simple as that. Now working with numbers, you just place the number. So any column that uses",
    "textdich": ""
  },
  {
    "start": 12131.28,
    "end": 12135.92,
    "text": "integers or floats or anything like that, you could just say equals that. However, if you want",
    "textdich": ""
  },
  {
    "start": 12135.92,
    "end": 12141.28,
    "text": "to match based off of name, the name column, it's going to be a little bit different because the",
    "textdich": ""
  },
  {
    "start": 12141.28,
    "end": 12145.6,
    "text": "name column uses, you know, varying characters or text or, you know, what would be a string in",
    "textdich": ""
  },
  {
    "start": 12145.6,
    "end": 12152.64,
    "text": "Python. And so for those, what we have to do is first of all, we'll use the column name equals,",
    "textdich": ""
  },
  {
    "start": 12152.64,
    "end": 12157.76,
    "text": "but we have to wrap it in quotes, single quotes to be specific. So if I want to get the product with",
    "textdich": ""
  },
  {
    "start": 12157.76,
    "end": 12163.6,
    "text": "the with the name of TV, I have to put in single quotes, search for it. And then now we get that.",
    "textdich": ""
  },
  {
    "start": 12163.6,
    "end": 12168.56,
    "text": "But keep that in mind. Because if you remove the quotes, I believe you should get an error. Yep,",
    "textdich": ""
  },
  {
    "start": 12168.56,
    "end": 12172.32,
    "text": "and you do get an error. So just make sure when it comes to working with varying characters or any",
    "textdich": ""
  },
  {
    "start": 12172.32,
    "end": 12178.4,
    "text": "kind of text, you want to wrap it in quotes. Now, just like with most programming languages,",
    "textdich": ""
  },
  {
    "start": 12178.4,
    "end": 12182.96,
    "text": "we do have operators. And so till now, we've just been working with the equals operators. So if I",
    "textdich": ""
  },
  {
    "start": 12182.96,
    "end": 12188.96,
    "text": "need to get, you know, any product that has a price of, you know, 20, I would just say, where",
    "textdich": ""
  },
  {
    "start": 12188.96,
    "end": 12193.76,
    "text": "price equals 20. And I don't look, it looks like I don't actually have any items with the price of",
    "textdich": ""
  },
  {
    "start": 12193.76,
    "end": 12198.56,
    "text": "20. So I'm just going to do 200. Because I see that the TV is 200. If we run that, it works just",
    "textdich": ""
  },
  {
    "start": 12198.56,
    "end": 12205.12,
    "text": "fine. However, what if instead of doing this, I want to retrieve all of the items that have a price",
    "textdich": ""
  },
  {
    "start": 12205.12,
    "end": 12209.92,
    "text": "of greater than 50? How do I do that? Well, it really is fundamentally no different than how we",
    "textdich": ""
  },
  {
    "start": 12209.92,
    "end": 12217.2,
    "text": "do in Python. So I could say where, and I'll say price is, and then we have greater than 50. So",
    "textdich": ""
  },
  {
    "start": 12217.2,
    "end": 12223.28,
    "text": "this is going to grab any item that's basically 51 or higher. And it's not inclusive. So it doesn't",
    "textdich": ""
  },
  {
    "start": 12223.28,
    "end": 12227.76,
    "text": "include 50. And so now look, it looks like it grabbed all of the items that cost more than 50",
    "textdich": ""
  },
  {
    "start": 12227.76,
    "end": 12236.0,
    "text": "bucks. But if I wanted to say greater than or equal to 50, I can say just greater than or equal",
    "textdich": ""
  },
  {
    "start": 12236.0,
    "end": 12241.2,
    "text": "to 50. If I run this, we can see once again, that works just fine. But I don't have any products",
    "textdich": ""
  },
  {
    "start": 12241.2,
    "end": 12248.16,
    "text": "that are priced at 50. So I'll try this again with just 80. So we'll say greater than 80. It should",
    "textdich": ""
  },
  {
    "start": 12248.16,
    "end": 12253.04,
    "text": "not return this one because 80 is not greater than 80. But we could see the 80 is gone. But then if",
    "textdich": ""
  },
  {
    "start": 12253.04,
    "end": 12258.48,
    "text": "I do greater than or equal to, we can see the 80 is back. And we get the same thing with the less",
    "textdich": ""
  },
  {
    "start": 12258.48,
    "end": 12268.88,
    "text": "than and less than equal to so I could say less than 80. And I could say less than or equal to",
    "textdich": ""
  },
  {
    "start": 12268.88,
    "end": 12276.16,
    "text": "80 as well. And the last operator that I want to discuss is the not operator. So if I wanted to",
    "textdich": ""
  },
  {
    "start": 12276.16,
    "end": 12285.28,
    "text": "grab any product that does not have a inventory of zero, I can say where inventory. And we have two",
    "textdich": ""
  },
  {
    "start": 12285.28,
    "end": 12291.36,
    "text": "different ways of doing this, I can say not equals. So this is kind of the similar syntax that you see",
    "textdich": ""
  },
  {
    "start": 12291.36,
    "end": 12295.76,
    "text": "in some other programming languages, not Python, but other programming languages, I could say not",
    "textdich": ""
  },
  {
    "start": 12295.76,
    "end": 12302.08,
    "text": "equals and then zero. This is going to give me every product that we do have adequate stock for.",
    "textdich": ""
  },
  {
    "start": 12302.08,
    "end": 12308.0,
    "text": "And so now we see we get no columns or sorry, no rows with an inventory of zero. But we can also use",
    "textdich": ""
  },
  {
    "start": 12309.44,
    "end": 12313.52,
    "text": "this syntax. So the greater than by the less than and then the greater than,",
    "textdich": ""
  },
  {
    "start": 12313.52,
    "end": 12318.96,
    "text": "we run that we should get the same exact result. Alright, so let's move on to performing multiple",
    "textdich": ""
  },
  {
    "start": 12318.96,
    "end": 12327.28,
    "text": "operators. So let's say I want to grab any item that we have inventory of. So any any item that",
    "textdich": ""
  },
  {
    "start": 12327.28,
    "end": 12333.36,
    "text": "has an inventory greater than zero, that also costs more than $10. How would we do that? And",
    "textdich": ""
  },
  {
    "start": 12333.36,
    "end": 12339.04,
    "text": "I'm sure you guys can probably take a guess at this, but we'll do inventory greater than zero.",
    "textdich": ""
  },
  {
    "start": 12339.84,
    "end": 12343.6,
    "text": "And then how do we add that next statement where we say greater than I forgot what I said greater",
    "textdich": ""
  },
  {
    "start": 12343.6,
    "end": 12349.68,
    "text": "than 20. So we could just say and simple as that we do and and then we pass in the next criteria,",
    "textdich": ""
  },
  {
    "start": 12349.68,
    "end": 12357.6,
    "text": "we'll say and price is greater than 20. Let's try that out. And I realized I forgot the where",
    "textdich": ""
  },
  {
    "start": 12357.6,
    "end": 12363.36,
    "text": "keyword here. So that's why it's throwing an error. And so now we got every single product",
    "textdich": ""
  },
  {
    "start": 12363.36,
    "end": 12369.36,
    "text": "that has an inventory greater than zero and a price of greater than 20. And just like within",
    "textdich": ""
  },
  {
    "start": 12369.36,
    "end": 12376.08,
    "text": "and operator, we also have an or operator. And so if I want to see any product that is either",
    "textdich": ""
  },
  {
    "start": 12376.88,
    "end": 12384.88,
    "text": "greater than $100 or less than 20, I can say where, where price is greater than 100.",
    "textdich": ""
  },
  {
    "start": 12386.72,
    "end": 12395.04,
    "text": "Or price is less than 20. And so now we can use two criterias. And as long as it matches one,",
    "textdich": ""
  },
  {
    "start": 12395.04,
    "end": 12401.2,
    "text": "one or both of the criterias, it's going to return that result. All right, let's clean this up a bit.",
    "textdich": ""
  },
  {
    "start": 12401.2,
    "end": 12407.36,
    "text": "And let's say I want to retrieve products with an ID of one, two and three. How would I do that?",
    "textdich": ""
  },
  {
    "start": 12407.36,
    "end": 12415.12,
    "text": "Well, I can do where, where ID equals one. And then we'd have to do an or statement. And then",
    "textdich": ""
  },
  {
    "start": 12415.12,
    "end": 12426.88,
    "text": "we'd say ID equals two or ID equals three. If we run this, it should grab just those three items.",
    "textdich": ""
  },
  {
    "start": 12426.88,
    "end": 12432.8,
    "text": "Now there's another way to perform this kind of operation. And instead of using all of these ID",
    "textdich": ""
  },
  {
    "start": 12432.8,
    "end": 12437.84,
    "text": "equals one, ID equals two, and then just combining them with or statements, we can use the in operator.",
    "textdich": ""
  },
  {
    "start": 12437.84,
    "end": 12444.4,
    "text": "So let me explain how the in operator works. What we can do is we can say ID in, and then we can",
    "textdich": ""
  },
  {
    "start": 12444.4,
    "end": 12452.24,
    "text": "provide a list of values. So I can say, one, two, and three. And once again, I forgot the where keyword.",
    "textdich": ""
  },
  {
    "start": 12453.52,
    "end": 12457.36,
    "text": "And so if you run this, you can see that we got the three items. And you can see that that's way",
    "textdich": ""
  },
  {
    "start": 12457.36,
    "end": 12461.6,
    "text": "more readable, instead of having to type out that entire command. And let me show you the previous",
    "textdich": ""
  },
  {
    "start": 12461.6,
    "end": 12465.6,
    "text": "command, I shouldn't have deleted it. So I'm going to use the scratch pad just to show you guys.",
    "textdich": ""
  },
  {
    "start": 12465.6,
    "end": 12476.88,
    "text": "And so before we did where ID equals one, or ID equals two, or ID equals three, which one do you",
    "textdich": ""
  },
  {
    "start": 12476.88,
    "end": 12481.52,
    "text": "think is more readable. So both of them do the same exact thing. However, one's a little bit",
    "textdich": ""
  },
  {
    "start": 12481.52,
    "end": 12486.72,
    "text": "easier to read. And it cuts down on the number of keywords that you have to type.",
    "textdich": ""
  },
  {
    "start": 12488.72,
    "end": 12493.2,
    "text": "Now, before we proceed any further, I'm just going to retrieve all my databases,",
    "textdich": ""
  },
  {
    "start": 12493.2,
    "end": 12498.32,
    "text": "sorry, all my entries once again. And what I'm going to do is I'm going to add a few items.",
    "textdich": ""
  },
  {
    "start": 12499.2,
    "end": 12505.28,
    "text": "And so all of these items are going to be named very specifically. So I've got a TV items. And",
    "textdich": ""
  },
  {
    "start": 12505.28,
    "end": 12511.76,
    "text": "so I'm going to call I'm going to create one called TV blue. And then let me give this a price.",
    "textdich": ""
  },
  {
    "start": 12514.4,
    "end": 12518.88,
    "text": "And then everything else I can leave default. And I'm going to create a TV red.",
    "textdich": ""
  },
  {
    "start": 12518.88,
    "end": 12529.36,
    "text": "And then a TV yellow. And I'm going to save these to our database. And I forgot to give it a price.",
    "textdich": ""
  },
  {
    "start": 12529.36,
    "end": 12534.4,
    "text": "We'll just say all of them cost. Actually, let's give them different prices. So 200,",
    "textdich": ""
  },
  {
    "start": 12535.28,
    "end": 12538.24,
    "text": "yellow, no one likes anything that's yellow. So I'll give it a value of 50.",
    "textdich": ""
  },
  {
    "start": 12540.24,
    "end": 12545.76,
    "text": "And we'll save to our database. Alright, so that's in our database now. And we know how to filter",
    "textdich": ""
  },
  {
    "start": 12545.76,
    "end": 12550.64,
    "text": "based off of items. And we can use the where keyword and we can do it for even columns that",
    "textdich": ""
  },
  {
    "start": 12550.64,
    "end": 12557.28,
    "text": "are based off of characters, like the name column. So let's say that I want to retrieve everything,",
    "textdich": ""
  },
  {
    "start": 12558.4,
    "end": 12565.36,
    "text": "all of my TV. So this TV, this TV, this TV, this TV, how would we do that? Well, we can't exactly",
    "textdich": ""
  },
  {
    "start": 12565.36,
    "end": 12571.28,
    "text": "use the where statement because I can say where, name, and then I mean, we have equals we have",
    "textdich": ""
  },
  {
    "start": 12571.28,
    "end": 12577.84,
    "text": "greater than we have less than, but none of those really do what we want to do. So how can we match",
    "textdich": ""
  },
  {
    "start": 12577.84,
    "end": 12585.68,
    "text": "just on all of our TVs? Well, we can use our like operator. So we could say where, name,",
    "textdich": ""
  },
  {
    "start": 12588.72,
    "end": 12594.32,
    "text": "like, and then what we can do is we can pass in something very specific. So we pass in the text",
    "textdich": ""
  },
  {
    "start": 12594.32,
    "end": 12597.92,
    "text": "that we want, but then we can start using things that are kind of like regular expressions,",
    "textdich": ""
  },
  {
    "start": 12597.92,
    "end": 12604.96,
    "text": "like we have in Python. So I could say TV, and then percent sign. And what this is saying is that",
    "textdich": ""
  },
  {
    "start": 12604.96,
    "end": 12611.44,
    "text": "I want to grab every row that has a name that starts with TV, and then the percent sign means",
    "textdich": ""
  },
  {
    "start": 12611.44,
    "end": 12615.76,
    "text": "any random characters afterwards. So this is just saying I want any product that has a name that",
    "textdich": ""
  },
  {
    "start": 12615.76,
    "end": 12621.68,
    "text": "starts with TV. So if I run this, you can see that we were able to grab all the TV. So it's very",
    "textdich": ""
  },
  {
    "start": 12621.68,
    "end": 12628.0,
    "text": "similar to read regular expressions. And if I remove this, and instead just add, you know, add",
    "textdich": ""
  },
  {
    "start": 12628.0,
    "end": 12632.0,
    "text": "in the letter A, this is going to return all of my products that start with the letter A. And I",
    "textdich": ""
  },
  {
    "start": 12632.0,
    "end": 12635.84,
    "text": "don't have anything. But if I change this, I know I have one product that starts with an R. So if I",
    "textdich": ""
  },
  {
    "start": 12635.84,
    "end": 12642.0,
    "text": "try that, you can see that we get the remote. And we can also flip this so I can say, you know,",
    "textdich": ""
  },
  {
    "start": 12642.0,
    "end": 12646.48,
    "text": "percent sign and then pass in some letters at the end. So if I want to grab anything that ends in",
    "textdich": ""
  },
  {
    "start": 12646.48,
    "end": 12652.24,
    "text": "the letter n, I can run that looks like I've got nothing that ends in the letter n, maybe E.",
    "textdich": ""
  },
  {
    "start": 12653.44,
    "end": 12657.6,
    "text": "And so now we get all of the items that end in an E. And then we also have the ability to do the",
    "textdich": ""
  },
  {
    "start": 12657.6,
    "end": 12662.16,
    "text": "opposite. So this matches anything that ends in E. But if I want to get every line that doesn't",
    "textdich": ""
  },
  {
    "start": 12662.16,
    "end": 12667.52,
    "text": "end in any, I can say not, but that's just going to give me the opposite. So that's going to give",
    "textdich": ""
  },
  {
    "start": 12667.52,
    "end": 12672.4,
    "text": "me every row except for those two rows. And what we can also do is if I want to get any line that",
    "textdich": ""
  },
  {
    "start": 12672.4,
    "end": 12679.12,
    "text": "has the letter en somewhere in the name, I can do the percent sign before and after. And so we",
    "textdich": ""
  },
  {
    "start": 12679.12,
    "end": 12683.44,
    "text": "just look for these two characters anywhere in the name. So if I run this, and it looks like I got",
    "textdich": ""
  },
  {
    "start": 12683.44,
    "end": 12689.2,
    "text": "an error. And I'm not sure what happened there. But I changed this, I just delete it and retype",
    "textdich": ""
  },
  {
    "start": 12689.2,
    "end": 12691.92,
    "text": "it. And so now it no longer gives me an error. So I'm not really sure why that happened.",
    "textdich": ""
  },
  {
    "start": 12692.88,
    "end": 12696.48,
    "text": "Could be a bug of some kind, or maybe there's a typo I didn't see. But this is going to grab",
    "textdich": ""
  },
  {
    "start": 12696.48,
    "end": 12701.84,
    "text": "any text that has the letters en and then it can have any characters before any characters after.",
    "textdich": ""
  },
  {
    "start": 12701.84,
    "end": 12706.88,
    "text": "And then since we have the not operator, then it's going to do the exact opposite. But then",
    "textdich": ""
  },
  {
    "start": 12706.88,
    "end": 12714.64,
    "text": "I can also remove this so I can grab any lines that match just this. And then it looks like once",
    "textdich": ""
  },
  {
    "start": 12714.64,
    "end": 12722.48,
    "text": "again, I get the same exact error. Okay, there we go. Now, when we make a query to our Postgres",
    "textdich": ""
  },
  {
    "start": 12722.48,
    "end": 12727.68,
    "text": "database, we can also specify how we want to order the results. Now, by default, it looks like it's",
    "textdich": ""
  },
  {
    "start": 12727.68,
    "end": 12733.44,
    "text": "just going based off of the ID, but it's not necessarily going to be like that. And so it's",
    "textdich": ""
  },
  {
    "start": 12733.44,
    "end": 12738.24,
    "text": "better to actually tell Postgres how you want to order the products. So in this case, I've got no",
    "textdich": ""
  },
  {
    "start": 12738.24,
    "end": 12742.88,
    "text": "filter criteria, I'm just returning everything. And let's say I want to filter or order the,",
    "textdich": ""
  },
  {
    "start": 12743.76,
    "end": 12751.36,
    "text": "the products that are returned based off of price. So if I say order by, I can then specify",
    "textdich": ""
  },
  {
    "start": 12751.36,
    "end": 12756.56,
    "text": "the price column. So let's see what happens when I run this. All right, we could see that it looks",
    "textdich": ""
  },
  {
    "start": 12756.56,
    "end": 12761.12,
    "text": "like it starts at the lowest price and then works its way up. So by default, when you specify the",
    "textdich": ""
  },
  {
    "start": 12761.12,
    "end": 12768.48,
    "text": "order by keyword, and then specify the column, it does it in an ascending order. And so you could",
    "textdich": ""
  },
  {
    "start": 12768.48,
    "end": 12774.48,
    "text": "specify the order at which you want to go the direction, I guess by saying a SC. So this means",
    "textdich": ""
  },
  {
    "start": 12774.48,
    "end": 12778.08,
    "text": "ascending. So this shouldn't change anything, because Postgres by default is going to always",
    "textdich": ""
  },
  {
    "start": 12778.08,
    "end": 12783.52,
    "text": "do it in an ascending order. So if I run this, nothing changes. However, if I want to do this",
    "textdich": ""
  },
  {
    "start": 12783.52,
    "end": 12789.68,
    "text": "in a descending order, I can say DSC for descending. So now it's going to start at the most expensive",
    "textdich": ""
  },
  {
    "start": 12789.68,
    "end": 12793.76,
    "text": "price and then work its way down. Now let's change this. And let's say we want to order by",
    "textdich": ""
  },
  {
    "start": 12794.32,
    "end": 12799.04,
    "text": "inventory. And I want to see which products we have the most of. So I'll say inventory,",
    "textdich": ""
  },
  {
    "start": 12799.04,
    "end": 12803.12,
    "text": "and then descending because we want to start at the highest value and work our way down. So I'll",
    "textdich": ""
  },
  {
    "start": 12803.12,
    "end": 12806.8,
    "text": "run this. And then we can see it starts at the highest one and then works its way down. But we've",
    "textdich": ""
  },
  {
    "start": 12806.8,
    "end": 12813.2,
    "text": "got a whole bunch of zeros. And let's say that between these guys, I also want to specify a tie",
    "textdich": ""
  },
  {
    "start": 12813.2,
    "end": 12820.56,
    "text": "breaker of some kind, we can also specify the order using a second column for these tiebreakers.",
    "textdich": ""
  },
  {
    "start": 12820.56,
    "end": 12825.52,
    "text": "So I can pass in another column. And so let's say that anytime there's a tie, I wanted to then",
    "textdich": ""
  },
  {
    "start": 12825.52,
    "end": 12835.84,
    "text": "order it by, let's say price. So I'll say price. And then we'll say the cheapest price. So ascending,",
    "textdich": ""
  },
  {
    "start": 12835.84,
    "end": 12840.32,
    "text": "now ascending is always the default. So we can just delete that keyword. And so let's run this",
    "textdich": ""
  },
  {
    "start": 12840.32,
    "end": 12846.96,
    "text": "now. And I forgot to put a comma. So after each column that you want to sort by, you have to do a",
    "textdich": ""
  },
  {
    "start": 12846.96,
    "end": 12851.6,
    "text": "car. And so now we got all of our data. And so let's take a look and see if this actually worked.",
    "textdich": ""
  },
  {
    "start": 12851.6,
    "end": 12857.92,
    "text": "So we can see we're sorting based off of inventory, then we get down to zeros. So these are all tied.",
    "textdich": ""
  },
  {
    "start": 12857.92,
    "end": 12862.16,
    "text": "So we take a look at the second column that we pass. In this case, we're looking at the cheapest",
    "textdich": ""
  },
  {
    "start": 12862.16,
    "end": 12866.8,
    "text": "price. And so if we see the first one, looks like the cheapest price is two, then it goes up to four",
    "textdich": ""
  },
  {
    "start": 12866.8,
    "end": 12875.6,
    "text": "1030 4050 8100 200. And you can pass in as many columns as you want. For your sorting criteria,",
    "textdich": ""
  },
  {
    "start": 12875.6,
    "end": 12879.52,
    "text": "you don't have to just stick with two. And it's really just a matter of doing a comma,",
    "textdich": ""
  },
  {
    "start": 12879.52,
    "end": 12883.52,
    "text": "and then passing in the next column and then whatever the criteria is. And you'll see that",
    "textdich": ""
  },
  {
    "start": 12883.52,
    "end": 12890.88,
    "text": "one of the common things to do is let's say we want to get the most recent products. Well,",
    "textdich": ""
  },
  {
    "start": 12890.88,
    "end": 12894.8,
    "text": "I think it makes sense to just sort based off created. So that's a timestamp for when the",
    "textdich": ""
  },
  {
    "start": 12894.8,
    "end": 12899.76,
    "text": "product was created. So let's see what was the most recent products that were put into our database,",
    "textdich": ""
  },
  {
    "start": 12899.76,
    "end": 12907.36,
    "text": "we can just say, created underscore at and what order do you think we need? Do we need ascending",
    "textdich": ""
  },
  {
    "start": 12907.36,
    "end": 12912.08,
    "text": "or descending? If you don't know, think about it. And if you still don't know, test it out.",
    "textdich": ""
  },
  {
    "start": 12912.08,
    "end": 12917.6,
    "text": "That's the easiest way to find out. So we can see that the first one is remember, this is always",
    "textdich": ""
  },
  {
    "start": 12917.6,
    "end": 12921.44,
    "text": "going to default to ascending. So when it's ascending, we can see that there's a one at",
    "textdich": ""
  },
  {
    "start": 12921.44,
    "end": 12927.04,
    "text": "820 is created a 20. And then the bottom ones are created a 21. So it looks like this starts off",
    "textdich": ""
  },
  {
    "start": 12927.04,
    "end": 12931.36,
    "text": "with the oldest one, and then works its way up to the most recent one, because that has a later date,",
    "textdich": ""
  },
  {
    "start": 12931.36,
    "end": 12936.64,
    "text": "you think of the later date as a higher value. So if we want the you know, the most recent products",
    "textdich": ""
  },
  {
    "start": 12936.64,
    "end": 12947.68,
    "text": "first, we would do descending. And so now we've got the most recent products. And with this order,",
    "textdich": ""
  },
  {
    "start": 12947.68,
    "end": 12955.04,
    "text": "with the sorting property, remember, we can just chain this on to any SQL statement. So if I also",
    "textdich": ""
  },
  {
    "start": 12955.04,
    "end": 12963.52,
    "text": "wanted to, you know, get all of the products that have a price of greater than 20, and then sorted",
    "textdich": ""
  },
  {
    "start": 12963.52,
    "end": 12969.44,
    "text": "by something, I can just specify my where keyword and say where price is greater than 20. And then",
    "textdich": ""
  },
  {
    "start": 12969.44,
    "end": 12975.92,
    "text": "for all of those results, I want to order by who was most recently created, we'll search that. And",
    "textdich": ""
  },
  {
    "start": 12975.92,
    "end": 12981.28,
    "text": "so there you go. And so that's the great part about SQL is you'll just keep chaining these",
    "textdich": ""
  },
  {
    "start": 12981.28,
    "end": 12988.56,
    "text": "different SQL keywords to filter out the exact data in the exact order that you want. Now in an",
    "textdich": ""
  },
  {
    "start": 12988.56,
    "end": 12993.04,
    "text": "actual production environment, our tables could have millions, tens of millions, hundreds of",
    "textdich": ""
  },
  {
    "start": 12993.04,
    "end": 12998.08,
    "text": "millions of rows. And so it would never make sense to just perform a query like this, where we just",
    "textdich": ""
  },
  {
    "start": 12998.08,
    "end": 13002.08,
    "text": "dump everything, because then all of a sudden, we're asking our database to send back 100 million",
    "textdich": ""
  },
  {
    "start": 13002.08,
    "end": 13006.32,
    "text": "rows. And that's just unacceptable. And our software that we're using to even send the query",
    "textdich": ""
  },
  {
    "start": 13006.32,
    "end": 13010.8,
    "text": "may not even be able to handle that. And so usually you want to provide a limit of some kind. So you",
    "textdich": ""
  },
  {
    "start": 13010.8,
    "end": 13017.04,
    "text": "may want to say, Hey, I want to grab, you know, the first 10 rows that match this criteria. Well,",
    "textdich": ""
  },
  {
    "start": 13017.04,
    "end": 13021.04,
    "text": "we can do that by using the limit keyword. So we say limit, and then pass in the number of rows",
    "textdich": ""
  },
  {
    "start": 13021.04,
    "end": 13026.32,
    "text": "that you want. So if I run that, you can see that we get 10 rows, I lower this to five, we can get",
    "textdich": ""
  },
  {
    "start": 13026.32,
    "end": 13033.12,
    "text": "this, we can get five rows. And you can chain this on to any SQL expression. So let's say I wanted",
    "textdich": ""
  },
  {
    "start": 13033.12,
    "end": 13041.76,
    "text": "to grab all of the products that have a price of greater than 10. If I search that you can see I",
    "textdich": ""
  },
  {
    "start": 13041.76,
    "end": 13047.92,
    "text": "get 10 results. And let's say I want to limit this to only the first two results. So if I hit that,",
    "textdich": ""
  },
  {
    "start": 13047.92,
    "end": 13052.24,
    "text": "you can see that now I get two results. So all the keywords that we're covering, including the",
    "textdich": ""
  },
  {
    "start": 13052.24,
    "end": 13058.08,
    "text": "order by, and any of the filter expressions, we can just keep chaining on to our SQL statement to",
    "textdich": ""
  },
  {
    "start": 13059.04,
    "end": 13065.04,
    "text": "further specify exactly the data that we want. Now with limit, there's another keyword that",
    "textdich": ""
  },
  {
    "start": 13065.04,
    "end": 13070.16,
    "text": "I want to cover. And so let's say that I want to grab all products, and I want to order by",
    "textdich": ""
  },
  {
    "start": 13071.76,
    "end": 13076.24,
    "text": "ID. Alright, so it's gonna return it like it normally does. And it's ordered by ID.",
    "textdich": ""
  },
  {
    "start": 13076.24,
    "end": 13086.88,
    "text": "And let's say I want to set the limit to be five. Now we get products with an ID of 123, five and",
    "textdich": ""
  },
  {
    "start": 13086.88,
    "end": 13093.84,
    "text": "seven. Do I not have a ID of six? I'm just curious. Actually, so let me cut this out for a second. I",
    "textdich": ""
  },
  {
    "start": 13093.84,
    "end": 13098.08,
    "text": "just want to see if there's an ID of six. There isn't. Okay, so that's that's expected. So let",
    "textdich": ""
  },
  {
    "start": 13098.08,
    "end": 13113.44,
    "text": "me add that back. So we'll say I'll do order by ID, and then we'll limit to five. So we have the",
    "textdich": ""
  },
  {
    "start": 13113.44,
    "end": 13119.04,
    "text": "first five. Now let's say that we want to skip a certain number of rows. Because every time we",
    "textdich": ""
  },
  {
    "start": 13119.04,
    "end": 13121.76,
    "text": "search this, we're going to get the same result. And let's say that we don't actually care about",
    "textdich": ""
  },
  {
    "start": 13121.76,
    "end": 13126.4,
    "text": "the first two results. And I want to skip past them, we can provide an offset. So I'll do offset",
    "textdich": ""
  },
  {
    "start": 13126.4,
    "end": 13130.64,
    "text": "two. And so what that's going to do is it's going to skip past these two first two results and then",
    "textdich": ""
  },
  {
    "start": 13130.64,
    "end": 13135.36,
    "text": "give us the next five. So we should see the first result be remote, and microphone and car and then",
    "textdich": ""
  },
  {
    "start": 13135.36,
    "end": 13140.08,
    "text": "the two after that come after that. So if I search this, we can see that that first one is a remote.",
    "textdich": ""
  },
  {
    "start": 13140.08,
    "end": 13146.0,
    "text": "And the last one is the pencil sharpener. And then if I do an offset of, you know, five,",
    "textdich": ""
  },
  {
    "start": 13146.96,
    "end": 13151.52,
    "text": "it's going to skip the first original five. And so then we get pencil pencil sharpener and keyboard.",
    "textdich": ""
  },
  {
    "start": 13151.52,
    "end": 13154.64,
    "text": "So you're going to see that, you know, when it comes to limit and offset, these are going to",
    "textdich": ""
  },
  {
    "start": 13154.64,
    "end": 13159.28,
    "text": "come in handy. When we start implementing pagination in our API, we're going to definitely",
    "textdich": ""
  },
  {
    "start": 13159.28,
    "end": 13165.2,
    "text": "make use of the limit and offset keywords. Till now we've been using PG admin to create new entries",
    "textdich": ""
  },
  {
    "start": 13165.2,
    "end": 13170.32,
    "text": "in our database, by just going into the little GUI here and then just adding new values. However,",
    "textdich": ""
  },
  {
    "start": 13170.32,
    "end": 13174.0,
    "text": "when you're actually working with the Postgres database, you're never actually going to do this,",
    "textdich": ""
  },
  {
    "start": 13174.0,
    "end": 13178.32,
    "text": "this is more for administrative purposes, but a real application is going to use SQL,",
    "textdich": ""
  },
  {
    "start": 13178.32,
    "end": 13183.68,
    "text": "just like we use SQL for making queries, we're going to use SQL for adding new entries. So let's",
    "textdich": ""
  },
  {
    "start": 13183.68,
    "end": 13187.12,
    "text": "take a look at what the command looks like for adding a brand new entry into our database.",
    "textdich": ""
  },
  {
    "start": 13187.84,
    "end": 13190.88,
    "text": "The command starts with an insert, because we're going to insert a brand new row.",
    "textdich": ""
  },
  {
    "start": 13191.44,
    "end": 13196.32,
    "text": "And then we say into and we're going to specify the table that we want to add a new entry to.",
    "textdich": ""
  },
  {
    "start": 13196.32,
    "end": 13200.32,
    "text": "Now in our database, we only have one table, so it's going to be products. But here you would",
    "textdich": ""
  },
  {
    "start": 13200.32,
    "end": 13206.08,
    "text": "provide whatever table you'd like to add a new entry into. Then we have to do what we have to",
    "textdich": ""
  },
  {
    "start": 13206.08,
    "end": 13211.12,
    "text": "do is provide a list of columns that we want to provide data for. And so I'm going to leave this",
    "textdich": ""
  },
  {
    "start": 13211.12,
    "end": 13217.52,
    "text": "blank for now, we're going to come back to that. And then we specify values. And then here,",
    "textdich": ""
  },
  {
    "start": 13217.52,
    "end": 13220.88,
    "text": "we're going to actually provide the values for each column. And so if we take a look at our",
    "textdich": ""
  },
  {
    "start": 13220.88,
    "end": 13226.32,
    "text": "products database, we know that the name is required, we know the price is required. And",
    "textdich": ""
  },
  {
    "start": 13226.32,
    "end": 13230.56,
    "text": "then that's about it, right, we can choose to provide an S sale, but it's going to default",
    "textdich": ""
  },
  {
    "start": 13230.56,
    "end": 13234.64,
    "text": "to false. And then we can choose to provide an inventory. If we want to, if we don't, though,",
    "textdich": ""
  },
  {
    "start": 13234.64,
    "end": 13239.52,
    "text": "it's going to default to zero. So we have to provide a name and a price. And it's ultimately",
    "textdich": ""
  },
  {
    "start": 13239.52,
    "end": 13245.52,
    "text": "up to us to decide what we want to pass in. So we know we need a name. And we know we need a price.",
    "textdich": ""
  },
  {
    "start": 13245.52,
    "end": 13250.08,
    "text": "Now, let's say we're going to let Postgres automatically give us the default is sale value",
    "textdich": ""
  },
  {
    "start": 13250.08,
    "end": 13254.4,
    "text": "to be false. So we're going to leave that out, because we're not going to pass in any data. So",
    "textdich": ""
  },
  {
    "start": 13254.4,
    "end": 13258.56,
    "text": "this column is just for all the columns we want to pass in data. But let's say we want to give",
    "textdich": ""
  },
  {
    "start": 13258.56,
    "end": 13261.92,
    "text": "it a custom inventory value, instead of just defaulting to zero, here, we would provide",
    "textdich": ""
  },
  {
    "start": 13261.92,
    "end": 13265.92,
    "text": "inventory. And then in the values column, these are going to be the values that you want to",
    "textdich": ""
  },
  {
    "start": 13265.92,
    "end": 13271.2,
    "text": "actually provide for the name, the price and the inventory. So let's go ahead and provide that. So",
    "textdich": ""
  },
  {
    "start": 13271.2,
    "end": 13275.76,
    "text": "let's create a brand new item. So let's give it a name. And the order in which you pass things has",
    "textdich": ""
  },
  {
    "start": 13275.76,
    "end": 13279.28,
    "text": "to match up with the order that we pass in here. So the first column that we're going to provide",
    "textdich": ""
  },
  {
    "start": 13279.28,
    "end": 13283.28,
    "text": "a value for is named because it's the first one here. So what name should we give it and keep in",
    "textdich": ""
  },
  {
    "start": 13283.28,
    "end": 13287.36,
    "text": "mind, since it's text, or varying character, we're going to have to put this in quotations.",
    "textdich": ""
  },
  {
    "start": 13287.36,
    "end": 13296.64,
    "text": "And let's add in a tortilla. So now we're a grocery store. Right, then the next one is going",
    "textdich": ""
  },
  {
    "start": 13296.64,
    "end": 13301.28,
    "text": "to be a price. So how much is our tortilla going to cost? We'll say it's $4. And then finally,",
    "textdich": ""
  },
  {
    "start": 13301.28,
    "end": 13304.56,
    "text": "we have to provide an inventory value. So let's say we're going to have 1000 tortillas.",
    "textdich": ""
  },
  {
    "start": 13306.8,
    "end": 13313.92,
    "text": "And then as usual, you want a semi colon. All right. And so at this point,",
    "textdich": ""
  },
  {
    "start": 13313.92,
    "end": 13318.88,
    "text": "this is all we have to do to create a brand new entry. So let's hit run. And let's see",
    "textdich": ""
  },
  {
    "start": 13318.88,
    "end": 13324.88,
    "text": "what happens. So query returns successfully. And so we see this insert 01. And so at this point,",
    "textdich": ""
  },
  {
    "start": 13324.88,
    "end": 13330.4,
    "text": "it says, insert 01, and then query returns successfully. So did we actually successfully",
    "textdich": ""
  },
  {
    "start": 13330.4,
    "end": 13334.56,
    "text": "insert that something into our database? And more importantly, what exactly does this mean?",
    "textdich": ""
  },
  {
    "start": 13334.56,
    "end": 13339.6,
    "text": "So if you see insert 01, that means everything worked perfectly, there was no errors. What this",
    "textdich": ""
  },
  {
    "start": 13339.6,
    "end": 13344.96,
    "text": "means is that first of all, ignore the zero. So this means that we're using the default postgres",
    "textdich": ""
  },
  {
    "start": 13344.96,
    "end": 13349.52,
    "text": "configuration. So this represents the OID. But I believe postgres by default doesn't use that",
    "textdich": ""
  },
  {
    "start": 13349.52,
    "end": 13353.2,
    "text": "unless you specify it to so it's going to give a value of zero. And don't worry too much about",
    "textdich": ""
  },
  {
    "start": 13353.2,
    "end": 13356.24,
    "text": "that. That's kind of outside of the scope of this course, we're not going to mess with that.",
    "textdich": ""
  },
  {
    "start": 13356.24,
    "end": 13360.72,
    "text": "But instead, what we want to focus on is that second column. So this means that we inserted",
    "textdich": ""
  },
  {
    "start": 13360.72,
    "end": 13365.84,
    "text": "one row. So that means our insert worked perfectly. So let's take this. And what we're going to do is",
    "textdich": ""
  },
  {
    "start": 13365.84,
    "end": 13372.0,
    "text": "first of all, I'm going to copy this, cut it out, actually, please paste it into my scratch pad for",
    "textdich": ""
  },
  {
    "start": 13372.0,
    "end": 13378.48,
    "text": "now. And then we're going to say select star from rows. So I select star from products.",
    "textdich": ""
  },
  {
    "start": 13381.04,
    "end": 13386.16,
    "text": "I'm going to run that. And so if we go to our bottom, we should see our brand new tortilla.",
    "textdich": ""
  },
  {
    "start": 13386.16,
    "end": 13391.12,
    "text": "And so we provided the tortilla value, we provided the price. And we did not provide",
    "textdich": ""
  },
  {
    "start": 13391.12,
    "end": 13397.04,
    "text": "an is sale. So a default false, and then we provided an inventory. Now, if I copy this again,",
    "textdich": ""
  },
  {
    "start": 13397.68,
    "end": 13403.44,
    "text": "and paste it back into here, right, and if I move the name column,",
    "textdich": ""
  },
  {
    "start": 13406.48,
    "end": 13413.36,
    "text": "right after the price, well, now SQL is expecting me to provide the value for price first, then name",
    "textdich": ""
  },
  {
    "start": 13413.36,
    "end": 13420.32,
    "text": "then inventory. So then I would have to take the price, move that over to the first column,",
    "textdich": ""
  },
  {
    "start": 13420.32,
    "end": 13424.96,
    "text": "and then move that move that into the first entry. And then we have the name, and then the inventory.",
    "textdich": ""
  },
  {
    "start": 13424.96,
    "end": 13430.24,
    "text": "And so keep in mind, the order here has to match the order here. So once again, I'm going to go",
    "textdich": ""
  },
  {
    "start": 13430.24,
    "end": 13434.88,
    "text": "ahead and just add this again, because why not? And so now, oops, it looks like we have an error,",
    "textdich": ""
  },
  {
    "start": 13434.88,
    "end": 13438.8,
    "text": "what happened here? All right, there we go, I guess we just needed that space. And so now",
    "textdich": ""
  },
  {
    "start": 13438.8,
    "end": 13442.96,
    "text": "it's in there. And you'll notice that once again, we get the zero one, so that means everything was",
    "textdich": ""
  },
  {
    "start": 13442.96,
    "end": 13446.88,
    "text": "inserted properly. So now we should have two items in our database with the name of tortillas.",
    "textdich": ""
  },
  {
    "start": 13446.88,
    "end": 13452.4,
    "text": "And when you're working with, with Postgres, and especially with an API where we want to create a",
    "textdich": ""
  },
  {
    "start": 13452.4,
    "end": 13457.68,
    "text": "new post, like in our application, the general convention in an API is once we create the new",
    "textdich": ""
  },
  {
    "start": 13457.68,
    "end": 13463.28,
    "text": "post, we want to return that data back to whoever sent that request to the API. So we want to get",
    "textdich": ""
  },
  {
    "start": 13463.28,
    "end": 13469.36,
    "text": "that brand new brand, newly created post with the new fields like the created ad field and all the",
    "textdich": ""
  },
  {
    "start": 13469.36,
    "end": 13474.72,
    "text": "default values, and send it back to the client or the front end. So how do we get Postgres to",
    "textdich": ""
  },
  {
    "start": 13474.72,
    "end": 13478.96,
    "text": "automatically return it? Because right now, it doesn't seem to do that. And we could, you know,",
    "textdich": ""
  },
  {
    "start": 13478.96,
    "end": 13483.36,
    "text": "just provide two statements, right, I can add in a second statement that says, select star, you know,",
    "textdich": ""
  },
  {
    "start": 13483.36,
    "end": 13490.8,
    "text": "from products, this is going to dump everything we could potentially, you know, filter on, you know,",
    "textdich": ""
  },
  {
    "start": 13490.8,
    "end": 13501.36,
    "text": "where name equals, you know, tortilla, or something like that. And then at that point, we should have",
    "textdich": ""
  },
  {
    "start": 13501.36,
    "end": 13505.92,
    "text": "we should have three entries. But that's one way of getting back the result. However, there's a much",
    "textdich": ""
  },
  {
    "start": 13505.92,
    "end": 13510.16,
    "text": "easier way within Postgres. So first of all, I'm going to change the name, add a new item,",
    "textdich": ""
  },
  {
    "start": 13511.12,
    "end": 13518.4,
    "text": "and say this is a car, and I'm going to give it a price of 10,000. And what we can do is we can",
    "textdich": ""
  },
  {
    "start": 13518.4,
    "end": 13524.24,
    "text": "pass in a keyword called returning. But this is going to return the newly created item or items,",
    "textdich": ""
  },
  {
    "start": 13524.24,
    "end": 13529.04,
    "text": "if you want to insert more than one item. And then here, we have to specify the columns that we want",
    "textdich": ""
  },
  {
    "start": 13529.04,
    "end": 13533.04,
    "text": "for the newly returned items. So if I do star, that's going to return every single column. If",
    "textdich": ""
  },
  {
    "start": 13533.04,
    "end": 13539.36,
    "text": "I do ID, this is just going to give me the ID of the brand new brand new created item, I'm going",
    "textdich": ""
  },
  {
    "start": 13539.36,
    "end": 13544.64,
    "text": "to return every single column. So if I try this now, look at that. So it creates the new entry,",
    "textdich": ""
  },
  {
    "start": 13544.64,
    "end": 13550.16,
    "text": "we can see that has an ID of 26. And it gives back the entire row. Now, if you want to insert more",
    "textdich": ""
  },
  {
    "start": 13550.16,
    "end": 13556.4,
    "text": "than one row at a time, what we can do is we just do a comma here after values, and then just provide",
    "textdich": ""
  },
  {
    "start": 13556.4,
    "end": 13564.96,
    "text": "the data for the next row. So we'll do, we'll create a new item that costs $50. And this is",
    "textdich": ""
  },
  {
    "start": 13564.96,
    "end": 13573.44,
    "text": "going to be a laptop. And then we'll say there's going to be an inventory of 25 of them. And then",
    "textdich": ""
  },
  {
    "start": 13573.44,
    "end": 13580.08,
    "text": "if we wanted to add another one, and we could just do another comma, and then add some more values",
    "textdich": ""
  },
  {
    "start": 13580.08,
    "end": 13589.44,
    "text": "in. So we'll give this a price of 60. This is gonna be a monitor. And then we'll say we have",
    "textdich": ""
  },
  {
    "start": 13589.44,
    "end": 13596.24,
    "text": "four of those. And so here, we can go ahead and run, you can see that it added three items,",
    "textdich": ""
  },
  {
    "start": 13596.24,
    "end": 13600.8,
    "text": "and then it returned all three, because we have the returning keyword. And if you wanted to,",
    "textdich": ""
  },
  {
    "start": 13600.8,
    "end": 13610.56,
    "text": "we could just say I want the ID, we can just say I want the ID and be created at field, maybe the",
    "textdich": ""
  },
  {
    "start": 13610.56,
    "end": 13616.64,
    "text": "name as well. I run this, we could see created another three new items, and then return just",
    "textdich": ""
  },
  {
    "start": 13616.64,
    "end": 13623.44,
    "text": "those three fields. And so that's pretty much all I wanted to cover when it comes to creating new",
    "textdich": ""
  },
  {
    "start": 13623.44,
    "end": 13628.8,
    "text": "entries in the database and inserting new rows into a table. Alright, so in the last lesson,",
    "textdich": ""
  },
  {
    "start": 13628.8,
    "end": 13633.52,
    "text": "we learned how to insert new entries into a database, let's now figure out how to delete",
    "textdich": ""
  },
  {
    "start": 13633.52,
    "end": 13640.24,
    "text": "entries. So let's clear out this query real quick. And the command to delete a entry from a database",
    "textdich": ""
  },
  {
    "start": 13640.24,
    "end": 13645.28,
    "text": "is going to be delete, who would have thought right, delete, then you say from and then you",
    "textdich": ""
  },
  {
    "start": 13645.28,
    "end": 13649.36,
    "text": "provide the table that you want to delete a row from. So we'll say products. And then we want to",
    "textdich": ""
  },
  {
    "start": 13649.36,
    "end": 13653.92,
    "text": "specify condition. So what is our match criteria? What rows do we actually want to delete? We have",
    "textdich": ""
  },
  {
    "start": 13653.92,
    "end": 13658.16,
    "text": "to tell SQL I want you to delete this specific row. So what do we usually match on? Well,",
    "textdich": ""
  },
  {
    "start": 13658.16,
    "end": 13664.24,
    "text": "if you take a look at our API, are specifically our delete endpoint, the user provides the ID of",
    "textdich": ""
  },
  {
    "start": 13664.24,
    "end": 13668.96,
    "text": "the product they'd like to delete, or I guess in our application, it would be the ID of the post",
    "textdich": ""
  },
  {
    "start": 13668.96,
    "end": 13672.64,
    "text": "we'd like to delete, but we're working with products. So we'll say, you know, just like with",
    "textdich": ""
  },
  {
    "start": 13672.64,
    "end": 13678.4,
    "text": "a regular select query, you say where, and we can say ID equals and then the ID of the product we",
    "textdich": ""
  },
  {
    "start": 13678.4,
    "end": 13681.68,
    "text": "want to delete. So let's take a look at one of these products, I'll grab a product 10.",
    "textdich": ""
  },
  {
    "start": 13681.68,
    "end": 13691.84,
    "text": "And then let's run this. And then afterwards, let's actually do a select star from products,",
    "textdich": ""
  },
  {
    "start": 13691.84,
    "end": 13696.64,
    "text": "so we can see all of the products afterwards, just to verify that the ID of 10 or the product",
    "textdich": ""
  },
  {
    "start": 13696.64,
    "end": 13703.04,
    "text": "with an ID of 10 got deleted. So you can pass in as many SQL commands as you want here. So we'll",
    "textdich": ""
  },
  {
    "start": 13703.04,
    "end": 13712.16,
    "text": "run that. And so it ran. And then we can see that we the product with an idea of 10 was deleted.",
    "textdich": ""
  },
  {
    "start": 13712.16,
    "end": 13716.56,
    "text": "Now, I'm going to change this to 11, because there's no longer a product with an idea of",
    "textdich": ""
  },
  {
    "start": 13716.56,
    "end": 13721.04,
    "text": "10. So I'm going to delete this product. But what we can do is we can tell Postgres to actually",
    "textdich": ""
  },
  {
    "start": 13721.04,
    "end": 13726.08,
    "text": "give us back the specific entry before is deleted. So we can see what that looked like. So we could",
    "textdich": ""
  },
  {
    "start": 13726.08,
    "end": 13730.56,
    "text": "just pass in the returning keyword, just like we used with the insert statement, and then we",
    "textdich": ""
  },
  {
    "start": 13730.56,
    "end": 13735.04,
    "text": "specify the columns we want. So I'm going to say all of the columns. And then if we run this,",
    "textdich": ""
  },
  {
    "start": 13735.04,
    "end": 13739.84,
    "text": "we can see that it deleted the product with an ID of 11. And we can see what that product looked like.",
    "textdich": ""
  },
  {
    "start": 13742.08,
    "end": 13745.12,
    "text": "And keep in mind, if I don't pass any of this data, and I just run this,",
    "textdich": ""
  },
  {
    "start": 13745.76,
    "end": 13749.36,
    "text": "right, you'll see that it says a delete of one. So this is just telling you how many total rows",
    "textdich": ""
  },
  {
    "start": 13749.36,
    "end": 13754.4,
    "text": "are deleted. Now, let's say that we want to delete multiple products based off of a criteria. So let's",
    "textdich": ""
  },
  {
    "start": 13754.4,
    "end": 13761.44,
    "text": "say we want to delete any product that has an inventory of zero. How do you do that? Same exact",
    "textdich": ""
  },
  {
    "start": 13761.44,
    "end": 13766.64,
    "text": "command, we just have to match on any product with an inventory of zero. So let's say, delete",
    "textdich": ""
  },
  {
    "start": 13768.88,
    "end": 13776.24,
    "text": "from products table, where and then we'll just say inventory equals zero. So this should delete",
    "textdich": ""
  },
  {
    "start": 13776.24,
    "end": 13783.44,
    "text": "every single product with an inventory of zero. We run this, we can see it deleted eight rows,",
    "textdich": ""
  },
  {
    "start": 13783.44,
    "end": 13795.04,
    "text": "let's just do a select star from products. And you can see we no longer have any products with",
    "textdich": ""
  },
  {
    "start": 13795.04,
    "end": 13802.72,
    "text": "an inventory of zero. Alright, so we saw how we can insert new data into our table. And we saw how",
    "textdich": ""
  },
  {
    "start": 13802.72,
    "end": 13806.88,
    "text": "we can delete entries from our table. I think the next logical step is to figure out how to update",
    "textdich": ""
  },
  {
    "start": 13806.88,
    "end": 13813.84,
    "text": "a pre existing row. So the command for updating is going to be, as you guessed, update. And then",
    "textdich": ""
  },
  {
    "start": 13813.84,
    "end": 13818.24,
    "text": "we have to specify the table that we would like to update. And so in this case, it's going to be",
    "textdich": ""
  },
  {
    "start": 13818.24,
    "end": 13822.48,
    "text": "the products table. And there's gonna be two things that we have to pass in. So first of all,",
    "textdich": ""
  },
  {
    "start": 13822.48,
    "end": 13827.04,
    "text": "we need to specify which entry we want to update, we can update more than one entry at a time.",
    "textdich": ""
  },
  {
    "start": 13827.04,
    "end": 13831.68,
    "text": "But you know, just like when it comes to deleting, if you take a look at our API that we built so",
    "textdich": ""
  },
  {
    "start": 13831.68,
    "end": 13836.08,
    "text": "far, the user provides the ID of the specific post they want to update. So normally, we're going to",
    "textdich": ""
  },
  {
    "start": 13836.08,
    "end": 13842.48,
    "text": "update based off of the ID column. So we'll say where, you know, just like the select statement",
    "textdich": ""
  },
  {
    "start": 13842.48,
    "end": 13847.84,
    "text": "or the delete statement, we can say where ID equals and then the specific product of the ID,",
    "textdich": ""
  },
  {
    "start": 13847.84,
    "end": 13851.2,
    "text": "and the specific ID of the product that we want to delete. So let's say we want to delete one of",
    "textdich": ""
  },
  {
    "start": 13851.2,
    "end": 13858.56,
    "text": "the tortilla. So an ID of 25, sorry, not delete, but update. So let's say 25. Then we want to pass",
    "textdich": ""
  },
  {
    "start": 13858.56,
    "end": 13863.2,
    "text": "in all the columns that we want to update. So we pass in the name of the column, and then what the",
    "textdich": ""
  },
  {
    "start": 13863.2,
    "end": 13871.28,
    "text": "new field should be. So let's say a name column, I want to rename this to be flower tortilla.",
    "textdich": ""
  },
  {
    "start": 13872.8,
    "end": 13875.52,
    "text": "And then let's say I also want to update the price. So I could say the price",
    "textdich": ""
  },
  {
    "start": 13879.76,
    "end": 13883.6,
    "text": "equals and then 40. So right now the price is four and the name is tortilla,",
    "textdich": ""
  },
  {
    "start": 13883.6,
    "end": 13893.52,
    "text": "it's going to now be flower tortilla and 40. I run this. And don't forget the semicolon at the end.",
    "textdich": ""
  },
  {
    "start": 13893.52,
    "end": 13898.56,
    "text": "And I realized I forgot one keyword. So before you pass in all of the new values,",
    "textdich": ""
  },
  {
    "start": 13898.56,
    "end": 13904.72,
    "text": "we have to use the keyword set. So it's update products, then we want to set these columns,",
    "textdich": ""
  },
  {
    "start": 13904.72,
    "end": 13910.4,
    "text": "then I run this. And we can see that we updated one field. And I'm going to copy this,",
    "textdich": ""
  },
  {
    "start": 13910.4,
    "end": 13914.8,
    "text": "put it in my scratch pad for now, and just do a select star from products.",
    "textdich": ""
  },
  {
    "start": 13917.84,
    "end": 13923.2,
    "text": "And so if we take a look at our tortilla, so now it's called flower tortilla, we can see the ID",
    "textdich": ""
  },
  {
    "start": 13923.2,
    "end": 13926.88,
    "text": "is still the same because we didn't change that. And the price got changed. However,",
    "textdich": ""
  },
  {
    "start": 13926.88,
    "end": 13932.4,
    "text": "all the other fields have all remained the same. So that's good. But just like when it comes to",
    "textdich": ""
  },
  {
    "start": 13932.4,
    "end": 13939.12,
    "text": "inserting new data, we generally want to return the newly updated product to the user. So how do",
    "textdich": ""
  },
  {
    "start": 13939.12,
    "end": 13945.44,
    "text": "we do that we can just use the returning keyword, I'm going to copy this again. And let's update a",
    "textdich": ""
  },
  {
    "start": 13945.44,
    "end": 13952.48,
    "text": "different product. So I'm going to update the car, which is a ID of 30. And let's just say I want to",
    "textdich": ""
  },
  {
    "start": 13952.48,
    "end": 13957.44,
    "text": "update one field. I'll remove all these and I'll just say, I'm going to update the is underscore",
    "textdich": ""
  },
  {
    "start": 13957.44,
    "end": 13964.4,
    "text": "sale field to be to set it to true because right now it's set to false. We'll set that to true.",
    "textdich": ""
  },
  {
    "start": 13964.4,
    "end": 13973.84,
    "text": "And then we can say returning star. If we update this, we can see that we now got the car, we can",
    "textdich": ""
  },
  {
    "start": 13973.84,
    "end": 13977.92,
    "text": "see that the is sale set to true and it returned that data and it was successfully able to update",
    "textdich": ""
  },
  {
    "start": 13977.92,
    "end": 13986.88,
    "text": "that. Now, let's say we want to update multiple rows. And let's say I want to update, we'll just",
    "textdich": ""
  },
  {
    "start": 13986.88,
    "end": 13991.36,
    "text": "let's just update everything, right? So if I don't pass in a specific condition, I can update every",
    "textdich": ""
  },
  {
    "start": 13991.36,
    "end": 13998.72,
    "text": "column or I can specify a condition and then update just those columns. So let's, let's say",
    "textdich": ""
  },
  {
    "start": 13998.72,
    "end": 14007.44,
    "text": "I want to match any, any product with an ID of 15 or greater, so an ID of greater than 15.",
    "textdich": ""
  },
  {
    "start": 14008.56,
    "end": 14016.08,
    "text": "And I want to set the is sale to be true. If I run this, we can see all of the entries that it was",
    "textdich": ""
  },
  {
    "start": 14016.08,
    "end": 14020.08,
    "text": "that it updated. So now all of these entries, which all have an ID of greater than 15,",
    "textdich": ""
  },
  {
    "start": 14020.08,
    "end": 14026.0,
    "text": "have all all have the is sale column set to true. And so that's how we update entries within a",
    "textdich": ""
  },
  {
    "start": 14026.0,
    "end": 14032.4,
    "text": "Postgres database. At this point, I think we have a good enough foundation when it comes to working",
    "textdich": ""
  },
  {
    "start": 14032.4,
    "end": 14038.0,
    "text": "with Postgres, we're able to successfully query a database insert new rows, delete rows and update",
    "textdich": ""
  },
  {
    "start": 14038.0,
    "end": 14043.36,
    "text": "rows. So I think it's time we finally started to go back to our code and figure out how we can",
    "textdich": ""
  },
  {
    "start": 14043.36,
    "end": 14048.64,
    "text": "actually work with a database within a Python or a fast API application. But before we do that,",
    "textdich": ""
  },
  {
    "start": 14048.64,
    "end": 14054.16,
    "text": "I want to do a little bit of cleanup. So with our database, we no longer need our products table.",
    "textdich": ""
  },
  {
    "start": 14054.16,
    "end": 14057.76,
    "text": "So what you can do is you can go ahead and delete it. So you can just right click,",
    "textdich": ""
  },
  {
    "start": 14057.76,
    "end": 14063.12,
    "text": "and then hit delete or drop. Technically, if you don't want to delete this, and you want to keep",
    "textdich": ""
  },
  {
    "start": 14063.12,
    "end": 14066.88,
    "text": "it for now just for reference, you don't have to delete your table, it's not going to impact",
    "textdich": ""
  },
  {
    "start": 14066.88,
    "end": 14071.2,
    "text": "anything else. So you can keep it. But I'm going to go ahead and delete it because we don't actually",
    "textdich": ""
  },
  {
    "start": 14071.2,
    "end": 14075.28,
    "text": "need it anymore. We'll just do that hit yes. And then it's going to delete that and we should no",
    "textdich": ""
  },
  {
    "start": 14075.28,
    "end": 14080.24,
    "text": "longer have tables. And I'm also going to move over to another machine. So when we go to the",
    "textdich": ""
  },
  {
    "start": 14080.24,
    "end": 14084.0,
    "text": "other machine, you will see a whole bunch of other databases. But those are all databases",
    "textdich": ""
  },
  {
    "start": 14084.0,
    "end": 14088.8,
    "text": "for my other project to make sure you just focus on the fast API database. All right, I'm back over",
    "textdich": ""
  },
  {
    "start": 14088.8,
    "end": 14092.88,
    "text": "to my new machine, you'll see that if I take a look at my database, there's going to be a whole",
    "textdich": ""
  },
  {
    "start": 14092.88,
    "end": 14096.8,
    "text": "bunch of other databases. But I've got my main fast API database. So that's what we're going to",
    "textdich": ""
  },
  {
    "start": 14096.8,
    "end": 14100.72,
    "text": "be working on. Don't look at any of these other ones. And within here, it's going to be pretty",
    "textdich": ""
  },
  {
    "start": 14100.72,
    "end": 14105.52,
    "text": "much empty. I've got no tables. And so we're going to go ahead and create our table for our",
    "textdich": ""
  },
  {
    "start": 14106.24,
    "end": 14110.72,
    "text": "social media application. So, you know, we've been working with posts. So I think it makes sense to",
    "textdich": ""
  },
  {
    "start": 14110.72,
    "end": 14116.48,
    "text": "create a table for posts. And before we do that, we have to figure out exactly what are the columns",
    "textdich": ""
  },
  {
    "start": 14116.48,
    "end": 14121.52,
    "text": "for our specific table. And to do that, I think best to actually take a look at what our application",
    "textdich": ""
  },
  {
    "start": 14121.52,
    "end": 14125.92,
    "text": "looks like at the moment. And so if we actually take a look at a structure of a post, we know that",
    "textdich": ""
  },
  {
    "start": 14125.92,
    "end": 14131.6,
    "text": "it's going to have a title, we know it's going to have a content, we know it should have a attribute",
    "textdich": ""
  },
  {
    "start": 14131.6,
    "end": 14135.12,
    "text": "called publish to determine if it's published or not, we're going to get rid of this rating that",
    "textdich": ""
  },
  {
    "start": 14135.12,
    "end": 14139.12,
    "text": "was just for demonstration purposes. So I'm going to remove that for now. So it should have a title",
    "textdich": ""
  },
  {
    "start": 14139.12,
    "end": 14144.56,
    "text": "content published. And like any other item, when it comes to a database, we're going to have an ID",
    "textdich": ""
  },
  {
    "start": 14144.56,
    "end": 14149.36,
    "text": "column as well so that we can we can uniquely identify each entry. And then we're also going",
    "textdich": ""
  },
  {
    "start": 14149.36,
    "end": 14154.96,
    "text": "to have a created ad field to see to track when the specific post was added to the database.",
    "textdich": ""
  },
  {
    "start": 14154.96,
    "end": 14158.64,
    "text": "So we've got essentially five columns. And then once we have that, we can go ahead and just do",
    "textdich": ""
  },
  {
    "start": 14158.64,
    "end": 14163.92,
    "text": "what we did before, we can go to tables, we can hit create table. And then we're going to call",
    "textdich": ""
  },
  {
    "start": 14163.92,
    "end": 14168.08,
    "text": "this table post because it represents our social media posts. And then we'll go to the column",
    "textdich": ""
  },
  {
    "start": 14168.08,
    "end": 14172.88,
    "text": "section and start defining our columns. The first one's going to be our ID column. And so with our",
    "textdich": ""
  },
  {
    "start": 14172.88,
    "end": 14177.44,
    "text": "ID, we want to do serial. So this is going to cause it to be an integer that automatically",
    "textdich": ""
  },
  {
    "start": 14177.44,
    "end": 14183.76,
    "text": "increments for us. And that's going to be our primary key, as it was before. We'll add another",
    "textdich": ""
  },
  {
    "start": 14183.76,
    "end": 14191.2,
    "text": "column for title. This is going to be a varying character or character varying. Not null is going",
    "textdich": ""
  },
  {
    "start": 14191.2,
    "end": 14196.72,
    "text": "to be set to true. We can't we don't want to be able to create a post without a title. Then we're",
    "textdich": ""
  },
  {
    "start": 14196.72,
    "end": 14203.6,
    "text": "gonna have a column called content. I believe that's what we called it here. Content Yep.",
    "textdich": ""
  },
  {
    "start": 14205.04,
    "end": 14211.44,
    "text": "Once again, this is going to be character varying. And once again, this is going to be not null.",
    "textdich": ""
  },
  {
    "start": 14211.44,
    "end": 14222.96,
    "text": "Then we're going to have a published column. And this is going to be a Boolean. This is also going",
    "textdich": ""
  },
  {
    "start": 14222.96,
    "end": 14228.88,
    "text": "to be not null. However, I'm going to provide a default value. So if I do leave it blank,",
    "textdich": ""
  },
  {
    "start": 14228.88,
    "end": 14239.28,
    "text": "it's going to default to true. And then finally, we're going to create the created column. And",
    "textdich": ""
  },
  {
    "start": 14239.28,
    "end": 14244.64,
    "text": "this is going to be a timestamp with timezone. This is also going to be not null. And then just",
    "textdich": ""
  },
  {
    "start": 14244.64,
    "end": 14249.36,
    "text": "like we did before, with our products, we're going to add a constraint. But that is going to be now",
    "textdich": ""
  },
  {
    "start": 14249.36,
    "end": 14253.2,
    "text": "so it's going to grab the current time whenever we add this entry, and it's going to automatically",
    "textdich": ""
  },
  {
    "start": 14253.2,
    "end": 14259.04,
    "text": "add it to that column. And so at this point, we've got our tables defined, we can go ahead and hit",
    "textdich": ""
  },
  {
    "start": 14259.04,
    "end": 14266.08,
    "text": "Save. If we right click on posts, and then go to view and edit data, we should have essentially",
    "textdich": ""
  },
  {
    "start": 14266.08,
    "end": 14271.6,
    "text": "what is an empty database. And for now, we know how to insert data, we can do it either through",
    "textdich": ""
  },
  {
    "start": 14271.6,
    "end": 14274.8,
    "text": "SQL, or we can just do it to here, I'm just going to do it through here, just because it's a little",
    "textdich": ""
  },
  {
    "start": 14274.8,
    "end": 14280.96,
    "text": "bit quicker for now. So I'm just gonna say this is my first post. And the content is, we'll say,",
    "textdich": ""
  },
  {
    "start": 14282.96,
    "end": 14286.48,
    "text": "interesting stuff. So just go ahead and just create a couple of posts.",
    "textdich": ""
  },
  {
    "start": 14286.48,
    "end": 14296.8,
    "text": "And then I'm gonna add my second post. All right, and then we can just hit Save. And so now we have",
    "textdich": ""
  },
  {
    "start": 14296.8,
    "end": 14303.44,
    "text": "two posts in our database. So we can start working with that. When it comes to working with a Postgres",
    "textdich": ""
  },
  {
    "start": 14303.44,
    "end": 14308.0,
    "text": "database within a Python application, we're going to need a Postgres driver. And so there's going",
    "textdich": ""
  },
  {
    "start": 14308.0,
    "end": 14311.2,
    "text": "to be a couple of different libraries that going to do that that can do that we're going to use this",
    "textdich": ""
  },
  {
    "start": 14311.2,
    "end": 14316.8,
    "text": "library right here. And I believe in a couple months, a version three is coming up. But right",
    "textdich": ""
  },
  {
    "start": 14316.8,
    "end": 14320.8,
    "text": "now, this is the latest version. So head on over to the documentation, and it's going to show you",
    "textdich": ""
  },
  {
    "start": 14320.8,
    "end": 14326.8,
    "text": "how to just quickly set this up. And so if we go to basic module usage, this shows us how to set",
    "textdich": ""
  },
  {
    "start": 14326.8,
    "end": 14332.0,
    "text": "up a connection to our database. And so we're going to import the library. And then we're going to set",
    "textdich": ""
  },
  {
    "start": 14332.0,
    "end": 14336.64,
    "text": "up a connection. And hopefully, this is big enough for you guys. So you just say connection. And then",
    "textdich": ""
  },
  {
    "start": 14336.64,
    "end": 14341.92,
    "text": "here we pass in all of the data for our Postgres instance. So you know, what's the IP address of",
    "textdich": ""
  },
  {
    "start": 14341.92,
    "end": 14346.4,
    "text": "the Postgres database? What's the Postgres database that we want to connect to? What's the port number",
    "textdich": ""
  },
  {
    "start": 14346.4,
    "end": 14351.44,
    "text": "things like that. And then we set up a cursor. So this cursor is what we use to actually execute",
    "textdich": ""
  },
  {
    "start": 14351.44,
    "end": 14356.24,
    "text": "SQL commands. And so you could just do cursor dot execute. And then here we just say, you know,",
    "textdich": ""
  },
  {
    "start": 14356.24,
    "end": 14360.64,
    "text": "create table. Well, you guys aren't familiar with that command yet. But you can do you know, insert",
    "textdich": ""
  },
  {
    "start": 14360.64,
    "end": 14366.48,
    "text": "into you can do select star from test. And then at that point, we can then do fetch one fetch all",
    "textdich": ""
  },
  {
    "start": 14366.48,
    "end": 14369.68,
    "text": "and then if you ever want to make changes to a database, you just do commit. So it's a it's",
    "textdich": ""
  },
  {
    "start": 14369.68,
    "end": 14375.04,
    "text": "fairly straightforward. So let's go to our code and set this up. And so the first thing that we",
    "textdich": ""
  },
  {
    "start": 14375.04,
    "end": 14382.0,
    "text": "want to do is we want to install that library. So we'll do pip install. And I'll just copy that name.",
    "textdich": ""
  },
  {
    "start": 14388.64,
    "end": 14391.76,
    "text": "All right, and now it's successfully installed. So let's set up our connection.",
    "textdich": ""
  },
  {
    "start": 14391.76,
    "end": 14397.04,
    "text": "And so a connection to a database can fail, right? Maybe the database is unreachable,",
    "textdich": ""
  },
  {
    "start": 14397.04,
    "end": 14400.8,
    "text": "maybe the database is down. There's a lot of things that could cause issues with us being",
    "textdich": ""
  },
  {
    "start": 14400.8,
    "end": 14404.56,
    "text": "able to connect to it, we could put in wrong passwords or something like that. So anytime you",
    "textdich": ""
  },
  {
    "start": 14404.56,
    "end": 14408.8,
    "text": "have some kind of code within Python that could potentially fail, we're going to use the try",
    "textdich": ""
  },
  {
    "start": 14408.8,
    "end": 14417.12,
    "text": "statement. So I'm gonna say try and then we're gonna say connection equals. And then I realized",
    "textdich": ""
  },
  {
    "start": 14417.12,
    "end": 14421.92,
    "text": "the first thing that we have to do is we actually have to import the library. So let's just copy this",
    "textdich": ""
  },
  {
    "start": 14421.92,
    "end": 14428.72,
    "text": "line right here. And then I'm gonna say p s y c o p g two, I don't know if there's a specific way",
    "textdich": ""
  },
  {
    "start": 14428.72,
    "end": 14432.24,
    "text": "to actually pronounce that that's why I'm not trying to pronounce it. And then we call it the",
    "textdich": ""
  },
  {
    "start": 14432.24,
    "end": 14438.0,
    "text": "connect method. And so here we have to pass in a few properties. So the first property is going to",
    "textdich": ""
  },
  {
    "start": 14438.0,
    "end": 14444.96,
    "text": "be the host. So that's basically the IP address. We also have to pass in the specific database",
    "textdich": ""
  },
  {
    "start": 14444.96,
    "end": 14451.68,
    "text": "we want to connect to. We also need to pass in the username that we want to connect as as well as",
    "textdich": ""
  },
  {
    "start": 14451.68,
    "end": 14458.4,
    "text": "the password. And for now, we'll just keep that as such. So let's fill in these fields. So what's",
    "textdich": ""
  },
  {
    "start": 14458.4,
    "end": 14463.2,
    "text": "the host. So since this host is just our local machine for the IP address, you could just say",
    "textdich": ""
  },
  {
    "start": 14463.2,
    "end": 14469.84,
    "text": "local host, that means our own IP address, I spelled a misspelled database. And I'm going to",
    "textdich": ""
  },
  {
    "start": 14469.84,
    "end": 14475.04,
    "text": "set this to be Postgres, because that's what's sorry, it's not going to be Postgres, it's going",
    "textdich": ""
  },
  {
    "start": 14475.04,
    "end": 14479.68,
    "text": "to be fast API, right. So that database is just going to match up with the name of our database",
    "textdich": ""
  },
  {
    "start": 14479.68,
    "end": 14485.44,
    "text": "right here. username, we've been using the default Postgres username, and then password.",
    "textdich": ""
  },
  {
    "start": 14486.64,
    "end": 14490.96,
    "text": "I'm guessing you guys could have guessed what my password is, it is password 123.",
    "textdich": ""
  },
  {
    "start": 14490.96,
    "end": 14497.92,
    "text": "And then finally, there's one extra thing that we have to pass in. And so this library is a little",
    "textdich": ""
  },
  {
    "start": 14497.92,
    "end": 14502.24,
    "text": "bit weird. So when you actually make a query to retrieve a bunch of rows from the database,",
    "textdich": ""
  },
  {
    "start": 14502.24,
    "end": 14506.64,
    "text": "it doesn't include the column names, it just gives you the values of the columns, which, you know,",
    "textdich": ""
  },
  {
    "start": 14506.64,
    "end": 14511.04,
    "text": "it's like, I don't know what, you know, what value map to what column, so you actually have to pass",
    "textdich": ""
  },
  {
    "start": 14511.04,
    "end": 14515.6,
    "text": "in an extra field to get the column names, which kind of seems dumb, but that's the way the library",
    "textdich": ""
  },
  {
    "start": 14515.6,
    "end": 14521.2,
    "text": "works. And so what we're going to do up here is we're going to import something else, we're going to",
    "textdich": ""
  },
  {
    "start": 14521.2,
    "end": 14536.08,
    "text": "do import, same library dot extras, import, and then real dict cursor. And this should be from",
    "textdich": ""
  },
  {
    "start": 14536.08,
    "end": 14546.72,
    "text": "and then the last property we're going to pass in here. The last argument is going to be",
    "textdich": ""
  },
  {
    "start": 14550.0,
    "end": 14556.24,
    "text": "cursor factory equals real dict cursor. So like I said, all this does is it's also going to give",
    "textdich": ""
  },
  {
    "start": 14556.24,
    "end": 14560.88,
    "text": "you the column name. It's going to give you the column name as well as the value. So you know,",
    "textdich": ""
  },
  {
    "start": 14560.88,
    "end": 14565.28,
    "text": "which value map to what column or then it's just trying to figure the order and then mapping it to",
    "textdich": ""
  },
  {
    "start": 14565.28,
    "end": 14569.2,
    "text": "comms gets a little complicated. So this will just make it a nice Python dictionary when it returns",
    "textdich": ""
  },
  {
    "start": 14569.2,
    "end": 14584.16,
    "text": "it. All right, and just like it had in the, the documentation, we'll say cursor equals con dot",
    "textdich": ""
  },
  {
    "start": 14584.16,
    "end": 14590.08,
    "text": "cursor. So it's just calling the cursor method and then saving it in a variable named cursor. And so",
    "textdich": ""
  },
  {
    "start": 14590.08,
    "end": 14596.96,
    "text": "all this is going to do is this is what we're going to use to actually execute SQL statements. And if",
    "textdich": ""
  },
  {
    "start": 14596.96,
    "end": 14600.8,
    "text": "it's successfully able to connect, we're going to say print, and then we're just going to print out",
    "textdich": ""
  },
  {
    "start": 14600.8,
    "end": 14615.2,
    "text": "something like a database connection was successful. However, if we weren't able to connect to it,",
    "textdich": ""
  },
  {
    "start": 14615.2,
    "end": 14624.64,
    "text": "and we get an exception, we'll say accept exception as error. So we're going to get the error stored",
    "textdich": ""
  },
  {
    "start": 14624.64,
    "end": 14635.68,
    "text": "in a variable called error. And then we can just say print connecting to database failed. And then",
    "textdich": ""
  },
  {
    "start": 14635.68,
    "end": 14645.84,
    "text": "after that, just for our knowledge, we can say the error was error, we'll just print out the error.",
    "textdich": ""
  },
  {
    "start": 14648.48,
    "end": 14649.44,
    "text": "But let's save this.",
    "textdich": ""
  },
  {
    "start": 14657.2,
    "end": 14661.44,
    "text": "Okay, and you can see that we were successfully able to connect to our database. So it looks like",
    "textdich": ""
  },
  {
    "start": 14661.44,
    "end": 14667.2,
    "text": "everything worked well. But just as a quick test, I'm going to change my password here,",
    "textdich": ""
  },
  {
    "start": 14667.2,
    "end": 14671.04,
    "text": "I'm going to put it as an incorrect value. So let's save this and let's see what happens.",
    "textdich": ""
  },
  {
    "start": 14672.08,
    "end": 14678.32,
    "text": "Right, we can see that the password failed. And so at this point, what the code does is it failed,",
    "textdich": ""
  },
  {
    "start": 14678.32,
    "end": 14681.76,
    "text": "it printed out the error, and then it just keeps going through the rest of our code. So then it",
    "textdich": ""
  },
  {
    "start": 14681.76,
    "end": 14686.64,
    "text": "starts up our fast API server. But at this point, you know, our application is not going to work",
    "textdich": ""
  },
  {
    "start": 14686.64,
    "end": 14692.16,
    "text": "because the Postgres database connection failed. So really, our application, our API, our web server",
    "textdich": ""
  },
  {
    "start": 14692.16,
    "end": 14697.68,
    "text": "can't do anything until we get a connection to our database. So just having it fail, and then kind",
    "textdich": ""
  },
  {
    "start": 14697.68,
    "end": 14702.8,
    "text": "of gracefully handling that error doesn't do anything, we need to wait for that connection",
    "textdich": ""
  },
  {
    "start": 14702.8,
    "end": 14706.72,
    "text": "to actually go through before we do anything else. Or then at that point, there's really no",
    "textdich": ""
  },
  {
    "start": 14706.72,
    "end": 14710.88,
    "text": "point in having our server up and running if we can't access our database. So what I like to do",
    "textdich": ""
  },
  {
    "start": 14710.88,
    "end": 14718.64,
    "text": "is we're going to set up a while loop. I'm just gonna say while I want this loop to just continuously",
    "textdich": ""
  },
  {
    "start": 14718.64,
    "end": 14723.52,
    "text": "run until we successfully get a connection. So we'll say while true, which means we're just going",
    "textdich": ""
  },
  {
    "start": 14723.52,
    "end": 14731.6,
    "text": "to keep doing this over and over and over again until we break out of it. And I'm going to tab",
    "textdich": ""
  },
  {
    "start": 14731.6,
    "end": 14741.84,
    "text": "everything over and put everything in that while loop. Alright, and so while this true, if we",
    "textdich": ""
  },
  {
    "start": 14741.84,
    "end": 14746.16,
    "text": "successfully are able to connect to the database, I'm just going to break out of the while loop.",
    "textdich": ""
  },
  {
    "start": 14748.08,
    "end": 14754.32,
    "text": "However, if we fail, then it's just going to go right back into that loop.",
    "textdich": ""
  },
  {
    "start": 14754.32,
    "end": 14762.24,
    "text": "And so now, one other thing is it's going to do this really quickly. And I would like for after",
    "textdich": ""
  },
  {
    "start": 14762.24,
    "end": 14767.12,
    "text": "an error, I would like it to kind of wait two to three seconds before it tries to reconnect. So",
    "textdich": ""
  },
  {
    "start": 14767.12,
    "end": 14776.8,
    "text": "what we can do is we can import the time module, I'll say import time. And here, I'll just say time",
    "textdich": ""
  },
  {
    "start": 14776.8,
    "end": 14783.92,
    "text": "dot sleep. And I'll sleep for two seconds, use whatever time you want. And so now if I hit save,",
    "textdich": ""
  },
  {
    "start": 14783.92,
    "end": 14787.76,
    "text": "check out what happens. So it failed to connect because of wrong password, and then it's just",
    "textdich": ""
  },
  {
    "start": 14787.76,
    "end": 14792.64,
    "text": "going to keep retrying every two seconds. Now for a failed password, it's never going to connect.",
    "textdich": ""
  },
  {
    "start": 14792.64,
    "end": 14796.72,
    "text": "However, if it's an issue with your internet, if it's an issue with the database hasn't having not",
    "textdich": ""
  },
  {
    "start": 14796.72,
    "end": 14801.92,
    "text": "fully initialized, then having it just kind of redo this until the database fully comes up,",
    "textdich": ""
  },
  {
    "start": 14801.92,
    "end": 14807.44,
    "text": "is a nice way of kind of handling that. So if I change this now back to the correct password,",
    "textdich": ""
  },
  {
    "start": 14807.44,
    "end": 14814.72,
    "text": "we see that we're now successfully able to connect. So this is our code for actually connecting to",
    "textdich": ""
  },
  {
    "start": 14814.72,
    "end": 14822.08,
    "text": "our database. And at this point, we can start working on actually writing our SQL code and",
    "textdich": ""
  },
  {
    "start": 14822.08,
    "end": 14828.08,
    "text": "then you know, being able to manipulate our database from our fast API. And I do want to",
    "textdich": ""
  },
  {
    "start": 14828.08,
    "end": 14834.0,
    "text": "point out one thing. Generally, when you're working with your code, what we did right here is very",
    "textdich": ""
  },
  {
    "start": 14834.0,
    "end": 14839.6,
    "text": "bad. We hard coded all of our database information right into our code. This creates a problem",
    "textdich": ""
  },
  {
    "start": 14839.6,
    "end": 14844.48,
    "text": "because first of all, when we check this into Git, now our database password is stored in there.",
    "textdich": ""
  },
  {
    "start": 14844.48,
    "end": 14848.4,
    "text": "And then we run into some extra issues, because this is the connection for our development",
    "textdich": ""
  },
  {
    "start": 14848.4,
    "end": 14853.36,
    "text": "environment, or our development Postgres server, our production Postgres server is not going to be",
    "textdich": ""
  },
  {
    "start": 14853.36,
    "end": 14858.08,
    "text": "running on a local host, maybe the database might be called something else, the username and the",
    "textdich": ""
  },
  {
    "start": 14858.08,
    "end": 14862.16,
    "text": "password are for sure going to be different. So if we hard coded in, we won't actually be able to",
    "textdich": ""
  },
  {
    "start": 14862.16,
    "end": 14867.12,
    "text": "change it in the future, we need a dynamic way to kind of have our code change based off of if it's",
    "textdich": ""
  },
  {
    "start": 14867.12,
    "end": 14870.88,
    "text": "in our development environment or our production environment. So later on in this course, we'll",
    "textdich": ""
  },
  {
    "start": 14870.88,
    "end": 14874.64,
    "text": "figure out how to do that. However, for now, we're just going to work on keeping things simple,",
    "textdich": ""
  },
  {
    "start": 14874.64,
    "end": 14877.84,
    "text": "and just learning how to interact with the database before we start moving into things",
    "textdich": ""
  },
  {
    "start": 14877.84,
    "end": 14883.52,
    "text": "like environment variables. Alright, so the first thing that we're going to work on is retrieving",
    "textdich": ""
  },
  {
    "start": 14883.52,
    "end": 14889.36,
    "text": "all of our posts from our posts table. And so what we're going to do is we'll go to our specific",
    "textdich": ""
  },
  {
    "start": 14889.36,
    "end": 14894.32,
    "text": "path operation for that, which is the app dot get slash posts right here. And let's figure out how",
    "textdich": ""
  },
  {
    "start": 14894.32,
    "end": 14899.04,
    "text": "to do this. So if we go back to up to our connection, right, you'll see that we have access",
    "textdich": ""
  },
  {
    "start": 14899.04,
    "end": 14903.92,
    "text": "to this object right here, which is cursor. So we're going to use that to actually make a query,",
    "textdich": ""
  },
  {
    "start": 14903.92,
    "end": 14911.36,
    "text": "we'll say cursor dot execute. And then this is where we are going to paste in our SQL statements.",
    "textdich": ""
  },
  {
    "start": 14913.12,
    "end": 14916.24,
    "text": "I'm just going to put in three quotes right here. And then we just put in our SQL statement.",
    "textdich": ""
  },
  {
    "start": 14916.24,
    "end": 14922.24,
    "text": "So in this case, right to retrieve all posts, we just do select star from",
    "textdich": ""
  },
  {
    "start": 14924.64,
    "end": 14931.68,
    "text": "posts. Okay, and let's save this as a variable. So I'll just say these are my posts.",
    "textdich": ""
  },
  {
    "start": 14935.52,
    "end": 14938.48,
    "text": "And then let's just do a print post to see what we get.",
    "textdich": ""
  },
  {
    "start": 14938.48,
    "end": 14946.24,
    "text": "And so I'm just going to go to my postman. And we'll just find my get posts request,",
    "textdich": ""
  },
  {
    "start": 14946.24,
    "end": 14951.68,
    "text": "we'll send it. Alright, and let's see what happens, right, we could see that it printed out none. So",
    "textdich": ""
  },
  {
    "start": 14951.68,
    "end": 14957.36,
    "text": "this doesn't actually do anything, right? This is just passing in our SQL statement. However,",
    "textdich": ""
  },
  {
    "start": 14957.36,
    "end": 14967.28,
    "text": "to actually run it, we have to do cursor dot, and then we have a couple of options,",
    "textdich": ""
  },
  {
    "start": 14967.28,
    "end": 14973.12,
    "text": "we can do fetch all fetch many fetch one. So when it comes to retrieving multiple posts,",
    "textdich": ""
  },
  {
    "start": 14973.12,
    "end": 14976.32,
    "text": "we're going to always use fetch all don't worry about fetch many, I don't think we're ever going",
    "textdich": ""
  },
  {
    "start": 14976.32,
    "end": 14981.52,
    "text": "to use that. And then if we ever want to find one individual post, you know, like finding a post by",
    "textdich": ""
  },
  {
    "start": 14981.52,
    "end": 14986.32,
    "text": "an ID or something that we can use fetch one, because I believe if you want to fetch a post by",
    "textdich": ""
  },
  {
    "start": 14986.32,
    "end": 14989.6,
    "text": "an ID, and you do fetch all, it'll technically get it, but it'll just keep searching through",
    "textdich": ""
  },
  {
    "start": 14990.32,
    "end": 14995.44,
    "text": "the database for another post with that ID. However, we know that only one post can have",
    "textdich": ""
  },
  {
    "start": 14995.44,
    "end": 14999.84,
    "text": "that exact ID. So it's inefficient to kind of search through the entire database when we know",
    "textdich": ""
  },
  {
    "start": 14999.84,
    "end": 15004.0,
    "text": "there's only ever going to be one result. So for those, it's always better to use fetch one. But",
    "textdich": ""
  },
  {
    "start": 15004.0,
    "end": 15009.92,
    "text": "since we're retrieving multiple posts, we're going to use fetch all. And at this point, you know,",
    "textdich": ""
  },
  {
    "start": 15009.92,
    "end": 15013.12,
    "text": "we don't actually need to save this in a variable because it's never going to return anything,",
    "textdich": ""
  },
  {
    "start": 15013.12,
    "end": 15021.52,
    "text": "we can save the output of this to be posts. And now if we save this, run this again.",
    "textdich": ""
  },
  {
    "start": 15021.52,
    "end": 15031.36,
    "text": "And I realized I forgot to actually call it. Let's try that again. Right, you can see that",
    "textdich": ""
  },
  {
    "start": 15031.36,
    "end": 15036.16,
    "text": "we got all of our posts from here. And so now instead of returning my post, which is our old",
    "textdich": ""
  },
  {
    "start": 15036.16,
    "end": 15040.8,
    "text": "array, which we're not going to use, we're going to return what we just fetched. So we're going to",
    "textdich": ""
  },
  {
    "start": 15040.8,
    "end": 15047.76,
    "text": "return posts. And we'll go rid of that print statement, it's not needed anymore. And hopefully",
    "textdich": ""
  },
  {
    "start": 15047.76,
    "end": 15053.44,
    "text": "this works. So let's hit send. Alright, and so now you can see we've got our two posts from our",
    "textdich": ""
  },
  {
    "start": 15053.44,
    "end": 15059.28,
    "text": "database. And it's got all the extra fields. So it's got the publish, which is the default value,",
    "textdich": ""
  },
  {
    "start": 15059.28,
    "end": 15063.84,
    "text": "and then it's got the created at timestamp, which post has added. So now we've actually successfully",
    "textdich": ""
  },
  {
    "start": 15063.84,
    "end": 15068.48,
    "text": "been able to retrieve posts from our post guest database. And you can see how easy it is to",
    "textdich": ""
  },
  {
    "start": 15068.48,
    "end": 15072.72,
    "text": "actually work with that. In fact, it was actually a little bit easier to do this than to actually",
    "textdich": ""
  },
  {
    "start": 15072.72,
    "end": 15079.12,
    "text": "work with a just an array stored in memory. It really just comes down to understanding SQL.",
    "textdich": ""
  },
  {
    "start": 15079.12,
    "end": 15084.8,
    "text": "And since we spent, you know, the last half an hour or so really drilling into how SQL works,",
    "textdich": ""
  },
  {
    "start": 15084.8,
    "end": 15088.88,
    "text": "you'll see that SQL is pretty easy. And then once you know, SQL, you know, fetching, you know,",
    "textdich": ""
  },
  {
    "start": 15088.88,
    "end": 15093.6,
    "text": "retrieving, updating, deleting posts from a SQL database, even within your Python code is dead",
    "textdich": ""
  },
  {
    "start": 15093.6,
    "end": 15102.4,
    "text": "simple. Okay, so let's now move on to creating a brand new post. And so if we just quickly take a",
    "textdich": ""
  },
  {
    "start": 15102.4,
    "end": 15108.8,
    "text": "look at the code that we have right here, you can see that we have our schema, we're going to save",
    "textdich": ""
  },
  {
    "start": 15108.8,
    "end": 15112.56,
    "text": "that in our pedantic model. And so we will be able to access the properties from the body",
    "textdich": ""
  },
  {
    "start": 15112.56,
    "end": 15117.84,
    "text": "within this post object. So I'm going to clear this out and just delete all of that code for now.",
    "textdich": ""
  },
  {
    "start": 15122.32,
    "end": 15125.84,
    "text": "And for now, I'm just going to hardcode some value, I'll just say created post.",
    "textdich": ""
  },
  {
    "start": 15125.84,
    "end": 15136.32,
    "text": "And so let's work on inserting a new post into our database. But once again,",
    "textdich": ""
  },
  {
    "start": 15136.32,
    "end": 15141.76,
    "text": "we're going to access the cursor object, we're going to do cursor dot execute. And then once",
    "textdich": ""
  },
  {
    "start": 15141.76,
    "end": 15149.92,
    "text": "again, we're going to use the three quotes. And we're going to use typical SQL. So to insert",
    "textdich": ""
  },
  {
    "start": 15149.92,
    "end": 15154.4,
    "text": "something into our database, we do insert. And then we say insert into what table do we want",
    "textdich": ""
  },
  {
    "start": 15154.4,
    "end": 15159.2,
    "text": "to insert into, we'll say the post table. Right. And then here, we have to pass in the columns",
    "textdich": ""
  },
  {
    "start": 15159.84,
    "end": 15163.84,
    "text": "of all the fields that we want to enter in. So if we go look at our database,",
    "textdich": ""
  },
  {
    "start": 15164.48,
    "end": 15171.76,
    "text": "that we have to pass in a title, and a content. And then everything else is optional. So we can",
    "textdich": ""
  },
  {
    "start": 15171.76,
    "end": 15175.84,
    "text": "also provide published as well. And then did the database creates the created that in the ID. So",
    "textdich": ""
  },
  {
    "start": 15175.84,
    "end": 15183.44,
    "text": "it's really just these three columns that we're going to pass into here. And so it's going to be",
    "textdich": ""
  },
  {
    "start": 15183.44,
    "end": 15193.68,
    "text": "title content, and then published. Yep. And then we have to pass in the values for those columns.",
    "textdich": ""
  },
  {
    "start": 15194.56,
    "end": 15200.16,
    "text": "And this is where things get interesting. You never want to do any kind of string",
    "textdich": ""
  },
  {
    "start": 15200.16,
    "end": 15204.96,
    "text": "interpolation and then pass in the values of post directly into this. Instead, what we want to do",
    "textdich": ""
  },
  {
    "start": 15204.96,
    "end": 15212.64,
    "text": "is we're going to parameterize or sanitize all the data that we put into the SQL statement. So what",
    "textdich": ""
  },
  {
    "start": 15212.64,
    "end": 15219.6,
    "text": "you should do is do percent s. And so this kind of represents a variable. And we're going to do",
    "textdich": ""
  },
  {
    "start": 15219.6,
    "end": 15227.84,
    "text": "percent s and then percent s. And so this variable is going to be the value that gets passed in title,",
    "textdich": ""
  },
  {
    "start": 15227.84,
    "end": 15231.52,
    "text": "this variable variable is going to be the one that gets passed into content. And this variable",
    "textdich": ""
  },
  {
    "start": 15231.52,
    "end": 15236.56,
    "text": "is the one that gets passed into the published column. And what we want to set these as we're",
    "textdich": ""
  },
  {
    "start": 15236.56,
    "end": 15242.72,
    "text": "going to actually use a second item that we pass into the execute command, the execute method. And",
    "textdich": ""
  },
  {
    "start": 15242.72,
    "end": 15247.76,
    "text": "so here we pass in the actual values. So this first percent s, what do we want that to be,",
    "textdich": ""
  },
  {
    "start": 15247.76,
    "end": 15254.24,
    "text": "that's going to be post dot title. So we're grabbing the title from the body, then we want",
    "textdich": ""
  },
  {
    "start": 15254.24,
    "end": 15262.32,
    "text": "to pass in post dot content. And then we want to pass in post dot published. Alright, and this may",
    "textdich": ""
  },
  {
    "start": 15262.32,
    "end": 15266.96,
    "text": "seem a little confusing. And let me correct that. Because I'm sure a lot of you thought we could",
    "textdich": ""
  },
  {
    "start": 15266.96,
    "end": 15273.84,
    "text": "just do cursor dot execute. And then here we pass in just in a NF string. And then I can just copy",
    "textdich": ""
  },
  {
    "start": 15273.84,
    "end": 15286.08,
    "text": "all of this and then pass in here. Oops. And the values we can just do, you know, post that title",
    "textdich": ""
  },
  {
    "start": 15286.08,
    "end": 15294.88,
    "text": "and then, you know, post content and so on. And this would technically work. However, this makes",
    "textdich": ""
  },
  {
    "start": 15294.88,
    "end": 15300.64,
    "text": "you vulnerable to SQL injection. So if the user for the title decided to, you know, if we go to",
    "textdich": ""
  },
  {
    "start": 15300.64,
    "end": 15305.6,
    "text": "the create post, and for the title, he decided to pass in some kind of weird SQL statement like",
    "textdich": ""
  },
  {
    "start": 15305.6,
    "end": 15313.12,
    "text": "insert into blah, blah, blah, right, he puts in SQL instead of a valid title, this is what is a",
    "textdich": ""
  },
  {
    "start": 15313.12,
    "end": 15318.96,
    "text": "SQL injection attack, and he could potentially manipulate data within our SQL database. That's",
    "textdich": ""
  },
  {
    "start": 15318.96,
    "end": 15323.68,
    "text": "why it's never good to do it to pass that data in directly into here. Instead, all of these,",
    "textdich": ""
  },
  {
    "start": 15324.24,
    "end": 15331.04,
    "text": "you know, SQL libraries like, like our Postgres library here, they actually can sanitize the",
    "textdich": ""
  },
  {
    "start": 15331.04,
    "end": 15337.68,
    "text": "inputs. So when we do this percent s method, and then pass it in as the second field into the",
    "textdich": ""
  },
  {
    "start": 15337.68,
    "end": 15342.48,
    "text": "execute statement, it'll actually make sure that there's no, you know, weird SQL commands in there,",
    "textdich": ""
  },
  {
    "start": 15342.48,
    "end": 15345.52,
    "text": "and it's going to make sure that we're not vulnerable to SQL injection. So that's why",
    "textdich": ""
  },
  {
    "start": 15345.52,
    "end": 15350.56,
    "text": "we never do it like this. And we always do it like this. And just keep in mind,",
    "textdich": ""
  },
  {
    "start": 15350.56,
    "end": 15355.36,
    "text": "right, these are just variables or placeholders, and then the values we want to pass into that",
    "textdich": ""
  },
  {
    "start": 15355.36,
    "end": 15361.6,
    "text": "will be passed into these parentheses right here as the second parameter into the execute method.",
    "textdich": ""
  },
  {
    "start": 15361.6,
    "end": 15366.4,
    "text": "So post dot title, since it's the first one in this list, is going to go to the first percent s,",
    "textdich": ""
  },
  {
    "start": 15366.4,
    "end": 15370.8,
    "text": "and then post dot content is going to go to the second percent s and then post dot published,",
    "textdich": ""
  },
  {
    "start": 15370.8,
    "end": 15374.96,
    "text": "we'll go to the third percent s. But the order matters, they match up with whichever percent s",
    "textdich": ""
  },
  {
    "start": 15374.96,
    "end": 15380.24,
    "text": "comes first. So if I took, you know, post out published, right, and then moved it all the way",
    "textdich": ""
  },
  {
    "start": 15380.24,
    "end": 15387.6,
    "text": "to the front. Well, now post out published would go to the first percent s post out title would go",
    "textdich": ""
  },
  {
    "start": 15387.6,
    "end": 15391.2,
    "text": "to the second one, that would cause issues because it doesn't line up with that. So that's why we want",
    "textdich": ""
  },
  {
    "start": 15391.2,
    "end": 15401.2,
    "text": "to make sure that the the order really does in fact matter. And just like we had before, anytime",
    "textdich": ""
  },
  {
    "start": 15401.2,
    "end": 15406.4,
    "text": "we create something in our database, we want to return the created result. So we can use the",
    "textdich": ""
  },
  {
    "start": 15406.4,
    "end": 15414.16,
    "text": "returning keyword. And we'll return everything. And so you're probably thinking, you know, we can",
    "textdich": ""
  },
  {
    "start": 15414.16,
    "end": 15419.68,
    "text": "just save new underscore post equals that. And then since we're returning it, it's going to get",
    "textdich": ""
  },
  {
    "start": 15419.68,
    "end": 15424.56,
    "text": "stored into that variable. And that's not exactly correct. Instead, what we have to do is to get",
    "textdich": ""
  },
  {
    "start": 15424.56,
    "end": 15431.6,
    "text": "that returned value, we have to do a new underscore post. And then we do cursor dot batch one.",
    "textdich": ""
  },
  {
    "start": 15433.2,
    "end": 15437.92,
    "text": "So that'll get whatever we return from here. And then what we're going to do is we're going to say",
    "textdich": ""
  },
  {
    "start": 15438.8,
    "end": 15444.4,
    "text": "new underscore post is going to get returned to the user. Let's save that. And let's see what",
    "textdich": ""
  },
  {
    "start": 15444.4,
    "end": 15449.84,
    "text": "happens. So go to a create post. And then I'm gonna clear that out and just say, Hey, hey,",
    "textdich": ""
  },
  {
    "start": 15449.84,
    "end": 15457.92,
    "text": "this is my new post. And let's hit send. So it looks like everything worked, right? 201 created,",
    "textdich": ""
  },
  {
    "start": 15457.92,
    "end": 15462.8,
    "text": "you can see it's got all of these values. Let's go back to our SQL database, I'm going to just do a",
    "textdich": ""
  },
  {
    "start": 15462.8,
    "end": 15472.16,
    "text": "quick query. So I'll just say query tool. And I'll just say select star from posts. Let's run it.",
    "textdich": ""
  },
  {
    "start": 15472.16,
    "end": 15476.88,
    "text": "And if we take a look at the values, and the title should be, hey, this is my new post with an ID of",
    "textdich": ""
  },
  {
    "start": 15476.88,
    "end": 15481.92,
    "text": "three, you could see it's not in there. And so you might be wondering, well, you know, the output of",
    "textdich": ""
  },
  {
    "start": 15482.64,
    "end": 15488.48,
    "text": "our API looks perfect, it sent it all back. Well, when you're working with Postgres, or any of these",
    "textdich": ""
  },
  {
    "start": 15488.48,
    "end": 15494.88,
    "text": "libraries, you have to actually do one last thing, you actually have to commit the changes. Just like",
    "textdich": ""
  },
  {
    "start": 15494.88,
    "end": 15500.0,
    "text": "when it comes to working in our database, you know, if I create something here, passing some data into",
    "textdich": ""
  },
  {
    "start": 15500.0,
    "end": 15504.8,
    "text": "the content, it's not saved in there, I actually have to finally save it. So to save that data,",
    "textdich": ""
  },
  {
    "start": 15505.52,
    "end": 15510.96,
    "text": "we have to reference, instead of the cursor, we're going to reference the connection, and then we",
    "textdich": ""
  },
  {
    "start": 15510.96,
    "end": 15518.64,
    "text": "have to do a commit. So if we go down here, we just say con, which is my connection to my database,",
    "textdich": ""
  },
  {
    "start": 15518.64,
    "end": 15523.92,
    "text": "and just say commit, so that's actually going to push those changes out. So we'll save that. Now",
    "textdich": ""
  },
  {
    "start": 15523.92,
    "end": 15531.44,
    "text": "I'll try this again. Alright, and so now we got it looks like it has an ID of four. If I go to my",
    "textdich": ""
  },
  {
    "start": 15531.44,
    "end": 15540.4,
    "text": "Postgres database, I'm going to do another search. Sure, okay, if it deletes it. And so now we can see",
    "textdich": ""
  },
  {
    "start": 15540.4,
    "end": 15545.36,
    "text": "idea for Hey, this is my new post. So now it works. So keep in mind, anytime you want to insert data",
    "textdich": ""
  },
  {
    "start": 15546.08,
    "end": 15549.84,
    "text": "into your code, make sure you do a connection commit to actually save it into the Postgres",
    "textdich": ""
  },
  {
    "start": 15549.84,
    "end": 15554.0,
    "text": "database, because these are all staged changes. So we're staging it, we can see the result of the",
    "textdich": ""
  },
  {
    "start": 15554.0,
    "end": 15558.88,
    "text": "stage, but we have to commit it to the database to actually finalize those changes. Alright,",
    "textdich": ""
  },
  {
    "start": 15558.88,
    "end": 15564.64,
    "text": "so now let's move on to fetching an individual post by an ID. I want you guys to take a crack at this,",
    "textdich": ""
  },
  {
    "start": 15564.64,
    "end": 15568.8,
    "text": "see if you can try to figure it out. It's going to be relatively similar to the two other previous",
    "textdich": ""
  },
  {
    "start": 15568.8,
    "end": 15574.4,
    "text": "ones we've done. So we'll start out by referencing the cursor object as usual, and then we'll execute.",
    "textdich": ""
  },
  {
    "start": 15574.4,
    "end": 15584.4,
    "text": "And then here, we're going to pass in our SQL statement. And so we're going to do a select star",
    "textdich": ""
  },
  {
    "start": 15585.12,
    "end": 15589.92,
    "text": "from post, that's going to grab every post, but we want to grab just one post based off of the ID.",
    "textdich": ""
  },
  {
    "start": 15589.92,
    "end": 15594.96,
    "text": "And so you guys already know how to do that, we can say where ID equals, and then whatever ID",
    "textdich": ""
  },
  {
    "start": 15594.96,
    "end": 15600.64,
    "text": "that you want. And so let's take a look at our database, I have an ID a post with an ID of one.",
    "textdich": ""
  },
  {
    "start": 15600.64,
    "end": 15606.32,
    "text": "So right now, I'm just going to hard code it, I'm gonna say post with an ID of one. And at this",
    "textdich": ""
  },
  {
    "start": 15606.32,
    "end": 15611.68,
    "text": "point, this is not going to return anything, to actually return something, we'll say, cursor dot",
    "textdich": ""
  },
  {
    "start": 15611.68,
    "end": 15616.08,
    "text": "fetch. And then we're going to use not fetch all, but fetch one, because there's only ever going to",
    "textdich": ""
  },
  {
    "start": 15616.08,
    "end": 15620.96,
    "text": "be a post with an ID of one, just, and so this is going to make it a little bit more efficient.",
    "textdich": ""
  },
  {
    "start": 15620.96,
    "end": 15627.52,
    "text": "And then I'm going to save that as post. I'll just say test post not to get confused with",
    "textdich": ""
  },
  {
    "start": 15627.52,
    "end": 15636.88,
    "text": "the other post. And we're going to print that out just to see if it worked. So let's get one post.",
    "textdich": ""
  },
  {
    "start": 15638.88,
    "end": 15644.48,
    "text": "And it doesn't really matter what we send it as. If I take a look at this print statement,",
    "textdich": ""
  },
  {
    "start": 15644.48,
    "end": 15649.44,
    "text": "you can see that we were able to get just that one single post. So it looks like that worked.",
    "textdich": ""
  },
  {
    "start": 15649.44,
    "end": 15654.72,
    "text": "So now let's clear out all of this other code. I'm going to remove the print statement. Actually,",
    "textdich": ""
  },
  {
    "start": 15654.72,
    "end": 15658.72,
    "text": "before we do that, first of all, let's not hard code the value anymore. Instead, we want to use",
    "textdich": ""
  },
  {
    "start": 15658.72,
    "end": 15666.72,
    "text": "the ID that we passed in from the path parameter. So how do we do that? Remember this, we want to",
    "textdich": ""
  },
  {
    "start": 15666.72,
    "end": 15670.8,
    "text": "always make sure that we're not vulnerable to SQL injection attacks. So we'll do percent s,",
    "textdich": ""
  },
  {
    "start": 15671.52,
    "end": 15675.84,
    "text": "that's going to be a placeholder for the value. And then the second thing that we pass into the",
    "textdich": ""
  },
  {
    "start": 15675.84,
    "end": 15682.64,
    "text": "execute method, this is going to be the ID. So we take the ID, and then that's going to get pushed",
    "textdich": ""
  },
  {
    "start": 15682.64,
    "end": 15687.44,
    "text": "into this value. So it's essentially doing the same exact thing. So let's see what happens when",
    "textdich": ""
  },
  {
    "start": 15687.44,
    "end": 15692.4,
    "text": "we try to run this again. And I'm going to try to grab a post of one. And let's see what happens.",
    "textdich": ""
  },
  {
    "start": 15693.36,
    "end": 15695.36,
    "text": "Alright, so it looks like we got an error. So let's take a look.",
    "textdich": ""
  },
  {
    "start": 15697.36,
    "end": 15702.0,
    "text": "And it says that int object does not support indexing. So it's not very helpful. However,",
    "textdich": ""
  },
  {
    "start": 15702.0,
    "end": 15710.24,
    "text": "I'll tell you exactly what's happening. Because this is a string, we need ID to be a string as",
    "textdich": ""
  },
  {
    "start": 15710.24,
    "end": 15715.44,
    "text": "well. Right now it's an integer because we validated as an integer and we converted it to",
    "textdich": ""
  },
  {
    "start": 15715.44,
    "end": 15720.56,
    "text": "an integer. But we need this to be a string or then it's not going to work. So we have to",
    "textdich": ""
  },
  {
    "start": 15720.56,
    "end": 15728.24,
    "text": "convert to a string. It's pretty simple, you just do string. And that's all and at that point,",
    "textdich": ""
  },
  {
    "start": 15728.24,
    "end": 15732.88,
    "text": "that should fix the issue. And I'm sure you guys are a little bit confused. Because when it comes",
    "textdich": ""
  },
  {
    "start": 15732.88,
    "end": 15739.2,
    "text": "in as a path parameter, it's going to come in as a string, we then convert it to an int to then",
    "textdich": ""
  },
  {
    "start": 15739.2,
    "end": 15743.84,
    "text": "only convert it back into a string. And so you might think, well, maybe we should just change",
    "textdich": ""
  },
  {
    "start": 15743.84,
    "end": 15748.24,
    "text": "this to a string. But if you change that to a string, then it could potentially open up it to",
    "textdich": ""
  },
  {
    "start": 15748.24,
    "end": 15752.96,
    "text": "us to issues where the user could type in something like this, which isn't a valid ID. So we do have",
    "textdich": ""
  },
  {
    "start": 15752.96,
    "end": 15758.08,
    "text": "to validate it as a number, convert it to an int and then convert it back to a string once again.",
    "textdich": ""
  },
  {
    "start": 15761.92,
    "end": 15762.56,
    "text": "Let's save this.",
    "textdich": ""
  },
  {
    "start": 15762.56,
    "end": 15771.44,
    "text": "Our error should go away. And let's try this. All right, no error. So it looks like everything's",
    "textdich": ""
  },
  {
    "start": 15771.44,
    "end": 15775.84,
    "text": "good. And so now it's just a matter of cleaning up our code and getting rid of all of the other",
    "textdich": ""
  },
  {
    "start": 15775.84,
    "end": 15782.4,
    "text": "code. So I'm going to rename this. So this is just going to be post. So we can keep everything",
    "textdich": ""
  },
  {
    "start": 15782.4,
    "end": 15787.28,
    "text": "else the same. So if we didn't find a post, right, which means, you know, the database return nothing,",
    "textdich": ""
  },
  {
    "start": 15787.28,
    "end": 15791.2,
    "text": "it's going to be set to none. And then we can raise the usual exception. But if we did find",
    "textdich": ""
  },
  {
    "start": 15791.2,
    "end": 15796.56,
    "text": "a post, we're just going to return it. Now, if I get a post of one, you can see that we've got that",
    "textdich": ""
  },
  {
    "start": 15796.56,
    "end": 15801.36,
    "text": "post, which is clearly from the Postgres database, because it has created that field. And then if I",
    "textdich": ""
  },
  {
    "start": 15801.36,
    "end": 15807.92,
    "text": "try to grab a post of an if I try to grab the ID of a post that doesn't exist, try five, we can see",
    "textdich": ""
  },
  {
    "start": 15807.92,
    "end": 15811.76,
    "text": "that post with the ID of five was not found. And let's just double check to make sure that there",
    "textdich": ""
  },
  {
    "start": 15811.76,
    "end": 15818.32,
    "text": "is no post with an ID of five. And there isn't a perfect. And you know, guys, one interesting thing",
    "textdich": ""
  },
  {
    "start": 15818.32,
    "end": 15825.6,
    "text": "later down in some of the next path operations that we work on, I did run into a weird issue where if",
    "textdich": ""
  },
  {
    "start": 15825.6,
    "end": 15829.92,
    "text": "I didn't have a comma right after this, even though there's nothing that comes after it led to an issue,",
    "textdich": ""
  },
  {
    "start": 15829.92,
    "end": 15834.88,
    "text": "I'm not sure why it did that. But keep in mind, if you do run into some weird issues, just put in",
    "textdich": ""
  },
  {
    "start": 15834.88,
    "end": 15841.04,
    "text": "this extra comma, for some reason or another, it potentially fixes some issues. Okay, so just keep",
    "textdich": ""
  },
  {
    "start": 15841.04,
    "end": 15845.76,
    "text": "that in mind. I don't have an explanation for it. You know, maybe it's listed somewhere within",
    "textdich": ""
  },
  {
    "start": 15845.76,
    "end": 15850.48,
    "text": "stack overflow, or I'm sure someone eventually or occasionally asked this question, and I just",
    "textdich": ""
  },
  {
    "start": 15850.48,
    "end": 15857.36,
    "text": "couldn't find it. Alright, so now let's work on deleting a post. I'm going to remove these",
    "textdich": ""
  },
  {
    "start": 15857.36,
    "end": 15863.12,
    "text": "comments to clear up some space, we're going to do cursor dot execute, you guys should already know",
    "textdich": ""
  },
  {
    "start": 15863.84,
    "end": 15867.44,
    "text": "the exact SQL statement that we need. So it's going to be select,",
    "textdich": ""
  },
  {
    "start": 15867.44,
    "end": 15876.64,
    "text": "sorry, not select, delete from post table. And then we're going to delete by ID. So we'll say",
    "textdich": ""
  },
  {
    "start": 15876.64,
    "end": 15884.08,
    "text": "where ID equals. And then remember, we don't want to pass in the the user input directly,",
    "textdich": ""
  },
  {
    "start": 15884.08,
    "end": 15890.56,
    "text": "we want to do that placeholder again. And then we also want to we want to do a returning. So we'll",
    "textdich": ""
  },
  {
    "start": 15890.56,
    "end": 15896.8,
    "text": "see what that post was before it was deleted. And then we'll pass in the value of the post. So this",
    "textdich": ""
  },
  {
    "start": 15896.8,
    "end": 15901.28,
    "text": "is going to be ID. But we want to convert it to a string so we don't hit that error again.",
    "textdich": ""
  },
  {
    "start": 15903.92,
    "end": 15906.96,
    "text": "And then I'm going to do that empty comma just to avoid any potential issues.",
    "textdich": ""
  },
  {
    "start": 15907.68,
    "end": 15910.88,
    "text": "And then we have to do a cursor dot fetch one to get the deleted post.",
    "textdich": ""
  },
  {
    "start": 15912.24,
    "end": 15918.56,
    "text": "I'm going to save this as a variable. So I'll say deleted underscore post equals that",
    "textdich": ""
  },
  {
    "start": 15920.64,
    "end": 15925.36,
    "text": "we can remove this. And then for this exception, when we try to grab a the ID",
    "textdich": ""
  },
  {
    "start": 15925.36,
    "end": 15931.76,
    "text": "of a post that doesn't exist, we can just say, if deleted underscore post, which is the post that",
    "textdich": ""
  },
  {
    "start": 15931.76,
    "end": 15939.76,
    "text": "we fetched, wasn't found, we're going to throw an error. We can delete this. And remember,",
    "textdich": ""
  },
  {
    "start": 15939.76,
    "end": 15944.8,
    "text": "there's one last thing, right? Anytime we want to make a change to a database, we have to connect,",
    "textdich": ""
  },
  {
    "start": 15944.8,
    "end": 15950.64,
    "text": "commit to it. So we'll do connection dot commit. And then everything else, we can keep our code",
    "textdich": ""
  },
  {
    "start": 15950.64,
    "end": 15956.16,
    "text": "exactly the same. And then I'm just gonna run this just to get so we have a post with an idea",
    "textdich": ""
  },
  {
    "start": 15956.16,
    "end": 15961.28,
    "text": "of one to enforce. So let's go ahead and delete one of those. So if I delete the post with an",
    "textdich": ""
  },
  {
    "start": 15961.28,
    "end": 15966.64,
    "text": "idea for what do we get? Oh, sorry, we're still under the get let's go to our delete. This is our",
    "textdich": ""
  },
  {
    "start": 15966.64,
    "end": 15974.48,
    "text": "delete. And then we're going to delete with an idea for 204 no content. So that's good. And let's",
    "textdich": ""
  },
  {
    "start": 15974.48,
    "end": 15979.76,
    "text": "double check our Postgres database to see if it got deleted. We can see that it's now gone.",
    "textdich": ""
  },
  {
    "start": 15979.76,
    "end": 15984.48,
    "text": "And then let's try to now grab the with the same one, let's try to delete the same post,",
    "textdich": ""
  },
  {
    "start": 15984.48,
    "end": 15989.44,
    "text": "which no longer exists, we should get a 404 post with idea for does not exist. Perfect.",
    "textdich": ""
  },
  {
    "start": 15991.36,
    "end": 15996.8,
    "text": "And last but not least, the final path operation we need to update is the update post path operation.",
    "textdich": ""
  },
  {
    "start": 15998.0,
    "end": 16002.24,
    "text": "We'll grab the cursor object. And we'll execute our SQL statement again.",
    "textdich": ""
  },
  {
    "start": 16002.24,
    "end": 16015.84,
    "text": "And so here, we'll do update posts. And here we want to set the title. And what do we want to set",
    "textdich": ""
  },
  {
    "start": 16015.84,
    "end": 16019.2,
    "text": "our title to? Well, that's going to be passed in from the users or any kind of data we get from the",
    "textdich": ""
  },
  {
    "start": 16019.2,
    "end": 16025.2,
    "text": "user. You know, we have no idea if they put in, you know, very suspicious SQL data. So we always",
    "textdich": ""
  },
  {
    "start": 16025.2,
    "end": 16031.12,
    "text": "want to put the placeholders. And so all the fields that they can update are going to be the",
    "textdich": ""
  },
  {
    "start": 16031.12,
    "end": 16037.68,
    "text": "title, the content and published. So then the next one's going to be content. And the last one's",
    "textdich": ""
  },
  {
    "start": 16037.68,
    "end": 16046.0,
    "text": "going to be published. And then we'll pass in those values. And that's going to come from our",
    "textdich": ""
  },
  {
    "start": 16046.64,
    "end": 16054.64,
    "text": "post object. So we'll do post dot title, post dot content, and finally post dot published.",
    "textdich": ""
  },
  {
    "start": 16056.24,
    "end": 16060.56,
    "text": "And just like we had with inserts and delete, we can do a returning so we can actually get",
    "textdich": ""
  },
  {
    "start": 16060.56,
    "end": 16065.76,
    "text": "the returned, we can actually return the updated object to returning stars, we can get all the",
    "textdich": ""
  },
  {
    "start": 16065.76,
    "end": 16073.44,
    "text": "columns. And then to actually fetch that updated post, we have to do cursor dot fetch one.",
    "textdich": ""
  },
  {
    "start": 16075.6,
    "end": 16079.04,
    "text": "And then we'll save that in a variable called updated post.",
    "textdich": ""
  },
  {
    "start": 16084.64,
    "end": 16088.64,
    "text": "And then we can remove this, this is our previous code. And then for the little check to make sure",
    "textdich": ""
  },
  {
    "start": 16088.64,
    "end": 16095.04,
    "text": "that we actually got an updated a post, we can get dated post. If we didn't, if it returned none,",
    "textdich": ""
  },
  {
    "start": 16095.04,
    "end": 16099.52,
    "text": "that we're going to send a 404 because a post with that ID didn't exist. And then we can delete",
    "textdich": ""
  },
  {
    "start": 16099.52,
    "end": 16107.68,
    "text": "all of this nonsense. And then what we return back is going to be updated post up, make sure you get",
    "textdich": ""
  },
  {
    "start": 16107.68,
    "end": 16111.68,
    "text": "updated with a D or then if you just do update post, it tries to call it this own function,",
    "textdich": ""
  },
  {
    "start": 16111.68,
    "end": 16120.88,
    "text": "which doesn't work. And I'm just gonna see what I have in my database. So I've got a post with an",
    "textdich": ""
  },
  {
    "start": 16120.88,
    "end": 16125.52,
    "text": "ID of one. So we're gonna update him, you can see currently the title is first post. So if I go to",
    "textdich": ""
  },
  {
    "start": 16125.52,
    "end": 16131.52,
    "text": "my update post, I'm going to send it with the ID of one, we're gonna update that post, and then",
    "textdich": ""
  },
  {
    "start": 16131.52,
    "end": 16136.48,
    "text": "it's going to have an updated title. So if we see that get updated, then we know it worked. So we'll",
    "textdich": ""
  },
  {
    "start": 16136.48,
    "end": 16142.48,
    "text": "send do a send, we could see what we got back. And so it looks like it updated. But let's actually",
    "textdich": ""
  },
  {
    "start": 16142.48,
    "end": 16148.56,
    "text": "double check with our database. And it did not update. And I'm sure you guys can take a guess",
    "textdich": ""
  },
  {
    "start": 16148.56,
    "end": 16153.76,
    "text": "as to exactly what went wrong. Remember, anytime you want to make changes to a database,",
    "textdich": ""
  },
  {
    "start": 16154.64,
    "end": 16163.36,
    "text": "we need to do the connection commit. So let's try this again. Alright, so we got the same result,",
    "textdich": ""
  },
  {
    "start": 16163.36,
    "end": 16168.48,
    "text": "let's take a look at our database, run this, and then we've got updated title, it looked like it",
    "textdich": ""
  },
  {
    "start": 16168.48,
    "end": 16176.56,
    "text": "updated both. And that looks like a bug. So what did we do wrong? Well, if you look at our code,",
    "textdich": ""
  },
  {
    "start": 16176.56,
    "end": 16180.08,
    "text": "we're updating every single post, because I didn't provide a where condition,",
    "textdich": ""
  },
  {
    "start": 16180.08,
    "end": 16184.32,
    "text": "what post do I need to update? So that's a mistake on my end. So we have to do where",
    "textdich": ""
  },
  {
    "start": 16185.52,
    "end": 16189.52,
    "text": "and then we'll say ID equals and that ID is going to come from this value.",
    "textdich": ""
  },
  {
    "start": 16189.52,
    "end": 16196.56,
    "text": "So we're going to put another placeholder there. And then that last value is going to be",
    "textdich": ""
  },
  {
    "start": 16198.08,
    "end": 16203.12,
    "text": "the ID converted to a string, just like we did before. So simple mistake.",
    "textdich": ""
  },
  {
    "start": 16205.04,
    "end": 16210.16,
    "text": "Now save that. And before I do that, I'm just gonna change this back to first post.",
    "textdich": ""
  },
  {
    "start": 16210.16,
    "end": 16217.76,
    "text": "I'm gonna change this back to second post. And then it's gonna have some random text.",
    "textdich": ""
  },
  {
    "start": 16220.64,
    "end": 16228.96,
    "text": "And then we'll save that. Then let's update this. Alright, so we updated our code. And then let's",
    "textdich": ""
  },
  {
    "start": 16228.96,
    "end": 16237.68,
    "text": "take a look at our database. We'll run this again. And we can see that it was updated. And you'll",
    "textdich": ""
  },
  {
    "start": 16237.68,
    "end": 16241.6,
    "text": "notice how that first post then moved down the list, because it was most recently updated.",
    "textdich": ""
  },
  {
    "start": 16241.6,
    "end": 16247.28,
    "text": "But we updated just one post this time. And then last but not least, let's try to update a post",
    "textdich": ""
  },
  {
    "start": 16247.28,
    "end": 16252.56,
    "text": "that doesn't exist. So I'm going to search for an ID of 23. Try to update that. And then if I do that,",
    "textdich": ""
  },
  {
    "start": 16253.36,
    "end": 16258.24,
    "text": "we can see that we get a little bit of an error. So what happened here, we got data equals null.",
    "textdich": ""
  },
  {
    "start": 16259.28,
    "end": 16266.96,
    "text": "And so it looks like this didn't work. And it looks like it got it changed back to update post. So",
    "textdich": ""
  },
  {
    "start": 16266.96,
    "end": 16276.32,
    "text": "make sure you reference this variable. So I need that D. Now let's try that. And now we get the",
    "textdich": ""
  },
  {
    "start": 16276.32,
    "end": 16282.96,
    "text": "correct 404. When it comes to working with a database within a Python application, or really",
    "textdich": ""
  },
  {
    "start": 16282.96,
    "end": 16287.04,
    "text": "any application across any language, there's a couple of different ways of interacting with the",
    "textdich": ""
  },
  {
    "start": 16287.04,
    "end": 16293.44,
    "text": "database. And so we saw how we can use the default Postgres driver to talk to a Postgres database by",
    "textdich": ""
  },
  {
    "start": 16293.44,
    "end": 16298.24,
    "text": "sending SQL commands. And this is my preferred method of working with databases, because I'm",
    "textdich": ""
  },
  {
    "start": 16298.24,
    "end": 16302.88,
    "text": "fairly comfortable with SQL. And so it just makes sense to use raw SQL and send that directly to",
    "textdich": ""
  },
  {
    "start": 16302.88,
    "end": 16307.52,
    "text": "Postgres using whatever the default Postgres drivers for your specific programming language.",
    "textdich": ""
  },
  {
    "start": 16308.32,
    "end": 16312.8,
    "text": "However, there are other methods. And so you'll see that one of the popular ways of, you know,",
    "textdich": ""
  },
  {
    "start": 16312.8,
    "end": 16318.4,
    "text": "really working with databases is using what's referred to as a object relational mapper,",
    "textdich": ""
  },
  {
    "start": 16318.4,
    "end": 16325.76,
    "text": "or an ORM. And so an ORM is a layer abstraction that sits between the database and our fast API",
    "textdich": ""
  },
  {
    "start": 16325.76,
    "end": 16330.96,
    "text": "application. And so we never actually talked directly to a database anymore. Instead,",
    "textdich": ""
  },
  {
    "start": 16330.96,
    "end": 16336.48,
    "text": "we talked to the ORM. And then the ORM will actually talk to our database. And so some of",
    "textdich": ""
  },
  {
    "start": 16336.48,
    "end": 16341.76,
    "text": "the benefits are is that we don't actually have to work with SQL anymore. So instead of using raw",
    "textdich": ""
  },
  {
    "start": 16341.76,
    "end": 16347.04,
    "text": "SQL, what we'll do is we'll actually use standard Python code, calling various functions and methods",
    "textdich": ""
  },
  {
    "start": 16347.04,
    "end": 16352.32,
    "text": "that alternately translate into SQL themselves. So let's see what that actually looks like.",
    "textdich": ""
  },
  {
    "start": 16353.84,
    "end": 16356.8,
    "text": "And so with our traditional application, which is what we have now,",
    "textdich": ""
  },
  {
    "start": 16356.8,
    "end": 16361.52,
    "text": "we've got our fast API server, and it's going to talk to our database by sending SQL using",
    "textdich": ""
  },
  {
    "start": 16361.52,
    "end": 16367.2,
    "text": "the default Postgres database driver. However, with an ORM, what we can do is fast API no longer",
    "textdich": ""
  },
  {
    "start": 16367.2,
    "end": 16373.68,
    "text": "has to talk SQL. Instead, fast API will actually use regular Python code to send, you know,",
    "textdich": ""
  },
  {
    "start": 16373.68,
    "end": 16379.36,
    "text": "specific commands to an ORM. And then the ORM will take that Python code, convert it into",
    "textdich": ""
  },
  {
    "start": 16379.36,
    "end": 16383.84,
    "text": "regular SQL, and then using the same database driver that we're using for it'll actually talk",
    "textdich": ""
  },
  {
    "start": 16383.84,
    "end": 16388.0,
    "text": "to the database. And then it'll eventually send that result back to us because the databases,",
    "textdich": ""
  },
  {
    "start": 16388.0,
    "end": 16392.56,
    "text": "they can only talk SQL. However, by doing like this, we can kind of abstract away that SQL",
    "textdich": ""
  },
  {
    "start": 16392.56,
    "end": 16399.6,
    "text": "complexity and make use of very common Python objects, and various other Python features to",
    "textdich": ""
  },
  {
    "start": 16399.6,
    "end": 16405.36,
    "text": "actually generate and build queries, as well as to create and define tables. So let's take a look",
    "textdich": ""
  },
  {
    "start": 16405.36,
    "end": 16411.36,
    "text": "at what an ORM ultimately allows us to do. So one of the first things is, instead of us going into,",
    "textdich": ""
  },
  {
    "start": 16411.36,
    "end": 16416.4,
    "text": "you know, PG admin, and creating the tables and all the columns ourselves, what we can do is we can",
    "textdich": ""
  },
  {
    "start": 16416.96,
    "end": 16421.44,
    "text": "define our tables as Python models. And so if you take a look at the code down here,",
    "textdich": ""
  },
  {
    "start": 16421.44,
    "end": 16425.36,
    "text": "what we can do is we can actually define what our tables and Postgres are going to look like.",
    "textdich": ""
  },
  {
    "start": 16425.36,
    "end": 16428.56,
    "text": "And so you can see here, we give it the table a name, and then we could specify each of the",
    "textdich": ""
  },
  {
    "start": 16428.56,
    "end": 16431.92,
    "text": "columns, you'll see a lot of the common fields that we already worked with. So the types,",
    "textdich": ""
  },
  {
    "start": 16431.92,
    "end": 16436.48,
    "text": "so this is an integer, this is a string, we can also see if a field is nullable, we can see that",
    "textdich": ""
  },
  {
    "start": 16436.48,
    "end": 16441.52,
    "text": "the ID is set to be a primary key. So we're using standard Python classes to define our tables so",
    "textdich": ""
  },
  {
    "start": 16441.52,
    "end": 16448.48,
    "text": "that we don't need to do it ourselves using PG admin. And on top of that, queries can be made",
    "textdich": ""
  },
  {
    "start": 16448.48,
    "end": 16454.08,
    "text": "using regular Python code. So we can actually chain on different methods to construct various",
    "textdich": ""
  },
  {
    "start": 16454.08,
    "end": 16458.88,
    "text": "Python to construct various SQL queries. And so if you take a look at one of the queries down here",
    "textdich": ""
  },
  {
    "start": 16458.88,
    "end": 16463.28,
    "text": "below that I provide as an example, you can see we just do query, we provide the specific table",
    "textdich": ""
  },
  {
    "start": 16463.28,
    "end": 16467.36,
    "text": "that we want to query, and that's going to be based off of the specific models. And then we",
    "textdich": ""
  },
  {
    "start": 16467.36,
    "end": 16472.16,
    "text": "can just pass in whatever filter commands, and then grab the first entry. So you can see that",
    "textdich": ""
  },
  {
    "start": 16472.16,
    "end": 16477.52,
    "text": "there's no SQL anymore, it's just standard Python code. And so that makes it a little bit easier for",
    "textdich": ""
  },
  {
    "start": 16477.52,
    "end": 16482.32,
    "text": "some people who may not be as strong on SQL. And so they don't have to worry about writing these",
    "textdich": ""
  },
  {
    "start": 16482.32,
    "end": 16489.36,
    "text": "complex SQL commands, they can just chain on specific methods to a, to a DB query to generate",
    "textdich": ""
  },
  {
    "start": 16489.36,
    "end": 16494.64,
    "text": "their final SQL commands. And so the, you know, there's a couple of different ORMs, I'd say the",
    "textdich": ""
  },
  {
    "start": 16494.64,
    "end": 16500.16,
    "text": "most popular one within the Python world is SQL alchemy. And one of the things to keep in mind is",
    "textdich": ""
  },
  {
    "start": 16500.16,
    "end": 16506.32,
    "text": "that this is a ORM, that's a standalone library, right? So this has this library has nothing to do",
    "textdich": ""
  },
  {
    "start": 16506.32,
    "end": 16510.88,
    "text": "with fast API, we're going to use it in our fast API application. But I want you guys to understand",
    "textdich": ""
  },
  {
    "start": 16510.88,
    "end": 16516.88,
    "text": "that it actually has no relationship with fast API, it's not part of fast API, it's its own library.",
    "textdich": ""
  },
  {
    "start": 16516.88,
    "end": 16520.64,
    "text": "And you can use SQL alchemy with any web development framework, you can use it with",
    "textdich": ""
  },
  {
    "start": 16520.64,
    "end": 16525.36,
    "text": "any Python application, even if it's not a web application as well. So in the next video,",
    "textdich": ""
  },
  {
    "start": 16525.36,
    "end": 16530.16,
    "text": "we'll start taking a look at how to work with SQL alchemy and how to set up a database connection",
    "textdich": ""
  },
  {
    "start": 16530.16,
    "end": 16535.84,
    "text": "using SQL alchemy instead of using the default Postgres driver. Okay, so in this lesson,",
    "textdich": ""
  },
  {
    "start": 16535.84,
    "end": 16539.84,
    "text": "we're going to start taking a look at SQL alchemy and get that set up in our project.",
    "textdich": ""
  },
  {
    "start": 16539.84,
    "end": 16543.6,
    "text": "And so there's a couple of things that I want you guys to take a look at. So the first thing is,",
    "textdich": ""
  },
  {
    "start": 16543.6,
    "end": 16548.64,
    "text": "I want you to go to the SQL page. So if you just search for SQL, you'll get to the main page. And",
    "textdich": ""
  },
  {
    "start": 16548.64,
    "end": 16551.92,
    "text": "then if you want to go to library, and then references, and then version one dot four,",
    "textdich": ""
  },
  {
    "start": 16551.92,
    "end": 16555.28,
    "text": "which is the one we're going to use, however, I believe they're going to come out with a version",
    "textdich": ""
  },
  {
    "start": 16555.28,
    "end": 16560.08,
    "text": "2.0, which is going to be pretty different. So if you are watching this video in the future,",
    "textdich": ""
  },
  {
    "start": 16560.08,
    "end": 16564.16,
    "text": "you definitely want to install version 1.4, so that you can follow along with this course.",
    "textdich": ""
  },
  {
    "start": 16565.28,
    "end": 16568.64,
    "text": "So you can click on that. And so there's a nice little tutorial you can follow.",
    "textdich": ""
  },
  {
    "start": 16568.64,
    "end": 16574.24,
    "text": "And then there's also some reference documentation when it comes to setting up the ORM. So if you",
    "textdich": ""
  },
  {
    "start": 16574.24,
    "end": 16580.0,
    "text": "click on session session usage, this will show you how to set up a session. However, if you go to the",
    "textdich": ""
  },
  {
    "start": 16580.0,
    "end": 16585.6,
    "text": "fast API documentation as well, fast API, they've got great documentation. So if you go to the",
    "textdich": ""
  },
  {
    "start": 16585.6,
    "end": 16590.0,
    "text": "documentation and then select SQL relational databases, this is going to show you how to set",
    "textdich": ""
  },
  {
    "start": 16590.0,
    "end": 16595.12,
    "text": "it up with SQL alchemy. Okay, so first things first, let's go ahead and do a pip install for SQL",
    "textdich": ""
  },
  {
    "start": 16595.12,
    "end": 16607.68,
    "text": "alchemy. We'll do pip install. And then SQL alchemy. Now guys, I want you to remember that,",
    "textdich": ""
  },
  {
    "start": 16607.68,
    "end": 16613.36,
    "text": "well, first of all, I'm running 1.4.2.3. But the thing is SQL alchemy doesn't know how to talk to",
    "textdich": ""
  },
  {
    "start": 16613.36,
    "end": 16618.8,
    "text": "a database, right? It has all the code for us to write Python, define all the models and things",
    "textdich": ""
  },
  {
    "start": 16618.8,
    "end": 16622.72,
    "text": "like that. But it doesn't actually know how to talk to a database, it actually needs a database",
    "textdich": ""
  },
  {
    "start": 16622.72,
    "end": 16627.92,
    "text": "driver. And so if you take a look at all of the packages that we already installed by doing a pip",
    "textdich": ""
  },
  {
    "start": 16627.92,
    "end": 16634.4,
    "text": "freeze, right, we in the last video, or in the last section, we installed our Postgres database",
    "textdich": ""
  },
  {
    "start": 16634.4,
    "end": 16638.96,
    "text": "driver. So whatever database you guys plan to use, so if you want to use a MySQL database with,",
    "textdich": ""
  },
  {
    "start": 16640.4,
    "end": 16643.76,
    "text": "with SQL alchemy, you have to make sure that you install the underlying driver as well,",
    "textdich": ""
  },
  {
    "start": 16643.76,
    "end": 16647.36,
    "text": "because ultimately, that's what's used to talk to the database. Since we're using Postgres, we",
    "textdich": ""
  },
  {
    "start": 16647.36,
    "end": 16651.36,
    "text": "need to install this as well. But since we were using it originally in the previous sections,",
    "textdich": ""
  },
  {
    "start": 16651.36,
    "end": 16655.04,
    "text": "we are how we already have it installed. So we don't need to worry about doing that. But keep",
    "textdich": ""
  },
  {
    "start": 16655.04,
    "end": 16659.76,
    "text": "that in mind, right, SQL has no way to talk to a database, it still needs the underlying driver to",
    "textdich": ""
  },
  {
    "start": 16659.76,
    "end": 16664.96,
    "text": "communicate with it. And that's usually how all orms work. But now that we have that on inside our",
    "textdich": ""
  },
  {
    "start": 16664.96,
    "end": 16669.04,
    "text": "app folder, I'm going to create a new file, and I'm going to call this database.py. So this is",
    "textdich": ""
  },
  {
    "start": 16669.04,
    "end": 16680.56,
    "text": "going to handle our database connection. And from here, what I'm essentially going to do is just",
    "textdich": ""
  },
  {
    "start": 16680.56,
    "end": 16685.04,
    "text": "really follow this documentation. So if you take a look at it right here, we can just copy all of",
    "textdich": ""
  },
  {
    "start": 16685.04,
    "end": 16689.76,
    "text": "this code right here when it comes to importing statements. So this is just going to import all",
    "textdich": ""
  },
  {
    "start": 16689.76,
    "end": 16701.2,
    "text": "of this SQL alchemy code that we want. All right, and then we have to specify a our connection",
    "textdich": ""
  },
  {
    "start": 16701.2,
    "end": 16708.0,
    "text": "string. So where is our Postgres database located? And so if you take a look at how we had this set",
    "textdich": ""
  },
  {
    "start": 16708.0,
    "end": 16713.04,
    "text": "up before using the default Postgres database driver, right, we pass it into this connect",
    "textdich": ""
  },
  {
    "start": 16713.04,
    "end": 16718.4,
    "text": "function. However, a lot of times when it comes to working with databases, there's a unique URL",
    "textdich": ""
  },
  {
    "start": 16718.4,
    "end": 16723.6,
    "text": "that you create to connect to any kind of database. And there's a specific format for that. And the",
    "textdich": ""
  },
  {
    "start": 16723.6,
    "end": 16728.48,
    "text": "format for that is actually pretty simple. So go to database py, and I'm going to create a variable",
    "textdich": ""
  },
  {
    "start": 16728.48,
    "end": 16737.84,
    "text": "called SQL alchemy underscore database underscore URL. So this is going to be a regular string. And",
    "textdich": ""
  },
  {
    "start": 16737.84,
    "end": 16742.8,
    "text": "the structure of the URL for a Postgres database, it's going to be Postgres ql, because that's the",
    "textdich": ""
  },
  {
    "start": 16742.8,
    "end": 16753.6,
    "text": "type of database, colon slash slash, then we have the username that you have to put in colon. Then",
    "textdich": ""
  },
  {
    "start": 16753.6,
    "end": 16761.6,
    "text": "we have the password. And then we do at and then this is going to be the IP address.",
    "textdich": ""
  },
  {
    "start": 16765.84,
    "end": 16771.04,
    "text": "I'll say IP dash address, slash host name, whichever one you're using.",
    "textdich": ""
  },
  {
    "start": 16772.56,
    "end": 16774.16,
    "text": "In our case, that's going to be local host.",
    "textdich": ""
  },
  {
    "start": 16777.52,
    "end": 16782.0,
    "text": "And then you have to provide the database name that you want to connect to.",
    "textdich": ""
  },
  {
    "start": 16782.0,
    "end": 16788.32,
    "text": "So that's the format of a connection string that we have to pass into SQL alchemy.",
    "textdich": ""
  },
  {
    "start": 16790.48,
    "end": 16794.48,
    "text": "And then what we do is we say we have to create a engine. So the engine is what's responsible",
    "textdich": ""
  },
  {
    "start": 16795.12,
    "end": 16800.64,
    "text": "for SQL alchemy to connect to a Postgres database. So you do engine equals,",
    "textdich": ""
  },
  {
    "start": 16801.36,
    "end": 16803.2,
    "text": "and then we're going to reference this create engine.",
    "textdich": ""
  },
  {
    "start": 16803.2,
    "end": 16812.4,
    "text": "And then we pass in our connection string. So it's a SQL alchemy database URL. However,",
    "textdich": ""
  },
  {
    "start": 16812.4,
    "end": 16817.2,
    "text": "this is not filled in yet. So we're going to fill in this data. So go ahead and put in your username.",
    "textdich": ""
  },
  {
    "start": 16817.2,
    "end": 16822.08,
    "text": "So if you haven't created a custom user is going to default to Postgres, put in your password. So",
    "textdich": ""
  },
  {
    "start": 16822.08,
    "end": 16828.32,
    "text": "we'll do password 123 for me, the IP address slash host name, this is going to be local host.",
    "textdich": ""
  },
  {
    "start": 16828.32,
    "end": 16834.8,
    "text": "And then the database name is going to be fast API or whatever you created your database as.",
    "textdich": ""
  },
  {
    "start": 16836.48,
    "end": 16840.4,
    "text": "So that's your connection string. And like I mentioned before, it's never good to hardcode",
    "textdich": ""
  },
  {
    "start": 16840.4,
    "end": 16844.0,
    "text": "this value somewhere in your code, because now you've got your password stored in your code,",
    "textdich": ""
  },
  {
    "start": 16844.0,
    "end": 16848.24,
    "text": "and it's going to get checked into GitHub, and then anyone can see it. So this is bad practice.",
    "textdich": ""
  },
  {
    "start": 16848.24,
    "end": 16853.2,
    "text": "However, we will change this in the future. Right. So like I said, the engine is responsible for",
    "textdich": ""
  },
  {
    "start": 16853.2,
    "end": 16858.64,
    "text": "establishing that connection. However, when you actually want to talk to the SQL database,",
    "textdich": ""
  },
  {
    "start": 16858.64,
    "end": 16866.72,
    "text": "we have to make use of a session. So we do session, local equals session maker.",
    "textdich": ""
  },
  {
    "start": 16873.84,
    "end": 16880.4,
    "text": "And then we just pass in a couple of values. So auto commit false, auto flush equals false,",
    "textdich": ""
  },
  {
    "start": 16880.4,
    "end": 16891.2,
    "text": "and then bind equals engine. And all of these values, these are just some default values. Now",
    "textdich": ""
  },
  {
    "start": 16891.2,
    "end": 16896.96,
    "text": "keep in mind when you're creating the when you use when you use the create engine function. If you",
    "textdich": ""
  },
  {
    "start": 16896.96,
    "end": 16903.36,
    "text": "are using a SQLite database, you have to pass in this option as the second parameter. So you do",
    "textdich": ""
  },
  {
    "start": 16903.36,
    "end": 16907.84,
    "text": "the database URL, and then you do connection args equals check same thread equals false. This is",
    "textdich": ""
  },
  {
    "start": 16907.84,
    "end": 16911.52,
    "text": "something that's exclusive to SQLite, because it's I guess it's just running in memory,",
    "textdich": ""
  },
  {
    "start": 16911.52,
    "end": 16915.76,
    "text": "you don't need to do this for Postgres, you don't need to do it for any other SQL based database.",
    "textdich": ""
  },
  {
    "start": 16917.28,
    "end": 16919.84,
    "text": "And then you can see in the documentation, this is what the",
    "textdich": ""
  },
  {
    "start": 16920.56,
    "end": 16924.16,
    "text": "connection string will look like. So it's just confirming what I already showed you guys.",
    "textdich": ""
  },
  {
    "start": 16924.16,
    "end": 16929.12,
    "text": "And so we can just kind of keep scrolling down. And we don't really need anything else,",
    "textdich": ""
  },
  {
    "start": 16929.76,
    "end": 16934.88,
    "text": "except for this last line right here. So we here we have to define our base class. And so all of",
    "textdich": ""
  },
  {
    "start": 16934.88,
    "end": 16939.84,
    "text": "the models that we define to actually create our tables in Postgres, they're going to be extending",
    "textdich": ""
  },
  {
    "start": 16939.84,
    "end": 16948.64,
    "text": "this base class. So we can just copy this and then paste it into here. And when I was first",
    "textdich": ""
  },
  {
    "start": 16948.64,
    "end": 16953.6,
    "text": "doing all of this, you know, it was a little confusing and overwhelming. Just think about that.",
    "textdich": ""
  },
  {
    "start": 16954.88,
    "end": 16959.6,
    "text": "Just for now, I want you to assume that it's more of just a cut and paste job. It's just a copy and",
    "textdich": ""
  },
  {
    "start": 16959.6,
    "end": 16963.12,
    "text": "paste. The only thing that really matters that you're going to be changing is going to be that",
    "textdich": ""
  },
  {
    "start": 16963.12,
    "end": 16967.76,
    "text": "Postgres URL. But everything else for pretty much every project, you can just copy and paste to this",
    "textdich": ""
  },
  {
    "start": 16967.76,
    "end": 16973.6,
    "text": "entire code. And now within our database.py file, that's all we have to do. The next thing that we",
    "textdich": ""
  },
  {
    "start": 16973.6,
    "end": 16978.64,
    "text": "want to do is define our tables. Like I said, with an ORM, we no longer have to create tables",
    "textdich": ""
  },
  {
    "start": 16978.64,
    "end": 16986.32,
    "text": "within pgAdmin or any CLI utility, we can define it as a Python model. So what we're going to do",
    "textdich": ""
  },
  {
    "start": 16986.32,
    "end": 16989.84,
    "text": "is we're going to create a new file. And this is going to store all of our models. Well,",
    "textdich": ""
  },
  {
    "start": 16989.84,
    "end": 16996.32,
    "text": "and we'll call this models.py. So every model represents a table in our database. And what",
    "textdich": ""
  },
  {
    "start": 16996.32,
    "end": 17001.2,
    "text": "we're actually going to do is let's take a look at our database. And let's see how we can define",
    "textdich": ""
  },
  {
    "start": 17001.2,
    "end": 17008.96,
    "text": "this as a model within Python. So the first things first, we got to import a few things.",
    "textdich": ""
  },
  {
    "start": 17010.32,
    "end": 17014.8,
    "text": "And the main thing that we got to import is from our database file, we have to import base.",
    "textdich": ""
  },
  {
    "start": 17014.8,
    "end": 17028.64,
    "text": "So let's do import database. Sorry, that should be from that database import base. And then we",
    "textdich": ""
  },
  {
    "start": 17028.64,
    "end": 17034.16,
    "text": "can go ahead and define our model. So right now, we've been dealing with only working with posts.",
    "textdich": ""
  },
  {
    "start": 17034.16,
    "end": 17038.16,
    "text": "So we're going to create a model for posts. And like I said, this is going to actually create",
    "textdich": ""
  },
  {
    "start": 17038.16,
    "end": 17042.0,
    "text": "the table within Postgres. So what we're actually going to do is I'm going to delete this table",
    "textdich": ""
  },
  {
    "start": 17042.0,
    "end": 17048.24,
    "text": "eventually. And then we're going to have Python and SQL and my fast API application and SQL alchemy",
    "textdich": ""
  },
  {
    "start": 17048.24,
    "end": 17052.32,
    "text": "created for us on the fly. But I'm going to keep this table for now, just so we can take a look",
    "textdich": ""
  },
  {
    "start": 17052.32,
    "end": 17058.56,
    "text": "at all the fields that we have. So here, I'm just going to call this post. And keep in mind when it",
    "textdich": ""
  },
  {
    "start": 17058.56,
    "end": 17062.88,
    "text": "comes to classes in Python, you always want to make sure that they're capitalized. And then this",
    "textdich": ""
  },
  {
    "start": 17062.88,
    "end": 17067.76,
    "text": "has to extend base. So this is that base model from SQL alchemy, and we just have to extend it.",
    "textdich": ""
  },
  {
    "start": 17067.76,
    "end": 17074.32,
    "text": "And there's a couple things that we have to pass in. The first thing is, what do we want to call",
    "textdich": ""
  },
  {
    "start": 17074.32,
    "end": 17080.4,
    "text": "this table within Postgres? Because we have this class name, which only Python knows, but we can",
    "textdich": ""
  },
  {
    "start": 17080.4,
    "end": 17085.44,
    "text": "specify a specific name within Postgres. Now our table name right now is called posts. So I think",
    "textdich": ""
  },
  {
    "start": 17085.44,
    "end": 17090.88,
    "text": "we should just keep it at that. So we could say underscore underscore table name, underscore,",
    "textdich": ""
  },
  {
    "start": 17090.88,
    "end": 17095.36,
    "text": "underscore equals, and then the name of the table you want. So here, we're going to name it posts.",
    "textdich": ""
  },
  {
    "start": 17095.36,
    "end": 17101.36,
    "text": "And then now we have to define all of the columns, right? So just like we went within PG admin and",
    "textdich": ""
  },
  {
    "start": 17101.36,
    "end": 17105.28,
    "text": "went column by column creating it specifying all of their constraints and things like that,",
    "textdich": ""
  },
  {
    "start": 17105.28,
    "end": 17112.88,
    "text": "we're going to do this within within our Python code. So we'll say the first thing is we want an",
    "textdich": ""
  },
  {
    "start": 17112.88,
    "end": 17118.72,
    "text": "ID. So we'll say ID equals. And then how do we actually create a column? Well, we have to import",
    "textdich": ""
  },
  {
    "start": 17118.72,
    "end": 17128.16,
    "text": "something from SQL alchemy. So we'll say from SQL alchemy, import column. So now I can create a",
    "textdich": ""
  },
  {
    "start": 17128.16,
    "end": 17133.6,
    "text": "column. And then there's a couple of different fields that we have to pass in. So the first thing",
    "textdich": ""
  },
  {
    "start": 17133.6,
    "end": 17140.8,
    "text": "is what type of column is it? And so if you go back to our post table and go to properties, right,",
    "textdich": ""
  },
  {
    "start": 17140.8,
    "end": 17145.28,
    "text": "when we went into columns, the first thing they have to specify is what is the data type. And so",
    "textdich": ""
  },
  {
    "start": 17145.28,
    "end": 17151.44,
    "text": "we have access to most of the ones that we see in here. And but we have to import it from SQL",
    "textdich": ""
  },
  {
    "start": 17151.44,
    "end": 17157.44,
    "text": "alchemy first. So the ID column is going to be an integer. And so we have to actually import that",
    "textdich": ""
  },
  {
    "start": 17157.44,
    "end": 17165.04,
    "text": "we'll do integer. And now I can pass an integer. And that was a mistake. Let me delete that.",
    "textdich": ""
  },
  {
    "start": 17165.04,
    "end": 17172.96,
    "text": "And then if we take a look at our ID field, we did say that this was a primary key. So we'll say",
    "textdich": ""
  },
  {
    "start": 17174.96,
    "end": 17182.16,
    "text": "primary key equals true. And then if you want to, you can also say nullable",
    "textdich": ""
  },
  {
    "start": 17184.72,
    "end": 17193.52,
    "text": "equals false. Alright, so that's the equivalent of doing the not null. Alright, then we can",
    "textdich": ""
  },
  {
    "start": 17193.52,
    "end": 17199.68,
    "text": "define the next column was going to be title. And then we call column, this is going to be a string",
    "textdich": ""
  },
  {
    "start": 17199.68,
    "end": 17210.56,
    "text": "now. But we have to import string from our SQL alchemy. And once again, this is going to be",
    "textdich": ""
  },
  {
    "start": 17210.56,
    "end": 17217.6,
    "text": "nullable, set to false. We can't leave that blank. The next column is going to be fairly simple,",
    "textdich": ""
  },
  {
    "start": 17217.6,
    "end": 17228.56,
    "text": "similar, we've got content. This is going to be a string and nullable is going to be set to false.",
    "textdich": ""
  },
  {
    "start": 17228.56,
    "end": 17245.92,
    "text": "Then we got published. This is going to be a Boolean, but we got to import that from the library.",
    "textdich": ""
  },
  {
    "start": 17248.88,
    "end": 17256.8,
    "text": "And this one can be left as empty. And if you remember, we set a default value for our publish.",
    "textdich": ""
  },
  {
    "start": 17256.8,
    "end": 17261.44,
    "text": "So it's always going to be by default set to true if we don't pass in a value. And I believe",
    "textdich": ""
  },
  {
    "start": 17261.44,
    "end": 17264.72,
    "text": "that's how we do it. However, I'd have to double check just to make sure that's what it is.",
    "textdich": ""
  },
  {
    "start": 17265.76,
    "end": 17270.16,
    "text": "Now the last column that we'll need to add is the timestamp, but we're going to hold off on doing",
    "textdich": ""
  },
  {
    "start": 17270.16,
    "end": 17275.36,
    "text": "that for now. And we're going to leave it as such. And then later, we'll come back to adding that",
    "textdich": ""
  },
  {
    "start": 17275.36,
    "end": 17280.64,
    "text": "timestamp in. Alright, and so we're pretty much done with our model. And what we want to do is",
    "textdich": ""
  },
  {
    "start": 17280.64,
    "end": 17285.76,
    "text": "in our main file, we want to copy this command right here. So this create engine. So this is",
    "textdich": ""
  },
  {
    "start": 17285.76,
    "end": 17291.04,
    "text": "going to create all of our models. So we'll go to our code, we're going to go to my main file,",
    "textdich": ""
  },
  {
    "start": 17291.04,
    "end": 17298.0,
    "text": "and somewhere up top, I'm going to create that right there. However, we have to import the right",
    "textdich": ""
  },
  {
    "start": 17298.0,
    "end": 17303.2,
    "text": "commands. And so the first thing that we want to import is our model. So we'll do",
    "textdich": ""
  },
  {
    "start": 17305.2,
    "end": 17315.44,
    "text": "from star import models. And then from our database file, we'll say from dot which is current",
    "textdich": ""
  },
  {
    "start": 17315.44,
    "end": 17319.6,
    "text": "directory. So we're going to grab a file from our current directory, we're going to import",
    "textdich": ""
  },
  {
    "start": 17322.96,
    "end": 17326.0,
    "text": "right from our database file, we're going to import engine.",
    "textdich": ""
  },
  {
    "start": 17329.92,
    "end": 17331.6,
    "text": "And so at that point, that is good to go.",
    "textdich": ""
  },
  {
    "start": 17336.08,
    "end": 17338.64,
    "text": "And then finally, if we go back to our documentation, the last thing that we have",
    "textdich": ""
  },
  {
    "start": 17338.64,
    "end": 17343.6,
    "text": "to do is we have to create this dependency. So just go ahead and copy this for now.",
    "textdich": ""
  },
  {
    "start": 17343.6,
    "end": 17359.84,
    "text": "And just paste it in here. And we want to import session local as well. And we should no longer",
    "textdich": ""
  },
  {
    "start": 17359.84,
    "end": 17366.24,
    "text": "get any errors here. And so what this ultimately is going to do is the session object is kind of",
    "textdich": ""
  },
  {
    "start": 17366.24,
    "end": 17370.88,
    "text": "what's responsible for talking with the databases. And so we created this function where we actually",
    "textdich": ""
  },
  {
    "start": 17370.88,
    "end": 17375.28,
    "text": "get a connection to our database, or get a session to our database. And so every time",
    "textdich": ""
  },
  {
    "start": 17375.28,
    "end": 17379.04,
    "text": "we get a request, we're going to get a session, we're going to, you know, be able to send SQL",
    "textdich": ""
  },
  {
    "start": 17379.04,
    "end": 17384.24,
    "text": "statements to it. And then after that request is done, we'll then close it out. And so it's as much",
    "textdich": ""
  },
  {
    "start": 17384.24,
    "end": 17387.92,
    "text": "more efficient doing it like this, by having one little function, and we could just keep calling",
    "textdich": ""
  },
  {
    "start": 17387.92,
    "end": 17393.84,
    "text": "this function function every time we get a request to any of our API endpoints. And so now that we've",
    "textdich": ""
  },
  {
    "start": 17393.84,
    "end": 17399.68,
    "text": "got our dependency to actually get that session, for all of our path operations, where we want to",
    "textdich": ""
  },
  {
    "start": 17399.68,
    "end": 17404.4,
    "text": "perform some sort of operation on the database, what we're going to do is with inside the path",
    "textdich": ""
  },
  {
    "start": 17404.4,
    "end": 17410.56,
    "text": "operation function, we're going to pass in another parameter, and it's going to be session equals",
    "textdich": ""
  },
  {
    "start": 17410.56,
    "end": 17414.32,
    "text": "depends, and then we're going to call this get DB function. So what that's ultimately going to do is",
    "textdich": ""
  },
  {
    "start": 17414.32,
    "end": 17417.68,
    "text": "this line right here, don't worry too much about it. But like I said, it's going to create that",
    "textdich": ""
  },
  {
    "start": 17417.68,
    "end": 17421.92,
    "text": "session to our database, that we can perform some operations and then close it once that request is",
    "textdich": ""
  },
  {
    "start": 17421.92,
    "end": 17426.64,
    "text": "done. And then we can repeat that process for every single one of our path operations. Or anytime",
    "textdich": ""
  },
  {
    "start": 17426.64,
    "end": 17432.16,
    "text": "you send a request to any API to endpoint, you're going to have this being passed into the path",
    "textdich": ""
  },
  {
    "start": 17432.16,
    "end": 17436.4,
    "text": "operation function so that we can create that connection and then close it out. And like I said,",
    "textdich": ""
  },
  {
    "start": 17436.4,
    "end": 17440.56,
    "text": "a lot of this is just copy and paste. So once you write this down, even if you don't really understand",
    "textdich": ""
  },
  {
    "start": 17440.56,
    "end": 17446.4,
    "text": "it, you don't really have to touch it ever again after that. Alright, so let's copy this.",
    "textdich": ""
  },
  {
    "start": 17449.2,
    "end": 17454.24,
    "text": "And what we're going to do is I'm going to create another route, or another path operation,",
    "textdich": ""
  },
  {
    "start": 17454.24,
    "end": 17457.04,
    "text": "just for testing purposes, because I don't want to mess up any of our other code.",
    "textdich": ""
  },
  {
    "start": 17457.76,
    "end": 17463.36,
    "text": "And so I'll just say at app dot get. And this is going to be at slash",
    "textdich": ""
  },
  {
    "start": 17465.44,
    "end": 17472.48,
    "text": "SQL alchemy. So this is just a test to see if it works. And I'll say def test posts.",
    "textdich": ""
  },
  {
    "start": 17478.32,
    "end": 17483.68,
    "text": "And then we want to pass in that that code that we just copied right here. However,",
    "textdich": ""
  },
  {
    "start": 17483.68,
    "end": 17490.16,
    "text": "we don't have a session or depends in this case. So we're going to have to import those. So from",
    "textdich": ""
  },
  {
    "start": 17490.16,
    "end": 17499.12,
    "text": "our database file, our session is going to be from there. Actually, sorry, that's not actually",
    "textdich": ""
  },
  {
    "start": 17499.12,
    "end": 17505.04,
    "text": "coming from there. Is it Do we have a session in here? We actually do not have session here. So",
    "textdich": ""
  },
  {
    "start": 17505.04,
    "end": 17509.04,
    "text": "instead, this is not going to come from there. Actually, instead, we're going to import that",
    "textdich": ""
  },
  {
    "start": 17509.04,
    "end": 17520.88,
    "text": "from SQL alchemy. As a import SQL alchemy dot or m import session. And I realized this should be a",
    "textdich": ""
  },
  {
    "start": 17520.88,
    "end": 17534.56,
    "text": "from and then we also have to import the depends method from our fast API library. And so now if",
    "textdich": ""
  },
  {
    "start": 17534.56,
    "end": 17539.52,
    "text": "we go down to our route, we should get no more errors and it looks good. And then here, we're",
    "textdich": ""
  },
  {
    "start": 17539.52,
    "end": 17552.88,
    "text": "just going to return status success for now. And then finally, the last thing that we're going to",
    "textdich": ""
  },
  {
    "start": 17552.88,
    "end": 17562.24,
    "text": "do is we're going to delete our post table, I'm going to do a delete up, yes. And we have no",
    "textdich": ""
  },
  {
    "start": 17562.24,
    "end": 17570.32,
    "text": "more tables. Now, I can close this out. I didn't mean to save that close that don't save it.",
    "textdich": ""
  },
  {
    "start": 17573.44,
    "end": 17579.36,
    "text": "Right now we've got nothing. So let's save everything. And pray to God that there's no",
    "textdich": ""
  },
  {
    "start": 17579.36,
    "end": 17584.96,
    "text": "errors in it. So it doesn't look like there's any errors. And just by saving that code and",
    "textdich": ""
  },
  {
    "start": 17584.96,
    "end": 17589.84,
    "text": "restarting our application, what should have happened is, once our code ran, and we run this,",
    "textdich": ""
  },
  {
    "start": 17589.84,
    "end": 17595.28,
    "text": "I believe this should actually create the tables within Postgres. So let's refresh this real quick,",
    "textdich": ""
  },
  {
    "start": 17595.28,
    "end": 17602.08,
    "text": "I'm going to just right click here, hit refresh. We go under tables. Look at that, guys, we now",
    "textdich": ""
  },
  {
    "start": 17602.08,
    "end": 17606.48,
    "text": "have our post table, even though we deleted it. So if we take a look at our post table and go under",
    "textdich": ""
  },
  {
    "start": 17606.48,
    "end": 17611.84,
    "text": "properties, columns, you could see it's got the three columns that we default for columns that we",
    "textdich": ""
  },
  {
    "start": 17611.84,
    "end": 17620.8,
    "text": "defined. And that all comes from our models.py. And so we've got the four columns that we defined",
    "textdich": ""
  },
  {
    "start": 17620.8,
    "end": 17627.04,
    "text": "here. And so if whenever we start our application, SQL alchemy, we'll check to see if there's a table",
    "textdich": ""
  },
  {
    "start": 17627.04,
    "end": 17630.8,
    "text": "called posts. If it's there, it's not going to do anything. If it's not there, it's going to go",
    "textdich": ""
  },
  {
    "start": 17630.8,
    "end": 17638.08,
    "text": "ahead and create a first based off of what we defined in the model. Now, there's one last thing",
    "textdich": ""
  },
  {
    "start": 17638.08,
    "end": 17643.6,
    "text": "that I want to do just to kind of clean things up. In our main.py file, I don't like having this",
    "textdich": ""
  },
  {
    "start": 17643.6,
    "end": 17651.04,
    "text": "get DB function within here, I want to keep all of my database code, all of my database initialization",
    "textdich": ""
  },
  {
    "start": 17651.04,
    "end": 17655.68,
    "text": "code within my database.py file. So what I'm going to do is I'm going to actually cut this out,",
    "textdich": ""
  },
  {
    "start": 17656.88,
    "end": 17663.44,
    "text": "paste it into my database.py file. And then we're going to import this into my main file so that I",
    "textdich": ""
  },
  {
    "start": 17663.44,
    "end": 17668.48,
    "text": "don't have to have that in my main file, cluttering it up because our main file is already fairly",
    "textdich": ""
  },
  {
    "start": 17668.48,
    "end": 17680.96,
    "text": "large. So for my database file, I can import get underscore DB. And now we no longer need",
    "textdich": ""
  },
  {
    "start": 17680.96,
    "end": 17688.64,
    "text": "session local because it's showing us it's grayed out so we can remove that. And at that point,",
    "textdich": ""
  },
  {
    "start": 17688.64,
    "end": 17693.92,
    "text": "everything should still be working. So just as just to double check, I'm going to delete this once",
    "textdich": ""
  },
  {
    "start": 17693.92,
    "end": 17704.0,
    "text": "again. And then I'm going to save this, which is going to trigger a reload of our application.",
    "textdich": ""
  },
  {
    "start": 17704.0,
    "end": 17709.12,
    "text": "And then once our application reloads, if I refresh my database, it should have created another",
    "textdich": ""
  },
  {
    "start": 17711.04,
    "end": 17715.12,
    "text": "another post table. And it looks like it did. And let's just double check that all of the columns",
    "textdich": ""
  },
  {
    "start": 17715.12,
    "end": 17719.36,
    "text": "are there. And it looks like they are. So everything looks good. In the next video,",
    "textdich": ""
  },
  {
    "start": 17720.0,
    "end": 17724.64,
    "text": "the one thing that we do need to change is that we have to add the created at column. So we'll",
    "textdich": ""
  },
  {
    "start": 17724.64,
    "end": 17730.16,
    "text": "tackle that in the next video. In the last video, we were able to get SQL alchemy to generate our",
    "textdich": ""
  },
  {
    "start": 17730.16,
    "end": 17734.72,
    "text": "own post table. However, if we actually poke around with it, we'll see that there's a couple",
    "textdich": ""
  },
  {
    "start": 17734.72,
    "end": 17739.68,
    "text": "of issues. So if I go to right click on it and select properties, and I go to columns,",
    "textdich": ""
  },
  {
    "start": 17739.68,
    "end": 17744.72,
    "text": "all right, we can see that all of these fields are set to not null. And the primary key is set",
    "textdich": ""
  },
  {
    "start": 17744.72,
    "end": 17749.44,
    "text": "to the ID field. So everything looks good so far. However, when I go to the published",
    "textdich": ""
  },
  {
    "start": 17751.12,
    "end": 17756.64,
    "text": "column, and I go to constraints, I can see that the default isn't set. And so if we go back to",
    "textdich": ""
  },
  {
    "start": 17756.64,
    "end": 17763.68,
    "text": "our code, I actually made one little mistake, right, this default is not going to give us what",
    "textdich": ""
  },
  {
    "start": 17763.68,
    "end": 17768.8,
    "text": "we need. Instead, what we need to do is we need to set this to server default, because it's",
    "textdich": ""
  },
  {
    "start": 17768.8,
    "end": 17774.0,
    "text": "ultimately the the Postgres server or the database server that's going to actually send the default.",
    "textdich": ""
  },
  {
    "start": 17774.0,
    "end": 17778.8,
    "text": "So I'm gonna put it in quotations. As a string, we can just set this to be true.",
    "textdich": ""
  },
  {
    "start": 17781.28,
    "end": 17784.96,
    "text": "And then if you haven't added this, go ahead and add nullable to false, I'm going to make all of",
    "textdich": ""
  },
  {
    "start": 17784.96,
    "end": 17790.16,
    "text": "my columns are not allowed to be empty. That's because the server is going to add the default",
    "textdich": ""
  },
  {
    "start": 17790.16,
    "end": 17798.64,
    "text": "to true for this. So let's try this out. Now, if I hit save right now, and I go to my Postgres",
    "textdich": ""
  },
  {
    "start": 17798.64,
    "end": 17803.76,
    "text": "database, and then we can just right click on this hit refresh. And then we do properties again,",
    "textdich": ""
  },
  {
    "start": 17803.76,
    "end": 17810.32,
    "text": "and I go to column. And we go to sorry, go to the published column, we'll see that there's no",
    "textdich": ""
  },
  {
    "start": 17810.32,
    "end": 17816.0,
    "text": "constraints. And so this is kind of a limitation of SQL alchemy, because SQL alchemy will generate",
    "textdich": ""
  },
  {
    "start": 17816.0,
    "end": 17820.72,
    "text": "your tables. But it does it in a very simple manner. What it actually does is if I go to my",
    "textdich": ""
  },
  {
    "start": 17820.72,
    "end": 17826.16,
    "text": "main.py file, and then it runs this code, I believe this is the code that actually creates the tables,",
    "textdich": ""
  },
  {
    "start": 17826.16,
    "end": 17830.56,
    "text": "what it does is it'll go through all of our models, and it will look for a table named called posts.",
    "textdich": ""
  },
  {
    "start": 17830.56,
    "end": 17835.6,
    "text": "If it doesn't exist, it will then create one based off of these rules. However, if the table",
    "textdich": ""
  },
  {
    "start": 17835.6,
    "end": 17839.6,
    "text": "already exists, even though we've changed the different attributes, the columns and things",
    "textdich": ""
  },
  {
    "start": 17839.6,
    "end": 17844.24,
    "text": "like that, if it looks for the if it finds a table with that name already in there, it's not",
    "textdich": ""
  },
  {
    "start": 17844.24,
    "end": 17848.88,
    "text": "going to touch it. So it's not going to help us modify tables and things like that. In fact,",
    "textdich": ""
  },
  {
    "start": 17848.88,
    "end": 17853.36,
    "text": "if you actually take a look at the documentation, I've got so many tabs open, let's see if I can",
    "textdich": ""
  },
  {
    "start": 17853.36,
    "end": 17860.4,
    "text": "find it right here. I search for alembic. And so normally, when it comes to creating your tables,",
    "textdich": ""
  },
  {
    "start": 17860.4,
    "end": 17866.08,
    "text": "when it comes to handling migrations, which is a term that's used for changing the columns,",
    "textdich": ""
  },
  {
    "start": 17866.08,
    "end": 17871.28,
    "text": "and the schema of your tables, then you want to use another software called alembic. SQL alchemy",
    "textdich": ""
  },
  {
    "start": 17871.28,
    "end": 17875.68,
    "text": "isn't really meant for handling database migrations, we're making changes to it. So that's why we don't",
    "textdich": ""
  },
  {
    "start": 17875.68,
    "end": 17879.92,
    "text": "see it automatically make those changes. So for now, what we're going to do to get around this",
    "textdich": ""
  },
  {
    "start": 17879.92,
    "end": 17883.84,
    "text": "limitation is, I'm just going to cancel out of this, and we're just going to delete the table.",
    "textdich": ""
  },
  {
    "start": 17884.88,
    "end": 17890.48,
    "text": "So we'll drop the table. And then we'll go back to our code. And I'm just gonna hit save.",
    "textdich": ""
  },
  {
    "start": 17891.52,
    "end": 17894.08,
    "text": "And so now that it runs, again, it's going to look for a table called post,",
    "textdich": ""
  },
  {
    "start": 17894.08,
    "end": 17897.84,
    "text": "since we deleted it, it's not going to see it, it's going to then go ahead and create our table.",
    "textdich": ""
  },
  {
    "start": 17900.4,
    "end": 17904.72,
    "text": "And now if I just right click on tables, hit refresh, we should see that we have a post",
    "textdich": ""
  },
  {
    "start": 17904.72,
    "end": 17911.36,
    "text": "table. And if I go to properties, we can then go to columns, published. And if we go to constraints,",
    "textdich": ""
  },
  {
    "start": 17911.36,
    "end": 17915.76,
    "text": "we can see the default set to true. So it looks like that fixed that issue. Now, the second thing",
    "textdich": ""
  },
  {
    "start": 17915.76,
    "end": 17921.04,
    "text": "I want to do is I want to add our timestamp column, because that's very important, we need",
    "textdich": ""
  },
  {
    "start": 17921.04,
    "end": 17927.36,
    "text": "to know when a post was created. So let's create a field called created, created underscore at",
    "textdich": ""
  },
  {
    "start": 17928.88,
    "end": 17932.96,
    "text": "column. Now, what's the column type going to be? Well, we're going to use a column type of",
    "textdich": ""
  },
  {
    "start": 17932.96,
    "end": 17937.84,
    "text": "timestamp. So type in timestamp, we can let vs code automatically import it. But all it's going",
    "textdich": ""
  },
  {
    "start": 17937.84,
    "end": 17951.04,
    "text": "to do is it's going to import it from SQL, SQL, alchemy dot SQL dot SQL types. And then within",
    "textdich": ""
  },
  {
    "start": 17951.04,
    "end": 17957.84,
    "text": "here, we have to pass in a property of timezone equals true. So this is going to also add in the",
    "textdich": ""
  },
  {
    "start": 17957.84,
    "end": 17967.6,
    "text": "timezone. And that's going to be a capital T. And the next thing we want to do is provide a it's",
    "textdich": ""
  },
  {
    "start": 17967.6,
    "end": 17972.96,
    "text": "going to be nullable set to false. So it can't be left empty, but we're going to give it a default",
    "textdich": ""
  },
  {
    "start": 17972.96,
    "end": 17978.0,
    "text": "value if the user doesn't provide it, which they never will. And so we'll do server default. But",
    "textdich": ""
  },
  {
    "start": 17978.0,
    "end": 17983.84,
    "text": "we have to do something a little bit different here, I have to import a function or method called",
    "textdich": ""
  },
  {
    "start": 17983.84,
    "end": 17989.52,
    "text": "text from SQL alchemy. So from this, right here, SQL alchemy dot SQL dot expressions,",
    "textdich": ""
  },
  {
    "start": 17989.52,
    "end": 17996.8,
    "text": "and the text. And then here, we're going to do now, right, just like we typed in within",
    "textdich": ""
  },
  {
    "start": 17996.8,
    "end": 18000.72,
    "text": "our Postgres database, you know, if we wanted to manually do this, we would just go under",
    "textdich": ""
  },
  {
    "start": 18002.0,
    "end": 18006.08,
    "text": "the column, let's say we had to create a column, we can just go in there, go into constraints,",
    "textdich": ""
  },
  {
    "start": 18006.08,
    "end": 18011.28,
    "text": "and then type in now like that. And that's going to generate a timestamp. So we're doing the same",
    "textdich": ""
  },
  {
    "start": 18011.28,
    "end": 18015.6,
    "text": "thing, but we're just doing it through Python code now. So once again, we'll save this,",
    "textdich": ""
  },
  {
    "start": 18016.56,
    "end": 18018.72,
    "text": "we're going to drop this table so that we recreate it.",
    "textdich": ""
  },
  {
    "start": 18023.6,
    "end": 18027.68,
    "text": "And then we'll save it one more time, this is going to trigger a reload and then a refresh of",
    "textdich": ""
  },
  {
    "start": 18027.68,
    "end": 18033.28,
    "text": "the table, we should now see it. So let's go into properties. Let's take a look at our columns,",
    "textdich": ""
  },
  {
    "start": 18033.28,
    "end": 18037.28,
    "text": "we've got the created at column. And then if I go under constraints, we can see the default is now",
    "textdich": ""
  },
  {
    "start": 18037.28,
    "end": 18041.52,
    "text": "set to the current time. So we've got that working, let's just quickly test this out. So I'm going to",
    "textdich": ""
  },
  {
    "start": 18041.52,
    "end": 18053.36,
    "text": "go into view, edit all rows. And I'm just going to create a post. We'll save this and let's make",
    "textdich": ""
  },
  {
    "start": 18053.36,
    "end": 18057.68,
    "text": "sure all the default values gets it looks like that's good. And it looks like the time is set",
    "textdich": ""
  },
  {
    "start": 18057.68,
    "end": 18064.88,
    "text": "just right as well. So now that we have verified that SQL alchemy has created the proper tables",
    "textdich": ""
  },
  {
    "start": 18064.88,
    "end": 18070.24,
    "text": "within Postgres, it's time to go ahead and create our first query. And like I mentioned in a previous",
    "textdich": ""
  },
  {
    "start": 18070.24,
    "end": 18074.8,
    "text": "lesson, with SQL alchemy, or really any ORM, the way we do queries is going to little bit is going",
    "textdich": ""
  },
  {
    "start": 18074.8,
    "end": 18079.52,
    "text": "to be a little bit different, we're no longer going to rely on regular SQL, instead, we're going to",
    "textdich": ""
  },
  {
    "start": 18079.52,
    "end": 18086.48,
    "text": "use basic Python methods. And so go to your main folder, sorry, your main file, right. And we",
    "textdich": ""
  },
  {
    "start": 18086.48,
    "end": 18092.24,
    "text": "saw this test route that we defined. So what we're going to do is we're going to run our first query",
    "textdich": ""
  },
  {
    "start": 18092.24,
    "end": 18096.32,
    "text": "within this test route. And then afterwards, we can go ahead and delete it. And then we can update",
    "textdich": ""
  },
  {
    "start": 18096.32,
    "end": 18102.64,
    "text": "all of our pre existing path operations. And so like I mentioned before, anytime you want to",
    "textdich": ""
  },
  {
    "start": 18102.64,
    "end": 18107.92,
    "text": "perform any kind of database operation with SQL alchemy, within fast API, we want to make sure",
    "textdich": ""
  },
  {
    "start": 18107.92,
    "end": 18114.8,
    "text": "that we pass it as a parameter into our path operation function. So you just call DB. So we're",
    "textdich": ""
  },
  {
    "start": 18114.8,
    "end": 18118.64,
    "text": "saving it inside a variable called DB. And then we're just calling the session object. And then",
    "textdich": ""
  },
  {
    "start": 18118.64,
    "end": 18123.44,
    "text": "we're calling the get DB function within depends. So this makes it a dependency. And so if you",
    "textdich": ""
  },
  {
    "start": 18123.44,
    "end": 18127.52,
    "text": "already forgot what that is, just go to your database, you can see that it's this function",
    "textdich": ""
  },
  {
    "start": 18127.52,
    "end": 18131.92,
    "text": "right here. So this is going to actually create a session towards our database, for every request",
    "textdich": ""
  },
  {
    "start": 18131.92,
    "end": 18135.04,
    "text": "to that specific API endpoint, and then it's going to close it out once we're done.",
    "textdich": ""
  },
  {
    "start": 18138.32,
    "end": 18142.16,
    "text": "And then within main, there's one thing that we have to import, and that is models. So you just",
    "textdich": ""
  },
  {
    "start": 18142.16,
    "end": 18147.2,
    "text": "do from dot import models, that's going to import this specific model so that we can actually make",
    "textdich": ""
  },
  {
    "start": 18147.2,
    "end": 18155.76,
    "text": "queries to it. All right, and to make a query, right, we're going to access that database object,",
    "textdich": ""
  },
  {
    "start": 18155.76,
    "end": 18163.84,
    "text": "which is getting passed into our function. And then here, we want to tap into the query method.",
    "textdich": ""
  },
  {
    "start": 18166.24,
    "end": 18171.36,
    "text": "And then we have to pass in the specific model for the table we want to query, we only have one",
    "textdich": ""
  },
  {
    "start": 18171.36,
    "end": 18175.84,
    "text": "model in this case, which is our post model. So that when we use this specific model, it's going",
    "textdich": ""
  },
  {
    "start": 18175.84,
    "end": 18185.28,
    "text": "to allow us to make a query to our post table. And here, so we'll call models dot post. So that's",
    "textdich": ""
  },
  {
    "start": 18185.28,
    "end": 18189.84,
    "text": "going to allow us to access that model. And then from here, what we can do is, we have a couple of",
    "textdich": ""
  },
  {
    "start": 18189.84,
    "end": 18194.56,
    "text": "different methods that we run can run. But since we want to query all of our posts, we just do all",
    "textdich": ""
  },
  {
    "start": 18195.36,
    "end": 18200.96,
    "text": "is this is going to grab every single entry within the post table. And then here, we could just save",
    "textdich": ""
  },
  {
    "start": 18200.96,
    "end": 18208.4,
    "text": "this as a variable called posts. And then for the return statement, I'm just going to say we're going",
    "textdich": ""
  },
  {
    "start": 18208.4,
    "end": 18217.44,
    "text": "to return data, and then posts. So let's test this out now. And I'm going to go to get posts.",
    "textdich": ""
  },
  {
    "start": 18218.24,
    "end": 18222.64,
    "text": "Actually, I'm just going to create a new test, test routes are a new request.",
    "textdich": ""
  },
  {
    "start": 18222.64,
    "end": 18234.88,
    "text": "I'm just going to copy the URL. And then this is stored in SQL alchemy. Let's try this out. And",
    "textdich": ""
  },
  {
    "start": 18234.88,
    "end": 18241.12,
    "text": "this should result in us getting just one post. So let me just double check my Postgres database,",
    "textdich": ""
  },
  {
    "start": 18241.12,
    "end": 18246.08,
    "text": "just to make sure that we only have one post. So I'm just going to open up the query tool.",
    "textdich": ""
  },
  {
    "start": 18246.08,
    "end": 18255.04,
    "text": "And we'll just do select star from posts. Yep, and it looks like I only have one post. And so that's",
    "textdich": ""
  },
  {
    "start": 18255.04,
    "end": 18271.2,
    "text": "why we only got one post in our request. And if I add a new post, and save that, and we make",
    "textdich": ""
  },
  {
    "start": 18271.2,
    "end": 18275.2,
    "text": "a new request, we should get two posts. So that verifies that we are successfully connecting to",
    "textdich": ""
  },
  {
    "start": 18275.2,
    "end": 18280.72,
    "text": "our database. And we are successfully retrieving those posts. And so I want you to stop and really",
    "textdich": ""
  },
  {
    "start": 18280.72,
    "end": 18286.56,
    "text": "take a look at how the queries vary when it comes to working with an ORM versus working with regular",
    "textdich": ""
  },
  {
    "start": 18286.56,
    "end": 18292.32,
    "text": "SQL. Because if we actually see the path operation for getting posts at slash posts here, this is",
    "textdich": ""
  },
  {
    "start": 18292.32,
    "end": 18296.4,
    "text": "where we're using regular SQL. So here we do select star from posts. But if you take a look at this,",
    "textdich": ""
  },
  {
    "start": 18296.4,
    "end": 18300.64,
    "text": "there's no SQL here, right, we're just tapping into the database object. And we're going to call a",
    "textdich": ""
  },
  {
    "start": 18300.64,
    "end": 18305.52,
    "text": "query. And then from here, we have to tell what specific model, which in this case, remember,",
    "textdich": ""
  },
  {
    "start": 18305.52,
    "end": 18311.6,
    "text": "these models represent tables. And then we just say I want all posts. Now, what's even more",
    "textdich": ""
  },
  {
    "start": 18311.6,
    "end": 18318.8,
    "text": "interesting is if I remove this, and then for now, I'm just going to hard code, you know, successful,",
    "textdich": ""
  },
  {
    "start": 18318.8,
    "end": 18325.44,
    "text": "just some random data, I'm going to do a print posts. So right here, we're calling the database",
    "textdich": ""
  },
  {
    "start": 18325.44,
    "end": 18329.04,
    "text": "object, and then we're calling query. So what actually happens when we just do this?",
    "textdich": ""
  },
  {
    "start": 18329.04,
    "end": 18335.2,
    "text": "Well, let's save that, we're going to send a request, we're not going to get any data back,",
    "textdich": ""
  },
  {
    "start": 18335.2,
    "end": 18339.76,
    "text": "that's to be expected. But take a look at this, right, we're actually taking a look at what the",
    "textdich": ""
  },
  {
    "start": 18339.76,
    "end": 18344.56,
    "text": "query object returns. And you can see that it's just returning a regular SQL statement. So it's",
    "textdich": ""
  },
  {
    "start": 18344.56,
    "end": 18348.96,
    "text": "saying I want you to return post that ID, and then it's just renaming it posts underscore ID,",
    "textdich": ""
  },
  {
    "start": 18348.96,
    "end": 18352.8,
    "text": "then I want to grab post that title, we're renaming it as post that title. So it's grabbing all of",
    "textdich": ""
  },
  {
    "start": 18352.8,
    "end": 18357.92,
    "text": "the columns. And then we're going to grab it from our post table. So it's really no different than",
    "textdich": ""
  },
  {
    "start": 18357.92,
    "end": 18363.52,
    "text": "just running, you know, select star from posts, essentially, that's all it's doing. But it's just",
    "textdich": ""
  },
  {
    "start": 18363.52,
    "end": 18367.44,
    "text": "renaming all the columns to be a little bit more easy to read. So you can see that these queries,",
    "textdich": ""
  },
  {
    "start": 18367.44,
    "end": 18371.92,
    "text": "this query object is just performing SQL. So it abstracts all of the SQL away from you.",
    "textdich": ""
  },
  {
    "start": 18371.92,
    "end": 18375.44,
    "text": "And it handles all the logic of generating the SQL so that you don't have to know,",
    "textdich": ""
  },
  {
    "start": 18375.44,
    "end": 18379.6,
    "text": "or you don't have to have as solid of an understanding of SQL. And this allows you",
    "textdich": ""
  },
  {
    "start": 18379.6,
    "end": 18385.04,
    "text": "to really focus on building out the API, this allows you to focus on working with Python and",
    "textdich": ""
  },
  {
    "start": 18385.04,
    "end": 18390.72,
    "text": "less with SQL in the databases themselves. So now we know when we call query, this actually creates",
    "textdich": ""
  },
  {
    "start": 18390.72,
    "end": 18395.28,
    "text": "the query, however, to run the query, we have to run a specific method. So there's a couple of",
    "textdich": ""
  },
  {
    "start": 18395.28,
    "end": 18399.44,
    "text": "methods that we can run. But if you want to grab everything, then you just call all and then it's",
    "textdich": ""
  },
  {
    "start": 18399.44,
    "end": 18403.68,
    "text": "going to take this SQL query, and then it's actually going to run it against the database and",
    "textdich": ""
  },
  {
    "start": 18403.68,
    "end": 18409.6,
    "text": "then return it. But until we call this last method, it's nothing more than just a SQL query that hasn't",
    "textdich": ""
  },
  {
    "start": 18409.6,
    "end": 18415.92,
    "text": "been run yet. Alright, so now that we know how to fetch all posts, let's just go down here.",
    "textdich": ""
  },
  {
    "start": 18417.04,
    "end": 18423.68,
    "text": "Right. And let's just put in this logic. So this is our actual endpoint for retrieving posts.",
    "textdich": ""
  },
  {
    "start": 18423.68,
    "end": 18428.32,
    "text": "This is our get posts. And what we're going to do is I'm going to comment this out, just so that,",
    "textdich": ""
  },
  {
    "start": 18429.2,
    "end": 18432.72,
    "text": "you know, later down the road, if you guys want to just take a look back how you do it with regular",
    "textdich": ""
  },
  {
    "start": 18432.72,
    "end": 18438.64,
    "text": "raw SQL, we still have that within the code base. And anytime you want to work with the database,",
    "textdich": ""
  },
  {
    "start": 18438.64,
    "end": 18443.04,
    "text": "remember, you have to pass it in to the path operation function. So this is going to make",
    "textdich": ""
  },
  {
    "start": 18443.04,
    "end": 18448.0,
    "text": "it a dependency. And you'll see by doing it like this, it'll make testing a lot easier.",
    "textdich": ""
  },
  {
    "start": 18448.8,
    "end": 18456.64,
    "text": "And then we can just copy this right here. And then we're going to return the post. So let's",
    "textdich": ""
  },
  {
    "start": 18456.64,
    "end": 18466.64,
    "text": "test that out. And now if I go to get posts, hit send, you can see that we successfully retrieved",
    "textdich": ""
  },
  {
    "start": 18466.64,
    "end": 18471.84,
    "text": "both of our posts. Alright, and it really is as simple as that. And then in the next video,",
    "textdich": ""
  },
  {
    "start": 18471.84,
    "end": 18476.64,
    "text": "we'll start taking a look at how we can create posts and so on. In this video, we're going to",
    "textdich": ""
  },
  {
    "start": 18476.64,
    "end": 18482.48,
    "text": "start tackling how to create a post using a ORM or specifically SQL alchemy. So once again,",
    "textdich": ""
  },
  {
    "start": 18482.48,
    "end": 18487.04,
    "text": "I'm going to copy out or comment out all of the SQL code. And what we're going to do is we're",
    "textdich": ""
  },
  {
    "start": 18487.04,
    "end": 18492.24,
    "text": "going to see how we can actually create a brand new object, or a brand new post in this case.",
    "textdich": ""
  },
  {
    "start": 18492.24,
    "end": 18497.2,
    "text": "So first things first, anytime any of your path operations need to work with the database,",
    "textdich": ""
  },
  {
    "start": 18497.2,
    "end": 18502.8,
    "text": "we need to make sure that we copy this exact input argument into the path operation function,",
    "textdich": ""
  },
  {
    "start": 18502.8,
    "end": 18507.12,
    "text": "this is going to give us a access to our database object so that we can actually make queries and",
    "textdich": ""
  },
  {
    "start": 18507.12,
    "end": 18511.68,
    "text": "make changes to our database. And by passing it in like this, it's going to make it a dependency",
    "textdich": ""
  },
  {
    "start": 18511.68,
    "end": 18514.96,
    "text": "and it's going to make it a lot easier for testing and, and things like that. Technically,",
    "textdich": ""
  },
  {
    "start": 18514.96,
    "end": 18518.96,
    "text": "you don't have to do it like this. You could just import it directly in there. However,",
    "textdich": ""
  },
  {
    "start": 18518.96,
    "end": 18523.68,
    "text": "by doing it like this, like I said, testing becomes a little bit easier. All right,",
    "textdich": ""
  },
  {
    "start": 18523.68,
    "end": 18528.8,
    "text": "so we've got our models, right, and we have one specific model. So this model represents our posts.",
    "textdich": ""
  },
  {
    "start": 18529.44,
    "end": 18535.52,
    "text": "And so to create a brand new post, we have to reference this model and pass in the specific",
    "textdich": ""
  },
  {
    "start": 18535.52,
    "end": 18540.0,
    "text": "fields that we want to create a new entry with. So first of all, we have to make sure we import",
    "textdich": ""
  },
  {
    "start": 18540.0,
    "end": 18545.52,
    "text": "that model. And you can see that we are importing all of our models by doing from dot import models,",
    "textdich": ""
  },
  {
    "start": 18545.52,
    "end": 18555.44,
    "text": "so we can access models dot post in this case to x that specific model. And so here, I'm going to",
    "textdich": ""
  },
  {
    "start": 18555.44,
    "end": 18565.92,
    "text": "do models dot post. And then we have to pass in the properties of the Brandy of the brand new",
    "textdich": ""
  },
  {
    "start": 18566.88,
    "end": 18571.28,
    "text": "post that we want to create. And so what are the properties, right? If you take a look at our",
    "textdich": ""
  },
  {
    "start": 18571.28,
    "end": 18576.4,
    "text": "SQL statement, we need the title, the content and the published Boolean, right? And that's all going",
    "textdich": ""
  },
  {
    "start": 18576.4,
    "end": 18581.04,
    "text": "to be derived from the request that we get, which is going to be stored in the post object. So I can",
    "textdich": ""
  },
  {
    "start": 18581.04,
    "end": 18585.92,
    "text": "reference all of those fields. So I can say the title for the brand new post is going to be set",
    "textdich": ""
  },
  {
    "start": 18585.92,
    "end": 18592.16,
    "text": "to whatever the title the user sent that and that can be accessed with post dot title. The content",
    "textdich": ""
  },
  {
    "start": 18592.96,
    "end": 18599.04,
    "text": "of the brand new created post is going to be a content equals post dot content. And then the",
    "textdich": ""
  },
  {
    "start": 18599.04,
    "end": 18604.32,
    "text": "same thing is going to be for published. So it's going to be post dot published. And if you take a",
    "textdich": ""
  },
  {
    "start": 18604.32,
    "end": 18609.04,
    "text": "look at this code so far, this doesn't look too different from the SQL statement, right? This says",
    "textdich": ""
  },
  {
    "start": 18609.04,
    "end": 18614.08,
    "text": "insert into posts. And then we pass in post that title into the title post that content into the",
    "textdich": ""
  },
  {
    "start": 18614.08,
    "end": 18618.24,
    "text": "content, and then post that published into published, right. And so this pretty much exactly",
    "textdich": ""
  },
  {
    "start": 18618.24,
    "end": 18623.12,
    "text": "the same thing. We're not doing anything different. We're just having SQL alchemy handle all that",
    "textdich": ""
  },
  {
    "start": 18623.12,
    "end": 18626.96,
    "text": "logic. So we can do everything in just standard Python code. And there's no SQL anymore.",
    "textdich": ""
  },
  {
    "start": 18626.96,
    "end": 18632.24,
    "text": "All right, and the next thing that we want to do is well, let's save the result as new post.",
    "textdich": ""
  },
  {
    "start": 18634.8,
    "end": 18642.08,
    "text": "And let's see what happens. So I'm going to save this. And then we're going to set a little query.",
    "textdich": ""
  },
  {
    "start": 18642.08,
    "end": 18648.0,
    "text": "So first of all, I'm going to create a new post and I call this a welcome to fun land.",
    "textdich": ""
  },
  {
    "start": 18648.0,
    "end": 18659.2,
    "text": "So much fun. Okay, and so then we'll, we will send a request. And we got some data back. And so it",
    "textdich": ""
  },
  {
    "start": 18659.2,
    "end": 18664.88,
    "text": "looks like it worked. However, take a look at our, our data, we've got a title, we've got a content,",
    "textdich": ""
  },
  {
    "start": 18664.88,
    "end": 18668.96,
    "text": "and then we've got published. But where's the ID? Where's the created that field, all the fields",
    "textdich": ""
  },
  {
    "start": 18668.96,
    "end": 18673.68,
    "text": "that the database creates. So this makes me suspect that this didn't actually work. So let's",
    "textdich": ""
  },
  {
    "start": 18673.68,
    "end": 18678.72,
    "text": "go to Postgres. And then go ahead and make a query to your table. So select star from post,",
    "textdich": ""
  },
  {
    "start": 18678.72,
    "end": 18685.52,
    "text": "that's going to grab all of them. And you'll see that based off of the title, welcome to fun land,",
    "textdich": ""
  },
  {
    "start": 18685.52,
    "end": 18689.76,
    "text": "I do not have that in there. So it looks like this was not successfully able to create a post",
    "textdich": ""
  },
  {
    "start": 18689.76,
    "end": 18696.4,
    "text": "within our database. So let's take a look and see what went wrong. And if you actually take a look",
    "textdich": ""
  },
  {
    "start": 18696.4,
    "end": 18702.08,
    "text": "at the the previous method, right, you could see that we actually have to commit something to the",
    "textdich": ""
  },
  {
    "start": 18702.08,
    "end": 18707.44,
    "text": "database. So we can create an entry, but it doesn't actually get pushed to the database until we do a",
    "textdich": ""
  },
  {
    "start": 18707.44,
    "end": 18711.92,
    "text": "commit. And so I'm suspecting that we probably have to do a similar thing. So when it comes to",
    "textdich": ""
  },
  {
    "start": 18711.92,
    "end": 18716.48,
    "text": "SQL alchemy, what we need to do is, first of all, we have to tap into the database object. Now,",
    "textdich": ""
  },
  {
    "start": 18717.36,
    "end": 18722.8,
    "text": "we want to say DB dot add, and then we're going to add this newly created post. So this is going to",
    "textdich": ""
  },
  {
    "start": 18722.8,
    "end": 18727.52,
    "text": "add it to the database. However, just like with the connection commit, we have to commit those",
    "textdich": ""
  },
  {
    "start": 18727.52,
    "end": 18736.24,
    "text": "changes. So we do DB dot commit. And then the last thing that we need to do is, if you take a look at",
    "textdich": ""
  },
  {
    "start": 18736.24,
    "end": 18741.68,
    "text": "our SQL statement, we have this returning star. So that's going to return back the newly created",
    "textdich": ""
  },
  {
    "start": 18741.68,
    "end": 18747.36,
    "text": "post. With SQL alchemy, it's a little bit different, right, because we don't really have access to that",
    "textdich": ""
  },
  {
    "start": 18747.36,
    "end": 18751.76,
    "text": "underlying SQL code, we can't add a returning statement to this. So the way that you do this",
    "textdich": ""
  },
  {
    "start": 18751.76,
    "end": 18759.28,
    "text": "in SQL alchemy is you do DB dot refresh. And then you pass in the new post object. So what this is",
    "textdich": ""
  },
  {
    "start": 18759.28,
    "end": 18764.08,
    "text": "going to do is we create a brand new post, we add it to our database, then we commit it. And then",
    "textdich": ""
  },
  {
    "start": 18764.08,
    "end": 18768.24,
    "text": "what we're gonna do is we're going to essentially retrieve that new post that we just created and",
    "textdich": ""
  },
  {
    "start": 18768.24,
    "end": 18774.72,
    "text": "store it back into the variable new underscore post. And so all of this code should be identical",
    "textdich": ""
  },
  {
    "start": 18774.72,
    "end": 18780.72,
    "text": "to this code. And so now if we will just return back new post, and I think that should fix our",
    "textdich": ""
  },
  {
    "start": 18780.72,
    "end": 18788.8,
    "text": "issue. So now if I hit send, we do see an ID, and we do see it created, I feel so it looks like it",
    "textdich": ""
  },
  {
    "start": 18788.8,
    "end": 18794.48,
    "text": "worked, but we want to double check within Postgres. So if I hit run, and we can see welcome to funland,",
    "textdich": ""
  },
  {
    "start": 18794.48,
    "end": 18800.24,
    "text": "so it looks like it's now successfully working. And before we wrap up this video, there's one",
    "textdich": ""
  },
  {
    "start": 18800.24,
    "end": 18804.32,
    "text": "thing I don't like about the way we've done things, right, and this isn't necessarily going to break",
    "textdich": ""
  },
  {
    "start": 18804.32,
    "end": 18808.64,
    "text": "or cause any issues. However, you're gonna see it's very inefficient, depending on what your",
    "textdich": ""
  },
  {
    "start": 18808.64,
    "end": 18814.08,
    "text": "models look like. Now our model has only a couple of fields, and the user only has to really pass in",
    "textdich": ""
  },
  {
    "start": 18815.28,
    "end": 18819.84,
    "text": "two to three fields, which is title content and published. So it's not that big of a deal. But",
    "textdich": ""
  },
  {
    "start": 18819.84,
    "end": 18825.84,
    "text": "imagine if we have a model with 50 fields, there's no limitation, right? You could put as many fields",
    "textdich": ""
  },
  {
    "start": 18825.84,
    "end": 18830.0,
    "text": "as you want. Well, then things are gonna get a little bit more difficult. Because if you see,",
    "textdich": ""
  },
  {
    "start": 18830.0,
    "end": 18835.44,
    "text": "we have to extract all the fields from our schema, right, and then we have to kind of pass it in. So",
    "textdich": ""
  },
  {
    "start": 18835.44,
    "end": 18840.32,
    "text": "we have to say, oh, title equals post title, content equals post content, and then published",
    "textdich": ""
  },
  {
    "start": 18840.32,
    "end": 18844.24,
    "text": "equals post published. Now, if we have 50 fields, we're gonna have to do that 50 times. And that's",
    "textdich": ""
  },
  {
    "start": 18844.24,
    "end": 18849.36,
    "text": "a little inefficient. And there's actually a much easier way to do it. And the way to do this is,",
    "textdich": ""
  },
  {
    "start": 18850.0,
    "end": 18855.84,
    "text": "we have access to the post object, which is, you know, this is a pedantic model. So it's going to",
    "textdich": ""
  },
  {
    "start": 18855.84,
    "end": 18861.76,
    "text": "ensure that it matches the schema that we set. We want to say post dot dict. Now we know that's",
    "textdich": ""
  },
  {
    "start": 18861.76,
    "end": 18870.16,
    "text": "going to convert it to a regular dictionary. So if I do a print, save that, and then just send a",
    "textdich": ""
  },
  {
    "start": 18870.16,
    "end": 18874.8,
    "text": "request, right, take a look at this, we've got a regular Python dictionary. However, we need to be",
    "textdich": ""
  },
  {
    "start": 18874.8,
    "end": 18880.32,
    "text": "able to automatically take that dictionary and convert it to this format, where, instead of having,",
    "textdich": ""
  },
  {
    "start": 18880.96,
    "end": 18885.2,
    "text": "you know, title like this, and then welcome to fun land, it's going to be title equals,",
    "textdich": ""
  },
  {
    "start": 18885.2,
    "end": 18889.52,
    "text": "and then post our title content equals post content. So how do we do that? Easy, all we have",
    "textdich": ""
  },
  {
    "start": 18889.52,
    "end": 18894.16,
    "text": "to do is unpack the dictionary. So you just do a star star, and it's going to put it into this",
    "textdich": ""
  },
  {
    "start": 18894.16,
    "end": 18903.28,
    "text": "exact same format. So we can remove all of this and just say star star post dot dict. And that",
    "textdich": ""
  },
  {
    "start": 18903.28,
    "end": 18909.52,
    "text": "should ultimately do the same exact thing. Except now if we go back to our database, or our model",
    "textdich": ""
  },
  {
    "start": 18909.52,
    "end": 18913.92,
    "text": "and add an extra fields is going to automatically unpack all of those fields for us. So we don't",
    "textdich": ""
  },
  {
    "start": 18913.92,
    "end": 18921.6,
    "text": "have to manually type it out. All right, we'll save that I'm going to just put in some extra",
    "textdich": ""
  },
  {
    "start": 18921.6,
    "end": 18928.8,
    "text": "text just to make sure we can verify that. And I realized we got to remove this print statement,",
    "textdich": ""
  },
  {
    "start": 18928.8,
    "end": 18934.72,
    "text": "it's gonna throw an error. And we'll hit send, it looks like everything worked. Let's go to our",
    "textdich": ""
  },
  {
    "start": 18934.72,
    "end": 18942.48,
    "text": "database, search and it looks like it worked. So you can see that if we go back to our code,",
    "textdich": ""
  },
  {
    "start": 18942.48,
    "end": 18949.2,
    "text": "a lot cleaner than having to type out each one of those fields. And we can put this all in one line.",
    "textdich": ""
  },
  {
    "start": 18949.2,
    "end": 18955.92,
    "text": "So it looks a little better. Alright, so now it's time to handle querying for an individual post.",
    "textdich": ""
  },
  {
    "start": 18955.92,
    "end": 18960.8,
    "text": "So I post by a specific ID. So once again, we will comment out the SQL code.",
    "textdich": ""
  },
  {
    "start": 18962.16,
    "end": 18966.0,
    "text": "And we will do this using SQL alchemy. So once again, copy the database",
    "textdich": ""
  },
  {
    "start": 18966.0,
    "end": 18975.28,
    "text": "dependency right here, and then just pass it in. And this should actually be an integer. I don't",
    "textdich": ""
  },
  {
    "start": 18975.28,
    "end": 18981.84,
    "text": "know who changed that I may have left that in from the previous video. Yeah, it should be an integer.",
    "textdich": ""
  },
  {
    "start": 18981.84,
    "end": 18987.2,
    "text": "Okay. And now what we want to do is, just like we saw when it comes to querying all posts,",
    "textdich": ""
  },
  {
    "start": 18987.2,
    "end": 18993.44,
    "text": "we have to do DB dot query, pass in the specific model that we're interested in. And then we're",
    "textdich": ""
  },
  {
    "start": 18993.44,
    "end": 18996.56,
    "text": "not going to do a dot all because we don't want all the posts. So we're gonna have to take a look",
    "textdich": ""
  },
  {
    "start": 18996.56,
    "end": 19005.52,
    "text": "at a different query operation. So I'll say DB dot query, models dot post. And then we want to",
    "textdich": ""
  },
  {
    "start": 19005.52,
    "end": 19009.6,
    "text": "filter so we want to pass in a filter. So this is the equivalent of doing like a where you can see",
    "textdich": ""
  },
  {
    "start": 19009.6,
    "end": 19014.32,
    "text": "that we filter by doing where ID equals and then we pass in the ID. In this case, we're going to",
    "textdich": ""
  },
  {
    "start": 19014.32,
    "end": 19024.8,
    "text": "filter. And then here we say, whatever the models dot post dot ID is, so this is going to look",
    "textdich": ""
  },
  {
    "start": 19024.8,
    "end": 19029.52,
    "text": "through all of the posts in our database. And it's going to take a look at all other IDs. And we want",
    "textdich": ""
  },
  {
    "start": 19029.52,
    "end": 19036.16,
    "text": "to see whenever that is equal to the ID that the user requested. So the ID from this query parameter,",
    "textdich": ""
  },
  {
    "start": 19036.16,
    "end": 19041.84,
    "text": "or this path parameter. So we say when they're equal, that's the one we want to return.",
    "textdich": ""
  },
  {
    "start": 19041.84,
    "end": 19052.08,
    "text": "And if I do a print of first of all, let's save this to a variable. So I'll say post equals. And",
    "textdich": ""
  },
  {
    "start": 19052.08,
    "end": 19060.0,
    "text": "I do a print of post. Save that, I'll open up the terminal. And then we'll send a request for an",
    "textdich": ""
  },
  {
    "start": 19060.0,
    "end": 19066.0,
    "text": "individual post. We'll hit send. We get a whole bunch of errors. That's okay. Let me see. And",
    "textdich": ""
  },
  {
    "start": 19066.0,
    "end": 19074.64,
    "text": "that's fully expected. Alright, and then we can see the exact SQL statement that this query actually",
    "textdich": ""
  },
  {
    "start": 19074.64,
    "end": 19080.4,
    "text": "made. And so here we're doing DB query and then filter and we can see that we got the select",
    "textdich": ""
  },
  {
    "start": 19080.4,
    "end": 19088.08,
    "text": "statement. And then here it's just grabbing all of the all of the columns. Right, but then you can",
    "textdich": ""
  },
  {
    "start": 19088.08,
    "end": 19096.08,
    "text": "see from posts, and then it says where post that ID equals ID underscore one. And so this pretty",
    "textdich": ""
  },
  {
    "start": 19096.08,
    "end": 19101.76,
    "text": "much looks exactly like we wanted, right? If you look at our SQL statement, originally,",
    "textdich": ""
  },
  {
    "start": 19101.76,
    "end": 19108.56,
    "text": "it doesn't look any different. And so at this point, I think this should be good to go. However,",
    "textdich": ""
  },
  {
    "start": 19108.56,
    "end": 19112.4,
    "text": "right now, it's still just raw SQL, right, we could see what the SQL statement is. But",
    "textdich": ""
  },
  {
    "start": 19112.4,
    "end": 19116.64,
    "text": "if you recall from the previous one, we had to do a dot all to actually send the query.",
    "textdich": ""
  },
  {
    "start": 19116.64,
    "end": 19123.04,
    "text": "So for us, we can do a dot all technically. And this would work, right, it would grab all the posts",
    "textdich": ""
  },
  {
    "start": 19123.04,
    "end": 19128.16,
    "text": "who have an ID of whatever ID we passed in. However, there's one little issue with doing it",
    "textdich": ""
  },
  {
    "start": 19128.16,
    "end": 19132.56,
    "text": "like this. And that is that once it finds one post, it's going to keep looking through all of",
    "textdich": ""
  },
  {
    "start": 19132.56,
    "end": 19137.76,
    "text": "the posts to see if there's any other ones. But we know that only one post can have this specific",
    "textdich": ""
  },
  {
    "start": 19137.76,
    "end": 19142.64,
    "text": "ID. So it's a waste of Postgres resources to continue looking when we know there should only",
    "textdich": ""
  },
  {
    "start": 19142.64,
    "end": 19146.56,
    "text": "be one. So anytime you know, there should only be one instead of doing a dot all is better to do",
    "textdich": ""
  },
  {
    "start": 19146.56,
    "end": 19151.28,
    "text": "a dot first. So it's going to find the first instance and going to return that. So it's going",
    "textdich": ""
  },
  {
    "start": 19151.28,
    "end": 19155.6,
    "text": "to save us some little time, it's going to be a little bit more efficient in that case. All",
    "textdich": ""
  },
  {
    "start": 19155.6,
    "end": 19163.92,
    "text": "right, let's save this. And let's try this again. And let's see if this works. All right, it looks",
    "textdich": ""
  },
  {
    "start": 19163.92,
    "end": 19169.92,
    "text": "like it worked, we got a post back, no errors. So I think everything is good to go. Let's go back",
    "textdich": ""
  },
  {
    "start": 19169.92,
    "end": 19174.08,
    "text": "to our Postgres database, we do see that there's one with an ID of four. So it seems to work. But",
    "textdich": ""
  },
  {
    "start": 19174.08,
    "end": 19181.52,
    "text": "let's test this out with a random ID of like 666. And we should get the 404. So looks like that's",
    "textdich": ""
  },
  {
    "start": 19181.52,
    "end": 19186.16,
    "text": "all we need to do when it comes to fetching an individual post. And I'll remove this print",
    "textdich": ""
  },
  {
    "start": 19186.16,
    "end": 19192.0,
    "text": "statement, we don't need that anymore. And then we can just conclude this video. Alright, so let's",
    "textdich": ""
  },
  {
    "start": 19192.0,
    "end": 19199.28,
    "text": "move on to handling our delete path operation. So I will comment out the SQL code once again.",
    "textdich": ""
  },
  {
    "start": 19199.28,
    "end": 19204.96,
    "text": "And then we're going to make sure that we pass in the database dependency into our path operation",
    "textdich": ""
  },
  {
    "start": 19204.96,
    "end": 19214.16,
    "text": "function. And so for our delete operation, what we're going to do is I'm going to do a query.",
    "textdich": ""
  },
  {
    "start": 19215.92,
    "end": 19220.24,
    "text": "And this query is going to look exactly like this query. So I can actually copy this one in this",
    "textdich": ""
  },
  {
    "start": 19220.24,
    "end": 19229.2,
    "text": "case. So all we're doing is we're grabbing the posts model. And then we're going to filter based",
    "textdich": ""
  },
  {
    "start": 19229.2,
    "end": 19233.04,
    "text": "off IDs, we're going to look for the ID of the post that we want to delete. And I'm actually",
    "textdich": ""
  },
  {
    "start": 19233.04,
    "end": 19239.12,
    "text": "going to remove this first. So I'm going to save the query by itself. And we'll save this as a post",
    "textdich": ""
  },
  {
    "start": 19240.64,
    "end": 19248.0,
    "text": "underscore query. I'll just save it as post. Okay, we'll understand that that's a query and not an",
    "textdich": ""
  },
  {
    "start": 19248.0,
    "end": 19253.36,
    "text": "actual post. And then our if statement to check if there actually is a post with that, what we're",
    "textdich": ""
  },
  {
    "start": 19253.36,
    "end": 19259.76,
    "text": "going to do is we're going to say if post dot, how do we actually run this query? Well, we do",
    "textdich": ""
  },
  {
    "start": 19259.76,
    "end": 19264.4,
    "text": "first, so that's going to query. And so if this returns back nothing, then we're going to raise",
    "textdich": ""
  },
  {
    "start": 19264.4,
    "end": 19269.92,
    "text": "a 404. So really, we haven't done anything different from what we did here. However,",
    "textdich": ""
  },
  {
    "start": 19269.92,
    "end": 19281.84,
    "text": "if it does exist for the outside of this if statement, I'll do a post dot delete. And then",
    "textdich": ""
  },
  {
    "start": 19281.84,
    "end": 19287.52,
    "text": "we'll just say, synchronize session equals false, I believe that's the default config. Anyways,",
    "textdich": ""
  },
  {
    "start": 19287.52,
    "end": 19292.4,
    "text": "I don't want to spend too much time going over this. It doesn't really matter too much. But if",
    "textdich": ""
  },
  {
    "start": 19292.4,
    "end": 19296.96,
    "text": "you want to read about it, just take a look at the documentation. And if you go under, you know,",
    "textdich": ""
  },
  {
    "start": 19296.96,
    "end": 19302.4,
    "text": "session basics, you could see them kind of describe all of them. But this option is the",
    "textdich": ""
  },
  {
    "start": 19302.4,
    "end": 19305.92,
    "text": "most efficient and reliable. So I just went ahead with that one. And it seems to work just fine.",
    "textdich": ""
  },
  {
    "start": 19307.76,
    "end": 19312.16,
    "text": "So this is going to delete the post. But remember, to actually make changes, we have to do a DB dot",
    "textdich": ""
  },
  {
    "start": 19312.16,
    "end": 19320.32,
    "text": "commit. So that'll delete it. And then everything else should and can remain the same. I'm going to",
    "textdich": ""
  },
  {
    "start": 19320.32,
    "end": 19326.0,
    "text": "go back to my Postgres database, we're going to delete a post with the ID of six. So we'll go to",
    "textdich": ""
  },
  {
    "start": 19326.0,
    "end": 19335.76,
    "text": "our postman, we'll go to our delete operation. And then we'll do an ID of six. All right,",
    "textdich": ""
  },
  {
    "start": 19335.76,
    "end": 19340.24,
    "text": "seems to work. But let's double check with Postgres. Right now we can see that there's",
    "textdich": ""
  },
  {
    "start": 19340.24,
    "end": 19344.64,
    "text": "no longer a post with an ID of six. And then let's test this out with a random post number",
    "textdich": ""
  },
  {
    "start": 19344.64,
    "end": 19353.68,
    "text": "that doesn't exist, we should get a 404. Perfect. Okay, so it's time to tackle our final path",
    "textdich": ""
  },
  {
    "start": 19353.68,
    "end": 19358.8,
    "text": "operation, which is for updating posts. This is one is going to be fairly similar to, you know,",
    "textdich": ""
  },
  {
    "start": 19358.8,
    "end": 19364.72,
    "text": "deleting a post, or even getting a post by a single ID. So first of all, comment out the",
    "textdich": ""
  },
  {
    "start": 19364.72,
    "end": 19370.16,
    "text": "previous Postgres code. And because we're going to be interacting with the database,",
    "textdich": ""
  },
  {
    "start": 19370.16,
    "end": 19377.36,
    "text": "let's make sure we copy the dependency in this case. And then what we're going to do is we're",
    "textdich": ""
  },
  {
    "start": 19377.36,
    "end": 19383.52,
    "text": "going to do the same thing, we're going to say DB dot query. I'm going to query models dot post.",
    "textdich": ""
  },
  {
    "start": 19386.16,
    "end": 19388.48,
    "text": "And then we're going to filter on the same thing, we'll say filter",
    "textdich": ""
  },
  {
    "start": 19391.6,
    "end": 19393.6,
    "text": "models, dot post",
    "textdich": ""
  },
  {
    "start": 19397.6,
    "end": 19401.04,
    "text": "dot ID. And if that equals to the ID that we're passing here,",
    "textdich": ""
  },
  {
    "start": 19401.84,
    "end": 19405.04,
    "text": "then we're going to find the specific post we're interested in. So I'll say,",
    "textdich": ""
  },
  {
    "start": 19405.04,
    "end": 19409.84,
    "text": "I'm going to save this as post underscore query. So right now, we're not actually running the",
    "textdich": ""
  },
  {
    "start": 19409.84,
    "end": 19414.96,
    "text": "query, we're just saving the query because I haven't run dot first or dot all. And we'll say",
    "textdich": ""
  },
  {
    "start": 19414.96,
    "end": 19424.24,
    "text": "the actual post equals post underscore query dot first. So this is going to grab the post if it",
    "textdich": ""
  },
  {
    "start": 19424.24,
    "end": 19431.04,
    "text": "exists, if it doesn't exist. So say if post does not equal none, or if post equals equals none,",
    "textdich": ""
  },
  {
    "start": 19431.04,
    "end": 19438.0,
    "text": "then we're going to send a 404. However, if it does exist, then we'll grab the query again,",
    "textdich": ""
  },
  {
    "start": 19438.0,
    "end": 19445.28,
    "text": "say post query dot update. So we can chain an update method. So we're basically taking",
    "textdich": ""
  },
  {
    "start": 19445.28,
    "end": 19448.56,
    "text": "this query right here. And then we're chaining the update method, which would be the equivalent of",
    "textdich": ""
  },
  {
    "start": 19448.56,
    "end": 19455.6,
    "text": "doing an update right here. So say dot update. And then what we want to do is we want to pass in the",
    "textdich": ""
  },
  {
    "start": 19455.6,
    "end": 19461.2,
    "text": "the fields that we want to update as a dictionary. So in this case, what I'm going to do is I'm going",
    "textdich": ""
  },
  {
    "start": 19461.2,
    "end": 19466.88,
    "text": "to hard code the values and just to show you what that looks like. So we'll say, title is going to",
    "textdich": ""
  },
  {
    "start": 19466.88,
    "end": 19474.08,
    "text": "be set to, hey, this is my updated title. And then the next one's going to be the content,",
    "textdich": ""
  },
  {
    "start": 19474.08,
    "end": 19479.6,
    "text": "we can update that to be whatever we want. And I'll say, this is my updated content.",
    "textdich": ""
  },
  {
    "start": 19479.6,
    "end": 19488.4,
    "text": "Then we're going to do that same synchronize session equals false as the second property into",
    "textdich": ""
  },
  {
    "start": 19488.4,
    "end": 19498.08,
    "text": "the updated method. Go to synchronize session equals false. And that should handle the update,",
    "textdich": ""
  },
  {
    "start": 19498.08,
    "end": 19506.72,
    "text": "and then we would just want to do a DB dot commit. And right now this updated post doesn't exist",
    "textdich": ""
  },
  {
    "start": 19506.72,
    "end": 19510.96,
    "text": "anymore. So we're just going to return successful or something doesn't matter. We're going to change",
    "textdich": ""
  },
  {
    "start": 19510.96,
    "end": 19518.48,
    "text": "this a little bit later on. Alright, so let's go to our update, where is our update post,",
    "textdich": ""
  },
  {
    "start": 19518.48,
    "end": 19521.92,
    "text": "it doesn't really matter what data we pass in, because we're hard coding the values.",
    "textdich": ""
  },
  {
    "start": 19522.8,
    "end": 19527.12,
    "text": "And so I'm going to update a the post with an ID of one if it still exists, and it looks like it",
    "textdich": ""
  },
  {
    "start": 19527.12,
    "end": 19533.36,
    "text": "does. So you can see right now the title is new post. So we'll update this, then the successful",
    "textdich": ""
  },
  {
    "start": 19533.36,
    "end": 19539.52,
    "text": "and then let's go to back to Postgres, do a query. And we can see that, hey, look, it got updated,",
    "textdich": ""
  },
  {
    "start": 19539.52,
    "end": 19544.4,
    "text": "hey, this is my updated title. And the content, this is my updated content. So that's all we have",
    "textdich": ""
  },
  {
    "start": 19544.4,
    "end": 19551.44,
    "text": "to do, we just have to pass in a Python dictionary with the updated fields. And so instead of passing",
    "textdich": ""
  },
  {
    "start": 19551.44,
    "end": 19558.56,
    "text": "a Python dictionary, right, we can pass in our post schema, right? So that's going to have all",
    "textdich": ""
  },
  {
    "start": 19558.56,
    "end": 19564.0,
    "text": "of the updated fields. And we can just say, post dot dick, that's going to return a Python dictionary.",
    "textdich": ""
  },
  {
    "start": 19564.0,
    "end": 19568.96,
    "text": "So that should be exactly what we're looking for. And then finally, when it comes to returning data,",
    "textdich": ""
  },
  {
    "start": 19568.96,
    "end": 19574.96,
    "text": "what we're going to do is we're going to run another query. So we're going to say, post underscore",
    "textdich": ""
  },
  {
    "start": 19574.96,
    "end": 19579.68,
    "text": "query. So we're going to grab this exact query object, right here. And then we're just going to",
    "textdich": ""
  },
  {
    "start": 19579.68,
    "end": 19585.68,
    "text": "get the updated post. So we just grabbed the first one with that specific ID. And then it should",
    "textdich": ""
  },
  {
    "start": 19585.68,
    "end": 19590.0,
    "text": "return that though, hopefully you guys understand. And I'm just going to quickly recap exactly what",
    "textdich": ""
  },
  {
    "start": 19590.0,
    "end": 19596.08,
    "text": "we did, we set up a query to find the post with a specific ID, then we're going to actually grab",
    "textdich": ""
  },
  {
    "start": 19596.08,
    "end": 19600.56,
    "text": "that specific post. So we run that query by grabbing dot first, if it doesn't exist, we're",
    "textdich": ""
  },
  {
    "start": 19600.56,
    "end": 19605.84,
    "text": "going to run a 404. But if it does exist, then we can chain the update method to the same query",
    "textdich": ""
  },
  {
    "start": 19605.84,
    "end": 19610.24,
    "text": "object so that we can update it. And we pass in the fields that we want to update, we'll commit",
    "textdich": ""
  },
  {
    "start": 19610.24,
    "end": 19614.56,
    "text": "it to our database, that after all of that's done, we want to make sure we get the updated post and",
    "textdich": ""
  },
  {
    "start": 19614.56,
    "end": 19622.0,
    "text": "send it back to the user. So we do post underscore query dot first. Let's test this out. And I'm",
    "textdich": ""
  },
  {
    "start": 19622.0,
    "end": 19627.68,
    "text": "going to put in values because these values now matter. And I'll say, my name is Sanjeev.",
    "textdich": ""
  },
  {
    "start": 19631.76,
    "end": 19633.36,
    "text": "Python is fun. So let's try this.",
    "textdich": ""
  },
  {
    "start": 19636.24,
    "end": 19638.0,
    "text": "What happened here? Okay, I forgot to save.",
    "textdich": ""
  },
  {
    "start": 19638.0,
    "end": 19648.72,
    "text": "It send, we get an error. And I realized we have a little bit of an issue. So this, the schema that",
    "textdich": ""
  },
  {
    "start": 19648.72,
    "end": 19655.12,
    "text": "we get where we extract all of the body fields is named post. But then we also save this as post as",
    "textdich": ""
  },
  {
    "start": 19655.12,
    "end": 19661.28,
    "text": "well. And so this leads to issues, because they're both named the same thing. And so I'm trying to",
    "textdich": ""
  },
  {
    "start": 19663.04,
    "end": 19667.52,
    "text": "I'm trying to convert this to a dictionary, which only works on the pedantic model,",
    "textdich": ""
  },
  {
    "start": 19667.52,
    "end": 19672.16,
    "text": "it does not work on our SQL alchemy model. So we're gonna have to rename these.",
    "textdich": ""
  },
  {
    "start": 19674.16,
    "end": 19682.48,
    "text": "I'm going to rename this updated underscore post. And then here, this is going to be updated",
    "textdich": ""
  },
  {
    "start": 19682.48,
    "end": 19690.8,
    "text": "underscore post. Now let's try that again. Seems to work. Let's check our database, though.",
    "textdich": ""
  },
  {
    "start": 19691.92,
    "end": 19695.84,
    "text": "And we can see that it was successfully updated. And then let's try to update something that",
    "textdich": ""
  },
  {
    "start": 19695.84,
    "end": 19704.64,
    "text": "doesn't exist. And we get a 404 perfect. Before we proceed any further, I do want to provide some",
    "textdich": ""
  },
  {
    "start": 19704.64,
    "end": 19711.04,
    "text": "clarifications on what are the difference between a schema or pedantic model, and our ORM or SQL",
    "textdich": ""
  },
  {
    "start": 19711.04,
    "end": 19714.32,
    "text": "alchemy model. And I think it's important that you guys understand that. And I do realize that",
    "textdich": ""
  },
  {
    "start": 19714.32,
    "end": 19718.96,
    "text": "there could be potentially some confusion as to what's the difference between them? Ultimately,",
    "textdich": ""
  },
  {
    "start": 19718.96,
    "end": 19722.88,
    "text": "what are they trying to accomplish? And why do we have both of them? So I've created a couple of",
    "textdich": ""
  },
  {
    "start": 19722.88,
    "end": 19727.04,
    "text": "slides. And hopefully that helps sort things out. Hopefully, and hopefully it provides a little bit",
    "textdich": ""
  },
  {
    "start": 19727.04,
    "end": 19731.52,
    "text": "of clarification, if you guys were confused at that. But just to look at our code, you'll notice",
    "textdich": ""
  },
  {
    "start": 19731.52,
    "end": 19736.88,
    "text": "that in our main.py file, we have one class called post here. And this is extending base model,",
    "textdich": ""
  },
  {
    "start": 19736.88,
    "end": 19740.72,
    "text": "which actually comes from the pedantic library. And you can see we're importing pedantic right",
    "textdich": ""
  },
  {
    "start": 19740.72,
    "end": 19746.8,
    "text": "here. So this is what's referred to as our schema. And we also have our and I don't even want to",
    "textdich": ""
  },
  {
    "start": 19746.8,
    "end": 19751.2,
    "text": "explain it yet. Hopefully, you guys already know what it is. But I have a couple of slides that",
    "textdich": ""
  },
  {
    "start": 19751.2,
    "end": 19754.72,
    "text": "hopefully make it a little bit more clear. But just to kind of show you where this is being",
    "textdich": ""
  },
  {
    "start": 19754.72,
    "end": 19759.04,
    "text": "referenced, it's being referenced in our path operations. So if you go to, you know, our create",
    "textdich": ""
  },
  {
    "start": 19759.04,
    "end": 19764.64,
    "text": "posts, which wherever that is, right here, you can see that we're passing that in right here,",
    "textdich": ""
  },
  {
    "start": 19764.64,
    "end": 19768.88,
    "text": "and then saving into a variable called post. So we're referencing it right here. This is all about",
    "textdich": ""
  },
  {
    "start": 19768.88,
    "end": 19775.2,
    "text": "defining the shape of a request. And so that's the pedantic model. The other model is the one that",
    "textdich": ""
  },
  {
    "start": 19775.2,
    "end": 19780.64,
    "text": "we have in models.py, which is the SQL alchemy model. So this SQL alchemy model defines what",
    "textdich": ""
  },
  {
    "start": 19780.64,
    "end": 19786.0,
    "text": "our database, our specific table looks like. But let me pull up the slides just to show you guys,",
    "textdich": ""
  },
  {
    "start": 19786.0,
    "end": 19789.36,
    "text": "you know, with some nice diagrams. So hopefully you guys get a better idea of what that is.",
    "textdich": ""
  },
  {
    "start": 19790.48,
    "end": 19794.48,
    "text": "Alright, so let's start off by going over the schema models, or the pedantic model. So the",
    "textdich": ""
  },
  {
    "start": 19794.48,
    "end": 19800.96,
    "text": "schema or the pedantic model defines the structure of a request and a response. And so that way,",
    "textdich": ""
  },
  {
    "start": 19800.96,
    "end": 19805.6,
    "text": "you know, when it comes to creating a post, we can define exactly what the request should look like.",
    "textdich": ""
  },
  {
    "start": 19805.6,
    "end": 19809.68,
    "text": "So when we create a brand new post, we need the user to provide what's the title of the post,",
    "textdich": ""
  },
  {
    "start": 19809.68,
    "end": 19813.92,
    "text": "what's the content of the post. And optionally, they can also provide if it's published or not,",
    "textdich": ""
  },
  {
    "start": 19813.92,
    "end": 19817.36,
    "text": "but we've provided the default value, so they don't actually have to send that. So what we do",
    "textdich": ""
  },
  {
    "start": 19817.36,
    "end": 19821.84,
    "text": "is we take the request, and then we pass it through the pedantic model, the pedantic model will",
    "textdich": ""
  },
  {
    "start": 19821.84,
    "end": 19825.28,
    "text": "perform a little bit of validation to make sure that all the fields that we need to actually",
    "textdich": ""
  },
  {
    "start": 19825.28,
    "end": 19830.4,
    "text": "create a brand new post are there, and that they are of the proper type. So if it's a title,",
    "textdich": ""
  },
  {
    "start": 19830.4,
    "end": 19835.2,
    "text": "it shouldn't be an integer. And if it's the published property, it shouldn't be a string",
    "textdich": ""
  },
  {
    "start": 19835.2,
    "end": 19839.28,
    "text": "or anything. It's just a simple Boolean. So that's what the pedantic model or the schema model",
    "textdich": ""
  },
  {
    "start": 19839.28,
    "end": 19844.64,
    "text": "does. It's just there to provide some validation to ensure that the body, all the data fields",
    "textdich": ""
  },
  {
    "start": 19844.64,
    "end": 19849.28,
    "text": "provided in the body of a request, match up to what we want. And that's important because",
    "textdich": ""
  },
  {
    "start": 19849.28,
    "end": 19853.68,
    "text": "we don't ever want to give the clients, which is the web browser or the mobile phones, or anything",
    "textdich": ""
  },
  {
    "start": 19853.68,
    "end": 19857.84,
    "text": "like that, freedom to do whatever they want, we want to tell them exactly what we need for each",
    "textdich": ""
  },
  {
    "start": 19857.84,
    "end": 19864.0,
    "text": "specific path or route. And that's for the request. However, we can also do this for the response. And",
    "textdich": ""
  },
  {
    "start": 19864.0,
    "end": 19867.92,
    "text": "we haven't actually done that yet. But we can actually define exactly what that response should",
    "textdich": ""
  },
  {
    "start": 19867.92,
    "end": 19873.44,
    "text": "look like. So you know, as our as our models get more complex, as our database gets more complex,",
    "textdich": ""
  },
  {
    "start": 19873.44,
    "end": 19877.2,
    "text": "there's going to be a lot of fields when it comes to your posts and your users, that you may not",
    "textdich": ""
  },
  {
    "start": 19877.2,
    "end": 19881.2,
    "text": "want to send back to the client when we send a response. So we can actually define a model",
    "textdich": ""
  },
  {
    "start": 19881.2,
    "end": 19887.2,
    "text": "to dictate fast API exactly the data fields that we should be sending back. And so that's what your",
    "textdich": ""
  },
  {
    "start": 19887.2,
    "end": 19892.16,
    "text": "schema and your pedantic models do, they just ensure that the request and response are shaped",
    "textdich": ""
  },
  {
    "start": 19892.16,
    "end": 19897.36,
    "text": "in a specific way. Now, the other model is the SQL alchemy model. So this is the one that we've",
    "textdich": ""
  },
  {
    "start": 19897.36,
    "end": 19902.24,
    "text": "been working on with the past couple of lectures. And these are responsible for defining the columns",
    "textdich": ""
  },
  {
    "start": 19902.24,
    "end": 19907.28,
    "text": "of our posts table within Postgres. Alright, so it's going to define all the different attributes",
    "textdich": ""
  },
  {
    "start": 19907.28,
    "end": 19912.32,
    "text": "within a specific table. And then we use that post model to perform queries to our database,",
    "textdich": ""
  },
  {
    "start": 19912.32,
    "end": 19918.0,
    "text": "we use it to create, delete and update entries within our database. But this model is fundamentally",
    "textdich": ""
  },
  {
    "start": 19918.0,
    "end": 19920.96,
    "text": "different than the pedantic model. So that's why I created this video, I just wanted to make sure",
    "textdich": ""
  },
  {
    "start": 19920.96,
    "end": 19925.52,
    "text": "that you guys understood what were the differences between those and understand why we need them",
    "textdich": ""
  },
  {
    "start": 19925.52,
    "end": 19930.64,
    "text": "both. Technically, we don't need the pedantic models. But you know, when it comes to building",
    "textdich": ""
  },
  {
    "start": 19930.64,
    "end": 19934.96,
    "text": "out API's, you want to be as strict as possible when it comes to what kind of data can we receive",
    "textdich": ""
  },
  {
    "start": 19934.96,
    "end": 19939.92,
    "text": "and send to the user. And so pedantic just ensures that you know, everything just matches up with",
    "textdich": ""
  },
  {
    "start": 19939.92,
    "end": 19946.56,
    "text": "what we expect. But in the last video, I described the difference between a pedantic model and a ORM",
    "textdich": ""
  },
  {
    "start": 19946.56,
    "end": 19950.4,
    "text": "model. And there's a couple of things I actually want to do with our pedantic models. We've just",
    "textdich": ""
  },
  {
    "start": 19950.4,
    "end": 19955.36,
    "text": "got one right here where we define what a request what a post should look like. And we use that",
    "textdich": ""
  },
  {
    "start": 19955.36,
    "end": 19960.16,
    "text": "in a couple of places. So if we go down to create posts, we can see we use it there. So it's going",
    "textdich": ""
  },
  {
    "start": 19960.16,
    "end": 19962.96,
    "text": "to define the structure of the data that we received from the front end when we want to",
    "textdich": ""
  },
  {
    "start": 19962.96,
    "end": 19969.84,
    "text": "create a post. And I think we also provide it for maybe updating a post. Yep, we also use it for",
    "textdich": ""
  },
  {
    "start": 19969.84,
    "end": 19974.88,
    "text": "updating a post as well. So what I'm going to do is I want to create the schemas or I want to move",
    "textdich": ""
  },
  {
    "start": 19974.88,
    "end": 19978.64,
    "text": "the schema in this case, remember, this is what's referred to as a schema, I want to move that to",
    "textdich": ""
  },
  {
    "start": 19978.64,
    "end": 19983.04,
    "text": "its own file just so that we don't clutter up our main.py file. So I'm going to go under app,",
    "textdich": ""
  },
  {
    "start": 19983.04,
    "end": 19990.88,
    "text": "I'm going to do a new file. And I'm going to call this schemas.py. And then within schemas,",
    "textdich": ""
  },
  {
    "start": 19990.88,
    "end": 19998.56,
    "text": "if I go to my main.py file, I'm just going to cut this out. And we can paste it in here. And there's",
    "textdich": ""
  },
  {
    "start": 19998.56,
    "end": 20002.56,
    "text": "going to be a couple of things that we have to import. So if we go to our main.py, we definitely",
    "textdich": ""
  },
  {
    "start": 20002.56,
    "end": 20007.36,
    "text": "need pedantic, that's really all we need, actually. So if I go there, and then paste that into there,",
    "textdich": ""
  },
  {
    "start": 20007.92,
    "end": 20012.0,
    "text": "we should have no issues. And then, you know, this is going to actually break our application",
    "textdich": ""
  },
  {
    "start": 20012.0,
    "end": 20018.16,
    "text": "because we need to actually import this specific schema. So if I go into main.py,",
    "textdich": ""
  },
  {
    "start": 20020.8,
    "end": 20024.72,
    "text": "we can see here, I'm doing from dot import models. So it's going to import everything from the models",
    "textdich": ""
  },
  {
    "start": 20024.72,
    "end": 20031.92,
    "text": "file. But we can also then import schemas as well. And so now to actually access this specific class",
    "textdich": ""
  },
  {
    "start": 20031.92,
    "end": 20039.28,
    "text": "post, we just have to go in our main.py file, and the reference schemas.post. And so anywhere we use",
    "textdich": ""
  },
  {
    "start": 20039.28,
    "end": 20048.48,
    "text": "post, which should be right here, we can do schemas dot post. And then in our update post",
    "textdich": ""
  },
  {
    "start": 20048.48,
    "end": 20053.04,
    "text": "as well, we can do the same thing, there's going to be schemas that post because now we're importing",
    "textdich": ""
  },
  {
    "start": 20053.04,
    "end": 20059.6,
    "text": "it from another file. And what I'm actually going to do is we're going to restructure this a little",
    "textdich": ""
  },
  {
    "start": 20059.6,
    "end": 20065.04,
    "text": "bit. So what I'm going to do is remember, these are regular Python classes. And so we get all of the",
    "textdich": ""
  },
  {
    "start": 20065.04,
    "end": 20069.44,
    "text": "abilities that we have when it comes to inheritance, when you come when it comes to working with these",
    "textdich": ""
  },
  {
    "start": 20069.44,
    "end": 20074.4,
    "text": "classes. So what I'm going to do is, we could define a couple things, right, we could have one for,",
    "textdich": ""
  },
  {
    "start": 20075.12,
    "end": 20079.6,
    "text": "we could create a class for create post, actually, that should be capitalized,",
    "textdich": ""
  },
  {
    "start": 20080.4,
    "end": 20085.68,
    "text": "or create post. And then that's going to extend base model. And then this is going to have all",
    "textdich": ""
  },
  {
    "start": 20085.68,
    "end": 20089.76,
    "text": "of the fields that we need from the user when it comes to creating a post. And so that's what",
    "textdich": ""
  },
  {
    "start": 20089.76,
    "end": 20099.52,
    "text": "this would be in this case. And then remember, we also need to handle updating posts. And so we",
    "textdich": ""
  },
  {
    "start": 20099.52,
    "end": 20109.84,
    "text": "could create another model for that. On this case, I could call it update post. And once again,",
    "textdich": ""
  },
  {
    "start": 20109.84,
    "end": 20115.52,
    "text": "that's going to extend base model. And when it comes to the the fields that we use for an update",
    "textdich": ""
  },
  {
    "start": 20115.52,
    "end": 20124.96,
    "text": "post, it would be the same exact thing, right? Whoops, that should be right here. And I don't",
    "textdich": ""
  },
  {
    "start": 20124.96,
    "end": 20134.96,
    "text": "know why it's doing that. And in this case, there wouldn't be a default value for published.",
    "textdich": ""
  },
  {
    "start": 20137.44,
    "end": 20142.88,
    "text": "Because we want them to explicitly provide each column. And so at this point, right, we could then",
    "textdich": ""
  },
  {
    "start": 20142.88,
    "end": 20147.68,
    "text": "have two different classes for each specific request. And that's a perfectly valid use case,",
    "textdich": ""
  },
  {
    "start": 20147.68,
    "end": 20150.96,
    "text": "because when it comes to creating, they should provide a certain amount of fields. And then",
    "textdich": ""
  },
  {
    "start": 20150.96,
    "end": 20155.2,
    "text": "updating, it might be completely different, right? Because, you know, let's say in our application,",
    "textdich": ""
  },
  {
    "start": 20155.2,
    "end": 20159.68,
    "text": "we wanted to make it so that the user can't ever update a post, they can only update one property.",
    "textdich": ""
  },
  {
    "start": 20159.68,
    "end": 20163.12,
    "text": "And that's the publish, so they can just change whether it's published or not, we could remove",
    "textdich": ""
  },
  {
    "start": 20163.12,
    "end": 20167.44,
    "text": "this. And this is going to make it so that the user isn't allowed to provide any other fields,",
    "textdich": ""
  },
  {
    "start": 20167.44,
    "end": 20171.84,
    "text": "they can only pass the published field. So that's why we would want to create different",
    "textdich": ""
  },
  {
    "start": 20171.84,
    "end": 20177.68,
    "text": "models for each of the different requests. But what I like to do is instead of having one for",
    "textdich": ""
  },
  {
    "start": 20177.68,
    "end": 20182.56,
    "text": "create post one for update post, and then one for the, you know, we have to eventually create models",
    "textdich": ""
  },
  {
    "start": 20182.56,
    "end": 20187.52,
    "text": "for the response, what we're going to do is we're actually going to delete all of this. And we're",
    "textdich": ""
  },
  {
    "start": 20187.52,
    "end": 20195.52,
    "text": "going to create a class called post base. So I'll do class, post base, and then base model. And so",
    "textdich": ""
  },
  {
    "start": 20195.52,
    "end": 20204.32,
    "text": "this is a regular class, we can just copy all of these fields. And then we can extend that class.",
    "textdich": ""
  },
  {
    "start": 20204.32,
    "end": 20212.72,
    "text": "So I can take this post base class, and I can extend and say, class, post create, I want to extend",
    "textdich": ""
  },
  {
    "start": 20212.72,
    "end": 20219.92,
    "text": "post base, we can say, post base. And so it's going to by default automatically inherit all of",
    "textdich": ""
  },
  {
    "start": 20219.92,
    "end": 20225.84,
    "text": "these fields. And so we can just say, for creating, we can just say pass, which means it's just going",
    "textdich": ""
  },
  {
    "start": 20225.84,
    "end": 20229.52,
    "text": "to accept whatever post bases. So post create is essentially the same thing as post base.",
    "textdich": ""
  },
  {
    "start": 20231.76,
    "end": 20237.04,
    "text": "But then we can create a brand new one called class, I don't know, post update.",
    "textdich": ""
  },
  {
    "start": 20238.64,
    "end": 20247.76,
    "text": "And that's going to extend post base. And we can say that for updating, we can pass in whatever",
    "textdich": ""
  },
  {
    "start": 20247.76,
    "end": 20252.48,
    "text": "specific fields we want to add in as well. But it gives us flexibility because we can make use of",
    "textdich": ""
  },
  {
    "start": 20252.48,
    "end": 20256.64,
    "text": "inheritance. So for now, I'm going to remove post update, and we're just going to keep it as post",
    "textdich": ""
  },
  {
    "start": 20256.64,
    "end": 20262.4,
    "text": "create. Because, you know, updating and creating is going to be fundamentally the same. And that",
    "textdich": ""
  },
  {
    "start": 20262.4,
    "end": 20266.48,
    "text": "way, we can just kind of piggyback off of this post base model, and then just create brand new",
    "textdich": ""
  },
  {
    "start": 20266.48,
    "end": 20272.96,
    "text": "models based off of this. So what I'm going to do is going into my main.py file. And then for",
    "textdich": ""
  },
  {
    "start": 20272.96,
    "end": 20281.12,
    "text": "schemas, actually, let me save this. Then my main.py file, there's no longer a post, it's going to be",
    "textdich": ""
  },
  {
    "start": 20281.12,
    "end": 20286.48,
    "text": "post, actually, it's going to be create post create, I'm gonna do the same thing for update as well.",
    "textdich": ""
  },
  {
    "start": 20287.36,
    "end": 20291.84,
    "text": "That was the update, actually. So then the other one is for create post. And then this is going to",
    "textdich": ""
  },
  {
    "start": 20291.84,
    "end": 20303.2,
    "text": "be schemas dot post create. Alright, and then the last thing that I want to do in this video is we're",
    "textdich": ""
  },
  {
    "start": 20303.2,
    "end": 20307.6,
    "text": "going to just delete this test route that we had defined when we were learning about SQL alchemy.",
    "textdich": ""
  },
  {
    "start": 20307.6,
    "end": 20313.12,
    "text": "We don't really need that anymore. And then in the next video, what we're going to do is we're going",
    "textdich": ""
  },
  {
    "start": 20313.12,
    "end": 20319.92,
    "text": "to tackle sending a response back. Right. And as I mentioned within the slide deck, right, just like",
    "textdich": ""
  },
  {
    "start": 20319.92,
    "end": 20323.92,
    "text": "we can define what a request should look like, we can also define exactly what a response should",
    "textdich": ""
  },
  {
    "start": 20323.92,
    "end": 20327.2,
    "text": "look like. So we're going to do the same thing, we're going to define a pydantic model for a",
    "textdich": ""
  },
  {
    "start": 20327.2,
    "end": 20332.64,
    "text": "response for what a post should look like when we send it back to the user, so that it sticks to a",
    "textdich": ""
  },
  {
    "start": 20332.64,
    "end": 20336.4,
    "text": "very specific schema, and then we don't end up sending data that we don't actually need to send",
    "textdich": ""
  },
  {
    "start": 20336.4,
    "end": 20342.8,
    "text": "to the user. In this lecture, we'll take a look at how we can define a pydantic or schema model",
    "textdich": ""
  },
  {
    "start": 20342.8,
    "end": 20348.56,
    "text": "to define the exact shape of a response. Because right now, if you actually see any of our path",
    "textdich": ""
  },
  {
    "start": 20348.56,
    "end": 20355.12,
    "text": "operations, what we do is we just return a post or multiple posts or an updated post. And whatever",
    "textdich": ""
  },
  {
    "start": 20355.12,
    "end": 20358.64,
    "text": "data we get back from the post, we just send it back to the user. And there may be times where",
    "textdich": ""
  },
  {
    "start": 20358.64,
    "end": 20363.52,
    "text": "maybe you don't want all of the properties or all of the attributes and columns from our post table",
    "textdich": ""
  },
  {
    "start": 20363.52,
    "end": 20368.56,
    "text": "to get sent back to the user, because, you know, potentially, that could be sending him back",
    "textdich": ""
  },
  {
    "start": 20368.56,
    "end": 20373.2,
    "text": "information he shouldn't know about, especially when it comes to, you know, like your your user",
    "textdich": ""
  },
  {
    "start": 20373.2,
    "end": 20376.56,
    "text": "account, right, when a user logs in, we don't want to send him back his password, he already knows",
    "textdich": ""
  },
  {
    "start": 20376.56,
    "end": 20380.56,
    "text": "his password, we don't want to continuously transmit information like that. So there can be",
    "textdich": ""
  },
  {
    "start": 20380.56,
    "end": 20386.0,
    "text": "times where you do want to remove certain fields or properties. And before we actually get to",
    "textdich": ""
  },
  {
    "start": 20386.0,
    "end": 20390.72,
    "text": "performing that, we're going to do a little bit of cleanup. Because if we go to really any one of our",
    "textdich": ""
  },
  {
    "start": 20390.72,
    "end": 20396.48,
    "text": "requests, like if I go to get posts, and hit send, you see that we have, you know, within data, we",
    "textdich": ""
  },
  {
    "start": 20396.48,
    "end": 20401.84,
    "text": "then have the list or array of all of our posts. And if we look at create posts, right, you can see",
    "textdich": ""
  },
  {
    "start": 20401.84,
    "end": 20407.76,
    "text": "we always have data and then the actual post, I'm going to get rid of the data field just because I",
    "textdich": ""
  },
  {
    "start": 20407.76,
    "end": 20412.4,
    "text": "think it's unnecessary, and it kind of clutters things. So what we'll do is within all of our",
    "textdich": ""
  },
  {
    "start": 20412.4,
    "end": 20417.84,
    "text": "path operations, we're going to just remove data. And instead of returning, you know, a dictionary,",
    "textdich": ""
  },
  {
    "start": 20417.84,
    "end": 20423.28,
    "text": "we're just going to return posts. And so it so fast API will automatically be able to serialize that",
    "textdich": ""
  },
  {
    "start": 20423.28,
    "end": 20428.8,
    "text": "and convert that into JSON. And I'm going to do that for all of these, we're just going to remove",
    "textdich": ""
  },
  {
    "start": 20428.8,
    "end": 20437.2,
    "text": "that data keyword for all of them. We don't need to do it for delete, but we do need to do it for",
    "textdich": ""
  },
  {
    "start": 20437.2,
    "end": 20443.76,
    "text": "update. And so now, if we actually take a look at what this is going to look like, I hit send,",
    "textdich": ""
  },
  {
    "start": 20443.76,
    "end": 20448.0,
    "text": "you can see we just get back the post and we don't get that data keyword. Same thing for get",
    "textdich": ""
  },
  {
    "start": 20448.0,
    "end": 20452.8,
    "text": "posts, what does that look like? Perfect. So we don't have the data keyword. Now, let's actually",
    "textdich": ""
  },
  {
    "start": 20452.8,
    "end": 20458.24,
    "text": "define what the response should look like. And we do that with our schemas, we do that with our",
    "textdich": ""
  },
  {
    "start": 20458.24,
    "end": 20463.44,
    "text": "pydantic models, just like we have a pydantic model for creating posts, which happens to just",
    "textdich": ""
  },
  {
    "start": 20463.44,
    "end": 20467.68,
    "text": "inherit from post base. So post create is just saying that we expect the title, we expect the",
    "textdich": ""
  },
  {
    "start": 20467.68,
    "end": 20472.24,
    "text": "content published as optional. And if you don't provide one, it's true. And so we already know",
    "textdich": ""
  },
  {
    "start": 20472.24,
    "end": 20476.72,
    "text": "how to work with that, let's create a brand new class for the response. So you know, this handles",
    "textdich": ""
  },
  {
    "start": 20477.36,
    "end": 20483.76,
    "text": "the direction of the user sending data to us. And now we want to handle us sending data to the user.",
    "textdich": ""
  },
  {
    "start": 20483.76,
    "end": 20490.24,
    "text": "So I can create a brand new class, we can call this post response, or because it represents",
    "textdich": ""
  },
  {
    "start": 20490.24,
    "end": 20493.52,
    "text": "the response, or we can just call it post, it doesn't really matter, I'm going to call it just",
    "textdich": ""
  },
  {
    "start": 20493.52,
    "end": 20497.36,
    "text": "post. And then we're going to extend base model because all of our pydantic models have to extend",
    "textdich": ""
  },
  {
    "start": 20497.36,
    "end": 20505.2,
    "text": "base model. And then from here, what we have to do is we have to specify all of the fields that",
    "textdich": ""
  },
  {
    "start": 20505.2,
    "end": 20509.44,
    "text": "we want in the response. So we want to send back the title, because that makes sense. So we'll send",
    "textdich": ""
  },
  {
    "start": 20509.44,
    "end": 20516.16,
    "text": "back the title, we'll send back the content, which is going to be of a type string. And then",
    "textdich": ""
  },
  {
    "start": 20517.92,
    "end": 20520.4,
    "text": "we'll send back published as well, which is going to be a Boolean.",
    "textdich": ""
  },
  {
    "start": 20522.88,
    "end": 20528.32,
    "text": "And let's see what that looks like. Alright, so this still looks exactly the same as the other",
    "textdich": ""
  },
  {
    "start": 20528.32,
    "end": 20533.52,
    "text": "ones. But if you actually see right now, for any of the one requests that we sent, we get back the",
    "textdich": ""
  },
  {
    "start": 20533.52,
    "end": 20540.32,
    "text": "ID, as well as the created at field. But since we didn't include those two fields, we shouldn't",
    "textdich": ""
  },
  {
    "start": 20540.32,
    "end": 20547.44,
    "text": "actually send it back to the user. So let's actually try this out. So I'm going to save this,",
    "textdich": ""
  },
  {
    "start": 20548.0,
    "end": 20554.0,
    "text": "and then to actually define the response model. Under a specific request, we'll start off with",
    "textdich": ""
  },
  {
    "start": 20555.52,
    "end": 20561.6,
    "text": "we'll start off with the create request or create posts. And then within the decorator,",
    "textdich": ""
  },
  {
    "start": 20561.6,
    "end": 20567.44,
    "text": "we just pass in another field. And this is called response model. And then you can just let VS code",
    "textdich": ""
  },
  {
    "start": 20568.0,
    "end": 20572.08,
    "text": "automatically select it. And then here, we just reference schemas dot,",
    "textdich": ""
  },
  {
    "start": 20572.08,
    "end": 20575.68,
    "text": "and then the name of the class. So let's try this out. And let's see what happens.",
    "textdich": ""
  },
  {
    "start": 20578.48,
    "end": 20585.68,
    "text": "So now if I create a post, we get a 500 error. And let's see what happened. It says value is",
    "textdich": ""
  },
  {
    "start": 20585.68,
    "end": 20590.72,
    "text": "not a valid dict. So it's, it looks like pedantic is saying that, you know, when we try to send the",
    "textdich": ""
  },
  {
    "start": 20590.72,
    "end": 20599.12,
    "text": "response, the data we got back was not a valid dictionary, right? And because pedantic, the",
    "textdich": ""
  },
  {
    "start": 20599.12,
    "end": 20602.72,
    "text": "pedantic class works with dictionary, it takes a dictionary and then converts it to that specific",
    "textdich": ""
  },
  {
    "start": 20602.72,
    "end": 20606.72,
    "text": "model. So what exactly happened here? Why is this causing an error? Well, if you look at the",
    "textdich": ""
  },
  {
    "start": 20606.72,
    "end": 20615.12,
    "text": "documentation, and where is it right here? And if you go under SQL relational database, it says that",
    "textdich": ""
  },
  {
    "start": 20615.12,
    "end": 20619.92,
    "text": "for your models, your pedantic models, we have to add this extra config called class config,",
    "textdich": ""
  },
  {
    "start": 20619.92,
    "end": 20626.4,
    "text": "or a mode true. And explains exactly why we need that. Right? Because by default, the pedantic",
    "textdich": ""
  },
  {
    "start": 20626.4,
    "end": 20629.68,
    "text": "model will only read it if it's a dictionary, right? And that's what it's expecting in our",
    "textdich": ""
  },
  {
    "start": 20629.68,
    "end": 20633.68,
    "text": "code, because we see the error, it's not a valid dictionary. And that's because when we actually",
    "textdich": ""
  },
  {
    "start": 20633.68,
    "end": 20642.4,
    "text": "make this query, right, new post, this is actually not a dictionary, it's a SQL alchemy model. And so",
    "textdich": ""
  },
  {
    "start": 20642.4,
    "end": 20646.48,
    "text": "pedantic has no idea what to do with the SQL alchemy model, it only knows how to work with",
    "textdich": ""
  },
  {
    "start": 20646.48,
    "end": 20652.8,
    "text": "dictionaries. So we have to tell it to actually convert this SQL alchemy model to be a pedantic",
    "textdich": ""
  },
  {
    "start": 20652.8,
    "end": 20658.64,
    "text": "model. And we do that by passing in this specific text right here. So this is going to say or a mode",
    "textdich": ""
  },
  {
    "start": 20658.64,
    "end": 20663.68,
    "text": "true, this is an ORM model, and it's going to tell pedantic say to, you know, ignore the fact that",
    "textdich": ""
  },
  {
    "start": 20663.68,
    "end": 20669.68,
    "text": "it's not dictionary, and go ahead and convert it. So we can just copy this text and add this to our",
    "textdich": ""
  },
  {
    "start": 20669.68,
    "end": 20682.48,
    "text": "code for our post model. And that should be properly indented. For now that should be good.",
    "textdich": ""
  },
  {
    "start": 20682.48,
    "end": 20688.48,
    "text": "And let's see if we still get an error now. Let's hit send. Look at that we got it. It seems like",
    "textdich": ""
  },
  {
    "start": 20688.48,
    "end": 20693.2,
    "text": "everything worked okay to a one created. But take a look at the fields that we got back, we just got",
    "textdich": ""
  },
  {
    "start": 20693.2,
    "end": 20700.32,
    "text": "title content published. And that's because our model explicitly specified title content published.",
    "textdich": ""
  },
  {
    "start": 20700.32,
    "end": 20704.8,
    "text": "Now we know if we go to our Postgres database, we do have an ID field and a created at field.",
    "textdich": ""
  },
  {
    "start": 20704.8,
    "end": 20711.36,
    "text": "So if we wanted to add those, we can say ID, which is going to be ever type int.",
    "textdich": ""
  },
  {
    "start": 20712.88,
    "end": 20719.44,
    "text": "Let's save that and let's see what that looks like. Right now we get the ID back. Perfect. Well,",
    "textdich": ""
  },
  {
    "start": 20719.44,
    "end": 20724.0,
    "text": "do we want the created at time? I think, you know, your front end code probably wants that as well.",
    "textdich": ""
  },
  {
    "start": 20724.0,
    "end": 20726.48,
    "text": "So let's go ahead and add that. So here we'll do created at.",
    "textdich": ""
  },
  {
    "start": 20730.16,
    "end": 20736.56,
    "text": "Now, what should the type for created at be? Right? It is ultimately, you know, a date and time. Well,",
    "textdich": ""
  },
  {
    "start": 20736.56,
    "end": 20741.52,
    "text": "we can we could do, you know, something like a string. But what we can do that's better than that",
    "textdich": ""
  },
  {
    "start": 20741.52,
    "end": 20747.36,
    "text": "is we can import from date, time import date, time. And so now we can say that the time,",
    "textdich": ""
  },
  {
    "start": 20747.36,
    "end": 20753.36,
    "text": "the created at is going to be of type date, time. And so this is an extra little bit of validation",
    "textdich": ""
  },
  {
    "start": 20753.36,
    "end": 20757.92,
    "text": "to make sure that what we send back is a actual valid date, time, just make sure that you import",
    "textdich": ""
  },
  {
    "start": 20757.92,
    "end": 20766.64,
    "text": "it on in this file. And so now, if I send this back, we now get created at as well. Right. So",
    "textdich": ""
  },
  {
    "start": 20766.64,
    "end": 20771.92,
    "text": "this is how we ultimately define the data that we send back, we can specify exactly the fields we",
    "textdich": ""
  },
  {
    "start": 20771.92,
    "end": 20775.6,
    "text": "want. And that way, we can ensure we don't unnecessarily send data that shouldn't be getting",
    "textdich": ""
  },
  {
    "start": 20775.6,
    "end": 20782.64,
    "text": "sent. Right. And we can do this with anything, I can just send back the ID if I really wanted to.",
    "textdich": ""
  },
  {
    "start": 20785.28,
    "end": 20789.68,
    "text": "Now we just get the ID, right? You see, there's a lot of flexibility and a lot of power. When it",
    "textdich": ""
  },
  {
    "start": 20789.68,
    "end": 20794.32,
    "text": "comes to defining your responses, just like we had when it comes to defining our requests. And",
    "textdich": ""
  },
  {
    "start": 20794.32,
    "end": 20798.96,
    "text": "with API's, like I always say, make sure you explicitly define the exact data you want to",
    "textdich": ""
  },
  {
    "start": 20798.96,
    "end": 20804.0,
    "text": "receive, and the exact data you want to send back to the client. Now, before we move any further",
    "textdich": ""
  },
  {
    "start": 20804.0,
    "end": 20810.0,
    "text": "and wrap up this video, you'll see that there's a lot of duplication, right? Because this post model",
    "textdich": ""
  },
  {
    "start": 20810.0,
    "end": 20815.04,
    "text": "for the response, right, it needs title content published, and then we're just adding ID and",
    "textdich": ""
  },
  {
    "start": 20815.04,
    "end": 20819.84,
    "text": "created at, right. And like I said, when it comes to a real application, you're going to have so",
    "textdich": ""
  },
  {
    "start": 20819.84,
    "end": 20824.72,
    "text": "many more fields, so many more columns, it would be such a pain to have to repeat both of them.",
    "textdich": ""
  },
  {
    "start": 20824.72,
    "end": 20829.6,
    "text": "And so that's why I ultimately created this post base class, because I can extend the post base",
    "textdich": ""
  },
  {
    "start": 20829.6,
    "end": 20835.68,
    "text": "class. And what that's going to do is, is that's going to cause me to inherit the title content",
    "textdich": ""
  },
  {
    "start": 20835.68,
    "end": 20840.96,
    "text": "and published fields, because they're already defined in here. And so I can just remove that.",
    "textdich": ""
  },
  {
    "start": 20847.44,
    "end": 20852.56,
    "text": "And so then I can just specify ID and create it at, and then it's going to inherit the other three",
    "textdich": ""
  },
  {
    "start": 20852.56,
    "end": 20859.04,
    "text": "from the previous class. And so now if I try this again, I send it, you can see that I get the",
    "textdich": ""
  },
  {
    "start": 20859.04,
    "end": 20863.36,
    "text": "same exact result, but I only had to specify the new columns I wanted to add in the response.",
    "textdich": ""
  },
  {
    "start": 20865.28,
    "end": 20869.36,
    "text": "So this is really no different than, you know, working with any other model in Python, we get",
    "textdich": ""
  },
  {
    "start": 20869.36,
    "end": 20875.84,
    "text": "access to all of the usual features like inheritance, so we can help reduce the amount of code that we",
    "textdich": ""
  },
  {
    "start": 20875.84,
    "end": 20884.16,
    "text": "actually write. All right, and so now let's go ahead and update all of the other path operations",
    "textdich": ""
  },
  {
    "start": 20884.16,
    "end": 20888.64,
    "text": "as well, because we can see that we only did it for create posts. But let's go ahead and do it for",
    "textdich": ""
  },
  {
    "start": 20888.64,
    "end": 20895.12,
    "text": "get an individual post. So this is going to be the same exact response model. And we can just",
    "textdich": ""
  },
  {
    "start": 20895.12,
    "end": 20902.64,
    "text": "reference schemas dot post. And we'll do the same thing for our update post as well. We'll say",
    "textdich": ""
  },
  {
    "start": 20902.64,
    "end": 20912.72,
    "text": "response model equals schemas dot post. And then let's just, you know, double check. So get one",
    "textdich": ""
  },
  {
    "start": 20912.72,
    "end": 20920.4,
    "text": "post, this should work just fine. Perfect. And then update post. And it looks like that works",
    "textdich": ""
  },
  {
    "start": 20920.4,
    "end": 20926.72,
    "text": "as well. And the last thing that we need to do is get all posts. Right. So right now, if we do get",
    "textdich": ""
  },
  {
    "start": 20926.72,
    "end": 20933.92,
    "text": "all posts, now, where is that right here? We still haven't sent us a list to response model equals,",
    "textdich": ""
  },
  {
    "start": 20933.92,
    "end": 20942.8,
    "text": "and then we can say schemas dot post. And then let's try that out. We hit send, we get an error,",
    "textdich": ""
  },
  {
    "start": 20942.8,
    "end": 20948.24,
    "text": "and this is expected. And I want you to stop and whoops, I want you to stop and think about what",
    "textdich": ""
  },
  {
    "start": 20948.24,
    "end": 20956.4,
    "text": "exactly is happening. Because we are returning a list of posts. And it's trying to shape that into",
    "textdich": ""
  },
  {
    "start": 20956.96,
    "end": 20962.96,
    "text": "one individual post, right, we got a list of posts, we should be sending back a list of our schema",
    "textdich": ""
  },
  {
    "start": 20962.96,
    "end": 20969.92,
    "text": "post. So how do we do that? Can we just put a could we just put a bracket or something like that?",
    "textdich": ""
  },
  {
    "start": 20969.92,
    "end": 20975.76,
    "text": "Will that work? Let's try this. Well, it looks like there's an error. So this doesn't seem to",
    "textdich": ""
  },
  {
    "start": 20975.76,
    "end": 20982.24,
    "text": "work. So how can we specify we want a list of posts? Well, we have to import something from",
    "textdich": ""
  },
  {
    "start": 20982.24,
    "end": 20988.32,
    "text": "the typing library. So we have an optional from the typing library, we can also import list. And",
    "textdich": ""
  },
  {
    "start": 20988.32,
    "end": 20997.6,
    "text": "so now I go back to our get posts, I can say, list. And so now if I hit send, we should get back all",
    "textdich": ""
  },
  {
    "start": 20997.6,
    "end": 21003.92,
    "text": "of our posts. So here, we're just specifying we want a list of our specific schema post model.",
    "textdich": ""
  },
  {
    "start": 21004.96,
    "end": 21010.0,
    "text": "And that's just going to allow us to get a list of posts. Very simple. In the next couple of",
    "textdich": ""
  },
  {
    "start": 21010.0,
    "end": 21016.24,
    "text": "sections, we're going to focus on creating user functionality. And what I mean by that is having",
    "textdich": ""
  },
  {
    "start": 21016.24,
    "end": 21022.16,
    "text": "users be able to actually create an account within our app, being able to log in, as well as being",
    "textdich": ""
  },
  {
    "start": 21022.16,
    "end": 21026.24,
    "text": "able to create posts that are associated with their specific account. And so the first thing",
    "textdich": ""
  },
  {
    "start": 21026.24,
    "end": 21033.2,
    "text": "that I want to tackle is handling user registration. So we need to be able to provide a way for users",
    "textdich": ""
  },
  {
    "start": 21033.2,
    "end": 21038.16,
    "text": "to create a brand new account. And the first thing that we have to do is we have to define our model,",
    "textdich": ""
  },
  {
    "start": 21038.16,
    "end": 21042.88,
    "text": "or more specifically, we have to create a table within our Postgres database, that's going to",
    "textdich": ""
  },
  {
    "start": 21042.88,
    "end": 21048.72,
    "text": "hold all of our user information. And so since we're using SQL alchemy, we're going to create",
    "textdich": ""
  },
  {
    "start": 21048.72,
    "end": 21054.64,
    "text": "a new ORM model, just like we did for post so that we can define what our Postgres table ultimately",
    "textdich": ""
  },
  {
    "start": 21054.64,
    "end": 21061.52,
    "text": "looks like. Let's create a new class. And I'm going to call this class user. And this is going",
    "textdich": ""
  },
  {
    "start": 21061.52,
    "end": 21066.32,
    "text": "to extend base, that's just a requirement for any SQL alchemy model. And then here, we're going to",
    "textdich": ""
  },
  {
    "start": 21066.32,
    "end": 21071.28,
    "text": "provide the table name within Postgres. So I'm going to say the table within Postgres should",
    "textdich": ""
  },
  {
    "start": 21071.28,
    "end": 21077.12,
    "text": "be called users. Then let's go ahead and figure out what are the different columns that we need.",
    "textdich": ""
  },
  {
    "start": 21078.0,
    "end": 21083.6,
    "text": "And so we're going to handle registration by having the user providing a email address.",
    "textdich": ""
  },
  {
    "start": 21083.6,
    "end": 21087.44,
    "text": "So we should have a column for us to be able to store their email. So we'll say email",
    "textdich": ""
  },
  {
    "start": 21088.8,
    "end": 21092.16,
    "text": "equals column, this is going to be of a type string.",
    "textdich": ""
  },
  {
    "start": 21092.16,
    "end": 21104.48,
    "text": "And we're going to say that this is nullable is set to false. So they have to provide an email.",
    "textdich": ""
  },
  {
    "start": 21106.24,
    "end": 21111.44,
    "text": "And then on top of that, we shouldn't allow someone within with a specific email to register",
    "textdich": ""
  },
  {
    "start": 21111.44,
    "end": 21115.92,
    "text": "twice with that email, right, there should only be one account with one specific email. So we're",
    "textdich": ""
  },
  {
    "start": 21115.92,
    "end": 21122.0,
    "text": "going to say that the unique constraint is set to true, that's going to prevent one email from",
    "textdich": ""
  },
  {
    "start": 21122.0,
    "end": 21131.36,
    "text": "registering twice. The next thing that we need is for us to be able to store the user's password.",
    "textdich": ""
  },
  {
    "start": 21131.36,
    "end": 21134.88,
    "text": "So we'll create a column for password. This is once again going to be a string.",
    "textdich": ""
  },
  {
    "start": 21136.72,
    "end": 21140.8,
    "text": "And then once again, the nullable is going to be set to false, because we shouldn't be able to let",
    "textdich": ""
  },
  {
    "start": 21140.8,
    "end": 21145.76,
    "text": "them create an account without a password. And we don't need a unique constraint, because I don't",
    "textdich": ""
  },
  {
    "start": 21145.76,
    "end": 21151.12,
    "text": "care if two users have the same password is up to them. And then finally, just like we had with the",
    "textdich": ""
  },
  {
    "start": 21151.12,
    "end": 21156.8,
    "text": "posts class, we're going to have a column for ID. So every user is going to have a unique ID. So",
    "textdich": ""
  },
  {
    "start": 21156.8,
    "end": 21162.24,
    "text": "I'm just going to copy and paste that. And so at this point, I think that's all we need for our",
    "textdich": ""
  },
  {
    "start": 21162.24,
    "end": 21167.68,
    "text": "user class. If you save it, it's going to reload the application, and it looks like I got an error.",
    "textdich": ""
  },
  {
    "start": 21168.96,
    "end": 21174.64,
    "text": "And I realized this should not be str, this should actually be string. That's my mistake.",
    "textdich": ""
  },
  {
    "start": 21174.64,
    "end": 21181.76,
    "text": "And then actually, before we do anything else, I want to create a that column as well. So we can",
    "textdich": ""
  },
  {
    "start": 21181.76,
    "end": 21186.4,
    "text": "just copy this, and then paste that in there, like I said, pretty much anytime you create something",
    "textdich": ""
  },
  {
    "start": 21186.4,
    "end": 21192.32,
    "text": "in your database, you want to make sure that you record when it was created, you never know when",
    "textdich": ""
  },
  {
    "start": 21192.32,
    "end": 21197.84,
    "text": "you'll need that information. And so we've restarted our application, let's go to Postgres. And under",
    "textdich": ""
  },
  {
    "start": 21197.84,
    "end": 21202.32,
    "text": "my tables, I'm just going to do a refresh. And it looks like it went ahead and created our users",
    "textdich": ""
  },
  {
    "start": 21202.32,
    "end": 21210.32,
    "text": "table. And if we do a user's properties, we should see that it created all four columns. And all of",
    "textdich": ""
  },
  {
    "start": 21210.32,
    "end": 21217.6,
    "text": "the necessary constraints should be set there as well. And so let's, you know, just play around",
    "textdich": ""
  },
  {
    "start": 21217.6,
    "end": 21222.16,
    "text": "with this in Postgres just to make sure it works. Because I don't really trust SQL alchemy ever.",
    "textdich": ""
  },
  {
    "start": 21222.16,
    "end": 21229.2,
    "text": "So let's do right click. And then we'll do view edit data. So right now there shouldn't be any",
    "textdich": ""
  },
  {
    "start": 21229.2,
    "end": 21237.76,
    "text": "users. And let's create a new user. So I'll say this is john at gmail.com. password, you know,",
    "textdich": ""
  },
  {
    "start": 21237.76,
    "end": 21244.72,
    "text": "just put whatever you want for now. And then if we save that, right, it then successfully created",
    "textdich": ""
  },
  {
    "start": 21244.72,
    "end": 21250.16,
    "text": "a user, we got the generated ID as well as the created at timestamp. And then let's create a",
    "textdich": ""
  },
  {
    "start": 21250.16,
    "end": 21254.4,
    "text": "new user. So I'm going to use the same exact email. So this should throw an error because we",
    "textdich": ""
  },
  {
    "start": 21254.4,
    "end": 21260.48,
    "text": "shouldn't be able to register again, you know, some random password. And then if I try to save",
    "textdich": ""
  },
  {
    "start": 21260.48,
    "end": 21265.28,
    "text": "this, we should get a unique constraint on users email error. So perfect. So that worked. And I'm",
    "textdich": ""
  },
  {
    "start": 21265.28,
    "end": 21272.88,
    "text": "just going to change this to be Cindy at gmail.com. We'll save that. And it should create those users",
    "textdich": ""
  },
  {
    "start": 21272.88,
    "end": 21279.68,
    "text": "self perfect. So we've got the first step done when it comes to defining our table. The next",
    "textdich": ""
  },
  {
    "start": 21279.68,
    "end": 21286.56,
    "text": "thing that I want to do is we will create a new path operation so that a user can actually",
    "textdich": ""
  },
  {
    "start": 21286.56,
    "end": 21290.72,
    "text": "send his username and password to our API. And then we can actually generate that user.",
    "textdich": ""
  },
  {
    "start": 21291.84,
    "end": 21296.0,
    "text": "Just like we did with posts, we're going to create a new path operation for creating a",
    "textdich": ""
  },
  {
    "start": 21296.0,
    "end": 21301.68,
    "text": "new user. So we'll go to the bottom of our main document. And I'm going to create a new",
    "textdich": ""
  },
  {
    "start": 21301.68,
    "end": 21313.44,
    "text": "function. I'll say we'll call this create user. And so just like we have for creating a post,",
    "textdich": ""
  },
  {
    "start": 21313.44,
    "end": 21323.6,
    "text": "I'm going to copy this decorator, and we'll rename it. So it is going to be a post request,",
    "textdich": ""
  },
  {
    "start": 21323.6,
    "end": 21327.92,
    "text": "but it's going to be sent to the URL of users because we're no longer working with posts.",
    "textdich": ""
  },
  {
    "start": 21327.92,
    "end": 21333.6,
    "text": "And keep in mind, you get to select whatever URL or path you want to use. If you want to call this,",
    "textdich": ""
  },
  {
    "start": 21333.6,
    "end": 21338.72,
    "text": "I mean, it's bad practice to call it create user. But you can choose whatever you want.",
    "textdich": ""
  },
  {
    "start": 21338.72,
    "end": 21344.96,
    "text": "I think it makes sense to call it users. And anytime you create something, remember,",
    "textdich": ""
  },
  {
    "start": 21344.96,
    "end": 21350.0,
    "text": "the status code should always be the default 201. And I'll get rid of the response model for now",
    "textdich": ""
  },
  {
    "start": 21350.0,
    "end": 21359.12,
    "text": "just to keep things simple. Now, we're ultimately going to be using our database to create a brand",
    "textdich": ""
  },
  {
    "start": 21359.12,
    "end": 21364.8,
    "text": "new user. So let's go ahead and copy this DB right here from all of the other path operations,",
    "textdich": ""
  },
  {
    "start": 21364.8,
    "end": 21369.68,
    "text": "because that's going to have to go in there. And then anytime we want to, you know, receive data",
    "textdich": ""
  },
  {
    "start": 21369.68,
    "end": 21374.64,
    "text": "from the user, because the user is going to have to send the email he wants to register with,",
    "textdich": ""
  },
  {
    "start": 21374.64,
    "end": 21379.92,
    "text": "as well as his password in the body of the request, it always makes sense to define a specific schema",
    "textdich": ""
  },
  {
    "start": 21379.92,
    "end": 21383.92,
    "text": "so that we can ensure that the user does provide both of those. So just like we did with posts,",
    "textdich": ""
  },
  {
    "start": 21383.92,
    "end": 21390.32,
    "text": "we're going to create a brand new schema. And I can call this user or we can call this user.",
    "textdich": ""
  },
  {
    "start": 21391.36,
    "end": 21395.2,
    "text": "I think this one, it makes sense to call this user create. So this is going to handle just",
    "textdich": ""
  },
  {
    "start": 21395.2,
    "end": 21403.76,
    "text": "for creating users. And we're going to inherit from base model. And for the user create,",
    "textdich": ""
  },
  {
    "start": 21403.76,
    "end": 21408.88,
    "text": "there's going to be an email field, which is going to be a string, as well as a password field,",
    "textdich": ""
  },
  {
    "start": 21408.88,
    "end": 21415.68,
    "text": "which is going to be of a type string. And when it comes to validating the user, right,",
    "textdich": ""
  },
  {
    "start": 21415.68,
    "end": 21419.44,
    "text": "it's going to check to make sure that an email is provided and a password is provided. However,",
    "textdich": ""
  },
  {
    "start": 21419.44,
    "end": 21424.8,
    "text": "we can get a little bit more granular than that. If you actually go to the pedantic documentation,",
    "textdich": ""
  },
  {
    "start": 21424.8,
    "end": 21429.36,
    "text": "we also have a field called email string. But this is going to validate that the email property",
    "textdich": ""
  },
  {
    "start": 21429.36,
    "end": 21435.76,
    "text": "is a valid email. However, we need to have the email validator library installed. But that should",
    "textdich": ""
  },
  {
    "start": 21435.76,
    "end": 21440.0,
    "text": "automatically have already been installed for us when we installed fast API with the all flag.",
    "textdich": ""
  },
  {
    "start": 21440.0,
    "end": 21450.16,
    "text": "And so if you do a PIP freeze, we should be able to see that we have our email validator already",
    "textdich": ""
  },
  {
    "start": 21450.16,
    "end": 21455.2,
    "text": "installed. If you don't have it installed for some reason, just go ahead and do a PIP install",
    "textdich": ""
  },
  {
    "start": 21455.2,
    "end": 21462.08,
    "text": "email validator. And that should install that library. And so what we'll do is from the",
    "textdich": ""
  },
  {
    "start": 21462.08,
    "end": 21469.52,
    "text": "pedantic library, we're going to import email string. And then we can say this is going to be",
    "textdich": ""
  },
  {
    "start": 21470.08,
    "end": 21475.52,
    "text": "email, a type email string that's going to ensure that this is a valid email and not just some",
    "textdich": ""
  },
  {
    "start": 21475.52,
    "end": 21486.24,
    "text": "random text. Then back in our main.py file. Just like we did before, we can say user,",
    "textdich": ""
  },
  {
    "start": 21486.24,
    "end": 21495.6,
    "text": "and then this is going to use schemas dot user create. And so the email address and the password",
    "textdich": ""
  },
  {
    "start": 21495.6,
    "end": 21499.92,
    "text": "is going to be stored in an object called user, there's going to be a pedantic object as well.",
    "textdich": ""
  },
  {
    "start": 21500.8,
    "end": 21507.92,
    "text": "And if you forgot how to save data to the database or create something with SQL alchemy,",
    "textdich": ""
  },
  {
    "start": 21507.92,
    "end": 21512.64,
    "text": "just go ahead and take a look at the create posts. And we can essentially just copy this.",
    "textdich": ""
  },
  {
    "start": 21512.64,
    "end": 21523.6,
    "text": "And we're just going to rename a few things. We'll say new user. And then we're going to",
    "textdich": ""
  },
  {
    "start": 21523.6,
    "end": 21531.6,
    "text": "grab models dot user now. And then once again, what we want to do is we want to take the user",
    "textdich": ""
  },
  {
    "start": 21531.6,
    "end": 21536.48,
    "text": "that we get back from here from our schema, we want to convert it to a dictionary and then",
    "textdich": ""
  },
  {
    "start": 21536.48,
    "end": 21543.6,
    "text": "unpack that dictionary. Then we're going to add it to our database. We're going to commit it,",
    "textdich": ""
  },
  {
    "start": 21543.6,
    "end": 21551.6,
    "text": "then we're going to refresh it. So we see the brand new user. And then we can go ahead and just",
    "textdich": ""
  },
  {
    "start": 21551.6,
    "end": 21561.2,
    "text": "return new user. Alright, let's give that a shot. And then within our postman, we can right click",
    "textdich": ""
  },
  {
    "start": 21561.2,
    "end": 21568.24,
    "text": "on this, select Add request, we're going to name this create user, this is going to be a post request.",
    "textdich": ""
  },
  {
    "start": 21572.56,
    "end": 21575.92,
    "text": "And then in the body, we'll go to raw once again, and then JSON.",
    "textdich": ""
  },
  {
    "start": 21577.28,
    "end": 21583.84,
    "text": "And then here we can pass in the email. We'll give it some random email. So I'll call this",
    "textdich": ""
  },
  {
    "start": 21583.84,
    "end": 21598.32,
    "text": "Carl at gmail.com. And then password. This will be password 123. All right, and then for the URL,",
    "textdich": ""
  },
  {
    "start": 21598.32,
    "end": 21608.64,
    "text": "just copy posts. And then here, we'll just change this to users. All right, so let's give this a",
    "textdich": ""
  },
  {
    "start": 21608.64,
    "end": 21614.32,
    "text": "shot. Let's see if this works. And it looks like it worked, right? We got the email, we got the",
    "textdich": ""
  },
  {
    "start": 21614.32,
    "end": 21618.96,
    "text": "password back, we got the created at and we've got an ID. But just to double check, like we always",
    "textdich": ""
  },
  {
    "start": 21618.96,
    "end": 21626.96,
    "text": "do go ahead and go to your users table, select query tool, select star from users now. Because",
    "textdich": ""
  },
  {
    "start": 21626.96,
    "end": 21632.4,
    "text": "we're now querying, no longer the post table, we're querying the users table. If I run this,",
    "textdich": ""
  },
  {
    "start": 21632.4,
    "end": 21637.2,
    "text": "we can see that we do get the new email that we created or the new user that we created with",
    "textdich": ""
  },
  {
    "start": 21637.2,
    "end": 21642.4,
    "text": "Carl at gmail.com. Now as a quick test, just to make sure that email validator works,",
    "textdich": ""
  },
  {
    "start": 21643.52,
    "end": 21649.6,
    "text": "I'm going to change this. And we'll just say some random text, this is obviously not a valid email.",
    "textdich": ""
  },
  {
    "start": 21649.6,
    "end": 21654.96,
    "text": "So let's see if it properly creates that user. And it looks like our scheme of validator worked and",
    "textdich": ""
  },
  {
    "start": 21654.96,
    "end": 21659.52,
    "text": "says value is not a valid email address. So you can see the powerfulness of the pedantic library",
    "textdich": ""
  },
  {
    "start": 21659.52,
    "end": 21664.64,
    "text": "being able to automatically check to see if that's a valid email address. All right, but one thing I",
    "textdich": ""
  },
  {
    "start": 21664.64,
    "end": 21670.24,
    "text": "didn't like about creating the user is that if we change this back to a valid email, I'll say,",
    "textdich": ""
  },
  {
    "start": 21670.24,
    "end": 21677.68,
    "text": "just call this new user at gmail.com. We create that user, you see that he gets his password back.",
    "textdich": ""
  },
  {
    "start": 21677.68,
    "end": 21682.08,
    "text": "Now, why in the world would he want to see his password back? There's no reason to ever send",
    "textdich": ""
  },
  {
    "start": 21682.08,
    "end": 21687.76,
    "text": "the password back to the user at any point. And so one of the things I want to do is I want to",
    "textdich": ""
  },
  {
    "start": 21687.76,
    "end": 21692.48,
    "text": "define our response model so that we never send back the user. And I think you guys should already",
    "textdich": ""
  },
  {
    "start": 21692.48,
    "end": 21696.8,
    "text": "be able to do that. But we'll walk I'll walk you through how to do that. So let's go to our schemas,",
    "textdich": ""
  },
  {
    "start": 21696.8,
    "end": 21703.04,
    "text": "we've got our user create, let's create our let's create a new class, and I'll call this user out.",
    "textdich": ""
  },
  {
    "start": 21703.92,
    "end": 21707.92,
    "text": "And so this is going to be the shape of our model when we send back the user",
    "textdich": ""
  },
  {
    "start": 21708.8,
    "end": 21712.4,
    "text": "to the client that requested it is going to extend base model as well.",
    "textdich": ""
  },
  {
    "start": 21715.28,
    "end": 21719.36,
    "text": "And here, we're going to send out a couple things. So there's going to be an ID now,",
    "textdich": ""
  },
  {
    "start": 21719.36,
    "end": 21725.28,
    "text": "the user should know his ID, email. That's going to be of email string again.",
    "textdich": ""
  },
  {
    "start": 21729.12,
    "end": 21732.64,
    "text": "And then we'll just leave out password. So by leaving out password, we won't ever send it back.",
    "textdich": ""
  },
  {
    "start": 21733.28,
    "end": 21738.24,
    "text": "But just like we did with the post model, remember, this is going to be a SQL alchemy",
    "textdich": ""
  },
  {
    "start": 21739.52,
    "end": 21744.16,
    "text": "model that we get. And we need pedantic to convert it to a regular pedantic model. So we need this",
    "textdich": ""
  },
  {
    "start": 21744.16,
    "end": 21756.56,
    "text": "config right here. And then in our path operation, we can set the response model to be schemas dot",
    "textdich": ""
  },
  {
    "start": 21758.16,
    "end": 21769.28,
    "text": "user out. All right, and then now if I just change the fields up a little bit,",
    "textdich": ""
  },
  {
    "start": 21769.28,
    "end": 21776.24,
    "text": "create a new email, you can see that we get the ID and the email as well, but there's no password.",
    "textdich": ""
  },
  {
    "start": 21776.24,
    "end": 21782.56,
    "text": "And that's exactly what we want. And so now you guys should be fairly comfortable with being able",
    "textdich": ""
  },
  {
    "start": 21782.56,
    "end": 21787.28,
    "text": "to define a response model as well as in a request model so that you can pick and choose whatever",
    "textdich": ""
  },
  {
    "start": 21787.28,
    "end": 21791.92,
    "text": "field you want. One last change I want to make is I want to go ahead and just add the created at",
    "textdich": ""
  },
  {
    "start": 21791.92,
    "end": 21804.56,
    "text": "field as well. And we can just copy this right here. So now just create another email. Right.",
    "textdich": ""
  },
  {
    "start": 21804.56,
    "end": 21809.28,
    "text": "And now we get the creative field. So we got all the fields that we want. In the last lesson,",
    "textdich": ""
  },
  {
    "start": 21809.28,
    "end": 21814.32,
    "text": "we handled the logic for creating a new user. But for a lot of the people that are familiar",
    "textdich": ""
  },
  {
    "start": 21814.32,
    "end": 21819.04,
    "text": "with security, I'm sure you guys may have had a little bit of a heart attack. Because we did",
    "textdich": ""
  },
  {
    "start": 21819.04,
    "end": 21823.76,
    "text": "something that's very, very frowned upon. We took the user's password, and we just stored it as",
    "textdich": ""
  },
  {
    "start": 21823.76,
    "end": 21828.24,
    "text": "plain text within our database. And some of you might be thinking, Well, what's the problem with",
    "textdich": ""
  },
  {
    "start": 21828.24,
    "end": 21832.72,
    "text": "that? Right? It's in our secure database. Well, right, our database is secure for now. But there",
    "textdich": ""
  },
  {
    "start": 21832.72,
    "end": 21837.36,
    "text": "are hacks, there are things that can happen, you know, these, all of these records could potentially",
    "textdich": ""
  },
  {
    "start": 21837.36,
    "end": 21843.52,
    "text": "get leaked in some fashion. And it's very dangerous to just have a user's password just stored in",
    "textdich": ""
  },
  {
    "start": 21843.52,
    "end": 21848.08,
    "text": "plain text like this that anyone can read. So when it comes to working with passwords and databases,",
    "textdich": ""
  },
  {
    "start": 21848.08,
    "end": 21852.24,
    "text": "what you always want to do is you want to hash the password. So we never store the actual password",
    "textdich": ""
  },
  {
    "start": 21852.24,
    "end": 21856.64,
    "text": "in our database, we just store a hash of it. So that if it does get leaked, well, no biggie,",
    "textdich": ""
  },
  {
    "start": 21856.64,
    "end": 21860.56,
    "text": "because it's ultimately just a hash, you can't really reverse engineer that hash and get the",
    "textdich": ""
  },
  {
    "start": 21860.56,
    "end": 21866.64,
    "text": "original password back. So in this lesson, we're going to focus on hashing the password when a",
    "textdich": ""
  },
  {
    "start": 21866.64,
    "end": 21871.68,
    "text": "user first registers so that we never actually store the raw password within the database.",
    "textdich": ""
  },
  {
    "start": 21872.24,
    "end": 21877.52,
    "text": "And within our fast API documentation, they have a good article that kind of covers how to do that.",
    "textdich": ""
  },
  {
    "start": 21877.52,
    "end": 21882.24,
    "text": "So if you go under security, and then OAuth two with password, it'll show you what we actually",
    "textdich": ""
  },
  {
    "start": 21882.24,
    "end": 21887.44,
    "text": "need to do when it comes to hashing. So there's two libraries that we need to install. Right,",
    "textdich": ""
  },
  {
    "start": 21887.44,
    "end": 21893.04,
    "text": "we need past lib. And so that's going to kind of handle the hashing. But we need to actually",
    "textdich": ""
  },
  {
    "start": 21893.04,
    "end": 21897.28,
    "text": "specify a specific algorithm because past lib can work with different algorithms. One of the more",
    "textdich": ""
  },
  {
    "start": 21897.28,
    "end": 21901.12,
    "text": "popular ones is bcrypt. So we'll need two different libraries, we'll need the past lib,",
    "textdich": ""
  },
  {
    "start": 21901.12,
    "end": 21906.0,
    "text": "and then the bcrypt library. And we can just do that by running pip install past lib bcrypt.",
    "textdich": ""
  },
  {
    "start": 21906.0,
    "end": 21913.76,
    "text": "So I'll just copy this will go to our application. And I'm just going to run that command.",
    "textdich": ""
  },
  {
    "start": 21916.96,
    "end": 21920.08,
    "text": "Right, and then let's just do a pip freeze just to make sure it got installed.",
    "textdich": ""
  },
  {
    "start": 21921.28,
    "end": 21927.12,
    "text": "And we see past lib there now. And then do we see bcrypt? And we see bcrypt in there as well. So",
    "textdich": ""
  },
  {
    "start": 21927.12,
    "end": 21932.56,
    "text": "we've got both of the libraries that we need to actually perform the hashing. So let's go to our",
    "textdich": ""
  },
  {
    "start": 21932.56,
    "end": 21944.16,
    "text": "main file. And somewhere up at the top, I'm going to import from past lib dot context import",
    "textdich": ""
  },
  {
    "start": 21945.2,
    "end": 21952.96,
    "text": "crypto context. And then what we need to do is come place below that we have to define",
    "textdich": ""
  },
  {
    "start": 21952.96,
    "end": 21960.8,
    "text": "this setting right here. So we do pwd underscore context equals, and then we reference that crypto",
    "textdich": ""
  },
  {
    "start": 21960.8,
    "end": 21972.32,
    "text": "context. And then here we say schemas equals brackets, bcrypt. And then we'll do deprecated",
    "textdich": ""
  },
  {
    "start": 21978.88,
    "end": 21985.2,
    "text": "equals auto. Alright, and so basically all we're doing is, and this is going to actually be a",
    "textdich": ""
  },
  {
    "start": 21985.2,
    "end": 21992.72,
    "text": "string. All we're doing right here is we're telling past lib, what is the default hashing algorithm,",
    "textdich": ""
  },
  {
    "start": 21992.72,
    "end": 21996.56,
    "text": "or what hashing algorithm do we want to use? In this case, we want to use bcrypt. So that's all",
    "textdich": ""
  },
  {
    "start": 21996.56,
    "end": 22005.92,
    "text": "this is doing. Now, when we go to our user registration, down here, we have to do a couple",
    "textdich": ""
  },
  {
    "start": 22005.92,
    "end": 22012.88,
    "text": "things. And so before we actually create the user, we need to actually create the hash of the password.",
    "textdich": ""
  },
  {
    "start": 22012.88,
    "end": 22020.96,
    "text": "So the first thing is what's not in JavaScript land, we're going to hash the password, which",
    "textdich": ""
  },
  {
    "start": 22022.96,
    "end": 22027.12,
    "text": "can be retrieved from user dot password, right? Because that's going to be stored inside this",
    "textdich": ""
  },
  {
    "start": 22027.12,
    "end": 22034.0,
    "text": "object. And so how do we exactly do that? Well, what we can do is all we have to do is reference",
    "textdich": ""
  },
  {
    "start": 22034.0,
    "end": 22038.16,
    "text": "that password context, right? If you forgot what that is, just go all the way up to the top.",
    "textdich": ""
  },
  {
    "start": 22038.16,
    "end": 22046.4,
    "text": "That's this command right here. So we reference password context. And we call the hash method.",
    "textdich": ""
  },
  {
    "start": 22046.4,
    "end": 22051.04,
    "text": "So that's going to perform a hash, and then we just pass in user dot password.",
    "textdich": ""
  },
  {
    "start": 22055.44,
    "end": 22060.96,
    "text": "And then we can store this in a variable called hashed underscore password.",
    "textdich": ""
  },
  {
    "start": 22060.96,
    "end": 22069.52,
    "text": "And then what we're going to do here is we're going to take the user dot password. And we're",
    "textdich": ""
  },
  {
    "start": 22069.52,
    "end": 22075.28,
    "text": "going to set that now to the new hashed password. That's going to update the pedantic user model.",
    "textdich": ""
  },
  {
    "start": 22078.0,
    "end": 22082.16,
    "text": "And then at that point, we can just leave everything as is, right? So we hash the password,",
    "textdich": ""
  },
  {
    "start": 22082.16,
    "end": 22086.32,
    "text": "so we got a hash, and then we stored it under user password, and then everything else can just be kept",
    "textdich": ""
  },
  {
    "start": 22086.32,
    "end": 22090.4,
    "text": "the same. So let's actually try this out. And let me just double check to see there's no errors,",
    "textdich": ""
  },
  {
    "start": 22090.4,
    "end": 22095.76,
    "text": "and there isn't. So let's create a brand new user. And I'll call this mark at gmail.com.",
    "textdich": ""
  },
  {
    "start": 22097.2,
    "end": 22102.88,
    "text": "Same password, that's fine. Then it looks like everything worked. And then let's just run this.",
    "textdich": ""
  },
  {
    "start": 22103.6,
    "end": 22109.12,
    "text": "And then if you see that most recent user, you can see that we no longer store the raw password,",
    "textdich": ""
  },
  {
    "start": 22109.12,
    "end": 22113.2,
    "text": "we store a hash of it. And so that's going to help it be a little bit more secure. Because if",
    "textdich": ""
  },
  {
    "start": 22113.2,
    "end": 22117.84,
    "text": "it does leak, then you know, the hackers will only get access to a hashed password, and they can't",
    "textdich": ""
  },
  {
    "start": 22117.84,
    "end": 22122.96,
    "text": "exactly convert it back to the original password. That's the great part about hashing. It's a one",
    "textdich": ""
  },
  {
    "start": 22122.96,
    "end": 22127.92,
    "text": "way street, we hash it, we only get the final password, you can never put it back into a function",
    "textdich": ""
  },
  {
    "start": 22127.92,
    "end": 22133.12,
    "text": "to convert it back to a password. Now, one thing I want to do is I want to extract all of the",
    "textdich": ""
  },
  {
    "start": 22133.12,
    "end": 22139.44,
    "text": "hashing logic and store it in its own function. So I'm going to create a new file. And I call this",
    "textdich": ""
  },
  {
    "start": 22139.44,
    "end": 22145.36,
    "text": "utils.py. These are this file is just going to hold a bunch of utility functions. And what I'm",
    "textdich": ""
  },
  {
    "start": 22145.36,
    "end": 22152.24,
    "text": "going to do is I'm going to go to our main file. And I'm going to remove this line or cut it.",
    "textdich": ""
  },
  {
    "start": 22153.12,
    "end": 22157.92,
    "text": "And we're going to paste it into my utils file. And then we're also going to cut this out.",
    "textdich": ""
  },
  {
    "start": 22157.92,
    "end": 22164.24,
    "text": "We're going to move all of this logic into here. And then we're going to define a function that",
    "textdich": ""
  },
  {
    "start": 22164.24,
    "end": 22169.92,
    "text": "we can call. And I'm going to call this function hash. And it's going to take a password, which",
    "textdich": ""
  },
  {
    "start": 22169.92,
    "end": 22177.2,
    "text": "is going to be of type string. And all it's going to do is it's going to return pwd context dot hash",
    "textdich": ""
  },
  {
    "start": 22178.08,
    "end": 22184.8,
    "text": "of whatever the password the user passes in. And that way, we really extract and place all of the",
    "textdich": ""
  },
  {
    "start": 22185.76,
    "end": 22189.6,
    "text": "hashing logic into one file or one function. So we don't have to import",
    "textdich": ""
  },
  {
    "start": 22189.6,
    "end": 22201.6,
    "text": "all of this nonsense into other files. And then in our main.py file, we can import utils. And then",
    "textdich": ""
  },
  {
    "start": 22201.6,
    "end": 22210.88,
    "text": "down here, what we can do is instead of calling this, I can just call utils dot hash. And then",
    "textdich": ""
  },
  {
    "start": 22210.88,
    "end": 22220.48,
    "text": "we'll pass in the user dot password again. And this shouldn't really change anything else in our code.",
    "textdich": ""
  },
  {
    "start": 22220.48,
    "end": 22227.12,
    "text": "Let's try this again, create a just add a one here. Then seems to work. Let's just double check.",
    "textdich": ""
  },
  {
    "start": 22228.08,
    "end": 22234.4,
    "text": "And the second user, the password was properly hashed. The next thing I want to do is I want to",
    "textdich": ""
  },
  {
    "start": 22234.4,
    "end": 22239.2,
    "text": "set up a route or a path operation that allows you to fetch and retrieve information about a",
    "textdich": ""
  },
  {
    "start": 22239.2,
    "end": 22244.08,
    "text": "user based off of their ID. And there's a couple of different reasons why I want to do this.",
    "textdich": ""
  },
  {
    "start": 22244.8,
    "end": 22249.52,
    "text": "One of them is it can be part of the authentication process. So depending on how you set up the front",
    "textdich": ""
  },
  {
    "start": 22249.52,
    "end": 22258.0,
    "text": "end, if you decide to, you know, set up JWT tokens to get sent as cookies, then the front end may not",
    "textdich": ""
  },
  {
    "start": 22258.0,
    "end": 22263.28,
    "text": "actually know whether it's logged in or not. And so a lot of times you'll see some APIs have an",
    "textdich": ""
  },
  {
    "start": 22263.28,
    "end": 22268.32,
    "text": "endpoint to let you kind of retrieve information about your own account. And so if you're able to",
    "textdich": ""
  },
  {
    "start": 22268.32,
    "end": 22272.88,
    "text": "access it, that means you're logged in. If you're not, then you know that you need to fetch a new",
    "textdich": ""
  },
  {
    "start": 22272.88,
    "end": 22279.2,
    "text": "token. Also, there's other reasons why you want to do this, too. You know, if you're, you know,",
    "textdich": ""
  },
  {
    "start": 22279.2,
    "end": 22283.44,
    "text": "taking a look at something like Twitter, right, you need to retrieve a user's profile if you want",
    "textdich": ""
  },
  {
    "start": 22283.44,
    "end": 22287.44,
    "text": "to view it. And so in your API, you're going to have to set up a route so that people can retrieve",
    "textdich": ""
  },
  {
    "start": 22287.44,
    "end": 22291.44,
    "text": "someone's profile information. And so that's why I want to set up this route. I haven't really",
    "textdich": ""
  },
  {
    "start": 22291.44,
    "end": 22295.36,
    "text": "decided what we're going to ultimately do with it. But for now, I just want to set it up so that you",
    "textdich": ""
  },
  {
    "start": 22295.36,
    "end": 22300.56,
    "text": "can retrieve information about a specific user based off of their ID. Let's go to the bottom",
    "textdich": ""
  },
  {
    "start": 22300.56,
    "end": 22313.52,
    "text": "of our code here. And we'll create a new path operation. And I'll call this get user. And",
    "textdich": ""
  },
  {
    "start": 22313.52,
    "end": 22317.6,
    "text": "before we do that, I'm also going to set up the decorator. So this is going to be a get operation",
    "textdich": ""
  },
  {
    "start": 22317.6,
    "end": 22323.28,
    "text": "because we're going to retrieve the information about a specific user. And the specific path is",
    "textdich": ""
  },
  {
    "start": 22323.28,
    "end": 22329.04,
    "text": "going to be slash users, and then slash ID. So kind of like how we did when it comes to retrieving",
    "textdich": ""
  },
  {
    "start": 22329.04,
    "end": 22333.84,
    "text": "a specific post, we're going to pass in the ID in the URL. And then we have to extract the ID.",
    "textdich": ""
  },
  {
    "start": 22335.68,
    "end": 22340.08,
    "text": "And I'm going to make sure that we validate it as an integer. And the next thing that we have to",
    "textdich": ""
  },
  {
    "start": 22340.08,
    "end": 22344.4,
    "text": "do is since we're going to be interacting with the database, we need our DB right here. So we'll",
    "textdich": ""
  },
  {
    "start": 22344.4,
    "end": 22351.44,
    "text": "copy that. And then in our actual function, we're going to do a quick query. So we'll do DB dot",
    "textdich": ""
  },
  {
    "start": 22351.44,
    "end": 22359.84,
    "text": "query. And then we'll grab models dot user. And I'll say I want to filter and then look for",
    "textdich": ""
  },
  {
    "start": 22359.84,
    "end": 22365.68,
    "text": "something with models dot user dot ID equals equals, and then it's going to match up with the",
    "textdich": ""
  },
  {
    "start": 22365.68,
    "end": 22373.28,
    "text": "ID that they requested. And because there should only be one user with a specific ID, we're going",
    "textdich": ""
  },
  {
    "start": 22373.28,
    "end": 22376.96,
    "text": "to just grab the first one so we don't spend extra resources looking through the rest of our database.",
    "textdich": ""
  },
  {
    "start": 22376.96,
    "end": 22385.28,
    "text": "And we're going to store this in a variable called user. All right, and then just like we did for",
    "textdich": ""
  },
  {
    "start": 22385.28,
    "end": 22393.36,
    "text": "fetching a specific post, if a user was not found, so if not user, we'll say we want to raise an HTTP",
    "textdich": ""
  },
  {
    "start": 22393.36,
    "end": 22405.92,
    "text": "exception. And we'll say the status code equals 404 whoops, HTTP status dot and then we'll grab",
    "textdich": ""
  },
  {
    "start": 22405.92,
    "end": 22424.08,
    "text": "404. And the detail is going to be user with ID, and we'll pass in the ID does not exist. But if",
    "textdich": ""
  },
  {
    "start": 22424.08,
    "end": 22432.0,
    "text": "the user is properly found, we will return the user. And it looks like there's some kind of weird",
    "textdich": ""
  },
  {
    "start": 22432.0,
    "end": 22439.28,
    "text": "issue with my formatting. So all right, there we go. And so let's just quickly test this out. So",
    "textdich": ""
  },
  {
    "start": 22439.28,
    "end": 22442.64,
    "text": "once again, I'm going to create a new request. And we're going to make sure to save this one.",
    "textdich": ""
  },
  {
    "start": 22443.28,
    "end": 22452.48,
    "text": "And I'm going to call this get user copy this URL, it's going to be the same,",
    "textdich": ""
  },
  {
    "start": 22452.48,
    "end": 22456.16,
    "text": "same route is going to be a get operation. And then we want to send a specific ID. So",
    "textdich": ""
  },
  {
    "start": 22456.16,
    "end": 22462.64,
    "text": "I take a look at your database, and then see if you can grab an ID that does exist. So let's just",
    "textdich": ""
  },
  {
    "start": 22462.64,
    "end": 22470.08,
    "text": "say one, I'll hit send. And it looks like there's some kind of issue because I'm not getting a",
    "textdich": ""
  },
  {
    "start": 22470.08,
    "end": 22482.72,
    "text": "response yet. Let me cancel out of that. And let's see what we did wrong. And I realized I forgot to",
    "textdich": ""
  },
  {
    "start": 22482.72,
    "end": 22492.08,
    "text": "do app dot get. Great, so we actually got the user everything seems to be working. However,",
    "textdich": ""
  },
  {
    "start": 22492.08,
    "end": 22498.96,
    "text": "there's one little issue. First of all, we should not be getting the password, right? We never want",
    "textdich": ""
  },
  {
    "start": 22498.96,
    "end": 22503.28,
    "text": "to return the password to the user, the user already knows his password. And also if you want",
    "textdich": ""
  },
  {
    "start": 22503.28,
    "end": 22507.92,
    "text": "to if this route is so that you can retrieve a user's profile, kind of like you can on Twitter,",
    "textdich": ""
  },
  {
    "start": 22507.92,
    "end": 22511.76,
    "text": "Instagram, then we're sharing someone else's password. And that's a little bit of an issue.",
    "textdich": ""
  },
  {
    "start": 22511.76,
    "end": 22517.76,
    "text": "And the reason why this isn't a hash password was because I didn't clear out my database before we",
    "textdich": ""
  },
  {
    "start": 22517.76,
    "end": 22522.72,
    "text": "implemented the the hashing of the password. So that's why it's in clear text. But whether it's",
    "textdich": ""
  },
  {
    "start": 22522.72,
    "end": 22526.8,
    "text": "hashed or not, you never want to send this out, right? You don't want anyone else to see your",
    "textdich": ""
  },
  {
    "start": 22526.8,
    "end": 22529.84,
    "text": "password, you don't even want the user to see their own password, because someone else could",
    "textdich": ""
  },
  {
    "start": 22529.84,
    "end": 22534.4,
    "text": "intercept it and potentially do malicious activity with that information. So what we're going to do",
    "textdich": ""
  },
  {
    "start": 22534.4,
    "end": 22539.84,
    "text": "is we're going to filter out that specific field, just the password field, I want them to be able",
    "textdich": ""
  },
  {
    "start": 22539.84,
    "end": 22544.88,
    "text": "to get the ID, the created that field and the email and any other fields outside of the password.",
    "textdich": ""
  },
  {
    "start": 22546.64,
    "end": 22551.84,
    "text": "And fortunately for us, if we go to our schemas, we've actually already defined a",
    "textdich": ""
  },
  {
    "start": 22553.6,
    "end": 22559.2,
    "text": "a schema for the user out. So this is going to be any information about the specific user,",
    "textdich": ""
  },
  {
    "start": 22559.2,
    "end": 22565.52,
    "text": "except we're extracting out the specific password. And so we can just set the response model to be",
    "textdich": ""
  },
  {
    "start": 22565.52,
    "end": 22574.4,
    "text": "user out. And we'll go back to main.py and we'll say response dot model. Sorry, response underscore",
    "textdich": ""
  },
  {
    "start": 22574.4,
    "end": 22585.04,
    "text": "model equals schemas dot user out. Alright, we'll save this and we'll try this again. So we'll",
    "textdich": ""
  },
  {
    "start": 22585.04,
    "end": 22596.56,
    "text": "retrieve this user. And we still got the password. So what happened here? And this could just be an",
    "textdich": ""
  },
  {
    "start": 22596.56,
    "end": 22605.68,
    "text": "issue of me not saving. So let's try this again. Still a little bit of an issue. And let's just",
    "textdich": ""
  },
  {
    "start": 22605.68,
    "end": 22613.76,
    "text": "make sure I imported schemas. I did. And let's go to our schemas. And I've set just these fields. So",
    "textdich": ""
  },
  {
    "start": 22613.76,
    "end": 22619.84,
    "text": "this should be good to go. I'm not sure why it's giving us errors. And I made a stupid mistake,",
    "textdich": ""
  },
  {
    "start": 22619.84,
    "end": 22626.16,
    "text": "this should not be within the function parameters, this should actually go inside the decorator.",
    "textdich": ""
  },
  {
    "start": 22626.16,
    "end": 22629.36,
    "text": "So it wasn't actually doing anything. And now if we try this,",
    "textdich": ""
  },
  {
    "start": 22630.72,
    "end": 22635.84,
    "text": "we can see that the password field has been successfully removed. Now that we've added a",
    "textdich": ""
  },
  {
    "start": 22635.84,
    "end": 22640.88,
    "text": "couple of path operations for users, if you take a look at our main.py file, it's starting to look",
    "textdich": ""
  },
  {
    "start": 22640.88,
    "end": 22646.56,
    "text": "a little cluttered. And you'll see that we've got all of our path operations for, you know, handling",
    "textdich": ""
  },
  {
    "start": 22646.56,
    "end": 22652.16,
    "text": "crud operations for posts. And then you'll see that we also have all of our path operations for",
    "textdich": ""
  },
  {
    "start": 22652.16,
    "end": 22657.6,
    "text": "working with users. So that's creating users, as well as retrieving a user by ID. And, you know,",
    "textdich": ""
  },
  {
    "start": 22657.6,
    "end": 22662.16,
    "text": "as I said, this is a little messy. And as we keep adding more and more path operations, it just seems",
    "textdich": ""
  },
  {
    "start": 22662.16,
    "end": 22667.6,
    "text": "almost unmanageable to keep everything in a main.py file. And instead, what I want to do is I want to",
    "textdich": ""
  },
  {
    "start": 22667.6,
    "end": 22672.88,
    "text": "break it out. And I want to create two separate files. And one file is going to be for all of the",
    "textdich": ""
  },
  {
    "start": 22672.88,
    "end": 22679.36,
    "text": "routes or path operations that work and deal with posts. And then I want a separate file that will",
    "textdich": ""
  },
  {
    "start": 22679.36,
    "end": 22685.04,
    "text": "handle all of the path operations for working with users. And, you know, it's not quite as simple as",
    "textdich": ""
  },
  {
    "start": 22685.04,
    "end": 22689.52,
    "text": "just, you know, moving these path operators into different files, we do have to learn about",
    "textdich": ""
  },
  {
    "start": 22689.52,
    "end": 22694.64,
    "text": "something specific to fast API. And this is nothing unique about fast API, you'll see that",
    "textdich": ""
  },
  {
    "start": 22694.64,
    "end": 22700.16,
    "text": "every single web framework is going to have a way to kind of accomplish this. And it usually",
    "textdich": ""
  },
  {
    "start": 22700.16,
    "end": 22704.64,
    "text": "involves something called routers. So we'll take a look at routers in this section and how we can",
    "textdich": ""
  },
  {
    "start": 22704.64,
    "end": 22709.2,
    "text": "use them to actually split up all of our path operations so that we can organize our code a",
    "textdich": ""
  },
  {
    "start": 22709.2,
    "end": 22714.8,
    "text": "little bit better. And so what we're going to do is we're going to create a new folder. And I'm",
    "textdich": ""
  },
  {
    "start": 22714.8,
    "end": 22719.76,
    "text": "going to call this routers. And then within here, I'm going to create two files, I'm going to create",
    "textdich": ""
  },
  {
    "start": 22719.76,
    "end": 22726.32,
    "text": "one called post p y. And I'm going to create one that's called user dot p y. So all of our path",
    "textdich": ""
  },
  {
    "start": 22726.32,
    "end": 22730.56,
    "text": "operations, dealing with users is going to be put into this file. And all of our path operations",
    "textdich": ""
  },
  {
    "start": 22730.56,
    "end": 22738.16,
    "text": "dealing with posts is going to be put into this file. And what I'm going to do is we're going to",
    "textdich": ""
  },
  {
    "start": 22738.16,
    "end": 22745.2,
    "text": "go to remain dot p y file. And I'm actually just going to copy all of my specific routes that deal",
    "textdich": ""
  },
  {
    "start": 22745.2,
    "end": 22754.32,
    "text": "with posts first. We're just going to keep going up and I went too far up. Oh, this thing moves",
    "textdich": ""
  },
  {
    "start": 22754.32,
    "end": 22763.76,
    "text": "quickly. Here we go. This is going to grab all of our posts. And we're just cut that out. And we're",
    "textdich": ""
  },
  {
    "start": 22763.76,
    "end": 22768.32,
    "text": "just paste it in here. And there should be plenty of warnings and errors within VS code. That's to",
    "textdich": ""
  },
  {
    "start": 22768.32,
    "end": 22772.08,
    "text": "be expected. Don't worry about that. We'll fix that in a bit. I'm gonna do the same thing for",
    "textdich": ""
  },
  {
    "start": 22772.08,
    "end": 22776.4,
    "text": "the users. So let's go to our main dot p y file, and just grab the last two path operations that",
    "textdich": ""
  },
  {
    "start": 22776.4,
    "end": 22785.04,
    "text": "we have for users. And then paste it into this specific file. Right, so we've got a bunch of",
    "textdich": ""
  },
  {
    "start": 22785.04,
    "end": 22791.04,
    "text": "errors. And let's go ahead and actually fix those first before we actually start working with routers.",
    "textdich": ""
  },
  {
    "start": 22791.68,
    "end": 22796.24,
    "text": "And so now that all of the the path operations are within these files, we're going to have to import,",
    "textdich": ""
  },
  {
    "start": 22796.96,
    "end": 22801.52,
    "text": "you know, things like app, we're going to have to import, well, we'll come back to that, actually,",
    "textdich": ""
  },
  {
    "start": 22801.52,
    "end": 22805.44,
    "text": "we'll have to import status, we'll have to import our schemas, we'll have to import the session",
    "textdich": ""
  },
  {
    "start": 22805.44,
    "end": 22810.16,
    "text": "object, we'll have to import all of our database related things, our utils. So all of these things",
    "textdich": ""
  },
  {
    "start": 22810.16,
    "end": 22815.12,
    "text": "that we see little squiggly lines, we have to import them, because we had already imported all",
    "textdich": ""
  },
  {
    "start": 22815.12,
    "end": 22820.8,
    "text": "of these in the main dot p y file. And so we'll start off by importing the models, the schemas,",
    "textdich": ""
  },
  {
    "start": 22821.52,
    "end": 22826.0,
    "text": "and the utils folder, if we need it for one of the specific files, you'll see that we only need",
    "textdich": ""
  },
  {
    "start": 22826.0,
    "end": 22832.88,
    "text": "this for the user file. And so the way we did it in our main dot p y file is we say from and then",
    "textdich": ""
  },
  {
    "start": 22832.88,
    "end": 22837.92,
    "text": "this dot means current directory. So we say hey, from this current directory we're in, which is if",
    "textdich": ""
  },
  {
    "start": 22837.92,
    "end": 22843.04,
    "text": "I kind of close out, you can see that everything is in the app file app folder, sorry, we're saying",
    "textdich": ""
  },
  {
    "start": 22843.04,
    "end": 22849.76,
    "text": "from the current app directory, I want to import models, which is right here. And I want to import",
    "textdich": ""
  },
  {
    "start": 22849.76,
    "end": 22856.32,
    "text": "schemas and utils. However, in our user dot p y file in our post up p y file, the model schemas",
    "textdich": ""
  },
  {
    "start": 22856.32,
    "end": 22860.24,
    "text": "and utils folder is not in the same directory, because we actually have to go up a directory",
    "textdich": ""
  },
  {
    "start": 22860.24,
    "end": 22865.36,
    "text": "to the app folder to access them. So instead of doing one dot, if you want to go up a directory,",
    "textdich": ""
  },
  {
    "start": 22865.36,
    "end": 22870.16,
    "text": "you do two dots. So that's all we have to change. So in our user dot p y file, we'll say from",
    "textdich": ""
  },
  {
    "start": 22870.16,
    "end": 22881.6,
    "text": "dot dot import, and we'll say models, schemas, and utils. And so right there, we cleaned up some",
    "textdich": ""
  },
  {
    "start": 22881.6,
    "end": 22887.36,
    "text": "of our errors that we're getting. And let's see, we also have to import status from the fast API",
    "textdich": ""
  },
  {
    "start": 22887.36,
    "end": 22896.48,
    "text": "library. So what we can do is we'll just go up here. And I'm just going to copy this. And right",
    "textdich": ""
  },
  {
    "start": 22896.48,
    "end": 22901.28,
    "text": "above this line, we're just going to paste that in there. And the last thing that we need to import",
    "textdich": ""
  },
  {
    "start": 22901.28,
    "end": 22907.04,
    "text": "is from the database, we are from the database dot p y file, we're gonna have to import get DB,",
    "textdich": ""
  },
  {
    "start": 22907.04,
    "end": 22911.84,
    "text": "and then from SQL, alchemy, we have to import session. So if we go to our main dot p y file,",
    "textdich": ""
  },
  {
    "start": 22911.84,
    "end": 22919.28,
    "text": "again, the SQL alchemy code right here, we can just copy that. And I'm going to import that as well.",
    "textdich": ""
  },
  {
    "start": 22921.28,
    "end": 22924.88,
    "text": "That's done. And then finally, we have to get DB. And if we take a look at our main dot p y file,",
    "textdich": ""
  },
  {
    "start": 22924.88,
    "end": 22930.24,
    "text": "the way we got that is we're saying, from the current database file, we want to import engine",
    "textdich": ""
  },
  {
    "start": 22930.24,
    "end": 22934.8,
    "text": "and get DB. And keep in mind that the database file is not in the routers directory, it's in",
    "textdich": ""
  },
  {
    "start": 22934.8,
    "end": 22939.6,
    "text": "the app directory. So we have to go up a directory to access this file. So we just put two dots pretty",
    "textdich": ""
  },
  {
    "start": 22939.6,
    "end": 22951.68,
    "text": "simple. So from dot dot database, import, get DB. And we actually don't need to import engine,",
    "textdich": ""
  },
  {
    "start": 22951.68,
    "end": 22956.96,
    "text": "we're going to leave that here in our main dot p y file. Alright, so now that we got all of that,",
    "textdich": ""
  },
  {
    "start": 22956.96,
    "end": 22962.72,
    "text": "the last error that we see is that we don't have access to the app object. And so your instinct is",
    "textdich": ""
  },
  {
    "start": 22962.72,
    "end": 22968.0,
    "text": "to go to our main dot p y file and then import this. And that's not exactly correct. Instead,",
    "textdich": ""
  },
  {
    "start": 22968.0,
    "end": 22972.08,
    "text": "what we're going to do is we're going to make use of the routers that I mentioned. And so from the",
    "textdich": ""
  },
  {
    "start": 22972.08,
    "end": 22976.88,
    "text": "fast API library, we're going to import something called API, first three letters, actually, the",
    "textdich": ""
  },
  {
    "start": 22976.88,
    "end": 22982.88,
    "text": "first four letters API router. And then from here, we're going to make use of the API router object.",
    "textdich": ""
  },
  {
    "start": 22982.88,
    "end": 22991.44,
    "text": "So we'll say router equals API router. So we're basically creating a router object. And then what",
    "textdich": ""
  },
  {
    "start": 22991.44,
    "end": 22995.52,
    "text": "we can do is we can replace the keyword app, because we don't have access to that in this file.",
    "textdich": ""
  },
  {
    "start": 22995.52,
    "end": 22999.6,
    "text": "And we just use the word router. And you'll understand why we do this in a bit.",
    "textdich": ""
  },
  {
    "start": 22999.6,
    "end": 23007.12,
    "text": "So we've got those updated. And then we're gonna do the same exact thing for our post API. So we",
    "textdich": ""
  },
  {
    "start": 23007.12,
    "end": 23011.76,
    "text": "have to get all of these imports, I'm actually going to copy most of these, because most of them",
    "textdich": ""
  },
  {
    "start": 23011.76,
    "end": 23018.64,
    "text": "are going to apply here as well. The only thing we don't need utils, for sure. So we'll remove that.",
    "textdich": ""
  },
  {
    "start": 23019.28,
    "end": 23022.96,
    "text": "And then you'll see that list is still getting aired out. And that's because if we go to our",
    "textdich": ""
  },
  {
    "start": 23022.96,
    "end": 23030.88,
    "text": "main.py file, that's coming from this typing import. So I'm just going to copy that and paste",
    "textdich": ""
  },
  {
    "start": 23030.88,
    "end": 23035.52,
    "text": "that in there. And it looks like we don't need optional because it's kind of grayish. And so",
    "textdich": ""
  },
  {
    "start": 23035.52,
    "end": 23038.8,
    "text": "that's just a VS code telling us that we're not using it in this file. And I think that should",
    "textdich": ""
  },
  {
    "start": 23038.8,
    "end": 23045.76,
    "text": "clear up all the errors except for once again, the app object. And so we'll do the same thing,",
    "textdich": ""
  },
  {
    "start": 23045.76,
    "end": 23054.96,
    "text": "we'll say a router equals API router. And then what we're going to do is replace the word app",
    "textdich": ""
  },
  {
    "start": 23054.96,
    "end": 23069.76,
    "text": "with the word router. All right, and then finally, we have to go to our main.py file,",
    "textdich": ""
  },
  {
    "start": 23069.76,
    "end": 23073.36,
    "text": "and actually make use of these routers. Because you'll see that in our main.py file,",
    "textdich": ""
  },
  {
    "start": 23073.36,
    "end": 23077.92,
    "text": "there's no reference to anything in here. So our API won't work if we try to run it now.",
    "textdich": ""
  },
  {
    "start": 23078.48,
    "end": 23083.84,
    "text": "So in our main.py file, what I'm going to do is I'm going to say from dot routers.",
    "textdich": ""
  },
  {
    "start": 23085.36,
    "end": 23092.96,
    "text": "So from this folder, we're going to import post and user. And this should be plural routers.",
    "textdich": ""
  },
  {
    "start": 23094.16,
    "end": 23097.6,
    "text": "And then I'm going to show you some magic that we're going to do. And so above this route,",
    "textdich": ""
  },
  {
    "start": 23097.6,
    "end": 23105.92,
    "text": "we're going to say we're going to grab the app object, right, this is once again, our fast API",
    "textdich": ""
  },
  {
    "start": 23105.92,
    "end": 23113.76,
    "text": "object that we kind of do everything with, I'm going to say, include router. And then we'll grab",
    "textdich": ""
  },
  {
    "start": 23113.76,
    "end": 23119.52,
    "text": "the post dot router, right, that's what we just imported, we imported post, which is coming from",
    "textdich": ""
  },
  {
    "start": 23119.52,
    "end": 23125.28,
    "text": "here. And we're importing this router object. And so what we've basically done here is, I have",
    "textdich": ""
  },
  {
    "start": 23125.28,
    "end": 23130.72,
    "text": "basically said as we, you know, when we get a path, when we get a HTTP request, you know, before we",
    "textdich": ""
  },
  {
    "start": 23130.72,
    "end": 23135.12,
    "text": "had all of our path operations in here, instead, what's going to happen is, you know, we go down",
    "textdich": ""
  },
  {
    "start": 23135.12,
    "end": 23140.88,
    "text": "the list like we normally do. And so as we go down our list, this is our first app object that we",
    "textdich": ""
  },
  {
    "start": 23140.88,
    "end": 23145.84,
    "text": "kind of reference. And in here, it just says, I want you to include everything, I want you to",
    "textdich": ""
  },
  {
    "start": 23145.84,
    "end": 23150.72,
    "text": "include our post dot router. And so the request will then go into here. And it's going to take a",
    "textdich": ""
  },
  {
    "start": 23150.72,
    "end": 23154.72,
    "text": "look at all of these routes. And it's going to see if it's a match. And if it finds a match,",
    "textdich": ""
  },
  {
    "start": 23154.72,
    "end": 23158.64,
    "text": "it's going to respond like it normally does. So that's kind of how we break out our code",
    "textdich": ""
  },
  {
    "start": 23158.64,
    "end": 23164.08,
    "text": "into separate files, we use these router objects. And we can do the same thing with the user.py.",
    "textdich": ""
  },
  {
    "start": 23164.08,
    "end": 23167.36,
    "text": "So we're going to go to main. And then here, I'm going to type out the same thing, I'm going to say",
    "textdich": ""
  },
  {
    "start": 23167.36,
    "end": 23173.04,
    "text": "app dot include router. And this time we use, we grab the user, and then we do router again.",
    "textdich": ""
  },
  {
    "start": 23173.76,
    "end": 23177.84,
    "text": "And so once again, all we're doing is we're just grabbing the router object from the user file.",
    "textdich": ""
  },
  {
    "start": 23177.84,
    "end": 23181.44,
    "text": "And that's essentially going to import all of the specific routes.",
    "textdich": ""
  },
  {
    "start": 23181.44,
    "end": 23187.12,
    "text": "And so if we save our code, and then we just quickly take a look at the terminal,",
    "textdich": ""
  },
  {
    "start": 23187.12,
    "end": 23190.88,
    "text": "just to make sure there's no errors, it looks like everything's working. Let's test this out now.",
    "textdich": ""
  },
  {
    "start": 23190.88,
    "end": 23196.24,
    "text": "So I'm going to get all posts. Let's see if this works. It looks like it works great. Let's create",
    "textdich": ""
  },
  {
    "start": 23196.24,
    "end": 23203.04,
    "text": "a new post. Looks like it works. Get one post. Well, it looks like that post doesn't exist anymore.",
    "textdich": ""
  },
  {
    "start": 23203.04,
    "end": 23211.44,
    "text": "But if I try one, looks like it works. I will delete post with the ID of three. Great. We'll update",
    "textdich": ""
  },
  {
    "start": 23211.44,
    "end": 23219.76,
    "text": "post, create user, just put in a new unique email, and then get user. So grab that user. And we can",
    "textdich": ""
  },
  {
    "start": 23219.76,
    "end": 23226.0,
    "text": "see that every single route works perfectly. So we didn't change the functionality of our project at",
    "textdich": ""
  },
  {
    "start": 23226.0,
    "end": 23232.56,
    "text": "all in this video. Instead, all we did was we used a a router object to be able to spit split up all",
    "textdich": ""
  },
  {
    "start": 23232.56,
    "end": 23237.92,
    "text": "of our routes or path operations into different files. And then we import them just by calling",
    "textdich": ""
  },
  {
    "start": 23237.92,
    "end": 23242.32,
    "text": "app dot include router and then the specific router object of that file. And you'll see that",
    "textdich": ""
  },
  {
    "start": 23242.32,
    "end": 23247.76,
    "text": "our code looks so much cleaner now. And as our app and our API continues to grow, we can just",
    "textdich": ""
  },
  {
    "start": 23247.76,
    "end": 23253.76,
    "text": "add new files into the routers folder so that we don't continue to clutter up our main.py file.",
    "textdich": ""
  },
  {
    "start": 23254.72,
    "end": 23261.2,
    "text": "In our two router files, you'll see that we use the same URL for almost all of our specific",
    "textdich": ""
  },
  {
    "start": 23261.2,
    "end": 23266.88,
    "text": "paths. And so you'll see for the get route, we'll use slash posts for the post, we use slash posts",
    "textdich": ""
  },
  {
    "start": 23267.68,
    "end": 23271.92,
    "text": "from the get specific posts, we do slash posts, and then the ID and then the same thing goes for",
    "textdich": ""
  },
  {
    "start": 23271.92,
    "end": 23279.12,
    "text": "delete and input as well. And I think it's kind of annoying having to continuously copy and paste",
    "textdich": ""
  },
  {
    "start": 23279.12,
    "end": 23284.16,
    "text": "the same exact path when it's pretty much just a copy from each one. So is there a way we can kind",
    "textdich": ""
  },
  {
    "start": 23284.16,
    "end": 23289.36,
    "text": "of remove this unnecessaryness? It doesn't seem like that big of an issue. But keep in mind that",
    "textdich": ""
  },
  {
    "start": 23289.36,
    "end": 23295.36,
    "text": "our API is very simple, right? Other API's could have very long, complex, you know,",
    "textdich": ""
  },
  {
    "start": 23296.96,
    "end": 23300.48,
    "text": "routes that, you know, may not look as simple as ours, so they could have, you know, multiple",
    "textdich": ""
  },
  {
    "start": 23300.48,
    "end": 23304.16,
    "text": "things, right? So it could look something like that. And then having to kind of copy and paste",
    "textdich": ""
  },
  {
    "start": 23304.16,
    "end": 23309.68,
    "text": "all of that every on every single route can seem a little unnecessary. And so anytime you're working",
    "textdich": ""
  },
  {
    "start": 23309.68,
    "end": 23316.64,
    "text": "with routers, what we can actually do is we can pass in a parameter into the API router function",
    "textdich": ""
  },
  {
    "start": 23316.64,
    "end": 23322.08,
    "text": "or method. And so what we can say was prefix. And we're going to say that since every single",
    "textdich": ""
  },
  {
    "start": 23322.64,
    "end": 23329.04,
    "text": "route in this file always starts with slash posts, we can say prefix equals slash posts.",
    "textdich": ""
  },
  {
    "start": 23330.16,
    "end": 23333.52,
    "text": "And so now anytime you see a slash post, we can just remove that",
    "textdich": ""
  },
  {
    "start": 23335.92,
    "end": 23338.96,
    "text": "and just put in a slash, this just going to be a slash.",
    "textdich": ""
  },
  {
    "start": 23342.08,
    "end": 23346.24,
    "text": "And then when it gets to slash post slash ID, this is where it gets a little tricky. But once again,",
    "textdich": ""
  },
  {
    "start": 23346.24,
    "end": 23352.08,
    "text": "we just remove everything but a slash. And so what this is saying is that we're going to take slash",
    "textdich": ""
  },
  {
    "start": 23352.08,
    "end": 23359.76,
    "text": "posts. And then we're going to append it with ID, right? Because that's, that's what this is saying,",
    "textdich": ""
  },
  {
    "start": 23359.76,
    "end": 23364.4,
    "text": "we're saying slash ID. So it's actually appending it with slash ID. So the final thing actually",
    "textdich": ""
  },
  {
    "start": 23364.4,
    "end": 23370.72,
    "text": "looks like, it's going to look like slash posts as ID. So nothing actually changes. It's just a",
    "textdich": ""
  },
  {
    "start": 23370.72,
    "end": 23375.84,
    "text": "simpler way to do things so that we don't have to write slash posts everywhere. And so we can,",
    "textdich": ""
  },
  {
    "start": 23375.84,
    "end": 23381.04,
    "text": "we can remove this and just do slash ID. And we can just do slash ID here as well.",
    "textdich": ""
  },
  {
    "start": 23382.16,
    "end": 23385.76,
    "text": "And we're going to do the same thing in the user's file as well, because both of them start with",
    "textdich": ""
  },
  {
    "start": 23385.76,
    "end": 23391.04,
    "text": "slash users. And so we're going to put in a prefix here. And we're going to say slash",
    "textdich": ""
  },
  {
    "start": 23392.48,
    "end": 23399.92,
    "text": "users. But this can just be removed to slash. And this can be removed to just slash ID. All right.",
    "textdich": ""
  },
  {
    "start": 23399.92,
    "end": 23402.88,
    "text": "And once again, we're going to test this out, we're just going to test a couple of routes.",
    "textdich": ""
  },
  {
    "start": 23402.88,
    "end": 23409.68,
    "text": "So if get routes, get posts work. And if create, I will try to get one post. That works perfectly.",
    "textdich": ""
  },
  {
    "start": 23409.68,
    "end": 23414.16,
    "text": "And then let's try creating a new user, we have to give it another unique email. Looks like it",
    "textdich": ""
  },
  {
    "start": 23414.16,
    "end": 23419.2,
    "text": "works. And then finally, get user, we're going to try this again. And it looks like it all works.",
    "textdich": ""
  },
  {
    "start": 23419.2,
    "end": 23423.92,
    "text": "So you know, this is a completely optional step, it doesn't change the functionality of things.",
    "textdich": ""
  },
  {
    "start": 23423.92,
    "end": 23428.32,
    "text": "But I think it does make it a little bit easier to read. Because we've put the prefix up here so",
    "textdich": ""
  },
  {
    "start": 23428.32,
    "end": 23434.24,
    "text": "that we don't have to keep copying and pasting. Now, as I mentioned, one of my favorite features",
    "textdich": ""
  },
  {
    "start": 23434.24,
    "end": 23439.84,
    "text": "of fast API is the automatic documentation that comes from swagger UI. And so if you actually",
    "textdich": ""
  },
  {
    "start": 23439.84,
    "end": 23443.68,
    "text": "navigate to the URL, but just go to slash docs, like I have, that's where you're going to see the",
    "textdich": ""
  },
  {
    "start": 23443.68,
    "end": 23447.92,
    "text": "documentation. And like I said, this is interactive documentation. So you can actually make requests",
    "textdich": ""
  },
  {
    "start": 23447.92,
    "end": 23452.0,
    "text": "from here. So you didn't technically have to use postman for a lot of things, you can just test it",
    "textdich": ""
  },
  {
    "start": 23452.0,
    "end": 23456.8,
    "text": "out right here. And it's going to do the same thing. However, I did also want to teach postman.",
    "textdich": ""
  },
  {
    "start": 23456.8,
    "end": 23461.84,
    "text": "But the reason I bring this up again is that you'll notice how we've got a couple of routes",
    "textdich": ""
  },
  {
    "start": 23461.84,
    "end": 23465.2,
    "text": "for dealing with posts. And then we've got a couple of routes for dealing with users. And then",
    "textdich": ""
  },
  {
    "start": 23465.2,
    "end": 23469.6,
    "text": "we've got this random test one that we created when we were first learning about path operations.",
    "textdich": ""
  },
  {
    "start": 23469.6,
    "end": 23473.36,
    "text": "And what I would like to do is I would like to structure this documentation so that",
    "textdich": ""
  },
  {
    "start": 23473.92,
    "end": 23478.32,
    "text": "instead of kind of grouping them all together, we can kind of group them based off of the their",
    "textdich": ""
  },
  {
    "start": 23478.32,
    "end": 23483.44,
    "text": "responsibility. So I would like to create a group that handles all of the post operations. So all of",
    "textdich": ""
  },
  {
    "start": 23483.44,
    "end": 23487.6,
    "text": "these five right here, and then I would like a separate group that handles all of the user based",
    "textdich": ""
  },
  {
    "start": 23487.6,
    "end": 23492.24,
    "text": "operations, so that it's a little bit easier for your clients and your users to understand what",
    "textdich": ""
  },
  {
    "start": 23492.24,
    "end": 23497.84,
    "text": "each one does by grouping them accordingly, based off of their specific action. And so I want to",
    "textdich": ""
  },
  {
    "start": 23497.84,
    "end": 23502.24,
    "text": "have a group that actually is titled posts, any group that's titled users, so that when they see",
    "textdich": ""
  },
  {
    "start": 23502.24,
    "end": 23505.68,
    "text": "that they say, Oh, the user section is going to be dealing with users in the post section is going",
    "textdich": ""
  },
  {
    "start": 23505.68,
    "end": 23511.68,
    "text": "to be dealing with posts. And getting this fixed or update in our code is super simple with fast",
    "textdich": ""
  },
  {
    "start": 23511.68,
    "end": 23520.72,
    "text": "API. So let's go to our fast API, go to our routers. And if we go to the post.py, to add a specific",
    "textdich": ""
  },
  {
    "start": 23520.72,
    "end": 23528.4,
    "text": "group name, what we call, it's actually called a tag. So we say tags equals, we just say posts.",
    "textdich": ""
  },
  {
    "start": 23528.4,
    "end": 23542.8,
    "text": "And I've got that comma right there. And we do the same thing for users. So we'll say tags equals users.",
    "textdich": ""
  },
  {
    "start": 23544.24,
    "end": 23546.96,
    "text": "And you see, you could see that this is a list so you can pass more than one.",
    "textdich": ""
  },
  {
    "start": 23547.76,
    "end": 23550.96,
    "text": "But we'll save that. And then I'm going to refresh this page.",
    "textdich": ""
  },
  {
    "start": 23550.96,
    "end": 23561.04,
    "text": "And so now you can see that we now have these little titles so that we can now group our specific",
    "textdich": ""
  },
  {
    "start": 23561.04,
    "end": 23567.6,
    "text": "requests into categories. And so the readability of our documentation has improved tremendously",
    "textdich": ""
  },
  {
    "start": 23567.6,
    "end": 23572.88,
    "text": "with essentially one line of code. In this section, we're going to start tackling one of the most",
    "textdich": ""
  },
  {
    "start": 23572.88,
    "end": 23577.2,
    "text": "important topics when it comes to building out an API or really any application, and that is",
    "textdich": ""
  },
  {
    "start": 23577.2,
    "end": 23581.6,
    "text": "authentication. Now when you're working with authentication on an API, or any application,",
    "textdich": ""
  },
  {
    "start": 23581.6,
    "end": 23587.04,
    "text": "there's really two main ways to tackle authentication. There's the session based authentication. And the",
    "textdich": ""
  },
  {
    "start": 23587.04,
    "end": 23592.48,
    "text": "idea behind a session is that we store something on our back end server or API in this case,",
    "textdich": ""
  },
  {
    "start": 23592.48,
    "end": 23597.04,
    "text": "to track whether a user is logged in. So there's some piece of information, whether we store it in",
    "textdich": ""
  },
  {
    "start": 23597.04,
    "end": 23601.44,
    "text": "the database, whether we store it in memory, that's going to keep track of if the user has logged in",
    "textdich": ""
  },
  {
    "start": 23601.44,
    "end": 23606.96,
    "text": "and when the user logs out. So that's one way of doing things. The other way of doing things",
    "textdich": ""
  },
  {
    "start": 23606.96,
    "end": 23614.0,
    "text": "is doing is using JWT token based authentication. And the idea behind JWT authentication is that",
    "textdich": ""
  },
  {
    "start": 23614.0,
    "end": 23618.48,
    "text": "it's stateless. And what I mean by that is that there's nothing on our back end, there's nothing",
    "textdich": ""
  },
  {
    "start": 23618.48,
    "end": 23623.44,
    "text": "on our API, there's nothing in our database that actually keeps track or stores some sort of",
    "textdich": ""
  },
  {
    "start": 23623.44,
    "end": 23627.84,
    "text": "information about whether a user is logged in or logged out. We and you're probably thinking, well,",
    "textdich": ""
  },
  {
    "start": 23627.84,
    "end": 23632.32,
    "text": "how do we know that they're logged in? Well, that's the power of JWT tokens is that the token",
    "textdich": ""
  },
  {
    "start": 23632.32,
    "end": 23637.12,
    "text": "itself, which we don't store in our database, and we don't store in our API, it's actually",
    "textdich": ""
  },
  {
    "start": 23637.12,
    "end": 23642.16,
    "text": "stored on the front end on our clients, actually keeps track of, you know, whether a user is logged",
    "textdich": ""
  },
  {
    "start": 23642.16,
    "end": 23647.68,
    "text": "in or not. And when I first started learning about JWT, it was a little bit of a complex",
    "textdich": ""
  },
  {
    "start": 23647.68,
    "end": 23651.44,
    "text": "topic, it seemed like there were so many pieces that were in play. But then when you when I",
    "textdich": ""
  },
  {
    "start": 23651.44,
    "end": 23655.76,
    "text": "actually stopped to really understand it, I realized it's one of the simplest solutions. So",
    "textdich": ""
  },
  {
    "start": 23655.76,
    "end": 23660.08,
    "text": "hopefully, I can make this as easy as possible for you guys. I hope this doesn't end up kind",
    "textdich": ""
  },
  {
    "start": 23660.08,
    "end": 23664.4,
    "text": "of confusing you like it confused me at first, it really is simple. And there's really only a",
    "textdich": ""
  },
  {
    "start": 23664.4,
    "end": 23669.84,
    "text": "couple of steps. But you got to really understand what a JWT token is and what we're doing on the",
    "textdich": ""
  },
  {
    "start": 23669.84,
    "end": 23673.92,
    "text": "front end and the back end to make it so that we can actually use it as an authentication solution.",
    "textdich": ""
  },
  {
    "start": 23675.6,
    "end": 23681.76,
    "text": "So let's take a look at the flow for how a user logs in, how a user is essentially authenticated,",
    "textdich": ""
  },
  {
    "start": 23681.76,
    "end": 23688.64,
    "text": "and then how a user accesses a specific path operation resource or endpoint by using the JWT",
    "textdich": ""
  },
  {
    "start": 23688.64,
    "end": 23692.4,
    "text": "token to ensure that the API knows that we're logged in so that we can actually provide him",
    "textdich": ""
  },
  {
    "start": 23692.4,
    "end": 23696.56,
    "text": "that important information. And so what's going to happen is the client or the front end,",
    "textdich": ""
  },
  {
    "start": 23696.56,
    "end": 23700.96,
    "text": "whoever it is, they're going to try and log in. So what we're going to do is we're ultimately",
    "textdich": ""
  },
  {
    "start": 23700.96,
    "end": 23706.4,
    "text": "going to create a path operation, call it slash login, and the client is going to pass the",
    "textdich": ""
  },
  {
    "start": 23706.4,
    "end": 23709.52,
    "text": "username, and they're going to pass in the password. So whatever their credentials are,",
    "textdich": ""
  },
  {
    "start": 23709.52,
    "end": 23712.96,
    "text": "so it doesn't technically have to be username and password, it can be email and password,",
    "textdich": ""
  },
  {
    "start": 23712.96,
    "end": 23716.8,
    "text": "it can be whatever information that you want. So technically, in our application,",
    "textdich": ""
  },
  {
    "start": 23716.8,
    "end": 23720.8,
    "text": "it's going to be email and password, because we don't have usernames, I guess,",
    "textdich": ""
  },
  {
    "start": 23721.44,
    "end": 23726.8,
    "text": "we mostly just have emails, but they provide their credentials. And so after we get their",
    "textdich": ""
  },
  {
    "start": 23726.8,
    "end": 23731.6,
    "text": "credentials, what we're going to do is, first of all, we're going to create well, first of all,",
    "textdich": ""
  },
  {
    "start": 23731.6,
    "end": 23735.28,
    "text": "we're going to verify if credentials are valid, right? So if the credentials are correct, if the",
    "textdich": ""
  },
  {
    "start": 23735.28,
    "end": 23740.64,
    "text": "password matches the if the username and password match with the account, we're going to create",
    "textdich": ""
  },
  {
    "start": 23740.64,
    "end": 23745.84,
    "text": "this JWT token. And we haven't talked about what the JWT token is. So don't worry too much about",
    "textdich": ""
  },
  {
    "start": 23745.84,
    "end": 23749.76,
    "text": "it. But I've created an example token right here. And so you're probably thinking it just looks like",
    "textdich": ""
  },
  {
    "start": 23749.76,
    "end": 23753.76,
    "text": "a bunch of gibberish. And for the most part, it is. So moving forward, I want you to think",
    "textdich": ""
  },
  {
    "start": 23753.76,
    "end": 23758.32,
    "text": "of this as nothing more than just a string, you know, just a regular string in Python,",
    "textdich": ""
  },
  {
    "start": 23758.32,
    "end": 23762.48,
    "text": "that's kind of fundamentally what it is. But there's a little bit more information embedded",
    "textdich": ""
  },
  {
    "start": 23762.48,
    "end": 23766.24,
    "text": "in it. But think of it as a string from the perspective of the client, the client doesn't",
    "textdich": ""
  },
  {
    "start": 23766.24,
    "end": 23771.76,
    "text": "know what the token is, and it never cares really the only the API cares, what's actually in the",
    "textdich": ""
  },
  {
    "start": 23771.76,
    "end": 23777.36,
    "text": "token and what it means. And so we'll send a response back with the token. And so now the",
    "textdich": ""
  },
  {
    "start": 23777.36,
    "end": 23783.84,
    "text": "client has the token. And so he can start accessing resources that require authentication. So anytime",
    "textdich": ""
  },
  {
    "start": 23783.84,
    "end": 23788.24,
    "text": "he wants to, you know, let's say our application requires a user to be logged in to retrieve",
    "textdich": ""
  },
  {
    "start": 23788.24,
    "end": 23794.48,
    "text": "posts, what he can do is he'll send a request to the slash posts endpoint. But he also provides",
    "textdich": ""
  },
  {
    "start": 23794.48,
    "end": 23799.76,
    "text": "the token in the header of the request. And you may not know what the header of a request is,",
    "textdich": ""
  },
  {
    "start": 23799.76,
    "end": 23803.12,
    "text": "but I'll show you guys, it's very simple, you could just think of it, it's somewhere in the",
    "textdich": ""
  },
  {
    "start": 23803.12,
    "end": 23808.8,
    "text": "payload of the request. And so he sends that. And what the API is going to do our fast API is,",
    "textdich": ""
  },
  {
    "start": 23808.8,
    "end": 23814.24,
    "text": "first of all, it's going to verify the token is valid. And there's a couple of different steps",
    "textdich": ""
  },
  {
    "start": 23814.24,
    "end": 23817.52,
    "text": "needed to actually verify if a token is valid. And we're going to cover that in the next slide,",
    "textdich": ""
  },
  {
    "start": 23817.52,
    "end": 23822.48,
    "text": "but just know that the API just checks, hey, is this a valid token? And if it is, well,",
    "textdich": ""
  },
  {
    "start": 23822.48,
    "end": 23827.36,
    "text": "then he just sends back the data. And that's it. All right, our authentication system is dead",
    "textdich": ""
  },
  {
    "start": 23827.36,
    "end": 23832.8,
    "text": "simple. You provide your credentials, you get a token. And then anytime you want to access",
    "textdich": ""
  },
  {
    "start": 23832.8,
    "end": 23837.84,
    "text": "anything that requires you to be logged in, you just send the token in the header. And that's it.",
    "textdich": ""
  },
  {
    "start": 23837.84,
    "end": 23842.4,
    "text": "So hopefully this wasn't confusing. Hopefully you guys see this simplicity in the solution.",
    "textdich": ""
  },
  {
    "start": 23842.4,
    "end": 23847.76,
    "text": "The API doesn't actually track anything. There's no information being stored on the API. Instead,",
    "textdich": ""
  },
  {
    "start": 23847.76,
    "end": 23851.6,
    "text": "the client just holds on to the token. And he provides it to us. And if we verify that the",
    "textdich": ""
  },
  {
    "start": 23851.6,
    "end": 23858.16,
    "text": "token is valid, that's all we have to do. So let's break down what exactly a JWT token is. And what",
    "textdich": ""
  },
  {
    "start": 23858.16,
    "end": 23862.64,
    "text": "are the components that make up a token. And so I've got an example token right here. And this is",
    "textdich": ""
  },
  {
    "start": 23862.64,
    "end": 23867.84,
    "text": "kind of the same piece of text that we saw in the previous slide. And so it once again, just looks",
    "textdich": ""
  },
  {
    "start": 23867.84,
    "end": 23871.44,
    "text": "like a bunch of cryptic characters just jammed together. And that's kind of what it is. It looks",
    "textdich": ""
  },
  {
    "start": 23871.44,
    "end": 23875.6,
    "text": "like it's encrypted. But keep in mind, it is not encrypted. This is important to understand. And",
    "textdich": ""
  },
  {
    "start": 23875.6,
    "end": 23881.36,
    "text": "we're going to make sure I drive home this point, it is not encrypted. But the token itself is made",
    "textdich": ""
  },
  {
    "start": 23881.36,
    "end": 23888.56,
    "text": "up of three individual pieces. The first thing is the header. So the header includes metadata about",
    "textdich": ""
  },
  {
    "start": 23888.56,
    "end": 23894.56,
    "text": "the token. And so we're actually going to sign this token. So we're going to think of it almost",
    "textdich": ""
  },
  {
    "start": 23894.56,
    "end": 23899.04,
    "text": "like hashing the token. And so we have to specify the algorithm that we're going to use. So in this",
    "textdich": ""
  },
  {
    "start": 23899.04,
    "end": 23903.36,
    "text": "case, the default is HS 256. So we've included that in the metadata. And then you can see the",
    "textdich": ""
  },
  {
    "start": 23903.36,
    "end": 23908.72,
    "text": "type is set to JWT. So this is a JWT token. So that's why the type is set. So the metadata is",
    "textdich": ""
  },
  {
    "start": 23908.72,
    "end": 23912.8,
    "text": "going to be the same for all of our tokens. This is just kind of fixed, don't worry too much about",
    "textdich": ""
  },
  {
    "start": 23912.8,
    "end": 23916.64,
    "text": "it. It's not really that important. We don't really ever touch it. Now, the payload is a little bit",
    "textdich": ""
  },
  {
    "start": 23916.64,
    "end": 23922.16,
    "text": "more interesting. So the payload of a token is ultimately up to you, you can send absolutely no",
    "textdich": ""
  },
  {
    "start": 23922.16,
    "end": 23927.44,
    "text": "payload, you can send any piece of information that you want to send within the payload, you",
    "textdich": ""
  },
  {
    "start": 23927.44,
    "end": 23931.76,
    "text": "conclude anything that you want. However, you want to be careful with what you put in the payload,",
    "textdich": ""
  },
  {
    "start": 23931.76,
    "end": 23937.44,
    "text": "because it's important to understand that the token itself is not encrypted. And so that means",
    "textdich": ""
  },
  {
    "start": 23937.44,
    "end": 23942.08,
    "text": "anybody else in the outside world can take a look at a token, and they can see what's in the payload.",
    "textdich": ""
  },
  {
    "start": 23942.08,
    "end": 23945.52,
    "text": "So you don't want to put any confidential information you want, you don't want to put any",
    "textdich": ""
  },
  {
    "start": 23945.52,
    "end": 23950.8,
    "text": "passwords or secrets, or anything like that. Instead, you want to stick to some very basic",
    "textdich": ""
  },
  {
    "start": 23950.8,
    "end": 23955.84,
    "text": "things. So very common things that we put in the payload are what is the ID of the user, right? So",
    "textdich": ""
  },
  {
    "start": 23955.84,
    "end": 23961.6,
    "text": "when I log in, right, normally, our API is going to create a token and then embed my user ID into",
    "textdich": ""
  },
  {
    "start": 23961.6,
    "end": 23968.16,
    "text": "the token. So that when I asked to get all of my posts, the, the API will be able to take a look at",
    "textdich": ""
  },
  {
    "start": 23968.16,
    "end": 23972.48,
    "text": "the token, verify it's correct, extract to the payload, and it'll automatically know the ID of",
    "textdich": ""
  },
  {
    "start": 23972.48,
    "end": 23977.6,
    "text": "the user that requested this. But we can include other things, we can include the user's role. So",
    "textdich": ""
  },
  {
    "start": 23977.6,
    "end": 23981.04,
    "text": "are they an admin? Are they just a are they a privileged user? Are they a regular user?",
    "textdich": ""
  },
  {
    "start": 23981.68,
    "end": 23986.48,
    "text": "We can technically include any information. One thing to keep in mind is that anytime we need to",
    "textdich": ""
  },
  {
    "start": 23986.48,
    "end": 23990.56,
    "text": "access anything authenticated, we have to include this token. So if we jam a lot of information in",
    "textdich": ""
  },
  {
    "start": 23990.56,
    "end": 23994.96,
    "text": "there, well, it's going to increase the size of our packet. And that's going to be a waste of some",
    "textdich": ""
  },
  {
    "start": 23994.96,
    "end": 23999.2,
    "text": "bandwidth. So you don't want to jam too much information, just a couple of small things here",
    "textdich": ""
  },
  {
    "start": 23999.2,
    "end": 24005.68,
    "text": "or there. And then finally, we have a signature. So a signature is a combination of three things.",
    "textdich": ""
  },
  {
    "start": 24006.24,
    "end": 24010.32,
    "text": "We've got the header. So we take the header that's already in the token, we take the payload,",
    "textdich": ""
  },
  {
    "start": 24010.32,
    "end": 24014.96,
    "text": "that's already in the token. And then we add our secret. So there's a special password that we're",
    "textdich": ""
  },
  {
    "start": 24014.96,
    "end": 24019.52,
    "text": "going to keep on our API. This is only on our API, our clients will not know it, no one else will",
    "textdich": ""
  },
  {
    "start": 24019.52,
    "end": 24023.92,
    "text": "know it. And it's probably the most important thing to our whole authentication system. So you",
    "textdich": ""
  },
  {
    "start": 24023.92,
    "end": 24027.52,
    "text": "don't ever want the secret to get out. But we take those three things, the secret, the header,",
    "textdich": ""
  },
  {
    "start": 24027.52,
    "end": 24033.12,
    "text": "the payload. And then we essentially take that information, pass it into the signing algorithm,",
    "textdich": ""
  },
  {
    "start": 24033.12,
    "end": 24039.68,
    "text": "which is the HS 256. And then it's going to return a signature. And this signature is important",
    "textdich": ""
  },
  {
    "start": 24039.68,
    "end": 24044.08,
    "text": "because we're going to use this to determine if the token is valid, because we don't want anyone",
    "textdich": ""
  },
  {
    "start": 24044.08,
    "end": 24047.76,
    "text": "else tampering with our tokens, we don't want them changing data, you know, I don't want some",
    "textdich": ""
  },
  {
    "start": 24047.76,
    "end": 24051.92,
    "text": "user to log in, and then just start changing numbers in here to make it seem like it's a different",
    "textdich": ""
  },
  {
    "start": 24051.92,
    "end": 24058.08,
    "text": "user, because then they can potentially access other users information. And so that's why we",
    "textdich": ""
  },
  {
    "start": 24058.08,
    "end": 24064.24,
    "text": "have this signature is just to make sure that no one has tampered with our specific token. And so,",
    "textdich": ""
  },
  {
    "start": 24064.24,
    "end": 24068.16,
    "text": "you know, I just want to drive home that same point. First of all, there's no encryption.",
    "textdich": ""
  },
  {
    "start": 24068.16,
    "end": 24075.2,
    "text": "So anyone can see the data, the signature is just there for data integrity. And what that means is",
    "textdich": ""
  },
  {
    "start": 24075.2,
    "end": 24079.84,
    "text": "no one has changed it. That means all the data that we have in there is still what it should be,",
    "textdich": ""
  },
  {
    "start": 24079.84,
    "end": 24085.68,
    "text": "no one has messed with the data. Alright, and if you're still confused as to what a signature is,",
    "textdich": ""
  },
  {
    "start": 24086.48,
    "end": 24091.04,
    "text": "we're going to take a look at how signature work, why we use them and how they ultimately help us",
    "textdich": ""
  },
  {
    "start": 24091.04,
    "end": 24095.68,
    "text": "detect if someone changes any of the information in our token in the next slide. And then I think",
    "textdich": ""
  },
  {
    "start": 24095.68,
    "end": 24100.88,
    "text": "at that point, you guys will see it's not really a complex concept. And once you get that, you'll",
    "textdich": ""
  },
  {
    "start": 24100.88,
    "end": 24104.88,
    "text": "see that the whole authentication process is fairly simple. Okay, guys, so we're going to do",
    "textdich": ""
  },
  {
    "start": 24104.88,
    "end": 24110.56,
    "text": "a deep dive into why we need the signature within the token. And you'll see this slide may look a",
    "textdich": ""
  },
  {
    "start": 24110.56,
    "end": 24113.92,
    "text": "little complex, there seems to be a lot of boxes, a lot of things going on. But as soon as I explain",
    "textdich": ""
  },
  {
    "start": 24113.92,
    "end": 24119.68,
    "text": "this, I think you guys will see that it's not too complex of a concept. So let's break this down",
    "textdich": ""
  },
  {
    "start": 24119.68,
    "end": 24124.64,
    "text": "step by step. Let's say a user has logged into our application, he sent our credentials, and our API",
    "textdich": ""
  },
  {
    "start": 24124.64,
    "end": 24128.8,
    "text": "has created the token, and it's in the process of sending it back to the user. So this is going to",
    "textdich": ""
  },
  {
    "start": 24128.8,
    "end": 24132.96,
    "text": "be our token that we create on our API. And it's going to create, it's going to have three things,",
    "textdich": ""
  },
  {
    "start": 24132.96,
    "end": 24137.2,
    "text": "the same three things we discussed in the previous slide, we've got the header, that's got all the",
    "textdich": ""
  },
  {
    "start": 24137.2,
    "end": 24141.12,
    "text": "metadata, it's got the payload, right, and this is going to have whatever information we want to put",
    "textdich": ""
  },
  {
    "start": 24141.12,
    "end": 24147.2,
    "text": "in the payload. And in this case, we've decided to embed the user's ID, as well as his specific role.",
    "textdich": ""
  },
  {
    "start": 24147.92,
    "end": 24153.12,
    "text": "In this case, he's a plain user, he's not like a special privileged user or a staff user or an",
    "textdich": ""
  },
  {
    "start": 24153.12,
    "end": 24157.2,
    "text": "admin, he's just a regular user of our application. So he can only do very specific things.",
    "textdich": ""
  },
  {
    "start": 24157.2,
    "end": 24164.0,
    "text": "And then we have to generate a signature. And our signature is going to be a combination of three",
    "textdich": ""
  },
  {
    "start": 24164.0,
    "end": 24167.76,
    "text": "things, it's going to be a combination of a header. And remember, this header is the same thing. So",
    "textdich": ""
  },
  {
    "start": 24167.76,
    "end": 24172.0,
    "text": "even though our token already has the header, what we do is we take that header, we take the payload",
    "textdich": ""
  },
  {
    "start": 24172.0,
    "end": 24176.8,
    "text": "with the specific pieces of information we've included in there. And then we include finally,",
    "textdich": ""
  },
  {
    "start": 24176.8,
    "end": 24182.88,
    "text": "our special super secret password. Remember, this password only resides on our API servers,",
    "textdich": ""
  },
  {
    "start": 24182.88,
    "end": 24186.64,
    "text": "nobody else has access to it, our clients don't have access to it, the front end doesn't have",
    "textdich": ""
  },
  {
    "start": 24186.64,
    "end": 24190.96,
    "text": "access to it, only we have access to it on our API server. And this is very important, because this",
    "textdich": ""
  },
  {
    "start": 24190.96,
    "end": 24195.52,
    "text": "is the special password that no one should ever have access to. And so we take all of these three",
    "textdich": ""
  },
  {
    "start": 24195.52,
    "end": 24200.08,
    "text": "things, we pass it into a hashing function, essentially, and then we create a signature.",
    "textdich": ""
  },
  {
    "start": 24200.88,
    "end": 24205.76,
    "text": "And so we take these three things, and that's going to make up our token. And so we send that back to",
    "textdich": ""
  },
  {
    "start": 24205.76,
    "end": 24213.6,
    "text": "the user. Now, let's say that we've got a user who decides that he wants to do a little bit of shady",
    "textdich": ""
  },
  {
    "start": 24213.6,
    "end": 24218.8,
    "text": "things. And he wants to kind of hack our application and do some bad things to our application",
    "textdich": ""
  },
  {
    "start": 24218.8,
    "end": 24224.0,
    "text": "ultimately. And so what he's figured out is like, hey, look, this token, right, it's not encrypted,",
    "textdich": ""
  },
  {
    "start": 24224.0,
    "end": 24228.64,
    "text": "I can see all the data, I can see that I'm a user. And so what he's decided to do, he changed",
    "textdich": ""
  },
  {
    "start": 24228.64,
    "end": 24233.68,
    "text": "a few bits in the token to make it now read admin instead of user. But he could have really done",
    "textdich": ""
  },
  {
    "start": 24233.68,
    "end": 24237.04,
    "text": "anything, right, he could have changed the ID so that it's someone else's ID, and he could",
    "textdich": ""
  },
  {
    "start": 24237.04,
    "end": 24240.0,
    "text": "potentially have access to someone else's information, it doesn't really matter, but",
    "textdich": ""
  },
  {
    "start": 24240.0,
    "end": 24246.08,
    "text": "he's changed a few things. And so now he's got a this token, which has the header signature and",
    "textdich": ""
  },
  {
    "start": 24246.08,
    "end": 24253.92,
    "text": "payload. And he's now a admin user, or the payload says he's an admin user. Now, the reason he can't",
    "textdich": ""
  },
  {
    "start": 24253.92,
    "end": 24259.84,
    "text": "actually do this is because ultimately, remember, the signature that's currently in the token was",
    "textdich": ""
  },
  {
    "start": 24259.84,
    "end": 24267.12,
    "text": "generated by having a header, the same header, and then you pass in the payload with this specific",
    "textdich": ""
  },
  {
    "start": 24267.12,
    "end": 24274.24,
    "text": "ID and a role of user. And then you pass in the secret. And so this signature is no longer valid,",
    "textdich": ""
  },
  {
    "start": 24274.24,
    "end": 24278.88,
    "text": "he can't use this same signature, because it's not going to match up with the data that he has.",
    "textdich": ""
  },
  {
    "start": 24278.88,
    "end": 24284.0,
    "text": "So if we actually try to create a signature from this, it's going to look different. And so what",
    "textdich": ""
  },
  {
    "start": 24284.0,
    "end": 24288.16,
    "text": "he has to do is he has to create a brand new signature so that it matches the data he's sending.",
    "textdich": ""
  },
  {
    "start": 24288.16,
    "end": 24293.12,
    "text": "However, he can't create a brand new signature, because he doesn't have this super secret special",
    "textdich": ""
  },
  {
    "start": 24293.12,
    "end": 24299.12,
    "text": "password. This only resides on our API server. And so if he tries to create a brand new signature,",
    "textdich": ""
  },
  {
    "start": 24299.12,
    "end": 24304.0,
    "text": "he can only pass in the header and this payload into the hashing function to generate a new",
    "textdich": ""
  },
  {
    "start": 24304.0,
    "end": 24311.12,
    "text": "signature. And so that once again, is not going to be a valid signature. Because when he sends,",
    "textdich": ""
  },
  {
    "start": 24311.12,
    "end": 24315.04,
    "text": "let's say he does create that signature with only the header and the payload, and no secret,",
    "textdich": ""
  },
  {
    "start": 24315.04,
    "end": 24319.2,
    "text": "what we now have this token, right, that's made up of these three things, we send it to our API.",
    "textdich": ""
  },
  {
    "start": 24319.2,
    "end": 24324.32,
    "text": "And what our API is going to do is to verify if the token is valid, he does a super simple test.",
    "textdich": ""
  },
  {
    "start": 24325.28,
    "end": 24331.44,
    "text": "He takes the header, he takes the payload, and he takes the secret. And he creates a test signature.",
    "textdich": ""
  },
  {
    "start": 24331.44,
    "end": 24334.48,
    "text": "Because remember, that's what we did in the first place to actually create the original token,",
    "textdich": ""
  },
  {
    "start": 24334.48,
    "end": 24340.08,
    "text": "we take the header, the payload, the secret, and we pass it in to our signing function. And we pass",
    "textdich": ""
  },
  {
    "start": 24340.08,
    "end": 24343.92,
    "text": "into our hashing function and create the signature. So we do the same thing. And then we take the",
    "textdich": ""
  },
  {
    "start": 24343.92,
    "end": 24349.44,
    "text": "signature in the token that was sent by the user. And we just compare them, if they don't match,",
    "textdich": ""
  },
  {
    "start": 24349.44,
    "end": 24353.36,
    "text": "which they won't, because remember, he doesn't have access to the secret. And since we use the",
    "textdich": ""
  },
  {
    "start": 24353.36,
    "end": 24357.36,
    "text": "secret in our hashing function, right, the signatures aren't going to match. And we know",
    "textdich": ""
  },
  {
    "start": 24357.36,
    "end": 24364.56,
    "text": "that this token is not valid. So this signature once again, only ensures that the data integrity",
    "textdich": ""
  },
  {
    "start": 24364.56,
    "end": 24368.24,
    "text": "is still valid, that no one has tweaked any of the bits, no one's changed any of the data,",
    "textdich": ""
  },
  {
    "start": 24368.24,
    "end": 24372.16,
    "text": "that's all the signature can do, it can just verify that it hasn't been changed.",
    "textdich": ""
  },
  {
    "start": 24372.16,
    "end": 24378.0,
    "text": "Since we created the token in the first place. But once again, and I can't stress this enough,",
    "textdich": ""
  },
  {
    "start": 24378.0,
    "end": 24384.56,
    "text": "anybody can change the data of a token, anybody can see the data of the token, they just can't",
    "textdich": ""
  },
  {
    "start": 24384.56,
    "end": 24388.56,
    "text": "generate a brand new signature, because they don't have access to the secret. And so that's why the",
    "textdich": ""
  },
  {
    "start": 24388.56,
    "end": 24394.56,
    "text": "password is so important, because that's how we ensure that the token hasn't been manipulated or",
    "textdich": ""
  },
  {
    "start": 24394.56,
    "end": 24399.84,
    "text": "changed in any way, shape or form. So hopefully that made sense. I didn't understand this at",
    "textdich": ""
  },
  {
    "start": 24399.84,
    "end": 24404.56,
    "text": "first, it took me a while to actually grasp why we needed the signature. I just kind of was like,",
    "textdich": ""
  },
  {
    "start": 24404.56,
    "end": 24408.8,
    "text": "I'll figure this out later. But after a year or so, I was like, Oh, this is actually a super simple",
    "textdich": ""
  },
  {
    "start": 24408.8,
    "end": 24413.12,
    "text": "concept. And hopefully I can do a slightly better job of explaining it than some of the documents",
    "textdich": ""
  },
  {
    "start": 24413.12,
    "end": 24416.8,
    "text": "that I read when I was first learning it. And hopefully this kind of, you know, gets rid of some",
    "textdich": ""
  },
  {
    "start": 24416.8,
    "end": 24422.24,
    "text": "of the unnecessary stress that kind of comes with learning about JWT based authentication.",
    "textdich": ""
  },
  {
    "start": 24423.2,
    "end": 24427.2,
    "text": "So once again, let's quickly take a look at how we're going to handle logging in the user,",
    "textdich": ""
  },
  {
    "start": 24427.2,
    "end": 24432.4,
    "text": "more specifically, how do we actually verify that his credentials are correct, because it's not going",
    "textdich": ""
  },
  {
    "start": 24432.4,
    "end": 24437.92,
    "text": "to be exactly the same way that you would think. So the user is going to hit the login endpoint,",
    "textdich": ""
  },
  {
    "start": 24437.92,
    "end": 24442.8,
    "text": "and he's going to provide the email and the password. And I've colored the word password in",
    "textdich": ""
  },
  {
    "start": 24442.8,
    "end": 24447.52,
    "text": "red, because this password is going to represent what the user is trying to log in as this is his",
    "textdich": ""
  },
  {
    "start": 24447.52,
    "end": 24450.96,
    "text": "attempted password, that's what we're going to call it. And that's going to be in red. And keep in",
    "textdich": ""
  },
  {
    "start": 24450.96,
    "end": 24455.52,
    "text": "mind that when he sends this password, it's in plain text, right, it's just the regular password",
    "textdich": ""
  },
  {
    "start": 24455.52,
    "end": 24459.76,
    "text": "that he typed out. And so when it gets to our API, the first thing that we're going to do is we're",
    "textdich": ""
  },
  {
    "start": 24459.76,
    "end": 24464.88,
    "text": "going to hit our database to try to find the user based off his email or his username. And the",
    "textdich": ""
  },
  {
    "start": 24464.88,
    "end": 24468.88,
    "text": "database is going to send back all of the information about that user, which includes the",
    "textdich": ""
  },
  {
    "start": 24468.88,
    "end": 24473.44,
    "text": "password. However, if you remember how we actually created the password and stored it in the database,",
    "textdich": ""
  },
  {
    "start": 24473.44,
    "end": 24478.4,
    "text": "we actually stored a hashed version of the password in the database so that if anyone hacks",
    "textdich": ""
  },
  {
    "start": 24478.4,
    "end": 24483.68,
    "text": "our database, the user's passwords aren't actually in plain text, so no one can really hack their",
    "textdich": ""
  },
  {
    "start": 24483.68,
    "end": 24489.12,
    "text": "passwords. But this creates a little bit of a problem because we have the attempted password,",
    "textdich": ""
  },
  {
    "start": 24489.68,
    "end": 24495.12,
    "text": "the for the login attempt in plain text, however, we've got the password in our database as a hashed",
    "textdich": ""
  },
  {
    "start": 24495.12,
    "end": 24501.28,
    "text": "password. So how exactly do we check to see that they're equal? Because right now, a hashed password",
    "textdich": ""
  },
  {
    "start": 24501.28,
    "end": 24506.56,
    "text": "does not equal the same as the regular password. And your first instinct is to, hey, well, let's",
    "textdich": ""
  },
  {
    "start": 24506.56,
    "end": 24511.2,
    "text": "just convert this back to a plain text password. And we can't exactly do that. Because remember,",
    "textdich": ""
  },
  {
    "start": 24511.2,
    "end": 24517.04,
    "text": "a hash is only one way. So if we hash a password, we can't get the original password from the hash,",
    "textdich": ""
  },
  {
    "start": 24517.04,
    "end": 24521.92,
    "text": "that's what's great about hashing a password. And if you think you can do that, that's actually,",
    "textdich": ""
  },
  {
    "start": 24521.92,
    "end": 24526.72,
    "text": "well, I guess what we would refer to as encryption, but we're hashing in this case. So what do we do?",
    "textdich": ""
  },
  {
    "start": 24527.36,
    "end": 24532.4,
    "text": "To verify if the passwords are actually equal, it's pretty simple, we take the hashed password,",
    "textdich": ""
  },
  {
    "start": 24532.4,
    "end": 24536.8,
    "text": "and then we take the raw. And once again, this hashed password is the correct password in our",
    "textdich": ""
  },
  {
    "start": 24536.8,
    "end": 24543.04,
    "text": "database, then we take the password attempt, and we hash it again. So we hash this password. And so",
    "textdich": ""
  },
  {
    "start": 24543.04,
    "end": 24548.32,
    "text": "then we get a hashed password. And so if we have the correct password, then if we put it through",
    "textdich": ""
  },
  {
    "start": 24548.32,
    "end": 24553.12,
    "text": "the hashing function, these two should be equal. And so if they're equal, that means the password",
    "textdich": ""
  },
  {
    "start": 24553.12,
    "end": 24558.32,
    "text": "they provided us is the correct password in the database. If it's not the if they don't match,",
    "textdich": ""
  },
  {
    "start": 24558.32,
    "end": 24563.36,
    "text": "that means he gave us the wrong password. And so if they're correct, we'll then go ahead and send",
    "textdich": ""
  },
  {
    "start": 24563.36,
    "end": 24566.88,
    "text": "we'll create a token first, and then we'll send it to the client. So it's as simple as taking the",
    "textdich": ""
  },
  {
    "start": 24566.88,
    "end": 24571.6,
    "text": "attempted password, hashing it, and then comparing it with the hashed password in the database.",
    "textdich": ""
  },
  {
    "start": 24571.6,
    "end": 24575.52,
    "text": "Because if the passwords are correct, then the hash should equal the hash in the database.",
    "textdich": ""
  },
  {
    "start": 24576.24,
    "end": 24580.32,
    "text": "Okay, so we're going to create the login path operation. And what I'm actually going to do is",
    "textdich": ""
  },
  {
    "start": 24580.32,
    "end": 24585.6,
    "text": "you're probably thinking that we can just store the path operation in the users.py router. However,",
    "textdich": ""
  },
  {
    "start": 24585.6,
    "end": 24590.32,
    "text": "I think it would make more sense to actually store this in a authentication router. So we're",
    "textdich": ""
  },
  {
    "start": 24590.32,
    "end": 24594.88,
    "text": "actually going to create a brand new router for this so that we can keep the user routes versus",
    "textdich": ""
  },
  {
    "start": 24594.88,
    "end": 24598.64,
    "text": "the authentication routes in two different files. However, if you really wanted to, you could store",
    "textdich": ""
  },
  {
    "start": 24598.64,
    "end": 24604.08,
    "text": "it all in one file. I'm gonna call this auth.py. And the first thing that we have to do is from",
    "textdich": ""
  },
  {
    "start": 24604.08,
    "end": 24610.32,
    "text": "the fast API, we're going to import a few things. We're going to import the API router. We're going",
    "textdich": ""
  },
  {
    "start": 24610.32,
    "end": 24620.48,
    "text": "to need depends status, HTTP exception. And maybe we need the response I haven't decided. And then",
    "textdich": ""
  },
  {
    "start": 24620.48,
    "end": 24626.72,
    "text": "we're going to define our router. So we'll say router equals API router. And we're going to pass",
    "textdich": ""
  },
  {
    "start": 24626.72,
    "end": 24638.0,
    "text": "in a tag, you know, just for the documentation. So we'll say tags equals authentication. All right,",
    "textdich": ""
  },
  {
    "start": 24638.0,
    "end": 24644.4,
    "text": "and then we're going to create our login. So we'll call this well, first of all, this is going to be",
    "textdich": ""
  },
  {
    "start": 24644.4,
    "end": 24648.24,
    "text": "a POST request. Because remember, the user is going to have to provide his credentials. So",
    "textdich": ""
  },
  {
    "start": 24648.88,
    "end": 24652.48,
    "text": "generally, when you want to send data in one direction, it's going to be a POST request.",
    "textdich": ""
  },
  {
    "start": 24654.96,
    "end": 24658.72,
    "text": "And we'll send it to the login endpoint, you can call this whatever you want, you can call it",
    "textdich": ""
  },
  {
    "start": 24658.72,
    "end": 24664.32,
    "text": "authenticate. However, I like login. And then we'll define our function. And I'll just call this login",
    "textdich": ""
  },
  {
    "start": 24664.32,
    "end": 24669.44,
    "text": "as well. And because we're ultimately going to have to fetch the user from the database, we're",
    "textdich": ""
  },
  {
    "start": 24669.44,
    "end": 24681.76,
    "text": "going to have to import our our database session. And so from SQL alchemy, we'll say dot or m import",
    "textdich": ""
  },
  {
    "start": 24681.76,
    "end": 24690.08,
    "text": "session. And so we'll do the same thing that we did with every other path operation, I'll say DB",
    "textdich": ""
  },
  {
    "start": 24690.08,
    "end": 24700.32,
    "text": "session equals depends. And then we're going to have to actually import our get DB function. So",
    "textdich": ""
  },
  {
    "start": 24700.32,
    "end": 24711.28,
    "text": "from here, we'll do from and we have to go up a a directory and I'll say database import session.",
    "textdich": ""
  },
  {
    "start": 24711.28,
    "end": 24719.28,
    "text": "Sorry, not session. Actually, you know what I'm gonna do, I'm just gonna say from dot dot import",
    "textdich": ""
  },
  {
    "start": 24719.28,
    "end": 24729.12,
    "text": "database. And then I can just reference it as database dot get underscore DB. And since the",
    "textdich": ""
  },
  {
    "start": 24729.12,
    "end": 24734.56,
    "text": "user is going to be providing the login information, I think it makes sense to set up a schema so that",
    "textdich": ""
  },
  {
    "start": 24734.56,
    "end": 24740.32,
    "text": "we can ensure that they provide the exact pieces of data that we ultimately want. And what we're",
    "textdich": ""
  },
  {
    "start": 24740.32,
    "end": 24744.4,
    "text": "going to do is we're just going to create a new class. And I'm going to call this user login.",
    "textdich": ""
  },
  {
    "start": 24744.4,
    "end": 24753.44,
    "text": "And this will extend the base model as usual. And the two pieces of information that we want our",
    "textdich": ""
  },
  {
    "start": 24753.44,
    "end": 24759.92,
    "text": "email, which is gonna be a string and then we can do password, which is going to be a string.",
    "textdich": ""
  },
  {
    "start": 24759.92,
    "end": 24770.72,
    "text": "Actually, I'm gonna I'm going to use an email string like we did before. And then from our",
    "textdich": ""
  },
  {
    "start": 24770.72,
    "end": 24777.04,
    "text": "auth.py, I'm also going to import schemas. And here, I'm going to store the schema as a user",
    "textdich": ""
  },
  {
    "start": 24777.76,
    "end": 24789.28,
    "text": "credentials. There's gonna be schemas dot user login. Alright, and so now we can access all the",
    "textdich": ""
  },
  {
    "start": 24789.28,
    "end": 24794.24,
    "text": "user information or the attempted login information with the user credentials variable. And we're",
    "textdich": ""
  },
  {
    "start": 24794.24,
    "end": 24800.08,
    "text": "going to make a request to our database, specifically, our users table to retrieve the",
    "textdich": ""
  },
  {
    "start": 24800.08,
    "end": 24807.44,
    "text": "user based off of his email. So we'll say db dot query. And we'll and we have to import models now",
    "textdich": ""
  },
  {
    "start": 24808.64,
    "end": 24815.76,
    "text": "so that we can access it. We'll say models dot user. And then we have to filter based off of the",
    "textdich": ""
  },
  {
    "start": 24815.76,
    "end": 24826.16,
    "text": "email. I'll say models dot user once again, dot email equals equals user underscore credentials",
    "textdich": ""
  },
  {
    "start": 24826.16,
    "end": 24831.44,
    "text": "dot email. And then there's only going to be one user with that specific email. So we'll do first",
    "textdich": ""
  },
  {
    "start": 24833.84,
    "end": 24839.12,
    "text": "and we'll store this result in a variable called user. Now, if there's no user with",
    "textdich": ""
  },
  {
    "start": 24839.12,
    "end": 24843.68,
    "text": "that specific email, then we're going to return a error or we're going to raise an exception. So",
    "textdich": ""
  },
  {
    "start": 24843.68,
    "end": 24852.48,
    "text": "we'll say if not user, we're going to raise an HTTP exception. And the status code is going to",
    "textdich": ""
  },
  {
    "start": 24852.48,
    "end": 24857.52,
    "text": "be status dot and I'm trying to remember what code was up, it's going to be a 404 because that user",
    "textdich": ""
  },
  {
    "start": 24857.52,
    "end": 24864.16,
    "text": "doesn't exist. And then the detail field, we're just going to say invalid credentials. Because",
    "textdich": ""
  },
  {
    "start": 24864.16,
    "end": 24868.4,
    "text": "normally with authentication, you don't want to say, hey, this is the wrong email, or this is the",
    "textdich": ""
  },
  {
    "start": 24868.4,
    "end": 24871.76,
    "text": "wrong password, because you don't want to make it a little bit easier for them to kind of guess other",
    "textdich": ""
  },
  {
    "start": 24871.76,
    "end": 24875.76,
    "text": "people's information, just say this is invalid credentials, let them figure out whether it's",
    "textdich": ""
  },
  {
    "start": 24875.76,
    "end": 24881.2,
    "text": "the email or the password. And then after this, once we verify that we did actually get a user",
    "textdich": ""
  },
  {
    "start": 24881.2,
    "end": 24886.16,
    "text": "object, we have to verify that the passwords are equal. So this would be, you know, performing",
    "textdich": ""
  },
  {
    "start": 24886.16,
    "end": 24892.4,
    "text": "that logic of, of hashing the password that they gave us and seeing if that it compares to the",
    "textdich": ""
  },
  {
    "start": 24892.4,
    "end": 24896.0,
    "text": "password from the database. And so what we're going to do is we're going to create a new function in",
    "textdich": ""
  },
  {
    "start": 24896.0,
    "end": 24901.12,
    "text": "the utils folder, that's going to be responsible for comparing the two hashes, or actually, it's",
    "textdich": ""
  },
  {
    "start": 24901.12,
    "end": 24904.8,
    "text": "going to take in the raw password, the password attempt, it's going to hash it for us, and then",
    "textdich": ""
  },
  {
    "start": 24904.8,
    "end": 24908.48,
    "text": "it's going to compare it to the hash in the database. So we'll create a function, we'll call",
    "textdich": ""
  },
  {
    "start": 24908.48,
    "end": 24912.64,
    "text": "it a verify. And it's going to include the plain password, which is the password the user is trying",
    "textdich": ""
  },
  {
    "start": 24912.64,
    "end": 24917.92,
    "text": "to attempt, and then the hash password, which comes from the database. And all we have to do",
    "textdich": ""
  },
  {
    "start": 24917.92,
    "end": 24924.0,
    "text": "is just return. And then we can reference the PW context, right? So if you want to hash a password,",
    "textdich": ""
  },
  {
    "start": 24924.0,
    "end": 24929.52,
    "text": "you just call the dash, the dot hash method. However, it's also got a another method for us,",
    "textdich": ""
  },
  {
    "start": 24929.52,
    "end": 24933.68,
    "text": "which is verify. So it's going to perform all this logic for us. So we just pass in the plain",
    "textdich": ""
  },
  {
    "start": 24933.68,
    "end": 24940.48,
    "text": "password. And then we pass in the hash password. And it's going to figure out the rest. Now,",
    "textdich": ""
  },
  {
    "start": 24940.48,
    "end": 24943.76,
    "text": "you're thinking, well, you know, what is the point of such a tiny function? Why don't we just",
    "textdich": ""
  },
  {
    "start": 24943.76,
    "end": 24949.84,
    "text": "include it in our auth.py? Well, we 100% could because, you know, it's, it's really two lines",
    "textdich": ""
  },
  {
    "start": 24949.84,
    "end": 24953.92,
    "text": "of code, it doesn't really make sense to store it in another file. However, then we also have to",
    "textdich": ""
  },
  {
    "start": 24953.92,
    "end": 24959.6,
    "text": "import all of the the bcrypt code. And I like to have everything kind of separate. So keeping all",
    "textdich": ""
  },
  {
    "start": 24959.6,
    "end": 24964.32,
    "text": "of the bcrypt logic in one file just makes things a little bit easier to manage. But in our auth",
    "textdich": ""
  },
  {
    "start": 24964.32,
    "end": 24971.92,
    "text": "folder, we can import utils now. And we're going to run the utils dot verify. And we're going to",
    "textdich": ""
  },
  {
    "start": 24971.92,
    "end": 24977.2,
    "text": "pass in the first the plain password, which is going to be stored in user credentials. So we'll",
    "textdich": ""
  },
  {
    "start": 24977.2,
    "end": 24983.92,
    "text": "say user credentials, dot password. And then we pass in the hashed password from the database,",
    "textdich": ""
  },
  {
    "start": 24983.92,
    "end": 24992.96,
    "text": "which is stored under users, we'll say user dot password. Alright, and if they are not equal,",
    "textdich": ""
  },
  {
    "start": 24992.96,
    "end": 24997.84,
    "text": "so if they do not equal each other, which means they provided us the incorrect password,",
    "textdich": ""
  },
  {
    "start": 24997.84,
    "end": 25006.8,
    "text": "then we're going to raise another HTTP exception. And this is going to be the same thing, we're",
    "textdich": ""
  },
  {
    "start": 25006.8,
    "end": 25021.6,
    "text": "going to send a status code of 404. And the detail is going to be the same thing, we're not going to",
    "textdich": ""
  },
  {
    "start": 25021.6,
    "end": 25025.36,
    "text": "tell them that it was the wrong password, we're just going to say invalid credentials, so that",
    "textdich": ""
  },
  {
    "start": 25025.36,
    "end": 25030.16,
    "text": "it's not easy for them to kind of keep guessing passwords or emails. Alright, and then at this",
    "textdich": ""
  },
  {
    "start": 25030.16,
    "end": 25035.84,
    "text": "point, what we would do is we would create a token, which, you know, we haven't really gone over how",
    "textdich": ""
  },
  {
    "start": 25035.84,
    "end": 25045.28,
    "text": "to do that. And then we would just return return token. But once again, we haven't done that. So",
    "textdich": ""
  },
  {
    "start": 25045.28,
    "end": 25052.24,
    "text": "I'm just going to return. And we'll just say token. And I'm just gonna say example token,",
    "textdich": ""
  },
  {
    "start": 25052.24,
    "end": 25055.6,
    "text": "right, because we haven't implemented that logic. But I do want to make sure that the rest of the",
    "textdich": ""
  },
  {
    "start": 25055.6,
    "end": 25061.92,
    "text": "code looks good. So we'll try that out. And I'm going to go in, create a new request.",
    "textdich": ""
  },
  {
    "start": 25061.92,
    "end": 25074.16,
    "text": "This will be login user will be a post request. Copy this. Actually, this is just gonna be slash",
    "textdich": ""
  },
  {
    "start": 25074.16,
    "end": 25082.96,
    "text": "login. And then in our body, we're going to provide some JSON. And here, we're just gonna say email",
    "textdich": ""
  },
  {
    "start": 25082.96,
    "end": 25096.8,
    "text": "is whatever. And password is whatever. And before I actually do anything, I'm going to run a query",
    "textdich": ""
  },
  {
    "start": 25096.8,
    "end": 25101.6,
    "text": "on my database. Because if you see, I've got a couple of users that don't have hashed passwords.",
    "textdich": ""
  },
  {
    "start": 25102.16,
    "end": 25110.96,
    "text": "So I'm actually going to delete everything, just so I can clean up some mess. And I'll just say,",
    "textdich": ""
  },
  {
    "start": 25110.96,
    "end": 25114.48,
    "text": "and what I'm actually going to do is I'm just going to delete everything. I think that's going",
    "textdich": ""
  },
  {
    "start": 25114.48,
    "end": 25118.56,
    "text": "to just make things simple, because I don't even remember these guys as passwords. So it's going",
    "textdich": ""
  },
  {
    "start": 25118.56,
    "end": 25123.28,
    "text": "to create some issues for us. So we'll just say delete from and I'll say users. And then I just",
    "textdich": ""
  },
  {
    "start": 25123.28,
    "end": 25129.36,
    "text": "won't provide any condition. So this should delete everything. We'll run that. And you can see that",
    "textdich": ""
  },
  {
    "start": 25129.36,
    "end": 25135.12,
    "text": "it looks like it deleted all 12 results. And that's perfectly okay. And I'll add my original",
    "textdich": ""
  },
  {
    "start": 25135.12,
    "end": 25140.88,
    "text": "query back select star from users. And we're going to do is we're going to just register new users.",
    "textdich": ""
  },
  {
    "start": 25140.88,
    "end": 25146.64,
    "text": "So I do create user. And I'm going to call this Sanjeev at Gmail, and then the password is going",
    "textdich": ""
  },
  {
    "start": 25146.64,
    "end": 25154.72,
    "text": "to be password 123. Let's create that user. Let's take a look. All right, we've created that user.",
    "textdich": ""
  },
  {
    "start": 25154.72,
    "end": 25160.24,
    "text": "And now let's log in this user. So we'll go to login, and I'm going to provide my Sanjeev at",
    "textdich": ""
  },
  {
    "start": 25160.24,
    "end": 25166.88,
    "text": "Gmail. And then we're going to provide a password, which was password 123. Let's try this out.",
    "textdich": ""
  },
  {
    "start": 25166.88,
    "end": 25175.52,
    "text": "And it looks like we ran into an issue. So what? Well, first of all, that's the wrong error message.",
    "textdich": ""
  },
  {
    "start": 25175.52,
    "end": 25180.96,
    "text": "I'm not sure why it gave me that. Let's just it should say invalid credentials. So where",
    "textdich": ""
  },
  {
    "start": 25180.96,
    "end": 25186.56,
    "text": "is this actually happening? And guys, I made an absolute silly and stupid mistake. I forgot to",
    "textdich": ""
  },
  {
    "start": 25186.56,
    "end": 25192.24,
    "text": "actually wire up this router in our main.py file. So it doesn't even know about it. So let's import",
    "textdich": ""
  },
  {
    "start": 25192.24,
    "end": 25201.12,
    "text": "this. We're going to say import auth. And all we have to do is just one skin. And I'm just going",
    "textdich": ""
  },
  {
    "start": 25201.12,
    "end": 25208.64,
    "text": "to copy this. And we'll just say auth dot router. Alright, let's try this again. Right. And we've",
    "textdich": ""
  },
  {
    "start": 25208.64,
    "end": 25213.68,
    "text": "got our example token, which means that we verified that the passwords are correct, and everything was",
    "textdich": ""
  },
  {
    "start": 25213.68,
    "end": 25218.32,
    "text": "good to go. We just haven't implemented the logic for the token. But let's just make sure that when",
    "textdich": ""
  },
  {
    "start": 25218.32,
    "end": 25223.84,
    "text": "we put in the wrong password, it still works. Or actually, it shouldn't work. And we get invalid",
    "textdich": ""
  },
  {
    "start": 25223.84,
    "end": 25230.56,
    "text": "credentials, let's put the right password back in. And then let's use the wrong email. And we get",
    "textdich": ""
  },
  {
    "start": 25230.56,
    "end": 25236.8,
    "text": "invalid credentials as well. So, so far, we are almost done with the whole login process. The next",
    "textdich": ""
  },
  {
    "start": 25236.8,
    "end": 25242.48,
    "text": "thing that we got to do is handle creating a token, it's not going to be too difficult. But I do want",
    "textdich": ""
  },
  {
    "start": 25242.48,
    "end": 25248.64,
    "text": "to save that for the next video. Now, if we head on over to the fast API documentation under security,",
    "textdich": ""
  },
  {
    "start": 25248.64,
    "end": 25253.44,
    "text": "there's going to be a walk with password. And so most of the things I cover are going to be coming",
    "textdich": ""
  },
  {
    "start": 25253.44,
    "end": 25258.08,
    "text": "from this documentation right here. Now, the first thing that we have to do is we have to install a",
    "textdich": ""
  },
  {
    "start": 25258.08,
    "end": 25263.12,
    "text": "library that handles signing and verifying JWT tokens. And so we're going to use this Python dash",
    "textdich": ""
  },
  {
    "start": 25263.12,
    "end": 25268.88,
    "text": "and shows the library, and then we have to provide a cryptography back, back end. So we're just going",
    "textdich": ""
  },
  {
    "start": 25268.88,
    "end": 25276.8,
    "text": "to copy this line right here. And we're going to run this in the command line. And what I'm going",
    "textdich": ""
  },
  {
    "start": 25276.8,
    "end": 25281.92,
    "text": "to do is when it comes to authentication, and anything with JWT tokens, I'm going to create",
    "textdich": ""
  },
  {
    "start": 25281.92,
    "end": 25288.08,
    "text": "a new file. And I'm gonna call this OAuth two dot p y. Alright, and the first thing that we're",
    "textdich": ""
  },
  {
    "start": 25288.08,
    "end": 25299.76,
    "text": "going to do is we're going to import from Josie. We're going to import JWT error, and JWT. Now,",
    "textdich": ""
  },
  {
    "start": 25299.76,
    "end": 25304.08,
    "text": "there's going to be three things, three pieces of information for our token. Well, actually,",
    "textdich": ""
  },
  {
    "start": 25304.72,
    "end": 25309.6,
    "text": "well, there's three pieces of information. But there's three other things about the token that",
    "textdich": ""
  },
  {
    "start": 25309.6,
    "end": 25313.68,
    "text": "we need to provide. So we're going to say, we're going to need the secret key, right? That's that",
    "textdich": ""
  },
  {
    "start": 25313.68,
    "end": 25319.76,
    "text": "special key that I mentioned that ultimately handles verifying the data integrity of our token,",
    "textdich": ""
  },
  {
    "start": 25319.76,
    "end": 25324.72,
    "text": "which resides on our server only. So we're gonna have to provide that secret key. We're also going",
    "textdich": ""
  },
  {
    "start": 25324.72,
    "end": 25331.2,
    "text": "to need to provide the algorithm that we want to use. We're going to be using HS 256. And then",
    "textdich": ""
  },
  {
    "start": 25331.2,
    "end": 25338.08,
    "text": "we're going to need to provide one other thing, which is the expiration time of the token. So we",
    "textdich": ""
  },
  {
    "start": 25338.08,
    "end": 25342.88,
    "text": "haven't really discussed the expiration time, if we just give a plain token, without an expiration",
    "textdich": ""
  },
  {
    "start": 25342.88,
    "end": 25346.64,
    "text": "date, that means that users logged in forever. And there's no application that just lets a user",
    "textdich": ""
  },
  {
    "start": 25346.64,
    "end": 25352.72,
    "text": "log in forever, I don't think. So we're going to provide a expiration time so that we can dictate",
    "textdich": ""
  },
  {
    "start": 25352.72,
    "end": 25358.0,
    "text": "exactly how long a user should be logged in after they actually perform a login operation. And so",
    "textdich": ""
  },
  {
    "start": 25358.0,
    "end": 25365.2,
    "text": "we need an expiration time. And what I'm going to do is I'm going to just save these as variables,",
    "textdich": ""
  },
  {
    "start": 25365.2,
    "end": 25374.88,
    "text": "I'm going to say secret key equals and then this is just going to be some arbitrary long text. I'm",
    "textdich": ""
  },
  {
    "start": 25374.88,
    "end": 25378.8,
    "text": "just going to paste that in here. And if you're just wondering why, I mean, this, if you just",
    "textdich": ""
  },
  {
    "start": 25378.8,
    "end": 25384.0,
    "text": "follow the documentation, actually, you'll see that they do the same thing. So we just need to",
    "textdich": ""
  },
  {
    "start": 25384.0,
    "end": 25390.08,
    "text": "give it some really long text in this case. And it even gives you a command to kind of get a string",
    "textdich": ""
  },
  {
    "start": 25390.08,
    "end": 25395.84,
    "text": "like that for your password. Because you you could theoretically just put, you know, hello,",
    "textdich": ""
  },
  {
    "start": 25395.84,
    "end": 25400.64,
    "text": "or something here. And that's going to work just fine. However, it's not quite as secure. But for",
    "textdich": ""
  },
  {
    "start": 25400.64,
    "end": 25404.88,
    "text": "learning purposes, it doesn't matter, just provide some kind of string, right? And then the algorithm",
    "textdich": ""
  },
  {
    "start": 25404.88,
    "end": 25407.92,
    "text": "is going to look like this. And then the expiration time is going to look like this. So I'm just going",
    "textdich": ""
  },
  {
    "start": 25407.92,
    "end": 25415.52,
    "text": "to copy this from the documentation. And then we're going to define our function. So this is going to",
    "textdich": ""
  },
  {
    "start": 25415.52,
    "end": 25423.84,
    "text": "be create access token. And what we're going to do is remember, the access token is going to have a",
    "textdich": ""
  },
  {
    "start": 25423.84,
    "end": 25428.16,
    "text": "payload. So whatever data we want to encode into the token, we have to provide that. So I'm going",
    "textdich": ""
  },
  {
    "start": 25428.16,
    "end": 25434.32,
    "text": "to pass that in as a variable called data. And this is going to be of type dict. And what we're",
    "textdich": ""
  },
  {
    "start": 25434.32,
    "end": 25437.2,
    "text": "going to do is we're actually going to make a copy of this data, because I don't want to actually",
    "textdich": ""
  },
  {
    "start": 25437.2,
    "end": 25441.68,
    "text": "change it. I want to make a copy of it, because we're gonna, we're going to manipulate a few things.",
    "textdich": ""
  },
  {
    "start": 25441.68,
    "end": 25446.64,
    "text": "And I don't want to accidentally change the original data. So we're going to say data dot",
    "textdich": ""
  },
  {
    "start": 25446.64,
    "end": 25450.0,
    "text": "copy. So this is going to make a copy and I'm going to store it in a new variable",
    "textdich": ""
  },
  {
    "start": 25452.0,
    "end": 25455.28,
    "text": "is going to be to underscore code. So this is all the data that we're going to",
    "textdich": ""
  },
  {
    "start": 25456.0,
    "end": 25464.32,
    "text": "encode into our JWT token. And then now we're going to create the expiration field. So to",
    "textdich": ""
  },
  {
    "start": 25464.32,
    "end": 25468.08,
    "text": "actually do that, there's a couple of things. First of all, right now we have it set to 30 minutes.",
    "textdich": ""
  },
  {
    "start": 25468.08,
    "end": 25476.96,
    "text": "And so what we need to do is to provide the time of 30 minutes from now, right. So we have to provide",
    "textdich": ""
  },
  {
    "start": 25476.96,
    "end": 25481.12,
    "text": "the time that it's going to expire in. So we have to grab the current time and then add 30 minutes.",
    "textdich": ""
  },
  {
    "start": 25482.32,
    "end": 25486.08,
    "text": "And so anytime you're working with dates and times, we have to import the date time library.",
    "textdich": ""
  },
  {
    "start": 25486.08,
    "end": 25500.64,
    "text": "We'll say date time, import date, time and time delta. And I'm going to say expire equals",
    "textdich": ""
  },
  {
    "start": 25502.24,
    "end": 25508.08,
    "text": "date time dot now. So this is going to grab the current time. And I'm going to pass in time delta",
    "textdich": ""
  },
  {
    "start": 25508.08,
    "end": 25523.44,
    "text": "of and then since this is in minutes, I would say minutes equals access token expire minutes.",
    "textdich": ""
  },
  {
    "start": 25525.28,
    "end": 25528.24,
    "text": "And then what we want to do is we want to grab the to encode,",
    "textdich": ""
  },
  {
    "start": 25528.24,
    "end": 25531.28,
    "text": "which is a copy of a dictionary. So this is also a dictionary.",
    "textdich": ""
  },
  {
    "start": 25531.28,
    "end": 25538.48,
    "text": "And I want to update it. And here, we're going to pass in",
    "textdich": ""
  },
  {
    "start": 25540.24,
    "end": 25545.12,
    "text": "expiration. And then we're going to provide the expire time. So we're just adding that extra",
    "textdich": ""
  },
  {
    "start": 25545.12,
    "end": 25553.04,
    "text": "property into the into all of that data that we want to encode into our JWT. And so now our JWT",
    "textdich": ""
  },
  {
    "start": 25553.04,
    "end": 25559.12,
    "text": "will tell us when it's going to expire. And what we're going to do is we're going to call JWT",
    "textdich": ""
  },
  {
    "start": 25559.12,
    "end": 25566.4,
    "text": "coming from the is it Jose, I guess it's at the Jose library. So JWT dot encode that this method",
    "textdich": ""
  },
  {
    "start": 25566.4,
    "end": 25572.4,
    "text": "is actually going to create the JWT token. And we'll say the first property is everything that",
    "textdich": ""
  },
  {
    "start": 25572.4,
    "end": 25579.04,
    "text": "we want to put into the payload. The second one is going to be the secret key at the signature.",
    "textdich": ""
  },
  {
    "start": 25579.04,
    "end": 25588.72,
    "text": "And then we have to specify the algorithm. The algorithm equals algorithm algorithm right there.",
    "textdich": ""
  },
  {
    "start": 25590.32,
    "end": 25594.48,
    "text": "And at this point, we're just going to return all we have to save this in a variable.",
    "textdich": ""
  },
  {
    "start": 25594.48,
    "end": 25609.84,
    "text": "And here, we just do a coded JWT. And then now we can go back to our specific path operation.",
    "textdich": ""
  },
  {
    "start": 25614.4,
    "end": 25617.36,
    "text": "And since we're already importing, actually, we have to also import",
    "textdich": ""
  },
  {
    "start": 25617.36,
    "end": 25628.16,
    "text": "OAuth two. And then here, we're going to create an access token. And we're going to call the",
    "textdich": ""
  },
  {
    "start": 25628.16,
    "end": 25638.88,
    "text": "sorry, not utils OAuth two dot create access token. I'm going to say the data equals and then we're",
    "textdich": ""
  },
  {
    "start": 25638.88,
    "end": 25649.84,
    "text": "going to pass in a dictionary. So here, the user ID. Remember, this is the data that we want to",
    "textdich": ""
  },
  {
    "start": 25649.84,
    "end": 25654.96,
    "text": "put in the payload. So I have decided that I'm going to put in the user ID. And pretty much",
    "textdich": ""
  },
  {
    "start": 25654.96,
    "end": 25658.0,
    "text": "nothing else. I don't really care about anything else. We could give it a role. We can do something",
    "textdich": ""
  },
  {
    "start": 25658.0,
    "end": 25661.84,
    "text": "else. But for me, I just want to encode the user ID. So that's what I'm passing in here.",
    "textdich": ""
  },
  {
    "start": 25661.84,
    "end": 25665.92,
    "text": "However, if you wanted to provide some extra information about the user, if you wanted to",
    "textdich": ""
  },
  {
    "start": 25665.92,
    "end": 25671.36,
    "text": "provide, you know, the scope of different endpoints, they can access, you can put all of that",
    "textdich": ""
  },
  {
    "start": 25671.36,
    "end": 25677.28,
    "text": "information in here. And so I'm gonna say the user ID is going to be set to user dot ID. And so now",
    "textdich": ""
  },
  {
    "start": 25677.28,
    "end": 25680.56,
    "text": "what we can do is we're going to return a few things. I'm gonna say we're going to return the",
    "textdich": ""
  },
  {
    "start": 25680.56,
    "end": 25687.28,
    "text": "access token, which equals access token. And then we're going to tell the user what kind of token",
    "textdich": ""
  },
  {
    "start": 25687.28,
    "end": 25692.96,
    "text": "this is. So this is token underscore type. And this is what's referred to as a bearer token. And",
    "textdich": ""
  },
  {
    "start": 25692.96,
    "end": 25698.32,
    "text": "I'll explain how to actually configure that on the front end. But literally in the authorization",
    "textdich": ""
  },
  {
    "start": 25698.32,
    "end": 25702.08,
    "text": "header, we just write the word bearer, and then we provide the token. So nothing special there.",
    "textdich": ""
  },
  {
    "start": 25702.72,
    "end": 25706.88,
    "text": "All right, let's try that out. And it looks like I got an error. I don't know why I put an equal",
    "textdich": ""
  },
  {
    "start": 25706.88,
    "end": 25714.24,
    "text": "sign there. And let's try this out. So we've got we've got the login endpoint, let's put in the",
    "textdich": ""
  },
  {
    "start": 25714.24,
    "end": 25720.16,
    "text": "correct email this time. And let's see what happens. Look at that, we got an access token.",
    "textdich": ""
  },
  {
    "start": 25720.16,
    "end": 25724.8,
    "text": "And this kind of looks like a JWT token, right? It just looks like a bunch of random text. And",
    "textdich": ""
  },
  {
    "start": 25724.8,
    "end": 25730.48,
    "text": "then it tells us it's a bearer token. So let's actually copy this. And what I want you guys to",
    "textdich": ""
  },
  {
    "start": 25730.48,
    "end": 25738.56,
    "text": "do is go to your web browser. And I want you to search for JWT. And then go to the first one,",
    "textdich": ""
  },
  {
    "start": 25738.56,
    "end": 25744.72,
    "text": "go to JWT.io. And then here, what we can do is we can paste in our JWT token. And what's really",
    "textdich": ""
  },
  {
    "start": 25744.72,
    "end": 25749.04,
    "text": "cool is it's going to decode the token for us. And so you can see this is the algorithm we used,",
    "textdich": ""
  },
  {
    "start": 25749.04,
    "end": 25755.84,
    "text": "it is a JWT token. But take a look at the user ID. Right, this is the actual user ID that we passed",
    "textdich": ""
  },
  {
    "start": 25755.84,
    "end": 25759.84,
    "text": "into the token. So all of the data that we encrypted into the token are all sitting right",
    "textdich": ""
  },
  {
    "start": 25759.84,
    "end": 25764.32,
    "text": "here. So we also got the expiration time. And then the signature somewhere in here as well.",
    "textdich": ""
  },
  {
    "start": 25765.44,
    "end": 25769.28,
    "text": "But isn't that pretty cool, right? It was able to decode that. And it's important to understand",
    "textdich": ""
  },
  {
    "start": 25769.28,
    "end": 25775.12,
    "text": "that, you know, none of this is encrypted, anybody can see this information. But by being able to",
    "textdich": ""
  },
  {
    "start": 25775.12,
    "end": 25779.6,
    "text": "sign it, we know that no one can kind of mess with it. And we can also specify an expiration time.",
    "textdich": ""
  },
  {
    "start": 25779.6,
    "end": 25784.96,
    "text": "So we know that how long this token is valid. So when the our API gets it, it's going to just",
    "textdich": ""
  },
  {
    "start": 25784.96,
    "end": 25789.84,
    "text": "verify that nobody touched the token, it's going to verify that, hey, the expiration time, you know,",
    "textdich": ""
  },
  {
    "start": 25789.84,
    "end": 25794.24,
    "text": "isn't before the current time, which would mean that it's already expired. At that point, it",
    "textdich": ""
  },
  {
    "start": 25794.24,
    "end": 25799.44,
    "text": "already knows the tokens valid. And then we can assume that everything is good to go. We're going",
    "textdich": ""
  },
  {
    "start": 25799.44,
    "end": 25805.2,
    "text": "to make one small change when it comes to retrieving the user's credentials in our login",
    "textdich": ""
  },
  {
    "start": 25805.2,
    "end": 25809.44,
    "text": "route, instead of passing it in the body, we're going to use a built in utility in the fast API",
    "textdich": ""
  },
  {
    "start": 25809.44,
    "end": 25818.8,
    "text": "library. So if we do from fast API dot security dot oh, whoops, OAuth two, we're going to import",
    "textdich": ""
  },
  {
    "start": 25818.8,
    "end": 25828.4,
    "text": "something called OAuth to password request form. And so what we can actually do is instead of just",
    "textdich": ""
  },
  {
    "start": 25828.4,
    "end": 25833.52,
    "text": "doing the the usual here with the user credentials, we're actually going to delete that. And I'm going",
    "textdich": ""
  },
  {
    "start": 25833.52,
    "end": 25837.76,
    "text": "to provide a dependency. Well, actually, I need the user credentials because we have to store it",
    "textdich": ""
  },
  {
    "start": 25837.76,
    "end": 25844.96,
    "text": "someplace. But here we say, this equals OAuth to password request form equals depends. So we're",
    "textdich": ""
  },
  {
    "start": 25844.96,
    "end": 25849.44,
    "text": "setting up a dependency kind of like we do with the database. And so this is going to require us to",
    "textdich": ""
  },
  {
    "start": 25849.44,
    "end": 25854.4,
    "text": "retrieve the credentials. And then fast API is automatically going to store it in side this",
    "textdich": ""
  },
  {
    "start": 25854.4,
    "end": 25861.2,
    "text": "variable called user credentials. However, we have to make one small change. So the username in when",
    "textdich": ""
  },
  {
    "start": 25861.2,
    "end": 25866.32,
    "text": "you retrieve the the user's attempted credentials from here, what it's going to do is it's going to",
    "textdich": ""
  },
  {
    "start": 25866.32,
    "end": 25870.96,
    "text": "store it in a field not called email, but it's going to store it in a field called username.",
    "textdich": ""
  },
  {
    "start": 25870.96,
    "end": 25874.96,
    "text": "So when we compare the models dot user at email, when we're querying the database,",
    "textdich": ""
  },
  {
    "start": 25874.96,
    "end": 25879.12,
    "text": "we can't compare to user underscore credentials that email because there's no field called that",
    "textdich": ""
  },
  {
    "start": 25879.12,
    "end": 25884.88,
    "text": "email, right, it's going to only return two things, it's going to return. Oops, it's going",
    "textdich": ""
  },
  {
    "start": 25884.88,
    "end": 25889.84,
    "text": "to return something, it's going to return our username, which equals whatever, and then it's",
    "textdich": ""
  },
  {
    "start": 25889.84,
    "end": 25898.48,
    "text": "going to return our password, which equals whatever. And so we don't have access to email,",
    "textdich": ""
  },
  {
    "start": 25898.48,
    "end": 25903.04,
    "text": "we have to use user dot user underscore credentials dot username, because,",
    "textdich": ""
  },
  {
    "start": 25903.76,
    "end": 25906.96,
    "text": "well, this is actually a bad example, because you have to think of it as like a dictionary,",
    "textdich": ""
  },
  {
    "start": 25906.96,
    "end": 25911.12,
    "text": "right, it's coming in, like this, and then there's going to be a, a user field.",
    "textdich": ""
  },
  {
    "start": 25912.48,
    "end": 25917.12,
    "text": "You're gonna have username, or why is that capitalized username, which equals",
    "textdich": ""
  },
  {
    "start": 25918.08,
    "end": 25924.24,
    "text": "well, you're going to have username, which equals, you know, blah, and then you're going to have",
    "textdich": ""
  },
  {
    "start": 25926.56,
    "end": 25931.76,
    "text": "password, which equals blah, right. And so we'll just tag user credentials dot and then we'll",
    "textdich": ""
  },
  {
    "start": 25931.76,
    "end": 25937.28,
    "text": "grab the username, which in our case will happen to be the email, the OAuth to password request",
    "textdich": ""
  },
  {
    "start": 25937.28,
    "end": 25942.56,
    "text": "form doesn't really care what, what the username is, it could be a username, it can be a email,",
    "textdich": ""
  },
  {
    "start": 25942.56,
    "end": 25946.0,
    "text": "it can be an ID, it doesn't really matter, it doesn't really care, it's just whatever the",
    "textdich": ""
  },
  {
    "start": 25946.0,
    "end": 25951.12,
    "text": "user actually sends, it's just going to store it in a field called username. So those are all of",
    "textdich": ""
  },
  {
    "start": 25951.12,
    "end": 25958.0,
    "text": "the changes that we have to make from our back end side. Now, when it comes to testing things,",
    "textdich": ""
  },
  {
    "start": 25958.0,
    "end": 25962.48,
    "text": "we no longer send the credentials in the body, like we normally do. Like if I try to send this",
    "textdich": ""
  },
  {
    "start": 25962.48,
    "end": 25969.28,
    "text": "now, we're going to get an error, right, because it says, username is field required value error",
    "textdich": ""
  },
  {
    "start": 25969.28,
    "end": 25974.16,
    "text": "missing. So what we and the password is also missing. So what it's doing is it no longer expects",
    "textdich": ""
  },
  {
    "start": 25974.16,
    "end": 25981.68,
    "text": "it here. Instead, it expects it inside form data. So here, I'm going to say username. And this is",
    "textdich": ""
  },
  {
    "start": 25981.68,
    "end": 25994.16,
    "text": "going to be my email in this case. And then my password here. And so let's try this now. And now",
    "textdich": ""
  },
  {
    "start": 25994.16,
    "end": 25998.56,
    "text": "it successfully works. So those were the couple of changes that we have to make. But you'll see that",
    "textdich": ""
  },
  {
    "start": 25998.56,
    "end": 26002.56,
    "text": "it makes life a little bit easier by setting up that dependency and using the built in functionality",
    "textdich": ""
  },
  {
    "start": 26002.56,
    "end": 26008.4,
    "text": "of fast API. In the last lesson, we learned how to log in a user by sending a request to the login",
    "textdich": ""
  },
  {
    "start": 26008.4,
    "end": 26013.04,
    "text": "endpoint and providing the username and password. And our API will then return an access token,",
    "textdich": ""
  },
  {
    "start": 26013.04,
    "end": 26020.08,
    "text": "which the user can then use to retrieve data from our API. So anytime he needs to access a endpoint",
    "textdich": ""
  },
  {
    "start": 26020.08,
    "end": 26025.28,
    "text": "or path operation that requires a user to be login, he'll just send this JWT token in the",
    "textdich": ""
  },
  {
    "start": 26025.28,
    "end": 26031.36,
    "text": "payload. And then our API has to actually validate the token. So in this video, we're going to handle",
    "textdich": ""
  },
  {
    "start": 26031.36,
    "end": 26036.72,
    "text": "the logic for verifying that the token is still valid, and that they didn't tamper with it, as",
    "textdich": ""
  },
  {
    "start": 26036.72,
    "end": 26043.6,
    "text": "well as verifying that the token hasn't expired. Now, before we do anything, what we're actually",
    "textdich": ""
  },
  {
    "start": 26043.6,
    "end": 26050.16,
    "text": "going to do is we're going to define a schema for the token. Because we know that the user has to",
    "textdich": ""
  },
  {
    "start": 26050.16,
    "end": 26055.68,
    "text": "provide the access token. So just like any other piece of data, if we expect them to send something,",
    "textdich": ""
  },
  {
    "start": 26055.68,
    "end": 26060.16,
    "text": "it's best to set up a schema. So we're just going to set up a schema for access token and token type",
    "textdich": ""
  },
  {
    "start": 26060.16,
    "end": 26069.36,
    "text": "and just make sure that they match accordingly. And so here we're going to do class token. And",
    "textdich": ""
  },
  {
    "start": 26069.36,
    "end": 26079.28,
    "text": "we'll say the access token is going to be of type string. And the token underscore type is going to",
    "textdich": ""
  },
  {
    "start": 26079.28,
    "end": 26087.44,
    "text": "be of type string as well. And then we can also set up a a schema for the token data so that the",
    "textdich": ""
  },
  {
    "start": 26087.44,
    "end": 26098.16,
    "text": "data that we embedded into our access token, so we can say token data base model. And then here,",
    "textdich": ""
  },
  {
    "start": 26098.16,
    "end": 26108.56,
    "text": "we did embed the ID. But I'm going to say this is optional for now. And it's gonna be a type of",
    "textdich": ""
  },
  {
    "start": 26108.56,
    "end": 26115.44,
    "text": "string if it is set. So it can be optional. And we got to import optional as well. And so that's",
    "textdich": ""
  },
  {
    "start": 26115.44,
    "end": 26125.28,
    "text": "going to come from the typing library. And then in our OAuth two file, we created an access token",
    "textdich": ""
  },
  {
    "start": 26125.28,
    "end": 26129.68,
    "text": "function. And then we have to create a function to verify the access token. So let's create the",
    "textdich": ""
  },
  {
    "start": 26129.68,
    "end": 26136.16,
    "text": "function and it's going to just be called verify access token. And what we're going to do is we're",
    "textdich": ""
  },
  {
    "start": 26136.16,
    "end": 26143.68,
    "text": "going to pass in a token, which is going to be a string. And we're also going to pass in the",
    "textdich": ""
  },
  {
    "start": 26143.68,
    "end": 26149.68,
    "text": "specific credential exception. So we're going to pass in what our exception should be if the",
    "textdich": ""
  },
  {
    "start": 26149.68,
    "end": 26153.6,
    "text": "credentials don't match, or if there's some issue with the token. So we'll just store this in a",
    "textdich": ""
  },
  {
    "start": 26153.6,
    "end": 26161.36,
    "text": "variable called credentials underscore exception. And I'll explain this a little bit later. And so",
    "textdich": ""
  },
  {
    "start": 26161.36,
    "end": 26167.84,
    "text": "here, I'm going to say, JWT, right, so we're going to access the JWT library, and we'll say JWT dot.",
    "textdich": ""
  },
  {
    "start": 26168.56,
    "end": 26171.92,
    "text": "And it's going to have a function. And if you take a look at our options, I'm sure you have an idea",
    "textdich": ""
  },
  {
    "start": 26171.92,
    "end": 26179.2,
    "text": "because creating a token we did, I encode dot encode, I'm guessing you can figure out what is",
    "textdich": ""
  },
  {
    "start": 26180.24,
    "end": 26183.52,
    "text": "the specific method for decoding, it's going to be decode, obviously.",
    "textdich": ""
  },
  {
    "start": 26185.68,
    "end": 26188.0,
    "text": "And here, we're going to pass in a couple things. First of all, the token,",
    "textdich": ""
  },
  {
    "start": 26189.2,
    "end": 26193.12,
    "text": "then we have to pass in the secret key, so that we can decode it.",
    "textdich": ""
  },
  {
    "start": 26193.12,
    "end": 26202.96,
    "text": "And then we have to pass in the algorithm that's used that we can just pass an algorithm. Once",
    "textdich": ""
  },
  {
    "start": 26202.96,
    "end": 26207.6,
    "text": "again, these both of these are coming from these variables right here. Not it's obviously not a",
    "textdich": ""
  },
  {
    "start": 26207.6,
    "end": 26214.16,
    "text": "good idea to store the secret key within your actual code. But like I said, we're going to have",
    "textdich": ""
  },
  {
    "start": 26214.16,
    "end": 26218.24,
    "text": "a later section where we'll turn these into environment variables so that it's not hard",
    "textdich": ""
  },
  {
    "start": 26218.24,
    "end": 26224.64,
    "text": "coded into our code. And we're going to store this in payload in a variable called payload.",
    "textdich": ""
  },
  {
    "start": 26225.2,
    "end": 26229.76,
    "text": "Alright, and so this will just store all of our payload data. And to extract the data, what we",
    "textdich": ""
  },
  {
    "start": 26229.76,
    "end": 26236.0,
    "text": "can do is we can say payload dot get, and then we have to get the specific field that we put in.",
    "textdich": ""
  },
  {
    "start": 26236.0,
    "end": 26242.0,
    "text": "So if I go back to my auth.py file in my routers, and you take a look at my data, you can see that",
    "textdich": ""
  },
  {
    "start": 26242.0,
    "end": 26246.8,
    "text": "we have a field called user underscore ID. And that's going to get the ID of the user. So here,",
    "textdich": ""
  },
  {
    "start": 26246.8,
    "end": 26254.88,
    "text": "we just say, get. And then we just pass in that same exact name users underscore ID. And we'll",
    "textdich": ""
  },
  {
    "start": 26254.88,
    "end": 26259.28,
    "text": "say that this is going to be stored in a variable called ID. And this should be of type string.",
    "textdich": ""
  },
  {
    "start": 26260.32,
    "end": 26269.84,
    "text": "And if there's no ID, then we're going to raise a credentials exception. Right? So whatever",
    "textdich": ""
  },
  {
    "start": 26269.84,
    "end": 26274.48,
    "text": "exception we provided into this function, it's going to raise that. And then we're going to say,",
    "textdich": ""
  },
  {
    "start": 26274.48,
    "end": 26288.08,
    "text": "token underscore data equals schemas dot token data with the ID equals the ID that we extracted",
    "textdich": ""
  },
  {
    "start": 26288.08,
    "end": 26294.88,
    "text": "out of here. And I see that we didn't import schema. So I'll import that real quick. So we'll",
    "textdich": ""
  },
  {
    "start": 26294.88,
    "end": 26305.44,
    "text": "say from dot import schemas. And so all this is going to do is is just going to validate, you know,",
    "textdich": ""
  },
  {
    "start": 26305.44,
    "end": 26310.32,
    "text": "that it matches our specific token schema. Now, if you look at our schema, right, it's literally",
    "textdich": ""
  },
  {
    "start": 26310.32,
    "end": 26315.28,
    "text": "one thing. So it's not super exciting. And I made it optional. So we shouldn't actually make it",
    "textdich": ""
  },
  {
    "start": 26315.28,
    "end": 26319.44,
    "text": "optional. But we'll come back to fixing this in a bit. But this is just going to ensure that all",
    "textdich": ""
  },
  {
    "start": 26319.44,
    "end": 26324.8,
    "text": "the data we pass in the token is actually there. And so that's why I'm using a schema for that.",
    "textdich": ""
  },
  {
    "start": 26324.8,
    "end": 26328.24,
    "text": "However, for one actual variable, you don't actually need to do that, especially since we're",
    "textdich": ""
  },
  {
    "start": 26328.24,
    "end": 26333.2,
    "text": "checking to see if it exists right here. But it's good to always make sure so in the future,",
    "textdich": ""
  },
  {
    "start": 26333.2,
    "end": 26339.52,
    "text": "if we do add extra fields, we can also validate the schema here. Now, we're almost done with this",
    "textdich": ""
  },
  {
    "start": 26339.52,
    "end": 26344.8,
    "text": "function. However, there's one little issue, because we can run into an error in any one of",
    "textdich": ""
  },
  {
    "start": 26344.8,
    "end": 26349.44,
    "text": "these lines. And so anytime you're working with code that can error out, you want to do a try",
    "textdich": ""
  },
  {
    "start": 26349.44,
    "end": 26369.44,
    "text": "accept block. So we'll do try. And I'm going to indent these. And then here, we'll say accept.",
    "textdich": ""
  },
  {
    "start": 26369.44,
    "end": 26379.36,
    "text": "And then we're going to pass JWT error. And this should not be capitalized. And remember,",
    "textdich": ""
  },
  {
    "start": 26379.36,
    "end": 26388.32,
    "text": "this is coming from the Jose library. And once again, we're just going to raise a credentials",
    "textdich": ""
  },
  {
    "start": 26388.32,
    "end": 26395.84,
    "text": "exception, if there's any kind of error that we didn't account for. And the next thing that we",
    "textdich": ""
  },
  {
    "start": 26395.84,
    "end": 26402.4,
    "text": "have to do is define one last function. And this is going to be called get current user. So what",
    "textdich": ""
  },
  {
    "start": 26402.4,
    "end": 26407.28,
    "text": "this is going to do is, and so what this is ultimately going to do is that we can pass this",
    "textdich": ""
  },
  {
    "start": 26407.28,
    "end": 26411.6,
    "text": "as a dependency into any one of our path operations. And when we do that, what it's going to do is",
    "textdich": ""
  },
  {
    "start": 26411.6,
    "end": 26417.36,
    "text": "it's going to take the token from the request automatically extract the ID for us, it's going",
    "textdich": ""
  },
  {
    "start": 26417.36,
    "end": 26422.08,
    "text": "to well, it's going to verify that the token is correct by calling the verify access token.",
    "textdich": ""
  },
  {
    "start": 26422.08,
    "end": 26425.68,
    "text": "And then it's going to extract the ID. And then if we want to, we can have it automatically fetch",
    "textdich": ""
  },
  {
    "start": 26425.68,
    "end": 26433.28,
    "text": "the user from the database and then add it into as a parameter into our path operation function.",
    "textdich": ""
  },
  {
    "start": 26433.28,
    "end": 26439.68,
    "text": "So here, all we're going to do is we're going to pass the token. And so this is going to be a type",
    "textdich": ""
  },
  {
    "start": 26439.68,
    "end": 26446.48,
    "text": "string. And then here, we just say depends, which has to be imported from the fast API library.",
    "textdich": ""
  },
  {
    "start": 26446.48,
    "end": 26456.08,
    "text": "So we'll say from fast API import, we're going to import depends status and HTTP exception.",
    "textdich": ""
  },
  {
    "start": 26458.72,
    "end": 26464.96,
    "text": "So here, we'll say depends, and then we'll pass in a OAuth two schema, or OAuth two scheme.",
    "textdich": ""
  },
  {
    "start": 26464.96,
    "end": 26470.24,
    "text": "So what we have to do here is it's gonna be a little confusing. I'll say, OAuth two underscore",
    "textdich": ""
  },
  {
    "start": 26470.24,
    "end": 26476.4,
    "text": "scheme. And this is going to be equal to and we have to import one more thing. So we'll say,",
    "textdich": ""
  },
  {
    "start": 26477.44,
    "end": 26494.4,
    "text": "from fast API dot security, import OAuth two password bearer. And then here, we just reference",
    "textdich": ""
  },
  {
    "start": 26494.4,
    "end": 26501.44,
    "text": "OAuth two password bearer. And what we have to do is we have to provide one field called token URL.",
    "textdich": ""
  },
  {
    "start": 26501.44,
    "end": 26507.2,
    "text": "And so this is going to be the the endpoint of our basically our login endpoint. And so if you go",
    "textdich": ""
  },
  {
    "start": 26507.2,
    "end": 26512.0,
    "text": "to your auth.py, you just grabbed whatever name this is, keep in mind, you don't have to name it",
    "textdich": ""
  },
  {
    "start": 26512.0,
    "end": 26519.12,
    "text": "login, but you just have to pass this into here. Actually, sorry, you remove the slash, so it's",
    "textdich": ""
  },
  {
    "start": 26519.12,
    "end": 26526.48,
    "text": "just login. And then we're going to grab this variable, and I'm just going to pass it into here.",
    "textdich": ""
  },
  {
    "start": 26528.48,
    "end": 26530.4,
    "text": "And this is kind of just tying everything together.",
    "textdich": ""
  },
  {
    "start": 26533.92,
    "end": 26537.84,
    "text": "And then we have to define our credentials exception that we're going to pass into the",
    "textdich": ""
  },
  {
    "start": 26537.84,
    "end": 26543.28,
    "text": "verify access token function. So when the credentials wrong, or there's some kind of",
    "textdich": ""
  },
  {
    "start": 26543.28,
    "end": 26547.68,
    "text": "issue with the JWT token, what exception should we raise? So here, I'm just going to say HTTP",
    "textdich": ""
  },
  {
    "start": 26547.68,
    "end": 26561.76,
    "text": "exception. And we'll set the status code to be a 401. So unauthorized detail here, I'm going to",
    "textdich": ""
  },
  {
    "start": 26561.76,
    "end": 26570.24,
    "text": "pass a string once again, could not validate credentials. And then we have to set some",
    "textdich": ""
  },
  {
    "start": 26570.24,
    "end": 26586.72,
    "text": "headers as well. And so just go ahead and just copy this in. And then finally, we're going to",
    "textdich": ""
  },
  {
    "start": 26586.72,
    "end": 26596.88,
    "text": "return a call to our verify access token function. And since we have the token passing to the get",
    "textdich": ""
  },
  {
    "start": 26596.88,
    "end": 26603.28,
    "text": "a current user, we can pass it into our verify access token. And then we also can provide the",
    "textdich": ""
  },
  {
    "start": 26603.28,
    "end": 26614.16,
    "text": "credentials. All right, so just to quickly recap, because I know we did a lot, and I think some of",
    "textdich": ""
  },
  {
    "start": 26614.16,
    "end": 26620.32,
    "text": "it may be confusing. But what's going to happen is anytime we have a specific endpoint that should be",
    "textdich": ""
  },
  {
    "start": 26620.32,
    "end": 26624.56,
    "text": "protected, and what that means is that the user needs to be logged in to use it. What we're going",
    "textdich": ""
  },
  {
    "start": 26624.56,
    "end": 26630.48,
    "text": "to do is I'm going to, well, as an example, let's say that users who want to be able to create a",
    "textdich": ""
  },
  {
    "start": 26630.48,
    "end": 26635.44,
    "text": "post, they need to be logged in, what we can do is we can just add in an extra dependency into the",
    "textdich": ""
  },
  {
    "start": 26635.44,
    "end": 26642.08,
    "text": "path operation function. So I can say, here, I would just say get current underscore user,",
    "textdich": ""
  },
  {
    "start": 26643.68,
    "end": 26650.32,
    "text": "which would return an int. And then we'll say this equals and then we pass in a dependency. So we'll",
    "textdich": ""
  },
  {
    "start": 26650.32,
    "end": 26657.28,
    "text": "say depends on a lot to get underscore current user. So this is going to add a dependency,",
    "textdich": ""
  },
  {
    "start": 26657.28,
    "end": 26661.52,
    "text": "which is going to be that function that we created called get current user. So anytime anyone wants",
    "textdich": ""
  },
  {
    "start": 26661.52,
    "end": 26666.64,
    "text": "to access a resource that requires them to be logged in, we're going to expect that they provide",
    "textdich": ""
  },
  {
    "start": 26666.64,
    "end": 26671.68,
    "text": "an access token. And then we provide this dependency, which is going to call this function",
    "textdich": ""
  },
  {
    "start": 26671.68,
    "end": 26676.96,
    "text": "get current, sorry, where is it get current user, and then we pass in the token that comes from the",
    "textdich": ""
  },
  {
    "start": 26676.96,
    "end": 26682.8,
    "text": "request, we're going to then run this verify access token, in this case, and then it's going to",
    "textdich": ""
  },
  {
    "start": 26683.52,
    "end": 26689.12,
    "text": "provide all of the logic for verifying that the token is okay, and that there's no errors. And",
    "textdich": ""
  },
  {
    "start": 26689.12,
    "end": 26696.56,
    "text": "if there's no errors, then we go ahead and return nothing essentially. And that means that they were",
    "textdich": ""
  },
  {
    "start": 26696.56,
    "end": 26702.48,
    "text": "successfully able to be authenticated, if we do return some kind of error, with the credentials",
    "textdich": ""
  },
  {
    "start": 26702.48,
    "end": 26707.36,
    "text": "exception, then they're going to get that appropriate 401 response back. So that's how our",
    "textdich": ""
  },
  {
    "start": 26707.36,
    "end": 26712.16,
    "text": "login works. It's nothing special. But there are a couple of different components that are involved.",
    "textdich": ""
  },
  {
    "start": 26712.16,
    "end": 26718.4,
    "text": "And in the next lecture, we'll start to take a look at starting to protect our specific endpoints",
    "textdich": ""
  },
  {
    "start": 26718.4,
    "end": 26722.8,
    "text": "so that it forces users to be logged in to actually perform that operation. And guys,",
    "textdich": ""
  },
  {
    "start": 26722.8,
    "end": 26729.12,
    "text": "I made one little mistake. In the verify access token function, I forgot to return something.",
    "textdich": ""
  },
  {
    "start": 26729.12,
    "end": 26734.4,
    "text": "And so if you ran into any issues, it's because of this. So what we're going to do is here is we're",
    "textdich": ""
  },
  {
    "start": 26734.4,
    "end": 26740.72,
    "text": "just going to do return token underscore data. And so what's really happening here is once again,",
    "textdich": ""
  },
  {
    "start": 26740.72,
    "end": 26746.08,
    "text": "we're going to decode the JWT, we're going to extract the ID, if there's no ID, then we're",
    "textdich": ""
  },
  {
    "start": 26746.08,
    "end": 26751.04,
    "text": "going to throw an error. And then we're going to validate with a schema, the actual token data,",
    "textdich": ""
  },
  {
    "start": 26751.04,
    "end": 26755.68,
    "text": "which in this case is just an ID. So that's the only field. But if you had extra properties or",
    "textdich": ""
  },
  {
    "start": 26755.68,
    "end": 26760.48,
    "text": "extra information, you can pass that in. And then we want to make sure we return the token data so",
    "textdich": ""
  },
  {
    "start": 26760.48,
    "end": 26764.96,
    "text": "that we can actually make use of that data. And keep in mind, remember, the get current user is",
    "textdich": ""
  },
  {
    "start": 26764.96,
    "end": 26769.68,
    "text": "what actually calls the verify access token. So when it calls verify access token, it expects us",
    "textdich": ""
  },
  {
    "start": 26769.68,
    "end": 26773.52,
    "text": "to return the token data. And then when we get the token data, we return it to whoever calls this",
    "textdich": ""
  },
  {
    "start": 26773.52,
    "end": 26779.44,
    "text": "function. Okay, guys, so I found a few extra bugs that we need to fix. Now, the first thing that I",
    "textdich": ""
  },
  {
    "start": 26779.44,
    "end": 26784.8,
    "text": "messed up was when we actually set the expiration time under the create access token function,",
    "textdich": ""
  },
  {
    "start": 26784.8,
    "end": 26790.64,
    "text": "instead of datetime.now, it should be datetime. UTC. Now, this is important. Because as I was testing",
    "textdich": ""
  },
  {
    "start": 26790.64,
    "end": 26796.72,
    "text": "it, I kept getting an expiration error. And that's because this should be UTC. Now, the second thing",
    "textdich": ""
  },
  {
    "start": 26796.72,
    "end": 26801.68,
    "text": "is, we want to put this in brackets, because I guess I expect a list of algorithms maybe,",
    "textdich": ""
  },
  {
    "start": 26802.24,
    "end": 26807.2,
    "text": "we'll put that in there. And then finally, this is also a bug right here. Because if you take a",
    "textdich": ""
  },
  {
    "start": 26807.2,
    "end": 26814.16,
    "text": "look at the payload, when we create the token, which I believe should be in the auth.py, when",
    "textdich": ""
  },
  {
    "start": 26814.16,
    "end": 26822.08,
    "text": "we log in, we pass in the data as user underscore ID, and not users underscore ID, like we did here.",
    "textdich": ""
  },
  {
    "start": 26822.08,
    "end": 26828.8,
    "text": "So remove that. And this should prevent us from running into any other potential issues in the",
    "textdich": ""
  },
  {
    "start": 26828.8,
    "end": 26833.36,
    "text": "upcoming lectures. Sorry about that. I know we ran into a couple of bugs. But that's what happens",
    "textdich": ""
  },
  {
    "start": 26833.36,
    "end": 26838.48,
    "text": "when you try and copy and paste really quickly. Before we wrap things up, there's one last change",
    "textdich": ""
  },
  {
    "start": 26838.48,
    "end": 26846.64,
    "text": "that I want to make inside the login route in the auth.py router file. I noticed that for the",
    "textdich": ""
  },
  {
    "start": 26846.64,
    "end": 26851.44,
    "text": "response or the exception that we raise if the either the user's email is wrong, or if their,",
    "textdich": ""
  },
  {
    "start": 26852.32,
    "end": 26860.0,
    "text": "if their password is incorrect. I use the wrong HTTP status code for the exception. And I can't",
    "textdich": ""
  },
  {
    "start": 26860.0,
    "end": 26864.16,
    "text": "remember what I actually had it before, because I went ahead and fixed it. But I want you guys to",
    "textdich": ""
  },
  {
    "start": 26864.16,
    "end": 26869.04,
    "text": "go ahead and change the two exceptions here. In both of those cases to a 403. I think that's a",
    "textdich": ""
  },
  {
    "start": 26869.04,
    "end": 26873.84,
    "text": "better representation of what we should be sending when the user doesn't provide proper credentials.",
    "textdich": ""
  },
  {
    "start": 26874.96,
    "end": 26879.04,
    "text": "So just update it here and then update it here as well. And then you guys should be good to go.",
    "textdich": ""
  },
  {
    "start": 26880.24,
    "end": 26884.16,
    "text": "Okay, guys, we're pretty much done with all of the authentication side of things. The only thing",
    "textdich": ""
  },
  {
    "start": 26884.16,
    "end": 26888.16,
    "text": "that we have to do is require the user to authenticate. Because right now, you know,",
    "textdich": ""
  },
  {
    "start": 26888.16,
    "end": 26893.52,
    "text": "if we perform any operation like creating a post, you can see that I could just create a post.",
    "textdich": ""
  },
  {
    "start": 26893.52,
    "end": 26897.12,
    "text": "And that's it, I don't have to log in first, I don't have to do anything. So anyone can create",
    "textdich": ""
  },
  {
    "start": 26897.12,
    "end": 26900.8,
    "text": "posts, anyone can delete posts, anyone can do anything they want. Obviously, that's not how",
    "textdich": ""
  },
  {
    "start": 26900.8,
    "end": 26905.28,
    "text": "your API is going to work. You're going to want to ensure that users are logged in to perform",
    "textdich": ""
  },
  {
    "start": 26905.28,
    "end": 26909.2,
    "text": "certain operations. And there may be certain operations where they don't necessarily need to",
    "textdich": ""
  },
  {
    "start": 26909.2,
    "end": 26913.12,
    "text": "be logged in depending on how you want to structure your application. Because you know,",
    "textdich": ""
  },
  {
    "start": 26913.12,
    "end": 26917.76,
    "text": "if it's like a Twitter like application, right, anyone can see anyone's tweets,",
    "textdich": ""
  },
  {
    "start": 26918.32,
    "end": 26923.28,
    "text": "I just can't delete anyone else's tweets, right. And to create a tweet, I have to be logged in,",
    "textdich": ""
  },
  {
    "start": 26923.28,
    "end": 26926.72,
    "text": "and so it depends on what you want to do for your application. But what we're going to do is,",
    "textdich": ""
  },
  {
    "start": 26926.72,
    "end": 26930.32,
    "text": "we're going to start off by forcing the user to be logged in before they can create a post.",
    "textdich": ""
  },
  {
    "start": 26931.28,
    "end": 26938.08,
    "text": "And doing this is actually really simple. So let's go to our post a py. And let's find our create",
    "textdich": ""
  },
  {
    "start": 26938.08,
    "end": 26944.96,
    "text": "posts. Now, the first thing I want to do is I'm going to import a lot to which is coming from this",
    "textdich": ""
  },
  {
    "start": 26944.96,
    "end": 26950.16,
    "text": "OAuth to py file. And then in our create posts, path operation function, we're going to add an",
    "textdich": ""
  },
  {
    "start": 26950.16,
    "end": 26956.8,
    "text": "extra dependency. And this dependency is going to be the create or sorry, get current user",
    "textdich": ""
  },
  {
    "start": 26956.8,
    "end": 26966.4,
    "text": "function that we defined in our OAuth to file. So we'll say is depends. And then we'll say OAuth",
    "textdich": ""
  },
  {
    "start": 26966.4,
    "end": 26981.6,
    "text": "to dot get underscore current user. And then we're going to store this in a variable called we'll say",
    "textdich": ""
  },
  {
    "start": 26981.6,
    "end": 26991.68,
    "text": "user underscore ID. And this is going to be a integer. Okay, and so all this is saying is that",
    "textdich": ""
  },
  {
    "start": 26991.68,
    "end": 26997.44,
    "text": "this function is now going to be a dependency. So this is what forces the users to have to be logged",
    "textdich": ""
  },
  {
    "start": 26997.44,
    "end": 27001.84,
    "text": "in before they can actually create a post. And so when this function is called, whenever they hit",
    "textdich": ""
  },
  {
    "start": 27001.84,
    "end": 27005.36,
    "text": "this endpoint, the first thing that we're going to do is we're going to call this function. And",
    "textdich": ""
  },
  {
    "start": 27005.36,
    "end": 27009.36,
    "text": "this function, all this function does is really just call the verify access token, but and passing",
    "textdich": ""
  },
  {
    "start": 27009.36,
    "end": 27018.56,
    "text": "in the token, the token which comes from the user. And so it takes the token, we first decode the",
    "textdich": ""
  },
  {
    "start": 27018.56,
    "end": 27025.44,
    "text": "token, we extract the ID from the payload. And if there's no ID, we throw an error. And then you can",
    "textdich": ""
  },
  {
    "start": 27025.44,
    "end": 27031.84,
    "text": "see we validate the schema. And then this site, this is something I actually added in off camera.",
    "textdich": ""
  },
  {
    "start": 27031.84,
    "end": 27040.4,
    "text": "So we can just delete that, and then go back to what you guys have. But we ultimately return the",
    "textdich": ""
  },
  {
    "start": 27040.4,
    "end": 27045.2,
    "text": "token data, which is nothing more than the ID, right? So we could rename this as ID for now. But",
    "textdich": ""
  },
  {
    "start": 27045.2,
    "end": 27050.56,
    "text": "like I said, in the future, you may want to add extra fields into the payload, and then it's no",
    "textdich": ""
  },
  {
    "start": 27050.56,
    "end": 27055.12,
    "text": "longer just the ID, it's going to include extra information. So we're going to return the ID,",
    "textdich": ""
  },
  {
    "start": 27055.12,
    "end": 27059.68,
    "text": "which then gets returned by the get current user function. And then in our post up py,",
    "textdich": ""
  },
  {
    "start": 27060.32,
    "end": 27064.64,
    "text": "in our function, we're going to return the ID and store it in a variable called user ID.",
    "textdich": ""
  },
  {
    "start": 27064.64,
    "end": 27071.68,
    "text": "And so then we can ultimately access the user ID by just calling user underscore ID. That's it.",
    "textdich": ""
  },
  {
    "start": 27071.68,
    "end": 27076.16,
    "text": "And we can do whatever we want with this user ID. And you'll see, we'll eventually add some more",
    "textdich": ""
  },
  {
    "start": 27076.16,
    "end": 27081.92,
    "text": "logic. But for now, I'm just going to print it out just to see what we see. And let's go ahead",
    "textdich": ""
  },
  {
    "start": 27081.92,
    "end": 27088.56,
    "text": "and try this. So first of all, I'm going to create post. And then we're going to see what happens now",
    "textdich": ""
  },
  {
    "start": 27088.56,
    "end": 27093.52,
    "text": "when I try to create a post. Look at that not authenticated. So by putting in that extra",
    "textdich": ""
  },
  {
    "start": 27093.52,
    "end": 27099.12,
    "text": "dependency, we have ensured that the user has to be authenticated before they can use this post.",
    "textdich": ""
  },
  {
    "start": 27099.12,
    "end": 27105.2,
    "text": "Now, how do we actually provide the token so that we can actually use the create post? Well,",
    "textdich": ""
  },
  {
    "start": 27105.2,
    "end": 27109.12,
    "text": "first of all, let's get a token. So we're going to go to the login user, I'm going to hit send,",
    "textdich": ""
  },
  {
    "start": 27109.12,
    "end": 27115.2,
    "text": "and get a brand new token. And then what we want to do is we want to go to create post. And then",
    "textdich": ""
  },
  {
    "start": 27115.2,
    "end": 27120.56,
    "text": "we want to go do headers. And then we want to create a header. And you know, you can see I can",
    "textdich": ""
  },
  {
    "start": 27120.56,
    "end": 27125.28,
    "text": "I created one already. But I'm going to type this out for you from scratch in the line below it.",
    "textdich": ""
  },
  {
    "start": 27125.28,
    "end": 27133.2,
    "text": "So we'd say authorization is going to be the key. And then the column is going to be and you type",
    "textdich": ""
  },
  {
    "start": 27133.2,
    "end": 27139.12,
    "text": "the word in bear because it's a bear type token. So you do bear with a capital B space, don't forget",
    "textdich": ""
  },
  {
    "start": 27139.12,
    "end": 27146.4,
    "text": "the space, and then paste it in. Okay, and so now this is included in our header. And so we should",
    "textdich": ""
  },
  {
    "start": 27146.4,
    "end": 27154.64,
    "text": "be able to send a request. And so now look at this, we were now successfully able to send our",
    "textdich": ""
  },
  {
    "start": 27154.64,
    "end": 27160.72,
    "text": "token, the API was able to validate it was a valid token. And it was able to then allow us to create",
    "textdich": ""
  },
  {
    "start": 27160.72,
    "end": 27166.88,
    "text": "a post. And just another little postman tip, you can uncheck this for now so that it's not",
    "textdich": ""
  },
  {
    "start": 27166.88,
    "end": 27170.96,
    "text": "authorized for you. If I try to do it now, you see I get an error, you can go into authorization",
    "textdich": ""
  },
  {
    "start": 27170.96,
    "end": 27175.76,
    "text": "and then just type in go to bear token and then paste it into here does the same exact thing.",
    "textdich": ""
  },
  {
    "start": 27175.76,
    "end": 27180.16,
    "text": "It just you don't have to type in the word bear for yourself. And then you know, have to do all",
    "textdich": ""
  },
  {
    "start": 27180.16,
    "end": 27184.72,
    "text": "of that, you can just hit send now. And it does does the same exact thing, whichever method you",
    "textdich": ""
  },
  {
    "start": 27184.72,
    "end": 27191.52,
    "text": "prefer more. Now that we've protected our create posts route, let's go ahead and do this with some",
    "textdich": ""
  },
  {
    "start": 27191.52,
    "end": 27196.4,
    "text": "of our other routes. So it's just a matter of just copying the dependency for get current user. And",
    "textdich": ""
  },
  {
    "start": 27196.4,
    "end": 27202.8,
    "text": "then for retrieving a post, well, remember, this part is up to you, you decide ultimately what",
    "textdich": ""
  },
  {
    "start": 27202.8,
    "end": 27207.84,
    "text": "routes you want a user to be logged in to actually perform an operation. But for delete posts,",
    "textdich": ""
  },
  {
    "start": 27207.84,
    "end": 27212.64,
    "text": "I'm definitely going to force a user to be logged in. And for update post, I'm going to do the same",
    "textdich": ""
  },
  {
    "start": 27212.64,
    "end": 27218.4,
    "text": "thing. And then finally, you know, like I said, forgetting posts, you know, it's really up to you,",
    "textdich": ""
  },
  {
    "start": 27218.4,
    "end": 27222.88,
    "text": "we'll say that you have to be logged in to do anything. So forget posts are getting all posts,",
    "textdich": ""
  },
  {
    "start": 27222.88,
    "end": 27226.64,
    "text": "we want to make sure that they're logged in. And then forgetting an individual post, we want to",
    "textdich": ""
  },
  {
    "start": 27226.64,
    "end": 27232.48,
    "text": "make sure that they're logged in. And then finally, the last thing that we well, it's not the last",
    "textdich": ""
  },
  {
    "start": 27232.48,
    "end": 27238.96,
    "text": "thing. But one of the things I forgot to do is under auth.py, when we send our access token,",
    "textdich": ""
  },
  {
    "start": 27239.68,
    "end": 27245.36,
    "text": "after they log in, if you remember, in under schemas, we actually created a token model,",
    "textdich": ""
  },
  {
    "start": 27245.36,
    "end": 27251.44,
    "text": "sorry, token schema, we never actually used it. So let's actually use that by setting the response",
    "textdich": ""
  },
  {
    "start": 27251.44,
    "end": 27262.8,
    "text": "model here. And this is going to be schema dot token, he must dot token. Well, let's save this.",
    "textdich": ""
  },
  {
    "start": 27271.44,
    "end": 27273.68,
    "text": "And this should be capitalized. Sorry about that.",
    "textdich": ""
  },
  {
    "start": 27273.68,
    "end": 27281.68,
    "text": "And so now if we log in a user, we should still get no errors. So perfect. Okay, so just in case",
    "textdich": ""
  },
  {
    "start": 27281.68,
    "end": 27285.6,
    "text": "in the future, we accidentally change something, we're still going to perform that validation to",
    "textdich": ""
  },
  {
    "start": 27285.6,
    "end": 27292.4,
    "text": "ensure that the token we only send those two fields when we return a token. Now let's quickly",
    "textdich": ""
  },
  {
    "start": 27292.4,
    "end": 27300.08,
    "text": "just test all the other routes. So if I do get posts, and I hit send, you can see, well, let me",
    "textdich": ""
  },
  {
    "start": 27300.08,
    "end": 27305.52,
    "text": "save everything. Sorry about that. Once again. Now if I hit send, you can see I'm not authenticated.",
    "textdich": ""
  },
  {
    "start": 27305.52,
    "end": 27310.64,
    "text": "So I have to do the same thing. So once again, you can do authorization bearer, or you can go",
    "textdich": ""
  },
  {
    "start": 27310.64,
    "end": 27317.36,
    "text": "to authorization, and then just select bearer token and then paste in the token. Now if I hit",
    "textdich": ""
  },
  {
    "start": 27317.36,
    "end": 27327.92,
    "text": "send, oh, sorry, I got to recopy the token again. Now if we send, it works now get one post, let's",
    "textdich": ""
  },
  {
    "start": 27327.92,
    "end": 27337.52,
    "text": "try this not authenticated, we'll go into authorization. Bear token. Send that works",
    "textdich": ""
  },
  {
    "start": 27337.52,
    "end": 27349.76,
    "text": "deleting posts. Go to once again to authorization. And there's no post with an idea of three,",
    "textdich": ""
  },
  {
    "start": 27349.76,
    "end": 27357.44,
    "text": "about four. All right, that worked. And then finally, update post. We're going to do the last",
    "textdich": ""
  },
  {
    "start": 27357.44,
    "end": 27366.16,
    "text": "thing and bear token. All right, and that works. And then let's just double check to make sure that",
    "textdich": ""
  },
  {
    "start": 27366.16,
    "end": 27372.72,
    "text": "if there's no token, what happens? Error, perfect. Okay, guys, so I think that's going to wrap up this",
    "textdich": ""
  },
  {
    "start": 27372.72,
    "end": 27377.52,
    "text": "video. For now, we've pretty much done all the authentication that we need to do up to this point.",
    "textdich": ""
  },
  {
    "start": 27377.52,
    "end": 27382.96,
    "text": "There's one last thing that I want to test to verify that everything works the way it should.",
    "textdich": ""
  },
  {
    "start": 27382.96,
    "end": 27387.84,
    "text": "And we probably should test this in one of the previous videos, but I forgot to do it. And I want",
    "textdich": ""
  },
  {
    "start": 27387.84,
    "end": 27393.36,
    "text": "to make sure that we test the expiration process because a JWT has an expiration time that we set",
    "textdich": ""
  },
  {
    "start": 27393.36,
    "end": 27398.64,
    "text": "ourselves. And this just ensures that a user is logged in only for a certain amount of time. Now",
    "textdich": ""
  },
  {
    "start": 27398.64,
    "end": 27404.4,
    "text": "we set the access token expiration time to be 30 minutes. And so that means that if a user logs in",
    "textdich": ""
  },
  {
    "start": 27404.4,
    "end": 27408.96,
    "text": "and he keeps his token for more than 30 minutes, after that 30 minute mark, if he tries to use that",
    "textdich": ""
  },
  {
    "start": 27408.96,
    "end": 27414.32,
    "text": "token to access any of our endpoints, it should throw an error because it's already expired.",
    "textdich": ""
  },
  {
    "start": 27414.32,
    "end": 27418.24,
    "text": "So let's test this out. And the easiest way to test this is first of all, we're not going to",
    "textdich": ""
  },
  {
    "start": 27418.24,
    "end": 27421.92,
    "text": "wait 30 minutes, that's ridiculous. So what we're going to do is, we're going to set this to one",
    "textdich": ""
  },
  {
    "start": 27421.92,
    "end": 27429.6,
    "text": "minute. And we're just going to test this real quick. And so I'm going to log in this user.",
    "textdich": ""
  },
  {
    "start": 27429.6,
    "end": 27436.56,
    "text": "So this token is valid for exactly one minute. And so we'll go to create posts, actually, we'll just",
    "textdich": ""
  },
  {
    "start": 27436.56,
    "end": 27441.52,
    "text": "do get posts, it doesn't really matter. And I'll paste this in here. And you'll see this works.",
    "textdich": ""
  },
  {
    "start": 27441.52,
    "end": 27446.4,
    "text": "And we're going to just wait for one full minute. And after one minute, let's just verify that we",
    "textdich": ""
  },
  {
    "start": 27446.4,
    "end": 27452.4,
    "text": "get a unauthorized error because the token has expired. Okay, so it should be about one minute",
    "textdich": ""
  },
  {
    "start": 27452.4,
    "end": 27457.84,
    "text": "now. And so if we test this, we should now get an error. So after one minute, it says it could not",
    "textdich": ""
  },
  {
    "start": 27457.84,
    "end": 27462.56,
    "text": "validate credentials. Now we could set up a log message to say that, hey, this token is expired,",
    "textdich": ""
  },
  {
    "start": 27462.56,
    "end": 27467.92,
    "text": "but we don't need to worry too much about that. As long as it throws an error, and it gives them",
    "textdich": ""
  },
  {
    "start": 27467.92,
    "end": 27473.84,
    "text": "a 401. I think that's good enough for now. And so this confirms that our expiration",
    "textdich": ""
  },
  {
    "start": 27474.8,
    "end": 27479.84,
    "text": "functionality works. And the last thing to do is, well, let's make sure we change this back. So once",
    "textdich": ""
  },
  {
    "start": 27479.84,
    "end": 27484.24,
    "text": "again, it doesn't matter what time you choose, it's up to you, I'm just going to do 30 minutes,",
    "textdich": ""
  },
  {
    "start": 27484.24,
    "end": 27488.08,
    "text": "actually, I'm going to do 60 minutes just for testing purposes. Moving forward, I don't want",
    "textdich": ""
  },
  {
    "start": 27488.08,
    "end": 27493.2,
    "text": "to have to continually get a new token after every 30 minutes. So 60 minutes is a good number.",
    "textdich": ""
  },
  {
    "start": 27495.04,
    "end": 27500.08,
    "text": "Now you might be wondering, why exactly do we have this get current user function,",
    "textdich": ""
  },
  {
    "start": 27500.08,
    "end": 27505.12,
    "text": "when all it really does is just call verify access token, we could completely just remove this and",
    "textdich": ""
  },
  {
    "start": 27505.12,
    "end": 27510.64,
    "text": "just call this directly whenever we want to authenticate a user. And you absolutely could",
    "textdich": ""
  },
  {
    "start": 27510.64,
    "end": 27515.6,
    "text": "with the current implementation. But the idea behind the get current user function is that",
    "textdich": ""
  },
  {
    "start": 27516.24,
    "end": 27523.04,
    "text": "once the verify access token returns the token data, which is the ID, the get current user",
    "textdich": ""
  },
  {
    "start": 27523.04,
    "end": 27528.08,
    "text": "function should actually fetch the user from the database. And so that way, we can attach the user",
    "textdich": ""
  },
  {
    "start": 27528.08,
    "end": 27532.56,
    "text": "to any path operation, and then we can perform any necessary logic. Now, you don't actually have to",
    "textdich": ""
  },
  {
    "start": 27532.56,
    "end": 27538.0,
    "text": "fetch the user here. It's up to you how you want to implement this, if you want each of your path",
    "textdich": ""
  },
  {
    "start": 27538.0,
    "end": 27542.8,
    "text": "operations to fetch the user themselves, they have the ID, so they can do it themselves. However,",
    "textdich": ""
  },
  {
    "start": 27542.8,
    "end": 27547.44,
    "text": "if you wanted to automatically do it here, you 100% can do that. And so I'm going to show you guys",
    "textdich": ""
  },
  {
    "start": 27547.44,
    "end": 27552.8,
    "text": "how you can do that in this lesson. And so keep in mind, we get the token data back, which is going",
    "textdich": ""
  },
  {
    "start": 27552.8,
    "end": 27558.0,
    "text": "to be nothing more than an ID. And what we're going to do is first of all, we need access to",
    "textdich": ""
  },
  {
    "start": 27558.0,
    "end": 27565.36,
    "text": "our database so that we can fetch the users. So from here, I'm going to import database. And within",
    "textdich": ""
  },
  {
    "start": 27565.36,
    "end": 27571.52,
    "text": "this function, we can pass in the other dependencies so that we can actually get access to the DB",
    "textdich": ""
  },
  {
    "start": 27572.24,
    "end": 27577.84,
    "text": "object. So I'll say depends, and then we're going to access database dot, and I already forgot the",
    "textdich": ""
  },
  {
    "start": 27577.84,
    "end": 27586.48,
    "text": "name of the function, what does it get underscore DB, get underscore DB, and we'll say DB session",
    "textdich": ""
  },
  {
    "start": 27586.48,
    "end": 27604.72,
    "text": "equals and then we have to import session from SQL alchemy. And so now we can make requests to",
    "textdich": ""
  },
  {
    "start": 27604.72,
    "end": 27612.48,
    "text": "a database. And what we're going to do here is first of all, I'm no longer going to return that",
    "textdich": ""
  },
  {
    "start": 27612.48,
    "end": 27621.12,
    "text": "directly. And I'm going to say token equals and then we're going to call that this function right",
    "textdich": ""
  },
  {
    "start": 27621.12,
    "end": 27634.72,
    "text": "here, verify access token. All right, and since we have access to the token, what we can do now is we",
    "textdich": ""
  },
  {
    "start": 27634.72,
    "end": 27641.28,
    "text": "can say DB dot query. And then we have to import models. And I'm not sure if we've done that",
    "textdich": ""
  },
  {
    "start": 27641.28,
    "end": 27652.96,
    "text": "already, we haven't. So I'll import models. I'll say models dot user dot filter. And then we want",
    "textdich": ""
  },
  {
    "start": 27652.96,
    "end": 27660.16,
    "text": "to filter based off of the ID. So I'll say models dot user dot ID equals equals token. And then we",
    "textdich": ""
  },
  {
    "start": 27660.16,
    "end": 27669.84,
    "text": "just grab the ID field. And then we're going to grab the first one. And then we can return the",
    "textdich": ""
  },
  {
    "start": 27669.84,
    "end": 27678.16,
    "text": "user, which I forgot to save it. So user is going to be equal to the result of that. And if you want",
    "textdich": ""
  },
  {
    "start": 27678.16,
    "end": 27683.28,
    "text": "to, you can print user here. But I already know this is going to work. So we can just go and save",
    "textdich": ""
  },
  {
    "start": 27683.28,
    "end": 27690.72,
    "text": "this. And then in our post at py, right, when we call this dependency right here, it's no longer",
    "textdich": ""
  },
  {
    "start": 27690.72,
    "end": 27694.4,
    "text": "returning the user ID. So I don't think it's it's a good practice to call this user ID anymore,",
    "textdich": ""
  },
  {
    "start": 27694.4,
    "end": 27699.68,
    "text": "because it represents a user. So I'm going to say, I'm gonna call this current underscore user. And",
    "textdich": ""
  },
  {
    "start": 27699.68,
    "end": 27716.16,
    "text": "we're going to rename this everywhere. All right, and then here within the function, I'm going to",
    "textdich": ""
  },
  {
    "start": 27716.16,
    "end": 27728.88,
    "text": "print out current underscore user. And so if I try to create a post now, and then open up my console,",
    "textdich": ""
  },
  {
    "start": 27729.84,
    "end": 27735.84,
    "text": "you can see that it printed out the user object, which not very helpful. But what we can do real",
    "textdich": ""
  },
  {
    "start": 27735.84,
    "end": 27743.92,
    "text": "quick is I'll just say current user dot email, we can see the email of that user, just to verify",
    "textdich": ""
  },
  {
    "start": 27743.92,
    "end": 27748.64,
    "text": "that we are actually getting the user. And we can see that it does print out the email. So that's",
    "textdich": ""
  },
  {
    "start": 27748.64,
    "end": 27752.88,
    "text": "ultimately why this function exists. Because normally here, this is where you query your",
    "textdich": ""
  },
  {
    "start": 27752.88,
    "end": 27757.12,
    "text": "database to grab the user and then you return the user. And then whatever you return here",
    "textdich": ""
  },
  {
    "start": 27757.12,
    "end": 27761.2,
    "text": "is ultimately what allows any of your other routes to get whatever you're returning. So",
    "textdich": ""
  },
  {
    "start": 27761.2,
    "end": 27764.56,
    "text": "since we're returning a user, we're going to store it as a variable called current user.",
    "textdich": ""
  },
  {
    "start": 27765.12,
    "end": 27769.12,
    "text": "In this video, we're going to take a look at some of the more advanced features of postman.",
    "textdich": ""
  },
  {
    "start": 27769.12,
    "end": 27773.36,
    "text": "And we're going to start off by taking a look at environments. So select the environments tab,",
    "textdich": ""
  },
  {
    "start": 27773.36,
    "end": 27777.6,
    "text": "and you'll see that postman just gives you a quick description of what an environment is,",
    "textdich": ""
  },
  {
    "start": 27777.6,
    "end": 27782.4,
    "text": "it says an environment is a set of variables that allow you to switch the context of your request.",
    "textdich": ""
  },
  {
    "start": 27782.4,
    "end": 27788.48,
    "text": "So we can set up some variables that change depending on what environment we work in. And",
    "textdich": ""
  },
  {
    "start": 27789.04,
    "end": 27793.2,
    "text": "you're probably thinking, well, what exactly is the point of that? And let me give you a great",
    "textdich": ""
  },
  {
    "start": 27793.2,
    "end": 27798.32,
    "text": "example. If you take a look at all of our requests, you can see that we've hard coded them to be 127",
    "textdich": ""
  },
  {
    "start": 27798.32,
    "end": 27803.52,
    "text": "dot zero dot zero dot one, port 8000. And this is our development environment. Now when we ultimately",
    "textdich": ""
  },
  {
    "start": 27803.52,
    "end": 27807.92,
    "text": "go to deploy our app, it's not going to be deployed on 127 dot zero, zero, one, two,",
    "textdich": ""
  },
  {
    "start": 27807.92,
    "end": 27811.28,
    "text": "we deployed on some server, it's going to have a public IP somewhere on the internet.",
    "textdich": ""
  },
  {
    "start": 27811.92,
    "end": 27816.0,
    "text": "And so when we want to test out our production server, or make some changes to our production",
    "textdich": ""
  },
  {
    "start": 27816.0,
    "end": 27821.28,
    "text": "server, make some test requests to it, we would have to change the IP address, the port number,",
    "textdich": ""
  },
  {
    "start": 27821.28,
    "end": 27825.92,
    "text": "as well as we probably are going to be running HTTPS instead of HTTP. So all of our requests,",
    "textdich": ""
  },
  {
    "start": 27825.92,
    "end": 27830.64,
    "text": "we'd have to change all of them, and then continuously flip back and forth every time",
    "textdich": ""
  },
  {
    "start": 27830.64,
    "end": 27835.84,
    "text": "we move from dev to prod, and then from prod back to dev. And so instead of having to hard code",
    "textdich": ""
  },
  {
    "start": 27835.84,
    "end": 27840.32,
    "text": "these values, then change it constantly, we can actually create a variable that changes depending",
    "textdich": ""
  },
  {
    "start": 27840.32,
    "end": 27845.04,
    "text": "on what environment we use within postman. So let's go to environment. And let's create an",
    "textdich": ""
  },
  {
    "start": 27845.04,
    "end": 27850.96,
    "text": "environment. And I'm going to call this environment, I will say this is dev. And then our project name,",
    "textdich": ""
  },
  {
    "start": 27850.96,
    "end": 27857.68,
    "text": "which is fast API. So this is our environment. And what we can do is we can define a variable,",
    "textdich": ""
  },
  {
    "start": 27857.68,
    "end": 27863.84,
    "text": "and I'm going to call this one URL. And then here, I'm going to actually just copy this URL.",
    "textdich": ""
  },
  {
    "start": 27867.36,
    "end": 27870.56,
    "text": "And then go to our environment again, and then I'm going to give it an initial value.",
    "textdich": ""
  },
  {
    "start": 27872.0,
    "end": 27874.64,
    "text": "All right, and then our current value should update, and then we can just hit save.",
    "textdich": ""
  },
  {
    "start": 27875.36,
    "end": 27879.84,
    "text": "Okay, and so we've set this variable to be this specific IP in our dev environment.",
    "textdich": ""
  },
  {
    "start": 27879.84,
    "end": 27884.96,
    "text": "And so if we go back to collections, and then go to our get posts, first of all, now moving forward,",
    "textdich": ""
  },
  {
    "start": 27884.96,
    "end": 27887.84,
    "text": "you want to make sure that you're working in some kind of environment. So we'll select the",
    "textdich": ""
  },
  {
    "start": 27887.84,
    "end": 27893.36,
    "text": "environment we just created. And then instead of hard coding this value here, I'm going to change",
    "textdich": ""
  },
  {
    "start": 27893.36,
    "end": 27899.6,
    "text": "this. And I'm going to just say, to actually use a variable, you do curly brace, curly brace,",
    "textdich": ""
  },
  {
    "start": 27899.6,
    "end": 27904.72,
    "text": "the name of the variable, and then curly brace, curly brace. Okay, and it should be orange instead",
    "textdich": ""
  },
  {
    "start": 27904.72,
    "end": 27907.76,
    "text": "of red, if you get a red, it's going to meet in that it wasn't able to resolve something,",
    "textdich": ""
  },
  {
    "start": 27907.76,
    "end": 27911.28,
    "text": "and there's some issues. So just double check what you did. Orange is good. And then if you",
    "textdich": ""
  },
  {
    "start": 27911.28,
    "end": 27915.44,
    "text": "see this result, when you hover hover over it, that means that everything's working. And so just",
    "textdich": ""
  },
  {
    "start": 27915.44,
    "end": 27919.76,
    "text": "to quickly test this, you can see that it says could not validate credentials, that's perfectly",
    "textdich": ""
  },
  {
    "start": 27919.76,
    "end": 27924.32,
    "text": "fine. I didn't set up the access token or anything. But this does confirm that we're able to",
    "textdich": ""
  },
  {
    "start": 27924.32,
    "end": 27929.36,
    "text": "resolve that variable. And so that way, you know, if I go and then create a new environment,",
    "textdich": ""
  },
  {
    "start": 27929.36,
    "end": 27942.8,
    "text": "and I'll just add here, and then we'll say this is prod, past API, we can then give a different URL",
    "textdich": ""
  },
  {
    "start": 27942.8,
    "end": 27949.52,
    "text": "for the production environment. So this could be like, you know, HTTPS colon slash slash, I don't",
    "textdich": ""
  },
  {
    "start": 27949.52,
    "end": 27959.12,
    "text": "know, you know, some domain name that you buy, I'll call this Sanjeev dot x, y, z, slash. And then I",
    "textdich": ""
  },
  {
    "start": 27959.12,
    "end": 27964.64,
    "text": "can save this. And so that way, if you ever are testing your development environment, you just",
    "textdich": ""
  },
  {
    "start": 27964.64,
    "end": 27968.4,
    "text": "go to dev. And then when you want to quickly switch to your production, you just change that",
    "textdich": ""
  },
  {
    "start": 27968.4,
    "end": 27971.52,
    "text": "and then the URL will automatically update. So you don't have to change anything yourself.",
    "textdich": ""
  },
  {
    "start": 27972.4,
    "end": 27976.4,
    "text": "And it's super handy to set this up. And we're just going to do this for all of our requests",
    "textdich": ""
  },
  {
    "start": 27976.4,
    "end": 27982.4,
    "text": "moving forward. So I'm just going to copy this. I'm going to do this for all of them.",
    "textdich": ""
  },
  {
    "start": 27989.04,
    "end": 27995.12,
    "text": "Okay, and if you go ahead and test this yourself, you should ultimately not run into any issues.",
    "textdich": ""
  },
  {
    "start": 27996.56,
    "end": 27999.84,
    "text": "I'm not going to bore you through, you know, individually testing these, you can do this",
    "textdich": ""
  },
  {
    "start": 27999.84,
    "end": 28004.48,
    "text": "yourself. And if you run into errors, it's just you probably paste it in something wrong.",
    "textdich": ""
  },
  {
    "start": 28004.48,
    "end": 28010.32,
    "text": "Now that we've set up authentication on our API, testing our API has gotten a little bit more",
    "textdich": ""
  },
  {
    "start": 28010.32,
    "end": 28015.28,
    "text": "challenging. And that's because I can no longer just go to create posts, and then just hit send,",
    "textdich": ""
  },
  {
    "start": 28015.28,
    "end": 28019.52,
    "text": "because I have to be authenticated first to be able to actually create a post. And so what I have",
    "textdich": ""
  },
  {
    "start": 28019.52,
    "end": 28025.2,
    "text": "to do in postman is I have to hit send, I have to log in, and then get the access token, I have to",
    "textdich": ""
  },
  {
    "start": 28025.2,
    "end": 28030.16,
    "text": "copy the access token, and then go to the specific endpoint I want to test, and then I want to paste",
    "textdich": ""
  },
  {
    "start": 28030.16,
    "end": 28034.4,
    "text": "that in there, and then hit send. And then I can finally create post. And this is a little cumbersome",
    "textdich": ""
  },
  {
    "start": 28034.4,
    "end": 28040.48,
    "text": "and tiring. And it gets really hard if you have a short expiration time on your token. Imagine if",
    "textdich": ""
  },
  {
    "start": 28040.48,
    "end": 28043.84,
    "text": "you had an expiration time of five minutes, then every five minutes, you'd have to repeat this",
    "textdich": ""
  },
  {
    "start": 28043.84,
    "end": 28050.4,
    "text": "process. But luckily, postman has a way to actually do this through an automated fashion.",
    "textdich": ""
  },
  {
    "start": 28051.2,
    "end": 28055.84,
    "text": "We're all developers, we all want to do things automated. So let's take a look at how we can do",
    "textdich": ""
  },
  {
    "start": 28055.84,
    "end": 28059.92,
    "text": "this. And I had to make sure that you guys understood environments and variables beforehand,",
    "textdich": ""
  },
  {
    "start": 28059.92,
    "end": 28065.36,
    "text": "because this the method that we use actually makes use of environment variables. So let's go to the",
    "textdich": ""
  },
  {
    "start": 28065.36,
    "end": 28070.72,
    "text": "login user endpoint. And we're going to hit send and get a new access token. And so we've got this",
    "textdich": ""
  },
  {
    "start": 28070.72,
    "end": 28075.68,
    "text": "access token. And what I want to do is through code, I want postman to automatically set an",
    "textdich": ""
  },
  {
    "start": 28075.68,
    "end": 28082.64,
    "text": "environment variable. So how do we do that? Well, let's go to tests. And here we can put in whatever",
    "textdich": ""
  },
  {
    "start": 28082.64,
    "end": 28086.88,
    "text": "code we want. And so we can read the documentation on how to do this. But the ultimate goal is to",
    "textdich": ""
  },
  {
    "start": 28086.88,
    "end": 28091.68,
    "text": "set an environment variable through code. So how do we do that? Well, there's a little snippet here",
    "textdich": ""
  },
  {
    "start": 28091.68,
    "end": 28097.28,
    "text": "that kind of gives you examples. And what we want to do is we want to set an environment variable.",
    "textdich": ""
  },
  {
    "start": 28098.24,
    "end": 28102.72,
    "text": "And so to set an environment variable, you just do environment dot set, provide the key and then",
    "textdich": ""
  },
  {
    "start": 28102.72,
    "end": 28108.48,
    "text": "the variable name. And so just like we did with environments, right, if you go into your environment,",
    "textdich": ""
  },
  {
    "start": 28108.48,
    "end": 28112.56,
    "text": "you've got the URL, which is the key and then the value. And so we're just going to do the same",
    "textdich": ""
  },
  {
    "start": 28112.56,
    "end": 28118.96,
    "text": "thing, but just through code. So here, I'm going to set the key to be JWT. And I'm going to set the",
    "textdich": ""
  },
  {
    "start": 28118.96,
    "end": 28126.24,
    "text": "value to be this access token. So how do we actually retrieve the access token from the response of the",
    "textdich": ""
  },
  {
    "start": 28126.24,
    "end": 28130.96,
    "text": "request? Well, we can do pm dot response, that grabs the response object, then we'll convert it",
    "textdich": ""
  },
  {
    "start": 28130.96,
    "end": 28135.92,
    "text": "to JSON. And then we need to get the token and the token sits on a property called access underscore",
    "textdich": ""
  },
  {
    "start": 28135.92,
    "end": 28141.68,
    "text": "token. So whatever this field is called, this is what you're going to pass in, we'll say dot access",
    "textdich": ""
  },
  {
    "start": 28141.68,
    "end": 28148.8,
    "text": "underscore token. Alright, and so now if I send this again, we'll get the token, the code should",
    "textdich": ""
  },
  {
    "start": 28148.8,
    "end": 28154.0,
    "text": "have run, and it should have set a variable called access token. And so now under create post,",
    "textdich": ""
  },
  {
    "start": 28154.64,
    "end": 28162.0,
    "text": "instead of hard coding, this, what I can do is I can actually just reference the JWT variable.",
    "textdich": ""
  },
  {
    "start": 28162.0,
    "end": 28165.92,
    "text": "And so I set minus capitals, there looks like there's one from a previous project, maybe.",
    "textdich": ""
  },
  {
    "start": 28166.64,
    "end": 28170.96,
    "text": "But we want this one right here. And if you want to just double check, you can see that this ends",
    "textdich": ""
  },
  {
    "start": 28170.96,
    "end": 28176.64,
    "text": "in w y d three, oh, and if you want to go back into login user, you can see that this ends in",
    "textdich": ""
  },
  {
    "start": 28176.64,
    "end": 28182.08,
    "text": "w y d three, oh, so it looks like it did set that and updated accordingly. We'll set that in there.",
    "textdich": ""
  },
  {
    "start": 28182.08,
    "end": 28188.48,
    "text": "And so now if we send, you can see that we can now create posts. And so anytime you log in a user,",
    "textdich": ""
  },
  {
    "start": 28189.6,
    "end": 28194.0,
    "text": "it's going to update that token. And we can verify this, if you take it the last three letters,",
    "textdich": ""
  },
  {
    "start": 28194.0,
    "end": 28201.12,
    "text": "q zero, a is the new token. And then I'm going to just remove that so we can see the value. And we",
    "textdich": ""
  },
  {
    "start": 28201.12,
    "end": 28207.12,
    "text": "can see that q zero, a is the last three letters as well. So this updates it dynamically. So that",
    "textdich": ""
  },
  {
    "start": 28207.12,
    "end": 28212.32,
    "text": "all you have to do is now just hit login user. And then you can start testing all of your other",
    "textdich": ""
  },
  {
    "start": 28212.32,
    "end": 28216.32,
    "text": "endpoints. And we're going to update all of the other endpoints as well. So forget posts, I'm",
    "textdich": ""
  },
  {
    "start": 28216.32,
    "end": 28221.44,
    "text": "going to put that in there as well. And then for getting an individual post, deleting a post,",
    "textdich": ""
  },
  {
    "start": 28221.44,
    "end": 28228.48,
    "text": "updating a post, we don't need it for a create user. We might want to do a forget user if we set",
    "textdich": ""
  },
  {
    "start": 28228.48,
    "end": 28232.88,
    "text": "up authentication for get user, but we haven't done that yet. So we'll hold off on doing that for now.",
    "textdich": ""
  },
  {
    "start": 28234.4,
    "end": 28238.72,
    "text": "Now, currently, our application doesn't work like a traditional application would.",
    "textdich": ""
  },
  {
    "start": 28239.6,
    "end": 28243.68,
    "text": "And the reason I say that is, you know, if you take a look at how everything's been set up,",
    "textdich": ""
  },
  {
    "start": 28243.68,
    "end": 28249.68,
    "text": "not just in our API, but in our database, we've got two tables, a user table and a post table.",
    "textdich": ""
  },
  {
    "start": 28249.68,
    "end": 28256.0,
    "text": "So we can create, modify, delete users, however we want, we can log in. And then we can create,",
    "textdich": ""
  },
  {
    "start": 28256.0,
    "end": 28259.04,
    "text": "modify and delete as many posts as we want. Right. And you're probably thinking, well,",
    "textdich": ""
  },
  {
    "start": 28259.04,
    "end": 28263.36,
    "text": "that sounds perfectly fine. Yes. However, think about any other application, think about any",
    "textdich": ""
  },
  {
    "start": 28263.36,
    "end": 28268.08,
    "text": "social media type application, when someone creates a post, and you see that post on your feed,",
    "textdich": ""
  },
  {
    "start": 28268.08,
    "end": 28272.24,
    "text": "what are you going to see next to the post, you're going to see the user that created it,",
    "textdich": ""
  },
  {
    "start": 28272.24,
    "end": 28277.52,
    "text": "right? So every post is ultimately associated with the user account that created that post.",
    "textdich": ""
  },
  {
    "start": 28277.52,
    "end": 28281.92,
    "text": "But we have no way to actually do that in our application at the moment, because there's nothing",
    "textdich": ""
  },
  {
    "start": 28281.92,
    "end": 28287.12,
    "text": "that ties a post to the user that created it, right? Take a look at all of the columns in our",
    "textdich": ""
  },
  {
    "start": 28287.12,
    "end": 28291.76,
    "text": "database, we've got an ID, a title, content published, technically, there's a created that",
    "textdich": ""
  },
  {
    "start": 28291.76,
    "end": 28297.44,
    "text": "column that I didn't draw in this diagram, but that's okay. So how do we know what post was",
    "textdich": ""
  },
  {
    "start": 28297.44,
    "end": 28303.52,
    "text": "created by what user. And this is where relational databases really start to shine, because the main",
    "textdich": ""
  },
  {
    "start": 28303.52,
    "end": 28309.44,
    "text": "idea behind a relational database is that you set up these relationships between tables. So we need",
    "textdich": ""
  },
  {
    "start": 28309.44,
    "end": 28314.96,
    "text": "to set up some kind of special relationship between the user's table and the post table that",
    "textdich": ""
  },
  {
    "start": 28314.96,
    "end": 28321.92,
    "text": "will allow us to associate a post with a specific user that created that post. So let's take a look",
    "textdich": ""
  },
  {
    "start": 28321.92,
    "end": 28328.16,
    "text": "at how we can do that within Postgres or any SQL based database. And the way we do that is we",
    "textdich": ""
  },
  {
    "start": 28328.16,
    "end": 28333.6,
    "text": "actually create an extra column in our post table. So we've got a column, you can call it whatever you",
    "textdich": ""
  },
  {
    "start": 28333.6,
    "end": 28337.84,
    "text": "want, but I'm going to call it user ID. And I'll explain why. And what we're going to do is we're",
    "textdich": ""
  },
  {
    "start": 28337.84,
    "end": 28345.68,
    "text": "going to set up a special foreign key. And a foreign key is a how we tell SQL that this column",
    "textdich": ""
  },
  {
    "start": 28345.68,
    "end": 28352.16,
    "text": "here is connected to another table. And what we do is we specify two things. We specify the table",
    "textdich": ""
  },
  {
    "start": 28352.16,
    "end": 28356.16,
    "text": "that it should be connected to. So here I'm saying, hey, this should connect to the users table. And",
    "textdich": ""
  },
  {
    "start": 28356.16,
    "end": 28361.12,
    "text": "then we specify what specific column it should use from that table. And here we're saying the ID",
    "textdich": ""
  },
  {
    "start": 28361.12,
    "end": 28366.0,
    "text": "column, because this connection is connected to the ID column of the user's table. And so that's",
    "textdich": ""
  },
  {
    "start": 28366.0,
    "end": 28372.24,
    "text": "what we set the foreign key on. And all this does is this is really such a simple concept. Whatever",
    "textdich": ""
  },
  {
    "start": 28372.24,
    "end": 28378.48,
    "text": "user creates this post, we just embed the ID of that specific user. So for the post with the idea",
    "textdich": ""
  },
  {
    "start": 28378.48,
    "end": 28384.72,
    "text": "621, the user that created this has an idea of 212. So if we take a look at what user has an idea",
    "textdich": ""
  },
  {
    "start": 28384.72,
    "end": 28390.24,
    "text": "of 212, we go here and we can see that clay edge, email.com created this post. And so that's all we",
    "textdich": ""
  },
  {
    "start": 28390.24,
    "end": 28395.84,
    "text": "have to do to set up a relationship between these two tables. And so now moving forward, any post we",
    "textdich": ""
  },
  {
    "start": 28395.84,
    "end": 28400.72,
    "text": "create will easily be able to tell what user created it, because we're going to embed the idea of that",
    "textdich": ""
  },
  {
    "start": 28400.72,
    "end": 28406.72,
    "text": "user into this column called user underscore ID. And if you take a look at the second one, as an",
    "textdich": ""
  },
  {
    "start": 28406.72,
    "end": 28411.28,
    "text": "example, we can see that this was created by a user with an idea of 378. So we go into the user",
    "textdich": ""
  },
  {
    "start": 28411.28,
    "end": 28417.68,
    "text": "table, and we can see that this user is my get gmail.com. And it really is as simple as that. And",
    "textdich": ""
  },
  {
    "start": 28417.68,
    "end": 28423.68,
    "text": "this is what's referred to as a one to many relationship within SQL, or any relational",
    "textdich": ""
  },
  {
    "start": 28423.68,
    "end": 28428.96,
    "text": "database. And the reason why they call it that is because one user can create as many posts as they",
    "textdich": ""
  },
  {
    "start": 28428.96,
    "end": 28437.84,
    "text": "want. However, a post can only be associated with one user, two users can't create a post. And so",
    "textdich": ""
  },
  {
    "start": 28437.84,
    "end": 28443.6,
    "text": "that's why this is referred to as a one to many relationship, one user can create many posts. And",
    "textdich": ""
  },
  {
    "start": 28443.6,
    "end": 28447.84,
    "text": "that's all we have to do. It is actually that simple, we just create another column. And then we",
    "textdich": ""
  },
  {
    "start": 28447.84,
    "end": 28452.24,
    "text": "have to specify this special foreign key constraint where we just tell SQL, hey, what table do we",
    "textdich": ""
  },
  {
    "start": 28452.24,
    "end": 28458.72,
    "text": "look for? And what column? And keep in mind, in this case, I'm using the ID of the users table.",
    "textdich": ""
  },
  {
    "start": 28459.36,
    "end": 28464.56,
    "text": "But when you get a little bit more advanced with SQL, and setting up relational databases,",
    "textdich": ""
  },
  {
    "start": 28464.56,
    "end": 28468.88,
    "text": "you'll find that it sometimes you don't have to always point to the ID of another table, there's,",
    "textdich": ""
  },
  {
    "start": 28468.88,
    "end": 28472.4,
    "text": "there's going to be a lot of instances where you set up foreign keys to other columns that aren't",
    "textdich": ""
  },
  {
    "start": 28472.4,
    "end": 28477.44,
    "text": "necessarily the ID column, depending on how your relationships are set up and how your application",
    "textdich": ""
  },
  {
    "start": 28477.44,
    "end": 28483.04,
    "text": "should work. That is a perfectly acceptable thing. There's no specific restrictions saying that it",
    "textdich": ""
  },
  {
    "start": 28483.04,
    "end": 28488.96,
    "text": "has to point to the ID column of another table. And so I think that's enough theory behind foreign",
    "textdich": ""
  },
  {
    "start": 28488.96,
    "end": 28492.88,
    "text": "keys and relationships. So we're going to connect to our Postgres database in the next section,",
    "textdich": ""
  },
  {
    "start": 28492.88,
    "end": 28497.28,
    "text": "and we'll start creating that extra column adding the foreign keys, and then not we'll start learning",
    "textdich": ""
  },
  {
    "start": 28497.28,
    "end": 28503.04,
    "text": "about how to actually work with these relationships. Okay, go ahead and open up PG admin. And before",
    "textdich": ""
  },
  {
    "start": 28503.04,
    "end": 28506.88,
    "text": "we get started, I'm going to do something a little unusual, I'm going to delete everything from our",
    "textdich": ""
  },
  {
    "start": 28506.88,
    "end": 28512.08,
    "text": "post table. Now, when it comes to creating an extra column and creating a foreign key, that's",
    "textdich": ""
  },
  {
    "start": 28512.08,
    "end": 28515.6,
    "text": "not a requirement, you know, you don't need to do that in a production database, I'm just going to",
    "textdich": ""
  },
  {
    "start": 28515.6,
    "end": 28520.24,
    "text": "delete everything just to keep just to make things a little bit more simple moving forward. Because",
    "textdich": ""
  },
  {
    "start": 28520.24,
    "end": 28523.84,
    "text": "if we don't delete any things, when you start to add columns that especially have a not null",
    "textdich": ""
  },
  {
    "start": 28523.84,
    "end": 28528.16,
    "text": "constraint, we have to do a little magic to kind of get that to work. And I want to keep things as",
    "textdich": ""
  },
  {
    "start": 28528.16,
    "end": 28531.68,
    "text": "simple as possible. So we're going to do is we're just going to delete everything from the post",
    "textdich": ""
  },
  {
    "start": 28531.68,
    "end": 28537.6,
    "text": "table just to make things as simple as possible. So we can just say delete from posts. And that",
    "textdich": ""
  },
  {
    "start": 28537.6,
    "end": 28542.64,
    "text": "should delete everything. And everything's gone. And we should be pretty much good to go to actually",
    "textdich": ""
  },
  {
    "start": 28542.64,
    "end": 28547.6,
    "text": "start setting up our foreign key. So right click on your post table, and then click on properties.",
    "textdich": ""
  },
  {
    "start": 28547.6,
    "end": 28551.12,
    "text": "And the great part about these foreign keys is that, you know, we just have to do this on the",
    "textdich": ""
  },
  {
    "start": 28551.12,
    "end": 28555.36,
    "text": "post table, because it's a one to many relationship, there is nothing in the users table that we have",
    "textdich": ""
  },
  {
    "start": 28555.36,
    "end": 28560.48,
    "text": "to do. So we're going to do is we're going to go to column. And then we're going to add a new column.",
    "textdich": ""
  },
  {
    "start": 28565.68,
    "end": 28570.08,
    "text": "And I'm going to call this user underscore ID. And you can once again, name this anything you want,",
    "textdich": ""
  },
  {
    "start": 28570.08,
    "end": 28574.72,
    "text": "the actual name doesn't have to make sense. But, you know, I think naming it user underscore ID",
    "textdich": ""
  },
  {
    "start": 28574.72,
    "end": 28578.16,
    "text": "makes sense, because this is a column that's going to represent the idea of the user that created our",
    "textdich": ""
  },
  {
    "start": 28578.16,
    "end": 28583.92,
    "text": "post, the data type. Now, this is important, because the data type of this column needs to",
    "textdich": ""
  },
  {
    "start": 28583.92,
    "end": 28591.6,
    "text": "match whatever the data type is of the ID column from the users table. So we always set the idea",
    "textdich": ""
  },
  {
    "start": 28591.6,
    "end": 28595.68,
    "text": "to be integer. So you want to match this. However, keep in mind that sometimes when you're working",
    "textdich": ""
  },
  {
    "start": 28595.68,
    "end": 28600.24,
    "text": "with data spaces, it might be some other data type, right? If you use big int, you definitely",
    "textdich": ""
  },
  {
    "start": 28600.24,
    "end": 28603.44,
    "text": "want to make sure that this is also a big int. If you use a small int, make sure there's a small",
    "textdich": ""
  },
  {
    "start": 28603.44,
    "end": 28608.16,
    "text": "int. If you use UUIDs, make sure that this is a UUID as well, you just want to match up with",
    "textdich": ""
  },
  {
    "start": 28608.16,
    "end": 28614.56,
    "text": "whatever that column is in that respective table. Now, we have the options to set this as not null.",
    "textdich": ""
  },
  {
    "start": 28614.56,
    "end": 28619.76,
    "text": "So right now, we can create a post with a null user, which means there's no user that created",
    "textdich": ""
  },
  {
    "start": 28619.76,
    "end": 28625.84,
    "text": "this post. And if and to figure out if you should set this to be not knowledge, it depends on how",
    "textdich": ""
  },
  {
    "start": 28625.84,
    "end": 28630.96,
    "text": "you want to set up your application. Should the database allow you to have a post without a user,",
    "textdich": ""
  },
  {
    "start": 28630.96,
    "end": 28635.84,
    "text": "it's up to you to decide I'm going to say no for now. I'm gonna say not no, because I don't want",
    "textdich": ""
  },
  {
    "start": 28635.84,
    "end": 28642.16,
    "text": "to be able to create a post without a user. It doesn't make sense. And then after that,",
    "textdich": ""
  },
  {
    "start": 28642.16,
    "end": 28647.36,
    "text": "what we can do is we have to set up our foreign key constraint. So let's go to constraints.",
    "textdich": ""
  },
  {
    "start": 28648.72,
    "end": 28654.16,
    "text": "And then we want to go under foreign key. So this is where we set up that magical connection between",
    "textdich": ""
  },
  {
    "start": 28654.16,
    "end": 28658.8,
    "text": "the two tables, hit the plus sign, and then give this foreign key a name, the name of the foreign",
    "textdich": ""
  },
  {
    "start": 28658.8,
    "end": 28663.44,
    "text": "key doesn't matter. Right? It doesn't impact the functionality or thing. This is more just for you",
    "textdich": ""
  },
  {
    "start": 28663.44,
    "end": 28668.8,
    "text": "as a user to be able to read it a little bit more clearly when you see it on the CLI. But there's a",
    "textdich": ""
  },
  {
    "start": 28668.8,
    "end": 28673.44,
    "text": "standard convention that we like to use when it comes to naming our foreign keys. What we like to",
    "textdich": ""
  },
  {
    "start": 28673.44,
    "end": 28681.04,
    "text": "do is we like to take the table that we're working on. So it's going to be posts. And then we do",
    "textdich": ""
  },
  {
    "start": 28681.04,
    "end": 28686.56,
    "text": "underscore, then the table that we want to set a foreign key to. So it's going to be users. And",
    "textdich": ""
  },
  {
    "start": 28686.56,
    "end": 28693.44,
    "text": "then we just do underscore f key. Once again, this is just nothing more than a name to describe the",
    "textdich": ""
  },
  {
    "start": 28693.44,
    "end": 28697.52,
    "text": "foreign key. It's not actually doing anything at the moment. To actually set up the logic of the",
    "textdich": ""
  },
  {
    "start": 28697.52,
    "end": 28702.96,
    "text": "foreign key, we have to open this up. And we have to go under columns. And so this is how we actually",
    "textdich": ""
  },
  {
    "start": 28702.96,
    "end": 28708.72,
    "text": "set up the relationship. So here we're saying, what is the name of the local column? The column",
    "textdich": ""
  },
  {
    "start": 28708.72,
    "end": 28714.72,
    "text": "in our posts data table, what we created our brand new user underscore ID, then it's going to",
    "textdich": ""
  },
  {
    "start": 28714.72,
    "end": 28718.72,
    "text": "reference what table? Well, we know it's going to reference the user's table. So we select the",
    "textdich": ""
  },
  {
    "start": 28718.72,
    "end": 28722.88,
    "text": "user's table. And then what column from the user's table is it going to reference? Well,",
    "textdich": ""
  },
  {
    "start": 28722.88,
    "end": 28728.72,
    "text": "it's going to reference the ID column of the user table. And at that point, you just hit plus,",
    "textdich": ""
  },
  {
    "start": 28728.72,
    "end": 28734.16,
    "text": "it gets added up here. And before we move on, there's one last thing I want to cover.",
    "textdich": ""
  },
  {
    "start": 28734.8,
    "end": 28741.04,
    "text": "Because we're almost done, we have to go under actions. And because we're setting this relationship",
    "textdich": ""
  },
  {
    "start": 28741.04,
    "end": 28746.32,
    "text": "up between two different tables, we have to figure out, you know, what happens when a user gets",
    "textdich": ""
  },
  {
    "start": 28746.32,
    "end": 28752.08,
    "text": "deleted, right? Because right now, a post is going to have the idea of the user that created it. What",
    "textdich": ""
  },
  {
    "start": 28752.08,
    "end": 28756.4,
    "text": "do we delete that user? What do we do? So if you go to the on delete section, we have a couple of",
    "textdich": ""
  },
  {
    "start": 28756.4,
    "end": 28762.72,
    "text": "different options. One of the more common ones is cascade. And so what cascade does is, if I let's",
    "textdich": ""
  },
  {
    "start": 28762.72,
    "end": 28767.84,
    "text": "say I if I have a couple posts that were created by a user with an ID of seven, if I delete that",
    "textdich": ""
  },
  {
    "start": 28767.84,
    "end": 28773.2,
    "text": "user, then Postgres will automatically go into my post table and delete any posts that were created",
    "textdich": ""
  },
  {
    "start": 28773.2,
    "end": 28778.64,
    "text": "by that user. And so that's one option. That's what I'm going to use. However, we have other",
    "textdich": ""
  },
  {
    "start": 28778.64,
    "end": 28783.84,
    "text": "options as well. We can set it to the default value of a column. So if we give the column a",
    "textdich": ""
  },
  {
    "start": 28783.84,
    "end": 28788.96,
    "text": "default value, maybe we create like a like a random ID of zero or something, then it's going",
    "textdich": ""
  },
  {
    "start": 28788.96,
    "end": 28794.88,
    "text": "to assign all of those posts that were created by the deleted user to zero, we can set it to null.",
    "textdich": ""
  },
  {
    "start": 28794.88,
    "end": 28799.04,
    "text": "So if we did set null, then it's just going to set the user ID column to null. If that user gets",
    "textdich": ""
  },
  {
    "start": 28799.04,
    "end": 28803.44,
    "text": "deleted, keep in mind, if you want to be able to use set null, then you have to go back to columns",
    "textdich": ""
  },
  {
    "start": 28803.44,
    "end": 28808.16,
    "text": "and make sure this is not set to allow you to set it to null. So we'd have to set it to no,",
    "textdich": ""
  },
  {
    "start": 28808.16,
    "end": 28810.48,
    "text": "or then it would throw an error when you try to delete someone.",
    "textdich": ""
  },
  {
    "start": 28813.68,
    "end": 28817.76,
    "text": "And then there's a few other options. But we're going to stick to cascade. And then keep in mind,",
    "textdich": ""
  },
  {
    "start": 28817.76,
    "end": 28822.56,
    "text": "you can do the same thing with on update. So what actions do you want to perform when you update",
    "textdich": ""
  },
  {
    "start": 28822.56,
    "end": 28827.52,
    "text": "a specific user in that case, but we'll leave it as no action. For now, I just mainly care about",
    "textdich": ""
  },
  {
    "start": 28827.52,
    "end": 28832.88,
    "text": "the on delete. At this point, that's all you have to do for foreign keys, you just specify the column",
    "textdich": ""
  },
  {
    "start": 28832.88,
    "end": 28839.76,
    "text": "of the other table, it should point to and you're good to go. We'll hit Save. And then we're going",
    "textdich": ""
  },
  {
    "start": 28839.76,
    "end": 28844.56,
    "text": "to go under posts. Well, actually, before we do that, we're going to go under users, we're going",
    "textdich": ""
  },
  {
    "start": 28844.56,
    "end": 28850.8,
    "text": "to view all rows. And let me clear out some of these, there's too many windows open, right? And",
    "textdich": ""
  },
  {
    "start": 28850.8,
    "end": 28858.0,
    "text": "these columns got a little squished. But right now I have three users, it's got an ID of 171819. So",
    "textdich": ""
  },
  {
    "start": 28858.0,
    "end": 28861.68,
    "text": "go ahead and remember that you obviously your database is going to be different. So just",
    "textdich": ""
  },
  {
    "start": 28861.68,
    "end": 28866.96,
    "text": "remember the IDs of a couple users. And what we're going to do is we're going to go under our posts.",
    "textdich": ""
  },
  {
    "start": 28867.76,
    "end": 28873.2,
    "text": "And we're going to view edit. And so right now I have no posts, because I deleted everything.",
    "textdich": ""
  },
  {
    "start": 28873.2,
    "end": 28876.56,
    "text": "So I'm going to create a brand new post. And I'll just call this my first post.",
    "textdich": ""
  },
  {
    "start": 28876.56,
    "end": 28883.68,
    "text": "And the content is just gonna be some random content. I'll leave published blank, because we've",
    "textdich": ""
  },
  {
    "start": 28883.68,
    "end": 28888.48,
    "text": "got a default value. And then right now, if you take a look, we've got this new user ID column.",
    "textdich": ""
  },
  {
    "start": 28888.48,
    "end": 28893.2,
    "text": "So if I try to save a post right now, take a look at what happens, it gives me an error,",
    "textdich": ""
  },
  {
    "start": 28893.2,
    "end": 28898.72,
    "text": "it says null value and column user ID vol violates not null constraint. So because we said that user",
    "textdich": ""
  },
  {
    "start": 28898.72,
    "end": 28905.44,
    "text": "ID cannot be null, we have to provide a user ID. So let's give it an ID. And if we go back to users,",
    "textdich": ""
  },
  {
    "start": 28905.44,
    "end": 28909.68,
    "text": "I can see that there's going to be I can use 17, 18 or 19. So whatever user created this,",
    "textdich": ""
  },
  {
    "start": 28909.68,
    "end": 28914.24,
    "text": "I'll just say john created this, we'll grab an ID of 17. And I'll say that this is going to be",
    "textdich": ""
  },
  {
    "start": 28914.24,
    "end": 28920.72,
    "text": "an ID of 17. And then if we save this, look at that, we now have a relationship between",
    "textdich": ""
  },
  {
    "start": 28920.72,
    "end": 28926.32,
    "text": "the users table and the post table. Let's create another entry. We'll call this second post.",
    "textdich": ""
  },
  {
    "start": 28927.76,
    "end": 28931.2,
    "text": "And it's going to have some random content. And I'll say that this was created by the user with",
    "textdich": ""
  },
  {
    "start": 28931.2,
    "end": 28937.28,
    "text": "an ID of 18. And that should work just fine. Now what I'm going to do now is what happens",
    "textdich": ""
  },
  {
    "start": 28937.28,
    "end": 28942.56,
    "text": "if I create a post and I give it an ID of a user that doesn't exist. So I have IDs of 17, 18,",
    "textdich": ""
  },
  {
    "start": 28942.56,
    "end": 28949.84,
    "text": "19. What happens if I set the user ID column to be a value of 20? Well, let's let's try that out.",
    "textdich": ""
  },
  {
    "start": 28949.84,
    "end": 28955.44,
    "text": "So I'll call this third post. And we'll set the content to be something random.",
    "textdich": ""
  },
  {
    "start": 28955.44,
    "end": 28966.48,
    "text": "And if I set this to 20, let's see what happens. I hit save. Look at this insert or update on table",
    "textdich": ""
  },
  {
    "start": 28966.48,
    "end": 28971.6,
    "text": "posts violates foreign key constraint, there's no user with an ID of 20. Right? So that doesn't",
    "textdich": ""
  },
  {
    "start": 28971.6,
    "end": 28976.08,
    "text": "exist in that table. So it's going to throw an error. So that's the magic behind foreign keys",
    "textdich": ""
  },
  {
    "start": 28976.08,
    "end": 28980.72,
    "text": "that it's going to check to make sure that that user actually exists. And so this isn't going to",
    "textdich": ""
  },
  {
    "start": 28980.72,
    "end": 28988.0,
    "text": "work. So we'll just set this to 17 as well. Now save that. Right. And that's it, guys. And when",
    "textdich": ""
  },
  {
    "start": 28988.0,
    "end": 28993.28,
    "text": "it comes to, you know, kind of querying these users, right, let's go back to our database.",
    "textdich": ""
  },
  {
    "start": 28993.28,
    "end": 28998.16,
    "text": "And let's just set up a query. Now let's say I want to get all of the posts created by user",
    "textdich": ""
  },
  {
    "start": 28998.16,
    "end": 29007.44,
    "text": "17. Well, we can do select star from posts, where, and now instead of, you know, searching",
    "textdich": ""
  },
  {
    "start": 29007.44,
    "end": 29013.52,
    "text": "for based off ID, we grab the user ID column. And we set that equal to 17. So this is going to get",
    "textdich": ""
  },
  {
    "start": 29013.52,
    "end": 29019.04,
    "text": "me all of the posts that were created by user 17. I run that you can see that this got the two posts",
    "textdich": ""
  },
  {
    "start": 29019.04,
    "end": 29024.0,
    "text": "from user 17. And then if I change this to 18, we're going to get the one post created by user",
    "textdich": ""
  },
  {
    "start": 29024.0,
    "end": 29028.72,
    "text": "18. So from the SQL perspective, right, nothing's really changed, you just specify what column you",
    "textdich": ""
  },
  {
    "start": 29028.72,
    "end": 29034.24,
    "text": "want to match on and then provide a condition. Now, what I'm going to do now is I'm actually going to",
    "textdich": ""
  },
  {
    "start": 29034.24,
    "end": 29041.28,
    "text": "delete this user. So I'm going to go and just say, delete from users, where ID equals 70. So we're",
    "textdich": ""
  },
  {
    "start": 29041.28,
    "end": 29048.4,
    "text": "going to delete john edge email. And we're going to actually do that here. So I'll say, first of",
    "textdich": ""
  },
  {
    "start": 29048.4,
    "end": 29058.4,
    "text": "all, select star from posts. All right, so we've got all three posts. And I'm going to run another",
    "textdich": ""
  },
  {
    "start": 29058.4,
    "end": 29068.0,
    "text": "query, except I'm gonna say delete from users, where ID equals 17. So what is going to happen",
    "textdich": ""
  },
  {
    "start": 29068.0,
    "end": 29072.56,
    "text": "when we delete those users, because we have posts that have relationships to them? Well, since we",
    "textdich": ""
  },
  {
    "start": 29072.56,
    "end": 29077.36,
    "text": "set the on delete to cascade, it should delete these posts automatically for us. So I'm going",
    "textdich": ""
  },
  {
    "start": 29077.36,
    "end": 29080.72,
    "text": "to leave this down here. So it's going to run another query so we can see exactly what our",
    "textdich": ""
  },
  {
    "start": 29080.72,
    "end": 29086.48,
    "text": "table looks like after we delete this user. And so if I run this, you can see that when I run a",
    "textdich": ""
  },
  {
    "start": 29086.48,
    "end": 29091.12,
    "text": "select star from posts, there's only one entry left. And that's the one with the user ID of 18,",
    "textdich": ""
  },
  {
    "start": 29091.12,
    "end": 29100.0,
    "text": "because it automatically deleted all of the posts created with an ID of 17. All right, and so from",
    "textdich": ""
  },
  {
    "start": 29100.0,
    "end": 29106.56,
    "text": "a database perspective, I think this is all we really need to cover for now. Eventually, we'll",
    "textdich": ""
  },
  {
    "start": 29106.56,
    "end": 29111.92,
    "text": "start taking a look at joins, which is how to run these complex SQL commands that allow you to jam",
    "textdich": ""
  },
  {
    "start": 29111.92,
    "end": 29118.24,
    "text": "the columns of multiple tables into one result to make it a little bit easier to retrieve information.",
    "textdich": ""
  },
  {
    "start": 29118.24,
    "end": 29124.0,
    "text": "Because right now, if I, if I try to get all of the posts, you know, like send me every single",
    "textdich": ""
  },
  {
    "start": 29124.0,
    "end": 29128.64,
    "text": "post on my database, right, it's just going to give me the user ID. But if I need the information",
    "textdich": ""
  },
  {
    "start": 29128.64,
    "end": 29133.04,
    "text": "about the user, like what's the name of the user, what's the username or the email, then I would",
    "textdich": ""
  },
  {
    "start": 29133.04,
    "end": 29139.04,
    "text": "have to individually query the the IDs of these users. So I'd have to go then I'd have to do,",
    "textdich": ""
  },
  {
    "start": 29139.04,
    "end": 29144.32,
    "text": "you know, a select, whoops, make sure I don't delete anything. I'd have to do a select star",
    "textdich": ""
  },
  {
    "start": 29145.36,
    "end": 29153.2,
    "text": "from users, where ID equals 18. And I have to do this one by one for every single post.",
    "textdich": ""
  },
  {
    "start": 29154.24,
    "end": 29158.16,
    "text": "So that I can get this specific user. And so that's when we start to make use of things like",
    "textdich": ""
  },
  {
    "start": 29158.16,
    "end": 29162.48,
    "text": "joins. But that's a little ahead of us at the moment. And that takes a little while to explain.",
    "textdich": ""
  },
  {
    "start": 29162.48,
    "end": 29167.6,
    "text": "So we're going to come back to that. But before we actually kind of move on from this database side",
    "textdich": ""
  },
  {
    "start": 29167.6,
    "end": 29171.6,
    "text": "of things, because we pretty much covered everything, we're going to delete that column",
    "textdich": ""
  },
  {
    "start": 29171.6,
    "end": 29175.92,
    "text": "for now, because we're going to make sure that SQL alchemy actually sets up all of these constraints",
    "textdich": ""
  },
  {
    "start": 29175.92,
    "end": 29180.56,
    "text": "for us automatically, so that we don't manually have to do it. So let's go to our properties,",
    "textdich": ""
  },
  {
    "start": 29180.56,
    "end": 29186.48,
    "text": "go to columns, we can just delete this column. And then I think this should automatically delete",
    "textdich": ""
  },
  {
    "start": 29186.48,
    "end": 29190.24,
    "text": "the foreign key, it does not delete the foreign key. So make sure you delete that as well.",
    "textdich": ""
  },
  {
    "start": 29190.24,
    "end": 29202.96,
    "text": "And then we can save that. And it looks like there's thrown an error.",
    "textdich": ""
  },
  {
    "start": 29206.4,
    "end": 29211.2,
    "text": "So let me cancel out of that. And I think we're gonna have to do this in a two step process.",
    "textdich": ""
  },
  {
    "start": 29211.2,
    "end": 29218.64,
    "text": "So we'll say constraints will delete the foreign key. First, we'll save that and then",
    "textdich": ""
  },
  {
    "start": 29218.64,
    "end": 29229.52,
    "text": "properties will delete the user ID. There we go. And so now if I do a select star from posts,",
    "textdich": ""
  },
  {
    "start": 29232.32,
    "end": 29236.24,
    "text": "right, there should no longer be a user ID column. So this put our database back into the",
    "textdich": ""
  },
  {
    "start": 29236.88,
    "end": 29243.2,
    "text": "state it was in before we started playing around with it. So now that we know how to create and",
    "textdich": ""
  },
  {
    "start": 29243.2,
    "end": 29248.48,
    "text": "set up a foreign key within Postgres and PG admin, we're going to see how we can do this",
    "textdich": ""
  },
  {
    "start": 29248.48,
    "end": 29253.92,
    "text": "through code using SQL alchemy. Because ideally, since we're already using SQL alchemy to generate",
    "textdich": ""
  },
  {
    "start": 29253.92,
    "end": 29258.24,
    "text": "all the tables, generate all the columns for each table and all the different properties,",
    "textdich": ""
  },
  {
    "start": 29258.24,
    "end": 29262.8,
    "text": "we should also set it up to the generate the foreign key for us as well. So we're going to",
    "textdich": ""
  },
  {
    "start": 29262.8,
    "end": 29266.56,
    "text": "go to the models at p y file, this is where we define what the tables are going to look like",
    "textdich": ""
  },
  {
    "start": 29266.56,
    "end": 29272.72,
    "text": "with the different classes. And we're going to add a new user ID or owner ID column to the post",
    "textdich": ""
  },
  {
    "start": 29272.72,
    "end": 29279.36,
    "text": "class. And that's going to create a specific column within the posts table. And so we can",
    "textdich": ""
  },
  {
    "start": 29279.36,
    "end": 29283.2,
    "text": "just go here and you know, call it owner ID, user ID, whatever you want, I'm just going to call this",
    "textdich": ""
  },
  {
    "start": 29283.2,
    "end": 29289.84,
    "text": "owner ID. And this is going to be column. And then here we have to specify the data type of a column.",
    "textdich": ""
  },
  {
    "start": 29289.84,
    "end": 29295.68,
    "text": "And as I mentioned, the data type should match up with whatever the data type of the foreign key",
    "textdich": ""
  },
  {
    "start": 29295.68,
    "end": 29301.04,
    "text": "is. So since this column is going to point to the ID column of the user table, it should match up",
    "textdich": ""
  },
  {
    "start": 29301.04,
    "end": 29307.68,
    "text": "with whatever is here. So since this is integer, this has to be integer as well. Then to set up",
    "textdich": ""
  },
  {
    "start": 29307.68,
    "end": 29313.2,
    "text": "a foreign key constraint, you just type in foreign key, and then go ahead and auto import that if you",
    "textdich": ""
  },
  {
    "start": 29313.2,
    "end": 29317.2,
    "text": "don't know where it's getting imported from, it's going to get imported from SQL alchemy. So if you",
    "textdich": ""
  },
  {
    "start": 29317.2,
    "end": 29321.2,
    "text": "didn't automatically do it, you can go ahead and just manually type that out. And then there's going",
    "textdich": ""
  },
  {
    "start": 29321.2,
    "end": 29325.12,
    "text": "to be two fields that we're going to pass in. So the first of all, we have to pass in the exact",
    "textdich": ""
  },
  {
    "start": 29325.12,
    "end": 29331.44,
    "text": "column and table table and column that we want to reference. And so we want the users table and then",
    "textdich": ""
  },
  {
    "start": 29331.44,
    "end": 29335.92,
    "text": "grabbing the ID column. And so your instinct would be to use the class name, but we don't actually",
    "textdich": ""
  },
  {
    "start": 29335.92,
    "end": 29339.76,
    "text": "reference the class name instead, we want to reference the table name. So it's going to be",
    "textdich": ""
  },
  {
    "start": 29339.76,
    "end": 29344.8,
    "text": "lowercase in this case, so you say users dot and then what's the column name, it's called ID. So we",
    "textdich": ""
  },
  {
    "start": 29344.8,
    "end": 29351.28,
    "text": "say dot ID. And then the second thing we need to do is if you recall, we have to set up what the",
    "textdich": ""
  },
  {
    "start": 29351.28,
    "end": 29359.04,
    "text": "policy is for when we delete the foreign key or the parent table. And so we always used cascade,",
    "textdich": ""
  },
  {
    "start": 29359.04,
    "end": 29363.52,
    "text": "so that if the parent object gets deleted, all of the child object objects get deleted as well.",
    "textdich": ""
  },
  {
    "start": 29363.52,
    "end": 29369.84,
    "text": "So we can do that through SQL alchemy as well. And we'll say on delete equals and then we just say",
    "textdich": ""
  },
  {
    "start": 29369.84,
    "end": 29377.84,
    "text": "cascade. And then finally, we want this field to be nullable equals false. So it has to be filled in.",
    "textdich": ""
  },
  {
    "start": 29377.84,
    "end": 29383.76,
    "text": "All right. And now if we save this, restart our application, we'll take a look at Postgres.",
    "textdich": ""
  },
  {
    "start": 29385.84,
    "end": 29390.72,
    "text": "And if I actually refresh this, and this is actually an old,",
    "textdich": ""
  },
  {
    "start": 29392.88,
    "end": 29397.92,
    "text": "an old panel, so I'm going to remove that. And then if I just do, we'll go to our post table,",
    "textdich": ""
  },
  {
    "start": 29397.92,
    "end": 29401.84,
    "text": "go to query tool, I'll say select star from posts.",
    "textdich": ""
  },
  {
    "start": 29401.84,
    "end": 29408.32,
    "text": "Run that, you can see that there is no actual owner ID column. And so the reason for this",
    "textdich": ""
  },
  {
    "start": 29408.32,
    "end": 29413.92,
    "text": "is that SQL alchemy, when it when we start our application, SQL alchemy, we'll check to see if",
    "textdich": ""
  },
  {
    "start": 29413.92,
    "end": 29418.96,
    "text": "there's a table called posts. And if there is, oh, sorry, if there isn't, it's going to then create a",
    "textdich": ""
  },
  {
    "start": 29418.96,
    "end": 29424.0,
    "text": "table based off of these rules. However, if there's already a table named posts, it's not going to do",
    "textdich": ""
  },
  {
    "start": 29424.0,
    "end": 29428.4,
    "text": "anything. So if we update any properties for a pre existing table, it's not going to change that.",
    "textdich": ""
  },
  {
    "start": 29428.4,
    "end": 29434.0,
    "text": "That's not exactly what SQL alchemy is meant for. Instead, we would have to use a database migration",
    "textdich": ""
  },
  {
    "start": 29434.0,
    "end": 29439.76,
    "text": "tool, kind of like alembic, which we haven't covered yet. So instead, for now, what we're going",
    "textdich": ""
  },
  {
    "start": 29439.76,
    "end": 29443.92,
    "text": "to do is we have a couple of different options, we can manually just do it, go into PGA admin, add",
    "textdich": ""
  },
  {
    "start": 29443.92,
    "end": 29448.48,
    "text": "the things yourselves. Or we can just take the easy way out. Since this is a development environment,",
    "textdich": ""
  },
  {
    "start": 29448.48,
    "end": 29456.4,
    "text": "we can just drop our post table. And that's one of the luxuries of working in development. So",
    "textdich": ""
  },
  {
    "start": 29456.4,
    "end": 29463.76,
    "text": "you can then hit Save again. And that's going to cause it to restart the application, the application.",
    "textdich": ""
  },
  {
    "start": 29463.76,
    "end": 29468.96,
    "text": "And then if we go to Postgres, and we just hit refresh, it's going to create a new post table.",
    "textdich": ""
  },
  {
    "start": 29468.96,
    "end": 29473.92,
    "text": "And then we can go into properties. And we'll go into columns. And we now see that we have an owner",
    "textdich": ""
  },
  {
    "start": 29473.92,
    "end": 29479.68,
    "text": "ID column, which is set to not null. That's good. And then if we go to constraints, foreign key,",
    "textdich": ""
  },
  {
    "start": 29479.68,
    "end": 29483.44,
    "text": "you'll see that we've got our foreign key. And you can take a look at the details down here.",
    "textdich": ""
  },
  {
    "start": 29483.44,
    "end": 29491.52,
    "text": "And the main thing I want to check is for actions, we do have on delete cascade. All right, and so",
    "textdich": ""
  },
  {
    "start": 29491.52,
    "end": 29496.72,
    "text": "now that we have everything set up, if I just run this query again, we should see the owner ID show",
    "textdich": ""
  },
  {
    "start": 29496.72,
    "end": 29502.24,
    "text": "up. So let's create a few entries. And before I do that, I need to make sure that I actually have",
    "textdich": ""
  },
  {
    "start": 29502.24,
    "end": 29508.4,
    "text": "some users, because I kind of went in and deleted a few things. So I've got two users with an ID of",
    "textdich": ""
  },
  {
    "start": 29508.4,
    "end": 29514.56,
    "text": "20 and 21. And so what we're going to do is we're going to make sure that the foreign key points to",
    "textdich": ""
  },
  {
    "start": 29514.56,
    "end": 29519.36,
    "text": "one of those IDs. So we'll grab a post, I'm going to just set this to be post one as the title.",
    "textdich": ""
  },
  {
    "start": 29519.36,
    "end": 29525.76,
    "text": "And it's going to be some gibberish. And then we can set the post, the owner ID to be the ID of a",
    "textdich": ""
  },
  {
    "start": 29525.76,
    "end": 29530.96,
    "text": "user that we already have in our database. We'll save this. And we can see that it's successfully",
    "textdich": ""
  },
  {
    "start": 29530.96,
    "end": 29539.84,
    "text": "created. Now if I create a new post, and this time leaving the owner ID blank, if I hit save,",
    "textdich": ""
  },
  {
    "start": 29539.84,
    "end": 29546.08,
    "text": "you can see that it throws an error because this can't be set to null. And if I try a ID of a user",
    "textdich": ""
  },
  {
    "start": 29546.08,
    "end": 29550.88,
    "text": "that doesn't exist, like 57, it should also throw an error. And so it's saying that hey, the owner",
    "textdich": ""
  },
  {
    "start": 29550.88,
    "end": 29556.88,
    "text": "ID of 57 does not exist in the user's table. And I'll just change this to 21. And then it should",
    "textdich": ""
  },
  {
    "start": 29556.88,
    "end": 29563.84,
    "text": "work. Great. Now let's quickly check out the on delete functionality just to make sure that it",
    "textdich": ""
  },
  {
    "start": 29563.84,
    "end": 29571.04,
    "text": "works. And what we're going to do is let's go to well, I'll just run the query right here. We'll",
    "textdich": ""
  },
  {
    "start": 29571.04,
    "end": 29577.84,
    "text": "do delete from and we'll say users where ID equals and we're going to delete the user with an ID of",
    "textdich": ""
  },
  {
    "start": 29577.84,
    "end": 29582.88,
    "text": "20. So if everything works, we should see just this entry also get deleted in the post table",
    "textdich": ""
  },
  {
    "start": 29582.88,
    "end": 29587.92,
    "text": "because the owner is has an ID of 20. And since that owner is going to be deleted, then we should",
    "textdich": ""
  },
  {
    "start": 29587.92,
    "end": 29592.48,
    "text": "only have this one left. So if I run this, yep, we can see that the one with the owner ID of 20 is",
    "textdich": ""
  },
  {
    "start": 29592.48,
    "end": 29598.48,
    "text": "now deleted. All right, and so that kind of handles all of the database side of things. At this point,",
    "textdich": ""
  },
  {
    "start": 29598.48,
    "end": 29601.84,
    "text": "if you try to test the rest of your application, you're going to probably run into a couple of",
    "textdich": ""
  },
  {
    "start": 29601.84,
    "end": 29606.88,
    "text": "issues. But that's just because you know, we've hard coded our schema to match a certain, you",
    "textdich": ""
  },
  {
    "start": 29606.88,
    "end": 29611.44,
    "text": "know, number of properties. And so since we've added this new property to our posts, we're going",
    "textdich": ""
  },
  {
    "start": 29611.44,
    "end": 29615.52,
    "text": "to throw a few errors. So we're going to have to update a few things in the next video. But you'll",
    "textdich": ""
  },
  {
    "start": 29615.52,
    "end": 29620.8,
    "text": "see that updating your schema is very simple. With the changes we made in the last lecture,",
    "textdich": ""
  },
  {
    "start": 29620.8,
    "end": 29625.12,
    "text": "it's inevitably going to cause some issues with our application. So there's going to be a few",
    "textdich": ""
  },
  {
    "start": 29625.12,
    "end": 29629.76,
    "text": "things that we have to update within our app. And so let's just quickly run through a couple of our",
    "textdich": ""
  },
  {
    "start": 29629.76,
    "end": 29633.6,
    "text": "requests just to see what they look like, see what changes we need to make. And so if you haven't",
    "textdich": ""
  },
  {
    "start": 29633.6,
    "end": 29639.28,
    "text": "already done so, log in a user. And so once we're logged in, we should update the variable. And now",
    "textdich": ""
  },
  {
    "start": 29639.28,
    "end": 29643.68,
    "text": "we can retrieve our posts. So if I hit send here, you could say that we retrieve all of the posts",
    "textdich": ""
  },
  {
    "start": 29643.68,
    "end": 29648.24,
    "text": "in our application, I just have one in this case. But the first issue that I see is that we're not",
    "textdich": ""
  },
  {
    "start": 29648.24,
    "end": 29653.68,
    "text": "returning the owner ID, right, this is a brand new column. And I would expect this information to get",
    "textdich": ""
  },
  {
    "start": 29653.68,
    "end": 29658.56,
    "text": "sent out to the user. And the reason why it's not included in here is that we have to actually",
    "textdich": ""
  },
  {
    "start": 29658.56,
    "end": 29662.08,
    "text": "update our schema, because our schema probably doesn't have that own right, because we never added",
    "textdich": ""
  },
  {
    "start": 29662.08,
    "end": 29665.84,
    "text": "that in. And you might be thinking, well, do we actually need to send it? Yeah, I think it makes",
    "textdich": ""
  },
  {
    "start": 29665.84,
    "end": 29670.4,
    "text": "sense for us to send it because any application the user should know who creates a post. So",
    "textdich": ""
  },
  {
    "start": 29670.4,
    "end": 29674.4,
    "text": "ultimately, they're going to have to get that information. And so we should provide the owner",
    "textdich": ""
  },
  {
    "start": 29674.4,
    "end": 29682.64,
    "text": "ID. So let's go to our code. And if you actually go to the posts, router, and take a look at the",
    "textdich": ""
  },
  {
    "start": 29682.64,
    "end": 29689.2,
    "text": "get all posts, you'll see that the response model is going to reference schemas.post. So let's go",
    "textdich": ""
  },
  {
    "start": 29689.2,
    "end": 29696.24,
    "text": "to schemas.post. And you can see that this is what we're using to return. This is the schema that",
    "textdich": ""
  },
  {
    "start": 29696.24,
    "end": 29701.84,
    "text": "we're going to use for returning post to a user. And so this actually inherits from post base. So",
    "textdich": ""
  },
  {
    "start": 29701.84,
    "end": 29707.68,
    "text": "post base has title content published. And then we extend that and we're going to add the ID,",
    "textdich": ""
  },
  {
    "start": 29707.68,
    "end": 29711.92,
    "text": "which gets created at the database level, as well as the date and time or the created that field,",
    "textdich": ""
  },
  {
    "start": 29711.92,
    "end": 29718.08,
    "text": "which gets added by the database. So we can add it here. However, I'm sure you'd think",
    "textdich": ""
  },
  {
    "start": 29718.08,
    "end": 29722.48,
    "text": "well, could we add it at post base? Should we add it post create? Well, let's think about this.",
    "textdich": ""
  },
  {
    "start": 29722.48,
    "end": 29728.72,
    "text": "The first thing that we have to think about is, when we create a post, should we be passing in",
    "textdich": ""
  },
  {
    "start": 29728.72,
    "end": 29736.4,
    "text": "a owner ID? Well, that we 100% absolutely could do that. And that actually does kind of make sense.",
    "textdich": ""
  },
  {
    "start": 29736.4,
    "end": 29741.92,
    "text": "So in that case, if we did want it to be available, or require it for creating a post, then we would",
    "textdich": ""
  },
  {
    "start": 29741.92,
    "end": 29748.32,
    "text": "add it under post create here as well. Or we could just add it under post base so that both of them",
    "textdich": ""
  },
  {
    "start": 29748.32,
    "end": 29752.72,
    "text": "inherited. However, what we're going to do is we're actually not going to require the user to",
    "textdich": ""
  },
  {
    "start": 29752.72,
    "end": 29758.24,
    "text": "provide the owner ID. Instead, what we're actually going to do is we're going to let the the logic",
    "textdich": ""
  },
  {
    "start": 29758.24,
    "end": 29764.24,
    "text": "of our route to actually just grab the ID from the token, and then use that as the field. So we",
    "textdich": ""
  },
  {
    "start": 29764.24,
    "end": 29767.92,
    "text": "don't actually need the user to pass that into the body. So we're not going to, we're not going to",
    "textdich": ""
  },
  {
    "start": 29767.92,
    "end": 29772.24,
    "text": "use that field or apply that field to either one of these classes, we're just going to do it for",
    "textdich": ""
  },
  {
    "start": 29772.24,
    "end": 29779.2,
    "text": "the post class, which is the one that's responsible for sending the post out. So I'll add a column",
    "textdich": ""
  },
  {
    "start": 29779.2,
    "end": 29783.6,
    "text": "here. And we'll call it owner ID. And I'm going to say that this is going to be a type of int.",
    "textdich": ""
  },
  {
    "start": 29787.28,
    "end": 29792.32,
    "text": "Alright, let's save that. And let's see if that makes a difference. So let's hit send. And so",
    "textdich": ""
  },
  {
    "start": 29792.32,
    "end": 29796.8,
    "text": "now we can see that we get the owner ID. And that's really all the changes we have to make",
    "textdich": ""
  },
  {
    "start": 29796.8,
    "end": 29802.24,
    "text": "so if we actually go to get one post, and we look at our code here, and if you look at the post.py,",
    "textdich": ""
  },
  {
    "start": 29802.24,
    "end": 29807.68,
    "text": "for getting an individual post, you can see that we're returning the same exact model. And if we",
    "textdich": ""
  },
  {
    "start": 29807.68,
    "end": 29812.4,
    "text": "take a look at creating a post, we return the same model. So all of those will be updated",
    "textdich": ""
  },
  {
    "start": 29812.4,
    "end": 29818.72,
    "text": "accordingly. And same thing with the update post, the update post also uses schemas.post. So since",
    "textdich": ""
  },
  {
    "start": 29818.72,
    "end": 29822.56,
    "text": "we're using the same schema for all of them, we don't have to do anything else. And we could just",
    "textdich": ""
  },
  {
    "start": 29822.56,
    "end": 29830.16,
    "text": "quickly test that out. So I'll do get one post. And I realized we have to actually get what was",
    "textdich": ""
  },
  {
    "start": 29830.16,
    "end": 29836.24,
    "text": "the ID ID is for so we're going to update this to be an idea for you can see that we now have the",
    "textdich": ""
  },
  {
    "start": 29836.24,
    "end": 29844.56,
    "text": "owner ID there, we update it. Right, we can once again get the owner ID. And at that point, it looks",
    "textdich": ""
  },
  {
    "start": 29844.56,
    "end": 29851.76,
    "text": "like everything else is good. However, if we go to create posts real quick, and we create a post,",
    "textdich": ""
  },
  {
    "start": 29851.76,
    "end": 29858.16,
    "text": "right, we get a crash, actually. So there is an issue with creating a post. And I'm sure you guys",
    "textdich": ""
  },
  {
    "start": 29858.16,
    "end": 29864.32,
    "text": "can guess exactly what it is. Take a look at the error when we try to create a post. Right, it's",
    "textdich": ""
  },
  {
    "start": 29864.32,
    "end": 29870.64,
    "text": "saying there's some kind of SQL error. And it says there's a null value in column owner ID. And that",
    "textdich": ""
  },
  {
    "start": 29870.64,
    "end": 29875.6,
    "text": "makes sense. And that makes sense. So we'll actually tackle this in the next video. And you'll see that",
    "textdich": ""
  },
  {
    "start": 29875.6,
    "end": 29880.0,
    "text": "it's going to be pretty straightforward to actually get that resolved. So in the last video, we learned",
    "textdich": ""
  },
  {
    "start": 29880.0,
    "end": 29885.04,
    "text": "that the create post functionality is broken now. Because if I try to create a post, you can see",
    "textdich": ""
  },
  {
    "start": 29885.04,
    "end": 29891.44,
    "text": "that it sends back in a 500 status code. And if we take a look at the logs, we can see that it looks",
    "textdich": ""
  },
  {
    "start": 29891.44,
    "end": 29896.56,
    "text": "like there's some issue with the SQL. And it's saying that the null value in column owner ID",
    "textdich": ""
  },
  {
    "start": 29896.56,
    "end": 29902.8,
    "text": "violates the not null constraint. And so looking at our model, we obviously set the owner ID right",
    "textdich": ""
  },
  {
    "start": 29902.8,
    "end": 29909.2,
    "text": "here. And this is set to be nullable false. So we actually have to provide who the owner ID is",
    "textdich": ""
  },
  {
    "start": 29909.2,
    "end": 29917.6,
    "text": "for this new post. So how do we do that? Well, let's go to our post path operation. And let's",
    "textdich": ""
  },
  {
    "start": 29917.6,
    "end": 29924.0,
    "text": "go to the create post path operation. And so it's right here. And so nowhere in this code are we",
    "textdich": ""
  },
  {
    "start": 29924.0,
    "end": 29930.8,
    "text": "actually providing a user ID or owner ID into this new new post that we're creating, we're just",
    "textdich": ""
  },
  {
    "start": 29930.8,
    "end": 29936.08,
    "text": "grabbing the post, which comes from post create the schema. And if we look at that schema, you can",
    "textdich": ""
  },
  {
    "start": 29936.08,
    "end": 29942.32,
    "text": "see that we do not provide a owner ID. And like I said, we're not going to actually pass the owner",
    "textdich": ""
  },
  {
    "start": 29942.32,
    "end": 29947.36,
    "text": "ID into the in the body, what we're going to do is whoever is logged in and creating the post",
    "textdich": ""
  },
  {
    "start": 29947.36,
    "end": 29950.8,
    "text": "should automatically be the owner, right? If you're logged into Twitter, and you post something,",
    "textdich": ""
  },
  {
    "start": 29950.8,
    "end": 29954.96,
    "text": "Twitter knows that you're the one creating the post. So whatever ID is associated with your",
    "textdich": ""
  },
  {
    "start": 29954.96,
    "end": 29958.96,
    "text": "account, it's going to set that automatically. So we shouldn't have to pass that in the body,",
    "textdich": ""
  },
  {
    "start": 29958.96,
    "end": 29962.64,
    "text": "we should automatically retrieve it from your authentication status.",
    "textdich": ""
  },
  {
    "start": 29962.64,
    "end": 29970.88,
    "text": "So within post, right, you can see that we have the current user. And so we should be able to get",
    "textdich": ""
  },
  {
    "start": 29970.88,
    "end": 29980.08,
    "text": "the current user or the user's ID. So if I do current underscore user dot ID, and we can remove",
    "textdich": ""
  },
  {
    "start": 29980.08,
    "end": 29984.32,
    "text": "this kind of need the email. And if I tried to create a post, it's still going to error out,",
    "textdich": ""
  },
  {
    "start": 29984.32,
    "end": 29988.72,
    "text": "that's okay, I just want to see what it prints out though before the error. And you can see we",
    "textdich": ""
  },
  {
    "start": 29988.72,
    "end": 29995.68,
    "text": "got a lot of errors, that's okay. And you can see that it printed out the ID of my user, which is",
    "textdich": ""
  },
  {
    "start": 29995.68,
    "end": 30001.12,
    "text": "23. And just to double check that that's actually my user, I'm going to select star from users.",
    "textdich": ""
  },
  {
    "start": 30001.12,
    "end": 30006.48,
    "text": "And you can see that 23 is Sanjeev at Gmail. So we could just take that and just add that into",
    "textdich": ""
  },
  {
    "start": 30006.48,
    "end": 30012.8,
    "text": "the new post object. And so we're creating the new post right here where we reference models that",
    "textdich": ""
  },
  {
    "start": 30012.8,
    "end": 30018.72,
    "text": "post. And what we're doing is we're just spreading whoops, we're just spreading out the schema that",
    "textdich": ""
  },
  {
    "start": 30018.72,
    "end": 30024.32,
    "text": "we got from the body. And so to actually add the ID property, it's very easy. All we have to do is",
    "textdich": ""
  },
  {
    "start": 30024.32,
    "end": 30033.2,
    "text": "just say, owner underscore ID is going to be set to current underscore user dot ID. So we're just",
    "textdich": ""
  },
  {
    "start": 30033.2,
    "end": 30039.6,
    "text": "grabbing that from the get current user function, just like we did right here. And I think we",
    "textdich": ""
  },
  {
    "start": 30039.6,
    "end": 30044.8,
    "text": "probably need a comma there. And that should be all that we have to do. So let's, I'm going to",
    "textdich": ""
  },
  {
    "start": 30044.8,
    "end": 30056.56,
    "text": "remove this code. And let's test this out now. So if I do create post, look at that, no errors,",
    "textdich": ""
  },
  {
    "start": 30056.56,
    "end": 30063.52,
    "text": "you can see that the owner ID was automatically set to the ID of my user, which is 23. Currently",
    "textdich": ""
  },
  {
    "start": 30063.52,
    "end": 30068.8,
    "text": "in our application, we do have authentication setup for delete post and update post. However,",
    "textdich": ""
  },
  {
    "start": 30068.8,
    "end": 30074.0,
    "text": "there's no check to make sure that a user is only deleting his own posts. Right now, if you're",
    "textdich": ""
  },
  {
    "start": 30074.0,
    "end": 30078.24,
    "text": "logged in, you can delete anyone's posts. And no application works like that, you should only be",
    "textdich": ""
  },
  {
    "start": 30078.24,
    "end": 30081.52,
    "text": "able to delete your own post, no user should be able to come in and delete one of my posts,",
    "textdich": ""
  },
  {
    "start": 30081.52,
    "end": 30086.08,
    "text": "that doesn't make sense. So let's implement the logic for setting up a quick little just",
    "textdich": ""
  },
  {
    "start": 30086.08,
    "end": 30090.4,
    "text": "if statement just to check, hey, is the person that's logged in trying to delete a post that",
    "textdich": ""
  },
  {
    "start": 30090.4,
    "end": 30094.64,
    "text": "he owns? If he doesn't, then we're going to return an error. And so right now, if you take a look at",
    "textdich": ""
  },
  {
    "start": 30094.64,
    "end": 30099.92,
    "text": "our delete post path operation function, we query the post that he's trying to delete. And we check",
    "textdich": ""
  },
  {
    "start": 30099.92,
    "end": 30104.88,
    "text": "to see if there's no post, if there's no post, then we send a 404 that's expected. But if we did",
    "textdich": ""
  },
  {
    "start": 30104.88,
    "end": 30108.48,
    "text": "find a post, the next check is just going to be another simple if statement. And we're going to",
    "textdich": ""
  },
  {
    "start": 30108.48,
    "end": 30124.96,
    "text": "say if post dot owner underscore ID does not equal get current user dot ID. So these two things",
    "textdich": ""
  },
  {
    "start": 30125.76,
    "end": 30129.44,
    "text": "have to match for the user to be able to delete it, if they don't match, then we're going to send",
    "textdich": ""
  },
  {
    "start": 30129.44,
    "end": 30135.52,
    "text": "another HTTP exception. So we'll say raise HTTP exception. Now the exception will set the status",
    "textdich": ""
  },
  {
    "start": 30135.52,
    "end": 30142.88,
    "text": "code to be a new one. So this one's going to be a 403. So this means forbidden. That's the means",
    "textdich": ""
  },
  {
    "start": 30142.88,
    "end": 30148.88,
    "text": "it's a resource that they specifically aren't able to access because we could send a 401. But they",
    "textdich": ""
  },
  {
    "start": 30148.88,
    "end": 30153.76,
    "text": "are, I guess a 401 could also work. But I'm going to do 403. I think that makes more sense. And then",
    "textdich": ""
  },
  {
    "start": 30153.76,
    "end": 30166.08,
    "text": "we can set the detail. And I'm just going to say not authorized to perform requested action.",
    "textdich": ""
  },
  {
    "start": 30168.48,
    "end": 30173.2,
    "text": "And this exact same check can be used for updating posts as well, because this is the same exact",
    "textdich": ""
  },
  {
    "start": 30173.2,
    "end": 30179.28,
    "text": "logic. And I'll just do that right here, right under the same check. So same logic, right? First",
    "textdich": ""
  },
  {
    "start": 30179.28,
    "end": 30182.16,
    "text": "thing we're gonna do is we're going to check to see if that post exists. And then the next thing",
    "textdich": ""
  },
  {
    "start": 30182.16,
    "end": 30187.52,
    "text": "we're gonna do is we're going to make sure that the owner of the post is whoever the user is",
    "textdich": ""
  },
  {
    "start": 30187.52,
    "end": 30194.24,
    "text": "logged in as. Now let's test this out. So right now, if I do a get posts, you can see that the",
    "textdich": ""
  },
  {
    "start": 30194.24,
    "end": 30200.4,
    "text": "owner, okay, so we've got a post created by both owners. And I'm currently logged in as I actually",
    "textdich": ""
  },
  {
    "start": 30200.4,
    "end": 30206.16,
    "text": "can't remember who I'm logged in as. But we can see that I used Sanjeev at Gmail, and that's going",
    "textdich": ""
  },
  {
    "start": 30206.16,
    "end": 30212.08,
    "text": "to be user 23. And what I'm going to do is go back to get posts. And I'm going to try to delete the",
    "textdich": ""
  },
  {
    "start": 30212.08,
    "end": 30217.44,
    "text": "post with an idea for because that's the owner ID of 21. And keep in mind right now, I'm logged in",
    "textdich": ""
  },
  {
    "start": 30217.44,
    "end": 30225.44,
    "text": "as user 23. So let's try this, we're going to delete post with an idea for Okay, it's already",
    "textdich": ""
  },
  {
    "start": 30225.44,
    "end": 30231.84,
    "text": "set there. So we should get an error in this case. And it looks like I got a server error, that's a",
    "textdich": ""
  },
  {
    "start": 30231.84,
    "end": 30238.56,
    "text": "problem. And I already see the issue. And right now, post is actually not the post itself, it's",
    "textdich": ""
  },
  {
    "start": 30238.56,
    "end": 30243.84,
    "text": "the query. And to actually get a post, I have to do post dot first one. So what I'm going to do",
    "textdich": ""
  },
  {
    "start": 30243.84,
    "end": 30251.6,
    "text": "actually is I could change this to post dot first, and then grab the owner ID. But I'm going to",
    "textdich": ""
  },
  {
    "start": 30251.6,
    "end": 30259.04,
    "text": "actually perform the query right here, I'll say post. Actually, I'll change this to post underscore",
    "textdich": ""
  },
  {
    "start": 30259.04,
    "end": 30264.4,
    "text": "query, we're gonna make a few changes, actually. And I'm going to set this to be post equals post",
    "textdich": ""
  },
  {
    "start": 30264.4,
    "end": 30273.68,
    "text": "underscore query dot first. And then I'm going to set this to be post. And this is going to be set",
    "textdich": ""
  },
  {
    "start": 30273.68,
    "end": 30282.96,
    "text": "to query. And just to kind of quickly recap, we define the query here, we'll then find this post,",
    "textdich": ""
  },
  {
    "start": 30282.96,
    "end": 30289.44,
    "text": "we'll check to see if it's not there. And then we'll check to see if the owner is if the user",
    "textdich": ""
  },
  {
    "start": 30289.44,
    "end": 30293.68,
    "text": "who's logged in actually owns this post. And then we're going to grab the original query. And then",
    "textdich": ""
  },
  {
    "start": 30293.68,
    "end": 30299.28,
    "text": "we're just going to append a delete that we delete it. That's all. And let's just make sure the update",
    "textdich": ""
  },
  {
    "start": 30299.28,
    "end": 30302.8,
    "text": "is set up the same way. And it looks like the update one was already working that way. So it",
    "textdich": ""
  },
  {
    "start": 30302.8,
    "end": 30309.2,
    "text": "should be good to go now. Hopefully, there's no errors. And let's try this. And once again,",
    "textdich": ""
  },
  {
    "start": 30309.2,
    "end": 30318.88,
    "text": "we got an error. And it looks like function object has no attribute ID. And I realized my mistake,",
    "textdich": ""
  },
  {
    "start": 30318.88,
    "end": 30324.4,
    "text": "again, first of all, this is getting stored as current user not get current user. So we need to",
    "textdich": ""
  },
  {
    "start": 30324.4,
    "end": 30333.6,
    "text": "change this to be current user, I'm not sure why I did it like that seems pretty goofy. And then",
    "textdich": ""
  },
  {
    "start": 30333.6,
    "end": 30340.08,
    "text": "this also should be current user. Right, because we're calling that function and we're storing the",
    "textdich": ""
  },
  {
    "start": 30340.08,
    "end": 30344.4,
    "text": "result in current user. So we want to reference the variable. I'm not sure if that was like an",
    "textdich": ""
  },
  {
    "start": 30344.4,
    "end": 30350.24,
    "text": "autocomplete that did that or I just had a brain fart either way. Hopefully, it's the last of our",
    "textdich": ""
  },
  {
    "start": 30350.24,
    "end": 30356.08,
    "text": "issues. So let's try this. All right, perfect. Look at that not authorized to perform that",
    "textdich": ""
  },
  {
    "start": 30356.08,
    "end": 30360.32,
    "text": "requested action that's to be expected because we don't own that post. However, if I do a quick",
    "textdich": ""
  },
  {
    "start": 30360.32,
    "end": 30365.36,
    "text": "search again, I do own the post with an ID of eight because we can see the owner ID is 23. And",
    "textdich": ""
  },
  {
    "start": 30365.36,
    "end": 30368.96,
    "text": "that's who I'm logged in as. So let's try to delete post with a at the value of eight.",
    "textdich": ""
  },
  {
    "start": 30368.96,
    "end": 30375.04,
    "text": "Send, and we get a 204. So that means it's successfully deleted, we'll do get posts just",
    "textdich": ""
  },
  {
    "start": 30375.04,
    "end": 30381.28,
    "text": "to verify. And we can see that we get those are just the one post now. So that seems to be working.",
    "textdich": ""
  },
  {
    "start": 30382.08,
    "end": 30386.96,
    "text": "I'm going to go back in, actually, let me create a post real quick, because I no longer have a post.",
    "textdich": ""
  },
  {
    "start": 30389.2,
    "end": 30394.16,
    "text": "Alright, so we have we created a new post. And so you can see that this is my post right here.",
    "textdich": ""
  },
  {
    "start": 30394.16,
    "end": 30398.88,
    "text": "And I'm going to just update it. So let's go to the update one. First of all, I'm going to try to",
    "textdich": ""
  },
  {
    "start": 30398.88,
    "end": 30402.32,
    "text": "update a post that I don't own. So we're going to try to update the post with an ID of four,",
    "textdich": ""
  },
  {
    "start": 30402.96,
    "end": 30407.44,
    "text": "we should get a not authorized. And then let's grab the ID of the post that we do want to change,",
    "textdich": ""
  },
  {
    "start": 30407.44,
    "end": 30413.04,
    "text": "which is nine. Let's hit send. And it looks like it updated a little bit. Let's check our database",
    "textdich": ""
  },
  {
    "start": 30413.04,
    "end": 30421.36,
    "text": "always. So we'll say select star from posts. And the post with the nine got the updated entry.",
    "textdich": ""
  },
  {
    "start": 30421.36,
    "end": 30428.24,
    "text": "Oh, wait, wait a minute, it looks like it may have updated both of them. Only one way to find",
    "textdich": ""
  },
  {
    "start": 30428.24,
    "end": 30431.52,
    "text": "out if that's actually what's happening. I'm just going to create a quick new post.",
    "textdich": ""
  },
  {
    "start": 30434.48,
    "end": 30436.72,
    "text": "I'm just going to set the ID to be 23.",
    "textdich": ""
  },
  {
    "start": 30438.88,
    "end": 30445.2,
    "text": "Alright, and I'm going to update post with nine with an ID of nine. Okay, and then let's refresh",
    "textdich": ""
  },
  {
    "start": 30445.2,
    "end": 30452.08,
    "text": "this. Okay, so post with an ID of 10 is still the same. So okay, it wasn't a bug. It looks like maybe",
    "textdich": ""
  },
  {
    "start": 30452.08,
    "end": 30458.72,
    "text": "I had changed this earlier. And I'm not exactly sure why I had when I updated this post, but that's",
    "textdich": ""
  },
  {
    "start": 30458.72,
    "end": 30464.72,
    "text": "okay. And so I think that's going to wrap up this video. We've handled the update and delete so that",
    "textdich": ""
  },
  {
    "start": 30464.72,
    "end": 30469.76,
    "text": "we can only update and delete our own posts. Alright, before we proceed any further, I do want",
    "textdich": ""
  },
  {
    "start": 30469.76,
    "end": 30474.8,
    "text": "to talk about one last thing. And that is that when we do get posts, which is an authentic post,",
    "textdich": ""
  },
  {
    "start": 30474.8,
    "end": 30479.2,
    "text": "an authenticated route, so it requires you to be logged in to retrieve the posts. If I try to",
    "textdich": ""
  },
  {
    "start": 30479.2,
    "end": 30484.48,
    "text": "retrieve the post, you'll see I get posts from every user. Now, this may or may not be the",
    "textdich": ""
  },
  {
    "start": 30485.2,
    "end": 30489.04,
    "text": "result that you want, right, it's going to depend on what your application is going to work.",
    "textdich": ""
  },
  {
    "start": 30489.04,
    "end": 30494.64,
    "text": "Look like, you know, if this is like a, you know, like a note taking app or something where all of",
    "textdich": ""
  },
  {
    "start": 30494.64,
    "end": 30499.12,
    "text": "your posts and things like that are all private, then you wouldn't want to return everyone else's",
    "textdich": ""
  },
  {
    "start": 30499.12,
    "end": 30504.0,
    "text": "posts, you'd only want to return the user, the user specific post. However, if this is some kind",
    "textdich": ""
  },
  {
    "start": 30504.0,
    "end": 30507.84,
    "text": "of social media app, right, then obviously, your posts are public. So when you do get post,",
    "textdich": ""
  },
  {
    "start": 30507.84,
    "end": 30513.76,
    "text": "you'd want to return everyone's posts. And so it really just comes down to how you want your app to",
    "textdich": ""
  },
  {
    "start": 30513.76,
    "end": 30517.6,
    "text": "to function, I'm going to show you guys what you would need to change if you wanted to make it so",
    "textdich": ""
  },
  {
    "start": 30517.6,
    "end": 30522.4,
    "text": "that you returned your only your own posts. But after afterwards, we're going to actually delete",
    "textdich": ""
  },
  {
    "start": 30522.4,
    "end": 30525.68,
    "text": "those changes, because I want to leave my app like this, cut, this is kind of how I wanted it to work",
    "textdich": ""
  },
  {
    "start": 30525.68,
    "end": 30529.36,
    "text": "more like a social media app. But I do want to make sure that you guys understood how to make this",
    "textdich": ""
  },
  {
    "start": 30529.36,
    "end": 30534.32,
    "text": "change. And the same thing would go for get one post, we want to make sure that only the user that",
    "textdich": ""
  },
  {
    "start": 30534.32,
    "end": 30540.32,
    "text": "created a post can retrieve that specific post. And so if we go back to our path operation for",
    "textdich": ""
  },
  {
    "start": 30540.32,
    "end": 30546.96,
    "text": "getting all posts, you can see that we just do a db.query.all. And so if you only want to return",
    "textdich": ""
  },
  {
    "start": 30546.96,
    "end": 30551.76,
    "text": "the posts for a specific user that's logged in, it's very simple, all we have to do is do a filter.",
    "textdich": ""
  },
  {
    "start": 30551.76,
    "end": 30562.0,
    "text": "And here, we'll say models dot post dot ID equals equals. And then we just get the current users ID.",
    "textdich": ""
  },
  {
    "start": 30562.0,
    "end": 30571.2,
    "text": "And it looks like I still left this as user ID. So this should actually be updated to be current",
    "textdich": ""
  },
  {
    "start": 30571.2,
    "end": 30576.96,
    "text": "underscore user. And if you notice the you can see that the type is set to int, even though it's",
    "textdich": ""
  },
  {
    "start": 30576.96,
    "end": 30581.44,
    "text": "actually returning an entire user object, I found that this whatever type you put here doesn't",
    "textdich": ""
  },
  {
    "start": 30581.44,
    "end": 30584.96,
    "text": "actually impact the code. So put whatever you want, you can put in a you know, some sort of",
    "textdich": ""
  },
  {
    "start": 30584.96,
    "end": 30590.24,
    "text": "dictionary that actually correctly matches it. But you could just leave it as well. So I'm just",
    "textdich": ""
  },
  {
    "start": 30590.24,
    "end": 30596.08,
    "text": "gonna leave it like that. It doesn't break any logic. And then at this point, I believe I'm still",
    "textdich": ""
  },
  {
    "start": 30596.08,
    "end": 30603.52,
    "text": "logged in as user 23. If I try to retrieve all posts, looks like I got nothing. And that could",
    "textdich": ""
  },
  {
    "start": 30603.52,
    "end": 30608.4,
    "text": "be a little bit of a problem. So let's see what we broke. And the easiest way to kind of troubleshoot",
    "textdich": ""
  },
  {
    "start": 30608.4,
    "end": 30613.36,
    "text": "this is what I'm going to do is I'm actually going to remove the dot all. So that's going to return",
    "textdich": ""
  },
  {
    "start": 30613.36,
    "end": 30617.12,
    "text": "the query, it just won't actually run the query. And I'm just going to print the query. Let's see",
    "textdich": ""
  },
  {
    "start": 30617.12,
    "end": 30624.72,
    "text": "what that looks like. Sometimes it helps to see the raw SQL. Let's hit send. Alright, we should",
    "textdich": ""
  },
  {
    "start": 30624.72,
    "end": 30629.12,
    "text": "get an internal server error that's to be expected. But I just want to see my print statement.",
    "textdich": ""
  },
  {
    "start": 30631.44,
    "end": 30636.24,
    "text": "Alright, so let's see our print statement. So select, we're getting all of the columns that's",
    "textdich": ""
  },
  {
    "start": 30636.24,
    "end": 30646.32,
    "text": "expected from posts where posts ID equals this value. So that looks like it's perfect. Well,",
    "textdich": ""
  },
  {
    "start": 30646.32,
    "end": 30652.56,
    "text": "let's just quickly see before we move any further, what exactly is my user ID. And we'll just check",
    "textdich": ""
  },
  {
    "start": 30652.56,
    "end": 30671.44,
    "text": "our database. Okay, and we'll run this again. And then we're going to check. Alright, so 23. And",
    "textdich": ""
  },
  {
    "start": 30671.44,
    "end": 30676.72,
    "text": "then if we go to our database, and I realized the exact mistake that I made, and this is a stupid",
    "textdich": ""
  },
  {
    "start": 30676.72,
    "end": 30685.36,
    "text": "mistake, right, this is this is looking for a post with an ID with this specific ID, we don't",
    "textdich": ""
  },
  {
    "start": 30685.36,
    "end": 30690.16,
    "text": "want the the ID of the post, we want the owner ID. So we'll do owner underscore ID equals current",
    "textdich": ""
  },
  {
    "start": 30690.16,
    "end": 30701.92,
    "text": "user ID. All right, let's test this out now. Once again, an error, but I just realized I forgot to",
    "textdich": ""
  },
  {
    "start": 30701.92,
    "end": 30710.56,
    "text": "update this to be dot all. And then we'll try this again. And now we get all the posts with an ID",
    "textdich": ""
  },
  {
    "start": 30710.56,
    "end": 30718.4,
    "text": "of 23. If I log in as a different user, let's say this is Sanjeev one login that should update the",
    "textdich": ""
  },
  {
    "start": 30718.4,
    "end": 30723.44,
    "text": "token. So now if I do a get all posts, it should return all posts with an ID of 21. And so that's,",
    "textdich": ""
  },
  {
    "start": 30723.44,
    "end": 30727.36,
    "text": "that's how that works. And then if you want to see how that looks like for retrieving an individual",
    "textdich": ""
  },
  {
    "start": 30727.36,
    "end": 30732.8,
    "text": "post, we'll go to get underscore post. And to actually handle this logic, it's gonna be the",
    "textdich": ""
  },
  {
    "start": 30732.8,
    "end": 30742.24,
    "text": "same thing as a delete. So you can just copy what we did for the delete one. And here I can just say",
    "textdich": ""
  },
  {
    "start": 30742.24,
    "end": 30760.48,
    "text": "post dot owner. And this should do the same exact thing. So now if I do get one post, well, first of",
    "textdich": ""
  },
  {
    "start": 30760.48,
    "end": 30766.08,
    "text": "all, let's take a look at all of our posts. I'm going to do it in our database. So I'm logged in",
    "textdich": ""
  },
  {
    "start": 30766.08,
    "end": 30771.92,
    "text": "as user 21. So I should be able to access a post with four, but I can't access a post with an ID",
    "textdich": ""
  },
  {
    "start": 30771.92,
    "end": 30782.72,
    "text": "of 10. So let's try 10. Am I able to access him? Not authorized. Let's try idea four. And I can get",
    "textdich": ""
  },
  {
    "start": 30782.72,
    "end": 30786.64,
    "text": "that one. So that's how that works. But like I said, I don't want my application to work like that.",
    "textdich": ""
  },
  {
    "start": 30786.64,
    "end": 30790.08,
    "text": "So I'm going to remove that functionality, I'm going to make all posts essentially public.",
    "textdich": ""
  },
  {
    "start": 30793.84,
    "end": 30795.44,
    "text": "And then we're going to remove this filter.",
    "textdich": ""
  },
  {
    "start": 30795.44,
    "end": 30803.04,
    "text": "And I'll remove this print statement and this print statement just to clean things up a bit.",
    "textdich": ""
  },
  {
    "start": 30806.0,
    "end": 30809.36,
    "text": "And let's just double check that we didn't break anything once again. So let's get all posts,",
    "textdich": ""
  },
  {
    "start": 30809.36,
    "end": 30816.08,
    "text": "we get all posts. And let's get an individual post, regardless of who owns it. And that's all",
    "textdich": ""
  },
  {
    "start": 30816.64,
    "end": 30822.48,
    "text": "fine and dandy now. Now, just kind of thinking ahead of what our, you know, front end would look",
    "textdich": ""
  },
  {
    "start": 30822.48,
    "end": 30827.2,
    "text": "like even though we're not going to build it, taking a look at any social media type application,",
    "textdich": ""
  },
  {
    "start": 30827.2,
    "end": 30832.56,
    "text": "you know, when we retrieve the posts, we usually want to embed the user's ID. So we want to know",
    "textdich": ""
  },
  {
    "start": 30832.56,
    "end": 30838.8,
    "text": "who actually created the specific post, we wouldn't just put the owner ID because no, no user, none of",
    "textdich": ""
  },
  {
    "start": 30838.8,
    "end": 30842.56,
    "text": "your users understand that ID, they want to see what is your, you know, Twitter handle, what is",
    "textdich": ""
  },
  {
    "start": 30842.56,
    "end": 30848.96,
    "text": "your email, whoever created that, we want to see their user ID. So it looks like for all of the",
    "textdich": ""
  },
  {
    "start": 30848.96,
    "end": 30854.08,
    "text": "posts that we retrieve, we would have to then send a second query to retrieve, you know, hey,",
    "textdich": ""
  },
  {
    "start": 30854.08,
    "end": 30859.44,
    "text": "what is the information for user with an ID of 23. And then once we get that, we would then have to",
    "textdich": ""
  },
  {
    "start": 30859.44,
    "end": 30864.4,
    "text": "kind of combine all that data so that we can figure out what post it belongs to what user",
    "textdich": ""
  },
  {
    "start": 30864.4,
    "end": 30869.92,
    "text": "and what is their specific username. Now with SQL alchemy, we can kind of set up,",
    "textdich": ""
  },
  {
    "start": 30872.24,
    "end": 30877.44,
    "text": "set it up so that it automatically does this for us. And so if we actually go to our models,",
    "textdich": ""
  },
  {
    "start": 30877.44,
    "end": 30885.52,
    "text": "what I'm going to do is I'm going to set up a relationship. And so this relationship isn't",
    "textdich": ""
  },
  {
    "start": 30885.52,
    "end": 30890.08,
    "text": "a foreign key, it does nothing in the database whatsoever. But what it does is it'll tell SQL",
    "textdich": ""
  },
  {
    "start": 30890.08,
    "end": 30893.76,
    "text": "alchemy to automatically fetch some piece of information based off of the relationship.",
    "textdich": ""
  },
  {
    "start": 30894.64,
    "end": 30901.76,
    "text": "And so here, I could say, we'll create a owner. And I'm going to say owner equals relationship.",
    "textdich": ""
  },
  {
    "start": 30901.76,
    "end": 30909.2,
    "text": "And we probably have to import this. And so it did. So imported relationship from SQL alchemy.ORM.",
    "textdich": ""
  },
  {
    "start": 30910.4,
    "end": 30915.68,
    "text": "And so if you haven't done that, go ahead and do that. And what we'll say is, this is going to",
    "textdich": ""
  },
  {
    "start": 30915.68,
    "end": 30924.8,
    "text": "return the class of another model. So here, I want to return the user. And this is going to be a",
    "textdich": ""
  },
  {
    "start": 30924.8,
    "end": 30929.68,
    "text": "capital U, because I'm not referencing the table, I'm referencing the actual SQL alchemy class. So",
    "textdich": ""
  },
  {
    "start": 30929.68,
    "end": 30933.92,
    "text": "what this is going to do for us automatically is that it's going to create another property for",
    "textdich": ""
  },
  {
    "start": 30933.92,
    "end": 30939.04,
    "text": "our post, so that when we retrieve a post, it's going to return a owner property. And what it's",
    "textdich": ""
  },
  {
    "start": 30939.04,
    "end": 30944.4,
    "text": "going to do is it's going to figure out the relationship to user. So it's going to actually",
    "textdich": ""
  },
  {
    "start": 30944.4,
    "end": 30949.68,
    "text": "fetch the user based off of the owner ID and return that for us. And there's nothing else we",
    "textdich": ""
  },
  {
    "start": 30949.68,
    "end": 30953.44,
    "text": "have to do it actually is that simple. This is one of the great parts about SQL alchemy is that",
    "textdich": ""
  },
  {
    "start": 30953.44,
    "end": 30957.52,
    "text": "these relationships will automatically make it so that it fetches that data for us so that we",
    "textdich": ""
  },
  {
    "start": 30957.52,
    "end": 30962.88,
    "text": "don't have to manually do it ourselves. So let's test this out. Let's see if this actually works.",
    "textdich": ""
  },
  {
    "start": 30962.88,
    "end": 30971.6,
    "text": "I'm going to go back, and I'm going to retrieve all posts. And it looks like nothing's changed.",
    "textdich": ""
  },
  {
    "start": 30971.6,
    "end": 30976.16,
    "text": "We don't get any user information we do once again, just get the owner ID. So what happened?",
    "textdich": ""
  },
  {
    "start": 30976.16,
    "end": 30981.84,
    "text": "Well, you probably can guess we need to update our schema. And so if we go to our post,",
    "textdich": ""
  },
  {
    "start": 30981.84,
    "end": 30988.16,
    "text": "we're now going to return a user. And so here, what we would do is we would just add another",
    "textdich": ""
  },
  {
    "start": 30988.16,
    "end": 30993.52,
    "text": "property called owner. And then here, it would instead of returning an int or a string or",
    "textdich": ""
  },
  {
    "start": 30993.52,
    "end": 30999.36,
    "text": "anything like that, we can actually return a pedantic model. So I can say I want you to return",
    "textdich": ""
  },
  {
    "start": 30999.36,
    "end": 31007.2,
    "text": "a user, whoops, a user, but it looks like we don't have a user class, we have user out. And then we",
    "textdich": ""
  },
  {
    "start": 31007.2,
    "end": 31013.04,
    "text": "have user create. So which one do we actually want to return? Probably user out because that's",
    "textdich": ""
  },
  {
    "start": 31013.04,
    "end": 31020.56,
    "text": "why we're returning with the user create is for creating a user. And you notice that we get an",
    "textdich": ""
  },
  {
    "start": 31020.56,
    "end": 31027.44,
    "text": "error actually here. And that's because this user out hasn't been defined at this point in the code.",
    "textdich": ""
  },
  {
    "start": 31027.44,
    "end": 31032.56,
    "text": "So you have to read Python top down. And so user out is actually defined all the way down here.",
    "textdich": ""
  },
  {
    "start": 31032.56,
    "end": 31040.64,
    "text": "So if you wanted this to work, we would have to move all of the user stuff up a level. So I'm",
    "textdich": ""
  },
  {
    "start": 31040.64,
    "end": 31046.64,
    "text": "going to cut this, and I'm gonna just put it right above post. And so this should remove the error.",
    "textdich": ""
  },
  {
    "start": 31046.64,
    "end": 31050.72,
    "text": "And so now it looks like it's good. And so once again, all we did was we added a new property",
    "textdich": ""
  },
  {
    "start": 31050.72,
    "end": 31056.24,
    "text": "called owner. And this is going to return a pedantic model type called user out. And so that's",
    "textdich": ""
  },
  {
    "start": 31056.24,
    "end": 31063.12,
    "text": "all this is returning now. So let's see if this fixes our issue. And now I'm going to retrieve",
    "textdich": ""
  },
  {
    "start": 31063.12,
    "end": 31069.12,
    "text": "all posts. And so now take a look at this, it automatically fetch the owner, it got the ID,",
    "textdich": ""
  },
  {
    "start": 31069.12,
    "end": 31074.4,
    "text": "it got the email, it got when their account was created at, we may not want that. But for now,",
    "textdich": ""
  },
  {
    "start": 31074.4,
    "end": 31080.08,
    "text": "I think this makes sense, we could create another class to kind of narrow down the exact fields that",
    "textdich": ""
  },
  {
    "start": 31080.08,
    "end": 31084.24,
    "text": "we specifically wanted for this situation. But I think this is good enough. These are all",
    "textdich": ""
  },
  {
    "start": 31084.24,
    "end": 31088.32,
    "text": "the information that I want actually returned. So this is perfect. It's going to do this for every",
    "textdich": ""
  },
  {
    "start": 31088.32,
    "end": 31097.6,
    "text": "post. And if I try to get one post, it's also going to return that specific owner. And so in",
    "textdich": ""
  },
  {
    "start": 31097.6,
    "end": 31101.76,
    "text": "reality, to get this functionality, right, once again, all we had to do was just create this",
    "textdich": ""
  },
  {
    "start": 31101.76,
    "end": 31107.04,
    "text": "relationship. And so once SQL alchemy understands the relationship, it's going to fetch that piece",
    "textdich": ""
  },
  {
    "start": 31107.04,
    "end": 31112.56,
    "text": "of information for you from the user model. In this lesson, we're going to take a look at",
    "textdich": ""
  },
  {
    "start": 31112.56,
    "end": 31117.84,
    "text": "query parameters. And if you've never worked with an API, you may not know what that is. But I",
    "textdich": ""
  },
  {
    "start": 31117.84,
    "end": 31122.4,
    "text": "guarantee you, you have worked with them before. And you have seen them, you just had no idea what",
    "textdich": ""
  },
  {
    "start": 31122.4,
    "end": 31127.28,
    "text": "they were. And so I'm on Yelp.com. And I'm just doing this for demonstration purposes. But I'm",
    "textdich": ""
  },
  {
    "start": 31127.28,
    "end": 31130.24,
    "text": "just going to do a quick search here. I've just picked a random city. In this case, it's Miami,",
    "textdich": ""
  },
  {
    "start": 31130.24,
    "end": 31135.92,
    "text": "we're going to search for that. And I want you to take a look at the URL. And so our URL is first",
    "textdich": ""
  },
  {
    "start": 31135.92,
    "end": 31139.76,
    "text": "of all, we have the domain name, which is kind of like the IP address. And then we have the specific",
    "textdich": ""
  },
  {
    "start": 31139.76,
    "end": 31145.2,
    "text": "endpoint that we want to reach. So this is the slash search endpoint. And so in their API, they've",
    "textdich": ""
  },
  {
    "start": 31145.2,
    "end": 31150.64,
    "text": "set up, you know, some sort of endpoint that probably is allows you to search for restaurants.",
    "textdich": ""
  },
  {
    "start": 31150.64,
    "end": 31154.16,
    "text": "And then we have a question mark. And I know you guys have seen this before, because pretty much",
    "textdich": ""
  },
  {
    "start": 31154.16,
    "end": 31158.56,
    "text": "any website you've ever, you know, used, you'll see that question mark whenever you're, you know,",
    "textdich": ""
  },
  {
    "start": 31158.56,
    "end": 31164.08,
    "text": "searching for things. And any results you get, you'll see that in the URL. And so everything to",
    "textdich": ""
  },
  {
    "start": 31164.08,
    "end": 31168.96,
    "text": "the right of that is what's referred to as query parameters. So all of these are, you know,",
    "textdich": ""
  },
  {
    "start": 31168.96,
    "end": 31174.4,
    "text": "query parameters. So all of this is query parameters. And a query parameter is a optional",
    "textdich": ""
  },
  {
    "start": 31174.4,
    "end": 31179.44,
    "text": "key value pair that appears to the right of the question mark. And these query parameters allow",
    "textdich": ""
  },
  {
    "start": 31179.44,
    "end": 31184.64,
    "text": "us to kind of filter the results of a request. So you know, if we're trying to retrieve posts,",
    "textdich": ""
  },
  {
    "start": 31184.64,
    "end": 31189.52,
    "text": "maybe we don't want all posts, maybe we want to get posts that were created in the last two hours,",
    "textdich": ""
  },
  {
    "start": 31189.52,
    "end": 31194.16,
    "text": "maybe we want to get posts that, you know, if it's a social media type app, maybe we want to get",
    "textdich": ""
  },
  {
    "start": 31194.16,
    "end": 31199.28,
    "text": "posts that have received over 100 likes, right, these are all things that you would do using query",
    "textdich": ""
  },
  {
    "start": 31199.28,
    "end": 31203.2,
    "text": "parameters, where you can say, hey, you could just pass in a key and a pair, and you can say, I want",
    "textdich": ""
  },
  {
    "start": 31203.2,
    "end": 31209.84,
    "text": "to find posts, you know, that are less than two hours old. And so a lot of other operations that",
    "textdich": ""
  },
  {
    "start": 31209.84,
    "end": 31214.32,
    "text": "are necessary in an API, things like pagination, those are all going to be done with query",
    "textdich": ""
  },
  {
    "start": 31214.32,
    "end": 31218.8,
    "text": "parameters. And if you take a look at this one, since we searched for Miami, right, it looks like",
    "textdich": ""
  },
  {
    "start": 31218.8,
    "end": 31223.6,
    "text": "it passed a query parameter called find underscore loc, which probably means location. And then it",
    "textdich": ""
  },
  {
    "start": 31223.6,
    "end": 31228.64,
    "text": "says Miami, Florida. And so it's going to basically talk to the API and say, Hey, listen, I need you",
    "textdich": ""
  },
  {
    "start": 31228.64,
    "end": 31232.32,
    "text": "to get me all the restaurants. And I want you to filter down based off of restaurants in Miami.",
    "textdich": ""
  },
  {
    "start": 31233.6,
    "end": 31238.8,
    "text": "And so that's kind of how query parameters work. And so for us, it's, it's up to us to define what",
    "textdich": ""
  },
  {
    "start": 31238.8,
    "end": 31242.56,
    "text": "query parameters we want to allow and what we want them to do. And it's going to vary from app to app.",
    "textdich": ""
  },
  {
    "start": 31242.56,
    "end": 31247.68,
    "text": "But you'll see that most API's have a couple of query parameters that they all use. So let's go",
    "textdich": ""
  },
  {
    "start": 31247.68,
    "end": 31255.52,
    "text": "to our app real quick. And what we're going to do is we're going to go to our post router. And in",
    "textdich": ""
  },
  {
    "start": 31255.52,
    "end": 31259.92,
    "text": "this case, we've got our path operation of retrieving all posts. And what I want to do is",
    "textdich": ""
  },
  {
    "start": 31259.92,
    "end": 31264.96,
    "text": "I want to let the user be able to kind of filter down on the post that they want to see. And the",
    "textdich": ""
  },
  {
    "start": 31264.96,
    "end": 31269.52,
    "text": "first thing that I'm going to do is I'm actually going to allow them to specify how many posts they",
    "textdich": ""
  },
  {
    "start": 31269.52,
    "end": 31274.16,
    "text": "want to retrieve altogether. So I want to give them the option to say, Hey, I want 10 posts,",
    "textdich": ""
  },
  {
    "start": 31274.16,
    "end": 31279.84,
    "text": "or maybe I want 100 posts, or maybe I want 50 posts, we should allow the user to define that.",
    "textdich": ""
  },
  {
    "start": 31280.8,
    "end": 31287.6,
    "text": "And so to to allow a query parameter, we could just go into our path operation function and",
    "textdich": ""
  },
  {
    "start": 31287.6,
    "end": 31292.0,
    "text": "just pass in another argument. So I'm going to do question mark, then we give it the name",
    "textdich": ""
  },
  {
    "start": 31292.0,
    "end": 31296.16,
    "text": "of the query parameter. So this is the key essentially. And I'm going to call this limit.",
    "textdich": ""
  },
  {
    "start": 31296.16,
    "end": 31300.24,
    "text": "So this is going to limit the number of posts they get. And this is going to be of type int.",
    "textdich": ""
  },
  {
    "start": 31300.24,
    "end": 31306.72,
    "text": "And we're going to give it a default value. So we'll say that, you know, by default,",
    "textdich": ""
  },
  {
    "start": 31306.72,
    "end": 31312.96,
    "text": "if they don't provide a limit, we're going to say the limit by default is 10. And now I'm",
    "textdich": ""
  },
  {
    "start": 31312.96,
    "end": 31316.88,
    "text": "all I'm going to do is I'm going to print out limit. All right, and I'll show you guys how to",
    "textdich": ""
  },
  {
    "start": 31316.88,
    "end": 31322.32,
    "text": "actually send that query parameter. So let's go to our get all posts. And so to send a query",
    "textdich": ""
  },
  {
    "start": 31322.32,
    "end": 31327.36,
    "text": "parameter, it's very easy, you just type in a question mark, then you grab the name of the",
    "textdich": ""
  },
  {
    "start": 31327.36,
    "end": 31335.2,
    "text": "query parameter, which once again is limit. So we'll grab limit. And then you say it's you set",
    "textdich": ""
  },
  {
    "start": 31335.2,
    "end": 31341.2,
    "text": "it equal to whatever value you want to be. So if I want to get a limit of three, if I hit send,",
    "textdich": ""
  },
  {
    "start": 31341.84,
    "end": 31345.44,
    "text": "right, nothing should have changed in our code. But you can see that we were able to print out",
    "textdich": ""
  },
  {
    "start": 31345.44,
    "end": 31351.28,
    "text": "the limit. So that's how we access query parameters in fast API. It's pretty simple, you just pass it",
    "textdich": ""
  },
  {
    "start": 31351.28,
    "end": 31356.24,
    "text": "in as another argument into your path operation function. But let's actually set up our query so",
    "textdich": ""
  },
  {
    "start": 31356.24,
    "end": 31362.64,
    "text": "that it now takes into account the limit. And with SQL alchemy, anytime you want to, you know,",
    "textdich": ""
  },
  {
    "start": 31362.64,
    "end": 31366.16,
    "text": "perform another operation, you usually have a built in method. So I'm going to remove this dot",
    "textdich": ""
  },
  {
    "start": 31366.16,
    "end": 31371.2,
    "text": "all for now. And so if I want to limit the number of results, I just do dot and then let's see what",
    "textdich": ""
  },
  {
    "start": 31371.2,
    "end": 31375.12,
    "text": "methods we have at our disposal. Since we're looking for something that limits something,",
    "textdich": ""
  },
  {
    "start": 31375.12,
    "end": 31381.12,
    "text": "let's maybe check to see if there is a limit method and looks like I don't see one here,",
    "textdich": ""
  },
  {
    "start": 31381.12,
    "end": 31389.6,
    "text": "but there actually is. We can do limit. And then here, I'm just going to pass in the limit variable.",
    "textdich": ""
  },
  {
    "start": 31390.4,
    "end": 31393.12,
    "text": "And then after that, we can just do the dot all as we usually do.",
    "textdich": ""
  },
  {
    "start": 31396.32,
    "end": 31401.36,
    "text": "All right. And so now, well, first of all, in our database, we don't actually have that many posts.",
    "textdich": ""
  },
  {
    "start": 31401.36,
    "end": 31404.16,
    "text": "So I'm just going to create a couple. Well, actually, I could just do this through our API",
    "textdich": ""
  },
  {
    "start": 31404.16,
    "end": 31410.48,
    "text": "lab quicker. So I'm just going to create a whole bunch of posts. And so that should give us five",
    "textdich": ""
  },
  {
    "start": 31410.48,
    "end": 31422.88,
    "text": "posts. Now let's create a few more. All right, so we've got 11 posts now. And then we'll go back to",
    "textdich": ""
  },
  {
    "start": 31422.88,
    "end": 31428.32,
    "text": "our API. And we'll say I want a limit of three. So let's send that. And let's see if we only get",
    "textdich": ""
  },
  {
    "start": 31428.32,
    "end": 31435.92,
    "text": "three posts, we get 123 perfect. And if I don't provide a limit, well, actually, let's try a",
    "textdich": ""
  },
  {
    "start": 31435.92,
    "end": 31444.48,
    "text": "different number. Let's try five now. Alright, we get 12345 perfect. And if we don't provide a limit",
    "textdich": ""
  },
  {
    "start": 31444.48,
    "end": 31454.64,
    "text": "all together, it should return 10 because our default was set to 10 posts, the limit of 10.",
    "textdich": ""
  },
  {
    "start": 31454.64,
    "end": 31468.88,
    "text": "And so we get 12345678910. And there are 11 results. So there's one result that it didn't provide. So",
    "textdich": ""
  },
  {
    "start": 31468.88,
    "end": 31475.68,
    "text": "we've got the limit functionality down, what I want to do now is allow the user to skip results. So",
    "textdich": ""
  },
  {
    "start": 31475.68,
    "end": 31480.56,
    "text": "it grabbed, you know, depending on however, Postgres has decided to return, you know, 10 posts,",
    "textdich": ""
  },
  {
    "start": 31480.56,
    "end": 31485.76,
    "text": "it grabbed the first 10 based off of some criteria. And if we actually take a look at",
    "textdich": ""
  },
  {
    "start": 31488.96,
    "end": 31494.8,
    "text": "how it looks like we got ID of 10, ID of four, so it's kind of just all over the place. So it's",
    "textdich": ""
  },
  {
    "start": 31494.8,
    "end": 31500.8,
    "text": "probably not sorting based off of any specific field, we may want to specify that. But what we're",
    "textdich": ""
  },
  {
    "start": 31500.8,
    "end": 31507.92,
    "text": "going to do is I'm going to actually set the limit equal to two. And so we'll get the first two,",
    "textdich": ""
  },
  {
    "start": 31507.92,
    "end": 31512.48,
    "text": "however, Postgres determines what are the first two which should send, we get to, but let's say",
    "textdich": ""
  },
  {
    "start": 31512.48,
    "end": 31517.68,
    "text": "we want to skip over a couple of them, maybe we want to skip the first, the first two, maybe we",
    "textdich": ""
  },
  {
    "start": 31517.68,
    "end": 31523.76,
    "text": "want to skip these two. Well, I want to be able to send another query parameter called skip, so that",
    "textdich": ""
  },
  {
    "start": 31523.76,
    "end": 31527.68,
    "text": "we can specify how many we want to skip. And if you want to send more than one query parameter,",
    "textdich": ""
  },
  {
    "start": 31527.68,
    "end": 31531.84,
    "text": "we just do the n keyword, and then we provide the next key value pair. So it would be like skip",
    "textdich": ""
  },
  {
    "start": 31531.84,
    "end": 31537.44,
    "text": "equals two. And so just taking a look at the IDs here, we've got one with an ID of 10 and one with",
    "textdich": ""
  },
  {
    "start": 31537.44,
    "end": 31541.6,
    "text": "an ID of four. And we want to skip both of those. So going back to our code, we're going to provide",
    "textdich": ""
  },
  {
    "start": 31541.6,
    "end": 31546.4,
    "text": "another path operation function, sorry, another argument into the function. And we'll call this",
    "textdich": ""
  },
  {
    "start": 31546.4,
    "end": 31556.24,
    "text": "skip is going to be of integer. And the default is going to be we'll say zero, we don't want to skip",
    "textdich": ""
  },
  {
    "start": 31556.24,
    "end": 31563.84,
    "text": "anything by default. And to add this to our query, we use the keyword offset, we do offset. And then",
    "textdich": ""
  },
  {
    "start": 31563.84,
    "end": 31572.56,
    "text": "here I'm going to say offset equals skip. Alright, and so we should be able to skip over both of",
    "textdich": ""
  },
  {
    "start": 31572.56,
    "end": 31579.68,
    "text": "these. And so if I provide a skip of two, you can see it first starts out at nine, and then 11.",
    "textdich": ""
  },
  {
    "start": 31581.36,
    "end": 31586.88,
    "text": "If we do skip zero, it shouldn't skip any right 10. And then an ID of four, if we skip one, it",
    "textdich": ""
  },
  {
    "start": 31586.88,
    "end": 31591.44,
    "text": "should just skip the 10 and then start off on four. And we can see that the first one is four.",
    "textdich": ""
  },
  {
    "start": 31591.44,
    "end": 31595.28,
    "text": "So it allows us to skip over post. And so that's ultimately how we're going to implement pagination",
    "textdich": ""
  },
  {
    "start": 31595.28,
    "end": 31599.76,
    "text": "on the front end is because the front end should be able to skip based off of what page they're on.",
    "textdich": ""
  },
  {
    "start": 31599.76,
    "end": 31605.68,
    "text": "So if each page returns 20 results, and you want to go to page two, then you want to skip 20",
    "textdich": ""
  },
  {
    "start": 31605.68,
    "end": 31610.4,
    "text": "results. If you want to go to page three, you would skip 40 results. Now, the last query parameter",
    "textdich": ""
  },
  {
    "start": 31610.4,
    "end": 31615.84,
    "text": "I want to set up is a search functionality, I want the user to be able to search based off of,",
    "textdich": ""
  },
  {
    "start": 31615.84,
    "end": 31620.4,
    "text": "you know, some keywords in the title, or maybe even the content, depending on how we want to",
    "textdich": ""
  },
  {
    "start": 31620.4,
    "end": 31626.48,
    "text": "implement searching for, for now, we're just going to say we'll be able to search based off of the",
    "textdich": ""
  },
  {
    "start": 31626.48,
    "end": 31632.72,
    "text": "title. And the way that the search will work is we'll have another and, and we'll say search",
    "textdich": ""
  },
  {
    "start": 31633.6,
    "end": 31637.76,
    "text": "equals and then you know, some random text. And so once again, we're going to provide another",
    "textdich": ""
  },
  {
    "start": 31637.76,
    "end": 31648.16,
    "text": "argument called search. And this is going to be of type string. However, this is, you know,",
    "textdich": ""
  },
  {
    "start": 31648.16,
    "end": 31652.08,
    "text": "we can't exactly give a default search. So I'm going to say this is optional.",
    "textdich": ""
  },
  {
    "start": 31653.84,
    "end": 31656.4,
    "text": "It's gonna be an optional string, but we don't have to provide this.",
    "textdich": ""
  },
  {
    "start": 31660.24,
    "end": 31667.28,
    "text": "And the default is just an empty quotes. And it looks like I have to import optional",
    "textdich": ""
  },
  {
    "start": 31667.28,
    "end": 31676.72,
    "text": "from fast API or from typing. And so here, I'll just say, import optional.",
    "textdich": ""
  },
  {
    "start": 31676.72,
    "end": 31682.0,
    "text": "And this is going to give us an optional query parameter. And so what we're going to do here is",
    "textdich": ""
  },
  {
    "start": 31682.0,
    "end": 31688.56,
    "text": "I'll say filter. And to filter this, and just kind of like how we filtered based off of a specific",
    "textdich": ""
  },
  {
    "start": 31689.44,
    "end": 31701.12,
    "text": "user ID or a specific post ID, I can say models dot post dot title. And then we can use a method",
    "textdich": ""
  },
  {
    "start": 31701.12,
    "end": 31708.72,
    "text": "called contains. So we can say contains, and then the search keyword. So this will allow us to",
    "textdich": ""
  },
  {
    "start": 31708.72,
    "end": 31713.6,
    "text": "provide some kind of string, and it'll just search for the entire title of a post. And I'll see if",
    "textdich": ""
  },
  {
    "start": 31713.6,
    "end": 31719.76,
    "text": "the search keywords are anywhere in the post title, it doesn't have to match completely, it just has",
    "textdich": ""
  },
  {
    "start": 31719.76,
    "end": 31723.92,
    "text": "to be somewhere in the post. So this will give us a little bit of flexibility so that we don't have",
    "textdich": ""
  },
  {
    "start": 31723.92,
    "end": 31728.96,
    "text": "to match the exact name of the post, we can just provide some keywords like, like hot dogs or",
    "textdich": ""
  },
  {
    "start": 31728.96,
    "end": 31733.84,
    "text": "hot dogs or beaches or whatever. And it should be able to just see if it's contained in there.",
    "textdich": ""
  },
  {
    "start": 31733.84,
    "end": 31739.04,
    "text": "So let's take a look at our database. You can see that we've got a lot of ones that say top beaches",
    "textdich": ""
  },
  {
    "start": 31739.04,
    "end": 31745.2,
    "text": "in Florida. So I'm just going to do a search. And if I just search for beaches, it should return all",
    "textdich": ""
  },
  {
    "start": 31745.2,
    "end": 31750.72,
    "text": "of these because they all contain the word beaches. And I'm just going to do a search. And I'll get",
    "textdich": ""
  },
  {
    "start": 31750.72,
    "end": 31758.8,
    "text": "rid of the limits. And the skip for now, we don't really need that. And all of the results",
    "textdich": ""
  },
  {
    "start": 31758.8,
    "end": 31766.4,
    "text": "should be actually, I don't think I saved it. Let me let me save that. And now if I do this,",
    "textdich": ""
  },
  {
    "start": 31767.36,
    "end": 31772.72,
    "text": "you can see that every result is going to have the word beaches in in the title. And when it comes to",
    "textdich": ""
  },
  {
    "start": 31773.6,
    "end": 31776.88,
    "text": "query parameters, you can string as many as you want. So if you wanted the,",
    "textdich": ""
  },
  {
    "start": 31776.88,
    "end": 31781.76,
    "text": "the limit as well, and we'll set the limit to two. And we can also provide a skip",
    "textdich": ""
  },
  {
    "start": 31781.76,
    "end": 31790.4,
    "text": "equals one, you can add as many of the query parameters that you want. So now you can see",
    "textdich": ""
  },
  {
    "start": 31790.4,
    "end": 31794.4,
    "text": "that we set the limit to two and we skip the first one. Now the last thing I want to show you guys",
    "textdich": ""
  },
  {
    "start": 31794.4,
    "end": 31799.36,
    "text": "is how to use spaces in your search query. Because right now, we just have the word beaches. But let's",
    "textdich": ""
  },
  {
    "start": 31799.36,
    "end": 31803.2,
    "text": "say I wanted, you know, just going into our Postgres database, let's see what I've got.",
    "textdich": ""
  },
  {
    "start": 31804.0,
    "end": 31808.24,
    "text": "Maybe I want to search for beaches, hello, or something beaches, right? How do I how would I",
    "textdich": ""
  },
  {
    "start": 31808.24,
    "end": 31814.48,
    "text": "search for that in a URL? I can't put a space in the URL. I can't say, you know, something beaches.",
    "textdich": ""
  },
  {
    "start": 31815.52,
    "end": 31824.16,
    "text": "So how do I do a space? Well, I can do percent and 20, which is reference, which means space",
    "textdich": ""
  },
  {
    "start": 31824.16,
    "end": 31828.72,
    "text": "in your URL. And then you can do beaches. So then just to verify that that's actually returning",
    "textdich": ""
  },
  {
    "start": 31828.72,
    "end": 31832.4,
    "text": "what we want, I'm going to do a print, I'm going to print out the search keyword.",
    "textdich": ""
  },
  {
    "start": 31832.4,
    "end": 31841.84,
    "text": "And we're going to test this out. So if I hit send, you can see that it returned the one result that",
    "textdich": ""
  },
  {
    "start": 31841.84,
    "end": 31847.44,
    "text": "has the word something and then beaches, but it doesn't return anything else. What I would like",
    "textdich": ""
  },
  {
    "start": 31847.44,
    "end": 31852.56,
    "text": "to do now is do a little bit of cleanup on our main.py file, you'll see that there's a lot of",
    "textdich": ""
  },
  {
    "start": 31852.56,
    "end": 31857.36,
    "text": "unnecessary imports that we don't need, especially since we moved all of our routes into their",
    "textdich": ""
  },
  {
    "start": 31857.36,
    "end": 31861.28,
    "text": "respective folders. So you'll see that a lot of these are grayed out. And so anything that's grayed",
    "textdich": ""
  },
  {
    "start": 31861.28,
    "end": 31866.56,
    "text": "out, we can move above. Before we actually do that, what I actually want to do first is I want",
    "textdich": ""
  },
  {
    "start": 31866.56,
    "end": 31873.68,
    "text": "to take this code for connecting to our database using the, you know, the regular Postgres driver,",
    "textdich": ""
  },
  {
    "start": 31873.68,
    "end": 31878.4,
    "text": "I'm going to move that to our database.py file. And keep in mind, we can just delete this because",
    "textdich": ""
  },
  {
    "start": 31878.4,
    "end": 31883.04,
    "text": "we're no longer using this. And we're using SQL alchemy to actually connect to our database. So",
    "textdich": ""
  },
  {
    "start": 31883.04,
    "end": 31887.52,
    "text": "you can actually delete this. But just for documentation purposes, I'm actually going to",
    "textdich": ""
  },
  {
    "start": 31887.52,
    "end": 31895.52,
    "text": "just cut this out. And I'm going to move this into our database.py file. Just that you guys have this",
    "textdich": ""
  },
  {
    "start": 31895.52,
    "end": 31902.64,
    "text": "for reference, in case you ever want to, you know, run raw SQL directly using this Postgres library,",
    "textdich": ""
  },
  {
    "start": 31902.64,
    "end": 31907.44,
    "text": "instead of using SQL alchemy, I want to make sure this course covers as many different, you know,",
    "textdich": ""
  },
  {
    "start": 31907.44,
    "end": 31911.84,
    "text": "possible situations for you guys. But moving this here, obviously, we're going to get some errors",
    "textdich": ""
  },
  {
    "start": 31911.84,
    "end": 31916.08,
    "text": "because we have to import all of these. And I'm just going to go to our main and I'm going to",
    "textdich": ""
  },
  {
    "start": 31916.08,
    "end": 31922.8,
    "text": "import them from here. So here, I'll just copy these two. And we'll actually just cut it out.",
    "textdich": ""
  },
  {
    "start": 31926.64,
    "end": 31929.36,
    "text": "And then it looks like we also need time. Where is that coming from?",
    "textdich": ""
  },
  {
    "start": 31931.68,
    "end": 31941.52,
    "text": "It's just coming from the time. Okay. All right, that should remove any errors. And we can just",
    "textdich": ""
  },
  {
    "start": 31941.52,
    "end": 31949.84,
    "text": "comment this out actually, because we're not going to use that anymore. And then going back to our",
    "textdich": ""
  },
  {
    "start": 31949.84,
    "end": 31953.68,
    "text": "main, you can see that both of these are grayed out. So we're not even importing anything from",
    "textdich": ""
  },
  {
    "start": 31954.32,
    "end": 31957.36,
    "text": "typing anymore, or we're not using anything from typing. So I'm going to remove that.",
    "textdich": ""
  },
  {
    "start": 31958.56,
    "end": 31963.44,
    "text": "You can see that we're no longer using status. So actually, we're no longer using all of these.",
    "textdich": ""
  },
  {
    "start": 31964.24,
    "end": 31971.44,
    "text": "So I can remove all of those. And I'm not using the body here anymore. I'm not using anything",
    "textdich": ""
  },
  {
    "start": 31971.44,
    "end": 31977.04,
    "text": "from pedantic. And I'm not using anything from random. We'll just get that a little bit closer.",
    "textdich": ""
  },
  {
    "start": 31978.48,
    "end": 31983.68,
    "text": "We're not using session anymore either. So I'll remove that. This whatever that is,",
    "textdich": ""
  },
  {
    "start": 31983.68,
    "end": 31995.44,
    "text": "and I'll remove that. And then we'll remove schemas and utils. We can remove get DB as well.",
    "textdich": ""
  },
  {
    "start": 31995.44,
    "end": 32005.84,
    "text": "And then obviously, the the posts array or list that's no longer needed. These two functions,",
    "textdich": ""
  },
  {
    "start": 32005.84,
    "end": 32010.96,
    "text": "they're no longer needed. They were before we started working with databases. And then,",
    "textdich": ""
  },
  {
    "start": 32010.96,
    "end": 32013.52,
    "text": "I mean, we don't actually need this route anymore. But I'll just leave that in there.",
    "textdich": ""
  },
  {
    "start": 32014.4,
    "end": 32019.12,
    "text": "But you can see that our code is a lot cleaner now, after removing all of those unnecessary",
    "textdich": ""
  },
  {
    "start": 32019.12,
    "end": 32024.96,
    "text": "imports. I'm just going to structure this a little bit better. So all the codes a little",
    "textdich": ""
  },
  {
    "start": 32024.96,
    "end": 32029.12,
    "text": "bit closer together. And I think that's all the cleanup that we need to do for now. I just wanted",
    "textdich": ""
  },
  {
    "start": 32029.12,
    "end": 32034.4,
    "text": "to make sure there wasn't too much garbage building up in our application. When we first",
    "textdich": ""
  },
  {
    "start": 32034.4,
    "end": 32039.68,
    "text": "started working on databases, I mentioned that we should never hard code our database information,",
    "textdich": ""
  },
  {
    "start": 32039.68,
    "end": 32044.4,
    "text": "or the database URL into our code. Because this creates two issues. First of all, we're exposing",
    "textdich": ""
  },
  {
    "start": 32044.4,
    "end": 32049.04,
    "text": "our username and password right there in code. So anyone can see it. If we check it into GitHub,",
    "textdich": ""
  },
  {
    "start": 32049.04,
    "end": 32053.04,
    "text": "anyone who has access to it can see our password now. And at that point, we've compromised our",
    "textdich": ""
  },
  {
    "start": 32053.04,
    "end": 32060.72,
    "text": "application. But on top of that, the other big issue is that right now, we've set this URL to",
    "textdich": ""
  },
  {
    "start": 32060.72,
    "end": 32065.44,
    "text": "go to our development Postgres instance, which is running on our local machine. When we actually",
    "textdich": ""
  },
  {
    "start": 32065.44,
    "end": 32069.2,
    "text": "deploy this to production, our Postgres server is not going to be running on this machine,",
    "textdich": ""
  },
  {
    "start": 32069.2,
    "end": 32072.72,
    "text": "it's it may not even be running on the machine that our application is actually deployed on,",
    "textdich": ""
  },
  {
    "start": 32072.72,
    "end": 32077.84,
    "text": "it could be on a completely different system. So we would need a way for the code to automatically",
    "textdich": ""
  },
  {
    "start": 32077.84,
    "end": 32082.72,
    "text": "update in a production environment to point to the actual production Postgres database instead",
    "textdich": ""
  },
  {
    "start": 32082.72,
    "end": 32088.8,
    "text": "of using the one that's hard coded in here. And so we need a way to do that. And keep in mind this,",
    "textdich": ""
  },
  {
    "start": 32088.8,
    "end": 32094.72,
    "text": "this isn't exclusive to just working with the databases, any kind of confidential information,",
    "textdich": ""
  },
  {
    "start": 32094.72,
    "end": 32100.16,
    "text": "any password secrets, anything that needs to get updated, based off of the environment that it's in",
    "textdich": ""
  },
  {
    "start": 32100.96,
    "end": 32106.64,
    "text": "needs a way that will will run into the same exact issue. And if we go to our OAuth 2. file,",
    "textdich": ""
  },
  {
    "start": 32107.44,
    "end": 32110.72,
    "text": "you can see that we have our secret key hard coded in here. This is something",
    "textdich": ""
  },
  {
    "start": 32110.72,
    "end": 32116.0,
    "text": "that we don't want to do. We don't want to expose this. And we need this to get updated between our",
    "textdich": ""
  },
  {
    "start": 32116.0,
    "end": 32120.32,
    "text": "development and our production environment, because they may not be the same on both. So how do we do",
    "textdich": ""
  },
  {
    "start": 32120.32,
    "end": 32125.52,
    "text": "that? Well, we're going to make use of something called environment variables. And so an environment",
    "textdich": ""
  },
  {
    "start": 32125.52,
    "end": 32131.28,
    "text": "variable is just a variable that you configure on a computer. Doesn't matter what operating system,",
    "textdich": ""
  },
  {
    "start": 32131.28,
    "end": 32135.2,
    "text": "they all support it. And when you configure an environment variable on your computer,",
    "textdich": ""
  },
  {
    "start": 32135.2,
    "end": 32142.4,
    "text": "any application that's running on that computer will be able to access it. And that includes our",
    "textdich": ""
  },
  {
    "start": 32142.4,
    "end": 32147.68,
    "text": "fast API. So your Python app will be able to access any environment variables on the machine.",
    "textdich": ""
  },
  {
    "start": 32147.68,
    "end": 32152.16,
    "text": "And so instead of hard coding the values in our code, what we'll say is, hey, retrieve an",
    "textdich": ""
  },
  {
    "start": 32152.16,
    "end": 32156.0,
    "text": "environment variable named, you know, whatever, like we might have an environment variable called",
    "textdich": ""
  },
  {
    "start": 32156.0,
    "end": 32161.12,
    "text": "Postgres underscore URL. And that's going to contain the URL of a Postgres database. And so",
    "textdich": ""
  },
  {
    "start": 32161.12,
    "end": 32165.84,
    "text": "we don't need to hard code the actual value, we hard code just the name of the variable,",
    "textdich": ""
  },
  {
    "start": 32165.84,
    "end": 32169.6,
    "text": "and then Python will automatically pull in that, that variable. So let me show you guys how to do",
    "textdich": ""
  },
  {
    "start": 32169.6,
    "end": 32174.08,
    "text": "that. And I'm going to show you guys how to do this on Windows first. And then we'll take a look",
    "textdich": ""
  },
  {
    "start": 32174.08,
    "end": 32180.0,
    "text": "at this on a Mac or Linux machine, Mac and Linux are the same steps. So I'm going to search for",
    "textdich": ""
  },
  {
    "start": 32180.0,
    "end": 32186.96,
    "text": "environment. And you'll see this edit the system environment variables. And what we want to do is",
    "textdich": ""
  },
  {
    "start": 32186.96,
    "end": 32192.56,
    "text": "we want to go to environment variables under the Advanced tab. And here you'll see two sections,",
    "textdich": ""
  },
  {
    "start": 32192.56,
    "end": 32197.12,
    "text": "you've got system variables, this is going to be environment variables that are system wide,",
    "textdich": ""
  },
  {
    "start": 32197.12,
    "end": 32201.36,
    "text": "which means any user can access them. And then we have a user specific variable. So these are",
    "textdich": ""
  },
  {
    "start": 32201.36,
    "end": 32206.56,
    "text": "variables that only I can access. And you can just kind of, you know, go through these and just take",
    "textdich": ""
  },
  {
    "start": 32206.56,
    "end": 32210.64,
    "text": "a look at them. But you can see that we have an environment variable called path, don't worry",
    "textdich": ""
  },
  {
    "start": 32210.64,
    "end": 32214.96,
    "text": "about what it's used for. This is something that gets set up when you install your machine. But",
    "textdich": ""
  },
  {
    "start": 32214.96,
    "end": 32219.44,
    "text": "we're going to take a look and try to access this. So you can see that this is the key, the variable",
    "textdich": ""
  },
  {
    "start": 32219.44,
    "end": 32224.8,
    "text": "name path, and then the value is some sort of path in our operating system, or in our file system.",
    "textdich": ""
  },
  {
    "start": 32225.6,
    "end": 32229.28,
    "text": "So how do we actually access that? Well, let's open up a terminal.",
    "textdich": ""
  },
  {
    "start": 32233.84,
    "end": 32238.24,
    "text": "And here, I'm just going to type in echo. And then we want to access an environment",
    "textdich": ""
  },
  {
    "start": 32238.24,
    "end": 32241.92,
    "text": "variable just to percent and then the name of the variable. So I'll say path with a capital P.",
    "textdich": ""
  },
  {
    "start": 32241.92,
    "end": 32248.24,
    "text": "And if I run this, you can see that it prints out that specific path. And so that's how you access",
    "textdich": ""
  },
  {
    "start": 32248.24,
    "end": 32252.8,
    "text": "an environment variable on the command line. With Python code, it's gonna be a little bit different,",
    "textdich": ""
  },
  {
    "start": 32252.8,
    "end": 32256.64,
    "text": "but it's still pretty simple, I'm going to open up a new file, just for demonstration purposes,",
    "textdich": ""
  },
  {
    "start": 32256.64,
    "end": 32261.44,
    "text": "you don't have to actually follow along on this. And to actually access a environment variable,",
    "textdich": ""
  },
  {
    "start": 32261.44,
    "end": 32272.32,
    "text": "we have to import the OS module. And then to access that variable, you say, OS dot get nv. And",
    "textdich": ""
  },
  {
    "start": 32272.32,
    "end": 32276.48,
    "text": "then within this method, you just pass in the name or the key of the variable. So in this case,",
    "textdich": ""
  },
  {
    "start": 32276.48,
    "end": 32281.28,
    "text": "it's path. And I'm just going to store this in a variable, and we can call this anything,",
    "textdich": ""
  },
  {
    "start": 32281.28,
    "end": 32287.44,
    "text": "I'll just call this path, why not. And then I'll print out path so we can see how they see if it",
    "textdich": ""
  },
  {
    "start": 32287.44,
    "end": 32295.28,
    "text": "actually works. And now if I do pi dash three, and then run example.py, you can see that it printed",
    "textdich": ""
  },
  {
    "start": 32295.28,
    "end": 32302.24,
    "text": "out that same exact path. Now to set a new environment variable, we would go to new.",
    "textdich": ""
  },
  {
    "start": 32305.04,
    "end": 32310.64,
    "text": "And maybe I create a URL, a variable name called Postgres. Or we can just call this how about my",
    "textdich": ""
  },
  {
    "start": 32310.64,
    "end": 32316.0,
    "text": "underscore DB underscore URL. So this is going to have the URL to access our database. And I'm",
    "textdich": ""
  },
  {
    "start": 32316.0,
    "end": 32323.04,
    "text": "gonna say this is at localhost, colon 5432. I think that's what our database is running on.",
    "textdich": ""
  },
  {
    "start": 32323.6,
    "end": 32328.32,
    "text": "And I'll hit OK. And so here we can see that this is our new environment variable that we created,",
    "textdich": ""
  },
  {
    "start": 32328.32,
    "end": 32335.84,
    "text": "my DB underscore URL, and it's set to localhost 5432. I'll hit OK. And then I'll hit OK here.",
    "textdich": ""
  },
  {
    "start": 32336.88,
    "end": 32341.2,
    "text": "And then what we're going to do is we're going to try to access that variable. So I'll do echo",
    "textdich": ""
  },
  {
    "start": 32341.2,
    "end": 32348.56,
    "text": "my underscore DB underscore URL percent. And actually, it should be percent percent.",
    "textdich": ""
  },
  {
    "start": 32350.96,
    "end": 32355.36,
    "text": "And you can see that it does not print out what we said, it just prints out exactly what we wrote.",
    "textdich": ""
  },
  {
    "start": 32355.36,
    "end": 32359.28,
    "text": "So what gives what happened here? Well, anytime you set a new environment variable, what you got",
    "textdich": ""
  },
  {
    "start": 32359.28,
    "end": 32363.04,
    "text": "to do is you got to close out your terminal and open up a brand new one. So I can, you know,",
    "textdich": ""
  },
  {
    "start": 32363.04,
    "end": 32367.76,
    "text": "I can close this out, or I can just open up a new one. And this new terminal, well, actually,",
    "textdich": ""
  },
  {
    "start": 32367.76,
    "end": 32373.92,
    "text": "I don't want a PowerShell, I want a command prompt. So this new terminal will be able to access newly",
    "textdich": ""
  },
  {
    "start": 32373.92,
    "end": 32378.56,
    "text": "created environment variables, because they get set as soon as the terminal opens. So once the",
    "textdich": ""
  },
  {
    "start": 32378.56,
    "end": 32383.2,
    "text": "terminals open, I can't change them. So I have to open up a new one so that it can reread and import",
    "textdich": ""
  },
  {
    "start": 32383.2,
    "end": 32390.24,
    "text": "all of those environment variables. So now if I do echo, percent my underscore DB underscore URL",
    "textdich": ""
  },
  {
    "start": 32390.24,
    "end": 32404.0,
    "text": "percent. It looks like I may have mistyped this. So hold on, let me see what what is called. And",
    "textdich": ""
  },
  {
    "start": 32404.0,
    "end": 32407.36,
    "text": "that looks like it's correct. So what's what's happening? Well, I'm going to close out all of",
    "textdich": ""
  },
  {
    "start": 32407.36,
    "end": 32410.32,
    "text": "them. That's probably what's the issue. So let me open up a new terminal.",
    "textdich": ""
  },
  {
    "start": 32410.32,
    "end": 32423.84,
    "text": "Open up a new cramp command prompt. And now I'm going to try echo percent, my underscore DB",
    "textdich": ""
  },
  {
    "start": 32423.84,
    "end": 32429.84,
    "text": "underscore URL. And now we can see that we can read it. So we have to close out our terminals",
    "textdich": ""
  },
  {
    "start": 32429.84,
    "end": 32435.04,
    "text": "and open up a brand new one. It's kind of annoying. But that's just the way it works. Now on top of",
    "textdich": ""
  },
  {
    "start": 32435.04,
    "end": 32440.8,
    "text": "that, there's an even bigger issue. And I think this is exclusive to Windows. And that is that",
    "textdich": ""
  },
  {
    "start": 32440.8,
    "end": 32446.56,
    "text": "VS code, the terminals here, it's whenever you set a new environment variable, they never have",
    "textdich": ""
  },
  {
    "start": 32446.56,
    "end": 32450.96,
    "text": "access to it. So you could try deleting all of these terminals, and then creating a new terminal.",
    "textdich": ""
  },
  {
    "start": 32450.96,
    "end": 32466.08,
    "text": "And then accessing that new environment variable of my DB underscore URL. And if I try to I try to",
    "textdich": ""
  },
  {
    "start": 32466.08,
    "end": 32474.08,
    "text": "access if I try to run this code, you'll see that it just says none. And if I just try to run the",
    "textdich": ""
  },
  {
    "start": 32474.08,
    "end": 32482.32,
    "text": "same echo command here, you'll see that it just spits it out. So it's not able to read it. And it's",
    "textdich": ""
  },
  {
    "start": 32482.88,
    "end": 32487.12,
    "text": "it's a little bit of an annoying issue with VS code in Windows, you have to close out every single",
    "textdich": ""
  },
  {
    "start": 32487.12,
    "end": 32492.56,
    "text": "VS code window that you have and, and then reopen them. And sometimes even then that doesn't fix the",
    "textdich": ""
  },
  {
    "start": 32492.56,
    "end": 32499.6,
    "text": "issue. So know that this is just kind of a limitation with Windows. But ultimately, don't",
    "textdich": ""
  },
  {
    "start": 32499.6,
    "end": 32504.24,
    "text": "worry too much about that. Because you're going to see that especially in a development environment,",
    "textdich": ""
  },
  {
    "start": 32504.24,
    "end": 32509.84,
    "text": "going into and actually setting all of these variables yourself is unnecessary, right? I",
    "textdich": ""
  },
  {
    "start": 32509.84,
    "end": 32515.52,
    "text": "don't want to have to go in and set one for my database, IP, my database port, as well as my",
    "textdich": ""
  },
  {
    "start": 32515.52,
    "end": 32520.16,
    "text": "secret key, my password, my username, it's just too many to manage yourself. And you'll see that",
    "textdich": ""
  },
  {
    "start": 32520.16,
    "end": 32524.08,
    "text": "more complex applications could have 10 2030 environment variables that need to be set.",
    "textdich": ""
  },
  {
    "start": 32524.64,
    "end": 32528.72,
    "text": "So instead of going into your system and actually changing it, I'm going to show you guys in the",
    "textdich": ""
  },
  {
    "start": 32528.72,
    "end": 32534.32,
    "text": "next video, I'm going to show you guys how we can get around this by using what's referred to as an",
    "textdich": ""
  },
  {
    "start": 32534.32,
    "end": 32538.64,
    "text": "environment file. And so you don't actually need to worry about the limitations we're running here,",
    "textdich": ""
  },
  {
    "start": 32538.64,
    "end": 32542.16,
    "text": "because we're never actually going to set our own environment variables on our local machine,",
    "textdich": ""
  },
  {
    "start": 32542.16,
    "end": 32547.04,
    "text": "especially in our development machine, because it's just too slow of a process. And it makes",
    "textdich": ""
  },
  {
    "start": 32547.04,
    "end": 32552.08,
    "text": "things unnecessarily difficult to troubleshoot. So before we wrap things up, if you want to delete",
    "textdich": ""
  },
  {
    "start": 32552.08,
    "end": 32556.16,
    "text": "that environment variable, feel free to do that, which we can just go here. And I can just select",
    "textdich": ""
  },
  {
    "start": 32556.16,
    "end": 32562.8,
    "text": "that and then hit Delete. And let me get let me show you guys how to do this on a Mac. To set an",
    "textdich": ""
  },
  {
    "start": 32562.8,
    "end": 32567.28,
    "text": "environment variable on a Mac machine, the command that we run in the terminal, there isn't a GUI",
    "textdich": ""
  },
  {
    "start": 32567.28,
    "end": 32571.6,
    "text": "kind of like in Windows, we actually have to use a terminal, which I actually prefer. What we do is",
    "textdich": ""
  },
  {
    "start": 32571.6,
    "end": 32577.12,
    "text": "we just type in the command export. And then we provide the name of the the name of the variable",
    "textdich": ""
  },
  {
    "start": 32577.12,
    "end": 32587.04,
    "text": "or the key. So I'll say my underscore DB underscore URL, then we say equals. And then we just provide",
    "textdich": ""
  },
  {
    "start": 32587.04,
    "end": 32593.6,
    "text": "the text or the value. So in this case, maybe this is localhost on 5432. All right, and then to",
    "textdich": ""
  },
  {
    "start": 32593.6,
    "end": 32601.76,
    "text": "actually read the environment variables that have been set, you type in print, and V. And here we",
    "textdich": ""
  },
  {
    "start": 32601.76,
    "end": 32605.36,
    "text": "can take a look at all the environment variables, most of these have been set by the machine itself.",
    "textdich": ""
  },
  {
    "start": 32605.36,
    "end": 32610.72,
    "text": "And you'll see that nowhere in here, do we see? Well, actually, we do see my DB URL right here.",
    "textdich": ""
  },
  {
    "start": 32610.72,
    "end": 32615.84,
    "text": "However, just like I said, in Windows, sometimes, you know, depending on the terminal using and a",
    "textdich": ""
  },
  {
    "start": 32615.84,
    "end": 32619.84,
    "text": "few other things, sometimes you actually have to close out this terminal and open up a new one",
    "textdich": ""
  },
  {
    "start": 32619.84,
    "end": 32623.44,
    "text": "to actually get the new environment variable. But here we can just access it",
    "textdich": ""
  },
  {
    "start": 32626.0,
    "end": 32632.56,
    "text": "by typing echo. And then we can just say dollar, my underscore DB underscore URL.",
    "textdich": ""
  },
  {
    "start": 32632.56,
    "end": 32636.96,
    "text": "And you can see it prints it out. And then within Python, just like we did on the Windows machine,",
    "textdich": ""
  },
  {
    "start": 32636.96,
    "end": 32641.2,
    "text": "accessing it is the same exact way it shouldn't matter depend, it shouldn't matter which operating",
    "textdich": ""
  },
  {
    "start": 32641.2,
    "end": 32646.64,
    "text": "system you're on, it's the same exact thing from your code's perspective. With any project, there's",
    "textdich": ""
  },
  {
    "start": 32646.64,
    "end": 32651.36,
    "text": "going to be a certain number of environment variables. And as I said, as your project grows,",
    "textdich": ""
  },
  {
    "start": 32651.36,
    "end": 32656.08,
    "text": "you're going to have more and more of them. And one of the issues that you can run into is that",
    "textdich": ""
  },
  {
    "start": 32656.08,
    "end": 32660.16,
    "text": "you could potentially forget to set one of them, either on your development environment or your",
    "textdich": ""
  },
  {
    "start": 32660.16,
    "end": 32665.84,
    "text": "production environment. And it's probably going to cause your application to crash. And so what",
    "textdich": ""
  },
  {
    "start": 32665.84,
    "end": 32671.2,
    "text": "would be good is to perform some sort of validation to ensure that all of the right environment",
    "textdich": ""
  },
  {
    "start": 32671.2,
    "end": 32676.32,
    "text": "variables have been set for your application to actually run properly. And on top of that,",
    "textdich": ""
  },
  {
    "start": 32676.32,
    "end": 32680.8,
    "text": "it's important to understand that when you read an environment variable, it's always going to come",
    "textdich": ""
  },
  {
    "start": 32680.8,
    "end": 32686.4,
    "text": "out as a string, which which is fine, but it just means that you have to do all of the validation",
    "textdich": ""
  },
  {
    "start": 32686.4,
    "end": 32691.84,
    "text": "in code. So if you're setting an environment variable for your, you know, your access token",
    "textdich": ""
  },
  {
    "start": 32691.84,
    "end": 32696.56,
    "text": "expire minutes, right, we needed this to be an int, not a string, but when we read the environment",
    "textdich": ""
  },
  {
    "start": 32696.56,
    "end": 32700.56,
    "text": "variable, it's going to come out as a string. So we have to convert this to an integer. So when it",
    "textdich": ""
  },
  {
    "start": 32700.56,
    "end": 32705.36,
    "text": "comes to verifying that all of the properties are set, as well as performing validation,",
    "textdich": ""
  },
  {
    "start": 32706.24,
    "end": 32710.4,
    "text": "we might have already kind of addressed this issue with a different part of our application.",
    "textdich": ""
  },
  {
    "start": 32711.04,
    "end": 32715.36,
    "text": "Right. And that's our schemas, right? We do the same thing with all of the data we send in the body",
    "textdich": ""
  },
  {
    "start": 32715.36,
    "end": 32720.88,
    "text": "by using pedantic to perform all that verification to make sure that every single property that we",
    "textdich": ""
  },
  {
    "start": 32720.88,
    "end": 32725.52,
    "text": "need is there, and to also perform all of the typecasting. So if we set it something to be an",
    "textdich": ""
  },
  {
    "start": 32725.52,
    "end": 32730.8,
    "text": "integer, it'll automatically convert it and validate that is a valid integer. And what's great",
    "textdich": ""
  },
  {
    "start": 32730.8,
    "end": 32737.28,
    "text": "about pedantic is we can actually use pedantic to perform all of that validation for our environment",
    "textdich": ""
  },
  {
    "start": 32737.28,
    "end": 32743.04,
    "text": "variables. And let's see how we can actually do that. So I'm going to go to main.py. And as an",
    "textdich": ""
  },
  {
    "start": 32743.04,
    "end": 32750.88,
    "text": "example, I'm just going to import from the pedantic library. Something called base settings.",
    "textdich": ""
  },
  {
    "start": 32753.76,
    "end": 32758.72,
    "text": "And so just like with, you know, any other pedantic model, right, we can set up a class.",
    "textdich": ""
  },
  {
    "start": 32760.8,
    "end": 32765.36,
    "text": "And I'm gonna call this settings. And this is going to extend base settings.",
    "textdich": ""
  },
  {
    "start": 32765.36,
    "end": 32775.6,
    "text": "And I didn't mean to accidentally import base. And here, we can basically just provide a list",
    "textdich": ""
  },
  {
    "start": 32775.6,
    "end": 32781.92,
    "text": "of all of the environment variables that we need set as properties on the class itself. And so,",
    "textdich": ""
  },
  {
    "start": 32781.92,
    "end": 32790.8,
    "text": "you know, maybe I need something called database underscore password. And this needs to be a type",
    "textdich": ""
  },
  {
    "start": 32790.8,
    "end": 32799.2,
    "text": "string. And we can even give it a default value, which is localhost. And then maybe I need a",
    "textdich": ""
  },
  {
    "start": 32799.2,
    "end": 32805.36,
    "text": "database username, which is going to be string and we can give it once again, a default password,",
    "textdich": ""
  },
  {
    "start": 32805.36,
    "end": 32809.52,
    "text": "we don't actually have to get a default value. But if you want to, you can and I'll say this",
    "textdich": ""
  },
  {
    "start": 32809.52,
    "end": 32820.56,
    "text": "is going to be Postgres. And then maybe we want the secret key. And this is once again going to",
    "textdich": ""
  },
  {
    "start": 32820.56,
    "end": 32826.08,
    "text": "be a type string. And we can just give it, you know, some arbitrary default. And let's say these",
    "textdich": ""
  },
  {
    "start": 32826.08,
    "end": 32830.72,
    "text": "are the only environment variables that we need for our application to run. By setting it like",
    "textdich": ""
  },
  {
    "start": 32830.72,
    "end": 32835.36,
    "text": "this, it's going to automatically perform all of the validation for us to ensure that all of these",
    "textdich": ""
  },
  {
    "start": 32835.36,
    "end": 32839.68,
    "text": "have been set. And an important thing to understand is that when you set environment variables,",
    "textdich": ""
  },
  {
    "start": 32840.4,
    "end": 32845.68,
    "text": "you know, if we just quickly go back to the environment variables on my machine,",
    "textdich": ""
  },
  {
    "start": 32845.68,
    "end": 32853.52,
    "text": "normally best practice for environment variables is to do all caps with underscores, right? It",
    "textdich": ""
  },
  {
    "start": 32853.52,
    "end": 32857.12,
    "text": "doesn't have to be all caps. But this is just kind of standard convention. You can see I've got some",
    "textdich": ""
  },
  {
    "start": 32857.12,
    "end": 32863.12,
    "text": "that aren't like that. But in general, you want to do it all caps. And you can see here we reference",
    "textdich": ""
  },
  {
    "start": 32863.12,
    "end": 32868.88,
    "text": "it all in lowercase. So pedantic will automatically handle all of this from a case insensitive",
    "textdich": ""
  },
  {
    "start": 32869.44,
    "end": 32873.28,
    "text": "perspective. So it doesn't matter if you capitalize this or lowercase everything,",
    "textdich": ""
  },
  {
    "start": 32873.28,
    "end": 32877.2,
    "text": "it'll take all of your environment variables and it'll convert it to lowercase just to simplify",
    "textdich": ""
  },
  {
    "start": 32877.2,
    "end": 32883.68,
    "text": "everything. Then we create a variable called settings equals and then we say settings.",
    "textdich": ""
  },
  {
    "start": 32888.08,
    "end": 32892.4,
    "text": "So right here, all we're doing is we're creating an instance of the settings class. And so at this",
    "textdich": ""
  },
  {
    "start": 32892.4,
    "end": 32897.04,
    "text": "point, pedantic will read all of these environment variables. And once again, it'll look for them",
    "textdich": ""
  },
  {
    "start": 32897.04,
    "end": 32900.72,
    "text": "from a case insensitive perspective. So it doesn't matter if they're capitalized or not. And then",
    "textdich": ""
  },
  {
    "start": 32900.72,
    "end": 32904.72,
    "text": "it's going to and then it's going to perform all of the validation, it's going to ensure that they're",
    "textdich": ""
  },
  {
    "start": 32904.72,
    "end": 32910.16,
    "text": "properly a string and and so on. And then finally, it's going to store it in a variable called",
    "textdich": ""
  },
  {
    "start": 32910.16,
    "end": 32917.36,
    "text": "settings. So then we can access all of these variables by just saying settings dot and then",
    "textdich": ""
  },
  {
    "start": 32917.36,
    "end": 32920.8,
    "text": "the name of the property. So if I want to get the database password, I just do settings that",
    "textdich": ""
  },
  {
    "start": 32920.8,
    "end": 32931.04,
    "text": "database password. And so we can print this out. And I'll just start my application. Right. And",
    "textdich": ""
  },
  {
    "start": 32931.04,
    "end": 32935.84,
    "text": "you can see that it printed out localhost. And if I want to grab maybe the username,",
    "textdich": ""
  },
  {
    "start": 32937.12,
    "end": 32945.84,
    "text": "I just say username. Actually, sorry, it should be database underscore username.",
    "textdich": ""
  },
  {
    "start": 32945.84,
    "end": 32951.36,
    "text": "And you can see it prints out Postgres, which is the default values because I haven't actually set",
    "textdich": ""
  },
  {
    "start": 32951.36,
    "end": 32956.72,
    "text": "my system environment variables to be any of these values. So it's going to use the default one. And",
    "textdich": ""
  },
  {
    "start": 32956.72,
    "end": 32959.92,
    "text": "like I said, we're going to run into that Windows issue where I can't exactly update it without",
    "textdich": ""
  },
  {
    "start": 32959.92,
    "end": 32963.68,
    "text": "closing everything. So I'm not going to bother doing that. But what I will do just to show you",
    "textdich": ""
  },
  {
    "start": 32963.68,
    "end": 32972.48,
    "text": "how this validation works is let's remove this. Let's say there's no default password. And so if",
    "textdich": ""
  },
  {
    "start": 32972.48,
    "end": 32977.6,
    "text": "there's no default password, then you know, it's first going to check my system, my my system or",
    "textdich": ""
  },
  {
    "start": 32977.6,
    "end": 32980.8,
    "text": "user environment variables to see if there's something called database password. And since",
    "textdich": ""
  },
  {
    "start": 32980.8,
    "end": 32984.64,
    "text": "I didn't provide a default one, if there is no environment variable with that name,",
    "textdich": ""
  },
  {
    "start": 32984.64,
    "end": 32988.48,
    "text": "it's going to throw an error because the whole point of this is to validate that all of the",
    "textdich": ""
  },
  {
    "start": 32988.48,
    "end": 32995.44,
    "text": "environment variables that we have are configured here. And so after I save it, if we take a look",
    "textdich": ""
  },
  {
    "start": 32995.44,
    "end": 33001.68,
    "text": "at this, you could see that we get one validation error for settings. So settings, database password,",
    "textdich": ""
  },
  {
    "start": 33001.68,
    "end": 33006.32,
    "text": "and we can see that it's missing. Alright, and so having that quick check makes our life so much",
    "textdich": ""
  },
  {
    "start": 33006.32,
    "end": 33010.48,
    "text": "easier so that we don't have to figure out, you know, which environment variable is, is missing,",
    "textdich": ""
  },
  {
    "start": 33010.48,
    "end": 33014.72,
    "text": "which one's not, because like I said, you could have 10, 20, 30, 40 of them, there's going to be",
    "textdich": ""
  },
  {
    "start": 33014.72,
    "end": 33019.76,
    "text": "a lot of them. And managing them does become a little bit of a challenge. Now, one quick thing,",
    "textdich": ""
  },
  {
    "start": 33020.32,
    "end": 33025.6,
    "text": "you know, let's say I go to my environment variables once more. And I've got something",
    "textdich": ""
  },
  {
    "start": 33025.6,
    "end": 33032.56,
    "text": "called path, right? So path is, you know, something, the path to a specific directory. And what I'm",
    "textdich": ""
  },
  {
    "start": 33032.56,
    "end": 33036.8,
    "text": "going to do is I'm going to say, I want to access the path. But we're going to say that this needs",
    "textdich": ""
  },
  {
    "start": 33036.8,
    "end": 33043.2,
    "text": "to be of type int. So Python is going to perform some validation, it's going to read it and every",
    "textdich": ""
  },
  {
    "start": 33043.2,
    "end": 33047.2,
    "text": "environment variables always read as a string. And then it's going to try to type cast it into an",
    "textdich": ""
  },
  {
    "start": 33047.2,
    "end": 33052.4,
    "text": "int. And if it fails, it's going to throw an error. And so since this is clearly not a integer,",
    "textdich": ""
  },
  {
    "start": 33052.4,
    "end": 33057.76,
    "text": "it should throw an error. So let's try this out. And we can see that value is not a valid integer.",
    "textdich": ""
  },
  {
    "start": 33058.64,
    "end": 33063.2,
    "text": "Now, for all of the settings in the environment variables, I usually like to create a separate",
    "textdich": ""
  },
  {
    "start": 33063.2,
    "end": 33070.16,
    "text": "file to hold all of this information. So under app, I'm going to create a new file called config.py.",
    "textdich": ""
  },
  {
    "start": 33072.88,
    "end": 33074.72,
    "text": "And I'm going to move all of that code",
    "textdich": ""
  },
  {
    "start": 33074.72,
    "end": 33087.2,
    "text": "into that file. And then in our main.py file, I'll just import from dot config import",
    "textdich": ""
  },
  {
    "start": 33090.64,
    "end": 33097.04,
    "text": "settings. Alright, so ultimately, we're just importing that final class, the instance of",
    "textdich": ""
  },
  {
    "start": 33097.04,
    "end": 33103.28,
    "text": "the class that we created. Right. And so once again, it's able to perform the validation,",
    "textdich": ""
  },
  {
    "start": 33103.28,
    "end": 33108.56,
    "text": "it's going to report an error with the path variable. Alright, so having it in its own",
    "textdich": ""
  },
  {
    "start": 33108.56,
    "end": 33112.24,
    "text": "file is going to make things a little bit easier, because then we could just go to the config.py",
    "textdich": ""
  },
  {
    "start": 33112.24,
    "end": 33116.72,
    "text": "file. And we'll know exactly, you know, where to look for all of our environment variables and all",
    "textdich": ""
  },
  {
    "start": 33116.72,
    "end": 33121.76,
    "text": "the configs related to our application. The last thing I want to do is, let's go ahead and actually",
    "textdich": ""
  },
  {
    "start": 33121.76,
    "end": 33126.32,
    "text": "figure out what environment variables we want to use moving forward, and actually set this up. So",
    "textdich": ""
  },
  {
    "start": 33126.32,
    "end": 33131.36,
    "text": "we're going to clear out all of these. And I'm going to create one for all of the database related",
    "textdich": ""
  },
  {
    "start": 33131.36,
    "end": 33136.96,
    "text": "stuff. So database underscore host name is going to be a string by default. I'm going to have",
    "textdich": ""
  },
  {
    "start": 33136.96,
    "end": 33149.68,
    "text": "database underscore port. Once again, a string will have a database password. And then we'll have",
    "textdich": ""
  },
  {
    "start": 33149.68,
    "end": 33154.4,
    "text": "a database underscore name. So that's the database within Postgres that we're connecting to.",
    "textdich": ""
  },
  {
    "start": 33154.4,
    "end": 33165.12,
    "text": "We'll need a username, all of these will be strings. And you may be wondering why the port",
    "textdich": ""
  },
  {
    "start": 33165.12,
    "end": 33169.12,
    "text": "is set to a string. But the reason why it's going to be set to a string is because if we actually",
    "textdich": ""
  },
  {
    "start": 33169.12,
    "end": 33173.2,
    "text": "take a look at our database connection, it just goes into a URL. So we don't actually ever need",
    "textdich": ""
  },
  {
    "start": 33173.2,
    "end": 33180.24,
    "text": "to have it be an int, I guess you could make sure that it's a valid port number and then",
    "textdich": ""
  },
  {
    "start": 33180.24,
    "end": 33185.6,
    "text": "convert it back to a string. But that seems a little unnecessary at that point. Then there's",
    "textdich": ""
  },
  {
    "start": 33185.6,
    "end": 33195.2,
    "text": "a secret key for our or you know, our JSON web tokens. And we've got the algorithm",
    "textdich": ""
  },
  {
    "start": 33197.92,
    "end": 33198.96,
    "text": "for assigning our token.",
    "textdich": ""
  },
  {
    "start": 33198.96,
    "end": 33212.72,
    "text": "And then we have the access token, expire underscore minutes, which is going to be an",
    "textdich": ""
  },
  {
    "start": 33212.72,
    "end": 33217.44,
    "text": "int. Alright, and if we save all this, we should get a whole bunch of errors. And that's okay,",
    "textdich": ""
  },
  {
    "start": 33217.44,
    "end": 33221.28,
    "text": "because none of these have been set. So at this point, you could technically, you know,",
    "textdich": ""
  },
  {
    "start": 33221.28,
    "end": 33225.28,
    "text": "whether you're on a Windows or Mac, set these on your machine and get everything to work. But like",
    "textdich": ""
  },
  {
    "start": 33225.28,
    "end": 33230.24,
    "text": "I said, that is an unacceptable thing to do, because that's a lot of work. And we want to",
    "textdich": ""
  },
  {
    "start": 33230.24,
    "end": 33235.2,
    "text": "simplify things. So what we can actually do is within our fast API directory, we're going to",
    "textdich": ""
  },
  {
    "start": 33235.2,
    "end": 33240.96,
    "text": "create a new file called dot ENV. So this is kind of standard convention. But this file,",
    "textdich": ""
  },
  {
    "start": 33240.96,
    "end": 33244.56,
    "text": "and don't forget the dot this file is going to contain all of our environment variables.",
    "textdich": ""
  },
  {
    "start": 33244.56,
    "end": 33249.6,
    "text": "So we can set it much easier just by having a file do all of the work. Now in production,",
    "textdich": ""
  },
  {
    "start": 33249.6,
    "end": 33253.28,
    "text": "you're not going to use this in product in production, you're going to actually set it",
    "textdich": ""
  },
  {
    "start": 33253.28,
    "end": 33256.96,
    "text": "on your machine. But in development, it's perfectly okay to just set everything in here.",
    "textdich": ""
  },
  {
    "start": 33256.96,
    "end": 33260.48,
    "text": "And so what we're going to do is we're going to take all of those environment variables that we",
    "textdich": ""
  },
  {
    "start": 33260.48,
    "end": 33266.48,
    "text": "defined. And we're going to provide values. And so like I said, in real life, you generally want",
    "textdich": ""
  },
  {
    "start": 33266.48,
    "end": 33271.36,
    "text": "to capitalize everything. But luckily, pydantic automatically looks at everything from a case",
    "textdich": ""
  },
  {
    "start": 33271.36,
    "end": 33275.92,
    "text": "insensitive perspective. And so our database right now is running on localhost. So we can just say",
    "textdich": ""
  },
  {
    "start": 33275.92,
    "end": 33285.12,
    "text": "localhost. Our database port is going to be 5432. The password, that's going to be whatever you",
    "textdich": ""
  },
  {
    "start": 33285.12,
    "end": 33294.24,
    "text": "chose to use as your password. It's gonna be password 123. And we've got our database name.",
    "textdich": ""
  },
  {
    "start": 33298.16,
    "end": 33302.48,
    "text": "Mine happens to be fast API, but yours is going to be something different probably.",
    "textdich": ""
  },
  {
    "start": 33302.48,
    "end": 33310.4,
    "text": "The username, I'm guessing everyone's probably going to be using the default postgres. The secret",
    "textdich": ""
  },
  {
    "start": 33310.4,
    "end": 33316.88,
    "text": "key. I'm just going to grab whatever I used in my file. So I'll just grab this.",
    "textdich": ""
  },
  {
    "start": 33316.88,
    "end": 33341.44,
    "text": "The algorithm is going to be HS 256. And then the access token expiration time",
    "textdich": ""
  },
  {
    "start": 33341.44,
    "end": 33351.2,
    "text": "is going to be set to 30. We've got all the values set here. And one thing to note, I didn't provide",
    "textdich": ""
  },
  {
    "start": 33351.2,
    "end": 33356.16,
    "text": "any default values, and you could 100% go ahead and add default values into yours if you want to,",
    "textdich": ""
  },
  {
    "start": 33356.16,
    "end": 33362.08,
    "text": "but I'm going to leave them as such. And now we have to tell pydantic to actually import it from",
    "textdich": ""
  },
  {
    "start": 33362.08,
    "end": 33373.2,
    "text": "our dot env file. And the way to do that is inside this class, we just say class config. And we say",
    "textdich": ""
  },
  {
    "start": 33373.2,
    "end": 33379.84,
    "text": "env underscore file, and then the path to our specific file. So we say dot env. So we'll save",
    "textdich": ""
  },
  {
    "start": 33379.84,
    "end": 33390.72,
    "text": "this. And I forgot to save my env file. And then I'm going to run this again. And our applications",
    "textdich": ""
  },
  {
    "start": 33390.72,
    "end": 33396.72,
    "text": "should start up with zero issues. And so hopefully you guys see how easy it is to work with environment",
    "textdich": ""
  },
  {
    "start": 33396.72,
    "end": 33400.4,
    "text": "variables, especially when you're allowed to set it on a file, so that we don't have to worry about",
    "textdich": ""
  },
  {
    "start": 33400.4,
    "end": 33405.68,
    "text": "setting it either in the terminal or, you know, on a Windows machine having to go through the GUI to",
    "textdich": ""
  },
  {
    "start": 33405.68,
    "end": 33412.48,
    "text": "do that. But one thing to keep in mind is that you never want to check this env file into Git.",
    "textdich": ""
  },
  {
    "start": 33413.44,
    "end": 33416.24,
    "text": "Because this has all the credentials for your development environment, maybe you don't want",
    "textdich": ""
  },
  {
    "start": 33416.24,
    "end": 33421.04,
    "text": "those to get out. And there's no need to ever check it into Git. So if you create a git ignore",
    "textdich": ""
  },
  {
    "start": 33421.04,
    "end": 33428.16,
    "text": "file, so it would just dot git ignore, you want to make sure that you put in dot env. And we'll",
    "textdich": ""
  },
  {
    "start": 33428.16,
    "end": 33432.48,
    "text": "come back to the git ignore file when we start working with Git in this course. But you also",
    "textdich": ""
  },
  {
    "start": 33432.48,
    "end": 33436.32,
    "text": "want to make sure you remove anything with underscore underscore pycache underscore underscore,",
    "textdich": ""
  },
  {
    "start": 33436.32,
    "end": 33441.12,
    "text": "which is all of these, as well as your virtual environment folder. So you want to make sure none",
    "textdich": ""
  },
  {
    "start": 33441.12,
    "end": 33445.84,
    "text": "of those get checked into Git so they don't get uploaded to your GitHub repo. And just to make",
    "textdich": ""
  },
  {
    "start": 33445.84,
    "end": 33449.44,
    "text": "sure that everything's working, let's go ahead and just test this out real quick just to make sure",
    "textdich": ""
  },
  {
    "start": 33449.44,
    "end": 33454.0,
    "text": "that nothing's broken. And that seems to work. And then if we try to get all posts, everything",
    "textdich": ""
  },
  {
    "start": 33454.0,
    "end": 33458.88,
    "text": "seems to be working. So we have now successfully moved everything over to environment variables.",
    "textdich": ""
  },
  {
    "start": 33459.6,
    "end": 33464.72,
    "text": "And actually, sorry, we forgot to do one very important thing. We're not actually using the",
    "textdich": ""
  },
  {
    "start": 33464.72,
    "end": 33470.72,
    "text": "environment variables right now. Because if I actually go to my database, you can see that",
    "textdich": ""
  },
  {
    "start": 33470.72,
    "end": 33474.8,
    "text": "it's still just a hard coded value. So we have to make sure we actually update that to use the",
    "textdich": ""
  },
  {
    "start": 33474.8,
    "end": 33480.88,
    "text": "environment variables. So we're going to change this to be an F, an F string. And then here,",
    "textdich": ""
  },
  {
    "start": 33480.88,
    "end": 33485.44,
    "text": "this is going to be the username, this is the password, this is the host name, and then this",
    "textdich": ""
  },
  {
    "start": 33485.44,
    "end": 33489.6,
    "text": "is the database name. And then there's also going to be the port number, which would be right here,",
    "textdich": ""
  },
  {
    "start": 33489.6,
    "end": 33494.4,
    "text": "which is 5432. I believe that's Yeah, and that's gonna be the port number. So what we have to do",
    "textdich": ""
  },
  {
    "start": 33494.4,
    "end": 33501.52,
    "text": "is, since we're using an F string, I can just remove this. And I can say, well, first of all,",
    "textdich": ""
  },
  {
    "start": 33501.52,
    "end": 33512.0,
    "text": "we have to import our config file. But we have access to it. Or we can do from config import",
    "textdich": ""
  },
  {
    "start": 33512.0,
    "end": 33528.72,
    "text": "settings. Just put a dot there. And now I can just say settings dot database. And then we'll grab the",
    "textdich": ""
  },
  {
    "start": 33528.72,
    "end": 33533.04,
    "text": "username here. And then for the password, I'm going to do the same thing, I'll say",
    "textdich": ""
  },
  {
    "start": 33535.44,
    "end": 33548.4,
    "text": "settings dot database password. And the host name. This is going to be settings dot database host",
    "textdich": ""
  },
  {
    "start": 33548.4,
    "end": 33559.92,
    "text": "name. And then there's going to be the port number. And then finally, we've got the actual database",
    "textdich": ""
  },
  {
    "start": 33559.92,
    "end": 33575.84,
    "text": "name. I think everything should still work. Just to test this part, let's just quickly log in now.",
    "textdich": ""
  },
  {
    "start": 33575.84,
    "end": 33583.36,
    "text": "All right, everything still works. So we access to our database is now working just fine. But",
    "textdich": ""
  },
  {
    "start": 33583.36,
    "end": 33588.48,
    "text": "there's a few other things that I want to update. And keep in mind, if you're using the Postgres",
    "textdich": ""
  },
  {
    "start": 33588.48,
    "end": 33592.48,
    "text": "driver to actually connect and make queries, then you would just update it here with the settings",
    "textdich": ""
  },
  {
    "start": 33592.48,
    "end": 33605.92,
    "text": "dot whatever. But if we go to our OAuth two, we can all first of all, let's import our config.",
    "textdich": ""
  },
  {
    "start": 33608.8,
    "end": 33617.12,
    "text": "And we'll change the secret key. This is going to be settings dot",
    "textdich": ""
  },
  {
    "start": 33617.12,
    "end": 33628.48,
    "text": "secret key, not schema secret key. The algorithm is going to be settings dot algorithm.",
    "textdich": ""
  },
  {
    "start": 33632.4,
    "end": 33636.56,
    "text": "And then finally, this is going to be settings dot access token expire minutes.",
    "textdich": ""
  },
  {
    "start": 33638.48,
    "end": 33642.56,
    "text": "All right, let's reload this. Let's just double check a few things. So let's,",
    "textdich": ""
  },
  {
    "start": 33642.56,
    "end": 33649.68,
    "text": "let's, well, let's create a new user. All right, we were able to create a user, let's log in that",
    "textdich": ""
  },
  {
    "start": 33649.68,
    "end": 33659.92,
    "text": "user to log in, and then let's get posts. And we're able to get posts. And let's just double",
    "textdich": ""
  },
  {
    "start": 33659.92,
    "end": 33665.2,
    "text": "check that there's no errors. So everything looks good. And so now we have successfully migrated",
    "textdich": ""
  },
  {
    "start": 33665.2,
    "end": 33671.12,
    "text": "all of our code to using environment variables. And so when we move to production, we can just",
    "textdich": ""
  },
  {
    "start": 33671.12,
    "end": 33676.72,
    "text": "on the machine, set all of these values that we have inside our config.py file, and it's going",
    "textdich": ""
  },
  {
    "start": 33676.72,
    "end": 33682.16,
    "text": "to automatically import it, and then update those values wherever we reference them. In any social",
    "textdich": ""
  },
  {
    "start": 33682.16,
    "end": 33687.92,
    "text": "media type app, there's going to be some sort of voting or likes system. So Facebook has likes,",
    "textdich": ""
  },
  {
    "start": 33687.92,
    "end": 33694.32,
    "text": "Reddit has up votes and down votes. Instagram has likes, Twitter has likes as well. And so we're",
    "textdich": ""
  },
  {
    "start": 33694.32,
    "end": 33699.12,
    "text": "going to implement a simple like system as well. And we're going to quickly go over the requirements",
    "textdich": ""
  },
  {
    "start": 33699.12,
    "end": 33704.4,
    "text": "for it. So the first thing is a user should be able to like a post, a user should only be able",
    "textdich": ""
  },
  {
    "start": 33704.4,
    "end": 33709.52,
    "text": "to like a post once we shouldn't be able to like a post 10 times and then artificially cause the",
    "textdich": ""
  },
  {
    "start": 33709.52,
    "end": 33714.8,
    "text": "number of likes for that post to go up. And then finally, anytime we retrieve a post from our",
    "textdich": ""
  },
  {
    "start": 33714.8,
    "end": 33721.04,
    "text": "database, or from our API, we should also fetch the total number of likes for that post. Now let's",
    "textdich": ""
  },
  {
    "start": 33721.04,
    "end": 33727.12,
    "text": "take a look at the requirements for our voting model or like model. And so naturally, just like",
    "textdich": ""
  },
  {
    "start": 33727.12,
    "end": 33733.36,
    "text": "we have a table for users and a table for posts, it makes sense to store the votes in another table,",
    "textdich": ""
  },
  {
    "start": 33733.36,
    "end": 33738.72,
    "text": "just like we always do. And if you think about the requirements or what we should do for the",
    "textdich": ""
  },
  {
    "start": 33738.72,
    "end": 33744.88,
    "text": "columns, well, we need to have a column that's going to store the ID of the post that we're",
    "textdich": ""
  },
  {
    "start": 33744.88,
    "end": 33750.16,
    "text": "ultimately going to like. And then we're also going to need a column that references the idea",
    "textdich": ""
  },
  {
    "start": 33750.16,
    "end": 33755.6,
    "text": "of the user who liked the post. So those are the two absolute minimum number of columns that we",
    "textdich": ""
  },
  {
    "start": 33755.6,
    "end": 33760.88,
    "text": "need to get our voting system in place. Keep in mind if you wanted to do a you know, an up vote",
    "textdich": ""
  },
  {
    "start": 33760.88,
    "end": 33764.56,
    "text": "down vote type thing like Reddit does, then you might want to have a third column for the direction",
    "textdich": ""
  },
  {
    "start": 33764.56,
    "end": 33768.64,
    "text": "of your vote. But we're going to keep this nice and simple. And it's just going to be a very simple",
    "textdich": ""
  },
  {
    "start": 33768.64,
    "end": 33774.08,
    "text": "like system. So it's just one direction. But the most important thing of the votes table is that",
    "textdich": ""
  },
  {
    "start": 33774.08,
    "end": 33779.92,
    "text": "since a user should only be able to like a post once, this means that we need to ensure that every",
    "textdich": ""
  },
  {
    "start": 33779.92,
    "end": 33786.08,
    "text": "entry, every post ID and voter ID is a unique combination. So what do I mean by that? Well,",
    "textdich": ""
  },
  {
    "start": 33786.08,
    "end": 33791.76,
    "text": "take a look at this, we have a post with an ID of 12. And this post was liked by a user ID of four.",
    "textdich": ""
  },
  {
    "start": 33791.76,
    "end": 33797.04,
    "text": "So this is what an entry would look like. And that's perfectly fine. And if we go and we here",
    "textdich": ""
  },
  {
    "start": 33797.04,
    "end": 33802.0,
    "text": "we've got a post ID of 28. And it looks like a user with an ID of nine like this post. And if I",
    "textdich": ""
  },
  {
    "start": 33802.0,
    "end": 33808.32,
    "text": "go all the way down to here, you'll see that post ID of 12, which you can see that there was already",
    "textdich": ""
  },
  {
    "start": 33808.32,
    "end": 33814.4,
    "text": "a row with the post title is liked by a different user nine. So it's perfectly okay to see a repeat",
    "textdich": ""
  },
  {
    "start": 33814.4,
    "end": 33819.92,
    "text": "in this column. And under the user ID section, it's perfectly okay to see a repeat in this",
    "textdich": ""
  },
  {
    "start": 33819.92,
    "end": 33826.4,
    "text": "column as well, because we can see that a user of ID nine, voted and liked a post with an ID of 28,",
    "textdich": ""
  },
  {
    "start": 33826.4,
    "end": 33831.76,
    "text": "as well as a post with an ID of 12. And then obviously, one post can be liked by different",
    "textdich": ""
  },
  {
    "start": 33831.76,
    "end": 33838.88,
    "text": "users. So a post with an ID of 12 was liked by a user with an ID of four, and a post with the same",
    "textdich": ""
  },
  {
    "start": 33838.88,
    "end": 33847.76,
    "text": "post was also liked by a user with an ID of nine. Now, what we can't have is a user liking a post",
    "textdich": ""
  },
  {
    "start": 33847.76,
    "end": 33854.56,
    "text": "more than once. So you could see here, user to like to a post with an ID of 55. We can't have him",
    "textdich": ""
  },
  {
    "start": 33854.56,
    "end": 33859.84,
    "text": "do that again, right? It's a duplicate, this isn't allowed, or this shouldn't be allowed in our system,",
    "textdich": ""
  },
  {
    "start": 33859.84,
    "end": 33865.76,
    "text": "because we don't want users to be able to like like a post more than once. And so there's a couple",
    "textdich": ""
  },
  {
    "start": 33865.76,
    "end": 33870.48,
    "text": "of different ways of setting up this requirement. But we're going to take a look at the simplest",
    "textdich": ""
  },
  {
    "start": 33870.48,
    "end": 33875.76,
    "text": "solution. And we're going to learn about something called composite keys. So we've already covered",
    "textdich": ""
  },
  {
    "start": 33875.76,
    "end": 33880.24,
    "text": "what a primary key is, it's a it's a column in your table, that's going to ensure that every",
    "textdich": ""
  },
  {
    "start": 33880.24,
    "end": 33886.24,
    "text": "single entry is unique. And we always used a column called ID, which had a auto incrementing",
    "textdich": ""
  },
  {
    "start": 33886.24,
    "end": 33891.84,
    "text": "integer. However, what we can also do is make use of something called composite keys. And a composite",
    "textdich": ""
  },
  {
    "start": 33891.84,
    "end": 33897.2,
    "text": "key is nothing more than a primary key that spans multiple columns. So we've only worked with one",
    "textdich": ""
  },
  {
    "start": 33897.2,
    "end": 33902.4,
    "text": "column primary keys, but we can actually have it cover more than one column, we can have two columns",
    "textdich": ""
  },
  {
    "start": 33902.4,
    "end": 33908.56,
    "text": "or three columns. And since a primary key must be unique, this will ultimately ensure that no user",
    "textdich": ""
  },
  {
    "start": 33908.56,
    "end": 33912.88,
    "text": "can like a post twice, if we make sure that both of these columns are part of the primary key.",
    "textdich": ""
  },
  {
    "start": 33912.88,
    "end": 33917.92,
    "text": "Right. And so when you have a composite primary key, it does not care if there's duplicates in",
    "textdich": ""
  },
  {
    "start": 33917.92,
    "end": 33921.92,
    "text": "one row, it does not care if sorry, in one column, and it does not care if there's duplicates in the",
    "textdich": ""
  },
  {
    "start": 33921.92,
    "end": 33929.44,
    "text": "other column, all it cares about is, are both of the columns, the same in two different rows.",
    "textdich": ""
  },
  {
    "start": 33929.44,
    "end": 33935.44,
    "text": "So once again, you know, for a post of ID 12, we have a user for who likes it, as well as a user",
    "textdich": ""
  },
  {
    "start": 33935.44,
    "end": 33939.44,
    "text": "of nine that likes it. And so with a composite primary key, it sees that as two different",
    "textdich": ""
  },
  {
    "start": 33939.44,
    "end": 33943.76,
    "text": "entries, because it needs both of them to be the same to be considered a duplicate. So we can",
    "textdich": ""
  },
  {
    "start": 33943.76,
    "end": 33949.2,
    "text": "uniquely identify this row by saying, hey, I want the row with the post ID of 12. And a post ID of",
    "textdich": ""
  },
  {
    "start": 33949.2,
    "end": 33954.08,
    "text": "nine, there's going to be no other rows with that combination. And the same thing goes in the other",
    "textdich": ""
  },
  {
    "start": 33954.08,
    "end": 33960.72,
    "text": "direction. The user nine can like post 28. And he can also like post 12. And so once again, we can",
    "textdich": ""
  },
  {
    "start": 33960.72,
    "end": 33966.4,
    "text": "uniquely identify either one of these rows, because we can say, hey, post 28 with the user ID, that's",
    "textdich": ""
  },
  {
    "start": 33966.4,
    "end": 33971.68,
    "text": "a unique combination and a post ID of 12. With a user ID of nine, once again, a unique combination.",
    "textdich": ""
  },
  {
    "start": 33971.68,
    "end": 33978.88,
    "text": "However, we can't have a user with ID of two like 55. And then once again, the user ID of two,",
    "textdich": ""
  },
  {
    "start": 33978.88,
    "end": 33985.6,
    "text": "like 55, because the combination of these two is now a duplicate. Because one is 55. And two,",
    "textdich": ""
  },
  {
    "start": 33985.6,
    "end": 33989.84,
    "text": "and the other one's 55. And two. And so that's all a composite key is it's just a primary key",
    "textdich": ""
  },
  {
    "start": 33989.84,
    "end": 33996.72,
    "text": "that spans two columns and ensures that across both columns, we have unique combinations for things.",
    "textdich": ""
  },
  {
    "start": 33997.52,
    "end": 34002.16,
    "text": "So let's figure out how to create our new votes table. And I'm going to first show you guys how",
    "textdich": ""
  },
  {
    "start": 34002.16,
    "end": 34006.32,
    "text": "to do this within PG admin. So just with regular Postgres, and then we'll take a look at how to",
    "textdich": ""
  },
  {
    "start": 34006.32,
    "end": 34011.92,
    "text": "do this with SQL alchemy. And I'm just going to go under tables, and I'm going to create a new table,",
    "textdich": ""
  },
  {
    "start": 34011.92,
    "end": 34021.28,
    "text": "we'll call it votes. And then under columns here, I'm going to add a column. And this is going to be",
    "textdich": ""
  },
  {
    "start": 34022.8,
    "end": 34027.44,
    "text": "post underscore ID. So this is going to be the column that referenced the ID of the specific",
    "textdich": ""
  },
  {
    "start": 34027.44,
    "end": 34032.56,
    "text": "post. This should and then actually before we do anything else, I'm going to add the other column",
    "textdich": ""
  },
  {
    "start": 34032.56,
    "end": 34036.96,
    "text": "in as well. And then we're gonna have the user underscore ID. And so these are both going to be",
    "textdich": ""
  },
  {
    "start": 34036.96,
    "end": 34047.68,
    "text": "integers. And then we can just select primary key primary key. And that's going to create that",
    "textdich": ""
  },
  {
    "start": 34047.68,
    "end": 34052.16,
    "text": "composite key. And then we have to set up the foreign keys as well. So these are going to",
    "textdich": ""
  },
  {
    "start": 34052.16,
    "end": 34058.08,
    "text": "reference other tables. So for the post ID, we can go into constraints. And then we'll go into foreign",
    "textdich": ""
  },
  {
    "start": 34058.08,
    "end": 34064.96,
    "text": "key, we'll add a new foreign key. And I'm going to call this votes underscore posts underscore",
    "textdich": ""
  },
  {
    "start": 34064.96,
    "end": 34072.48,
    "text": "primary whoops, not primary key foreign key. And actually, sorry, I didn't mean to do that.",
    "textdich": ""
  },
  {
    "start": 34073.68,
    "end": 34078.8,
    "text": "And then we're just going to go into here. For the columns, we're going to select the local",
    "textdich": ""
  },
  {
    "start": 34078.8,
    "end": 34084.96,
    "text": "column, which is going to be post ID. Sorry, it's not post ID, yeah, post ID. And then for the",
    "textdich": ""
  },
  {
    "start": 34084.96,
    "end": 34092.0,
    "text": "referencing table, it's going to be the posts table. And then we're going to grab the ID of that.",
    "textdich": ""
  },
  {
    "start": 34092.0,
    "end": 34097.04,
    "text": "And for action on delete, we're going to make sure it's set to cascade so that if the you if",
    "textdich": ""
  },
  {
    "start": 34097.04,
    "end": 34108.72,
    "text": "the post gets deleted, we're gonna delete this entry. And then we'll add that in there. Oh,",
    "textdich": ""
  },
  {
    "start": 34108.72,
    "end": 34113.84,
    "text": "it looks like it's got deleted. Let me just redo this. We'll add that. And so we've got that in",
    "textdich": ""
  },
  {
    "start": 34113.84,
    "end": 34119.44,
    "text": "there now. And that should be it for the first foreign key, let's add another foreign key. And",
    "textdich": ""
  },
  {
    "start": 34119.44,
    "end": 34128.16,
    "text": "this is going to be called votes underscore users underscore foreign key columns, this is going to",
    "textdich": ""
  },
  {
    "start": 34128.16,
    "end": 34133.76,
    "text": "be user underscore ID of the local table, this is going to reference the users table, and then",
    "textdich": ""
  },
  {
    "start": 34133.76,
    "end": 34141.92,
    "text": "it's going to reference the ID. We'll hit that actions. This is going to be cascade as well.",
    "textdich": ""
  },
  {
    "start": 34143.36,
    "end": 34147.6,
    "text": "And we'll save that. And then I'm going to right click on the votes table. And then we can go to",
    "textdich": ""
  },
  {
    "start": 34147.6,
    "end": 34154.16,
    "text": "view edit data, we'll go to all rows. You can see it's a very simple table. So let's create a new",
    "textdich": ""
  },
  {
    "start": 34155.68,
    "end": 34160.72,
    "text": "let's create a new vote first. And so I'm going to first of all, I've got way too many of these",
    "textdich": ""
  },
  {
    "start": 34160.72,
    "end": 34165.12,
    "text": "windows, I'm going to just quickly delete those. Alright, so I got those deleted, I'm going to",
    "textdich": ""
  },
  {
    "start": 34165.12,
    "end": 34176.8,
    "text": "open up a new query. I can just go into database, we'll do query. I'm going to do select star from",
    "textdich": ""
  },
  {
    "start": 34176.8,
    "end": 34184.08,
    "text": "posts. And then select star from users, just so I can get a list of post IDs and user IDs.",
    "textdich": ""
  },
  {
    "start": 34185.04,
    "end": 34198.32,
    "text": "So I got user ID of 212324. And for the post, we got 1049. So let's try those out.",
    "textdich": ""
  },
  {
    "start": 34199.92,
    "end": 34204.16,
    "text": "And I already forgot them. So let's get let's get that post ID again. So we'll just grab a post ID",
    "textdich": ""
  },
  {
    "start": 34204.16,
    "end": 34209.52,
    "text": "of 10. Oh, there's going to be 10. And then the user ID. Well, I'm going to open up a new window",
    "textdich": ""
  },
  {
    "start": 34209.52,
    "end": 34215.36,
    "text": "so I can just switch between them. So now we have both of these windows for querying. And I can do",
    "textdich": ""
  },
  {
    "start": 34215.36,
    "end": 34231.2,
    "text": "select star from users. 21. Okay, so we'll do. And it looks like we hit a bug in PG admin,",
    "textdich": ""
  },
  {
    "start": 34231.2,
    "end": 34234.48,
    "text": "because I can't write anything here. So I'm just going to do view added data all rows again.",
    "textdich": ""
  },
  {
    "start": 34235.44,
    "end": 34242.0,
    "text": "And that looks a little bit better. So let's get a post 10 and a user of 21 of 10.",
    "textdich": ""
  },
  {
    "start": 34244.56,
    "end": 34250.08,
    "text": "21. And let's see if we're successfully able to get that and looks like that worked. And then if",
    "textdich": ""
  },
  {
    "start": 34250.08,
    "end": 34260.16,
    "text": "I grab a post ID that doesn't exist. So let's say like 99. And then a valid user. Let's see what",
    "textdich": ""
  },
  {
    "start": 34260.16,
    "end": 34265.28,
    "text": "happens. It's going to throw an error. That's good. And if we grab a valid post number, but a",
    "textdich": ""
  },
  {
    "start": 34265.28,
    "end": 34270.96,
    "text": "idea of a user that doesn't exist, we should also get an error. And then if any of these are blank,",
    "textdich": ""
  },
  {
    "start": 34272.8,
    "end": 34277.68,
    "text": "it save it should throw an error as well. Okay, so our table looks set. That's pretty much all we",
    "textdich": ""
  },
  {
    "start": 34277.68,
    "end": 34281.28,
    "text": "have to do. There's nothing else for these tables. You'll see that once you can create one table,",
    "textdich": ""
  },
  {
    "start": 34281.28,
    "end": 34284.48,
    "text": "you can really create a mall. So I'm just going to drop this table for now.",
    "textdich": ""
  },
  {
    "start": 34284.48,
    "end": 34290.96,
    "text": "And in the next video, we'll take a look at defining our model and SQL alchemy. So that SQL",
    "textdich": ""
  },
  {
    "start": 34290.96,
    "end": 34298.08,
    "text": "alchemy actually generates the table for us. In our models.py file, let's create our model for",
    "textdich": ""
  },
  {
    "start": 34298.08,
    "end": 34303.84,
    "text": "our votes table. And we'll call it votes or just vote. It's going to extend base.",
    "textdich": ""
  },
  {
    "start": 34303.84,
    "end": 34316.08,
    "text": "And then for our table name, I think it just makes sense to call it votes. Then let's set up our two",
    "textdich": ""
  },
  {
    "start": 34316.08,
    "end": 34324.96,
    "text": "columns. So we're gonna have a user ID. And then we're gonna have a post underscore ID. So for the",
    "textdich": ""
  },
  {
    "start": 34324.96,
    "end": 34334.48,
    "text": "user underscore ID, it's gonna be a column has to be of type integer. We're gonna set up the foreign",
    "textdich": ""
  },
  {
    "start": 34334.48,
    "end": 34343.52,
    "text": "key. And this will be users. So it's going to reference the users table and grab the ID field.",
    "textdich": ""
  },
  {
    "start": 34346.4,
    "end": 34350.56,
    "text": "And then the second property is going to be the on delete, which is going to be set to cascade.",
    "textdich": ""
  },
  {
    "start": 34350.56,
    "end": 34362.72,
    "text": "All right, then we'll set the primary key to be true. And that's pretty much it. And then I'm",
    "textdich": ""
  },
  {
    "start": 34362.72,
    "end": 34369.04,
    "text": "just going to copy this. Paste it here, we're just going to change this to be instead of users ID,",
    "textdich": ""
  },
  {
    "start": 34369.04,
    "end": 34374.56,
    "text": "we're going to be going to be posts dot ID. And I don't know why I got auto formatted to a different",
    "textdich": ""
  },
  {
    "start": 34374.56,
    "end": 34381.6,
    "text": "line. Okay, okay, it looks like that's what it prefers. And so save this. And assuming there's",
    "textdich": ""
  },
  {
    "start": 34381.6,
    "end": 34388.08,
    "text": "no errors, our application should restart. And then if we go to PG admin, and then refresh,",
    "textdich": ""
  },
  {
    "start": 34389.2,
    "end": 34393.84,
    "text": "we should see a votes table. And I'm just gonna go and take a look at the properties.",
    "textdich": ""
  },
  {
    "start": 34397.04,
    "end": 34400.56,
    "text": "And you can see that we've got the user ID and the post ID, we've got the primary key set. So it's a",
    "textdich": ""
  },
  {
    "start": 34400.56,
    "end": 34405.84,
    "text": "composite key. And since it's a primary key, not null is going to be set to yes, we go to constraints.",
    "textdich": ""
  },
  {
    "start": 34407.04,
    "end": 34410.8,
    "text": "We've got, you know, once again, both the primary keys, we should have two foreign keys.",
    "textdich": ""
  },
  {
    "start": 34411.76,
    "end": 34416.08,
    "text": "And then if we just take a look at one of them real quick, we should see cascade on delete.",
    "textdich": ""
  },
  {
    "start": 34416.08,
    "end": 34432.72,
    "text": "And so if we go and view and edit data, let's test this out 1021 again. So it should be 21 and 10,",
    "textdich": ""
  },
  {
    "start": 34432.72,
    "end": 34439.76,
    "text": "because the user IDs the first column now 2110. Let's try saving that. Good. Let's try doing 21",
    "textdich": ""
  },
  {
    "start": 34439.76,
    "end": 34449.76,
    "text": "and nine are 21 and 88 should error out perfect. And then let's try 10 and some random number",
    "textdich": ""
  },
  {
    "start": 34449.76,
    "end": 34455.12,
    "text": "error perfect. Now there's going to be a couple things that we need to take into consideration",
    "textdich": ""
  },
  {
    "start": 34455.12,
    "end": 34459.92,
    "text": "when setting up the vote route. So first of all, what is the path we're going to use? And I think",
    "textdich": ""
  },
  {
    "start": 34459.92,
    "end": 34465.52,
    "text": "it makes sense just to set up a new path called slash vote, just like we have for slash users when",
    "textdich": ""
  },
  {
    "start": 34465.52,
    "end": 34469.68,
    "text": "it comes to handling anything with users. And we have slash post for handling anything with post,",
    "textdich": ""
  },
  {
    "start": 34469.68,
    "end": 34476.32,
    "text": "we're going to have the slash vote for handling voting. Now the user ID, the user who's trying",
    "textdich": ""
  },
  {
    "start": 34476.32,
    "end": 34481.76,
    "text": "to vote on or like a post, the ID of that user is going to be extracted from the JWT token. So we",
    "textdich": ""
  },
  {
    "start": 34481.76,
    "end": 34485.84,
    "text": "don't actually have to extract that from the body, we don't need to include in the body. However,",
    "textdich": ""
  },
  {
    "start": 34485.84,
    "end": 34490.24,
    "text": "the body itself is going to contain two pieces of information, the ID of the post we're trying to",
    "textdich": ""
  },
  {
    "start": 34490.24,
    "end": 34496.96,
    "text": "like, as well as the direction of the vote. And what I mean by direction is, do they want to vote",
    "textdich": ""
  },
  {
    "start": 34496.96,
    "end": 34500.32,
    "text": "on the post? Or do they want to remove a post? Because like any application, you know, maybe",
    "textdich": ""
  },
  {
    "start": 34500.32,
    "end": 34504.08,
    "text": "you accidentally clicked on a post to like it, but you realize you don't want to like it. So you click",
    "textdich": ""
  },
  {
    "start": 34504.08,
    "end": 34509.6,
    "text": "on it again, to remove that. So vote direction of one means that we're going to like the post,",
    "textdich": ""
  },
  {
    "start": 34509.6,
    "end": 34514.8,
    "text": "and then a vote direction of zero means we're going to remove our like of the post. Now in",
    "textdich": ""
  },
  {
    "start": 34514.8,
    "end": 34518.88,
    "text": "our routers folder, we're going to create a new file, which is just going to be vote.py. So this",
    "textdich": ""
  },
  {
    "start": 34518.88,
    "end": 34523.76,
    "text": "is going to handle all the routing for our voting URLs. And what I want to do is I'm just going to",
    "textdich": ""
  },
  {
    "start": 34523.76,
    "end": 34533.52,
    "text": "copy the import statement from one of the other routers. And we'll set up a route. So let's set",
    "textdich": ""
  },
  {
    "start": 34533.52,
    "end": 34538.8,
    "text": "up the decorator first, and this is going to be a post. And I actually have to import router.",
    "textdich": ""
  },
  {
    "start": 34538.8,
    "end": 34555.12,
    "text": "And we got it, let's create our router instance. So we'll say router equals API router.",
    "textdich": ""
  },
  {
    "start": 34560.24,
    "end": 34561.76,
    "text": "And we'll set up the prefix to be",
    "textdich": ""
  },
  {
    "start": 34561.76,
    "end": 34572.56,
    "text": "slash vote. And the tags, we're going to give it its own section, which is going to just say,",
    "textdich": ""
  },
  {
    "start": 34574.0,
    "end": 34585.36,
    "text": "vote. And so now we can do at router dot post, this is gonna be a post operation,",
    "textdich": ""
  },
  {
    "start": 34585.36,
    "end": 34592.0,
    "text": "because we have to send some information to the server. And the URL is just going to be slash,",
    "textdich": ""
  },
  {
    "start": 34592.0,
    "end": 34601.44,
    "text": "so it's just going to be slash vote, then. And since we're going to create a vote, by default,",
    "textdich": ""
  },
  {
    "start": 34601.44,
    "end": 34615.84,
    "text": "we're going to send a different status code, we're going to set a 201 instead of the default 200.",
    "textdich": ""
  },
  {
    "start": 34617.84,
    "end": 34619.92,
    "text": "Then we'll define our function, which I'll just call vote.",
    "textdich": ""
  },
  {
    "start": 34622.16,
    "end": 34625.44,
    "text": "Now, there's going to be a couple things that we have to pass in. So since we expect the user to",
    "textdich": ""
  },
  {
    "start": 34625.44,
    "end": 34630.64,
    "text": "provide some data in the body, it usually means we want to define a schema just so that we can",
    "textdich": ""
  },
  {
    "start": 34630.64,
    "end": 34636.56,
    "text": "ensure they send us the exact information. So let's set up our schema for voting. We'll create",
    "textdich": ""
  },
  {
    "start": 34636.56,
    "end": 34645.68,
    "text": "a class called vote. And so the first field should be a post ID, which is going to be a type int.",
    "textdich": ""
  },
  {
    "start": 34646.32,
    "end": 34652.72,
    "text": "And then we're going to have a direction, which is going to be an integer as well. So it's either",
    "textdich": ""
  },
  {
    "start": 34652.72,
    "end": 34660.48,
    "text": "zero or one. However, I would like to be able to validate to ensure that it's only zero or one,",
    "textdich": ""
  },
  {
    "start": 34660.48,
    "end": 34664.88,
    "text": "I couldn't exactly figure out if there was a way to do that in pedantic. But one thing we can do",
    "textdich": ""
  },
  {
    "start": 34664.88,
    "end": 34671.68,
    "text": "is we can use content. So we'll import that from pedantic automatically. So if you want to see the",
    "textdich": ""
  },
  {
    "start": 34671.68,
    "end": 34678.08,
    "text": "import, that's what it's going to look like. And we can say less than or equal to one. So anything",
    "textdich": ""
  },
  {
    "start": 34678.08,
    "end": 34682.0,
    "text": "less than one is going to be allowed. The only problem with this is that allows for negative",
    "textdich": ""
  },
  {
    "start": 34682.0,
    "end": 34687.6,
    "text": "numbers. But that's okay. You know, if you guys figure out how to just specify zero on one,",
    "textdich": ""
  },
  {
    "start": 34687.6,
    "end": 34692.16,
    "text": "then you know, go ahead and replace that and definitely leave it leave that piece of information",
    "textdich": ""
  },
  {
    "start": 34692.16,
    "end": 34697.52,
    "text": "in the comments so that anyone else who wants to set up that specific restriction, then we all know",
    "textdich": ""
  },
  {
    "start": 34697.52,
    "end": 34706.96,
    "text": "how to do that moving forward. And let's import our schema now. So we'll go up a directory.",
    "textdich": ""
  },
  {
    "start": 34706.96,
    "end": 34718.64,
    "text": "And let's also import database models. And we're going to have to require the user to be logged in",
    "textdich": ""
  },
  {
    "start": 34718.64,
    "end": 34726.24,
    "text": "before they can vote on something. So let's import a walk to until here, we're going to set up the",
    "textdich": ""
  },
  {
    "start": 34726.24,
    "end": 34746.4,
    "text": "schema. And we're also going to set up the database so that we can make queries. And then lastly,",
    "textdich": ""
  },
  {
    "start": 34746.4,
    "end": 34767.84,
    "text": "we'll get the current user. So once we get all of those dependencies, it looks like we have to",
    "textdich": ""
  },
  {
    "start": 34767.84,
    "end": 34779.84,
    "text": "import session as well. And I'm actually going to move this right below the first import, not that",
    "textdich": ""
  },
  {
    "start": 34779.84,
    "end": 34786.64,
    "text": "it matters, but so we're going to set up logic for when the vote direction is one. So if I if",
    "textdich": ""
  },
  {
    "start": 34787.44,
    "end": 34793.92,
    "text": "vote dot der, so we're pulling the direction from the vote schema equals equals one, then we're",
    "textdich": ""
  },
  {
    "start": 34793.92,
    "end": 34799.28,
    "text": "going to perform some logic. Else, if it's zero, then we're going to perform some other logic.",
    "textdich": ""
  },
  {
    "start": 34800.48,
    "end": 34806.32,
    "text": "So if we want to create a vote, the first thing we're going to do is query to see, you know,",
    "textdich": ""
  },
  {
    "start": 34806.32,
    "end": 34810.56,
    "text": "does the vote already exist. And so what I'm gonna do is I'm gonna say db dot query.",
    "textdich": ""
  },
  {
    "start": 34812.72,
    "end": 34820.4,
    "text": "And we'll grab models dot vote. And I'm going to filter based off of models dot vote,",
    "textdich": ""
  },
  {
    "start": 34820.4,
    "end": 34831.2,
    "text": "dot post underscore ID. And we're going to say it equals equals vote dot post underscore ID. So",
    "textdich": ""
  },
  {
    "start": 34831.2,
    "end": 34835.6,
    "text": "we're going to see if there's already a vote for this specific post ID. However, this isn't enough,",
    "textdich": ""
  },
  {
    "start": 34835.6,
    "end": 34840.48,
    "text": "because remember, multiple people can vote on the same post. So we actually have to do a second",
    "textdich": ""
  },
  {
    "start": 34840.48,
    "end": 34846.32,
    "text": "check. And we can add in a second condition by just doing a comma and then providing the second",
    "textdich": ""
  },
  {
    "start": 34846.32,
    "end": 34855.6,
    "text": "condition. So we have to say models dot vote dot user ID equals equals current user dot ID.",
    "textdich": ""
  },
  {
    "start": 34858.96,
    "end": 34862.96,
    "text": "And I'm going to save this. And we're going to call this vote underscore query. So this isn't",
    "textdich": ""
  },
  {
    "start": 34862.96,
    "end": 34866.56,
    "text": "going to actually query the database yet. This is just building up the query. And it's going to",
    "textdich": ""
  },
  {
    "start": 34866.56,
    "end": 34872.08,
    "text": "check to see if this specific user ultimately has voted for this specific post already or like this",
    "textdich": ""
  },
  {
    "start": 34872.08,
    "end": 34878.32,
    "text": "post. And I'm actually going to move this above the if statement. And you guys will see why we're",
    "textdich": ""
  },
  {
    "start": 34878.32,
    "end": 34886.96,
    "text": "going to do that in a bit. And we're going to then perform the query and just save that",
    "textdich": ""
  },
  {
    "start": 34886.96,
    "end": 34893.6,
    "text": "result under found vote equals vote underscore query dot first. All right. And so if the user",
    "textdich": ""
  },
  {
    "start": 34893.6,
    "end": 34899.2,
    "text": "wants to like a post, but we already found a post, that means he's already liked this specific post,",
    "textdich": ""
  },
  {
    "start": 34899.2,
    "end": 34904.48,
    "text": "so he can't like it again. So we're going to say is if we already found a vote, then we're going",
    "textdich": ""
  },
  {
    "start": 34904.48,
    "end": 34912.32,
    "text": "to raise an HTTP exception. Now the status code, we're going to use a new status code, I'm going to",
    "textdich": ""
  },
  {
    "start": 34912.32,
    "end": 34921.36,
    "text": "use status dot and then this is going to be a 409 for conflict. And there's other status codes you",
    "textdich": ""
  },
  {
    "start": 34921.36,
    "end": 34925.6,
    "text": "could potentially use, I just decided that this is probably going to be the best fit. And then for",
    "textdich": ""
  },
  {
    "start": 34925.6,
    "end": 34931.04,
    "text": "detail, we're going to just pass an F string and say user, and then we pass in the user, which is",
    "textdich": ""
  },
  {
    "start": 34931.04,
    "end": 34946.48,
    "text": "a get current underscore user dot ID has already voted on post with an ID of vote dot post underscore",
    "textdich": ""
  },
  {
    "start": 34946.48,
    "end": 34952.16,
    "text": "ID. Alright, but if we didn't find a vote, then what we're going to do is we're going to create",
    "textdich": ""
  },
  {
    "start": 34952.16,
    "end": 34958.8,
    "text": "a brand new vote. So I'll say models dot vote. And so the post ID field is going to be set to vote",
    "textdich": ""
  },
  {
    "start": 34958.8,
    "end": 34966.96,
    "text": "dot post underscore ID. And then we can grab the user ID field from current user dot ID.",
    "textdich": ""
  },
  {
    "start": 34967.92,
    "end": 34972.88,
    "text": "So this will set the two properties. And we'll save this as new underscore vote.",
    "textdich": ""
  },
  {
    "start": 34973.92,
    "end": 34977.92,
    "text": "And as usual, to actually perform these changes, or to add this to our database, we have to do DB",
    "textdich": ""
  },
  {
    "start": 34977.92,
    "end": 34990.32,
    "text": "dot add new underscore vote. And then a DB dot commit. And we don't actually need to send the",
    "textdich": ""
  },
  {
    "start": 34990.32,
    "end": 34994.32,
    "text": "created vote back to the user because it doesn't really provide any useful information. We're just",
    "textdich": ""
  },
  {
    "start": 34994.32,
    "end": 35008.8,
    "text": "going to send a message that says successfully added vote. Now, if the user provided a direction",
    "textdich": ""
  },
  {
    "start": 35008.8,
    "end": 35013.2,
    "text": "of zero, that means they want to delete a pre existing vote. So first of all, we'll say if",
    "textdich": ""
  },
  {
    "start": 35013.2,
    "end": 35024.16,
    "text": "not found vote, right, we can't delete a vote that doesn't exist. So we'll raise an HTTP exception.",
    "textdich": ""
  },
  {
    "start": 35024.16,
    "end": 35036.16,
    "text": "Status code, I think we could just send a 404.",
    "textdich": ""
  },
  {
    "start": 35036.16,
    "end": 35048.72,
    "text": "And for the detail, just say vote does not exist. But if we did find a vote, then we have to delete",
    "textdich": ""
  },
  {
    "start": 35048.72,
    "end": 35054.08,
    "text": "it. So I'll say vote underscore query. Remember, this is a query all the way at the top.",
    "textdich": ""
  },
  {
    "start": 35054.08,
    "end": 35071.04,
    "text": "I'll say dot delete. And then we can just do our synchronize, synchronize session false. And we'll",
    "textdich": ""
  },
  {
    "start": 35071.04,
    "end": 35091.6,
    "text": "do a DB commit. And we'll just return a similar message successfully deleted vote. Okay, and this",
    "textdich": ""
  },
  {
    "start": 35091.6,
    "end": 35097.68,
    "text": "should kind of sum up all of the logic in our path operation function. And at this point, we can just",
    "textdich": ""
  },
  {
    "start": 35097.68,
    "end": 35107.04,
    "text": "go ahead and test this out. So we'll go back to postman. First of all, let's log in. Alright,",
    "textdich": ""
  },
  {
    "start": 35107.04,
    "end": 35111.92,
    "text": "so we've logged in. And what I'm going to do is create a brand new request, we'll call this",
    "textdich": ""
  },
  {
    "start": 35111.92,
    "end": 35130.72,
    "text": "vote. And this is going to be a vote. And in the body, we have to pass in the specific data. So",
    "textdich": ""
  },
  {
    "start": 35130.72,
    "end": 35136.48,
    "text": "let's actually grab a post or an ID of a post. So in this case, there's an ID of 10.",
    "textdich": ""
  },
  {
    "start": 35136.48,
    "end": 35146.0,
    "text": "Actually, first, let me double check who I'm logged in as. Okay, that's fine. I'm gonna grab",
    "textdich": ""
  },
  {
    "start": 35146.0,
    "end": 35171.84,
    "text": "a post with an ID of 10. Here, we'll say post underscore ID 10. And then we'll say, der, actually,",
    "textdich": ""
  },
  {
    "start": 35171.84,
    "end": 35176.96,
    "text": "is that what we called it? I actually forgot to go to our schemas. Yeah, it's just der.",
    "textdich": ""
  },
  {
    "start": 35181.28,
    "end": 35186.08,
    "text": "And this is going to be, let's, let's, this is gonna be a one so that we can actually like the",
    "textdich": ""
  },
  {
    "start": 35186.08,
    "end": 35191.44,
    "text": "post. And remember, this should be a post request. So let's try this out. Let's hit send.",
    "textdich": ""
  },
  {
    "start": 35193.92,
    "end": 35196.4,
    "text": "And it looks like we ran into an issue. So let's check.",
    "textdich": ""
  },
  {
    "start": 35196.4,
    "end": 35204.16,
    "text": "And it says that this specific route was not found. And so that's obviously because we didn't",
    "textdich": ""
  },
  {
    "start": 35204.16,
    "end": 35212.48,
    "text": "wire up this specific router. So let's go back to our main.py. And let's import vote. And then we",
    "textdich": ""
  },
  {
    "start": 35212.48,
    "end": 35227.36,
    "text": "can just copy this and wire up vote router. Yep. And once again, another typo. All right, let's give",
    "textdich": ""
  },
  {
    "start": 35227.36,
    "end": 35235.84,
    "text": "this a try now. So we'll hit send. It says we're not authenticated. So let me log in user. All",
    "textdich": ""
  },
  {
    "start": 35235.84,
    "end": 35245.52,
    "text": "right, now let's try this. And it says that I'm still unauthenticated. And guys, I realized why",
    "textdich": ""
  },
  {
    "start": 35245.52,
    "end": 35249.28,
    "text": "we're getting not authenticated, that's just because we have a new request. And we have to",
    "textdich": ""
  },
  {
    "start": 35249.28,
    "end": 35255.76,
    "text": "make sure that we set the authorization to be bare token. And then we want to pass in our JWT",
    "textdich": ""
  },
  {
    "start": 35255.76,
    "end": 35260.88,
    "text": "variable. So it wasn't actually retrieving that. So now if I try this, we can see that we successfully",
    "textdich": ""
  },
  {
    "start": 35260.88,
    "end": 35266.0,
    "text": "added vote. And, you know, just make sure that it actually did that, let's actually go into our",
    "textdich": ""
  },
  {
    "start": 35266.0,
    "end": 35279.44,
    "text": "database and take a look at our votes table. And so we like to post and it looks like I have some",
    "textdich": ""
  },
  {
    "start": 35279.44,
    "end": 35283.84,
    "text": "previous ones. So what I'm actually going to do is I'm going to delete everything from our votes",
    "textdich": ""
  },
  {
    "start": 35283.84,
    "end": 35288.32,
    "text": "table, just so we can make sure it works. Because I forgot who I'm even logged in as let's go to",
    "textdich": ""
  },
  {
    "start": 35288.32,
    "end": 35300.08,
    "text": "properties. Sorry, let me just do a query. I'm just gonna say delete from votes. That's going",
    "textdich": ""
  },
  {
    "start": 35300.08,
    "end": 35306.32,
    "text": "to delete everything in our votes table. Perfect. And then we can just say select from votes.",
    "textdich": ""
  },
  {
    "start": 35306.32,
    "end": 35319.68,
    "text": "We have nothing in there. And let's try this again. All right. And so now run this, we can",
    "textdich": ""
  },
  {
    "start": 35319.68,
    "end": 35326.24,
    "text": "see that we did like post 10. And I guess our ID is 24. But we can just quickly verify that I do",
    "textdich": ""
  },
  {
    "start": 35326.24,
    "end": 35335.2,
    "text": "select star from users. And I'm logged in as Sanjeev 123. So we can see that that has an ID",
    "textdich": ""
  },
  {
    "start": 35335.2,
    "end": 35340.56,
    "text": "of 24. So that works. Now what I'm going to do is let's test to see what happens if I try to vote",
    "textdich": ""
  },
  {
    "start": 35340.56,
    "end": 35345.76,
    "text": "on a post that I've already voted on. So I'm going to keep the vote direction to be one. And I know",
    "textdich": ""
  },
  {
    "start": 35345.76,
    "end": 35352.48,
    "text": "I've already voted on this post. So we should get user 24 has already voted on post 10. Perfect.",
    "textdich": ""
  },
  {
    "start": 35353.2,
    "end": 35358.48,
    "text": "Now let's go and try to delete a post. I'm gonna set the vote there to be zero. And let's see what",
    "textdich": ""
  },
  {
    "start": 35358.48,
    "end": 35363.6,
    "text": "happens. It says I successfully deleted the post or the vote. And let's just do a quick query,",
    "textdich": ""
  },
  {
    "start": 35363.6,
    "end": 35370.16,
    "text": "we can see nothing is there. And then if we try to delete a vote, or a like that doesn't exist,",
    "textdich": ""
  },
  {
    "start": 35371.04,
    "end": 35375.84,
    "text": "we can see that vote does not exist. All right, guys, we've actually implemented all of the",
    "textdich": ""
  },
  {
    "start": 35375.84,
    "end": 35382.64,
    "text": "voting logic right there. The only other thing that we need to do is when we retrieve a post,",
    "textdich": ""
  },
  {
    "start": 35382.64,
    "end": 35391.52,
    "text": "right, whether it's through the get all posts, or even I get one post, I want to have my fast API",
    "textdich": ""
  },
  {
    "start": 35391.52,
    "end": 35397.76,
    "text": "send the number of votes as a property as a field here so that, you know, when we load up posts on",
    "textdich": ""
  },
  {
    "start": 35397.76,
    "end": 35403.12,
    "text": "our front end application, they can see the number of likes that a post has. That's usually how most",
    "textdich": ""
  },
  {
    "start": 35403.12,
    "end": 35407.28,
    "text": "applications work. And I would like it to have it automatically send that information instead of",
    "textdich": ""
  },
  {
    "start": 35407.28,
    "end": 35412.32,
    "text": "having to send another query to our back end to see, you know, what is the total number of votes,",
    "textdich": ""
  },
  {
    "start": 35412.32,
    "end": 35417.84,
    "text": "I wanted to do it automatically, anytime we retrieve any post. And that's going to be a",
    "textdich": ""
  },
  {
    "start": 35417.84,
    "end": 35424.24,
    "text": "little bit more complex, we're going to have to learn a little bit more about SQL, start digging",
    "textdich": ""
  },
  {
    "start": 35424.24,
    "end": 35430.32,
    "text": "into some of the weeds of SQL and Postgres. And then once we learn how to do it with regular SQL,",
    "textdich": ""
  },
  {
    "start": 35430.32,
    "end": 35437.44,
    "text": "we have to see if we can do this with SQL alchemy. After I finished recording all of the voting logic,",
    "textdich": ""
  },
  {
    "start": 35437.44,
    "end": 35442.8,
    "text": "or at least the router that handles voting, I realized there's one tiny bug. And that is that",
    "textdich": ""
  },
  {
    "start": 35442.8,
    "end": 35447.52,
    "text": "right now, there's no logic to actually detect if the user is trying to vote on a post that doesn't",
    "textdich": ""
  },
  {
    "start": 35447.52,
    "end": 35453.36,
    "text": "exist. Because if they want to vote on a post that doesn't exist, I want to ideally send a 404.",
    "textdich": ""
  },
  {
    "start": 35453.36,
    "end": 35456.32,
    "text": "So what we're going to do is we're going to implement that logic. And it's going to be really",
    "textdich": ""
  },
  {
    "start": 35456.32,
    "end": 35460.64,
    "text": "simple, we're just going to query for the post based off of the ID. First, if it doesn't exist,",
    "textdich": ""
  },
  {
    "start": 35460.64,
    "end": 35464.48,
    "text": "we're going to throw an exception. So just like we've done with pretty much all of our other",
    "textdich": ""
  },
  {
    "start": 35464.48,
    "end": 35468.48,
    "text": "routers, whenever someone tries to act as a post that they don't, that doesn't exist, then we're",
    "textdich": ""
  },
  {
    "start": 35468.48,
    "end": 35474.4,
    "text": "just going to simply send a 404. So let's start off by making our query, I'm going to do DB query,",
    "textdich": ""
  },
  {
    "start": 35474.4,
    "end": 35480.72,
    "text": "we'll say models dot post. And then what we're going to do is we're going to filter based off of",
    "textdich": ""
  },
  {
    "start": 35480.72,
    "end": 35490.96,
    "text": "the post ID. So we'll say models dot post dot ID equals equals vote dot post underscore ID. And",
    "textdich": ""
  },
  {
    "start": 35490.96,
    "end": 35497.76,
    "text": "then we're going to grab the first one. And we'll save this in a variable called post.",
    "textdich": ""
  },
  {
    "start": 35497.76,
    "end": 35508.96,
    "text": "Then we'll say if not post, so if the post doesn't exist, then we're going to raise an HTTP exception.",
    "textdich": ""
  },
  {
    "start": 35512.72,
    "end": 35514.64,
    "text": "And the status code is going to be a 404.",
    "textdich": ""
  },
  {
    "start": 35514.64,
    "end": 35531.04,
    "text": "And the detail will be the usual f string that says post with ID, and then we'll pass in the ID.",
    "textdich": ""
  },
  {
    "start": 35531.04,
    "end": 35545.2,
    "text": "Does not exist. And that's all we have to do. And that's going to fix that little bit that",
    "textdich": ""
  },
  {
    "start": 35545.2,
    "end": 35549.84,
    "text": "little tiny bug. And you'll see that when we get to the testing section, we can now test to see if",
    "textdich": ""
  },
  {
    "start": 35549.84,
    "end": 35554.88,
    "text": "the post doesn't exist as well. Up till now we've been working with very simple queries, we've just",
    "textdich": ""
  },
  {
    "start": 35554.88,
    "end": 35560.8,
    "text": "been querying a single table. However, now that we have more than one table, and all of these tables",
    "textdich": ""
  },
  {
    "start": 35560.8,
    "end": 35565.6,
    "text": "have built out these relationships, you're going to see that eventually you want to be able to get",
    "textdich": ""
  },
  {
    "start": 35565.6,
    "end": 35570.88,
    "text": "information from two tables at the same exact time. And this gets a little complicated. But the way",
    "textdich": ""
  },
  {
    "start": 35570.88,
    "end": 35576.88,
    "text": "we actually do that is by using something called a join. So we join two tables together. And as an",
    "textdich": ""
  },
  {
    "start": 35576.88,
    "end": 35584.88,
    "text": "example, let's say I want to get all of my posts. So I do a select star from posts. That's great and",
    "textdich": ""
  },
  {
    "start": 35584.88,
    "end": 35592.24,
    "text": "all. However, you know, when we're sending back the the posts to the user, right, the or our front",
    "textdich": ""
  },
  {
    "start": 35592.24,
    "end": 35597.12,
    "text": "end, our front end has no idea what a owner ID of 23 is, he doesn't know what that is. And we",
    "textdich": ""
  },
  {
    "start": 35597.12,
    "end": 35602.08,
    "text": "ultimately want to display the username or the email of the user that created the post on our",
    "textdich": ""
  },
  {
    "start": 35602.08,
    "end": 35606.88,
    "text": "front end. So what we would have to do if we could only, you know, retrieve data from one table at a",
    "textdich": ""
  },
  {
    "start": 35606.88,
    "end": 35612.08,
    "text": "time is we'd have to then individually go and then fetch all of these users from the user table,",
    "textdich": ""
  },
  {
    "start": 35612.08,
    "end": 35618.48,
    "text": "one by one, so that we can actually get the email or the username. And that's a little",
    "textdich": ""
  },
  {
    "start": 35618.48,
    "end": 35623.76,
    "text": "inefficient having to do multiple queries. If you ever get a chance to, it's better to just do a",
    "textdich": ""
  },
  {
    "start": 35623.76,
    "end": 35628.72,
    "text": "single query and get all of the pieces of information that you're interested in. So I'm going to show",
    "textdich": ""
  },
  {
    "start": 35628.72,
    "end": 35632.72,
    "text": "you guys how we can join information from two tables, because I would also like to get all of",
    "textdich": ""
  },
  {
    "start": 35632.72,
    "end": 35639.6,
    "text": "the user information based off of the owner ID field that's on the posts table. So how do we do",
    "textdich": ""
  },
  {
    "start": 35639.6,
    "end": 35644.8,
    "text": "that? Well, we start off a query just like this. And actually, before we go into this, what I would",
    "textdich": ""
  },
  {
    "start": 35644.8,
    "end": 35650.8,
    "text": "like to do is show you one of my favorite websites. So if you go to Postgres tutorial, just search",
    "textdich": ""
  },
  {
    "start": 35650.8,
    "end": 35656.48,
    "text": "for that in Google, you'll see that there's a website called Postgres, q l tutorial.com.",
    "textdich": ""
  },
  {
    "start": 35656.48,
    "end": 35663.36,
    "text": "This is one of my favorite sites. And I want you to go to joins right here. So this is how we get",
    "textdich": ""
  },
  {
    "start": 35663.36,
    "end": 35669.2,
    "text": "information from two different tables. And this, this page, you do does an absolute marvelous job",
    "textdich": ""
  },
  {
    "start": 35669.2,
    "end": 35673.6,
    "text": "of explaining how to actually join two tables. And it goes over the different types of joins,",
    "textdich": ""
  },
  {
    "start": 35673.6,
    "end": 35677.68,
    "text": "because there isn't just one method, you've got left joins, you have an inner joins, you got outer",
    "textdich": ""
  },
  {
    "start": 35677.68,
    "end": 35683.2,
    "text": "joins, you got right joins. And I strongly suggest you guys quickly just kind of read through this",
    "textdich": ""
  },
  {
    "start": 35683.2,
    "end": 35687.2,
    "text": "just to get an idea. Because I don't want to cover every single join, I'm just going to show you the",
    "textdich": ""
  },
  {
    "start": 35687.2,
    "end": 35692.88,
    "text": "ones that we need to get the data that we're interested in. So let's go back to Postgres.",
    "textdich": ""
  },
  {
    "start": 35693.6,
    "end": 35698.0,
    "text": "And let's create our first join. So here, I'm do select, I'm just grabbing all of the fields.",
    "textdich": ""
  },
  {
    "start": 35698.0,
    "end": 35701.84,
    "text": "And I'm going to grab it from the post table. And what we can do is I can say left join.",
    "textdich": ""
  },
  {
    "start": 35703.84,
    "end": 35709.12,
    "text": "And then we specify the other table, we want to jam into my query. So now I want to get data from",
    "textdich": ""
  },
  {
    "start": 35709.12,
    "end": 35714.72,
    "text": "the users table. So I do users. And then we have to find a field in both tables that we need to",
    "textdich": ""
  },
  {
    "start": 35714.72,
    "end": 35721.44,
    "text": "match on or join the table on. And since we want to find the specific user associated with the",
    "textdich": ""
  },
  {
    "start": 35721.44,
    "end": 35728.48,
    "text": "person who created this post, we need to join on the owner ID. So what we say is on so this is how",
    "textdich": ""
  },
  {
    "start": 35728.48,
    "end": 35734.24,
    "text": "we specify what it should join on. And we want to say, we grabbed the first table's name, right,",
    "textdich": ""
  },
  {
    "start": 35734.24,
    "end": 35739.52,
    "text": "the posts table, we grab posts. And then we say dot and then we grab the specific column we want",
    "textdich": ""
  },
  {
    "start": 35739.52,
    "end": 35746.72,
    "text": "to join on. So owner underscore ID. And then we just say it equals two. And then we grab the",
    "textdich": ""
  },
  {
    "start": 35746.72,
    "end": 35752.72,
    "text": "second table, which is called users. And then we grab the specific column from the users table we",
    "textdich": ""
  },
  {
    "start": 35752.72,
    "end": 35760.96,
    "text": "want to join on, which is users dot ID. So now if I run this, take a look at that, it took all of",
    "textdich": ""
  },
  {
    "start": 35760.96,
    "end": 35767.44,
    "text": "the user data. And it jammed it right into one single query with the posts. And so now I get the",
    "textdich": ""
  },
  {
    "start": 35767.44,
    "end": 35775.2,
    "text": "entire post. And I also get information about the specific user because we joined on owner ID and",
    "textdich": ""
  },
  {
    "start": 35775.2,
    "end": 35780.0,
    "text": "the user ID together. So it was able to kind of take that information from the other table and",
    "textdich": ""
  },
  {
    "start": 35780.0,
    "end": 35785.76,
    "text": "match it right up to here. Because we did a star, it's going to grab the columns from it's going to",
    "textdich": ""
  },
  {
    "start": 35785.76,
    "end": 35790.56,
    "text": "grab every single column from every single from both of the tables. And there may be times where",
    "textdich": ""
  },
  {
    "start": 35790.56,
    "end": 35796.64,
    "text": "maybe you don't want that maybe we just want a couple of columns. So let's say we want the title",
    "textdich": ""
  },
  {
    "start": 35796.64,
    "end": 35807.12,
    "text": "column. Maybe we want content. And maybe we want email. And this should allow us to grab the title,",
    "textdich": ""
  },
  {
    "start": 35807.12,
    "end": 35814.56,
    "text": "which comes from the post table, and the content, which comes from the post table and then email,",
    "textdich": ""
  },
  {
    "start": 35814.56,
    "end": 35818.32,
    "text": "which comes from the user table. So let's see what happens when I run this. Right, you can see I got",
    "textdich": ""
  },
  {
    "start": 35818.32,
    "end": 35824.08,
    "text": "the title, content and email. Now, if I remove this and go back to everything, just real quick,",
    "textdich": ""
  },
  {
    "start": 35824.08,
    "end": 35831.28,
    "text": "let's say I want to get the post ID and the email. Well, let's see what happens. I'm going to do",
    "textdich": ""
  },
  {
    "start": 35831.28,
    "end": 35840.48,
    "text": "ID. And then email. Well, it looks like we have an error. It says column reference ID is ambiguous.",
    "textdich": ""
  },
  {
    "start": 35840.48,
    "end": 35845.2,
    "text": "So what exactly is happening here? Well, I'm going to remove this and show you exactly what happened.",
    "textdich": ""
  },
  {
    "start": 35846.64,
    "end": 35852.56,
    "text": "The problem is, is that the post table has a column called ID. And the user table has a",
    "textdich": ""
  },
  {
    "start": 35852.56,
    "end": 35857.52,
    "text": "column called ID. So when I just say ID, it has no idea which column I want. So that's why it's",
    "textdich": ""
  },
  {
    "start": 35857.52,
    "end": 35863.28,
    "text": "saying it's ambiguous. So what we need to do is anytime there's potential for confusion,",
    "textdich": ""
  },
  {
    "start": 35863.28,
    "end": 35868.96,
    "text": "we always have to specify the table name before. So I can say posts dot ID. And then I could say",
    "textdich": ""
  },
  {
    "start": 35868.96,
    "end": 35876.8,
    "text": "email. Now, I don't have to say, you know, user dot email, because only the users table has an",
    "textdich": ""
  },
  {
    "start": 35876.8,
    "end": 35881.04,
    "text": "email column. However, if there was an email column in the post table as well, then we would",
    "textdich": ""
  },
  {
    "start": 35881.04,
    "end": 35886.24,
    "text": "have to append the table name first. So you only need to do this when there's confusion. However,",
    "textdich": ""
  },
  {
    "start": 35886.24,
    "end": 35890.8,
    "text": "if you want to just kind of stick to a certain convention, you can just set up every single",
    "textdich": ""
  },
  {
    "start": 35890.8,
    "end": 35895.68,
    "text": "property to have the table name beforehand, so that you know which table it's coming from makes",
    "textdich": ""
  },
  {
    "start": 35895.68,
    "end": 35904.0,
    "text": "it a little bit easier to read. And so now I got just the ID and the email. Now, let's say I want",
    "textdich": ""
  },
  {
    "start": 35904.0,
    "end": 35912.64,
    "text": "to get every field from one of the tables, I can say posts dot star, that's gonna grab every field.",
    "textdich": ""
  },
  {
    "start": 35912.64,
    "end": 35917.28,
    "text": "So it's grabbing the post table. And then the star means hey, grab every single column. And so I can",
    "textdich": ""
  },
  {
    "start": 35917.28,
    "end": 35920.88,
    "text": "do that, it's gonna grab everything from the post table. And then I can grab maybe just the email",
    "textdich": ""
  },
  {
    "start": 35920.88,
    "end": 35926.56,
    "text": "in this case. And so this kind of ultimately does what we had wanted it to do. Because you know,",
    "textdich": ""
  },
  {
    "start": 35926.56,
    "end": 35931.92,
    "text": "I told you guys, we want to be able to get the email or the username information for each and",
    "textdich": ""
  },
  {
    "start": 35931.92,
    "end": 35936.96,
    "text": "every single post. And if we want to, you know, we can add in some of the other fields, maybe the",
    "textdich": ""
  },
  {
    "start": 35939.04,
    "end": 35943.52,
    "text": "maybe the user dot ID. So the user ID, however, that's just going to match up with the owner ID.",
    "textdich": ""
  },
  {
    "start": 35943.52,
    "end": 35948.8,
    "text": "But just to show you guys, there is some flexibility. And as I mentioned before,",
    "textdich": ""
  },
  {
    "start": 35948.8,
    "end": 35953.44,
    "text": "there are different types of joins, there's left join, there's right join, inner join, outer join,",
    "textdich": ""
  },
  {
    "start": 35953.44,
    "end": 35957.12,
    "text": "I don't want to spend too much on it. But I do want to cover just a few things,",
    "textdich": ""
  },
  {
    "start": 35957.12,
    "end": 35962.24,
    "text": "or it's the direction references which table. So right now we're working with two tables. There's",
    "textdich": ""
  },
  {
    "start": 35962.24,
    "end": 35967.68,
    "text": "the first table that's referenced by from and then the name of the table. And then there's the second",
    "textdich": ""
  },
  {
    "start": 35967.68,
    "end": 35972.32,
    "text": "table, which is referenced after the join, which is right here. And so the first table that's",
    "textdich": ""
  },
  {
    "start": 35972.32,
    "end": 35977.84,
    "text": "referenced is always referred to as the left table. And the ref, the table on the right,",
    "textdich": ""
  },
  {
    "start": 35977.84,
    "end": 35982.88,
    "text": "the second table that's mentioned is always going to be the right table. So you got the left table",
    "textdich": ""
  },
  {
    "start": 35982.88,
    "end": 35988.0,
    "text": "and the right table. And so when we do join, what it's actually doing is, well, I think this page",
    "textdich": ""
  },
  {
    "start": 35988.0,
    "end": 35994.88,
    "text": "actually gives us the best explanation. So a left join, select data from the left table. And I don't",
    "textdich": ""
  },
  {
    "start": 35994.88,
    "end": 35999.36,
    "text": "know if this is big enough for you guys, but I'll zoom in. So it's going to select data from the",
    "textdich": ""
  },
  {
    "start": 35999.36,
    "end": 36004.08,
    "text": "left table, it's going to compare the values between the two columns that we have selected.",
    "textdich": ""
  },
  {
    "start": 36004.08,
    "end": 36009.2,
    "text": "And for us, in this case, it's going to be a post dot owner ID on the left side, and then users dot",
    "textdich": ""
  },
  {
    "start": 36009.2,
    "end": 36015.36,
    "text": "ID on the right side. And it's going to find where those values match. And if they are equal,",
    "textdich": ""
  },
  {
    "start": 36015.36,
    "end": 36020.0,
    "text": "the left one creates a new row that contains the columns of both tables and adds this row to the",
    "textdich": ""
  },
  {
    "start": 36020.0,
    "end": 36026.08,
    "text": "result set. And what's important is in case the value does not equal, the left join also creates",
    "textdich": ""
  },
  {
    "start": 36026.08,
    "end": 36030.16,
    "text": "a new row that contains the column from both tables and adds it to the result set. However,",
    "textdich": ""
  },
  {
    "start": 36030.16,
    "end": 36036.24,
    "text": "on the right side, the the value is going to be set to null. So if we ever had a post",
    "textdich": ""
  },
  {
    "start": 36036.24,
    "end": 36044.32,
    "text": "that didn't have an owner ID, then what would happen is we would see the the user information",
    "textdich": ""
  },
  {
    "start": 36044.32,
    "end": 36049.2,
    "text": "all set to null in that case, or the email would be set to null. However, since the way we set up",
    "textdich": ""
  },
  {
    "start": 36049.2,
    "end": 36055.28,
    "text": "our table is that every single post must have a owner ID, we're never going to run into that",
    "textdich": ""
  },
  {
    "start": 36055.28,
    "end": 36060.0,
    "text": "situation. Now before we move any further, just to show you guys what a right join is,",
    "textdich": ""
  },
  {
    "start": 36060.0,
    "end": 36068.4,
    "text": "it's the exact same thing, but in the opposite direction. And so let's take a look.",
    "textdich": ""
  },
  {
    "start": 36070.8,
    "end": 36075.6,
    "text": "And things look a little bit different now. Because what's happening is that we're going to",
    "textdich": ""
  },
  {
    "start": 36076.24,
    "end": 36080.4,
    "text": "is that we're going to go through the two tables and find if the owner and the owner ID and the",
    "textdich": ""
  },
  {
    "start": 36080.4,
    "end": 36084.96,
    "text": "ID of the user match. And we're going to join it on that. And we're going to do this for every",
    "textdich": ""
  },
  {
    "start": 36084.96,
    "end": 36092.88,
    "text": "single entry. And then at the end, you can see that user 24 has no information on the left side.",
    "textdich": ""
  },
  {
    "start": 36092.88,
    "end": 36097.52,
    "text": "And that's because user 24 didn't create any post. So the right join will show you instances where",
    "textdich": ""
  },
  {
    "start": 36097.52,
    "end": 36103.28,
    "text": "something exists in the right table, but it doesn't exist on the left table, the left join will show",
    "textdich": ""
  },
  {
    "start": 36103.28,
    "end": 36108.32,
    "text": "you something that exists in the left table, but doesn't necessarily exist on the right table. But",
    "textdich": ""
  },
  {
    "start": 36108.32,
    "end": 36114.88,
    "text": "I'm going to change this back to left join. And now what I would like to do is it would be great",
    "textdich": ""
  },
  {
    "start": 36114.88,
    "end": 36123.76,
    "text": "if we can get the number of posts by each user, right? How many posts has each user created?",
    "textdich": ""
  },
  {
    "start": 36123.76,
    "end": 36128.48,
    "text": "So is there a way to do that? Well, there is actually. So what I'm going to do here is",
    "textdich": ""
  },
  {
    "start": 36130.08,
    "end": 36139.28,
    "text": "I'm going to grab the users dot email, actually users dot ID, and maybe we want the users dot",
    "textdich": ""
  },
  {
    "start": 36139.28,
    "end": 36146.48,
    "text": "email as well. Actually, we'll just get the ID. And here at the end, I'm going to say I want to group",
    "textdich": ""
  },
  {
    "start": 36146.48,
    "end": 36160.56,
    "text": "by users dot ID. So we're going to find all of these entries in our join, and then group them",
    "textdich": ""
  },
  {
    "start": 36160.56,
    "end": 36166.32,
    "text": "based off of the user ID field from the user column. And so once we group them, we can then",
    "textdich": ""
  },
  {
    "start": 36166.32,
    "end": 36171.76,
    "text": "actually count up all of the columns, sorry, all of the entries on a per user basis. So if I say",
    "textdich": ""
  },
  {
    "start": 36171.76,
    "end": 36179.36,
    "text": "user ID, and then we say, we can use a built in postgres function. And here, if I put in star,",
    "textdich": ""
  },
  {
    "start": 36180.16,
    "end": 36184.64,
    "text": "and I'll come back and explain what this means, we can hit run. And we can see that the user with",
    "textdich": ""
  },
  {
    "start": 36184.64,
    "end": 36192.8,
    "text": "an ID of 21 has 11 posts, and the user with an ID of 23 has two posts. The only issue is, if I",
    "textdich": ""
  },
  {
    "start": 36192.8,
    "end": 36200.08,
    "text": "actually do another query right here, I do select star from users. There's actually three users,",
    "textdich": ""
  },
  {
    "start": 36200.88,
    "end": 36204.88,
    "text": "right? And one of them hasn't made any posts. And so that's why we don't see it in that list.",
    "textdich": ""
  },
  {
    "start": 36204.88,
    "end": 36209.04,
    "text": "And if we want to be able to see it in that list, we need to actually change our query.",
    "textdich": ""
  },
  {
    "start": 36209.04,
    "end": 36214.32,
    "text": "And like I mentioned, the right join, if I actually remove the account column right here,",
    "textdich": ""
  },
  {
    "start": 36215.76,
    "end": 36222.72,
    "text": "and we just do a star, this is going to actually list every single user, even if the user has",
    "textdich": ""
  },
  {
    "start": 36222.72,
    "end": 36228.96,
    "text": "no posts. And so if I remove the group by ID real quick, right, you could see down here,",
    "textdich": ""
  },
  {
    "start": 36228.96,
    "end": 36235.36,
    "text": "I have user 24 with no posts, that's exactly what we want. And so now I can say group by",
    "textdich": ""
  },
  {
    "start": 36237.12,
    "end": 36244.32,
    "text": "users dot ID. And then here, I'm going to say select users dot ID, and then we grab the account.",
    "textdich": ""
  },
  {
    "start": 36244.32,
    "end": 36253.68,
    "text": "So let's see if this works. And notice how all of the post fields are completely empty. So that's,",
    "textdich": ""
  },
  {
    "start": 36253.68,
    "end": 36258.88,
    "text": "that's perfectly fine. And then we can run this. And you can see that it seems to have worked,",
    "textdich": ""
  },
  {
    "start": 36258.88,
    "end": 36264.72,
    "text": "right? User 21 has 11 posts, user 23 has two posts, and then we got user 24. But it says that",
    "textdich": ""
  },
  {
    "start": 36264.72,
    "end": 36270.56,
    "text": "there's a value of one. And the reason for that is that when you do star right here,",
    "textdich": ""
  },
  {
    "start": 36270.56,
    "end": 36274.88,
    "text": "that means it's going to count null entries. So since we have that one null entry, it's going",
    "textdich": ""
  },
  {
    "start": 36274.88,
    "end": 36279.68,
    "text": "to count that as one. So instead, what we're going to do is we can actually pass in the name of a",
    "textdich": ""
  },
  {
    "start": 36279.68,
    "end": 36285.84,
    "text": "column. And so once again, I'm actually going to copy this, paste it into here, we're going to",
    "textdich": ""
  },
  {
    "start": 36285.84,
    "end": 36296.64,
    "text": "remove the group by and then just do a star. So we're going to get every entry, except because",
    "textdich": ""
  },
  {
    "start": 36296.64,
    "end": 36301.84,
    "text": "we did count star, it always ends up counting this as one. So you that user 24 is always going to",
    "textdich": ""
  },
  {
    "start": 36301.84,
    "end": 36306.08,
    "text": "have one entry, but that's not accurate, because he doesn't actually have any. So instead of doing",
    "textdich": ""
  },
  {
    "start": 36306.08,
    "end": 36311.52,
    "text": "count star, we can actually pass in a column that we want to count. And so in this case,",
    "textdich": ""
  },
  {
    "start": 36311.52,
    "end": 36315.52,
    "text": "we can pick any of the posts column that we're trying to retrieve. And so I can just say,",
    "textdich": ""
  },
  {
    "start": 36316.64,
    "end": 36323.44,
    "text": "post dot ID. And so when you pass in a column name, it does not count columns that have a null",
    "textdich": ""
  },
  {
    "start": 36323.44,
    "end": 36329.12,
    "text": "value. So if the user doesn't have any posts, he won't have anything under post dot ID. And then",
    "textdich": ""
  },
  {
    "start": 36329.12,
    "end": 36334.8,
    "text": "if I just remove this query, and then run this, you can see that now I have successfully gotten",
    "textdich": ""
  },
  {
    "start": 36334.8,
    "end": 36342.64,
    "text": "the exact query that I want. And I can rename this column as user underscore post underscore",
    "textdich": ""
  },
  {
    "start": 36342.64,
    "end": 36347.52,
    "text": "count, or something. That's a little bit more readable. And then you know, I can grab any",
    "textdich": ""
  },
  {
    "start": 36347.52,
    "end": 36356.48,
    "text": "other field that I want, maybe I also want the users dot email. And so that way, we get just",
    "textdich": ""
  },
  {
    "start": 36356.48,
    "end": 36360.48,
    "text": "the information that we ultimately want. So you can see that you're doing these queries,",
    "textdich": ""
  },
  {
    "start": 36360.48,
    "end": 36365.6,
    "text": "they do get a little bit more complex. And you have to practice this a lot. And so I definitely",
    "textdich": ""
  },
  {
    "start": 36365.6,
    "end": 36370.0,
    "text": "recommend you actually just read through this document, set up a few example tables and just",
    "textdich": ""
  },
  {
    "start": 36370.0,
    "end": 36373.76,
    "text": "practice doing your queries. But we're going to spend just a little bit more time on these",
    "textdich": ""
  },
  {
    "start": 36373.76,
    "end": 36377.92,
    "text": "queries so that we can figure out how to get the total number of votes. It is a little bit",
    "textdich": ""
  },
  {
    "start": 36377.92,
    "end": 36381.2,
    "text": "longer of a process. But I want to make sure that you guys understand exactly what we're doing.",
    "textdich": ""
  },
  {
    "start": 36382.32,
    "end": 36387.44,
    "text": "Alright guys, so let's move on to working with our posts table and our votes table. So I'm going",
    "textdich": ""
  },
  {
    "start": 36387.44,
    "end": 36393.28,
    "text": "to do a join on those two. So let's start off by doing select. And then we'll just do star for now.",
    "textdich": ""
  },
  {
    "start": 36393.28,
    "end": 36398.56,
    "text": "And we'll say select star from and then in this case posts. And keep in mind, guys, I mentioned",
    "textdich": ""
  },
  {
    "start": 36398.56,
    "end": 36402.88,
    "text": "that the first table you reference is the left table and the second table that you reference is",
    "textdich": ""
  },
  {
    "start": 36402.88,
    "end": 36407.6,
    "text": "the right table. It doesn't actually matter which one is the left or right. The only thing that",
    "textdich": ""
  },
  {
    "start": 36407.6,
    "end": 36412.24,
    "text": "matters is that you set up the right direction of the join. So if we set up posts as the left table,",
    "textdich": ""
  },
  {
    "start": 36413.12,
    "end": 36417.2,
    "text": "and we want to do a left join, then if we ever rewrite our SQL query and set up our,",
    "textdich": ""
  },
  {
    "start": 36418.48,
    "end": 36422.24,
    "text": "our votes table to be the left table instead, then we would just have to flip the join to be",
    "textdich": ""
  },
  {
    "start": 36422.24,
    "end": 36426.4,
    "text": "a right join. So it doesn't matter which table comes first, keep that in mind. So you don't",
    "textdich": ""
  },
  {
    "start": 36426.4,
    "end": 36430.8,
    "text": "have to start your query on just the posts, you could do this on votes as well. And you just",
    "textdich": ""
  },
  {
    "start": 36430.8,
    "end": 36439.92,
    "text": "change the direction of the join. But I like to do posts. And then we're gonna try a left join once",
    "textdich": ""
  },
  {
    "start": 36439.92,
    "end": 36446.88,
    "text": "again. And we'll say that the other tables can be votes and we're going to join on well,",
    "textdich": ""
  },
  {
    "start": 36446.88,
    "end": 36452.16,
    "text": "if we take a look at our votes table, which I'm actually just going to cut this out real quick",
    "textdich": ""
  },
  {
    "start": 36452.16,
    "end": 36461.84,
    "text": "and save that in my scratchpad. I'm going to just say select star from votes. We'll run that. Right,",
    "textdich": ""
  },
  {
    "start": 36461.84,
    "end": 36468.48,
    "text": "so there's going to be a user ID and a post ID. And then if I do a select star from posts,",
    "textdich": ""
  },
  {
    "start": 36470.16,
    "end": 36475.68,
    "text": "we have all these fields. So I think you guys can guess the exact column that we need to join on.",
    "textdich": ""
  },
  {
    "start": 36475.68,
    "end": 36484.4,
    "text": "So we need to join on post ID, and then votes dot dot post underscore ID. So whenever those match,",
    "textdich": ""
  },
  {
    "start": 36484.4,
    "end": 36489.84,
    "text": "we need to get a result. So I'm going to go into my application and just run a few. I'm just going",
    "textdich": ""
  },
  {
    "start": 36489.84,
    "end": 36493.76,
    "text": "to vote on a few posts, so that we actually have some data. So I'm logged in as a user,",
    "textdich": ""
  },
  {
    "start": 36493.76,
    "end": 36500.24,
    "text": "and I'm going to vote on post 10. All right, we successfully added votes, I'm going to get a whole",
    "textdich": ""
  },
  {
    "start": 36500.24,
    "end": 36513.2,
    "text": "bunch of other posts. I'm going to vote on post four, and nine. All right, and I'm going to log",
    "textdich": ""
  },
  {
    "start": 36513.2,
    "end": 36525.36,
    "text": "in as a different user now. Let's see who else I got. All right, I'll just log in as Sanjeev, I guess",
    "textdich": ""
  },
  {
    "start": 36525.36,
    "end": 36544.48,
    "text": "my login. All right, we've logged in. And I'm going to vote on post 10 as well on this guy.",
    "textdich": ""
  },
  {
    "start": 36544.48,
    "end": 36558.0,
    "text": "And then we'll grab some random vote 15. Okay, and so we should have a decent number of votes now.",
    "textdich": ""
  },
  {
    "start": 36558.0,
    "end": 36563.44,
    "text": "And I purposely made it so that one of the users didn't vote, just so that we can take a look at",
    "textdich": ""
  },
  {
    "start": 36563.44,
    "end": 36569.04,
    "text": "what complications that add. Alright, so we have all of these votes. And we've got the user ID and",
    "textdich": ""
  },
  {
    "start": 36569.04,
    "end": 36577.12,
    "text": "the post ID. So now let's set up a join. So I'm going to do select star from posts. And I'm going",
    "textdich": ""
  },
  {
    "start": 36577.12,
    "end": 36584.0,
    "text": "to start off with the left join. And we'll say we want to join with the votes table. And the field",
    "textdich": ""
  },
  {
    "start": 36584.0,
    "end": 36590.32,
    "text": "that we're going to join on is on the posts, we're gonna grab the dot ID, and the and wherever this",
    "textdich": ""
  },
  {
    "start": 36590.32,
    "end": 36598.16,
    "text": "is equal to votes dot post underscore ID, we want to join the table. So let's run this. And let's",
    "textdich": ""
  },
  {
    "start": 36598.16,
    "end": 36605.12,
    "text": "see what results we get back. Alright, and so you can see that hey, look, a post with an ID of 10.",
    "textdich": ""
  },
  {
    "start": 36606.56,
    "end": 36613.84,
    "text": "Looks like it does have a vote. So this is one join right here. But then you'll notice that I",
    "textdich": ""
  },
  {
    "start": 36613.84,
    "end": 36618.64,
    "text": "if I go down, you'll see another entry. So this doesn't mean in our database that we have to post",
    "textdich": ""
  },
  {
    "start": 36618.64,
    "end": 36623.36,
    "text": "with an ID of 10 is just saying that since we join them, we have to go down the list, see where they",
    "textdich": ""
  },
  {
    "start": 36623.36,
    "end": 36629.68,
    "text": "match, and then print out a row. So it's going to print out a row for every single time, the post ID",
    "textdich": ""
  },
  {
    "start": 36629.68,
    "end": 36636.24,
    "text": "matches the post underscore ID of the votes table. And so since we have two votes for the same exact",
    "textdich": ""
  },
  {
    "start": 36636.24,
    "end": 36640.0,
    "text": "post, that means we're going to get two different entries doesn't mean there's actually two posts",
    "textdich": ""
  },
  {
    "start": 36640.0,
    "end": 36643.92,
    "text": "in our table is just the way that the joins work. And I strongly recommend like if this is still a",
    "textdich": ""
  },
  {
    "start": 36643.92,
    "end": 36648.4,
    "text": "little confusing, keep reading that document and play around with it. If you want to see the opposite,",
    "textdich": ""
  },
  {
    "start": 36649.52,
    "end": 36651.76,
    "text": "actually, before we take a look, let's just take a look at a few other things.",
    "textdich": ""
  },
  {
    "start": 36651.76,
    "end": 36656.24,
    "text": "You can see we've got post with four. And we can see that there's one vote for that because there's",
    "textdich": ""
  },
  {
    "start": 36656.24,
    "end": 36663.28,
    "text": "no other entries here with an ID of four. And then we could see all of these posts that have",
    "textdich": ""
  },
  {
    "start": 36663.28,
    "end": 36669.76,
    "text": "no votes whatsoever. So that's what the left join gives us because anytime we have a post,",
    "textdich": ""
  },
  {
    "start": 36669.76,
    "end": 36674.0,
    "text": "which is the left table, since we do a left join, it's going to list those posts. And I'll just put",
    "textdich": ""
  },
  {
    "start": 36674.0,
    "end": 36683.36,
    "text": "it all on the right side. Whereas if we change this to a right join, it's going to do the exact opposite.",
    "textdich": ""
  },
  {
    "start": 36683.36,
    "end": 36689.36,
    "text": "With the right join, right, once again, it's going to look for any time the the ID here matches the",
    "textdich": ""
  },
  {
    "start": 36689.36,
    "end": 36693.92,
    "text": "post ID, and it's going to spit out a row. And then the same thing goes for the post with an",
    "textdich": ""
  },
  {
    "start": 36693.92,
    "end": 36697.68,
    "text": "idea for and then once again, you can see 10 shows up twice because two users voted on it,",
    "textdich": ""
  },
  {
    "start": 36698.24,
    "end": 36702.56,
    "text": "and then 15 and so on, but then you'll see nothing else. And the reason for that is,",
    "textdich": ""
  },
  {
    "start": 36702.56,
    "end": 36710.0,
    "text": "we did a right join. So it's going to show us all of the votes and their corresponding post.",
    "textdich": ""
  },
  {
    "start": 36710.0,
    "end": 36716.24,
    "text": "However, it's also going to list out any votes, because it's a it's a right join that don't,",
    "textdich": ""
  },
  {
    "start": 36716.24,
    "end": 36720.96,
    "text": "that aren't associated with the post. Now, all of our votes have to be associated with the post,",
    "textdich": ""
  },
  {
    "start": 36720.96,
    "end": 36725.12,
    "text": "because we put in that constraint that check. So that's why we don't see anything with a null on",
    "textdich": ""
  },
  {
    "start": 36725.12,
    "end": 36729.84,
    "text": "the left side, because that's just the way our tables have been set up. So hopefully that didn't",
    "textdich": ""
  },
  {
    "start": 36729.84,
    "end": 36735.84,
    "text": "confuse you guys, we're going to change this back to a left join. And what we're going to do now is",
    "textdich": ""
  },
  {
    "start": 36735.84,
    "end": 36740.08,
    "text": "we're going to do, I want to be able to count the total number of votes for each and every post.",
    "textdich": ""
  },
  {
    "start": 36740.72,
    "end": 36744.0,
    "text": "So we're once again going to do the group by. So we're going to group by",
    "textdich": ""
  },
  {
    "start": 36747.84,
    "end": 36752.48,
    "text": "posts, dot ID. So we'll group them together and then count them.",
    "textdich": ""
  },
  {
    "start": 36752.48,
    "end": 36759.84,
    "text": "And for columns, I'm just gonna say, we'll say posts dot ID. And then we want the count. So we'll",
    "textdich": ""
  },
  {
    "start": 36759.84,
    "end": 36767.36,
    "text": "start off with the star. And let's see what happens. Okay, so we can see that, you know,",
    "textdich": ""
  },
  {
    "start": 36767.36,
    "end": 36773.36,
    "text": "post with an ID of 10, we know it has two votes. But then everything else has a value of one.",
    "textdich": ""
  },
  {
    "start": 36774.16,
    "end": 36779.76,
    "text": "This is not correct. We know that a whole bunch of posts don't have a value of one. But like we",
    "textdich": ""
  },
  {
    "start": 36779.76,
    "end": 36785.92,
    "text": "covered in the previous lesson, anytime you have a value of null, then it's going to count that as",
    "textdich": ""
  },
  {
    "start": 36785.92,
    "end": 36793.92,
    "text": "one. So I'm going to run this the previous query, remove the group by and I'll show you guys exactly",
    "textdich": ""
  },
  {
    "start": 36793.92,
    "end": 36803.52,
    "text": "what I mean. And now if I run this, oops, there should be a star. All right, look at all of these",
    "textdich": ""
  },
  {
    "start": 36803.52,
    "end": 36809.68,
    "text": "posts that have a value of null, it's going to count them all as one in this case. So let's",
    "textdich": ""
  },
  {
    "start": 36809.68,
    "end": 36813.68,
    "text": "see what happens in this case. And we don't want that. Right? That's why that's what happens when",
    "textdich": ""
  },
  {
    "start": 36813.68,
    "end": 36820.48,
    "text": "you do star in the count field. So instead, what we're going to do is we're going to provide a",
    "textdich": ""
  },
  {
    "start": 36820.48,
    "end": 36825.04,
    "text": "specific column to count on so it doesn't count the null values. So what column should we use? I",
    "textdich": ""
  },
  {
    "start": 36825.04,
    "end": 36829.68,
    "text": "mean, we can really use any column, I think it makes sense just to do, we have to grab one of",
    "textdich": ""
  },
  {
    "start": 36829.68,
    "end": 36842.16,
    "text": "the columns that are null in this case, so we'll get votes dot post underscore ID. So now, look",
    "textdich": ""
  },
  {
    "start": 36842.16,
    "end": 36847.44,
    "text": "at that, we get the post ID. And then we get how many votes they have altogether or how many likes.",
    "textdich": ""
  },
  {
    "start": 36848.88,
    "end": 36852.16,
    "text": "And instead of just grabbing the ID, I'm going to actually grab everything from the post table,",
    "textdich": ""
  },
  {
    "start": 36852.8,
    "end": 36858.96,
    "text": "we can run that. And this is the exact query that we're looking for, we get the post information,",
    "textdich": ""
  },
  {
    "start": 36858.96,
    "end": 36863.28,
    "text": "and we get the number of votes. And we can rename this. Because I don't like calling account,",
    "textdich": ""
  },
  {
    "start": 36863.28,
    "end": 36869.52,
    "text": "we can rename it as, you know, votes, or likes doesn't really matter. And there you go, guys.",
    "textdich": ""
  },
  {
    "start": 36870.72,
    "end": 36877.84,
    "text": "And if you guys want to query for an individual post, and get the total number of votes,",
    "textdich": ""
  },
  {
    "start": 36877.84,
    "end": 36881.36,
    "text": "it's actually very simple. It's the same exact query, we're just going to provide a where condition.",
    "textdich": ""
  },
  {
    "start": 36881.36,
    "end": 36890.16,
    "text": "And so here, I can just say where post dot ID equals one. Well, actually, I don't have a post",
    "textdich": ""
  },
  {
    "start": 36890.16,
    "end": 36898.4,
    "text": "ID of one, so I'll grab a post ID of 10. And so now I get my one post, and we can see that he should",
    "textdich": ""
  },
  {
    "start": 36898.4,
    "end": 36907.44,
    "text": "have two votes. Alright, and so that's how we do this with raw SQL. Hopefully, this wasn't too",
    "textdich": ""
  },
  {
    "start": 36907.44,
    "end": 36912.88,
    "text": "complicated. Like I said, I'd strongly recommend you spend a little bit of time going over joins",
    "textdich": ""
  },
  {
    "start": 36912.88,
    "end": 36917.6,
    "text": "and practicing it with your own tables, don't just use posts and votes. If you can probably come up",
    "textdich": ""
  },
  {
    "start": 36917.6,
    "end": 36921.6,
    "text": "with simpler tables to work on this and understand it a little bit better. But I think that's going",
    "textdich": ""
  },
  {
    "start": 36921.6,
    "end": 36926.16,
    "text": "to wrap up this video. And so go ahead and just save these queries for now so that we can reference",
    "textdich": ""
  },
  {
    "start": 36926.16,
    "end": 36931.84,
    "text": "them later. In the last video, we saw how we can gather information from two different tables",
    "textdich": ""
  },
  {
    "start": 36931.84,
    "end": 36936.56,
    "text": "by making use of joins. And so we saw how to do that with raw SQL. And now we're going to see how",
    "textdich": ""
  },
  {
    "start": 36936.56,
    "end": 36943.84,
    "text": "we can perform joins using SQL alchemy. And if you go to your post router, we're going to go to the",
    "textdich": ""
  },
  {
    "start": 36943.84,
    "end": 36950.08,
    "text": "get posts path operation. And so we're going to kind of just take this step by step and see how",
    "textdich": ""
  },
  {
    "start": 36950.08,
    "end": 36954.96,
    "text": "we can slowly build out this query, so that we can actually perform a join. And if you take a look",
    "textdich": ""
  },
  {
    "start": 36954.96,
    "end": 36961.28,
    "text": "at the current query, what we can do is just ignore all of the filter stuff first. And so really,",
    "textdich": ""
  },
  {
    "start": 36961.28,
    "end": 36965.84,
    "text": "the the meat of this query is just DB dot query, and then you pass the model, and that's going to",
    "textdich": ""
  },
  {
    "start": 36965.84,
    "end": 36969.76,
    "text": "get every single post that we have in this table. And then we perform all of these filters to kind",
    "textdich": ""
  },
  {
    "start": 36969.76,
    "end": 36973.28,
    "text": "of drill down. So we're going to start off with the same thing. And I'm going to save this new",
    "textdich": ""
  },
  {
    "start": 36973.28,
    "end": 36980.48,
    "text": "query as results. Or, or we could just say posts underscore votes, maybe, and we'll just save it",
    "textdich": ""
  },
  {
    "start": 36980.48,
    "end": 36985.84,
    "text": "as results. And so we're gonna start off with the same exact query, we'll do the DB query models,",
    "textdich": ""
  },
  {
    "start": 36985.84,
    "end": 36997.2,
    "text": "dot post. And we're from dot all, actually remove the dot all. And the reason I don't want to do the",
    "textdich": ""
  },
  {
    "start": 36997.2,
    "end": 37000.88,
    "text": "dot all is I don't actually want to query the table, I just want to actually see the raw SQL",
    "textdich": ""
  },
  {
    "start": 37000.88,
    "end": 37009.04,
    "text": "that's generating. And now we can do a print results. I'm going to bring this up a bit. And",
    "textdich": ""
  },
  {
    "start": 37009.04,
    "end": 37014.72,
    "text": "we're going to just send a query to the get all posts. And you can see the raw SQL that",
    "textdich": ""
  },
  {
    "start": 37014.72,
    "end": 37018.4,
    "text": "it generated. So it's going to select and then basically select every column and then rename it",
    "textdich": ""
  },
  {
    "start": 37019.04,
    "end": 37022.88,
    "text": "accordingly. And then it's just going to get that from the post table. So it's getting every single",
    "textdich": ""
  },
  {
    "start": 37022.88,
    "end": 37028.24,
    "text": "post. That's all. So everything is pretty straightforward at this point. And if we go back",
    "textdich": ""
  },
  {
    "start": 37028.24,
    "end": 37037.6,
    "text": "to our PG admin, let's actually take a look. Let's take a look at what our SQL query actually looks",
    "textdich": ""
  },
  {
    "start": 37037.6,
    "end": 37041.76,
    "text": "like. And so you can see here, there's a whole bunch of things going on. But the next thing I",
    "textdich": ""
  },
  {
    "start": 37041.76,
    "end": 37046.0,
    "text": "want to do is I want to actually start to perform the join. So I want to join on the votes table.",
    "textdich": ""
  },
  {
    "start": 37046.0,
    "end": 37050.88,
    "text": "So let's take a look at how we can do that. And to perform a join with SQL alchemy, I can just say",
    "textdich": ""
  },
  {
    "start": 37050.88,
    "end": 37057.12,
    "text": "join. And then we have to specify the table we want to join. So this is going to be the models",
    "textdich": ""
  },
  {
    "start": 37057.12,
    "end": 37063.2,
    "text": "dot vote. And then the second thing is what is going to be our the what is going to be the",
    "textdich": ""
  },
  {
    "start": 37063.2,
    "end": 37068.24,
    "text": "column that we perform a join on. So in this case, you can see that we're performing a join on post",
    "textdich": ""
  },
  {
    "start": 37068.24,
    "end": 37075.44,
    "text": "dot ID and votes dot post underscore ID. And we're going to do the same thing here, I'm going to say",
    "textdich": ""
  },
  {
    "start": 37075.44,
    "end": 37081.84,
    "text": "models dot vote dot post underscore ID equals equals, and then we'll say models dot post",
    "textdich": ""
  },
  {
    "start": 37083.04,
    "end": 37087.12,
    "text": "dot ID, whenever they're equal, we're going to join the table. Now the thing about this join is,",
    "textdich": ""
  },
  {
    "start": 37087.92,
    "end": 37094.88,
    "text": "by default, with SQL alchemy, this is going to be a left inner join. And the word inner is going to",
    "textdich": ""
  },
  {
    "start": 37094.88,
    "end": 37098.48,
    "text": "be a little bit new for you. And it's because there's two different types of left joins,",
    "textdich": ""
  },
  {
    "start": 37098.48,
    "end": 37103.44,
    "text": "you've got left, inner, and you have left outer, and I don't want to spend too much time kind of",
    "textdich": ""
  },
  {
    "start": 37103.44,
    "end": 37108.56,
    "text": "diving into what's the difference. Just know that if you ignore the keyword, it's going to by default",
    "textdich": ""
  },
  {
    "start": 37108.56,
    "end": 37117.36,
    "text": "be an outer. So what we want is an outer join. However, SQL alchemy by default, uses inner joins.",
    "textdich": ""
  },
  {
    "start": 37117.36,
    "end": 37121.36,
    "text": "So to actually set this as an outer join, we have to pass one more thing, which is going to be",
    "textdich": ""
  },
  {
    "start": 37121.36,
    "end": 37129.76,
    "text": "is outer equals true. So this is going to make this a outer left outer join. So we've got our",
    "textdich": ""
  },
  {
    "start": 37129.76,
    "end": 37134.88,
    "text": "join at this point. And what I'm going to do now is save this again. And let's take a look at our",
    "textdich": ""
  },
  {
    "start": 37134.88,
    "end": 37140.24,
    "text": "query or send something. And now we'll take a look at a query, we can see that okay, we're going to",
    "textdich": ""
  },
  {
    "start": 37140.24,
    "end": 37147.76,
    "text": "select everything from our post table, then we're going to perform a left outer join with votes on",
    "textdich": ""
  },
  {
    "start": 37147.76,
    "end": 37154.4,
    "text": "the table votes whenever votes dot post ID equals post dot ID. So we're almost there. The next thing",
    "textdich": ""
  },
  {
    "start": 37154.4,
    "end": 37161.36,
    "text": "that we have to do is we have to group by post dot ID. And then we have to perform the count on",
    "textdich": ""
  },
  {
    "start": 37161.36,
    "end": 37167.28,
    "text": "votes dot post underscore ID. And so if you can take a guess as has to do group by we can just do",
    "textdich": ""
  },
  {
    "start": 37167.28,
    "end": 37174.72,
    "text": "dot group underscore by, and then we specify the specific column. So do models dot post dot ID.",
    "textdich": ""
  },
  {
    "start": 37174.72,
    "end": 37182.72,
    "text": "And then we have to get the count. So we'll go to here. And I'm going to say, well, first of all,",
    "textdich": ""
  },
  {
    "start": 37182.72,
    "end": 37189.92,
    "text": "we have to import a function. So what you're going to do is from SQL alchemy, import funk. And so",
    "textdich": ""
  },
  {
    "start": 37189.92,
    "end": 37196.64,
    "text": "this is going to give us access to functions like count. I'm going to say funk dot count.",
    "textdich": ""
  },
  {
    "start": 37196.64,
    "end": 37211.44,
    "text": "And it will say models dot vote dot post underscore ID. We'll save this. And I'm going to send this",
    "textdich": ""
  },
  {
    "start": 37211.44,
    "end": 37216.8,
    "text": "in. Let's take a look at the query once again. And so we've got select posts, all of the post",
    "textdich": ""
  },
  {
    "start": 37216.8,
    "end": 37221.84,
    "text": "columns. Good, good, good, good. And then we get to count. Right, and it's going to perform the",
    "textdich": ""
  },
  {
    "start": 37221.84,
    "end": 37226.96,
    "text": "count. That's all right. However, we're naming it as count one. I don't like that. I want to name",
    "textdich": ""
  },
  {
    "start": 37226.96,
    "end": 37231.84,
    "text": "this something that I will understand. So maybe something like votes. So we have to figure out",
    "textdich": ""
  },
  {
    "start": 37231.84,
    "end": 37237.68,
    "text": "a way to rename this column. And if you want to rename this column, you just say, dot label,",
    "textdich": ""
  },
  {
    "start": 37237.68,
    "end": 37240.64,
    "text": "and then the name that you want to give that column. So we're going to call this votes.",
    "textdich": ""
  },
  {
    "start": 37243.52,
    "end": 37250.08,
    "text": "And so let's test this out one last time. And now we can see that the column is called votes. So",
    "textdich": ""
  },
  {
    "start": 37250.08,
    "end": 37255.52,
    "text": "this is exactly what we want. This is the exact query that we generated in PG admin manually,",
    "textdich": ""
  },
  {
    "start": 37255.52,
    "end": 37261.12,
    "text": "we're just doing it through SQL alchemy. And what we're going to do is, well, let's actually",
    "textdich": ""
  },
  {
    "start": 37261.12,
    "end": 37266.96,
    "text": "perform the query. We'll do dot all don't need the print anymore. And we're going to actually",
    "textdich": ""
  },
  {
    "start": 37266.96,
    "end": 37278.16,
    "text": "return results. And let's see what happens. So now if I send a query, it's giving me a whole bunch",
    "textdich": ""
  },
  {
    "start": 37278.16,
    "end": 37282.88,
    "text": "of errors. And if we scroll to the top of the errors, we can see that these are all pedantic",
    "textdich": ""
  },
  {
    "start": 37282.88,
    "end": 37288.24,
    "text": "validations. And so it's saying that, hey, there's no title, there's no content, there's no ID,",
    "textdich": ""
  },
  {
    "start": 37288.24,
    "end": 37294.24,
    "text": "there's no owner ID, there's no owner, all of these fields seem to be missing. And why exactly",
    "textdich": ""
  },
  {
    "start": 37294.24,
    "end": 37298.72,
    "text": "is that? Well, let's take a look at the response model. So the validations happening because we",
    "textdich": ""
  },
  {
    "start": 37298.72,
    "end": 37305.44,
    "text": "use this response model of schemas dot post. And so if we go to schemas, and we find our post object,",
    "textdich": ""
  },
  {
    "start": 37305.44,
    "end": 37311.84,
    "text": "or post class, you can see that expects an ID created at an owner ID, an owner, and all of that",
    "textdich": ""
  },
  {
    "start": 37311.84,
    "end": 37316.32,
    "text": "good stuff. And it's saying that none of these have been set. So it looks like there's something",
    "textdich": ""
  },
  {
    "start": 37316.32,
    "end": 37321.12,
    "text": "wrong with our query. But just to make this a little bit simpler, what I'm going to do is I'm",
    "textdich": ""
  },
  {
    "start": 37321.12,
    "end": 37327.36,
    "text": "actually going to remove the response model. So I'm going to just comment out that remove the",
    "textdich": ""
  },
  {
    "start": 37327.36,
    "end": 37332.88,
    "text": "response models, we're not actually performing any validation. And we're going to see what this looks",
    "textdich": ""
  },
  {
    "start": 37332.88,
    "end": 37337.68,
    "text": "like now. So when we retrieve the data, I want you to take a look at what this looks like.",
    "textdich": ""
  },
  {
    "start": 37338.4,
    "end": 37344.56,
    "text": "So this right here is one specific post. And so after our changes, we can see that we've got",
    "textdich": ""
  },
  {
    "start": 37344.56,
    "end": 37348.56,
    "text": "a property called post. And then within there, we have ID published and so on. And then we've",
    "textdich": ""
  },
  {
    "start": 37348.56,
    "end": 37354.32,
    "text": "got a property of votes. And I'm actually going to copy this as an example, I'm just going to",
    "textdich": ""
  },
  {
    "start": 37354.32,
    "end": 37360.96,
    "text": "create a new file. And I'm just going to say, we'll just call this example, that py that's fine,",
    "textdich": ""
  },
  {
    "start": 37360.96,
    "end": 37365.6,
    "text": "it doesn't really matter. We'll delete this in a bit. So this is what it looks like. And when we",
    "textdich": ""
  },
  {
    "start": 37365.6,
    "end": 37375.92,
    "text": "go back to our path operation, I'm going to return posts. And we can actually return the response",
    "textdich": ""
  },
  {
    "start": 37375.92,
    "end": 37389.04,
    "text": "model just to see what that looks like. And so now if I do a query, I need to save. If you take a",
    "textdich": ""
  },
  {
    "start": 37389.04,
    "end": 37393.44,
    "text": "look at the query, this is what it looks like in a working state before we set up the joins.",
    "textdich": ""
  },
  {
    "start": 37394.64,
    "end": 37403.84,
    "text": "And if I go down to my example, where's my example, py file. So this is what pedantic expects,",
    "textdich": ""
  },
  {
    "start": 37405.28,
    "end": 37410.24,
    "text": "expects to get an object with a field of title, content, published ID, and so on. However,",
    "textdich": ""
  },
  {
    "start": 37410.24,
    "end": 37415.36,
    "text": "after our join, something odd happens, we have a field called post. And that breaks everything",
    "textdich": ""
  },
  {
    "start": 37415.36,
    "end": 37419.92,
    "text": "because it doesn't expect the ID and the published in the owner to be under this, this essentially",
    "textdich": ""
  },
  {
    "start": 37419.92,
    "end": 37424.56,
    "text": "this dictionary right here. And that's why it's throwing all of these errors. So how exactly do",
    "textdich": ""
  },
  {
    "start": 37424.56,
    "end": 37429.92,
    "text": "we fix this? Well, what we're going to do is I'm actually going to go to my schemas. And I'm",
    "textdich": ""
  },
  {
    "start": 37429.92,
    "end": 37434.16,
    "text": "actually going to create a new schema. So we'll call this, you can call this whatever you want,",
    "textdich": ""
  },
  {
    "start": 37435.52,
    "end": 37442.24,
    "text": "maybe post a vote, or I'm just gonna call this post out. And it's gonna be a post base, it's",
    "textdich": ""
  },
  {
    "start": 37442.24,
    "end": 37446.08,
    "text": "going to expand post base. And what we're gonna do is we're just going to try to match this as",
    "textdich": ""
  },
  {
    "start": 37446.08,
    "end": 37450.64,
    "text": "close as possible. So this is going to represent a post object, and then we're going to have a field",
    "textdich": ""
  },
  {
    "start": 37450.64,
    "end": 37455.84,
    "text": "called votes, which is going to be an integer. So here, I can just say, we have something called",
    "textdich": ""
  },
  {
    "start": 37455.84,
    "end": 37460.96,
    "text": "post. And don't forget to capitalize it, because our query, for some reason, returns it with the",
    "textdich": ""
  },
  {
    "start": 37460.96,
    "end": 37464.4,
    "text": "capital P took me a little while to figure that out. I was running into a few issues.",
    "textdich": ""
  },
  {
    "start": 37467.36,
    "end": 37472.08,
    "text": "But we can go here, and we can say I want to return, I want this to be of type. And then",
    "textdich": ""
  },
  {
    "start": 37472.08,
    "end": 37478.32,
    "text": "we'll reference this post. Right? So all of these fields will be under a field name post.",
    "textdich": ""
  },
  {
    "start": 37479.28,
    "end": 37482.96,
    "text": "And then we expect something called votes, which is going to be set to an integer.",
    "textdich": ""
  },
  {
    "start": 37486.0,
    "end": 37488.88,
    "text": "So let's try this out. And we'll go back to our post up p y.",
    "textdich": ""
  },
  {
    "start": 37489.84,
    "end": 37492.16,
    "text": "And I'm going to call I'm going to reference post out.",
    "textdich": ""
  },
  {
    "start": 37492.16,
    "end": 37504.96,
    "text": "And we're going to return results again. And let's just make sure there's no errors. It looks like",
    "textdich": ""
  },
  {
    "start": 37504.96,
    "end": 37510.08,
    "text": "it's good. And let's see what happens now. All right, we got a little bit of an issue.",
    "textdich": ""
  },
  {
    "start": 37511.68,
    "end": 37517.52,
    "text": "And it looks like there's a title content, title content, a whole bunch of errors. And so the title",
    "textdich": ""
  },
  {
    "start": 37517.52,
    "end": 37523.76,
    "text": "and the content are missing for both. So what did we do wrong here, this should have fixed our issue.",
    "textdich": ""
  },
  {
    "start": 37524.32,
    "end": 37530.72,
    "text": "Well, let's try adding this class config or I think that might actually be what's causing",
    "textdich": ""
  },
  {
    "start": 37530.72,
    "end": 37538.4,
    "text": "this problem. And now let's try this. That didn't look like it fixed it. Alright guys,",
    "textdich": ""
  },
  {
    "start": 37538.4,
    "end": 37543.36,
    "text": "so I was playing around with it. And then I don't know what exactly fixed it. But all I did was I",
    "textdich": ""
  },
  {
    "start": 37543.36,
    "end": 37550.08,
    "text": "had changed this to a lowercase p. And this led to, you know, us seeing this specific issue,",
    "textdich": ""
  },
  {
    "start": 37550.8,
    "end": 37554.72,
    "text": "where it says, you know, hey, this post doesn't exist. And then as soon as I recapitalized it,",
    "textdich": ""
  },
  {
    "start": 37556.88,
    "end": 37561.2,
    "text": "all of a sudden, it started to, to work again, it starts to work. Now,",
    "textdich": ""
  },
  {
    "start": 37561.2,
    "end": 37565.04,
    "text": "I'm not really sure why it broke in the first place. I didn't change any other code.",
    "textdich": ""
  },
  {
    "start": 37565.76,
    "end": 37570.48,
    "text": "Just looking back at my path operation, you can see that I'm now changing my response model",
    "textdich": ""
  },
  {
    "start": 37570.48,
    "end": 37575.04,
    "text": "to be schemas dot post out. And then we're performing the same results query and then",
    "textdich": ""
  },
  {
    "start": 37575.04,
    "end": 37580.48,
    "text": "returning it. For some reason or another, it's now properly working. I have no idea what changed.",
    "textdich": ""
  },
  {
    "start": 37580.48,
    "end": 37585.52,
    "text": "I have no idea exactly what changed, but it's working now. So hopefully you guys don't run",
    "textdich": ""
  },
  {
    "start": 37585.52,
    "end": 37590.64,
    "text": "into any issues. And hopefully it was just some kind of issue on my machine. But if you do run",
    "textdich": ""
  },
  {
    "start": 37590.64,
    "end": 37595.04,
    "text": "into the same issue, just try moving it to a lowercase tries restarting the application and",
    "textdich": ""
  },
  {
    "start": 37595.04,
    "end": 37600.08,
    "text": "changing it back, I have no idea why that would fix it, but seems to have done something. And so",
    "textdich": ""
  },
  {
    "start": 37600.08,
    "end": 37604.8,
    "text": "now our results are perfect, we get the post information, we still fetch the owner, which is",
    "textdich": ""
  },
  {
    "start": 37604.8,
    "end": 37608.56,
    "text": "fantastic. And then we have the votes and then just double check to make sure that all of your",
    "textdich": ""
  },
  {
    "start": 37608.56,
    "end": 37613.76,
    "text": "votes are all okay. And so it looks like they all look good. I know that one had two and then the",
    "textdich": ""
  },
  {
    "start": 37613.76,
    "end": 37620.56,
    "text": "rest should all have zero. So everything's looking pretty, pretty good. The next thing that we need",
    "textdich": ""
  },
  {
    "start": 37620.56,
    "end": 37626.48,
    "text": "to do is actually go ahead and add our filters back in. So let's see if I can still filter on",
    "textdich": ""
  },
  {
    "start": 37626.48,
    "end": 37634.96,
    "text": "all of these. And so I'm just going to copy this. And then before I perform the dot all,",
    "textdich": ""
  },
  {
    "start": 37634.96,
    "end": 37642.96,
    "text": "I'm going to paste that in there. Whoops, I forgot to I forgot to copy.",
    "textdich": ""
  },
  {
    "start": 37642.96,
    "end": 37658.64,
    "text": "All right, and then let's test this out again. I think they're still working. But let's just add a",
    "textdich": ""
  },
  {
    "start": 37658.64,
    "end": 37670.0,
    "text": "few extra query parameters. So I'll say search equals beaches. All right, and then it looks like",
    "textdich": ""
  },
  {
    "start": 37670.0,
    "end": 37677.84,
    "text": "it should only return post with the word beaches. And then let's try limit equals two.",
    "textdich": ""
  },
  {
    "start": 37679.92,
    "end": 37685.76,
    "text": "Remove this search for now. And that works too. So it looks like we get to keep all of the same",
    "textdich": ""
  },
  {
    "start": 37685.76,
    "end": 37691.12,
    "text": "functionality that we had before. So I'm going to just write this as posts, we're going to comment",
    "textdich": ""
  },
  {
    "start": 37691.12,
    "end": 37695.6,
    "text": "this out, just for reference. And then we're going to return post like we normally do.",
    "textdich": ""
  },
  {
    "start": 37695.6,
    "end": 37701.04,
    "text": "Send it one more time. And it looks like everything is still working just fine. Perfect.",
    "textdich": ""
  },
  {
    "start": 37702.24,
    "end": 37708.0,
    "text": "So we finished the get multiple posts path operation or get all posts. And I noticed that",
    "textdich": ""
  },
  {
    "start": 37708.0,
    "end": 37713.12,
    "text": "we do have to go ahead and update the get individual post. Because right now, if we go to",
    "textdich": ""
  },
  {
    "start": 37713.12,
    "end": 37720.32,
    "text": "get one post, you can see that we do not actually get the votes vote count for that. So we definitely",
    "textdich": ""
  },
  {
    "start": 37720.32,
    "end": 37725.44,
    "text": "want to see that in here. And we're going to have to perform the same exact join. So I'm just",
    "textdich": ""
  },
  {
    "start": 37725.44,
    "end": 37731.92,
    "text": "going to copy the previous query all the way up to before the filter. So just copy that part.",
    "textdich": ""
  },
  {
    "start": 37738.56,
    "end": 37740.96,
    "text": "Say post equals paste that in there.",
    "textdich": ""
  },
  {
    "start": 37743.76,
    "end": 37746.56,
    "text": "And then we can filter copy this filter at the end.",
    "textdich": ""
  },
  {
    "start": 37749.2,
    "end": 37752.32,
    "text": "And that should ultimately get us what we want. I'm going to comment this one out.",
    "textdich": ""
  },
  {
    "start": 37752.32,
    "end": 37761.68,
    "text": "And keep in mind, we have to return post out. Instead of post now, because we want the new",
    "textdich": ""
  },
  {
    "start": 37761.68,
    "end": 37776.48,
    "text": "format with the votes. But now if I hit send, name post is not defined. Oh, okay, misspelled that.",
    "textdich": ""
  },
  {
    "start": 37776.48,
    "end": 37786.0,
    "text": "And looks like we fixed that one. And then it's really up to you to see if you want to,",
    "textdich": ""
  },
  {
    "start": 37786.72,
    "end": 37791.92,
    "text": "you know, kind of worry about creating posts, and updating posts, to make sure that you know,",
    "textdich": ""
  },
  {
    "start": 37791.92,
    "end": 37796.96,
    "text": "when they create an update that they return the number of votes, but it's ultimately up to you,",
    "textdich": ""
  },
  {
    "start": 37796.96,
    "end": 37803.04,
    "text": "I, I think we don't need it in those. This more of just kind of returning back, just the main",
    "textdich": ""
  },
  {
    "start": 37803.04,
    "end": 37809.2,
    "text": "information about the post. And then you know, the queries for updating a specific post, and then",
    "textdich": ""
  },
  {
    "start": 37809.2,
    "end": 37813.2,
    "text": "grabbing the votes gets a little complicated. So we're going to ignore that for the update,",
    "textdich": ""
  },
  {
    "start": 37813.2,
    "end": 37821.44,
    "text": "and the and the create post functionality. Now, when it comes to building out the tables or the",
    "textdich": ""
  },
  {
    "start": 37821.44,
    "end": 37826.72,
    "text": "database schema, SQL alchemy has a little bit of a limitation. And that is that SQL alchemy doesn't",
    "textdich": ""
  },
  {
    "start": 37826.72,
    "end": 37832.24,
    "text": "allow us to modify tables, it doesn't allow us to create extra columns, delete columns,",
    "textdich": ""
  },
  {
    "start": 37832.24,
    "end": 37838.72,
    "text": "add foreign key constraints. And that's because when we define these models, what SQL alchemy",
    "textdich": ""
  },
  {
    "start": 37838.72,
    "end": 37843.52,
    "text": "does is it checks to see if the specific table name already exists in our Postgres database.",
    "textdich": ""
  },
  {
    "start": 37843.52,
    "end": 37847.68,
    "text": "And if it does, it's not going to touch it. So if we make any changes, it will never push out those",
    "textdich": ""
  },
  {
    "start": 37847.68,
    "end": 37852.8,
    "text": "changes. It'll only create these tables if it doesn't already see a table with that specific",
    "textdich": ""
  },
  {
    "start": 37852.8,
    "end": 37858.24,
    "text": "name. And so we've had to resort to dropping all of our tables, and then restarting our application.",
    "textdich": ""
  },
  {
    "start": 37858.24,
    "end": 37863.28,
    "text": "So that SQL alchemy builds it from scratch. That's something we can obviously do in production.",
    "textdich": ""
  },
  {
    "start": 37863.28,
    "end": 37868.0,
    "text": "That would be an unacceptable thing to do. And just to show you guys, in case you've forgotten,",
    "textdich": ""
  },
  {
    "start": 37868.0,
    "end": 37873.2,
    "text": "if we go to my our Postgres database, and we go, we could see that we've got our three tables.",
    "textdich": ""
  },
  {
    "start": 37874.32,
    "end": 37880.4,
    "text": "Now, if I add a phone number class, sorry, a phone number column to our user class,",
    "textdich": ""
  },
  {
    "start": 37881.04,
    "end": 37884.64,
    "text": "and I'll set this column to be just a string, and this is really just for demonstration purposes,",
    "textdich": ""
  },
  {
    "start": 37884.64,
    "end": 37890.32,
    "text": "you guys don't have to do this. If I save this and reload this SQL alchemy will not go into",
    "textdich": ""
  },
  {
    "start": 37890.32,
    "end": 37895.44,
    "text": "Postgres and actually create that column. If I refresh this, and then go into users properties,",
    "textdich": ""
  },
  {
    "start": 37896.16,
    "end": 37903.04,
    "text": "you can see that it is not here. And so that's the limitation of SQL alchemy. And so in this",
    "textdich": ""
  },
  {
    "start": 37903.04,
    "end": 37907.2,
    "text": "section, what we're going to do is we're going to take a look at another tool that will allow us",
    "textdich": ""
  },
  {
    "start": 37907.2,
    "end": 37912.24,
    "text": "to do a couple things. First of all, it's going to allow us to automatically update the columns",
    "textdich": ""
  },
  {
    "start": 37912.24,
    "end": 37916.8,
    "text": "based off of the models that we define here. So moving forward, when we add this phone number",
    "textdich": ""
  },
  {
    "start": 37916.8,
    "end": 37922.24,
    "text": "column, it's going to automatically update our Postgres database. And this tool is called Olympic,",
    "textdich": ""
  },
  {
    "start": 37922.24,
    "end": 37928.8,
    "text": "it is what we refer to as a data database migration tool. However, it's much more powerful than that.",
    "textdich": ""
  },
  {
    "start": 37928.8,
    "end": 37934.56,
    "text": "It's able to allow us to, you know, create incremental changes to our database and actually",
    "textdich": ""
  },
  {
    "start": 37934.56,
    "end": 37940.24,
    "text": "track it kind of like we do with code. So in the in this lesson, and in the next coming lessons,",
    "textdich": ""
  },
  {
    "start": 37940.24,
    "end": 37943.44,
    "text": "we're going to take a look at Olympic, we're going to see everything it has to offer. And I'm going",
    "textdich": ""
  },
  {
    "start": 37943.44,
    "end": 37947.76,
    "text": "to hopefully get you guys at least a solid understanding of how to work with Olympics so",
    "textdich": ""
  },
  {
    "start": 37947.76,
    "end": 37952.64,
    "text": "that when you guys work on your projects, you can immediately get Olympic installed running and then",
    "textdich": ""
  },
  {
    "start": 37952.64,
    "end": 37958.16,
    "text": "manage your databases using Olympic instead of having to either do it manually, or use any other",
    "textdich": ""
  },
  {
    "start": 37958.16,
    "end": 37964.96,
    "text": "kind of unusual workaround. Now, one of the motivations for a database migration tool is",
    "textdich": ""
  },
  {
    "start": 37965.6,
    "end": 37969.6,
    "text": "came from the fact that developers can track changes to their code and roll back their code",
    "textdich": ""
  },
  {
    "start": 37969.6,
    "end": 37974.88,
    "text": "easily with Git. And they wanted to be able to do the same thing for our database models and our",
    "textdich": ""
  },
  {
    "start": 37974.88,
    "end": 37980.88,
    "text": "database schema. And so they went about implementing what is referred to as database migration tools.",
    "textdich": ""
  },
  {
    "start": 37980.88,
    "end": 37985.52,
    "text": "And so a database migration tool just allows us to incrementally track changes to our schema and",
    "textdich": ""
  },
  {
    "start": 37985.52,
    "end": 37990.4,
    "text": "roll back those changes to any point in time. And so as we go through our project, you know,",
    "textdich": ""
  },
  {
    "start": 37990.4,
    "end": 37995.76,
    "text": "we kept adding new tables and new features, what a database migration tool is, it's going to allow",
    "textdich": ""
  },
  {
    "start": 37995.76,
    "end": 38000.56,
    "text": "us to track those changes. And so if we ever want to go back to a specific point in time, so that",
    "textdich": ""
  },
  {
    "start": 38000.56,
    "end": 38005.92,
    "text": "we can kind of troubleshoot code at that point in time, it's so easy, it's just one simple command,",
    "textdich": ""
  },
  {
    "start": 38005.92,
    "end": 38010.96,
    "text": "and it's going to automatically update our database, so that the schema matches what it",
    "textdich": ""
  },
  {
    "start": 38010.96,
    "end": 38015.2,
    "text": "was at that specific point in time. And so that tool that we're going to use, like I mentioned,",
    "textdich": ""
  },
  {
    "start": 38015.2,
    "end": 38020.88,
    "text": "is going to be Olympic. And what's great about Olympic is that it can also automatically pull",
    "textdich": ""
  },
  {
    "start": 38020.88,
    "end": 38025.92,
    "text": "all of our SQL alchemy models and generate the proper tables based off of them. Alright,",
    "textdich": ""
  },
  {
    "start": 38025.92,
    "end": 38033.04,
    "text": "so this is the documentation for Alembic. So it's just alembic.sql.com.org. And if you want to kind",
    "textdich": ""
  },
  {
    "start": 38033.04,
    "end": 38036.88,
    "text": "of follow along, just select the tutorial right here. And this is just going to give you kind of",
    "textdich": ""
  },
  {
    "start": 38036.88,
    "end": 38042.56,
    "text": "a quick walkthrough of how to get Alembic set up. But I'm going to show you guys this so you don't",
    "textdich": ""
  },
  {
    "start": 38042.56,
    "end": 38045.92,
    "text": "actually have to follow the tutorial. So we're going to do a first of all, we have to install",
    "textdich": ""
  },
  {
    "start": 38045.92,
    "end": 38054.8,
    "text": "the library. So we'll do pip install alembic. And so that will get alembic installed. And what it",
    "textdich": ""
  },
  {
    "start": 38054.8,
    "end": 38059.68,
    "text": "does is it actually gives us access to the alembic command. So if I do alembic dash dash help,",
    "textdich": ""
  },
  {
    "start": 38060.96,
    "end": 38066.32,
    "text": "and actually, before we proceed any further, I want you to go ahead and delete phone number,",
    "textdich": ""
  },
  {
    "start": 38066.88,
    "end": 38072.96,
    "text": "we don't actually need that anymore. And then go to your app application, and actually close that",
    "textdich": ""
  },
  {
    "start": 38072.96,
    "end": 38077.52,
    "text": "out, stop it so that it doesn't automatically restart for any other reason. And then also what",
    "textdich": ""
  },
  {
    "start": 38077.52,
    "end": 38080.56,
    "text": "we're going to do is I'm actually going to delete all of our tables so that we can actually take a",
    "textdich": ""
  },
  {
    "start": 38080.56,
    "end": 38085.84,
    "text": "look at how this works. So do delete drop. And if you try to drop this table, it's going to say we",
    "textdich": ""
  },
  {
    "start": 38085.84,
    "end": 38090.32,
    "text": "can't drop it due to the foreign key constraint, that's okay, we could just do drop cascade, and",
    "textdich": ""
  },
  {
    "start": 38090.32,
    "end": 38096.64,
    "text": "that's going to delete it. And we're just going to do that for all of them. All right, so now let's",
    "textdich": ""
  },
  {
    "start": 38096.64,
    "end": 38103.36,
    "text": "get back to alembic. I'm gonna make this bigger for you guys. All right. And so we'll do alembic",
    "textdich": ""
  },
  {
    "start": 38103.36,
    "end": 38108.24,
    "text": "dash dash help to see what commands we have. And the first thing that we have to do is we have to",
    "textdich": ""
  },
  {
    "start": 38108.24,
    "end": 38112.08,
    "text": "initialize alembic. And what that's going to do is it's going to actually create an alembic directory",
    "textdich": ""
  },
  {
    "start": 38112.08,
    "end": 38121.28,
    "text": "for us. So we'll do alembic in it. And then I'm just going to do dash dash help to see if we need",
    "textdich": ""
  },
  {
    "start": 38121.28,
    "end": 38125.04,
    "text": "to pass in any extra flags. And then we have to give it a directory name. So when we run this",
    "textdich": ""
  },
  {
    "start": 38125.04,
    "end": 38129.76,
    "text": "command, it's going to create a directory, I'm going to name the directory alembic. You could",
    "textdich": ""
  },
  {
    "start": 38129.76,
    "end": 38133.28,
    "text": "call it DB database, whatever you want to call it, but I'm just going to call it alembic. So it's",
    "textdich": ""
  },
  {
    "start": 38133.28,
    "end": 38138.64,
    "text": "going to create a folder called alembic. And so you can see that we've got this folder called",
    "textdich": ""
  },
  {
    "start": 38138.64,
    "end": 38144.48,
    "text": "alembic. And notice how it gets installed outside of the app folder, which is what we want. And it",
    "textdich": ""
  },
  {
    "start": 38144.48,
    "end": 38150.64,
    "text": "also created this alembic.ini file. So we'll take a look at both of those. And the first thing that",
    "textdich": ""
  },
  {
    "start": 38150.64,
    "end": 38156.64,
    "text": "we want to do is go up into alembic. And there's really one main file, it's the env.py. So this is",
    "textdich": ""
  },
  {
    "start": 38156.64,
    "end": 38162.4,
    "text": "kind of like the the King Kong configuration file. And there's going to be a couple of things that",
    "textdich": ""
  },
  {
    "start": 38162.4,
    "end": 38168.64,
    "text": "we have to add to this file to make sure that things work. Because alembic works with SQL",
    "textdich": ""
  },
  {
    "start": 38168.64,
    "end": 38174.24,
    "text": "alchemy, and the models that you build with SQL alchemy, we need to make sure that it has access",
    "textdich": ""
  },
  {
    "start": 38174.24,
    "end": 38182.0,
    "text": "to our base, our base object right here. So we have to import this base object into the env.py",
    "textdich": ""
  },
  {
    "start": 38182.0,
    "end": 38187.04,
    "text": "file. So I'm going to just go right here. And we're going to say from and what we're going to do is",
    "textdich": ""
  },
  {
    "start": 38187.04,
    "end": 38193.44,
    "text": "how do we actually get to that database file that, that base object, we have to go into app.",
    "textdich": ""
  },
  {
    "start": 38194.16,
    "end": 38200.96,
    "text": "And then we go into, go into database, and then we'll import base. All right. And so this is kind",
    "textdich": ""
  },
  {
    "start": 38200.96,
    "end": 38206.56,
    "text": "of give us access to all of those SQL alchemy models. And then for target underscore metadata,",
    "textdich": ""
  },
  {
    "start": 38206.56,
    "end": 38211.52,
    "text": "instead of saying none, what we want to do is we want to get base. So we're accessing,",
    "textdich": ""
  },
  {
    "start": 38213.36,
    "end": 38219.52,
    "text": "this should be a capital B. Actually, let's just double check that it's capitalized. Yep,",
    "textdich": ""
  },
  {
    "start": 38219.52,
    "end": 38226.96,
    "text": "it's capitalized here. So we'll go to base, and then we want to make sure we grab metadata.",
    "textdich": ""
  },
  {
    "start": 38226.96,
    "end": 38233.12,
    "text": "So that's all we have to do to rig this up to SQL alchemy. The next thing that we have to do",
    "textdich": ""
  },
  {
    "start": 38233.12,
    "end": 38241.36,
    "text": "is if we go to alembic.ini, we have to pass in one value here, which is the SQL alchemy URL,",
    "textdich": ""
  },
  {
    "start": 38241.36,
    "end": 38248.24,
    "text": "which is basically what's the URL to access our Postgres database. And so just to show you what",
    "textdich": ""
  },
  {
    "start": 38248.24,
    "end": 38252.0,
    "text": "this is going to look like, this is going to be fundamentally no different than the URL that we",
    "textdich": ""
  },
  {
    "start": 38252.0,
    "end": 38258.72,
    "text": "used within database.py, which is this one right here. And so I'm just going to write this out.",
    "textdich": ""
  },
  {
    "start": 38261.76,
    "end": 38265.68,
    "text": "It's going to copy this fresh part right here, because I can never remember that.",
    "textdich": ""
  },
  {
    "start": 38269.36,
    "end": 38278.72,
    "text": "And so here, gonna copy that. So we say, Postgres ql. And optionally, with the URL,",
    "textdich": ""
  },
  {
    "start": 38278.72,
    "end": 38282.96,
    "text": "you can do a plus, and then whatever driver you're using. So if you don't provide the driver,",
    "textdich": ""
  },
  {
    "start": 38282.96,
    "end": 38288.08,
    "text": "it's going to use whatever the default driver is. But we're using, let's see, which driver,",
    "textdich": ""
  },
  {
    "start": 38288.08,
    "end": 38295.36,
    "text": "what is our driver? I do pip freeze, it's going to be this one right here. So this is the default",
    "textdich": ""
  },
  {
    "start": 38295.36,
    "end": 38299.04,
    "text": "driver for Postgres. So you don't actually need to provide it. But if you did, you could just say",
    "textdich": ""
  },
  {
    "start": 38299.04,
    "end": 38305.6,
    "text": "plus, p, s, y, c, o, p, g, two. But like I said, it's the default one. So it's optional, right,",
    "textdich": ""
  },
  {
    "start": 38305.6,
    "end": 38310.08,
    "text": "then we have to give it the username. So what's the username, that's going to be using to log into",
    "textdich": ""
  },
  {
    "start": 38310.08,
    "end": 38315.04,
    "text": "your Postgres database. For me, it's just Postgres, the password is going to be password 123.",
    "textdich": ""
  },
  {
    "start": 38316.56,
    "end": 38320.48,
    "text": "It's going to be running on localhost. And then if you want to, you can provide the port,",
    "textdich": ""
  },
  {
    "start": 38320.48,
    "end": 38328.16,
    "text": "which is 5432. And then your database name, which is fast API for me. So this is ultimately what",
    "textdich": ""
  },
  {
    "start": 38328.16,
    "end": 38334.4,
    "text": "the URL is going to look like. And at this point, alembic is set up and ready to run. However,",
    "textdich": ""
  },
  {
    "start": 38334.4,
    "end": 38338.0,
    "text": "you know, just like just like we did before, I don't like the fact that we're hard coding",
    "textdich": ""
  },
  {
    "start": 38338.0,
    "end": 38343.92,
    "text": "this data in here. It's gross, we're saving our password. And if we move into our production",
    "textdich": ""
  },
  {
    "start": 38343.92,
    "end": 38347.52,
    "text": "server, it's not going to work properly, because they're not going to use these credentials or",
    "textdich": ""
  },
  {
    "start": 38347.52,
    "end": 38352.24,
    "text": "this IP. So instead of doing this, what we're actually going to do is we're going to override",
    "textdich": ""
  },
  {
    "start": 38352.24,
    "end": 38359.12,
    "text": "this value that's stored in this file within the env.py file. And so under this config right here,",
    "textdich": ""
  },
  {
    "start": 38359.12,
    "end": 38366.16,
    "text": "I'm going to set a new option under the config object, I'm gonna say config dot set underscore",
    "textdich": ""
  },
  {
    "start": 38367.04,
    "end": 38376.32,
    "text": "main underscore option. And then here, we can override any options that we have in here. So",
    "textdich": ""
  },
  {
    "start": 38376.32,
    "end": 38381.12,
    "text": "I'm going to override this SQL alchemy URL. So no matter what I put in here, we're actually going",
    "textdich": ""
  },
  {
    "start": 38381.12,
    "end": 38386.88,
    "text": "to override it. And here, you just pass in a string. So SQL alchemy dot URL. So that's the",
    "textdich": ""
  },
  {
    "start": 38386.88,
    "end": 38396.32,
    "text": "value we're going to override. And then we're going to pass in our string. So I can just cut",
    "textdich": ""
  },
  {
    "start": 38396.32,
    "end": 38403.6,
    "text": "this out. And it's okay to just leave this blank here. All right. And so we've hard coded this",
    "textdich": ""
  },
  {
    "start": 38403.6,
    "end": 38407.04,
    "text": "string here. So we haven't technically fixed anything. But what we're going to do is just",
    "textdich": ""
  },
  {
    "start": 38407.04,
    "end": 38412.08,
    "text": "like we have in our database.py file, you can see that we're using the settings object, right,",
    "textdich": ""
  },
  {
    "start": 38412.08,
    "end": 38417.68,
    "text": "that comes from our config file, which is making use of this pedantic class, where we can grab it",
    "textdich": ""
  },
  {
    "start": 38417.68,
    "end": 38422.0,
    "text": "from our environment variable. And so what we're going to do is we're going to do the same exact",
    "textdich": ""
  },
  {
    "start": 38422.0,
    "end": 38426.72,
    "text": "thing we did with main, right, we imported settings. And we're just going to do that in",
    "textdich": ""
  },
  {
    "start": 38426.72,
    "end": 38433.04,
    "text": "our env.py file, so we can access all of our environment variables. So I'm going to say from",
    "textdich": ""
  },
  {
    "start": 38433.04,
    "end": 38442.64,
    "text": "app dot config, import settings. And so now I have access to the settings object, I can override all",
    "textdich": ""
  },
  {
    "start": 38442.64,
    "end": 38451.28,
    "text": "of these. So this is going to be the username. So I can say settings dot username. And actually,",
    "textdich": ""
  },
  {
    "start": 38451.28,
    "end": 38460.72,
    "text": "I don't think that's what it is. It's database underscore username. And then we'll override the",
    "textdich": ""
  },
  {
    "start": 38460.72,
    "end": 38471.44,
    "text": "password, which is settings dot database underscore password. And in reality, instead of just typing",
    "textdich": ""
  },
  {
    "start": 38471.44,
    "end": 38477.12,
    "text": "this all out myself, we actually have this written out in our database.py file. So I can just copy",
    "textdich": ""
  },
  {
    "start": 38477.12,
    "end": 38492.72,
    "text": "this here. And that way, we don't waste too much time. Okay, so we've got our URL set, and we're",
    "textdich": ""
  },
  {
    "start": 38492.72,
    "end": 38498.0,
    "text": "not hard coding any values. And at this point, alembic should be set to actually connect to our",
    "textdich": ""
  },
  {
    "start": 38498.0,
    "end": 38503.52,
    "text": "database and modify any of the tables, generate tables, and be able to really perform any actions",
    "textdich": ""
  },
  {
    "start": 38503.52,
    "end": 38509.76,
    "text": "that we wanted to moving forward. Hey, guys, I made one tiny little mistake. If you take a look",
    "textdich": ""
  },
  {
    "start": 38509.76,
    "end": 38514.72,
    "text": "at where we're importing base, I wrote app dot database. And if we take a look at that, it looks",
    "textdich": ""
  },
  {
    "start": 38514.72,
    "end": 38519.76,
    "text": "like we are grabbing our base right here. But this is not the one we want. Instead, what we want to",
    "textdich": ""
  },
  {
    "start": 38519.76,
    "end": 38524.72,
    "text": "do is we want to import it from models. So we want to import base, which is technically getting",
    "textdich": ""
  },
  {
    "start": 38524.72,
    "end": 38531.2,
    "text": "imported from that same file. But by doing it from here, it'll allow alembic to read all of these",
    "textdich": ""
  },
  {
    "start": 38531.2,
    "end": 38535.76,
    "text": "models. And if we do it directly from database, it's not going to work. So what I want you guys",
    "textdich": ""
  },
  {
    "start": 38535.76,
    "end": 38545.12,
    "text": "to do is go to your env.py file. And just change this from app dot database to app dot models.",
    "textdich": ""
  },
  {
    "start": 38546.16,
    "end": 38551.92,
    "text": "And that should fix any potential issues that you could have. Okay, so just to quickly recap,",
    "textdich": ""
  },
  {
    "start": 38551.92,
    "end": 38555.92,
    "text": "we have cleared out all of our tables. So there's nothing in our Postgres database,",
    "textdich": ""
  },
  {
    "start": 38555.92,
    "end": 38559.68,
    "text": "we don't have any tables defined. And we're going to do this all through alembic.",
    "textdich": ""
  },
  {
    "start": 38559.68,
    "end": 38564.16,
    "text": "But what I want to do is I want to kind of go through this, like we would have if we had",
    "textdich": ""
  },
  {
    "start": 38564.16,
    "end": 38569.52,
    "text": "already known about alembic from the start of our project. And so we're going to take this step by",
    "textdich": ""
  },
  {
    "start": 38569.52,
    "end": 38574.08,
    "text": "step, right? Because when we first started creating tables in our Postgres database,",
    "textdich": ""
  },
  {
    "start": 38574.08,
    "end": 38577.92,
    "text": "we kind of went along with what we were working on in our app. So the first thing we did was,",
    "textdich": ""
  },
  {
    "start": 38578.48,
    "end": 38586.16,
    "text": "we created a post table. And that's because we didn't learn about how to actually create users,",
    "textdich": ""
  },
  {
    "start": 38586.16,
    "end": 38590.4,
    "text": "we didn't learn about hashing passwords, we haven't gotten to the user section. So we originally just",
    "textdich": ""
  },
  {
    "start": 38590.4,
    "end": 38595.36,
    "text": "had a post table with a couple of fields. And then after working through our code, once we finished",
    "textdich": ""
  },
  {
    "start": 38595.36,
    "end": 38599.92,
    "text": "all the CRUD operations for posts, we then learn how to register users. And at that point, we had",
    "textdich": ""
  },
  {
    "start": 38599.92,
    "end": 38605.92,
    "text": "to create a table for users. And then after that, the next logical step was a how do we set up the",
    "textdich": ""
  },
  {
    "start": 38605.92,
    "end": 38611.6,
    "text": "relationship between posts and users, then we had to modify that and set up a foreign key. And then",
    "textdich": ""
  },
  {
    "start": 38611.6,
    "end": 38616.4,
    "text": "finally, after that, the last thing that we had to do was we created a voting table, or a votes",
    "textdich": ""
  },
  {
    "start": 38616.4,
    "end": 38620.88,
    "text": "table. And then we set up all of the necessary foreign keys for that. So we're gonna, so we're",
    "textdich": ""
  },
  {
    "start": 38620.88,
    "end": 38626.72,
    "text": "going to do this step by step, just kind of like how we did it with our our project. But we're",
    "textdich": ""
  },
  {
    "start": 38626.72,
    "end": 38630.72,
    "text": "going to do this with the database so that you can see how we would have done it if we had already",
    "textdich": ""
  },
  {
    "start": 38630.72,
    "end": 38636.64,
    "text": "known how to work with alembic. Alright, so first things first, do alembic, alembic,",
    "textdich": ""
  },
  {
    "start": 38636.64,
    "end": 38643.76,
    "text": "dash, dash, help, just to see what commands we have. And so there's a few different commands.",
    "textdich": ""
  },
  {
    "start": 38643.76,
    "end": 38649.84,
    "text": "But the first one that I want to focus on is revision. So when we want to make a change to",
    "textdich": ""
  },
  {
    "start": 38649.84,
    "end": 38654.96,
    "text": "our database, we create a revision. So the revision is what really tracks all of the changes that we",
    "textdich": ""
  },
  {
    "start": 38654.96,
    "end": 38662.56,
    "text": "make on a step by step basis, they're going to do alembic, revision, dash, dash, help. And we'll",
    "textdich": ""
  },
  {
    "start": 38662.56,
    "end": 38668.08,
    "text": "see the different options that we have in our disposal. The first one is that I really the only",
    "textdich": ""
  },
  {
    "start": 38668.08,
    "end": 38672.0,
    "text": "one that I care about is the dash m flag. So it's kind of like when you do a git commit, you can add",
    "textdich": ""
  },
  {
    "start": 38672.0,
    "end": 38678.88,
    "text": "a dash m a message, so that you can kind of have a human readable name associated with each revision.",
    "textdich": ""
  },
  {
    "start": 38678.88,
    "end": 38686.24,
    "text": "So I'm going to say git, sorry, not git, alembic, revision, dash m, and I'm going to say this is",
    "textdich": ""
  },
  {
    "start": 38686.24,
    "end": 38692.88,
    "text": "going to be a create post table. So that this revision is going to be responsible for creating",
    "textdich": ""
  },
  {
    "start": 38692.88,
    "end": 38700.64,
    "text": "a post table. We'll run that. And I want you to notice something, right, you can see that it",
    "textdich": ""
  },
  {
    "start": 38700.64,
    "end": 38705.44,
    "text": "created this file under the version. So the versions folder under the alembic folder is going",
    "textdich": ""
  },
  {
    "start": 38705.44,
    "end": 38712.48,
    "text": "to contain all of our changes. And if we take a look at the revision, there's a couple of things",
    "textdich": ""
  },
  {
    "start": 38712.48,
    "end": 38718.0,
    "text": "to know. So you'll see that we import op from the alembic library, and then we import essay from the",
    "textdich": ""
  },
  {
    "start": 38718.0,
    "end": 38722.88,
    "text": "SQL alchemy library. And then you can see the revision ID that it gives it. And then there's",
    "textdich": ""
  },
  {
    "start": 38722.88,
    "end": 38727.28,
    "text": "going to be two different functions that are empty at the moment. So these functions are pretty",
    "textdich": ""
  },
  {
    "start": 38727.28,
    "end": 38732.4,
    "text": "important. What they are is the upgrade function. When we run the upgrade, what it does is it runs",
    "textdich": ""
  },
  {
    "start": 38732.4,
    "end": 38737.36,
    "text": "the commands for making the changes that you want to do. So in this case, we want to create a post",
    "textdich": ""
  },
  {
    "start": 38737.36,
    "end": 38741.52,
    "text": "table. So what we're going to do is we're going to put all of the logic for creating a post table",
    "textdich": ""
  },
  {
    "start": 38741.52,
    "end": 38746.88,
    "text": "within this function. And then if we ever want to roll back, right, if maybe I create the table,",
    "textdich": ""
  },
  {
    "start": 38746.88,
    "end": 38750.96,
    "text": "and I realized I messed it up, and I don't want it anymore, then we have to put in all of the logic",
    "textdich": ""
  },
  {
    "start": 38750.96,
    "end": 38756.4,
    "text": "in the downgrade function to handle removing the table. So the upgrade just handles the changes.",
    "textdich": ""
  },
  {
    "start": 38756.96,
    "end": 38761.12,
    "text": "And the downgrade handles rolling it back, but it's all manual, you have to define how to do all",
    "textdich": ""
  },
  {
    "start": 38761.12,
    "end": 38768.48,
    "text": "of that. So let's go ahead and set up the upgrade function. And let's configure all of the necessary",
    "textdich": ""
  },
  {
    "start": 38768.48,
    "end": 38774.0,
    "text": "columns for our post table. Alright, and if you ever want to take a look at the documentation for",
    "textdich": ""
  },
  {
    "start": 38774.0,
    "end": 38779.2,
    "text": "this, what you want to do is select documentation here. And then you want to go down down down all",
    "textdich": ""
  },
  {
    "start": 38779.2,
    "end": 38784.64,
    "text": "the way down to API details. And you want to go to DDL internals. So this is going to show you how",
    "textdich": ""
  },
  {
    "start": 38784.64,
    "end": 38790.72,
    "text": "to actually perform the various operations. So if you want to create a column, if you want to add a",
    "textdich": ""
  },
  {
    "start": 38790.72,
    "end": 38794.72,
    "text": "column, this is the command that you're going to run if you want to alter a column. If you want to",
    "textdich": ""
  },
  {
    "start": 38794.72,
    "end": 38802.4,
    "text": "modify a table, drop a column, create a table, all of these are all listed here. So this is the sheet",
    "textdich": ""
  },
  {
    "start": 38802.4,
    "end": 38806.56,
    "text": "that you're going to reference on a fairly frequent basis when you're working with alembic, because I",
    "textdich": ""
  },
  {
    "start": 38806.56,
    "end": 38810.72,
    "text": "can never remember each of the things. But we're going to go ahead and create our post table.",
    "textdich": ""
  },
  {
    "start": 38811.84,
    "end": 38818.56,
    "text": "And so we access the op object from alembic. I'm gonna say op. And then if you look at the",
    "textdich": ""
  },
  {
    "start": 38818.56,
    "end": 38824.4,
    "text": "documentation, the way to create a table is you do create underscore table. And there's going to be",
    "textdich": ""
  },
  {
    "start": 38824.4,
    "end": 38828.32,
    "text": "a couple of properties we have to pass in. So what's the name of the table in Postgres? Well,",
    "textdich": ""
  },
  {
    "start": 38828.32,
    "end": 38834.16,
    "text": "we're going to call it posts. And then we have to define our columns. And I'm not going to do all",
    "textdich": ""
  },
  {
    "start": 38834.16,
    "end": 38837.84,
    "text": "of our post column, because it's going to take a little bit of a while. And we might do it later",
    "textdich": ""
  },
  {
    "start": 38837.84,
    "end": 38842.64,
    "text": "on, but we're just going to define two columns. So the first one is going to be, well, first of all,",
    "textdich": ""
  },
  {
    "start": 38842.64,
    "end": 38848.56,
    "text": "we do essay column. So we're grabbing the SQL alchemy object. And so this column is going to",
    "textdich": ""
  },
  {
    "start": 38848.56,
    "end": 38860.0,
    "text": "represent the IDs, the name of it's going to be ID. It's going to be type of integer. And I may",
    "textdich": ""
  },
  {
    "start": 38860.0,
    "end": 38869.6,
    "text": "have accidentally imported nope, that we're good for integer. And then we can set nullable equals",
    "textdich": ""
  },
  {
    "start": 38869.6,
    "end": 38875.6,
    "text": "false, which means it's required. And then we also want this to be the primary key. So you just do",
    "textdich": ""
  },
  {
    "start": 38875.6,
    "end": 38880.88,
    "text": "primary key equals true. All right, fairly straightforward, right, guys, so we can then",
    "textdich": ""
  },
  {
    "start": 38880.88,
    "end": 38886.4,
    "text": "go in and create a second column. And so this is just going to follow the same exact pattern essay",
    "textdich": ""
  },
  {
    "start": 38886.4,
    "end": 38892.96,
    "text": "dot column. And then this one will be the title, it's going to be a type of essay dot string.",
    "textdich": ""
  },
  {
    "start": 38895.76,
    "end": 38901.6,
    "text": "And this is going to be nullable equals false. And I'm just going to stop it right here. So we're",
    "textdich": ""
  },
  {
    "start": 38901.6,
    "end": 38906.88,
    "text": "going to just create two columns, I don't feel like creating all of the columns that we had for posts.",
    "textdich": ""
  },
  {
    "start": 38907.92,
    "end": 38912.56,
    "text": "And so the upgrade function is done. However, we also have to provide the logic for",
    "textdich": ""
  },
  {
    "start": 38913.28,
    "end": 38918.16,
    "text": "undoing these changes. So if we create a table, what's the how do we undo that? Well, we delete",
    "textdich": ""
  },
  {
    "start": 38918.16,
    "end": 38924.64,
    "text": "the table. So we do op dot drop underscore table, and we just give it the name of the table. So it's",
    "textdich": ""
  },
  {
    "start": 38924.64,
    "end": 38929.2,
    "text": "going to be posts. Alright, and so now we should be able to make these changes. And then we can",
    "textdich": ""
  },
  {
    "start": 38929.2,
    "end": 38934.64,
    "text": "roll back because we put the logic in for downgrading. So how exactly do we make these",
    "textdich": ""
  },
  {
    "start": 38934.64,
    "end": 38940.4,
    "text": "changes? Well, let's go to alembic dash dash help. And let's see what commands we have.",
    "textdich": ""
  },
  {
    "start": 38941.6,
    "end": 38945.68,
    "text": "So we've got a couple branches, that's probably not it current, that's going to show us what's",
    "textdich": ""
  },
  {
    "start": 38945.68,
    "end": 38949.04,
    "text": "the current revision, like what version are we on? And if you actually want to see that,",
    "textdich": ""
  },
  {
    "start": 38949.04,
    "end": 38961.28,
    "text": "we'll see alembic current. And it looks like it's giving me an error. Hold on,",
    "textdich": ""
  },
  {
    "start": 38961.28,
    "end": 38968.0,
    "text": "let's go back to my env dot p y file. And I made a very silly mistake. This should be an f string.",
    "textdich": ""
  },
  {
    "start": 38968.0,
    "end": 38972.48,
    "text": "So it wasn't actually doing anything. That's why it was kind of highlighted weird. So let's try",
    "textdich": ""
  },
  {
    "start": 38972.48,
    "end": 38980.24,
    "text": "this now. Again, we're going to do alembic current. And it's not going to actually really give us any",
    "textdich": ""
  },
  {
    "start": 38980.96,
    "end": 38985.36,
    "text": "useful information at the moment, because we haven't run any migrations, right? We're kind",
    "textdich": ""
  },
  {
    "start": 38985.36,
    "end": 38990.64,
    "text": "of starting from a clean slate. So let's go back. And let's just do a dash dash help and see what",
    "textdich": ""
  },
  {
    "start": 38990.64,
    "end": 38997.12,
    "text": "else we've got. So we've got a downgrade. Well, we don't want to downgrade edit, not really.",
    "textdich": ""
  },
  {
    "start": 38997.12,
    "end": 39002.72,
    "text": "Heads, we'll come back to that history. That's not going to be useful, because we haven't done",
    "textdich": ""
  },
  {
    "start": 39002.72,
    "end": 39007.76,
    "text": "anything. But if we go down, we want to get to upgrade. So this is what's important. So if we do",
    "textdich": ""
  },
  {
    "start": 39009.12,
    "end": 39014.64,
    "text": "alembic upgrade, we can just do dash dash help. And we'll see what options we have.",
    "textdich": ""
  },
  {
    "start": 39015.68,
    "end": 39020.88,
    "text": "And so we have to provide a revision number to tell alembic like, hey, what version of our",
    "textdich": ""
  },
  {
    "start": 39020.88,
    "end": 39026.8,
    "text": "database we want to go to. And so if you actually take a look at this specific revision, it provides",
    "textdich": ""
  },
  {
    "start": 39026.8,
    "end": 39031.6,
    "text": "a revision number. So if we actually want to get up to this point where it runs this upgrade,",
    "textdich": ""
  },
  {
    "start": 39031.6,
    "end": 39040.32,
    "text": "we provide these revision number. So I can say alembic revision. And then paste that.",
    "textdich": ""
  },
  {
    "start": 39041.92,
    "end": 39044.72,
    "text": "So let's run this and see what happens.",
    "textdich": ""
  },
  {
    "start": 39044.72,
    "end": 39057.6,
    "text": "Sorry, not, I didn't mean to type revision, I meant alembic upgrade. And then that not alembic",
    "textdich": ""
  },
  {
    "start": 39057.6,
    "end": 39061.76,
    "text": "revision. So that's going to upgrade it. And so you can see it did a couple of things to running",
    "textdich": ""
  },
  {
    "start": 39061.76,
    "end": 39066.56,
    "text": "upgrade. And it said it created post table. So let's go to Postgres. And let's just refresh this.",
    "textdich": ""
  },
  {
    "start": 39066.56,
    "end": 39071.04,
    "text": "And let's see if it actually did something. And it looks like it created two tables. So that's",
    "textdich": ""
  },
  {
    "start": 39071.04,
    "end": 39075.44,
    "text": "interesting. So we are we see our post table. And let's just quickly inspect this. We'll go to",
    "textdich": ""
  },
  {
    "start": 39075.44,
    "end": 39079.84,
    "text": "columns, you can see that it created these columns. And this one got set to the primary key and both",
    "textdich": ""
  },
  {
    "start": 39079.84,
    "end": 39083.6,
    "text": "are not now. So it looks like it did everything it was supposed to do. But what is this alembic",
    "textdich": ""
  },
  {
    "start": 39083.6,
    "end": 39088.8,
    "text": "versions table? Well, this is, this is what alembic uses to kind of keep track of all the revisions.",
    "textdich": ""
  },
  {
    "start": 39089.52,
    "end": 39094.72,
    "text": "And so if we just go to view edit data, all rows, you can see that it just has one column at the",
    "textdich": ""
  },
  {
    "start": 39094.72,
    "end": 39099.92,
    "text": "moment, which has the revision number, you can see it's D one eight, and that's going to match up with",
    "textdich": ""
  },
  {
    "start": 39099.92,
    "end": 39104.56,
    "text": "this file D one eight. So that's all that's doing. So it will create a table for you automatically,",
    "textdich": ""
  },
  {
    "start": 39104.56,
    "end": 39110.72,
    "text": "so you can keep track of all of the revisions. But make sure you don't delete that. Okay,",
    "textdich": ""
  },
  {
    "start": 39110.72,
    "end": 39115.36,
    "text": "so that's cool. We just got our first table created through alembic. And I think at this point,",
    "textdich": ""
  },
  {
    "start": 39115.36,
    "end": 39118.88,
    "text": "you probably still don't understand the brilliance of a database migration tool. And that's okay,",
    "textdich": ""
  },
  {
    "start": 39118.88,
    "end": 39122.96,
    "text": "because we haven't really done much with it yet. So let's say that, you know, as we're coding out",
    "textdich": ""
  },
  {
    "start": 39122.96,
    "end": 39128.56,
    "text": "our application, we realize we want to add a new column to our database, sorry, well, to our",
    "textdich": ""
  },
  {
    "start": 39128.56,
    "end": 39133.44,
    "text": "specifically to our post table. Well, we can create a brand new revision to add a new column. So let's",
    "textdich": ""
  },
  {
    "start": 39133.44,
    "end": 39137.44,
    "text": "say, if you take a look at our models, you know, we have a couple other fields that are missing. So",
    "textdich": ""
  },
  {
    "start": 39137.44,
    "end": 39144.24,
    "text": "let's say we want to add the content column now. I can type in alembic revision. So this is going",
    "textdich": ""
  },
  {
    "start": 39144.24,
    "end": 39149.76,
    "text": "to create a brand new revision, we'll give it a name and I'll say add content column to post table.",
    "textdich": ""
  },
  {
    "start": 39152.64,
    "end": 39155.04,
    "text": "All right, and it's going to create a brand new revision for us.",
    "textdich": ""
  },
  {
    "start": 39155.04,
    "end": 39160.96,
    "text": "And once again, we have to put in the logic for upgrading and downgrading. And you can see that",
    "textdich": ""
  },
  {
    "start": 39160.96,
    "end": 39165.44,
    "text": "when we now that we have more than one revision, we can see that there's also a down revision. So",
    "textdich": ""
  },
  {
    "start": 39165.44,
    "end": 39169.44,
    "text": "if you want to go down a step, it's going to go to the revision of the previous one. So let's",
    "textdich": ""
  },
  {
    "start": 39169.44,
    "end": 39175.44,
    "text": "put in the logic for creating or adding any brand new column for content. And the way we add a new",
    "textdich": ""
  },
  {
    "start": 39175.44,
    "end": 39182.88,
    "text": "column is we do op dot add underscore column. And then we specify the table we want to modify. So",
    "textdich": ""
  },
  {
    "start": 39182.88,
    "end": 39187.44,
    "text": "it's going to be the post table. And then we do SA dot column to define this column.",
    "textdich": ""
  },
  {
    "start": 39191.52,
    "end": 39196.88,
    "text": "So what's the column name, it's going to be content. And there's gonna be a type of string.",
    "textdich": ""
  },
  {
    "start": 39198.88,
    "end": 39201.36,
    "text": "And we're going to make sure that it's nullable is set to false.",
    "textdich": ""
  },
  {
    "start": 39204.0,
    "end": 39208.32,
    "text": "All right. And remember, every time you set up the upgrade function, you have to set up the",
    "textdich": ""
  },
  {
    "start": 39208.32,
    "end": 39213.76,
    "text": "downgrade function. So if we add a column, what's how do we undo that? Well, we drop the column.",
    "textdich": ""
  },
  {
    "start": 39214.72,
    "end": 39221.76,
    "text": "So it's just op dot drop underscore column. And then from the post, we have to provide the table",
    "textdich": ""
  },
  {
    "start": 39221.76,
    "end": 39225.68,
    "text": "that we want to drop the column from, which is the post table. And then we need to provide the",
    "textdich": ""
  },
  {
    "start": 39225.68,
    "end": 39233.76,
    "text": "actual column we want to drop, which is going to be content. So we'll do content. Okay, and so let's",
    "textdich": ""
  },
  {
    "start": 39233.76,
    "end": 39244.32,
    "text": "test this out. First of all, we'll run a few new commands. So alembic. All right, and let's see",
    "textdich": ""
  },
  {
    "start": 39244.32,
    "end": 39251.12,
    "text": "what the current revision is. So if I do alembic current, right, we could see that we are currently",
    "textdich": ""
  },
  {
    "start": 39251.12,
    "end": 39257.52,
    "text": "on 2d 18. That's the revision. So this is the the revision where we created the post table. And if",
    "textdich": ""
  },
  {
    "start": 39257.52,
    "end": 39267.76,
    "text": "I type in the alembic heads, we can see that the latest revision is actually 298, 298 a five, which",
    "textdich": ""
  },
  {
    "start": 39267.76,
    "end": 39272.16,
    "text": "is that new one we just created. So if we ever want to get to the latest revision, that's what's",
    "textdich": ""
  },
  {
    "start": 39272.16,
    "end": 39277.36,
    "text": "referred to as the head. So I can say, if we want to, you know, upgrade to that revision, I can say",
    "textdich": ""
  },
  {
    "start": 39277.36,
    "end": 39285.84,
    "text": "alembic upgrade like we did before. And I can grab the revision number like this. Or because it also",
    "textdich": ""
  },
  {
    "start": 39285.84,
    "end": 39292.96,
    "text": "happens to be the head, I can just say alembic upgrade head and go do the same thing. So let's try",
    "textdich": ""
  },
  {
    "start": 39292.96,
    "end": 39300.0,
    "text": "this. Alright, it said it added a content column, we'll go and check this in Postgres. And I'm just",
    "textdich": ""
  },
  {
    "start": 39300.0,
    "end": 39305.44,
    "text": "going to refresh this table. And we'll go into properties. And we can see that we added the",
    "textdich": ""
  },
  {
    "start": 39305.44,
    "end": 39313.04,
    "text": "content. Now, let's say that after working on this for a bit, we realize we want to undo these",
    "textdich": ""
  },
  {
    "start": 39313.04,
    "end": 39319.04,
    "text": "changes for whatever reason, maybe we no longer want the content column. So how do we actually",
    "textdich": ""
  },
  {
    "start": 39319.04,
    "end": 39326.0,
    "text": "roll back? Well, the since upgrading makes the changes downgrading is going to do the opposite.",
    "textdich": ""
  },
  {
    "start": 39326.0,
    "end": 39332.88,
    "text": "So we can do alembic downgrade. And then if you want to just roll back this revision, we can see",
    "textdich": ""
  },
  {
    "start": 39332.88,
    "end": 39340.88,
    "text": "what the down revision is. So we can just say this, and just paste that in there. But we can also do",
    "textdich": ""
  },
  {
    "start": 39340.88,
    "end": 39348.32,
    "text": "a few other things, we can also say minus one. So when I say minus one, that means I'm going to go",
    "textdich": ""
  },
  {
    "start": 39348.32,
    "end": 39353.28,
    "text": "back to one revision earlier. And we can even go as far back as we want. So if I say I want to go",
    "textdich": ""
  },
  {
    "start": 39353.28,
    "end": 39357.44,
    "text": "back to minus two, it's going to go back to two revisions earlier. But we just have one. So I'm",
    "textdich": ""
  },
  {
    "start": 39357.44,
    "end": 39363.92,
    "text": "just going to say minus one, or I can just paste in the revision number. And so if I run the downgrade,",
    "textdich": ""
  },
  {
    "start": 39363.92,
    "end": 39373.84,
    "text": "you can see that it ran this downgrade. And if I go and refresh this, and then go to properties,",
    "textdich": ""
  },
  {
    "start": 39374.4,
    "end": 39380.8,
    "text": "columns, we can see that we no longer have a content column. And that's how easy it is to downgrade",
    "textdich": ""
  },
  {
    "start": 39382.16,
    "end": 39386.16,
    "text": "or roll back your database using a database migration tool like alembic.",
    "textdich": ""
  },
  {
    "start": 39387.84,
    "end": 39393.12,
    "text": "Okay, so we got our post table, we're not going to worry too much about that. The next part of",
    "textdich": ""
  },
  {
    "start": 39393.12,
    "end": 39397.28,
    "text": "our application was, hey, let's implement a user functionality, let's make it so that users can",
    "textdich": ""
  },
  {
    "start": 39397.28,
    "end": 39402.72,
    "text": "sign up and log in. So now we need to create a users table. How do we do that? Well, let's set",
    "textdich": ""
  },
  {
    "start": 39402.72,
    "end": 39417.2,
    "text": "up a new revision, we'll do alembic, revision, dash m. And I'll say add user table. All right,",
    "textdich": ""
  },
  {
    "start": 39417.2,
    "end": 39423.44,
    "text": "so we've got our brand new revision. And we have to set up the upgrade and the downgrade.",
    "textdich": ""
  },
  {
    "start": 39426.96,
    "end": 39431.2,
    "text": "Now for this, I don't want to just type this out, you know, one by one, it would be kind of slow",
    "textdich": ""
  },
  {
    "start": 39431.2,
    "end": 39435.84,
    "text": "and boring for you guys. So I've actually I'm just going to copy and paste this from my notes.",
    "textdich": ""
  },
  {
    "start": 39436.4,
    "end": 39441.76,
    "text": "And if you want to follow along, just, you know, pause the video, and just write this out. But",
    "textdich": ""
  },
  {
    "start": 39441.76,
    "end": 39445.84,
    "text": "we'll just quickly, you know, walk through exactly what's happening. So once again, we're using the",
    "textdich": ""
  },
  {
    "start": 39445.84,
    "end": 39449.68,
    "text": "create table method, we're going to create a table called users. And then we're going to set up all",
    "textdich": ""
  },
  {
    "start": 39449.68,
    "end": 39455.44,
    "text": "of our columns. So we've got a column called ID, which is an integer set to nullable equals false,",
    "textdich": ""
  },
  {
    "start": 39455.44,
    "end": 39459.68,
    "text": "you notice how I haven't set this to be the primary key here. That's because there's two",
    "textdich": ""
  },
  {
    "start": 39459.68,
    "end": 39464.08,
    "text": "different ways to set the primary key. You know, if we go back to the previous one, we set this",
    "textdich": ""
  },
  {
    "start": 39464.08,
    "end": 39469.44,
    "text": "to be primary key equals true. But on this one, if you actually go all the way down to the bottom,",
    "textdich": ""
  },
  {
    "start": 39469.44,
    "end": 39473.84,
    "text": "you can see that we can add in a constraint as a primary key constraint. And then we pass the name",
    "textdich": ""
  },
  {
    "start": 39473.84,
    "end": 39478.64,
    "text": "of the column, that's going to be the primary key. So they both do the same thing. It's just whatever",
    "textdich": ""
  },
  {
    "start": 39478.64,
    "end": 39483.76,
    "text": "method you prefer. Now we've got the email column, which is going to be set to nullable equals false,",
    "textdich": ""
  },
  {
    "start": 39483.76,
    "end": 39489.04,
    "text": "same thing with password, then we've got the created at. And so here, it's going to be a type",
    "textdich": ""
  },
  {
    "start": 39489.04,
    "end": 39493.12,
    "text": "timestamp. And you'll see that this is all coming from SQL alchemy, essentially. Because if we go to",
    "textdich": ""
  },
  {
    "start": 39493.12,
    "end": 39499.28,
    "text": "our models, and we go to our user table, it's the same thing type timestamp, timezone equals true,",
    "textdich": ""
  },
  {
    "start": 39499.28,
    "end": 39504.8,
    "text": "nullable equals false, server default equals text. Well, that's created at but yeah. And we're just",
    "textdich": ""
  },
  {
    "start": 39504.8,
    "end": 39510.72,
    "text": "doing the same thing. So server default, and then we grab SA dot text, now, nullable equals false.",
    "textdich": ""
  },
  {
    "start": 39512.64,
    "end": 39516.96,
    "text": "And then you can see that we added a unique constraint under the email field to ensure that",
    "textdich": ""
  },
  {
    "start": 39516.96,
    "end": 39524.48,
    "text": "we can have duplicate emails. And then to downgrade, we just do op dot drop underscore table",
    "textdich": ""
  },
  {
    "start": 39524.48,
    "end": 39535.28,
    "text": "users. All right. And so once again, if you want to see where we currently are, because remember,",
    "textdich": ""
  },
  {
    "start": 39535.28,
    "end": 39541.68,
    "text": "we had originally upgraded added the content column, but then we downgraded. So where exactly",
    "textdich": ""
  },
  {
    "start": 39541.68,
    "end": 39550.32,
    "text": "are we from a revision perspective? Well, let's do alembic current. You can see that we're on 2d1.8.",
    "textdich": ""
  },
  {
    "start": 39550.32,
    "end": 39556.72,
    "text": "So we're back on that fresh revision. And we can also do an alembic, I believe it's history.",
    "textdich": ""
  },
  {
    "start": 39557.6,
    "end": 39562.8,
    "text": "And you can see the history of our revision. So we created post, add content column to posts,",
    "textdich": ""
  },
  {
    "start": 39562.8,
    "end": 39566.48,
    "text": "and then add user table. And this is the head. So if you want to go all the way to the front to",
    "textdich": ""
  },
  {
    "start": 39566.48,
    "end": 39575.36,
    "text": "the latest, you would just do alembic upgrade head. And I think there's one more I want to show you.",
    "textdich": ""
  },
  {
    "start": 39575.36,
    "end": 39584.32,
    "text": "Yeah, that's okay. So we're going to do an alembic. And let's say that we just want to go and go up",
    "textdich": ""
  },
  {
    "start": 39584.32,
    "end": 39589.92,
    "text": "one revision. So adding one revision is going to add that column back, we can do alembic upgrade.",
    "textdich": ""
  },
  {
    "start": 39590.8,
    "end": 39597.52,
    "text": "And we can either put in the name of this revision. Or we can upgrade one level.",
    "textdich": ""
  },
  {
    "start": 39599.2,
    "end": 39602.96,
    "text": "If we want to go all the way to the latest, which is going to be adding the user table,",
    "textdich": ""
  },
  {
    "start": 39602.96,
    "end": 39609.84,
    "text": "we can say head, we can also go up to revisions. So if I do plus two, that's going to go up to add",
    "textdich": ""
  },
  {
    "start": 39609.84,
    "end": 39613.04,
    "text": "content column one, that's the first revision, and then one more, which is going to go up to the",
    "textdich": ""
  },
  {
    "start": 39613.04,
    "end": 39616.8,
    "text": "latest in this case. So there's a lot of different ways to get there. I'm just going to go to the",
    "textdich": ""
  },
  {
    "start": 39616.8,
    "end": 39620.72,
    "text": "latest. So this is going to add the column back in the post table and then add the users table.",
    "textdich": ""
  },
  {
    "start": 39622.8,
    "end": 39626.8,
    "text": "And you can see that it went ahead and added the users table. So if I refresh this,",
    "textdich": ""
  },
  {
    "start": 39626.8,
    "end": 39633.6,
    "text": "we can now see that we have a users table. And hopefully all of the properties are there. You",
    "textdich": ""
  },
  {
    "start": 39633.6,
    "end": 39639.92,
    "text": "can see all of these have been set constraints, primary key is set. And anything else, everything",
    "textdich": ""
  },
  {
    "start": 39639.92,
    "end": 39645.44,
    "text": "else looks good. I guess one thing just to check is the created at so if we check the constraints",
    "textdich": ""
  },
  {
    "start": 39645.44,
    "end": 39652.48,
    "text": "here, you can see that we're going to grab the current time. Perfect. Alright, so after we had",
    "textdich": ""
  },
  {
    "start": 39652.48,
    "end": 39658.48,
    "text": "added the user functionality, the next thing we had to do was we had to implement the relationships",
    "textdich": ""
  },
  {
    "start": 39658.48,
    "end": 39662.48,
    "text": "between users and posts. So we had to set up that foreign key that linked the user table",
    "textdich": ""
  },
  {
    "start": 39663.2,
    "end": 39668.48,
    "text": "to the post table or the post table to the user table. So once again, we're going to do an",
    "textdich": ""
  },
  {
    "start": 39668.48,
    "end": 39686.16,
    "text": "Olympic revision dash m. I'm just gonna say add foreign key to post table. All right,",
    "textdich": ""
  },
  {
    "start": 39686.16,
    "end": 39690.8,
    "text": "we got our new revision. And what we're going to do is we're gonna first of all, we have to add",
    "textdich": ""
  },
  {
    "start": 39690.8,
    "end": 39696.08,
    "text": "a column to our post table called owner ID. And that's going to be the one that has the foreign",
    "textdich": ""
  },
  {
    "start": 39696.08,
    "end": 39705.36,
    "text": "key constraint. So we have to do op dot add column. And we have to specify the table we want to add",
    "textdich": ""
  },
  {
    "start": 39705.36,
    "end": 39709.28,
    "text": "the column to which is going to be the post table. And this is going to be essay dot column.",
    "textdich": ""
  },
  {
    "start": 39711.36,
    "end": 39718.08,
    "text": "We're going to call this owner underscore ID. And it's going to be a type of essay integer.",
    "textdich": ""
  },
  {
    "start": 39718.08,
    "end": 39730.08,
    "text": "And nullable is going to be set to false. All right, so we've created the column. Now we have",
    "textdich": ""
  },
  {
    "start": 39730.08,
    "end": 39734.4,
    "text": "to set the link between the two tables, which is going to be the foreign key constraint. And so to",
    "textdich": ""
  },
  {
    "start": 39734.4,
    "end": 39739.84,
    "text": "do that is a little bit confusing at first for me, because the documentation is a little bit hard to",
    "textdich": ""
  },
  {
    "start": 39739.84,
    "end": 39746.48,
    "text": "read sometimes. So you do create foreign key. Then you have to give it, you know, some arbitrary",
    "textdich": ""
  },
  {
    "start": 39746.48,
    "end": 39751.28,
    "text": "foreign key name, I'm gonna call this posts underscore users underscore FK. This is the",
    "textdich": ""
  },
  {
    "start": 39751.28,
    "end": 39755.68,
    "text": "foreign key between the post and the user's table. And then we have to specify what is the source",
    "textdich": ""
  },
  {
    "start": 39755.68,
    "end": 39759.84,
    "text": "table of the foreign key. So this is going to be the foreign key for the post table. So we're",
    "textdich": ""
  },
  {
    "start": 39759.84,
    "end": 39771.84,
    "text": "going to say source underscore table equals posts. Then we have to reference the the remote table,",
    "textdich": ""
  },
  {
    "start": 39771.84,
    "end": 39777.92,
    "text": "which they call a referent underscore table. And so this is going to be the users table.",
    "textdich": ""
  },
  {
    "start": 39779.84,
    "end": 39782.88,
    "text": "And then we have to specify what is the local column that we're going to be using.",
    "textdich": ""
  },
  {
    "start": 39782.88,
    "end": 39792.32,
    "text": "So the column in the post table. And that's going to be owner underscore ID, which is the table,",
    "textdich": ""
  },
  {
    "start": 39792.32,
    "end": 39798.4,
    "text": "the column that we just created. And then finally, we have to specify the remote column",
    "textdich": ""
  },
  {
    "start": 39798.4,
    "end": 39808.88,
    "text": "in the users table. And this is going to be set. And we're also going to set the on delete",
    "textdich": ""
  },
  {
    "start": 39810.16,
    "end": 39817.6,
    "text": "to be cascade. And yeah, by the way, the remote column is going to be the ID field of the user",
    "textdich": ""
  },
  {
    "start": 39817.6,
    "end": 39824.32,
    "text": "table. And we want to make sure we have the on delete as well. And that pretty much Oh,",
    "textdich": ""
  },
  {
    "start": 39824.32,
    "end": 39830.56,
    "text": "what happened there? It's a weird way to format things. All right, well, it wants to format it",
    "textdich": ""
  },
  {
    "start": 39830.56,
    "end": 39835.28,
    "text": "that way. So I'm just gonna leave it like that. Let's set up the downgrade now. So we have to",
    "textdich": ""
  },
  {
    "start": 39835.28,
    "end": 39844.32,
    "text": "undo those changes. We'll do op dot drop underscore constraint. And then we just mentioned the name of",
    "textdich": ""
  },
  {
    "start": 39844.32,
    "end": 39852.48,
    "text": "the constraint, which is post users fk. We have to specify the table that we're removing it from. So",
    "textdich": ""
  },
  {
    "start": 39852.48,
    "end": 39860.8,
    "text": "it's on the post table. So we do table name equals posts. And then we have to drop the column. So we",
    "textdich": ""
  },
  {
    "start": 39860.8,
    "end": 39868.8,
    "text": "do op dot drop or column. And where does this column sit? It's in the post table. And it's called",
    "textdich": ""
  },
  {
    "start": 39868.8,
    "end": 39882.24,
    "text": "owner underscore ID. Alright, and so if I do an alembic current, we're on f5 to an alembic heads,",
    "textdich": ""
  },
  {
    "start": 39882.24,
    "end": 39887.2,
    "text": "let's see what the latest one is, it should be 296, which is this one. So let's do an alembic",
    "textdich": ""
  },
  {
    "start": 39887.2,
    "end": 39902.24,
    "text": "upgrade, head, go to the latest. And I have a typo. So this should be integer. All right, looks like",
    "textdich": ""
  },
  {
    "start": 39902.24,
    "end": 39906.72,
    "text": "it ran with no issues. Let's double check that the foreign key is there. Now, if we go to posts,",
    "textdich": ""
  },
  {
    "start": 39906.72,
    "end": 39913.76,
    "text": "properties, constraints, foreign key, you can see that we have our post user fk. And we can see that",
    "textdich": ""
  },
  {
    "start": 39913.76,
    "end": 39920.08,
    "text": "it points from owner ID in the post table to ID in the users table. And if you want to, you can",
    "textdich": ""
  },
  {
    "start": 39920.08,
    "end": 39926.56,
    "text": "go under actions and see that cascade has been set to on delete. Now in our post table at the moment,",
    "textdich": ""
  },
  {
    "start": 39927.28,
    "end": 39930.48,
    "text": "you know, we didn't implement all of the columns that we actually have in our application.",
    "textdich": ""
  },
  {
    "start": 39930.48,
    "end": 39947.52,
    "text": "So I figured out why not just go in and add it might as well. So I'm going to create a new revision.",
    "textdich": ""
  },
  {
    "start": 39950.56,
    "end": 39954.72,
    "text": "All right, and then we go to that revision. There's really only two more columns that we have to add.",
    "textdich": ""
  },
  {
    "start": 39955.6,
    "end": 39958.4,
    "text": "And this is I'm once again going to just copy and paste from my notes,",
    "textdich": ""
  },
  {
    "start": 39958.4,
    "end": 39962.64,
    "text": "just because I don't want to waste your guys time too much. But you can see here, we're going to do",
    "textdich": ""
  },
  {
    "start": 39962.64,
    "end": 39967.52,
    "text": "an add column. And we're going to add it from our add it to our post table. And then here,",
    "textdich": ""
  },
  {
    "start": 39967.52,
    "end": 39970.88,
    "text": "we're going to specify the parameters of the column. So this is going to be called publish,",
    "textdich": ""
  },
  {
    "start": 39970.88,
    "end": 39978.16,
    "text": "it's going to be of type Boolean. And nullable equals false. And that's not correct, it should",
    "textdich": ""
  },
  {
    "start": 39978.16,
    "end": 39986.64,
    "text": "actually be nullable equals true. Right, it should be actually no, it was false. And then server",
    "textdich": ""
  },
  {
    "start": 39986.64,
    "end": 39992.4,
    "text": "default is set to be true. So if we don't provide it, it's going to assume it's true. And then the",
    "textdich": ""
  },
  {
    "start": 39992.4,
    "end": 39997.44,
    "text": "next one is the column for created at. So once again, at the post table, we're going to create",
    "textdich": ""
  },
  {
    "start": 39997.44,
    "end": 40001.84,
    "text": "a column called created at, it's going to be a type timestamp, nullable false, and then the",
    "textdich": ""
  },
  {
    "start": 40001.84,
    "end": 40009.04,
    "text": "default means we're going to grab the current time. And to downgrade, we're going to delete those",
    "textdich": ""
  },
  {
    "start": 40009.04,
    "end": 40036.64,
    "text": "columns, right? And let's do a, a limbic.",
    "textdich": ""
  },
  {
    "start": 40039.2,
    "end": 40043.44,
    "text": "Upgrade. And we'll just go instead of doing head, we can just do plus one, just to show you guys",
    "textdich": ""
  },
  {
    "start": 40043.44,
    "end": 40047.92,
    "text": "how it's going to do the same thing in this case. And so it looks like it ran that. And if we go",
    "textdich": ""
  },
  {
    "start": 40047.92,
    "end": 40056.72,
    "text": "back to Postgres, refresh this, and then go to properties, we should see, we've now got",
    "textdich": ""
  },
  {
    "start": 40056.72,
    "end": 40062.08,
    "text": "our published and our created at columns. All right. And once again, let's say that maybe we",
    "textdich": ""
  },
  {
    "start": 40062.08,
    "end": 40068.4,
    "text": "want to roll back, right? Maybe we want to roll back all the way to back when we just created",
    "textdich": ""
  },
  {
    "start": 40068.4,
    "end": 40075.28,
    "text": "the post table. You know, we can once again, do a limbic downgrade, and just provide the revision",
    "textdich": ""
  },
  {
    "start": 40075.28,
    "end": 40079.84,
    "text": "number of the specific revision you want to go to. So we can go down to add user table,",
    "textdich": ""
  },
  {
    "start": 40079.84,
    "end": 40086.32,
    "text": "we can go down to create post table, we can go down to any section we want. And it's really up",
    "textdich": ""
  },
  {
    "start": 40086.32,
    "end": 40092.48,
    "text": "to you. And so let's say this time, let's just go all the way down to, let's go down to add user",
    "textdich": ""
  },
  {
    "start": 40092.48,
    "end": 40102.88,
    "text": "table. So whatever revision this is, we can do that. Alright, and so it deleted a whole bunch of",
    "textdich": ""
  },
  {
    "start": 40102.88,
    "end": 40107.12,
    "text": "stuff. It looks like it deleted the last few columns that we just added, as well as the foreign",
    "textdich": ""
  },
  {
    "start": 40107.12,
    "end": 40114.8,
    "text": "key constraint. And so now, if we refresh these tables, you can see that posts, it doesn't have",
    "textdich": ""
  },
  {
    "start": 40114.8,
    "end": 40125.04,
    "text": "the extra columns we added. And the constraints foreign key no longer exist. But fortunately,",
    "textdich": ""
  },
  {
    "start": 40125.04,
    "end": 40131.12,
    "text": "we can upgrade to a newer version to one of the more recent versions. So I can do a limbic upgrade",
    "textdich": ""
  },
  {
    "start": 40135.04,
    "end": 40140.64,
    "text": "plus one. So if I do this, it's going to go up one newer revision. So right now we're at the",
    "textdich": ""
  },
  {
    "start": 40140.64,
    "end": 40145.6,
    "text": "add user table. And if you forget wherever you are, you can just do a limbic current.",
    "textdich": ""
  },
  {
    "start": 40147.52,
    "end": 40151.92,
    "text": "Alright, so we're on three to F five, two. And so if I do an upgrade,",
    "textdich": ""
  },
  {
    "start": 40154.72,
    "end": 40162.32,
    "text": "right, we're gonna go up to I think it's this one. Because you can see that in this one,",
    "textdich": ""
  },
  {
    "start": 40162.88,
    "end": 40168.0,
    "text": "this revision is 296. But the previous revision is 252, which is the one we're currently on.",
    "textdich": ""
  },
  {
    "start": 40168.0,
    "end": 40178.16,
    "text": "So I can do a limbic upgrade plus one. Alright, and so now we've added the foreign key. If I do a",
    "textdich": ""
  },
  {
    "start": 40178.16,
    "end": 40187.04,
    "text": "limbic current, we can see that we're on 296. And then if I just do a limbic upgrade, a limbic heads,",
    "textdich": ""
  },
  {
    "start": 40187.04,
    "end": 40192.64,
    "text": "it's going to show us whichever one's latest one, which is five b seven. So we can just upgrade",
    "textdich": ""
  },
  {
    "start": 40192.64,
    "end": 40202.24,
    "text": "directly to that by doing head. The last thing that we have to do now",
    "textdich": ""
  },
  {
    "start": 40204.32,
    "end": 40209.76,
    "text": "is generate the votes table, but I'm not going to manually create it myself this time. Instead,",
    "textdich": ""
  },
  {
    "start": 40209.76,
    "end": 40214.64,
    "text": "I'm going to make use of the auto generate feature. So this is what I was talking about earlier,",
    "textdich": ""
  },
  {
    "start": 40214.64,
    "end": 40220.64,
    "text": "how we can use a limbic to be intelligent enough to figure out what exactly is missing",
    "textdich": ""
  },
  {
    "start": 40220.64,
    "end": 40225.04,
    "text": "from our Postgres database and figure out what needs to be created. And the way it actually does",
    "textdich": ""
  },
  {
    "start": 40225.04,
    "end": 40229.6,
    "text": "that is it takes a look at all at all of our models. So it's going to import all of our SQL",
    "textdich": ""
  },
  {
    "start": 40229.6,
    "end": 40233.52,
    "text": "alchemy models. And based off of the columns that we have set here, it's going to figure out what",
    "textdich": ""
  },
  {
    "start": 40233.52,
    "end": 40238.72,
    "text": "our Postgres databases is supposed to look like. And regardless of what the our database is,",
    "textdich": ""
  },
  {
    "start": 40239.44,
    "end": 40243.76,
    "text": "in its current state, we don't need to actually delete everything and build it from scratch.",
    "textdich": ""
  },
  {
    "start": 40243.76,
    "end": 40249.12,
    "text": "Instead, a limbic is going to be intelligent enough to figure out what columns are missing,",
    "textdich": ""
  },
  {
    "start": 40249.12,
    "end": 40253.36,
    "text": "what tables are missing, what extra columns do we currently have that we may need to remove,",
    "textdich": ""
  },
  {
    "start": 40253.36,
    "end": 40257.44,
    "text": "and it's going to figure out what's different between SQL alchemy models in our Postgres",
    "textdich": ""
  },
  {
    "start": 40257.44,
    "end": 40262.48,
    "text": "database, and it's going to make the necessary changes for us. And so the way to do that,",
    "textdich": ""
  },
  {
    "start": 40262.48,
    "end": 40266.32,
    "text": "and first of all, I guess, just to kind of reiterate, the reason we can do that is because",
    "textdich": ""
  },
  {
    "start": 40266.32,
    "end": 40274.32,
    "text": "we imported the models, and then we passed it into this target metadata. So let's run a limbic.",
    "textdich": ""
  },
  {
    "start": 40274.32,
    "end": 40279.44,
    "text": "And we'll do revision. But if we do dash dash help, you'll see that we're going to use one of the",
    "textdich": ""
  },
  {
    "start": 40279.44,
    "end": 40285.12,
    "text": "flags that we have never used before, which is the dash dash auto generate. So we'll do dash dash",
    "textdich": ""
  },
  {
    "start": 40285.12,
    "end": 40294.64,
    "text": "auto generate. And then we will send a message once again, we'll say add votes about auto vote,",
    "textdich": ""
  },
  {
    "start": 40295.84,
    "end": 40300.56,
    "text": "maybe, because it's auto generated. And I know it's going to add the votes table,",
    "textdich": ""
  },
  {
    "start": 40300.56,
    "end": 40307.92,
    "text": "because that should be the only difference that we have. So we'll run that. And so if I go to auto",
    "textdich": ""
  },
  {
    "start": 40307.92,
    "end": 40314.4,
    "text": "vote, let's take a look at the changes it's going to make. And so you can see here, the changes",
    "textdich": ""
  },
  {
    "start": 40314.4,
    "end": 40318.08,
    "text": "where it looks like it's going to create the votes table, like I predicted, it's creating the two",
    "textdich": ""
  },
  {
    "start": 40318.08,
    "end": 40322.64,
    "text": "columns, and then it's going to add the primary key constraint as well as the two foreign keys",
    "textdich": ""
  },
  {
    "start": 40322.64,
    "end": 40326.48,
    "text": "as well. And it's going to even add in all of the on delete properties and things like that.",
    "textdich": ""
  },
  {
    "start": 40326.48,
    "end": 40337.68,
    "text": "All right, and so all we got to do now is do an alembic upgrade head. And now if I refresh this,",
    "textdich": ""
  },
  {
    "start": 40337.68,
    "end": 40347.2,
    "text": "and go to votes, and properties, right, we should have the two columns, and then our constraints",
    "textdich": ""
  },
  {
    "start": 40347.2,
    "end": 40354.64,
    "text": "and foreign keys look pretty good, everything looks set. And so that's how easy it was. So no matter",
    "textdich": ""
  },
  {
    "start": 40354.64,
    "end": 40359.68,
    "text": "what state your databases at any point in time, you can all you can always do the auto generate",
    "textdich": ""
  },
  {
    "start": 40359.68,
    "end": 40366.0,
    "text": "functionality to get it back to a state that your code expects it to be. And the best part about",
    "textdich": ""
  },
  {
    "start": 40366.0,
    "end": 40371.76,
    "text": "this is moving forward. Let's say I want to go back to my models and I want to change something.",
    "textdich": ""
  },
  {
    "start": 40373.44,
    "end": 40376.56,
    "text": "So I've got my user model this time, I'm going to add that phone number",
    "textdich": ""
  },
  {
    "start": 40376.56,
    "end": 40388.64,
    "text": "column. And this is going to be string. Alright, so any changes we make, even on a table that",
    "textdich": ""
  },
  {
    "start": 40388.64,
    "end": 40397.6,
    "text": "already exists, what we can do now is I can do a revision auto generate. Here, I can just call it",
    "textdich": ""
  },
  {
    "start": 40397.6,
    "end": 40406.8,
    "text": "add phone number. Alright, and then if we go take a look at that, we can see that a look, we added",
    "textdich": ""
  },
  {
    "start": 40406.8,
    "end": 40412.32,
    "text": "our phone number column. And so the only thing else we have to do is do an alembic upgrade head,",
    "textdich": ""
  },
  {
    "start": 40412.32,
    "end": 40417.68,
    "text": "and it's going to push out those changes. So let's refresh this, and let's just double check.",
    "textdich": ""
  },
  {
    "start": 40419.2,
    "end": 40425.68,
    "text": "We go to users now properties, we can see phone number column is now set. And I think that's",
    "textdich": ""
  },
  {
    "start": 40425.68,
    "end": 40432.08,
    "text": "pretty much going to wrap up everything I wanted to cover from alembic. So moving forward, now that",
    "textdich": ""
  },
  {
    "start": 40432.08,
    "end": 40437.36,
    "text": "we have alembic, we no longer actually need this command in our main.py file. This is the command",
    "textdich": ""
  },
  {
    "start": 40437.36,
    "end": 40442.56,
    "text": "that told SQL alchemy to run the create statements so that it generated all of the tables when it",
    "textdich": ""
  },
  {
    "start": 40442.56,
    "end": 40448.16,
    "text": "first started up. But since we have alembic now, you no longer need the this command. However,",
    "textdich": ""
  },
  {
    "start": 40448.16,
    "end": 40451.6,
    "text": "if you want to keep it in, it's not really going to break anything. It just depends on",
    "textdich": ""
  },
  {
    "start": 40451.6,
    "end": 40456.0,
    "text": "how you want things to work. Because if it does create the tables for you, then your first",
    "textdich": ""
  },
  {
    "start": 40456.0,
    "end": 40461.04,
    "text": "alembic migration isn't going to have to do anything because everything is already there.",
    "textdich": ""
  },
  {
    "start": 40461.04,
    "end": 40464.72,
    "text": "But I'm going to leave this commented out moving forward, because I don't really need it.",
    "textdich": ""
  },
  {
    "start": 40465.52,
    "end": 40470.16,
    "text": "And it's really up to you guys for what you guys want to do. For the most part throughout this",
    "textdich": ""
  },
  {
    "start": 40470.16,
    "end": 40475.12,
    "text": "course, we've been testing our API by sending a request from Postman. And Postman is a great tool,",
    "textdich": ""
  },
  {
    "start": 40475.12,
    "end": 40478.72,
    "text": "but there's one thing to note. And that is that when you send a request from Postman,",
    "textdich": ""
  },
  {
    "start": 40478.72,
    "end": 40482.32,
    "text": "you're actually sending a request from your own computer. And it's important to understand this",
    "textdich": ""
  },
  {
    "start": 40482.32,
    "end": 40488.08,
    "text": "because your API can get requests from different types of devices. You can get a request from a",
    "textdich": ""
  },
  {
    "start": 40488.08,
    "end": 40492.64,
    "text": "computer or a server, whether that's through Postman, or even through curl. If you've ever",
    "textdich": ""
  },
  {
    "start": 40492.64,
    "end": 40495.84,
    "text": "used curl, it's essentially doing the same thing that Postman is doing. It just doesn't have a nice",
    "textdich": ""
  },
  {
    "start": 40495.84,
    "end": 40499.92,
    "text": "little GUI can also get requests from mobile devices. But more importantly, you can get",
    "textdich": ""
  },
  {
    "start": 40499.92,
    "end": 40504.48,
    "text": "requests from a web browser. So when a web browser sends a request, you know, using JavaScript,",
    "textdich": ""
  },
  {
    "start": 40504.48,
    "end": 40508.64,
    "text": "fetch API, there's going to be a slightly different behavior that we have to account for,",
    "textdich": ""
  },
  {
    "start": 40508.64,
    "end": 40512.56,
    "text": "which we can't take into consideration when sending requests with Postman because Postman",
    "textdich": ""
  },
  {
    "start": 40512.56,
    "end": 40516.16,
    "text": "isn't a web browser. So what I'm going to do is I'm going to show you exactly what happens when",
    "textdich": ""
  },
  {
    "start": 40516.16,
    "end": 40522.24,
    "text": "we send a request from a web browser instead of our own computer using Postman. So what I want",
    "textdich": ""
  },
  {
    "start": 40522.24,
    "end": 40526.88,
    "text": "you guys to do is open up your web browser and specifically go to google.com. It's important",
    "textdich": ""
  },
  {
    "start": 40526.88,
    "end": 40531.44,
    "text": "that you go to google.com, or technically, this is going to work on any website, but I need you",
    "textdich": ""
  },
  {
    "start": 40531.44,
    "end": 40536.88,
    "text": "to actually go to a specific website like google.com. And then I want you to right click on the web",
    "textdich": ""
  },
  {
    "start": 40536.88,
    "end": 40541.12,
    "text": "browser and just hit inspect. So this is going to open up the Chrome developer tools. And if you",
    "textdich": ""
  },
  {
    "start": 40541.12,
    "end": 40546.64,
    "text": "are too familiar with it, don't worry, it's just a it's a built in tool to that we have in Chrome",
    "textdich": ""
  },
  {
    "start": 40546.64,
    "end": 40551.84,
    "text": "or any web browser that allows you to make it makes it easier as a web developer to kind of",
    "textdich": ""
  },
  {
    "start": 40551.84,
    "end": 40558.64,
    "text": "troubleshoot things. But what we can do is if you go to console, we can actually send an API request",
    "textdich": ""
  },
  {
    "start": 40558.64,
    "end": 40565.44,
    "text": "to our API from google.com or from our web browser, which is on the google.com domain at the moment.",
    "textdich": ""
  },
  {
    "start": 40566.48,
    "end": 40569.84,
    "text": "And so I want you to just type this in, we're going to say fetch. So this is how you perform",
    "textdich": ""
  },
  {
    "start": 40569.84,
    "end": 40577.2,
    "text": "an API request from the web browser level. And we're going to send a request to our past API.",
    "textdich": ""
  },
  {
    "start": 40577.2,
    "end": 40583.04,
    "text": "So that's going to be hosted on HTTP colon slash slash local host, colon 8000.",
    "textdich": ""
  },
  {
    "start": 40583.04,
    "end": 40589.04,
    "text": "And then just type in then. So don't worry too much about this, but it technically returns a",
    "textdich": ""
  },
  {
    "start": 40589.04,
    "end": 40602.08,
    "text": "promise. So we have to resolve the promise we just say res res dot JSON. And then do another then",
    "textdich": ""
  },
  {
    "start": 40602.08,
    "end": 40609.92,
    "text": "and just say console dot log. And I forgot one bracket right here. And so all this is doing is",
    "textdich": ""
  },
  {
    "start": 40609.92,
    "end": 40614.72,
    "text": "it's sending a request to the root URL of our API. And then it's going to print out the contents of",
    "textdich": ""
  },
  {
    "start": 40614.72,
    "end": 40619.76,
    "text": "whatever we get back from the server. So when I run this, I want you to notice something we get an",
    "textdich": ""
  },
  {
    "start": 40619.76,
    "end": 40626.48,
    "text": "error. It says access to fetch local host, colon 8000 from origin, and then it has google.com here",
    "textdich": ""
  },
  {
    "start": 40626.48,
    "end": 40632.48,
    "text": "has been blocked by course policy. So what is happening here? Why is it that I can't send a request",
    "textdich": ""
  },
  {
    "start": 40632.48,
    "end": 40637.52,
    "text": "from the web browser? But if I go to postman, and I just create a quick new request,",
    "textdich": ""
  },
  {
    "start": 40637.52,
    "end": 40648.96,
    "text": "we can just go straight to URL. It resolves just fine. Well, it has to do with this course policy.",
    "textdich": ""
  },
  {
    "start": 40648.96,
    "end": 40653.52,
    "text": "So in this lesson, we're going to take a look at what exactly this course policy is, and what we",
    "textdich": ""
  },
  {
    "start": 40653.52,
    "end": 40659.6,
    "text": "can do to ultimately resolve this issue. So what exactly is course course is short for cross origin",
    "textdich": ""
  },
  {
    "start": 40659.6,
    "end": 40665.36,
    "text": "resource sharing. And so course allows you to make requests from a web browser on one domain",
    "textdich": ""
  },
  {
    "start": 40665.36,
    "end": 40670.64,
    "text": "to a server on a different domain. And by default, you know, when you configure an API, whether it's",
    "textdich": ""
  },
  {
    "start": 40670.64,
    "end": 40677.12,
    "text": "in fast API, or any other framework or language, you will only be allowed to send requests from my",
    "textdich": ""
  },
  {
    "start": 40677.12,
    "end": 40683.6,
    "text": "web browser running on the same exact domain as your server. And so what exactly do I mean by that?",
    "textdich": ""
  },
  {
    "start": 40683.6,
    "end": 40689.2,
    "text": "Well, if our API is hosted on google.com, and our and our website is hosted on eBay.com,",
    "textdich": ""
  },
  {
    "start": 40689.2,
    "end": 40695.6,
    "text": "eBay.com, by default, cannot send a request to an API running on a different domain like google.com,",
    "textdich": ""
  },
  {
    "start": 40695.6,
    "end": 40701.92,
    "text": "it's going to get blocked by cores. However, if our web, if our website was also running on google.com,",
    "textdich": ""
  },
  {
    "start": 40701.92,
    "end": 40707.6,
    "text": "and our API was also running on google.com, then they'd be able to talk just fine by default.",
    "textdich": ""
  },
  {
    "start": 40707.6,
    "end": 40714.08,
    "text": "And just to prove that to you guys, if we go to our web browser and go to localhost colon 8000,",
    "textdich": ""
  },
  {
    "start": 40714.08,
    "end": 40719.68,
    "text": "you know, which is the the URL that our applications currently running on, you can see that I get a",
    "textdich": ""
  },
  {
    "start": 40719.68,
    "end": 40724.64,
    "text": "response back. So our web browser was able to make and by the way, when I when I did this, right,",
    "textdich": ""
  },
  {
    "start": 40724.64,
    "end": 40729.68,
    "text": "it did the same thing as you know, going into Chrome Developer Tools, and actually sending a request.",
    "textdich": ""
  },
  {
    "start": 40729.68,
    "end": 40733.92,
    "text": "And just in case you don't believe me, I'm just going to actually just show you guys even on here.",
    "textdich": ""
  },
  {
    "start": 40733.92,
    "end": 40739.52,
    "text": "If I paste it, you can see that it was able to resolve and we can see the Hello world. So the",
    "textdich": ""
  },
  {
    "start": 40739.52,
    "end": 40744.64,
    "text": "reason why it works on this website is because this is the same exact URL or domain name that",
    "textdich": ""
  },
  {
    "start": 40744.64,
    "end": 40750.48,
    "text": "our API is running on, right, our API is running on localhost colon 8000. So by default, they're",
    "textdich": ""
  },
  {
    "start": 40750.48,
    "end": 40757.36,
    "text": "able to talk to one another only when the web browser domain is on the same exact domain as the",
    "textdich": ""
  },
  {
    "start": 40757.36,
    "end": 40762.88,
    "text": "API is domain. So to fix this, you know, if you did want to allow people from other domains to talk",
    "textdich": ""
  },
  {
    "start": 40762.88,
    "end": 40767.52,
    "text": "to your API, what you can do is take a look at the fast API documentation and just search for",
    "textdich": ""
  },
  {
    "start": 40767.52,
    "end": 40773.76,
    "text": "cores cross origin resource sharing. And you'll see that setting this up is really simple. So the",
    "textdich": ""
  },
  {
    "start": 40773.76,
    "end": 40778.8,
    "text": "first thing that we have to do is from fast API middleware cores, we're going to import cores",
    "textdich": ""
  },
  {
    "start": 40778.8,
    "end": 40791.28,
    "text": "middleware. All right, and then just copy this section right here. And I'll explain line by line",
    "textdich": ""
  },
  {
    "start": 40791.28,
    "end": 40798.32,
    "text": "exactly what each one's doing. And so under the app right here, we'll just paste this in. And",
    "textdich": ""
  },
  {
    "start": 40798.32,
    "end": 40801.36,
    "text": "it's gonna throw a little error here, but we'll come back, you can actually delete that and change",
    "textdich": ""
  },
  {
    "start": 40801.36,
    "end": 40806.88,
    "text": "that to a an array for now. But what we want to do is first of all, we have to pass in the middleware",
    "textdich": ""
  },
  {
    "start": 40806.88,
    "end": 40813.2,
    "text": "and middleware is a term that's used in most web frameworks, because it's basically a function that",
    "textdich": ""
  },
  {
    "start": 40813.2,
    "end": 40819.12,
    "text": "runs before every request. So if someone sends a request to our app, before it actually goes through",
    "textdich": ""
  },
  {
    "start": 40819.12,
    "end": 40823.52,
    "text": "to our app, and before it actually goes through all of these routers, it'll actually go through",
    "textdich": ""
  },
  {
    "start": 40823.52,
    "end": 40829.04,
    "text": "the middleware and then our middleware can perform some sort of operation. But what we want to do is",
    "textdich": ""
  },
  {
    "start": 40829.04,
    "end": 40834.0,
    "text": "first of all, we have to specify the origins that we want to allow. So what domains should be able",
    "textdich": ""
  },
  {
    "start": 40834.0,
    "end": 40840.08,
    "text": "to talk to our API? Because right now, it's only it's no domain, only if it's running on the same",
    "textdich": ""
  },
  {
    "start": 40840.08,
    "end": 40847.04,
    "text": "exact domain, are you able to talk to our API. So the way we can do is we can put in a will create",
    "textdich": ""
  },
  {
    "start": 40847.04,
    "end": 40853.12,
    "text": "a list called our origins. And I'll say origins equals and it's just going to be a list. And here",
    "textdich": ""
  },
  {
    "start": 40853.12,
    "end": 40859.2,
    "text": "we're going to perform provide a list of all of the domains that can talk to our API. And before",
    "textdich": ""
  },
  {
    "start": 40859.2,
    "end": 40866.24,
    "text": "we fill that in, I just want to quickly talk about the other three as well. So our course policy can",
    "textdich": ""
  },
  {
    "start": 40866.24,
    "end": 40871.76,
    "text": "be pretty granular. So not only can we allow specific domains, we can also allow only specific",
    "textdich": ""
  },
  {
    "start": 40871.76,
    "end": 40877.52,
    "text": "HTTP methods. So if we were building like a public API, where people can just retrieve data,",
    "textdich": ""
  },
  {
    "start": 40877.52,
    "end": 40881.84,
    "text": "we may not want them to allow, we may not want to allow them to send post requests,",
    "textdich": ""
  },
  {
    "start": 40882.56,
    "end": 40886.08,
    "text": "and put requests and delete requests. So we could potentially just allow get requests.",
    "textdich": ""
  },
  {
    "start": 40886.64,
    "end": 40890.8,
    "text": "And then we can even allow specific headers as well. But for now, we're just going to allow",
    "textdich": ""
  },
  {
    "start": 40890.8,
    "end": 40894.96,
    "text": "all headers and all methods. And we're going to just kind of drill down based off of what",
    "textdich": ""
  },
  {
    "start": 40894.96,
    "end": 40900.0,
    "text": "origins can talk to us. And so, you know, if we want Google to be able to talk to us,",
    "textdich": ""
  },
  {
    "start": 40900.0,
    "end": 40904.88,
    "text": "I can just say HTTPS colon slash slash www dot google.com.",
    "textdich": ""
  },
  {
    "start": 40908.64,
    "end": 40912.72,
    "text": "And so now this course policy is set to allow people from google.com to talk to us.",
    "textdich": ""
  },
  {
    "start": 40916.24,
    "end": 40920.4,
    "text": "And so if I go back to google.com, I just hit the up arrow so I can run this command again,",
    "textdich": ""
  },
  {
    "start": 40921.28,
    "end": 40924.8,
    "text": "you'll see that I do successfully get a response back and there's no core there.",
    "textdich": ""
  },
  {
    "start": 40925.52,
    "end": 40929.68,
    "text": "However, if I go to a different website, so you know, some website on a different domain,",
    "textdich": ""
  },
  {
    "start": 40929.68,
    "end": 40935.28,
    "text": "like youtube.com. And then we go and then we send the same exact request from the console.",
    "textdich": ""
  },
  {
    "start": 40938.64,
    "end": 40943.52,
    "text": "We once again get the course error. And that's because in our in our list of origins,",
    "textdich": ""
  },
  {
    "start": 40943.52,
    "end": 40949.12,
    "text": "we're not providing www dot com dot youtube.com. So if you wanted to also allow youtube.com,",
    "textdich": ""
  },
  {
    "start": 40949.12,
    "end": 40960.64,
    "text": "then we'd have to do HTTPS colon slash slash www dot youtube.com. For now, I hit the up arrow.",
    "textdich": ""
  },
  {
    "start": 40960.64,
    "end": 40965.36,
    "text": "We can see that it properly resolves. So you just have to provide the list of",
    "textdich": ""
  },
  {
    "start": 40966.0,
    "end": 40972.56,
    "text": "URLs that can talk to your API. And if you want to set up a public API so that everyone can access",
    "textdich": ""
  },
  {
    "start": 40972.56,
    "end": 40978.16,
    "text": "it, then your origins would just be a wild card. So this means every single domain,",
    "textdich": ""
  },
  {
    "start": 40978.16,
    "end": 40984.88,
    "text": "or every single origin. But if you if your API is being configured for a specific web app,",
    "textdich": ""
  },
  {
    "start": 40984.88,
    "end": 40989.6,
    "text": "then you definitely want to make sure that you provide a strict list of origins. So just",
    "textdich": ""
  },
  {
    "start": 40990.24,
    "end": 40994.4,
    "text": "whatever domain your, your web app is running on so that no one else can, you know,",
    "textdich": ""
  },
  {
    "start": 40995.28,
    "end": 41000.48,
    "text": "accidentally reach our application for some reason or another. It's just security best practices to",
    "textdich": ""
  },
  {
    "start": 41000.48,
    "end": 41007.84,
    "text": "really narrow down the scope of the origins that can actually access your API. For now,",
    "textdich": ""
  },
  {
    "start": 41007.84,
    "end": 41012.32,
    "text": "I'm just going to leave this as set to everyone so that you know, when we actually go to deploy this,",
    "textdich": ""
  },
  {
    "start": 41012.32,
    "end": 41017.04,
    "text": "they'll be a little bit easier from a testing purpose. But feel free to update this accordingly.",
    "textdich": ""
  },
  {
    "start": 41018.4,
    "end": 41022.32,
    "text": "In this lesson, we're going to focus on setting up Git for our projects so that we can start",
    "textdich": ""
  },
  {
    "start": 41022.32,
    "end": 41027.04,
    "text": "tracking our changes, as well as set up a remote repository to store all of our code,",
    "textdich": ""
  },
  {
    "start": 41027.04,
    "end": 41032.0,
    "text": "this is going to make the whole deployment process a whole lot easier. But before we set up Git,",
    "textdich": ""
  },
  {
    "start": 41032.0,
    "end": 41036.0,
    "text": "there's a couple of things that we need to do. Because when you check your files into Git,",
    "textdich": ""
  },
  {
    "start": 41036.0,
    "end": 41040.8,
    "text": "by default, it's going to check in all of your files. And there's going to be some files that",
    "textdich": ""
  },
  {
    "start": 41040.8,
    "end": 41046.16,
    "text": "you don't want to be uploaded to a remote repository, or even into your Git in general.",
    "textdich": ""
  },
  {
    "start": 41046.16,
    "end": 41053.2,
    "text": "And so we have to create a file called a git ignore file. And so if you go to the main root,",
    "textdich": ""
  },
  {
    "start": 41053.68,
    "end": 41058.32,
    "text": "root folder of your project, I want you to create a file called dot git ignore. And it's important",
    "textdich": ""
  },
  {
    "start": 41058.32,
    "end": 41063.44,
    "text": "that you put the dot in front of it. So it's dot git ignore. And so this file is going to tell git,",
    "textdich": ""
  },
  {
    "start": 41063.44,
    "end": 41069.04,
    "text": "what are all of the files and folders we don't want upload to get. And so some of the common",
    "textdich": ""
  },
  {
    "start": 41069.04,
    "end": 41074.72,
    "text": "things that you would not want to be tracked within Git is going to be your dot ENV file.",
    "textdich": ""
  },
  {
    "start": 41074.72,
    "end": 41078.08,
    "text": "So this is going to be all of your environment variables. Obviously, you don't want to check",
    "textdich": ""
  },
  {
    "start": 41078.08,
    "end": 41082.56,
    "text": "those in or then, you know, if this is part of a public repository, then anyone can see those.",
    "textdich": ""
  },
  {
    "start": 41083.6,
    "end": 41087.6,
    "text": "But also on top of that, you'll see all of these random py cache, these underscore underscore",
    "textdich": ""
  },
  {
    "start": 41087.6,
    "end": 41091.28,
    "text": "py cache folders. So I'll go ahead and add that in there as well, because we don't actually need",
    "textdich": ""
  },
  {
    "start": 41091.28,
    "end": 41096.56,
    "text": "to check that into Git. And then finally, we have our folder, which contains our virtual environment,",
    "textdich": ""
  },
  {
    "start": 41096.56,
    "end": 41101.6,
    "text": "we don't want to check that in as well, just because we have no idea if someone else who",
    "textdich": ""
  },
  {
    "start": 41101.6,
    "end": 41106.72,
    "text": "wants to clone our repository is going to be using a virtual environment. And if the if they are,",
    "textdich": ""
  },
  {
    "start": 41106.72,
    "end": 41111.6,
    "text": "then they can create one on their own, there's no need for us to actually upload our virtual",
    "textdich": ""
  },
  {
    "start": 41111.6,
    "end": 41116.88,
    "text": "environment, it just wouldn't make sense. And on top of that, our virtual environment contains all",
    "textdich": ""
  },
  {
    "start": 41116.88,
    "end": 41121.92,
    "text": "of the third party libraries that we've installed. So all of the different packages we installed",
    "textdich": ""
  },
  {
    "start": 41121.92,
    "end": 41126.8,
    "text": "through pip, including fast API itself. So all of the code of fast API is within that virtual",
    "textdich": ""
  },
  {
    "start": 41126.8,
    "end": 41130.48,
    "text": "environment folder. And so there's no need to actually upload all of that, because that's a lot",
    "textdich": ""
  },
  {
    "start": 41130.48,
    "end": 41135.2,
    "text": "of a lot of files that actually take up a decent amount of space, and it just wouldn't be efficient",
    "textdich": ""
  },
  {
    "start": 41135.2,
    "end": 41142.72,
    "text": "to actually upload those to Git. However, this does create one bit of an issue. Because if we",
    "textdich": ""
  },
  {
    "start": 41142.72,
    "end": 41147.92,
    "text": "clone the repository at this point, right, we have no idea what packages we need to install,",
    "textdich": ""
  },
  {
    "start": 41147.92,
    "end": 41152.96,
    "text": "because our virtual environment didn't get uploaded with it. So we need a way for other users,",
    "textdich": ""
  },
  {
    "start": 41152.96,
    "end": 41158.0,
    "text": "other people on our team to know what packages and dependencies we need our application,",
    "textdich": ""
  },
  {
    "start": 41158.0,
    "end": 41161.68,
    "text": "so that our application actually works. And so the way that we actually do this is well,",
    "textdich": ""
  },
  {
    "start": 41161.68,
    "end": 41166.16,
    "text": "first of all, before we even proceed, go ahead and copy this into your git ignore file. And make",
    "textdich": ""
  },
  {
    "start": 41166.16,
    "end": 41170.56,
    "text": "sure you have this before you do anything else. Because once certain files get checked in,",
    "textdich": ""
  },
  {
    "start": 41170.56,
    "end": 41176.24,
    "text": "it's very hard to get them removed. But after this, what we want to do is we want to create",
    "textdich": ""
  },
  {
    "start": 41176.24,
    "end": 41181.68,
    "text": "one more file, and open up your terminal. And what we're gonna do is type in pip freeze.",
    "textdich": ""
  },
  {
    "start": 41183.12,
    "end": 41187.12,
    "text": "So pip freeze is going to dump out all of the different packages and libraries that we have",
    "textdich": ""
  },
  {
    "start": 41187.12,
    "end": 41193.12,
    "text": "installed, as well as the specific versions. And so this is the information that we want to upload",
    "textdich": ""
  },
  {
    "start": 41193.12,
    "end": 41199.28,
    "text": "to get so that if anyone else clones our repository, they'll know the exact versions of every package",
    "textdich": ""
  },
  {
    "start": 41199.28,
    "end": 41203.68,
    "text": "they need to install. So we're going to do is we're just going to take this output, and we're",
    "textdich": ""
  },
  {
    "start": 41203.68,
    "end": 41210.08,
    "text": "going to pipe it to a file. And the file name is going to be called requirements.txt. So this is",
    "textdich": ""
  },
  {
    "start": 41210.08,
    "end": 41215.84,
    "text": "standard convention. With any Python application, you want to create a requirements.txt file,",
    "textdich": ""
  },
  {
    "start": 41215.84,
    "end": 41219.68,
    "text": "that's going to contain the version of all of the different packages that you have installed.",
    "textdich": ""
  },
  {
    "start": 41220.24,
    "end": 41224.56,
    "text": "And so if we check this into Git, now, then anyone else can just take a look at a requirements.txt",
    "textdich": ""
  },
  {
    "start": 41224.56,
    "end": 41229.52,
    "text": "file, and then actually install dependencies based off of what's in this file. And so for anyone else",
    "textdich": ""
  },
  {
    "start": 41229.52,
    "end": 41234.48,
    "text": "that clones our repository, all they have to do, instead of going one by one installing these,",
    "textdich": ""
  },
  {
    "start": 41234.48,
    "end": 41241.12,
    "text": "they can just type in pip install dash R requirements dot txt. And that's going to install",
    "textdich": ""
  },
  {
    "start": 41241.12,
    "end": 41244.96,
    "text": "everything that's in this file. So this does simplify the process. And it prevents us from",
    "textdich": ""
  },
  {
    "start": 41244.96,
    "end": 41251.28,
    "text": "having to upload all of those third party packages into Git. But we've got everything set up at this",
    "textdich": ""
  },
  {
    "start": 41251.28,
    "end": 41255.76,
    "text": "point, we've got the Git ignore file, and we've got the requirements dot txt. So what we'd need",
    "textdich": ""
  },
  {
    "start": 41255.76,
    "end": 41262.32,
    "text": "to do now is actually set up and install Git on our local machine. If you don't already have Git",
    "textdich": ""
  },
  {
    "start": 41262.32,
    "end": 41266.16,
    "text": "installed, then in this lesson, we're going to focus on getting installed on your local machine.",
    "textdich": ""
  },
  {
    "start": 41266.16,
    "end": 41269.76,
    "text": "So just search for Git. And then you can either go to the main page, or you can go straight to",
    "textdich": ""
  },
  {
    "start": 41269.76,
    "end": 41273.04,
    "text": "the downloads page. So I'm just going to select the downloads page. And then here, you're going",
    "textdich": ""
  },
  {
    "start": 41273.04,
    "end": 41277.12,
    "text": "to see the different operating systems we can install Git on. And so just go ahead and select",
    "textdich": ""
  },
  {
    "start": 41277.12,
    "end": 41280.96,
    "text": "your respective operating system. I'm on a Windows machine. But regardless of your operating system,",
    "textdich": ""
  },
  {
    "start": 41280.96,
    "end": 41285.44,
    "text": "it's going to be a fairly similar procedure. So I'm going to select this, it's going to download",
    "textdich": ""
  },
  {
    "start": 41285.44,
    "end": 41291.92,
    "text": "that. Alright, and then when the wizard opens, go ahead and select Next. Next here, you can leave",
    "textdich": ""
  },
  {
    "start": 41291.92,
    "end": 41300.08,
    "text": "everything default here as well. And here and here. Now, this is the one thing that we do have to",
    "textdich": ""
  },
  {
    "start": 41300.08,
    "end": 41305.92,
    "text": "change. So this is kind of a little bit of a nuisance at this point. But they used to call",
    "textdich": ""
  },
  {
    "start": 41305.92,
    "end": 41310.72,
    "text": "like the main branch, the master branch, but I guess people are offended by that. So now the",
    "textdich": ""
  },
  {
    "start": 41310.72,
    "end": 41316.0,
    "text": "new term for the main branches main. So go ahead and override the default branch and just change",
    "textdich": ""
  },
  {
    "start": 41316.0,
    "end": 41321.52,
    "text": "that to main. Because when you work on GitHub, they've already changed the default branch to be",
    "textdich": ""
  },
  {
    "start": 41321.52,
    "end": 41327.36,
    "text": "main. So we're gonna want to do the same thing. So hit Next. And then you can leave everything",
    "textdich": ""
  },
  {
    "start": 41327.36,
    "end": 41343.12,
    "text": "as default moving forward, there's a lot of windows to go through. And then it's going to",
    "textdich": ""
  },
  {
    "start": 41343.12,
    "end": 41351.68,
    "text": "proceed to install Git. All right, close that out. And then what you want to do is open up a new",
    "textdich": ""
  },
  {
    "start": 41351.68,
    "end": 41361.44,
    "text": "terminal and just type in Git dash dash version. And if it spits that out, that means you've got",
    "textdich": ""
  },
  {
    "start": 41361.44,
    "end": 41366.48,
    "text": "Git successfully installed. In this video, we're going to set up a remote repository so we can",
    "textdich": ""
  },
  {
    "start": 41366.48,
    "end": 41371.2,
    "text": "store all of our code on GitHub. And so if you don't already have an account on GitHub, go to the",
    "textdich": ""
  },
  {
    "start": 41371.2,
    "end": 41375.76,
    "text": "main GitHub page, just go to GitHub.com and just click Sign up, and then follow those instructions.",
    "textdich": ""
  },
  {
    "start": 41375.76,
    "end": 41380.0,
    "text": "And then once that's done, just log in and you should see something similar to this. Although",
    "textdich": ""
  },
  {
    "start": 41380.0,
    "end": 41383.04,
    "text": "you may not see an activity window if you just created a brand new account, because you won't",
    "textdich": ""
  },
  {
    "start": 41383.04,
    "end": 41389.2,
    "text": "have any repositories. But just look for a new button, a button to create a new repository,",
    "textdich": ""
  },
  {
    "start": 41389.2,
    "end": 41394.64,
    "text": "you can also go up here, I believe and select new repository. So let's like new. And then we have to",
    "textdich": ""
  },
  {
    "start": 41394.64,
    "end": 41398.56,
    "text": "give our repository name, you can give it any name you want. I'm just going to give it a dummy name.",
    "textdich": ""
  },
  {
    "start": 41398.56,
    "end": 41402.48,
    "text": "So this is going to be example fast API, but name it what after whatever your project is.",
    "textdich": ""
  },
  {
    "start": 41403.36,
    "end": 41407.6,
    "text": "Technically, I've already set up and get from my project, just so I can track all the changes",
    "textdich": ""
  },
  {
    "start": 41407.6,
    "end": 41411.28,
    "text": "I've made throughout the course. But I want to make sure that I can walk you through this if",
    "textdich": ""
  },
  {
    "start": 41411.28,
    "end": 41416.88,
    "text": "you've never done it before. You can give it an optional description. And then you can choose",
    "textdich": ""
  },
  {
    "start": 41416.88,
    "end": 41422.48,
    "text": "whether or not a repository is public or private. If it's public, anybody can see it. If it's private,",
    "textdich": ""
  },
  {
    "start": 41422.48,
    "end": 41426.64,
    "text": "then only you can see it, we're going to keep it as public. Don't worry, if you decide to change",
    "textdich": ""
  },
  {
    "start": 41426.64,
    "end": 41431.2,
    "text": "it in the future, you can change it to private. However, it does make a few things a little bit",
    "textdich": ""
  },
  {
    "start": 41431.2,
    "end": 41434.48,
    "text": "easier when it's public. So I'm going to leave this as public. And then we're going to leave",
    "textdich": ""
  },
  {
    "start": 41434.48,
    "end": 41439.6,
    "text": "all of these unchecked, they don't really matter. And we'll select Create repository. And then you'll",
    "textdich": ""
  },
  {
    "start": 41439.6,
    "end": 41443.44,
    "text": "see that it's going to give us a couple of steps to follow. So if we haven't already set up Git",
    "textdich": ""
  },
  {
    "start": 41443.44,
    "end": 41447.52,
    "text": "for our project, these are the instructions we're going to follow. And if we've already set up Git",
    "textdich": ""
  },
  {
    "start": 41447.52,
    "end": 41452.64,
    "text": "in our project folder, then we can follow these steps. However, you know, we haven't set up Git",
    "textdich": ""
  },
  {
    "start": 41452.64,
    "end": 41456.8,
    "text": "yet. So we're going to, for the most part, follow along here. But we're going to modify it just a",
    "textdich": ""
  },
  {
    "start": 41456.8,
    "end": 41460.8,
    "text": "little bit, because we don't need to run some of these commands. To go ahead and open up your",
    "textdich": ""
  },
  {
    "start": 41460.8,
    "end": 41465.84,
    "text": "project in VS code, like you normally do, then open up your terminal. And we're going to follow",
    "textdich": ""
  },
  {
    "start": 41465.84,
    "end": 41470.0,
    "text": "these steps. But we're going to ignore the first one, we don't need to read me for now. But we are",
    "textdich": ""
  },
  {
    "start": 41470.0,
    "end": 41474.24,
    "text": "going to do a Git in it, which is going to initialize Git for our project. And so make sure",
    "textdich": ""
  },
  {
    "start": 41474.24,
    "end": 41478.4,
    "text": "you're at the root directory of your project. So whatever this is called right here at the top,",
    "textdich": ""
  },
  {
    "start": 41478.4,
    "end": 41483.6,
    "text": "make sure that's where you're at. And just do a Git in it, that's going to initialize Git. And",
    "textdich": ""
  },
  {
    "start": 41483.6,
    "end": 41488.72,
    "text": "you may not see anything different about your folders. But I think it's because VS code actually",
    "textdich": ""
  },
  {
    "start": 41488.72,
    "end": 41493.84,
    "text": "hides the git folder. But when you actually did a git in it, if you open up this, your project",
    "textdich": ""
  },
  {
    "start": 41493.84,
    "end": 41498.48,
    "text": "directory, and you click on view here, and then make sure you select hidden items, you'll see that",
    "textdich": ""
  },
  {
    "start": 41498.48,
    "end": 41503.68,
    "text": "it created a dot git folder. So this is where it stores all of the git information. Then we're",
    "textdich": ""
  },
  {
    "start": 41503.68,
    "end": 41508.8,
    "text": "going to skip this git add read me instead, what we're going to do is we're going to run git add",
    "textdich": ""
  },
  {
    "start": 41509.44,
    "end": 41514.24,
    "text": "dash dash all. This is going to add all of the files that we have in our directory into git.",
    "textdich": ""
  },
  {
    "start": 41514.24,
    "end": 41517.36,
    "text": "All right, and you'll get a couple of warnings, potentially, don't worry about that.",
    "textdich": ""
  },
  {
    "start": 41517.36,
    "end": 41521.68,
    "text": "Those won't create any issues. Then we have to commit our changes. So anytime you add a file,",
    "textdich": ""
  },
  {
    "start": 41521.68,
    "end": 41527.68,
    "text": "you then have to commit it. So we'll say git commit dash m. So the dash m means we're going to provide",
    "textdich": ""
  },
  {
    "start": 41527.68,
    "end": 41532.4,
    "text": "a message. So you usually give a message for each commit to kind of describe what changes you're",
    "textdich": ""
  },
  {
    "start": 41532.4,
    "end": 41540.48,
    "text": "making. So we're just going to call this initial commit. All right. And you'll see that we probably",
    "textdich": ""
  },
  {
    "start": 41540.48,
    "end": 41544.16,
    "text": "get an error if this is the first time you've ever worked with Git. And that's okay. It's just",
    "textdich": ""
  },
  {
    "start": 41544.16,
    "end": 41549.2,
    "text": "telling us, hey, we need to set up our user for our account on this machine. So we're just going",
    "textdich": ""
  },
  {
    "start": 41549.2,
    "end": 41552.4,
    "text": "to run this command right here. And then we're just going to provide the email that we use to",
    "textdich": ""
  },
  {
    "start": 41552.4,
    "end": 41567.44,
    "text": "register for GitHub. But also get config dash dash global user dot email. All right, we set that and",
    "textdich": ""
  },
  {
    "start": 41567.44,
    "end": 41578.56,
    "text": "then it's telling us to also set our name. So we'll do that as well. Then we're going to run",
    "textdich": ""
  },
  {
    "start": 41578.56,
    "end": 41582.64,
    "text": "that same command, the git commit. So if you just hit the up arrow a couple of times, you'll get to",
    "textdich": ""
  },
  {
    "start": 41582.64,
    "end": 41588.8,
    "text": "that. Alright, so we've committed those changes, then what we need to do is we need to set what",
    "textdich": ""
  },
  {
    "start": 41588.8,
    "end": 41594.16,
    "text": "our branches. So here, this is just going to set our main branch to be called main. And so we can",
    "textdich": ""
  },
  {
    "start": 41594.16,
    "end": 41603.36,
    "text": "copy that, paste it into here. Then we have to set up a remote branch. So this is what's going to",
    "textdich": ""
  },
  {
    "start": 41603.36,
    "end": 41608.48,
    "text": "allow us to store all of our code on GitHub. So we're just saying, hey, listen, this is going to",
    "textdich": ""
  },
  {
    "start": 41608.48,
    "end": 41613.36,
    "text": "be the remote Git repository, and we just provide a URL to it. And so that if you take a look at the",
    "textdich": ""
  },
  {
    "start": 41613.36,
    "end": 41618.24,
    "text": "URL, it's going to match up with this. And in this case, we're naming it origin, you can technically",
    "textdich": ""
  },
  {
    "start": 41618.24,
    "end": 41624.48,
    "text": "call it anything you want. We'll add that. And then finally, we need to do a git push dash u",
    "textdich": ""
  },
  {
    "start": 41624.48,
    "end": 41628.96,
    "text": "origin main. And so this means we're actually going to push all of our code up to GitHub.",
    "textdich": ""
  },
  {
    "start": 41629.68,
    "end": 41634.24,
    "text": "And you'll see a pop up asking you to sign in. And there's a couple of things we can do,",
    "textdich": ""
  },
  {
    "start": 41634.24,
    "end": 41637.04,
    "text": "we can get a personal access token, or we can sign in with our browser.",
    "textdich": ""
  },
  {
    "start": 41639.2,
    "end": 41640.8,
    "text": "I'm just going to sign in with our browser.",
    "textdich": ""
  },
  {
    "start": 41640.8,
    "end": 41651.2,
    "text": "And we just like authorize right here. And says it's succeeded. So we should be able to go back.",
    "textdich": ""
  },
  {
    "start": 41651.2,
    "end": 41656.0,
    "text": "And we could see that a couple things change. So it looks like, well, that's our authentication. And",
    "textdich": ""
  },
  {
    "start": 41656.0,
    "end": 41661.12,
    "text": "then you can see that we're pushing all of this stuff up to GitHub. And so at this point, you're",
    "textdich": ""
  },
  {
    "start": 41661.12,
    "end": 41666.0,
    "text": "pretty much done all of your code is now stored in GitHub. And we can just verify that by going",
    "textdich": ""
  },
  {
    "start": 41666.0,
    "end": 41670.56,
    "text": "back to this page and just select the name of the repository again. And you'll see all of our",
    "textdich": ""
  },
  {
    "start": 41670.56,
    "end": 41676.48,
    "text": "core all of our code stored on GitHub now. So at this point, our repository is set up. And we can",
    "textdich": ""
  },
  {
    "start": 41676.48,
    "end": 41682.24,
    "text": "move on to deploying our application. In this lesson, we're going to take a look at the first",
    "textdich": ""
  },
  {
    "start": 41682.24,
    "end": 41685.76,
    "text": "of two deployment methods that we're going to cover in this course. So what we're going to do",
    "textdich": ""
  },
  {
    "start": 41685.76,
    "end": 41690.32,
    "text": "is we're going to deploy your application to a platform called Heroku. And the reason I wanted",
    "textdich": ""
  },
  {
    "start": 41690.32,
    "end": 41695.76,
    "text": "to make sure to have this as one of the deployment methods was that Heroku has a very generous free",
    "textdich": ""
  },
  {
    "start": 41695.76,
    "end": 41700.24,
    "text": "tier. And so we can create an account for free. And we can deploy our application absolutely",
    "textdich": ""
  },
  {
    "start": 41700.24,
    "end": 41705.84,
    "text": "for free without having to pay a single dollar. And we don't even have to provide our credit cards.",
    "textdich": ""
  },
  {
    "start": 41705.84,
    "end": 41709.92,
    "text": "And I wanted to make sure to add that just because I know for some of you guys, that isn't exactly",
    "textdich": ""
  },
  {
    "start": 41709.92,
    "end": 41713.52,
    "text": "an option. And I wanted to make sure that you can still deploy your application and show off to your",
    "textdich": ""
  },
  {
    "start": 41713.52,
    "end": 41718.16,
    "text": "friends and family what you have created. And you'll see that Heroku has made it very easy to",
    "textdich": ""
  },
  {
    "start": 41718.16,
    "end": 41722.64,
    "text": "deploy your application. And it's very easy to push out changes to your application. It's a",
    "textdich": ""
  },
  {
    "start": 41722.64,
    "end": 41727.68,
    "text": "fantastic platform. And I think you guys will learn a lot on how to actually deploy an application by",
    "textdich": ""
  },
  {
    "start": 41727.68,
    "end": 41731.92,
    "text": "making use of a platform like Heroku. So we'll take a look at how we can, you know, make use of",
    "textdich": ""
  },
  {
    "start": 41731.92,
    "end": 41736.64,
    "text": "Heroku learn about the Heroku CLI, so that we can push our application to the platform. And",
    "textdich": ""
  },
  {
    "start": 41736.64,
    "end": 41744.0,
    "text": "ultimately, have anyone be able to access our API. Heroku has a lot of really good tutorials on how",
    "textdich": ""
  },
  {
    "start": 41744.0,
    "end": 41748.32,
    "text": "to deploy applications on their platforms. And they've got one for Python as well. So if we go",
    "textdich": ""
  },
  {
    "start": 41748.32,
    "end": 41753.12,
    "text": "to Google, just search for Heroku Python, and the first result is going to be their tutorial,",
    "textdich": ""
  },
  {
    "start": 41753.12,
    "end": 41757.2,
    "text": "it's going to walk us step by step on how to actually deploy our application. But before we",
    "textdich": ""
  },
  {
    "start": 41757.2,
    "end": 41761.2,
    "text": "do that, there's a couple of things that we have to do. First of all, go ahead and create an account",
    "textdich": ""
  },
  {
    "start": 41761.2,
    "end": 41766.0,
    "text": "on Heroku if you don't if you haven't already done so. It's completely free. So just provide",
    "textdich": ""
  },
  {
    "start": 41766.0,
    "end": 41771.68,
    "text": "your email and so on. Then there's two other requirements we have to have get installed on",
    "textdich": ""
  },
  {
    "start": 41771.68,
    "end": 41776.48,
    "text": "our machine, which we've already done. And then finally, we have to install Heroku itself. So if",
    "textdich": ""
  },
  {
    "start": 41776.48,
    "end": 41781.44,
    "text": "you go to the setup section right here, you're going to see the installers for all of the different",
    "textdich": ""
  },
  {
    "start": 41781.44,
    "end": 41785.28,
    "text": "operating systems they support. So just select whichever operating system you have, and get the",
    "textdich": ""
  },
  {
    "start": 41785.28,
    "end": 41790.96,
    "text": "Heroku CLI installed on your machine. And after you get it installed, usually you have to close",
    "textdich": ""
  },
  {
    "start": 41790.96,
    "end": 41796.24,
    "text": "out any of your pre existing terminals and reopen them to actually be able to access the Heroku",
    "textdich": ""
  },
  {
    "start": 41796.24,
    "end": 41800.8,
    "text": "command. If you have VS code, a lot of times I've had to just close out VS code altogether,",
    "textdich": ""
  },
  {
    "start": 41800.8,
    "end": 41804.8,
    "text": "not just close the terminals, but actually close out the entire application, and then open it back",
    "textdich": ""
  },
  {
    "start": 41804.8,
    "end": 41809.92,
    "text": "up. But after you've done that, if you want to verify if Heroku was successfully installed,",
    "textdich": ""
  },
  {
    "start": 41809.92,
    "end": 41816.4,
    "text": "just go to your terminal and just type in Heroku dash dash version. And if it spits out a version,",
    "textdich": ""
  },
  {
    "start": 41816.4,
    "end": 41820.72,
    "text": "that means Heroku has been successfully installed. And after it's been installed,",
    "textdich": ""
  },
  {
    "start": 41820.72,
    "end": 41826.72,
    "text": "we want to log in. So we do Heroku login. And then you just press any key right here.",
    "textdich": ""
  },
  {
    "start": 41827.28,
    "end": 41832.48,
    "text": "And it's going to open up your web browser, you can just log in, and then provide your credentials.",
    "textdich": ""
  },
  {
    "start": 41832.48,
    "end": 41842.08,
    "text": "All right, and then once you're logged in, you can just close out this window.",
    "textdich": ""
  },
  {
    "start": 41843.28,
    "end": 41848.0,
    "text": "Go back to our code and you can see logging in is done and we've logged in. And then that's my",
    "textdich": ""
  },
  {
    "start": 41848.0,
    "end": 41855.12,
    "text": "specific account right there. Alright, and once that's done, we're going to go back to the tutorial.",
    "textdich": ""
  },
  {
    "start": 41857.2,
    "end": 41860.72,
    "text": "And we're just going to kind of follow along. So if you go to prepare the app, you can ignore this.",
    "textdich": ""
  },
  {
    "start": 41860.72,
    "end": 41865.52,
    "text": "So they give you like a demo application to kind of follow through the tutorial. But we",
    "textdich": ""
  },
  {
    "start": 41865.52,
    "end": 41868.96,
    "text": "already have our own app. So we don't need to worry about that. If we go to deploy the app,",
    "textdich": ""
  },
  {
    "start": 41869.76,
    "end": 41875.76,
    "text": "we have to run this command Heroku create. So we have to create an app within our Heroku account.",
    "textdich": ""
  },
  {
    "start": 41876.4,
    "end": 41881.92,
    "text": "So let's run that command. But before we run that, I'm going to do a Heroku create dash dash help.",
    "textdich": ""
  },
  {
    "start": 41883.76,
    "end": 41888.32,
    "text": "And we can see that one of the arguments is going to be the name of the app we want to create.",
    "textdich": ""
  },
  {
    "start": 41888.32,
    "end": 41891.6,
    "text": "And so if you don't provide a name, Heroku just gives you a random name, but I always like to",
    "textdich": ""
  },
  {
    "start": 41891.6,
    "end": 41897.52,
    "text": "use a more familiar name. So I know that what app, which app covers which one of my applications.",
    "textdich": ""
  },
  {
    "start": 41897.52,
    "end": 41903.36,
    "text": "And so I'm going to call this fast API, Sanjeev. And keep in mind, these app names are global.",
    "textdich": ""
  },
  {
    "start": 41903.36,
    "end": 41908.48,
    "text": "So if I deploy my app as fast API dash Sanjeev, you will not be able to create an app with the",
    "textdich": ""
  },
  {
    "start": 41908.48,
    "end": 41913.52,
    "text": "same exact name. And that's because to actually access our application once deployed, the URL is",
    "textdich": ""
  },
  {
    "start": 41913.52,
    "end": 41919.6,
    "text": "the URL is going to be the specific app name embedded in there. So it has to be globally unique.",
    "textdich": ""
  },
  {
    "start": 41919.6,
    "end": 41923.92,
    "text": "So if it says your your app name is already taken, then just try a different one, maybe",
    "textdich": ""
  },
  {
    "start": 41923.92,
    "end": 41926.32,
    "text": "add a couple of numbers at the end, it doesn't really matter what the name is.",
    "textdich": ""
  },
  {
    "start": 41931.28,
    "end": 41937.44,
    "text": "All right, and once we've created our app, the next thing that we have to do is, well, actually,",
    "textdich": ""
  },
  {
    "start": 41937.44,
    "end": 41941.36,
    "text": "before we even do that, I want to show you guys what it actually did. So there's a couple things",
    "textdich": ""
  },
  {
    "start": 41941.36,
    "end": 41945.6,
    "text": "that happened behind the scenes. And the first thing is, if we actually log into our account,",
    "textdich": ""
  },
  {
    "start": 41946.72,
    "end": 41947.76,
    "text": "I'm going to log in right here.",
    "textdich": ""
  },
  {
    "start": 41952.08,
    "end": 41955.6,
    "text": "We're going to see our dashboard. So in the dashboard, you can see the application that",
    "textdich": ""
  },
  {
    "start": 41955.6,
    "end": 41960.64,
    "text": "we just created. Right now, there's nothing interesting, nothing's been set up with it.",
    "textdich": ""
  },
  {
    "start": 41960.64,
    "end": 41965.28,
    "text": "So we don't actually see anything. But the second thing that it also did was if I type in",
    "textdich": ""
  },
  {
    "start": 41965.28,
    "end": 41972.16,
    "text": "git remote, this is going to show all of the remote, remotes that have been set up for our",
    "textdich": ""
  },
  {
    "start": 41972.16,
    "end": 41976.8,
    "text": "Git. And we can see there's two now. So there's origin, which is the one we set up originally,",
    "textdich": ""
  },
  {
    "start": 41976.8,
    "end": 41981.84,
    "text": "that's GitHub, ultimately, but Heroku added a second one. And so this is ultimately how we",
    "textdich": ""
  },
  {
    "start": 41981.84,
    "end": 41986.96,
    "text": "deploy our application, because instead of doing a git push origin main, to push it out to GitHub,",
    "textdich": ""
  },
  {
    "start": 41986.96,
    "end": 41993.44,
    "text": "we can just do git push Heroku, Heroku main, and that's going to push out our code to the Heroku",
    "textdich": ""
  },
  {
    "start": 41993.44,
    "end": 41998.32,
    "text": "platform. And then it will then create an instance for our application. So let's go ahead and do",
    "textdich": ""
  },
  {
    "start": 41998.32,
    "end": 42006.56,
    "text": "that. We're going to do a git push Heroku main. And this is going to take a little bit of a while,",
    "textdich": ""
  },
  {
    "start": 42006.56,
    "end": 42010.48,
    "text": "because it's got a, you know, setup Python, it's got to do a few other things, it's got to install",
    "textdich": ""
  },
  {
    "start": 42010.48,
    "end": 42015.84,
    "text": "all of our dependencies, before it can actually get our app up and running. So I'm going to pause",
    "textdich": ""
  },
  {
    "start": 42015.84,
    "end": 42022.8,
    "text": "this video, and then I'll touch base with you guys once that's complete. All right, so our",
    "textdich": ""
  },
  {
    "start": 42022.8,
    "end": 42026.72,
    "text": "application has successfully been deployed. And you'll see that in the logs Heroku actually gives",
    "textdich": ""
  },
  {
    "start": 42026.72,
    "end": 42031.2,
    "text": "us the URL of our application. So I'm going to copy this URL. And we're going to just open this",
    "textdich": ""
  },
  {
    "start": 42031.2,
    "end": 42036.64,
    "text": "up in the browser. And if you let this run long enough, you're eventually going to see an error.",
    "textdich": ""
  },
  {
    "start": 42036.64,
    "end": 42041.84,
    "text": "So it looks like something in our application is broken. And this is to be expected, because there's",
    "textdich": ""
  },
  {
    "start": 42041.84,
    "end": 42045.2,
    "text": "still a few more things that we have to do to actually get this set up. Because if you take a",
    "textdich": ""
  },
  {
    "start": 42045.2,
    "end": 42051.92,
    "text": "look at what we've done, we pushed out our code to Heroku, right? But Heroku has no idea how to",
    "textdich": ""
  },
  {
    "start": 42051.92,
    "end": 42056.32,
    "text": "actually start our application. That you know, what is the command? It doesn't it just knows",
    "textdich": ""
  },
  {
    "start": 42056.32,
    "end": 42059.76,
    "text": "that this is a Python app, but it doesn't know what it is. It doesn't know that it's a fast API",
    "textdich": ""
  },
  {
    "start": 42059.76,
    "end": 42064.64,
    "text": "app, it doesn't know that we're trying to build out an API, it has no idea. And when we deploy",
    "textdich": ""
  },
  {
    "start": 42064.64,
    "end": 42070.8,
    "text": "to our development environment, we ran uvcorn. And then you know, app dot main, and then app.",
    "textdich": ""
  },
  {
    "start": 42072.48,
    "end": 42076.88,
    "text": "Right, but we haven't given that command to Heroku, how does it have any idea that our",
    "textdich": ""
  },
  {
    "start": 42076.88,
    "end": 42083.28,
    "text": "code is in main.py. And that within the main.py file, we have our app instance stored in a variable",
    "textdich": ""
  },
  {
    "start": 42083.28,
    "end": 42087.84,
    "text": "called app, it has no idea. So what we have to do is we actually have to create a file",
    "textdich": ""
  },
  {
    "start": 42088.88,
    "end": 42092.48,
    "text": "that's going to tell Heroku, what is the exact command that we want to run.",
    "textdich": ""
  },
  {
    "start": 42093.2,
    "end": 42096.96,
    "text": "So inside your root directory, so just kind of collapse all the folders,",
    "textdich": ""
  },
  {
    "start": 42096.96,
    "end": 42099.84,
    "text": "inside your root directory, so just right click here, create a new file,",
    "textdich": ""
  },
  {
    "start": 42099.84,
    "end": 42103.12,
    "text": "create a file called a proc file. So I've already got this in here, it's going to be in the GitHub",
    "textdich": ""
  },
  {
    "start": 42103.12,
    "end": 42108.48,
    "text": "repo. So you can take a look at it, and make sure you capitalize the P. And actually, if you take a",
    "textdich": ""
  },
  {
    "start": 42108.48,
    "end": 42113.6,
    "text": "look at the, the tutorial, and we go to the next one, which is define a proc file, this is going",
    "textdich": ""
  },
  {
    "start": 42113.6,
    "end": 42117.6,
    "text": "to just explain what the proc file is. But the proc file just just tells Heroku, what is the",
    "textdich": ""
  },
  {
    "start": 42117.6,
    "end": 42122.72,
    "text": "command that we need to start our application. And so here, we give it a process type. So since this",
    "textdich": ""
  },
  {
    "start": 42122.72,
    "end": 42127.28,
    "text": "is a web application, that's going to be responding to, you know, web requests, we want to use the",
    "textdich": ""
  },
  {
    "start": 42127.28,
    "end": 42132.56,
    "text": "word web. And then we specify the exact command that we need to run. And so in my proc file,",
    "textdich": ""
  },
  {
    "start": 42132.56,
    "end": 42137.36,
    "text": "a couple of things have been set up. So we run the came in UV corn, app dot main, and then app,",
    "textdich": ""
  },
  {
    "start": 42137.36,
    "end": 42141.76,
    "text": "like we've done before, we're not going to pass in the dash dash reload flag, because this is",
    "textdich": ""
  },
  {
    "start": 42141.76,
    "end": 42145.36,
    "text": "production, we don't want it to automatically reload on changes, because there should be no changes.",
    "textdich": ""
  },
  {
    "start": 42146.0,
    "end": 42151.12,
    "text": "We do have to provide the host IP. So this is just saying that, hey, we should be able to",
    "textdich": ""
  },
  {
    "start": 42151.12,
    "end": 42156.08,
    "text": "respond to request to any IP. So whatever IP Heroku gives us, this is going to accept it.",
    "textdich": ""
  },
  {
    "start": 42156.8,
    "end": 42160.8,
    "text": "Then the next flag is going to be the port flag. So what port should we run this on? If we don't",
    "textdich": ""
  },
  {
    "start": 42160.8,
    "end": 42166.4,
    "text": "provide a port flag, then it's going to default to port 8000, like it always has. However,",
    "textdich": ""
  },
  {
    "start": 42166.4,
    "end": 42170.16,
    "text": "the thing about Heroku is that they're actually going to provide a support. So we don't know what",
    "textdich": ""
  },
  {
    "start": 42170.16,
    "end": 42175.28,
    "text": "this port is ahead of time. So we have to be able to accept this port regardless of what it is.",
    "textdich": ""
  },
  {
    "start": 42175.28,
    "end": 42179.76,
    "text": "And so it's actually going to pass this down as an environment variable. So anytime you want to",
    "textdich": ""
  },
  {
    "start": 42179.76,
    "end": 42184.56,
    "text": "accept an environment variable or reference one, you can just say dollar, and then curly braces.",
    "textdich": ""
  },
  {
    "start": 42184.56,
    "end": 42189.92,
    "text": "So we're really just saying, we want to take whatever value Heroku gives us with the environment",
    "textdich": ""
  },
  {
    "start": 42189.92,
    "end": 42194.88,
    "text": "variable of port, and we want to assign it here. And then this is just giving it a default value",
    "textdich": ""
  },
  {
    "start": 42194.88,
    "end": 42198.96,
    "text": "of 5000 if they don't provide one. However, Heroku will always provide a support. So I",
    "textdich": ""
  },
  {
    "start": 42198.96,
    "end": 42205.12,
    "text": "don't think we even need that. And so after you make this file, you're then going to have to push",
    "textdich": ""
  },
  {
    "start": 42205.12,
    "end": 42210.48,
    "text": "out these changes to get once again. And since I already had this file, there's nothing to change",
    "textdich": ""
  },
  {
    "start": 42210.48,
    "end": 42214.56,
    "text": "in my gets or nothing will get pushed out. So I'm just going to just change some random code.",
    "textdich": ""
  },
  {
    "start": 42214.56,
    "end": 42221.36,
    "text": "I'm going to delete this 1234 here. So that I can at least have some changes in my code,",
    "textdich": ""
  },
  {
    "start": 42221.36,
    "end": 42225.36,
    "text": "you guys will already have changes in your code because you added the new file. So then go ahead",
    "textdich": ""
  },
  {
    "start": 42225.36,
    "end": 42229.44,
    "text": "and do a git add dash dash also that's going to add all the changes, we're going to do a commit.",
    "textdich": ""
  },
  {
    "start": 42231.44,
    "end": 42240.0,
    "text": "And we'll give it a message of added proc file. And then we do a git push. And then what do we",
    "textdich": ""
  },
  {
    "start": 42240.0,
    "end": 42244.64,
    "text": "push to? Well, first of all, you know, moving forward, we want to make sure that this is stored in",
    "textdich": ""
  },
  {
    "start": 42244.64,
    "end": 42250.96,
    "text": "GitHub. So let's do a git push origin main, this is going to push it to GitHub. And then now we",
    "textdich": ""
  },
  {
    "start": 42250.96,
    "end": 42255.84,
    "text": "want to actually push out these changes to Heroku so that we can actually get our application up",
    "textdich": ""
  },
  {
    "start": 42255.84,
    "end": 42269.36,
    "text": "and running. So we'll do a git push Heroku main. And once again, we have to kind of wait through",
    "textdich": ""
  },
  {
    "start": 42269.36,
    "end": 42278.56,
    "text": "this entire process. Okay, so it's now finished. Once again, we're going to go back to the URL",
    "textdich": ""
  },
  {
    "start": 42278.56,
    "end": 42284.96,
    "text": "it's deployed at. And I'm just going to do a refresh to see if we fixed our issue. And the",
    "textdich": ""
  },
  {
    "start": 42284.96,
    "end": 42289.92,
    "text": "fact that it's still spinning for this long most likely means that we did not fix our issue. But I",
    "textdich": ""
  },
  {
    "start": 42289.92,
    "end": 42294.96,
    "text": "already know the exact reason why this is. And so we will take a look at exactly what is causing our",
    "textdich": ""
  },
  {
    "start": 42294.96,
    "end": 42301.12,
    "text": "application to not successfully get deployed in the next lesson. Anytime your application isn't",
    "textdich": ""
  },
  {
    "start": 42301.12,
    "end": 42306.88,
    "text": "working on Heroku's platform, they have a really easy way of accessing logs. So we can say Heroku",
    "textdich": ""
  },
  {
    "start": 42307.6,
    "end": 42310.88,
    "text": "logs, and I'm just going to do a dash dash help just to see what options we have.",
    "textdich": ""
  },
  {
    "start": 42313.04,
    "end": 42317.76,
    "text": "And so here we could specify the app, or we can just dump the logs for all of our apps. But what",
    "textdich": ""
  },
  {
    "start": 42317.76,
    "end": 42321.2,
    "text": "I'm going to do is I'm going to pass in the dash t flag so we can tail the logs as things happen.",
    "textdich": ""
  },
  {
    "start": 42321.2,
    "end": 42329.28,
    "text": "So if I do a dash t, and we scroll up, you can see that we've got a couple of different errors. And",
    "textdich": ""
  },
  {
    "start": 42329.28,
    "end": 42334.56,
    "text": "so it looks like there's some issues with settings, which, you know, is the the pedantic model that",
    "textdich": ""
  },
  {
    "start": 42334.56,
    "end": 42338.56,
    "text": "we've set up for retrieving our environment variables. And it's saying that there's a couple",
    "textdich": ""
  },
  {
    "start": 42338.56,
    "end": 42343.76,
    "text": "of validation errors for our settings model. And it says that, hey, look, we don't have a database",
    "textdich": ""
  },
  {
    "start": 42343.76,
    "end": 42348.4,
    "text": "host name, we don't have a database port, password or any of the other information. So there's some",
    "textdich": ""
  },
  {
    "start": 42348.4,
    "end": 42354.24,
    "text": "issue with our environment variables. And this makes sense, because in development, we use our",
    "textdich": ""
  },
  {
    "start": 42354.24,
    "end": 42360.88,
    "text": "dot env file to provide all of the environment variables into that settings model right here.",
    "textdich": ""
  },
  {
    "start": 42360.88,
    "end": 42366.96,
    "text": "And we pass that by specifying the env file. However, we did not check our env file into get",
    "textdich": ""
  },
  {
    "start": 42366.96,
    "end": 42373.92,
    "text": "remember in get we we use the get ignore file to make sure we excluded that because we don't want",
    "textdich": ""
  },
  {
    "start": 42373.92,
    "end": 42379.44,
    "text": "to actually check that into get. So how does Heroku know what all of our environment variables",
    "textdich": ""
  },
  {
    "start": 42379.44,
    "end": 42384.24,
    "text": "should be? Well, they have a and so we actually have to add those environment variables either",
    "textdich": ""
  },
  {
    "start": 42384.24,
    "end": 42389.44,
    "text": "through the command line, or through the dashboard. But before we can do that, we need to actually",
    "textdich": ""
  },
  {
    "start": 42389.44,
    "end": 42395.12,
    "text": "get a Postgres database. Because right now we don't have a Postgres database. So what would we",
    "textdich": ""
  },
  {
    "start": 42395.12,
    "end": 42399.36,
    "text": "even provide for database host name and port and password and things like that if we don't have one.",
    "textdich": ""
  },
  {
    "start": 42399.36,
    "end": 42405.2,
    "text": "So let's create one. And once again, Heroku provides us with a free Postgres instance",
    "textdich": ""
  },
  {
    "start": 42406.32,
    "end": 42410.64,
    "text": "that we can have access to. And that's what that's one of my favorite parts about Heroku is that now",
    "textdich": ""
  },
  {
    "start": 42410.64,
    "end": 42417.36,
    "text": "we have access to Postgres. So let's go to Heroku Postgres. I'll just say tutorial.",
    "textdich": ""
  },
  {
    "start": 42420.4,
    "end": 42423.76,
    "text": "And it's going to take us to their dev center. So this is going to show us actually how to",
    "textdich": ""
  },
  {
    "start": 42423.76,
    "end": 42428.8,
    "text": "create a Postgres instance. And so it Postgres is one of their many add ons. If you want to",
    "textdich": ""
  },
  {
    "start": 42428.8,
    "end": 42431.6,
    "text": "actually go to their website and see all of the different add ons they support, they support a",
    "textdich": ""
  },
  {
    "start": 42431.6,
    "end": 42435.76,
    "text": "ton. If you want to read us add on, you can get that added. But in this case, we want to create a",
    "textdich": ""
  },
  {
    "start": 42435.76,
    "end": 42442.08,
    "text": "Postgres, a Postgres instance. So we do Heroku add ons, create, then the type of add on, which",
    "textdich": ""
  },
  {
    "start": 42442.08,
    "end": 42446.4,
    "text": "means it's going to be PostgreSQL and then plan name. So we are under the hobby dev, which is",
    "textdich": ""
  },
  {
    "start": 42446.4,
    "end": 42451.76,
    "text": "essentially the free one. And that's going to actually create a Heroku a Postgres instance.",
    "textdich": ""
  },
  {
    "start": 42451.76,
    "end": 42459.2,
    "text": "So let's run this. And just Ctrl C out of this. And let's just do a dash dash help real quick,",
    "textdich": ""
  },
  {
    "start": 42459.2,
    "end": 42463.2,
    "text": "just to see what other flags we have. And that should be fine. We don't need to actually provide",
    "textdich": ""
  },
  {
    "start": 42463.2,
    "end": 42468.48,
    "text": "any other flags. Let's run this. And Heroku is actually going to create our Postgres instance.",
    "textdich": ""
  },
  {
    "start": 42468.48,
    "end": 42472.48,
    "text": "And keep in mind that for Heroku to spin up a Postgres instance, it does take a little bit of",
    "textdich": ""
  },
  {
    "start": 42472.48,
    "end": 42477.68,
    "text": "time. But we can actually monitor that in our dashboard. So if we go back to my dashboard and",
    "textdich": ""
  },
  {
    "start": 42477.68,
    "end": 42486.4,
    "text": "do a refresh, you can see that this is the new Heroku instance. And I can just click on this.",
    "textdich": ""
  },
  {
    "start": 42486.4,
    "end": 42490.56,
    "text": "And we can see some more information is going to open this up in a new tab. And if you want to,",
    "textdich": ""
  },
  {
    "start": 42490.56,
    "end": 42495.12,
    "text": "we can go into these settings. And here we can take a look at our database credentials.",
    "textdich": ""
  },
  {
    "start": 42495.76,
    "end": 42500.08,
    "text": "So if I view my credentials, you can see that this is the IP address my database lives on.",
    "textdich": ""
  },
  {
    "start": 42500.8,
    "end": 42506.48,
    "text": "This is the actual database name. So we don't get to create our own database name or our own",
    "textdich": ""
  },
  {
    "start": 42506.48,
    "end": 42512.88,
    "text": "database within Postgres, they give us a fixed name, and that's perfectly fine. And then here's",
    "textdich": ""
  },
  {
    "start": 42512.88,
    "end": 42515.92,
    "text": "this is going to be the username that we're going to log in as this is the port it's running on.",
    "textdich": ""
  },
  {
    "start": 42515.92,
    "end": 42520.48,
    "text": "And then this is our password. And they also provide us the full Postgres URL if we want",
    "textdich": ""
  },
  {
    "start": 42521.2,
    "end": 42526.16,
    "text": "to use that. So now that we have this information, feel free to save this real quick. And I'm",
    "textdich": ""
  },
  {
    "start": 42526.16,
    "end": 42531.6,
    "text": "actually just going to do a quick screenshot and save this in my notes so that I don't have to",
    "textdich": ""
  },
  {
    "start": 42531.6,
    "end": 42537.84,
    "text": "keep bouncing back and forth. And now let's go back to our application. And if we go under settings,",
    "textdich": ""
  },
  {
    "start": 42539.76,
    "end": 42545.68,
    "text": "this config vars is where we actually provide environment variables to our Heroku instance.",
    "textdich": ""
  },
  {
    "start": 42545.68,
    "end": 42550.48,
    "text": "And by the way, Heroku calls our instance dinos. But you can use either term you want. And so you",
    "textdich": ""
  },
  {
    "start": 42550.48,
    "end": 42554.48,
    "text": "could see all of the config variables that have been set, and there should be nothing except for",
    "textdich": ""
  },
  {
    "start": 42554.48,
    "end": 42561.68,
    "text": "one. So when you add a Postgres instance to your application, what happens is Heroku automatically",
    "textdich": ""
  },
  {
    "start": 42561.68,
    "end": 42566.64,
    "text": "adds an environment variable called database URL, and it's going to contain the entire Postgres",
    "textdich": ""
  },
  {
    "start": 42566.64,
    "end": 42573.28,
    "text": "q l, u l, u r l. And so we could go into our application and then update our code,",
    "textdich": ""
  },
  {
    "start": 42573.28,
    "end": 42578.08,
    "text": "so that in the database.py file, instead of, you know, breaking things down like this, we can just",
    "textdich": ""
  },
  {
    "start": 42578.08,
    "end": 42584.48,
    "text": "provide, you know, one, one specific URL and just put it in as settings dot, you know, database,",
    "textdich": ""
  },
  {
    "start": 42585.76,
    "end": 42591.12,
    "text": "underscore URL. However, I don't like to change my code, I like it just the way it is. So instead",
    "textdich": ""
  },
  {
    "start": 42591.12,
    "end": 42596.4,
    "text": "of using the default environment variable, we're going to actually break this URL out into multiple",
    "textdich": ""
  },
  {
    "start": 42596.4,
    "end": 42600.56,
    "text": "different environment variables. So just open this up and take a look at all of the environment",
    "textdich": ""
  },
  {
    "start": 42600.56,
    "end": 42605.92,
    "text": "variables that we expect by going into our config.py. So we need all of these set. So we're going to add",
    "textdich": ""
  },
  {
    "start": 42605.92,
    "end": 42616.88,
    "text": "one for database host name. And from the URL, if you forgot what the host name is, and actually,",
    "textdich": ""
  },
  {
    "start": 42617.6,
    "end": 42622.4,
    "text": "I'm going to just open this one up in a new tab, and then open up actually, I don't even need to",
    "textdich": ""
  },
  {
    "start": 42622.4,
    "end": 42628.96,
    "text": "open up this one. I just need to flip between these two. So the host name is right here. But",
    "textdich": ""
  },
  {
    "start": 42628.96,
    "end": 42633.52,
    "text": "you can get it from this URL just by clicking on this icon, and then just grabbing the IP address,",
    "textdich": ""
  },
  {
    "start": 42633.52,
    "end": 42636.88,
    "text": "but it's such a small little window. I hate having to do that. So I'm going to close that",
    "textdich": ""
  },
  {
    "start": 42636.88,
    "end": 42643.12,
    "text": "and just bounce between these two links. All right, so let's grab the host name.",
    "textdich": ""
  },
  {
    "start": 42650.8,
    "end": 42658.0,
    "text": "And we'll add this one. Then the next one is going to be the database port, password,",
    "textdich": ""
  },
  {
    "start": 42658.0,
    "end": 42668.8,
    "text": "name and username. So let's just write those out database or database username,",
    "textdich": ""
  },
  {
    "start": 42668.8,
    "end": 42690.4,
    "text": "database, password, and then database name. I think that's it. Database port, password, name,",
    "textdich": ""
  },
  {
    "start": 42690.4,
    "end": 42699.28,
    "text": "username. And then we have to add this stuff for our token. So we got secret key algorithm,",
    "textdich": ""
  },
  {
    "start": 42699.28,
    "end": 42726.0,
    "text": "and then the last one. And then now we can provide in the values of the database port,",
    "textdich": ""
  },
  {
    "start": 42726.0,
    "end": 42736.48,
    "text": "we can see from here, it's going to be the default 5432, the username,",
    "textdich": ""
  },
  {
    "start": 42736.48,
    "end": 42764.08,
    "text": "username. And then here, we'll grab the password. And then the actual database name here.",
    "textdich": ""
  },
  {
    "start": 42766.48,
    "end": 42775.92,
    "text": "The secret key, I'm just going to use whatever we used in development, not actually recommended,",
    "textdich": ""
  },
  {
    "start": 42775.92,
    "end": 42780.08,
    "text": "but I'm just going to keep things as simple as possible for now. But you can provide any",
    "textdich": ""
  },
  {
    "start": 42780.08,
    "end": 42802.24,
    "text": "secret key you want. And I'll say in production, it'll expire after 60 minutes. All right. And so",
    "textdich": ""
  },
  {
    "start": 42802.24,
    "end": 42808.0,
    "text": "now we've got our all of our environment variables set up. And our Postgres Postgres instance is",
    "textdich": ""
  },
  {
    "start": 42808.0,
    "end": 42812.88,
    "text": "already up and running. So I think at this point, our app should work. So we'll try this out again.",
    "textdich": ""
  },
  {
    "start": 42817.76,
    "end": 42821.84,
    "text": "So now that we set those new environment variables, how do we actually restart our",
    "textdich": ""
  },
  {
    "start": 42822.56,
    "end": 42833.6,
    "text": "Heroku instance? Well, let's do a Heroku apps dash dash help. And let's see if there's a restart.",
    "textdich": ""
  },
  {
    "start": 42833.6,
    "end": 42840.48,
    "text": "So there's app create destroy. And it doesn't look like there's a restart. So we can actually use",
    "textdich": ""
  },
  {
    "start": 42840.48,
    "end": 42848.08,
    "text": "the apps argument to restart our application. Instead, we have to do Heroku ps dash dash",
    "textdich": ""
  },
  {
    "start": 42848.08,
    "end": 42856.4,
    "text": "help. So now we can see that we do have access to restarts, we're going to do Heroku ps, restart.",
    "textdich": ""
  },
  {
    "start": 42856.4,
    "end": 42865.76,
    "text": "And that's going to restart our dyno, which is our Heroku instance. And once again,",
    "textdich": ""
  },
  {
    "start": 42865.76,
    "end": 42874.08,
    "text": "I'm going to do a Heroku logs dash t to tail the logs. All right. And so now you can see those",
    "textdich": ""
  },
  {
    "start": 42874.08,
    "end": 42879.84,
    "text": "previous errors were gone. And we were now able to successfully run the startup command. And you",
    "textdich": ""
  },
  {
    "start": 42879.84,
    "end": 42886.96,
    "text": "can see that we actually got passed a specific port of 34731. And so that's why we ultimately",
    "textdich": ""
  },
  {
    "start": 42886.96,
    "end": 42890.56,
    "text": "had to provide the port variable because this will change every time we restart it. However,",
    "textdich": ""
  },
  {
    "start": 42890.56,
    "end": 42897.52,
    "text": "we don't actually need to use that specific port number in the URL that we need to access. So let's",
    "textdich": ""
  },
  {
    "start": 42897.52,
    "end": 42909.44,
    "text": "get our our app URL, which I already forgot. And if you ever forget your URL, you can just type in",
    "textdich": ""
  },
  {
    "start": 42909.44,
    "end": 42913.6,
    "text": "Heroku apps info than the name of the specific app. And then it's going to give you all of these",
    "textdich": ""
  },
  {
    "start": 42913.6,
    "end": 42917.84,
    "text": "specific information. So you can see this is actually where the Heroku Git is being stored.",
    "textdich": ""
  },
  {
    "start": 42917.84,
    "end": 42923.12,
    "text": "We can see that we have one instance in this case running the web. And then we have our URL down",
    "textdich": ""
  },
  {
    "start": 42923.12,
    "end": 42932.24,
    "text": "here. So I'm going to copy this. And you can see that we get message Hello world. So it looks like",
    "textdich": ""
  },
  {
    "start": 42932.24,
    "end": 42938.0,
    "text": "things are working. If I actually go to slash docs, let's test that out. And so now we have access to",
    "textdich": ""
  },
  {
    "start": 42938.0,
    "end": 42945.12,
    "text": "documents, I'm going to minimize that. So it looks like things are working. However, if I try to log",
    "textdich": ""
  },
  {
    "start": 42945.12,
    "end": 42951.2,
    "text": "in, whether it's either through the documentation, or if I actually send a request from postman,",
    "textdich": ""
  },
  {
    "start": 42951.2,
    "end": 42956.16,
    "text": "you're going to see that there's going to be some issues. So here I'm going to actually, I can't",
    "textdich": ""
  },
  {
    "start": 42956.16,
    "end": 42960.08,
    "text": "even log in, I have to create a user first, because this is a fresh deployment. So let's go to",
    "textdich": ""
  },
  {
    "start": 42960.72,
    "end": 42965.28,
    "text": "users, and we're going to create a user real quick. And I'm going to just try this out and put in",
    "textdich": ""
  },
  {
    "start": 42965.28,
    "end": 42974.24,
    "text": "whatever name you want. Now, so this is Sanjeev at example.com, my password will be password 123,",
    "textdich": ""
  },
  {
    "start": 42974.24,
    "end": 42982.0,
    "text": "we'll execute it. And you can see that we get an internal server error. So what is happening? Why",
    "textdich": ""
  },
  {
    "start": 42982.0,
    "end": 42988.56,
    "text": "can't we exactly create a user? Well, like usual, we're going to go back to our logs. And we're",
    "textdich": ""
  },
  {
    "start": 42988.56,
    "end": 42994.4,
    "text": "going to see what happened. Alright, so we can see the SQL that's getting imported in the logs.",
    "textdich": ""
  },
  {
    "start": 42994.4,
    "end": 42998.24,
    "text": "And it looks like there's some kind of error with the SQL. And I don't know if that's going to give",
    "textdich": ""
  },
  {
    "start": 42998.24,
    "end": 43004.32,
    "text": "us a more specific error that's going to actually help us. I think that's all it's going to provide",
    "textdich": ""
  },
  {
    "start": 43004.32,
    "end": 43011.04,
    "text": "us in this case. But I think you guys can guess exactly what's happening. We deployed a brand new",
    "textdich": ""
  },
  {
    "start": 43011.04,
    "end": 43018.56,
    "text": "instance of Postgres. But right now, if we actually connect to our Postgres, you're going to see a few",
    "textdich": ""
  },
  {
    "start": 43018.56,
    "end": 43024.08,
    "text": "different issues. So I'm going to actually connect to this Postgres instance. And to create a Postgres",
    "textdich": ""
  },
  {
    "start": 43024.08,
    "end": 43028.64,
    "text": "instance, just right click here, and then select Create server. So this is going to allow us to",
    "textdich": ""
  },
  {
    "start": 43028.64,
    "end": 43034.0,
    "text": "connect to another Postgres. And I'm going to call this Heroku dash Postgres. And then here,",
    "textdich": ""
  },
  {
    "start": 43034.0,
    "end": 43039.44,
    "text": "we're going to provide the same exact connection information. So we'll go back to settings, we'll",
    "textdich": ""
  },
  {
    "start": 43039.44,
    "end": 43051.44,
    "text": "get our credentials. Okay, and so now we are successfully connected to to our Heroku Postgres",
    "textdich": ""
  },
  {
    "start": 43051.44,
    "end": 43057.68,
    "text": "instance. And if I just drop this down, and then go into databases, you'll see a ton of different",
    "textdich": ""
  },
  {
    "start": 43057.68,
    "end": 43064.32,
    "text": "databases. Keep in mind, we won't actually be able to access most of these. So the reason Postgres",
    "textdich": ""
  },
  {
    "start": 43064.32,
    "end": 43068.56,
    "text": "is able to us or the reason Heroku is actually able to provide this for free is that they have",
    "textdich": ""
  },
  {
    "start": 43068.56,
    "end": 43074.8,
    "text": "one instance of Postgres. And then they give you one database within that instance, that you can",
    "textdich": ""
  },
  {
    "start": 43074.8,
    "end": 43081.6,
    "text": "access, but only you can access that specific database. And so our database is D five eight.",
    "textdich": ""
  },
  {
    "start": 43081.6,
    "end": 43085.92,
    "text": "And I don't know if there's an easy way to search for databases. Let me see if I can right click",
    "textdich": ""
  },
  {
    "start": 43085.92,
    "end": 43090.24,
    "text": "this. Nope, it doesn't look like there's an easy way. So I'm just gonna have to scroll down to D",
    "textdich": ""
  },
  {
    "start": 43090.24,
    "end": 43098.32,
    "text": "five. And then what are the next letters D five, eight, re zero, five. Alright, so I finally found",
    "textdich": ""
  },
  {
    "start": 43098.32,
    "end": 43102.8,
    "text": "my database, you'll see it's the one that I have access to. So it's actually colored. And if I just",
    "textdich": ""
  },
  {
    "start": 43102.8,
    "end": 43112.88,
    "text": "open this up real quick, and go into schemas, public, and then tables, there's nothing in there.",
    "textdich": ""
  },
  {
    "start": 43112.88,
    "end": 43117.28,
    "text": "So that's really the reason why our application is not working is because we have a brand new",
    "textdich": ""
  },
  {
    "start": 43117.28,
    "end": 43123.6,
    "text": "Postgres instance, but we haven't actually set up our tables or schema. And so this is where",
    "textdich": ""
  },
  {
    "start": 43123.6,
    "end": 43128.0,
    "text": "alembic is going to come into play. Once again, you'll see that since we already have all of our",
    "textdich": ""
  },
  {
    "start": 43128.0,
    "end": 43134.48,
    "text": "revision setup, getting our production database to match our development database will be as simple",
    "textdich": ""
  },
  {
    "start": 43134.48,
    "end": 43140.64,
    "text": "as just running one simple command. So we'll take a look at that in the next video. In our development",
    "textdich": ""
  },
  {
    "start": 43140.64,
    "end": 43146.48,
    "text": "environment, we used alembic to manage our database schema. So alembic was responsible for creating",
    "textdich": ""
  },
  {
    "start": 43146.48,
    "end": 43151.44,
    "text": "all of those tables. And since we have all of these revision files within the alembic folder,",
    "textdich": ""
  },
  {
    "start": 43151.44,
    "end": 43156.56,
    "text": "we can essentially track all the changes that we make. And so to actually get our development",
    "textdich": ""
  },
  {
    "start": 43156.56,
    "end": 43162.08,
    "text": "database up to date, we just ran alembic upgrade head. And that would go to whichever one of these",
    "textdich": ""
  },
  {
    "start": 43162.08,
    "end": 43166.08,
    "text": "is the latest revision, and make sure that our Postgres instance matched whatever that is.",
    "textdich": ""
  },
  {
    "start": 43167.12,
    "end": 43172.48,
    "text": "In our production database, because in our production database, it's going to be no different,",
    "textdich": ""
  },
  {
    "start": 43172.48,
    "end": 43177.76,
    "text": "we're going to just run alembic upgrade head on our Heroku instance. And that's going to ensure",
    "textdich": ""
  },
  {
    "start": 43177.76,
    "end": 43183.84,
    "text": "that our Postgres database gets updated to our latest schema. And because we've checked all of",
    "textdich": ""
  },
  {
    "start": 43183.84,
    "end": 43190.8,
    "text": "these files into Git, because all of the alembic folders was added to Git as well, that then our",
    "textdich": ""
  },
  {
    "start": 43190.8,
    "end": 43196.8,
    "text": "Heroku instance has access to all of our revisions. And so when we run alembic, alembic can keep track",
    "textdich": ""
  },
  {
    "start": 43196.8,
    "end": 43201.84,
    "text": "of all of those changes as well in our production server. And it's important to understand that we",
    "textdich": ""
  },
  {
    "start": 43201.84,
    "end": 43208.96,
    "text": "never run alembic revision on our production server, we only run alembic revision on our development",
    "textdich": ""
  },
  {
    "start": 43208.96,
    "end": 43213.36,
    "text": "server when we're staging out these changes in our production server, whenever we want to push out",
    "textdich": ""
  },
  {
    "start": 43213.36,
    "end": 43218.8,
    "text": "those changes, we just do a git push. So we push out the code, all of our code changes, as well as",
    "textdich": ""
  },
  {
    "start": 43218.8,
    "end": 43224.32,
    "text": "all of the alembic revisions to our production server, and we just run an alembic upgrade head.",
    "textdich": ""
  },
  {
    "start": 43224.32,
    "end": 43229.92,
    "text": "It's as simple as that. So let's do that. Now, the first thing that we need to do is we got to figure",
    "textdich": ""
  },
  {
    "start": 43229.92,
    "end": 43236.24,
    "text": "out how do we actually run a command in our Heroku instance? I think your first guess is probably",
    "textdich": ""
  },
  {
    "start": 43236.24,
    "end": 43240.72,
    "text": "going to be do we add another line into this proc file that we can kind of call whenever we want to?",
    "textdich": ""
  },
  {
    "start": 43240.72,
    "end": 43245.84,
    "text": "Not exactly, although maybe you can do that. But if we go back to our tutorial, and go to start a",
    "textdich": ""
  },
  {
    "start": 43245.84,
    "end": 43252.72,
    "text": "console, we can run a specific command on our Heroku instance by doing Heroku run and then the",
    "textdich": ""
  },
  {
    "start": 43252.72,
    "end": 43257.76,
    "text": "specific command that we want to run. So let's try that out. And you can even drop into the bash shell.",
    "textdich": ""
  },
  {
    "start": 43257.76,
    "end": 43263.68,
    "text": "So there's a lot of flexibility. But we're going to just do a Heroku run. And then we want to provide",
    "textdich": ""
  },
  {
    "start": 43263.68,
    "end": 43267.6,
    "text": "the command that we want to run. I'm going to put it in quotes, I don't remember if it's a requirement",
    "textdich": ""
  },
  {
    "start": 43267.6,
    "end": 43271.84,
    "text": "to put it in quotes. But I'm going to do that just in case. So we'll do alembic upgrade head.",
    "textdich": ""
  },
  {
    "start": 43275.84,
    "end": 43279.44,
    "text": "Alright, and you see that it's running that command right now.",
    "textdich": ""
  },
  {
    "start": 43283.28,
    "end": 43288.16,
    "text": "And take a look at the logs, right, you can see that not only did it get our Postgres instance up",
    "textdich": ""
  },
  {
    "start": 43288.16,
    "end": 43293.2,
    "text": "to the latest revision, it has all of the other incremental steps added in as well. So we can roll",
    "textdich": ""
  },
  {
    "start": 43293.2,
    "end": 43298.64,
    "text": "back to any of them, just like we did in development. And if we go back to PG admin, I'm going to just",
    "textdich": ""
  },
  {
    "start": 43298.64,
    "end": 43305.2,
    "text": "refresh tables. And if we go to our tables, you can see that we have all of our tables here now.",
    "textdich": ""
  },
  {
    "start": 43306.08,
    "end": 43312.8,
    "text": "And just in case, because I believe we crashed our application, maybe, when we try to, you know,",
    "textdich": ""
  },
  {
    "start": 43313.76,
    "end": 43319.2,
    "text": "create a user without having a Postgres database or table setup, I'm just going to do a Heroku ps",
    "textdich": ""
  },
  {
    "start": 43319.2,
    "end": 43330.0,
    "text": "restart again, just to restart the instance just in case. And now I want to go back to here. And",
    "textdich": ""
  },
  {
    "start": 43330.0,
    "end": 43336.0,
    "text": "we're going to just go back to the root URL to see if that works. And that works. That's perfect.",
    "textdich": ""
  },
  {
    "start": 43336.0,
    "end": 43343.84,
    "text": "We'll go back to docs. We can see that that works. Now let's try to create a user. And so I'll do",
    "textdich": ""
  },
  {
    "start": 43343.84,
    "end": 43349.12,
    "text": "try it out. And I don't even feel like changing any of these values. Technically, these should still",
    "textdich": ""
  },
  {
    "start": 43349.12,
    "end": 43354.72,
    "text": "work. So let's just try that. And we got a response back. And look at this, we got a 201.",
    "textdich": ""
  },
  {
    "start": 43354.72,
    "end": 43359.68,
    "text": "And we can see the user that was created. So it looks like our application was now successfully",
    "textdich": ""
  },
  {
    "start": 43359.68,
    "end": 43365.12,
    "text": "able to access our database. If we go into the users table, right click on this and just do a",
    "textdich": ""
  },
  {
    "start": 43365.12,
    "end": 43374.08,
    "text": "view edit all rows. We can see the one user that we created. Alright, and so that's pretty much it",
    "textdich": ""
  },
  {
    "start": 43374.08,
    "end": 43379.12,
    "text": "we've successfully deployed our application. The last thing that I want to show you guys is how do",
    "textdich": ""
  },
  {
    "start": 43379.12,
    "end": 43384.88,
    "text": "we push out changes to our application? Let. So let's say that I go into my app. And right now I",
    "textdich": ""
  },
  {
    "start": 43384.88,
    "end": 43389.92,
    "text": "go into main.py. And I see that this just says message Hello world, and let's say I make some",
    "textdich": ""
  },
  {
    "start": 43389.92,
    "end": 43394.24,
    "text": "kind of change. And let's say I just add a whole bunch of exclamation points or something just keep",
    "textdich": ""
  },
  {
    "start": 43394.24,
    "end": 43397.76,
    "text": "it just keep it simple, just to show you guys, you know, regardless of what change you make,",
    "textdich": ""
  },
  {
    "start": 43397.76,
    "end": 43403.2,
    "text": "the steps are going to be identical. We make some changes. The next thing that we have to do is,",
    "textdich": ""
  },
  {
    "start": 43403.2,
    "end": 43406.16,
    "text": "we actually have to push out those changes. So first of all, you're definitely going to,",
    "textdich": ""
  },
  {
    "start": 43406.16,
    "end": 43409.6,
    "text": "you know, push out those changes to your GitHub repository. So we'll do git push",
    "textdich": ""
  },
  {
    "start": 43410.16,
    "end": 43413.36,
    "text": "origin main. So that's going to push it out to get GitHub.",
    "textdich": ""
  },
  {
    "start": 43415.2,
    "end": 43419.44,
    "text": "Well, sorry, I forgot to do a git add dash dash all so we actually have to add those changes and",
    "textdich": ""
  },
  {
    "start": 43419.44,
    "end": 43427.68,
    "text": "then commit those changes. So I'll do git commit. Then we'll do a git push origin main, that's",
    "textdich": ""
  },
  {
    "start": 43427.68,
    "end": 43432.16,
    "text": "going to push it out to GitHub. And then finally, to actually push those changes out to our",
    "textdich": ""
  },
  {
    "start": 43432.16,
    "end": 43437.2,
    "text": "production environment, we'll do a git push Heroku main.",
    "textdich": ""
  },
  {
    "start": 43437.2,
    "end": 43448.32,
    "text": "All right, and so that's pushed out now. And if we go back to our application,",
    "textdich": ""
  },
  {
    "start": 43449.76,
    "end": 43456.32,
    "text": "I'm going to go back to the root URL. And we can see that we now have the extra exclamation points.",
    "textdich": ""
  },
  {
    "start": 43456.32,
    "end": 43460.8,
    "text": "So we have successfully pushed out our changes. All it took was just one simple command.",
    "textdich": ""
  },
  {
    "start": 43460.8,
    "end": 43465.52,
    "text": "And keep in mind that if you make changes to your code, that's all you have to do. However,",
    "textdich": ""
  },
  {
    "start": 43465.52,
    "end": 43469.84,
    "text": "if you make changes to your database, so you know, you go into alembic, and you create a new revision,",
    "textdich": ""
  },
  {
    "start": 43469.84,
    "end": 43476.4,
    "text": "then we have to follow the same exact steps. But on top of that, we have to do the the Heroku run",
    "textdich": ""
  },
  {
    "start": 43476.4,
    "end": 43481.92,
    "text": "alembic, you know, upgrade head so that we actually push out those changes to the Postgres instance.",
    "textdich": ""
  },
  {
    "start": 43481.92,
    "end": 43486.72,
    "text": "But there you guys have it, you have successfully deployed the application that we have spent",
    "textdich": ""
  },
  {
    "start": 43486.72,
    "end": 43492.0,
    "text": "building the past couple of days. And so feel free to show this off to your friends and family.",
    "textdich": ""
  },
  {
    "start": 43492.0,
    "end": 43497.6,
    "text": "Feel free to make as many changes and modifications really start to play around with it. Try to expand",
    "textdich": ""
  },
  {
    "start": 43497.6,
    "end": 43504.4,
    "text": "on the functionality of our application. And just keep learning, I guess. For the second method of",
    "textdich": ""
  },
  {
    "start": 43504.4,
    "end": 43510.4,
    "text": "deployment, we're going to see how we can deploy your application on an Ubuntu server. And it's",
    "textdich": ""
  },
  {
    "start": 43510.4,
    "end": 43515.44,
    "text": "important to keep in mind that it does not matter where you host your Ubuntu server, you can run it",
    "textdich": ""
  },
  {
    "start": 43515.44,
    "end": 43522.16,
    "text": "on any of the major cloud providers, AWS, Azure, GCP, you can run it on DigitalOcean, you can run it",
    "textdich": ""
  },
  {
    "start": 43522.16,
    "end": 43526.48,
    "text": "on your local machine, if you have virtual box installed on your computer, you can run it on",
    "textdich": ""
  },
  {
    "start": 43526.48,
    "end": 43532.24,
    "text": "Raspberry Pi, it doesn't matter, the steps are going to be identical as long as you run it on an",
    "textdich": ""
  },
  {
    "start": 43532.24,
    "end": 43536.72,
    "text": "Ubuntu server. Now, what we're going to do in this course is I'm going to show you guys how to",
    "textdich": ""
  },
  {
    "start": 43536.72,
    "end": 43543.36,
    "text": "deploy it on DigitalOcean, just because it's $5 a month, it's cheap, it's a fixed price. If you",
    "textdich": ""
  },
  {
    "start": 43543.36,
    "end": 43549.28,
    "text": "deploy it on AWS, then the price is kind of it varies. And if you run it all, all month long, then",
    "textdich": ""
  },
  {
    "start": 43549.28,
    "end": 43554.72,
    "text": "it could spike up well past $5. So this is kind of the cheapest solution. But keep in mind, like I",
    "textdich": ""
  },
  {
    "start": 43554.72,
    "end": 43561.04,
    "text": "said, the steps are identical, regardless of where you deploy. I just want to focus on making sure",
    "textdich": ""
  },
  {
    "start": 43561.04,
    "end": 43566.0,
    "text": "that you guys understand the steps that needs to take place to actually set up your Ubuntu server",
    "textdich": ""
  },
  {
    "start": 43566.0,
    "end": 43572.48,
    "text": "to be ready to host your application. And so if you don't have a DigitalOcean account, go ahead",
    "textdich": ""
  },
  {
    "start": 43572.48,
    "end": 43577.68,
    "text": "and make one. And then once you log in, you'll see this window. And what we want to do is select",
    "textdich": ""
  },
  {
    "start": 43577.68,
    "end": 43583.52,
    "text": "get started with the droplet. So we'll select that. And what we want to do is we want to select",
    "textdich": ""
  },
  {
    "start": 43583.52,
    "end": 43588.88,
    "text": "Ubuntu 20.0.4. That's the latest version at the moment. If you're watching this in the future,",
    "textdich": ""
  },
  {
    "start": 43589.44,
    "end": 43593.76,
    "text": "you could probably grab one of the newer ones, most of these commands are going to be identical.",
    "textdich": ""
  },
  {
    "start": 43593.76,
    "end": 43597.84,
    "text": "But if you wanted to make sure that you don't run into any issues, select the same exact version.",
    "textdich": ""
  },
  {
    "start": 43598.48,
    "end": 43602.4,
    "text": "Then for the CPU options, you want to select regular Intel with SSD, that's going to be the",
    "textdich": ""
  },
  {
    "start": 43602.4,
    "end": 43610.64,
    "text": "cheapest. And then you want to select the cheapest one right here, which is $5 a month, or 0.007",
    "textdich": ""
  },
  {
    "start": 43611.36,
    "end": 43617.84,
    "text": "per hour, what is that 7.7 10th of a cent. All right, and then select your data center. So I'm",
    "textdich": ""
  },
  {
    "start": 43617.84,
    "end": 43621.6,
    "text": "just going to select whatever's closest to me, I'm on the East Coast. So I'm going to select that.",
    "textdich": ""
  },
  {
    "start": 43623.04,
    "end": 43627.36,
    "text": "And then nothing else, for the most part really matters, we can leave everything as default.",
    "textdich": ""
  },
  {
    "start": 43627.36,
    "end": 43631.6,
    "text": "And then you have two options for authentication, you can use SSH keys, if you're familiar with how",
    "textdich": ""
  },
  {
    "start": 43631.6,
    "end": 43635.36,
    "text": "to work with that. If you're not, then start out with password for now, it's just a little bit",
    "textdich": ""
  },
  {
    "start": 43635.36,
    "end": 43642.0,
    "text": "simpler. And you'll see that DigitalOcean has some strict requirements for passwords. So you're",
    "textdich": ""
  },
  {
    "start": 43642.0,
    "end": 43645.84,
    "text": "probably going to have to try this a couple of times before you find one that actually matches",
    "textdich": ""
  },
  {
    "start": 43645.84,
    "end": 43650.96,
    "text": "their criteria. And then here, we can just give this a specific host name, I'm just going to call",
    "textdich": ""
  },
  {
    "start": 43650.96,
    "end": 43659.6,
    "text": "this Ubuntu dash fast API. It's nothing more than really just a tag. And that's all we have to do",
    "textdich": ""
  },
  {
    "start": 43659.6,
    "end": 43673.68,
    "text": "is select create droplet and DigitalOcean will create our Ubuntu VM. All right, and once the",
    "textdich": ""
  },
  {
    "start": 43673.68,
    "end": 43679.04,
    "text": "loading bar finishes, you should see a public IP. This is the IP that we're going to use to connect",
    "textdich": ""
  },
  {
    "start": 43679.04,
    "end": 43684.16,
    "text": "to our virtual machine. And so we'll take a look at how to connect to this in the next video.",
    "textdich": ""
  },
  {
    "start": 43684.16,
    "end": 43690.4,
    "text": "To connect to our Ubuntu virtual machine, we need to open up our terminal. So just search for terminal",
    "textdich": ""
  },
  {
    "start": 43690.4,
    "end": 43694.24,
    "text": "on Windows. If you're on Mac, you can do the same thing, just search for terminal. And then on",
    "textdich": ""
  },
  {
    "start": 43694.24,
    "end": 43697.52,
    "text": "Windows, you can select command prompt, I installed another terminal. So I'm actually going to use",
    "textdich": ""
  },
  {
    "start": 43697.52,
    "end": 43702.0,
    "text": "that. But you can use this one as well. You can even use the built in terminal within VS code,",
    "textdich": ""
  },
  {
    "start": 43702.0,
    "end": 43711.6,
    "text": "it's all going to be the same thing. Okay, and to connect to a device, we have to use a protocol",
    "textdich": ""
  },
  {
    "start": 43711.6,
    "end": 43717.2,
    "text": "called SSH. So we do SSH. And then we have to provide the username that we want to connect to",
    "textdich": ""
  },
  {
    "start": 43717.2,
    "end": 43721.76,
    "text": "to the device. And so this is going to vary depending on where you're deploying your virtual",
    "textdich": ""
  },
  {
    "start": 43721.76,
    "end": 43727.36,
    "text": "machine. On DigitalOcean, this is they're going to create an account for the root user. So this is",
    "textdich": ""
  },
  {
    "start": 43727.36,
    "end": 43731.68,
    "text": "like the most privileged user, this is where you can ultimately do anything with the device you",
    "textdich": ""
  },
  {
    "start": 43731.68,
    "end": 43737.28,
    "text": "have unlimited access. So we're going to do SSH root at, and then you do the add symbol, and then",
    "textdich": ""
  },
  {
    "start": 43737.28,
    "end": 43742.24,
    "text": "we provide the IP address. So I can just hover over this, select copy, and then paste it in here.",
    "textdich": ""
  },
  {
    "start": 43744.24,
    "end": 43749.2,
    "text": "At this point, you'll get this, you know, fingerprint message. So just hit Yes. And then",
    "textdich": ""
  },
  {
    "start": 43749.2,
    "end": 43752.32,
    "text": "it's going to ask you for the password. So this is the password that we provided when we created",
    "textdich": ""
  },
  {
    "start": 43752.32,
    "end": 43757.92,
    "text": "the virtual machine. And at that point, we are now successfully logged in. And so you can, if you",
    "textdich": ""
  },
  {
    "start": 43757.92,
    "end": 43761.84,
    "text": "run LS, this is just going to print out the contents of your current directory. And so it looks like",
    "textdich": ""
  },
  {
    "start": 43761.84,
    "end": 43769.92,
    "text": "we've got one folder in our directory right here. But this is our Ubuntu virtual machine. And anytime",
    "textdich": ""
  },
  {
    "start": 43769.92,
    "end": 43773.76,
    "text": "you you get a brand new Ubuntu virtual machine, the first thing that we want to do is we want to",
    "textdich": ""
  },
  {
    "start": 43773.76,
    "end": 43777.92,
    "text": "update all of the installed packages. So we want to make sure that it's up to date, right? This is",
    "textdich": ""
  },
  {
    "start": 43777.92,
    "end": 43782.08,
    "text": "just like installing any other operating system. And to run that there's two commands that we want",
    "textdich": ""
  },
  {
    "start": 43782.08,
    "end": 43787.04,
    "text": "to run. So we do sudo. So this is going to give you well, technically, we don't need to run sudo",
    "textdich": ""
  },
  {
    "start": 43787.04,
    "end": 43790.64,
    "text": "because for the root user, but if for some reason, you're not the root user, then you always have to",
    "textdich": ""
  },
  {
    "start": 43790.64,
    "end": 43798.96,
    "text": "use the keyword sudo. So we do sudo apt update. And then the second command, we can do two and signs",
    "textdich": ""
  },
  {
    "start": 43798.96,
    "end": 43805.28,
    "text": "and say sudo apt upgrade. And then pass in a dash y flag. The reason we pass in the dash y flag is",
    "textdich": ""
  },
  {
    "start": 43805.28,
    "end": 43809.12,
    "text": "because if you don't pass in this flag, what's going to happen is it's going to do a few things",
    "textdich": ""
  },
  {
    "start": 43809.12,
    "end": 43813.92,
    "text": "and then a prompt will come up where you actually have to hit yes. And I always hate having to hit",
    "textdich": ""
  },
  {
    "start": 43813.92,
    "end": 43818.48,
    "text": "yes, when you pass in the dash y, you can let it run. And then you can just go do something else,",
    "textdich": ""
  },
  {
    "start": 43818.48,
    "end": 43825.52,
    "text": "go get some coffee because it is a fairly long process. If you get this pop up, it doesn't really",
    "textdich": ""
  },
  {
    "start": 43825.52,
    "end": 43829.6,
    "text": "matter what option you choose, you can say keep local version currently installed or install the",
    "textdich": ""
  },
  {
    "start": 43829.6,
    "end": 43834.08,
    "text": "package maintainer's version, I'm going to select this one, but it shouldn't make a difference. So",
    "textdich": ""
  },
  {
    "start": 43834.08,
    "end": 43839.76,
    "text": "once all of those packages are up to date, we need to install a couple of extra packages. And the",
    "textdich": ""
  },
  {
    "start": 43839.76,
    "end": 43843.28,
    "text": "first thing that we need to do is, well, let's actually check what version of Python we're",
    "textdich": ""
  },
  {
    "start": 43843.28,
    "end": 43849.6,
    "text": "running on this machine. So if I do Python, dash, dash version, all right, so it doesn't look like",
    "textdich": ""
  },
  {
    "start": 43849.6,
    "end": 43856.0,
    "text": "Python's installed. However, if I do a Python, three dash dash version, we could see that we",
    "textdich": ""
  },
  {
    "start": 43856.0,
    "end": 43862.0,
    "text": "actually do have Python, it's just we have to use Python three, because a version three of Python",
    "textdich": ""
  },
  {
    "start": 43862.0,
    "end": 43868.24,
    "text": "was installed. And so if you see anything that starts at 3.8 dot 10, or later, you should be good.",
    "textdich": ""
  },
  {
    "start": 43868.24,
    "end": 43873.52,
    "text": "However, if you want to, you can always do a sudo apt install Python, and then I think you could just",
    "textdich": ""
  },
  {
    "start": 43873.52,
    "end": 43877.92,
    "text": "do a dash and specify the specific version that you want. But you can you can figure out how to",
    "textdich": ""
  },
  {
    "start": 43877.92,
    "end": 43883.28,
    "text": "do that by taking a look at the Python documentation, 3.8 dot 10, or later is more than good enough for",
    "textdich": ""
  },
  {
    "start": 43883.28,
    "end": 43887.68,
    "text": "us. So we have Python, the next thing that we need to do is we need to install pip. And let's",
    "textdich": ""
  },
  {
    "start": 43887.68,
    "end": 43891.52,
    "text": "actually double check and make sure that it's not already installed on our machine. So we could just",
    "textdich": ""
  },
  {
    "start": 43891.52,
    "end": 43897.92,
    "text": "say pip, dash, dash version, we could see there's no pip here. However, let's try to pip three dash",
    "textdich": ""
  },
  {
    "start": 43897.92,
    "end": 43902.8,
    "text": "dash version. And it looks like we don't have pip installed, but it's giving us a little hint on how",
    "textdich": ""
  },
  {
    "start": 43902.8,
    "end": 43912.88,
    "text": "to install pip. So we can do sudo apt install Python three dash pip. And we'll hit Y for yes.",
    "textdich": ""
  },
  {
    "start": 43915.6,
    "end": 43919.68,
    "text": "And once that's done, we're going to use pip to actually install a virtual NV,",
    "textdich": ""
  },
  {
    "start": 43919.68,
    "end": 43923.04,
    "text": "because we are going to make use of virtual environments on this machine as well.",
    "textdich": ""
  },
  {
    "start": 43923.76,
    "end": 43939.68,
    "text": "So we'll say sudo pip three, install virtual NV. And so now we should be able to use the virtual",
    "textdich": ""
  },
  {
    "start": 43939.68,
    "end": 43946.56,
    "text": "environment command. The next thing that we have to do is install Postgres on this machine. So we'll",
    "textdich": ""
  },
  {
    "start": 43946.56,
    "end": 43955.92,
    "text": "run sudo apt install. And then the libraries that we need are Postgres ql and Postgres ql dash",
    "textdich": ""
  },
  {
    "start": 43956.56,
    "end": 43961.44,
    "text": "contrib. And then we'll do a dash y so that we don't have to hit yes.",
    "textdich": ""
  },
  {
    "start": 43963.68,
    "end": 43969.2,
    "text": "Okay, so we've got Postgres installed, how exactly do we connect to it? So what we're going to first",
    "textdich": ""
  },
  {
    "start": 43969.2,
    "end": 43974.32,
    "text": "do is before we try to connect to it from our local machine, I want to connect to it",
    "textdich": ""
  },
  {
    "start": 43974.32,
    "end": 43979.52,
    "text": "from the actual Ubuntu computer itself, the Ubuntu virtual machine. And so we're actually",
    "textdich": ""
  },
  {
    "start": 43979.52,
    "end": 43985.6,
    "text": "going to take a look at the the CLI for accessing the Postgres database. And so the tool that we use",
    "textdich": ""
  },
  {
    "start": 43985.6,
    "end": 43991.52,
    "text": "to do this through CLI is called psql. Right, and we should be able to have access to it. So if you",
    "textdich": ""
  },
  {
    "start": 43991.52,
    "end": 43997.04,
    "text": "do psql dash version, you should see that it should respond back with something. So that means psql",
    "textdich": ""
  },
  {
    "start": 43997.04,
    "end": 44002.32,
    "text": "is installed. And if I do a psql dash dash help, it's going to show us the different flags that we",
    "textdich": ""
  },
  {
    "start": 44002.32,
    "end": 44007.12,
    "text": "can pass in. But the main flag that we want to pass in is the dash u so we can specify what's",
    "textdich": ""
  },
  {
    "start": 44007.12,
    "end": 44017.36,
    "text": "the username that we want to connect to. So let's say psql, then dash capital U, and then our username.",
    "textdich": ""
  },
  {
    "start": 44017.36,
    "end": 44023.28,
    "text": "And we know that when we install Postgres, it's going to install a user on the database called",
    "textdich": ""
  },
  {
    "start": 44023.28,
    "end": 44028.08,
    "text": "Postgres. So that's what we always use to connect to it by default. And so we say Postgres. And if",
    "textdich": ""
  },
  {
    "start": 44028.08,
    "end": 44032.96,
    "text": "you want to, you can specify the specific database you want to connect to that believe there's a flag",
    "textdich": ""
  },
  {
    "start": 44032.96,
    "end": 44038.64,
    "text": "it might be dash D. Yep, the database name. So you could technically say dash D Postgres, but",
    "textdich": ""
  },
  {
    "start": 44038.64,
    "end": 44044.8,
    "text": "Postgres is going to be the default. So you can leave that off. And we're connecting to our local",
    "textdich": ""
  },
  {
    "start": 44044.8,
    "end": 44049.28,
    "text": "host, which is going to be the default as well. So we don't need to pass in that. And the port,",
    "textdich": ""
  },
  {
    "start": 44049.28,
    "end": 44053.84,
    "text": "we can also pass that in the default is 5432, which is what it's running on. So we don't really have",
    "textdich": ""
  },
  {
    "start": 44053.84,
    "end": 44059.6,
    "text": "to touch anything else. And we're going to try and connect like this. So let's see what happens.",
    "textdich": ""
  },
  {
    "start": 44059.6,
    "end": 44064.8,
    "text": "And we get this error, it says a psql error fatal peer authentication failed for user Postgres.",
    "textdich": ""
  },
  {
    "start": 44064.8,
    "end": 44070.4,
    "text": "So for some reason, it's saying peer authentication failed. And this is a special meaning, right? It",
    "textdich": ""
  },
  {
    "start": 44070.4,
    "end": 44074.88,
    "text": "sounds like a regular login failure, but it's not. And it's because Postgres when you install it on",
    "textdich": ""
  },
  {
    "start": 44074.88,
    "end": 44080.72,
    "text": "Ubuntu, it has a special way of authenticating users by default. So when it comes to local",
    "textdich": ""
  },
  {
    "start": 44080.72,
    "end": 44085.36,
    "text": "authentication, and what I mean by local authentication is the Ubuntu VM connecting",
    "textdich": ""
  },
  {
    "start": 44085.36,
    "end": 44090.4,
    "text": "to the database itself. That's what a local authentication means. Whereas if I'm connecting",
    "textdich": ""
  },
  {
    "start": 44090.4,
    "end": 44096.32,
    "text": "from my Windows machine to the Postgres database on this, on this Ubuntu VM, that is not called",
    "textdich": ""
  },
  {
    "start": 44096.32,
    "end": 44100.64,
    "text": "that is not considered local authentication. So since we are on the same machine that we're",
    "textdich": ""
  },
  {
    "start": 44100.64,
    "end": 44106.16,
    "text": "trying to connect to our database, Postgres considers this a local authentication. And on",
    "textdich": ""
  },
  {
    "start": 44106.16,
    "end": 44112.48,
    "text": "Ubuntu, we have a special configuration called peer authentication. Now this is the default",
    "textdich": ""
  },
  {
    "start": 44112.48,
    "end": 44116.72,
    "text": "configuration for Postgres. And what peer authentication does is it actually takes the",
    "textdich": ""
  },
  {
    "start": 44116.72,
    "end": 44123.04,
    "text": "user that's logged in to the Ubuntu machine, and it tries to log in as that user essentially.",
    "textdich": ""
  },
  {
    "start": 44123.04,
    "end": 44128.56,
    "text": "So even though we pass in the dash u flag, since I am technically logged in as the root user,",
    "textdich": ""
  },
  {
    "start": 44128.56,
    "end": 44131.84,
    "text": "right, Postgres is going to error out because it will only allow",
    "textdich": ""
  },
  {
    "start": 44131.84,
    "end": 44138.72,
    "text": "a Ubuntu user called Postgres to be able to log in as the user called Postgres on the Postgres",
    "textdich": ""
  },
  {
    "start": 44138.72,
    "end": 44144.48,
    "text": "database, little confusing, right, but it actually connects, it actually obtains the username from",
    "textdich": ""
  },
  {
    "start": 44144.48,
    "end": 44149.2,
    "text": "the Linux kernel. So whoever you're logged in as that's the only person you can log in as. And so",
    "textdich": ""
  },
  {
    "start": 44149.2,
    "end": 44155.28,
    "text": "what we can do is first of all, because this is the default configuration, Postgres understands",
    "textdich": ""
  },
  {
    "start": 44155.28,
    "end": 44162.64,
    "text": "that so Postgres actually created a user on our Ubuntu VM called Postgres. So if you want to see",
    "textdich": ""
  },
  {
    "start": 44162.64,
    "end": 44168.88,
    "text": "the list of all the users on your Ubuntu machine, you can do a sudo cat slash etc slash path wd.",
    "textdich": ""
  },
  {
    "start": 44171.52,
    "end": 44174.8,
    "text": "And you can see all of the users that have been installed. And you can see that it actually",
    "textdich": ""
  },
  {
    "start": 44174.8,
    "end": 44180.56,
    "text": "created a user called Postgres on this machine. So I'm going to change that user so we can do that",
    "textdich": ""
  },
  {
    "start": 44180.56,
    "end": 44187.84,
    "text": "by doing Sue dash and then the name of the user. So Postgres. Right and notice how we changed to",
    "textdich": ""
  },
  {
    "start": 44187.84,
    "end": 44199.36,
    "text": "this specific user. And so now if I try to do p SQL dash u Postgres, we can now log into the",
    "textdich": ""
  },
  {
    "start": 44199.36,
    "end": 44204.08,
    "text": "database. So if you see this, that means you're successfully logged into the Postgres database.",
    "textdich": ""
  },
  {
    "start": 44204.08,
    "end": 44207.92,
    "text": "And while we're logged in here before we do anything else, because first of all, we're going",
    "textdich": ""
  },
  {
    "start": 44207.92,
    "end": 44213.04,
    "text": "to get rid of that peer authentication because I hate it. We want to create a password for our",
    "textdich": ""
  },
  {
    "start": 44213.04,
    "end": 44218.08,
    "text": "Postgres user. And to assign a password to this user, we can say, backslash",
    "textdich": ""
  },
  {
    "start": 44220.48,
    "end": 44224.48,
    "text": "password, and then the name of the user that we want to assign a password to. So we're going to",
    "textdich": ""
  },
  {
    "start": 44224.48,
    "end": 44230.88,
    "text": "use the Postgres user. And then we're here, we're going to provide our password. All right. And so",
    "textdich": ""
  },
  {
    "start": 44230.88,
    "end": 44236.24,
    "text": "now we should have a password. And I'm going to exit out of here. So to exit out of the Postgres",
    "textdich": ""
  },
  {
    "start": 44236.24,
    "end": 44242.4,
    "text": "console or terminal, whatever you want to call it, you just do backslash, and then Q for quick. And",
    "textdich": ""
  },
  {
    "start": 44242.4,
    "end": 44246.64,
    "text": "then we're still logged in as the Postgres user. And so if you type in exit, it's going to take us",
    "textdich": ""
  },
  {
    "start": 44246.64,
    "end": 44252.24,
    "text": "back to the root user. There's going to be a few more things that I want to change to our Postgres",
    "textdich": ""
  },
  {
    "start": 44252.24,
    "end": 44258.64,
    "text": "installation. And so anytime you want to modify the configs for Postgres, what we want to do is",
    "textdich": ""
  },
  {
    "start": 44258.64,
    "end": 44262.08,
    "text": "we want to move to a different directory. So the command to move to a different directory is CD.",
    "textdich": ""
  },
  {
    "start": 44262.08,
    "end": 44266.8,
    "text": "And then we specify the path to the directory. So we want to go to slash etc. So generally,",
    "textdich": ""
  },
  {
    "start": 44266.8,
    "end": 44271.6,
    "text": "any application to install on Linux or at a bunch of machine, usually the configs for that,",
    "textdich": ""
  },
  {
    "start": 44272.16,
    "end": 44276.08,
    "text": "that package or that application is going to be in slash etc. And then here, I'm going to say",
    "textdich": ""
  },
  {
    "start": 44276.08,
    "end": 44282.48,
    "text": "Postgres slash. And then if I hit tab, you can see that it's going to auto complete. So you're",
    "textdich": ""
  },
  {
    "start": 44282.48,
    "end": 44288.08,
    "text": "going to specify whatever version of Postgres you ran. And so in this case, I have Postgres 12. But",
    "textdich": ""
  },
  {
    "start": 44288.08,
    "end": 44294.88,
    "text": "if you installed a version 13, then you would put in it would be a folder called 13. And then we",
    "textdich": ""
  },
  {
    "start": 44294.88,
    "end": 44299.92,
    "text": "will go to main. And if I type in LS, we'll see all of the files that we have in this folder.",
    "textdich": ""
  },
  {
    "start": 44299.92,
    "end": 44304.72,
    "text": "And the two main files that we want to focus on our PG underscore hba conf. So this is where we",
    "textdich": ""
  },
  {
    "start": 44304.72,
    "end": 44311.92,
    "text": "configure Postgres, as well as Postgres ql.conf. And so we're going to open up Postgres ql.conf.",
    "textdich": ""
  },
  {
    "start": 44311.92,
    "end": 44320.16,
    "text": "So I'm gonna say sudo vi, Postgres ql.conf. And we want to kind of scroll down.",
    "textdich": ""
  },
  {
    "start": 44322.96,
    "end": 44327.68,
    "text": "And we want to take a look at the connections and authentication section. And so if you take a look",
    "textdich": ""
  },
  {
    "start": 44327.68,
    "end": 44333.12,
    "text": "at the default configuration, we can see that under listen addresses, it's only going to allow",
    "textdich": ""
  },
  {
    "start": 44333.12,
    "end": 44338.24,
    "text": "localhost to connect to our database. That means only when we're logged into this Ubuntu VM,",
    "textdich": ""
  },
  {
    "start": 44338.24,
    "end": 44344.0,
    "text": "can we then log in to this Postgres database, it is not going to allow me to take PG admin on my",
    "textdich": ""
  },
  {
    "start": 44344.0,
    "end": 44348.96,
    "text": "Windows machine and connect to it remotely. And so I want to change this. And technically,",
    "textdich": ""
  },
  {
    "start": 44348.96,
    "end": 44353.6,
    "text": "you don't have to do this. But you know, if you do want to be able to connect to it remotely,",
    "textdich": ""
  },
  {
    "start": 44353.6,
    "end": 44360.24,
    "text": "then you want to change these configs. And so I'm going to put this config, we're going to say,",
    "textdich": ""
  },
  {
    "start": 44360.24,
    "end": 44368.48,
    "text": "listen, underscore addresses, equals. And then here, you would provide the IP addresses.",
    "textdich": ""
  },
  {
    "start": 44370.64,
    "end": 44374.96,
    "text": "And so, you know, if you wanted to only be able to connect to this database from, you know,",
    "textdich": ""
  },
  {
    "start": 44375.68,
    "end": 44380.08,
    "text": "your, your office, then you would put the IP address or domain name of your office.",
    "textdich": ""
  },
  {
    "start": 44380.72,
    "end": 44384.96,
    "text": "If you want to allow all IP addresses to connect to it, you would just do a star. So that's what",
    "textdich": ""
  },
  {
    "start": 44384.96,
    "end": 44389.44,
    "text": "I'm going to do. It's going to allow me to connect to this regardless of what computer I'm on,",
    "textdich": ""
  },
  {
    "start": 44389.44,
    "end": 44394.24,
    "text": "or where I am on the network. However, it generally when it comes to best practices,",
    "textdich": ""
  },
  {
    "start": 44394.24,
    "end": 44398.96,
    "text": "you want to really narrow down the scope of the different IPs and domains that can access your",
    "textdich": ""
  },
  {
    "start": 44398.96,
    "end": 44402.16,
    "text": "database, because that's the most important part of your application, you want to make sure it's",
    "textdich": ""
  },
  {
    "start": 44402.16,
    "end": 44407.76,
    "text": "as secure as possible. Alright, so we'll save this, that's the only change we need to make in this",
    "textdich": ""
  },
  {
    "start": 44407.76,
    "end": 44413.84,
    "text": "file. Then the next file that we need to change is PG underscore HBA comp. So we'll do the same",
    "textdich": ""
  },
  {
    "start": 44413.84,
    "end": 44421.76,
    "text": "thing to the VIP GHBA comp. And we're going to scroll down. And we're going to take a look at",
    "textdich": ""
  },
  {
    "start": 44421.76,
    "end": 44427.52,
    "text": "our default configuration. So I did mention that when we connect locally, it uses a peer",
    "textdich": ""
  },
  {
    "start": 44427.52,
    "end": 44433.2,
    "text": "authentication. So you can see that for local connections. And I forget what the second column",
    "textdich": ""
  },
  {
    "start": 44433.2,
    "end": 44437.84,
    "text": "is, if we actually scroll up, I got to go up, actually, let's see what the second column is.",
    "textdich": ""
  },
  {
    "start": 44437.84,
    "end": 44443.6,
    "text": "Okay, so this is going to be the format of it. So this is going to specify what type of connection,",
    "textdich": ""
  },
  {
    "start": 44444.24,
    "end": 44448.88,
    "text": "then what database this connection should be associated with, or this rule should be associated",
    "textdich": ""
  },
  {
    "start": 44448.88,
    "end": 44454.8,
    "text": "with, what's the user and then what's the method? Well, we also have address and method if you are",
    "textdich": ""
  },
  {
    "start": 44454.8,
    "end": 44460.08,
    "text": "connecting remotely. So we want to change this. So we want to say for local users, regardless of,",
    "textdich": ""
  },
  {
    "start": 44460.08,
    "end": 44464.72,
    "text": "you know, what database they connect to, and what user they connect as, we want to make sure that",
    "textdich": ""
  },
  {
    "start": 44464.72,
    "end": 44469.92,
    "text": "we do not use peer authentication, we use regular password based authentication, which is MD five",
    "textdich": ""
  },
  {
    "start": 44469.92,
    "end": 44478.64,
    "text": "in this case. And so here, we're just going to change this. So this is saying, for any database,",
    "textdich": ""
  },
  {
    "start": 44478.64,
    "end": 44484.32,
    "text": "this rule is going to apply for the user Postgres, we're going to say, instead of peer, we want MD",
    "textdich": ""
  },
  {
    "start": 44484.32,
    "end": 44499.52,
    "text": "five like we have here. We'll say MD five. And we're going to change this one to MD five as well.",
    "textdich": ""
  },
  {
    "start": 44503.2,
    "end": 44508.8,
    "text": "And then lastly, for these two sections right here, these are going to be for remote connection. So if",
    "textdich": ""
  },
  {
    "start": 44508.8,
    "end": 44512.32,
    "text": "I want to connect from my Windows machine, this is the rule that's going to apply. So this is",
    "textdich": ""
  },
  {
    "start": 44512.32,
    "end": 44518.8,
    "text": "saying that for you know, hosts, for any database, any user, right now, the only IP addresses that",
    "textdich": ""
  },
  {
    "start": 44518.8,
    "end": 44524.56,
    "text": "can connect to it are going to be 127001, which means localhost. So that's effectively blocking",
    "textdich": ""
  },
  {
    "start": 44524.56,
    "end": 44532.88,
    "text": "all remote connections. So I'm going to go here, and we are going to change this. And I'm going to",
    "textdich": ""
  },
  {
    "start": 44532.88,
    "end": 44540.24,
    "text": "say, zero dot zero dot zero slash zero. So this means any IP address. And then just to keep things",
    "textdich": ""
  },
  {
    "start": 44540.24,
    "end": 44543.2,
    "text": "nicely formatted, I'm going to move that over there. And then we're going to do the same thing",
    "textdich": ""
  },
  {
    "start": 44543.2,
    "end": 44555.84,
    "text": "for IPv6, which is what this line is doing. And I'm going to say this, so this is the syntax in",
    "textdich": ""
  },
  {
    "start": 44555.84,
    "end": 44565.28,
    "text": "IPv6 for saying any IP address. And that should be all of the config changes that we need to make.",
    "textdich": ""
  },
  {
    "start": 44565.28,
    "end": 44571.84,
    "text": "And so I'm going to exit out of here and make sure to save it. All right. And at this point,",
    "textdich": ""
  },
  {
    "start": 44571.84,
    "end": 44576.48,
    "text": "you probably think the changes have been made. However, generally, when you change any configuration",
    "textdich": ""
  },
  {
    "start": 44576.48,
    "end": 44581.44,
    "text": "file, you actually have to restart the application for the changes to take effect. And so to restart",
    "textdich": ""
  },
  {
    "start": 44581.44,
    "end": 44587.36,
    "text": "an application, you do system CTL, restart, and then the name of the application. So this is going",
    "textdich": ""
  },
  {
    "start": 44587.36,
    "end": 44603.28,
    "text": "to be Postgres ql. All right, and it should be running at this point. So let's try this out now.",
    "textdich": ""
  },
  {
    "start": 44604.64,
    "end": 44608.8,
    "text": "Right now, we are still logged in as the root user. So remember, before we actually had to change to",
    "textdich": ""
  },
  {
    "start": 44608.8,
    "end": 44613.84,
    "text": "the Postgres user on our Ubuntu machine before we can log in as the Postgres user. So now instead,",
    "textdich": ""
  },
  {
    "start": 44613.84,
    "end": 44620.48,
    "text": "I'm going to do p SQL dash u Postgres. And I want to see if I'm able to log in. And so now I actually",
    "textdich": ""
  },
  {
    "start": 44620.48,
    "end": 44624.56,
    "text": "get a prompt for a password. So it looks like things are working so far. So I'll try my password.",
    "textdich": ""
  },
  {
    "start": 44627.28,
    "end": 44633.92,
    "text": "And now we are successfully logged in to our Postgres database. That's perfect. Now,",
    "textdich": ""
  },
  {
    "start": 44633.92,
    "end": 44639.84,
    "text": "let's actually try to connect to it using PG admin. And so PG admin, I've got my local machine,",
    "textdich": ""
  },
  {
    "start": 44639.84,
    "end": 44643.28,
    "text": "which is right here. If I want to add a new machine, I'm going to right click on servers,",
    "textdich": ""
  },
  {
    "start": 44643.28,
    "end": 44649.84,
    "text": "we're gonna select create server. Give this a name, I'm going to call this fast API dash prod.",
    "textdich": ""
  },
  {
    "start": 44651.68,
    "end": 44656.56,
    "text": "Call it whatever you want. Connection details. Here, we're going to provide the IP address. So",
    "textdich": ""
  },
  {
    "start": 44656.56,
    "end": 44664.08,
    "text": "I already forgot what the IP address of our machine. We logged in 13412 to whatever that is.",
    "textdich": ""
  },
  {
    "start": 44664.08,
    "end": 44673.36,
    "text": "We're going to provide this. That's default port. That's the the user we're going to connect as.",
    "textdich": ""
  },
  {
    "start": 44674.56,
    "end": 44676.8,
    "text": "And then if we want to, we can put in a password here as well.",
    "textdich": ""
  },
  {
    "start": 44680.88,
    "end": 44684.88,
    "text": "All right, and now we are successfully logged in to our production database.",
    "textdich": ""
  },
  {
    "start": 44684.88,
    "end": 44689.04,
    "text": "If I open this up, take a look at the databases, we just have the one default database that always",
    "textdich": ""
  },
  {
    "start": 44689.04,
    "end": 44695.36,
    "text": "gets installed. Till now, we've done everything as the root user. And it's generally frowned upon in",
    "textdich": ""
  },
  {
    "start": 44695.36,
    "end": 44700.64,
    "text": "the Linux world, regardless of what flavor Linux using it could be Ubuntu, CentOS, Red Hat, you",
    "textdich": ""
  },
  {
    "start": 44700.64,
    "end": 44705.68,
    "text": "generally don't want to be logged in as the root user, because it opens the door for potential",
    "textdich": ""
  },
  {
    "start": 44705.68,
    "end": 44710.16,
    "text": "security vulnerabilities. And it opens the door for you to potentially break your machine. And so",
    "textdich": ""
  },
  {
    "start": 44710.16,
    "end": 44714.24,
    "text": "what we're going to do is we're going to create another user, this user is going to have root",
    "textdich": ""
  },
  {
    "start": 44714.24,
    "end": 44718.32,
    "text": "privilege. So he'll still be able to make any of the changes. But it's better than being logged in",
    "textdich": ""
  },
  {
    "start": 44718.32,
    "end": 44724.0,
    "text": "as the root user. And more importantly, when we actually install our API, our Python application,",
    "textdich": ""
  },
  {
    "start": 44724.0,
    "end": 44729.2,
    "text": "we're going to have our non root user be the one responsible for starting it, we don't want the",
    "textdich": ""
  },
  {
    "start": 44729.2,
    "end": 44734.08,
    "text": "root user to start the application, because then we're giving our application root access to our",
    "textdich": ""
  },
  {
    "start": 44734.08,
    "end": 44740.0,
    "text": "machine. And that is very risky. So instead, we want a non root user to start our API.",
    "textdich": ""
  },
  {
    "start": 44740.96,
    "end": 44744.72,
    "text": "So on Linux to create a new user, you type in the command user mod.",
    "textdich": ""
  },
  {
    "start": 44744.72,
    "end": 44753.84,
    "text": "Sorry, not user mod, we do add user, and then the name of the user. So pick any name you want. I'm",
    "textdich": ""
  },
  {
    "start": 44753.84,
    "end": 44758.96,
    "text": "going to do Sanjeev in this case, but you can name it like fast API or whatever you want.",
    "textdich": ""
  },
  {
    "start": 44760.64,
    "end": 44763.52,
    "text": "And then it's going to ask you for a password. So put whatever password you want.",
    "textdich": ""
  },
  {
    "start": 44766.24,
    "end": 44768.72,
    "text": "And then you can provide your name, but none of that really matters.",
    "textdich": ""
  },
  {
    "start": 44768.72,
    "end": 44775.12,
    "text": "And just hit Y here. And so we've now created a user. And what we can do is if you want to,",
    "textdich": ""
  },
  {
    "start": 44775.12,
    "end": 44779.76,
    "text": "you can do a sue dash and then Sanjeev. And then it's going to move you to the Sanjeev user.",
    "textdich": ""
  },
  {
    "start": 44780.48,
    "end": 44785.28,
    "text": "Or what you can do is you can exit out of this connection, and then exit out of here altogether.",
    "textdich": ""
  },
  {
    "start": 44785.28,
    "end": 44790.0,
    "text": "So now we're back on our local machine. And instead of when you do an SSH route to add whatever,",
    "textdich": ""
  },
  {
    "start": 44790.0,
    "end": 44794.32,
    "text": "you can change this to the new user that you just created. And so that's going to log you in directly",
    "textdich": ""
  },
  {
    "start": 44794.32,
    "end": 44805.76,
    "text": "as that user. Now this user, by default doesn't have root access. So if I tried to do, you know,",
    "textdich": ""
  },
  {
    "start": 44805.76,
    "end": 44817.52,
    "text": "pseudo apt upgrade, right, it's gonna ask for pseudo password for Sanjeev. And I'll put my password",
    "textdich": ""
  },
  {
    "start": 44817.52,
    "end": 44822.0,
    "text": "in and take a look at the error that we get. It says Sanjeev is not in the sudoers file,",
    "textdich": ""
  },
  {
    "start": 44822.0,
    "end": 44826.4,
    "text": "this incident will be reported. So anytime you create a user, you have to give him",
    "textdich": ""
  },
  {
    "start": 44826.4,
    "end": 44831.04,
    "text": "pseudo access or root access so that he can actually perform operations that require root",
    "textdich": ""
  },
  {
    "start": 44831.04,
    "end": 44836.4,
    "text": "privilege. So we're gonna have to exit out of here. Once again, I'm going to log back in as the root",
    "textdich": ""
  },
  {
    "start": 44836.4,
    "end": 44846.48,
    "text": "user. And to give a user root access, we use run the command user mod. And we pass in the flag",
    "textdich": ""
  },
  {
    "start": 44846.48,
    "end": 44852.16,
    "text": "dash a and then capital G, make sure it's capital. And we say sudo and then the name of the user. So",
    "textdich": ""
  },
  {
    "start": 44852.16,
    "end": 44857.2,
    "text": "I created a user named Sanjeev. So I'll just put that in. And so at this point, the user Sanjeev",
    "textdich": ""
  },
  {
    "start": 44857.2,
    "end": 44861.84,
    "text": "has root access. So let me exit out of here again. And we're going to connect back as the user Sanjeev.",
    "textdich": ""
  },
  {
    "start": 44865.12,
    "end": 44873.76,
    "text": "And so now I'm going to run sudo apt upgrade. And so if I try that, put my password in,",
    "textdich": ""
  },
  {
    "start": 44873.76,
    "end": 44877.12,
    "text": "you can see the command run. So we now successfully have root access.",
    "textdich": ""
  },
  {
    "start": 44878.08,
    "end": 44883.92,
    "text": "If you type in PWD, this is going to tell you the exact directory that you're in. So I'm in a folder",
    "textdich": ""
  },
  {
    "start": 44883.92,
    "end": 44890.08,
    "text": "called slash home slash Sanjeev. So whatever your username was created as, right, it's going to your",
    "textdich": ""
  },
  {
    "start": 44890.08,
    "end": 44894.56,
    "text": "default home directory is going to be slash home and then your username. And so while you're in your",
    "textdich": ""
  },
  {
    "start": 44894.56,
    "end": 44899.6,
    "text": "home directory, and if you don't know how to get to your home directory, you could just say CD,",
    "textdich": ""
  },
  {
    "start": 44899.6,
    "end": 44904.8,
    "text": "and then tilde. So that's going to take you to your home directory, or you can do CD slash home,",
    "textdich": ""
  },
  {
    "start": 44904.8,
    "end": 44910.16,
    "text": "and then your username that's going to take you here. Whoops. All right, so once you're in your",
    "textdich": ""
  },
  {
    "start": 44910.16,
    "end": 44913.84,
    "text": "home directory, what we're going to do is we're going to create a folder for our application.",
    "textdich": ""
  },
  {
    "start": 44913.84,
    "end": 44916.64,
    "text": "Technically, you can put this anywhere on your machine, I'm just going to put it in my home",
    "textdich": ""
  },
  {
    "start": 44916.64,
    "end": 44922.4,
    "text": "directory. So I'm going to call this, this folder app, or we could call it fast API, it doesn't really",
    "textdich": ""
  },
  {
    "start": 44922.4,
    "end": 44927.04,
    "text": "matter. They'll say MK dir, this is the command to create an app, sorry, create a directory,",
    "textdich": ""
  },
  {
    "start": 44927.04,
    "end": 44935.28,
    "text": "I call this app. And then to move into that app, we do CD app. And within this folder,",
    "textdich": ""
  },
  {
    "start": 44935.28,
    "end": 44938.64,
    "text": "what we're going to do is just like we did on our local machine, we're going to create a virtual",
    "textdich": ""
  },
  {
    "start": 44938.64,
    "end": 44946.8,
    "text": "environment. So I'm going to say a virtual nv. And then we'll call our virtual environment v nv.",
    "textdich": ""
  },
  {
    "start": 44950.08,
    "end": 44956.08,
    "text": "Alright, and then if I do an LS minus LA, let's just make sure I created the virtual nv folder,",
    "textdich": ""
  },
  {
    "start": 44956.08,
    "end": 44960.56,
    "text": "then to activate our virtual environment, we'll type in the command source. And we go into the",
    "textdich": ""
  },
  {
    "start": 44960.56,
    "end": 44966.8,
    "text": "that folder, the bin folder, and then the activate file. All right, and then we should see this little",
    "textdich": ""
  },
  {
    "start": 44966.8,
    "end": 44970.4,
    "text": "nugget right here. So this is going to let us know that we are currently in a virtual environment.",
    "textdich": ""
  },
  {
    "start": 44971.04,
    "end": 44974.88,
    "text": "And if you ever want to get out of the virtual environment, you can just say deactivate.",
    "textdich": ""
  },
  {
    "start": 44977.44,
    "end": 44980.8,
    "text": "Within our app directory, we're going to create another folder called source. So this is going",
    "textdich": ""
  },
  {
    "start": 44980.8,
    "end": 44987.76,
    "text": "to contain all of our source code. So we'll CD into the source. And now what we're going to do",
    "textdich": ""
  },
  {
    "start": 44987.76,
    "end": 44995.04,
    "text": "is we're going to copy all of our code onto this machine. And so how do we do that? Well,",
    "textdich": ""
  },
  {
    "start": 44995.04,
    "end": 45000.48,
    "text": "since we already have it stored on GitHub, all we have to do is just go to the URL for our",
    "textdich": ""
  },
  {
    "start": 45001.12,
    "end": 45006.56,
    "text": "repository. So this is my repository that I created. This is the main one called fast API",
    "textdich": ""
  },
  {
    "start": 45006.56,
    "end": 45011.2,
    "text": "dash course. This is public. So any of you guys can access this, but you're going to go to your",
    "textdich": ""
  },
  {
    "start": 45011.2,
    "end": 45016.16,
    "text": "specific repository. And once you get to the repository, this is going to be the URL,",
    "textdich": ""
  },
  {
    "start": 45016.16,
    "end": 45019.76,
    "text": "or you could just select code right here. And then this is going to give you a little link",
    "textdich": ""
  },
  {
    "start": 45019.76,
    "end": 45025.76,
    "text": "to copy. So we can just copy that. And then we can go back here. And we can say get clone,",
    "textdich": ""
  },
  {
    "start": 45027.2,
    "end": 45032.8,
    "text": "paste that in here. And then before you hit enter, hit space, and then dot. So that's going to install",
    "textdich": ""
  },
  {
    "start": 45032.8,
    "end": 45038.64,
    "text": "in this current directory. And it's not going to create another directory. That's the name of my",
    "textdich": ""
  },
  {
    "start": 45038.64,
    "end": 45043.52,
    "text": "repository, which is kind of annoying. I don't actually want a directory called fast API course.",
    "textdich": ""
  },
  {
    "start": 45044.32,
    "end": 45048.08,
    "text": "So we'll hit that, we'll run it, it's going to clone it. And at this point,",
    "textdich": ""
  },
  {
    "start": 45048.08,
    "end": 45055.92,
    "text": "if I do an LS, we should see all of our specific code. Great. Now, before we do anything else,",
    "textdich": ""
  },
  {
    "start": 45055.92,
    "end": 45064.32,
    "text": "let's reactivate our virtual environment. So we'll say source, the envy, lib,",
    "textdich": ""
  },
  {
    "start": 45065.44,
    "end": 45069.68,
    "text": "or not live bin activate. All right, we've got our virtual environment set up again.",
    "textdich": ""
  },
  {
    "start": 45070.4,
    "end": 45076.0,
    "text": "And we're going to move into our source directory. And if you recall, remember, we don't have any",
    "textdich": ""
  },
  {
    "start": 45076.0,
    "end": 45081.52,
    "text": "packages installed. So we don't even have fast API installed. But we do have our requirements dot txt",
    "textdich": ""
  },
  {
    "start": 45081.52,
    "end": 45086.08,
    "text": "file. So if I just cat that real quick, if you forgot what that was, that's going to tell this",
    "textdich": ""
  },
  {
    "start": 45086.08,
    "end": 45092.96,
    "text": "machine exactly what version of every single dependency we need to install for our application",
    "textdich": ""
  },
  {
    "start": 45092.96,
    "end": 45100.0,
    "text": "to work. And so we can just install all of those with one command by doing pip install dash r",
    "textdich": ""
  },
  {
    "start": 45100.0,
    "end": 45101.2,
    "text": "requirements dot txt.",
    "textdich": ""
  },
  {
    "start": 45101.2,
    "end": 45115.6,
    "text": "All right, so I got an error. And this was expected on my end, because when I was running",
    "textdich": ""
  },
  {
    "start": 45115.6,
    "end": 45118.96,
    "text": "through this, I ran into this error. And so if you see this error right here, you know,",
    "textdich": ""
  },
  {
    "start": 45118.96,
    "end": 45123.2,
    "text": "anytime you see red, it's never good. But what you want to do is you want to go right about here",
    "textdich": ""
  },
  {
    "start": 45123.2,
    "end": 45129.28,
    "text": "where it says include and then lib pq dash fv dot h, this is implying that we're missing a package",
    "textdich": ""
  },
  {
    "start": 45129.28,
    "end": 45133.12,
    "text": "that's probably called lib pq. If you actually search this error, you're going to get the same",
    "textdich": ""
  },
  {
    "start": 45133.12,
    "end": 45138.16,
    "text": "result. So if you run into this exact issue, or even another issue, just look for the library",
    "textdich": ""
  },
  {
    "start": 45138.16,
    "end": 45142.72,
    "text": "mentioned right here, or it says that include line, right and just search for that library and",
    "textdich": ""
  },
  {
    "start": 45142.72,
    "end": 45147.28,
    "text": "just see how to install it. Okay, so it's since it said we're missing this library, I'm going to",
    "textdich": ""
  },
  {
    "start": 45147.28,
    "end": 45150.88,
    "text": "do a sorry, it's not actually a pip install, we actually have to do an app install. So we do",
    "textdich": ""
  },
  {
    "start": 45150.88,
    "end": 45159.36,
    "text": "sudo apt install. And actually, before I even do that, I'm going to deactivate my virtual environment.",
    "textdich": ""
  },
  {
    "start": 45159.36,
    "end": 45176.48,
    "text": "And we're going to do a sudo apt install lib pq dash dev. Alright, so now that we've got that library",
    "textdich": ""
  },
  {
    "start": 45176.48,
    "end": 45181.2,
    "text": "that missing library installed, we're going to then go back into our virtual environment.",
    "textdich": ""
  },
  {
    "start": 45188.32,
    "end": 45191.76,
    "text": "And we're going to run that same command to install all of our requirements.",
    "textdich": ""
  },
  {
    "start": 45194.64,
    "end": 45196.24,
    "text": "And I have to move into my source folder.",
    "textdich": ""
  },
  {
    "start": 45200.72,
    "end": 45205.6,
    "text": "All right, and it looks like we have successfully installed all of our packages.",
    "textdich": ""
  },
  {
    "start": 45205.6,
    "end": 45209.84,
    "text": "The next thing that I actually want to do is let's go ahead and try to start our application.",
    "textdich": ""
  },
  {
    "start": 45210.72,
    "end": 45216.96,
    "text": "So we have access to uv corn. So we can just do a uv corn app.main. So this is the same exact",
    "textdich": ""
  },
  {
    "start": 45216.96,
    "end": 45222.16,
    "text": "command that we ran on our local machine and then app, we don't need to pass in the reload flag,",
    "textdich": ""
  },
  {
    "start": 45222.16,
    "end": 45226.08,
    "text": "because this is our production server. So we would never want it to automatically reload on changes,",
    "textdich": ""
  },
  {
    "start": 45226.08,
    "end": 45229.76,
    "text": "because no one should be making changes on our production server. So we'll run this and let's",
    "textdich": ""
  },
  {
    "start": 45229.76,
    "end": 45234.88,
    "text": "see what happens. And it looks like we get eight validation errors, which is to be expected,",
    "textdich": ""
  },
  {
    "start": 45234.88,
    "end": 45238.88,
    "text": "because it looks like we are missing all of our environment variables. And that's correct,",
    "textdich": ""
  },
  {
    "start": 45238.88,
    "end": 45242.64,
    "text": "we never set our environment variable. So in the next section, we're going to take a look at how",
    "textdich": ""
  },
  {
    "start": 45242.64,
    "end": 45248.64,
    "text": "we can set up our environment variables on our Linux machine. Okay, so let's get started on",
    "textdich": ""
  },
  {
    "start": 45248.64,
    "end": 45253.76,
    "text": "creating our environment variables. So what we want to do is to create an environment variable",
    "textdich": ""
  },
  {
    "start": 45253.76,
    "end": 45260.4,
    "text": "on a Linux machine, we say export. And then we give the name of the variable here, this is just",
    "textdich": ""
  },
  {
    "start": 45260.4,
    "end": 45266.8,
    "text": "a demonstration. So I'm gonna say my underscore name. And then we set equals and then whatever",
    "textdich": ""
  },
  {
    "start": 45266.8,
    "end": 45269.44,
    "text": "value we want to give it so you can give it anything. I'm just gonna say this is",
    "textdich": ""
  },
  {
    "start": 45271.68,
    "end": 45276.96,
    "text": "and jeeve. Alright, so we'll hit that we'll run that. And then to actually see if this worked",
    "textdich": ""
  },
  {
    "start": 45276.96,
    "end": 45283.12,
    "text": "to see all of your environment variables, we just say print n v. And so this is going to spit out",
    "textdich": ""
  },
  {
    "start": 45283.12,
    "end": 45288.4,
    "text": "a whole bunch of default environment variables. And then to see the one we sent, just kind of",
    "textdich": ""
  },
  {
    "start": 45288.4,
    "end": 45292.8,
    "text": "look down, look for my name, and we could see that it was successfully set. So at this point,",
    "textdich": ""
  },
  {
    "start": 45292.8,
    "end": 45298.4,
    "text": "we could just go one by one, and manually set all of these. However, that is a very inconvenient",
    "textdich": ""
  },
  {
    "start": 45298.4,
    "end": 45304.08,
    "text": "process. And I wouldn't expect you guys to do that. Because, you know, we've got seven or eight, and",
    "textdich": ""
  },
  {
    "start": 45304.08,
    "end": 45311.12,
    "text": "any other project could have 10 2030. So it's not really realistic to do that, you know, one",
    "textdich": ""
  },
  {
    "start": 45311.12,
    "end": 45315.12,
    "text": "environment variable at a time. So let me quickly remove this environment variable, which you can",
    "textdich": ""
  },
  {
    "start": 45315.12,
    "end": 45321.04,
    "text": "do with the unset command. And so I could just say unset my underscore name. And if I do a print",
    "textdich": ""
  },
  {
    "start": 45321.04,
    "end": 45325.28,
    "text": "n v, we should see that it's no longer there. And what we're going to do is I'm going to go back to",
    "textdich": ""
  },
  {
    "start": 45325.28,
    "end": 45329.2,
    "text": "my home directory, because I don't want to mess around in my application directory, I'm gonna go",
    "textdich": ""
  },
  {
    "start": 45329.2,
    "end": 45334.88,
    "text": "CD, and then the tilde, or you can do slash home slash, and then whatever your username is,",
    "textdich": ""
  },
  {
    "start": 45336.32,
    "end": 45339.6,
    "text": "she's gonna do that. Alright, so this is gonna take me back to my home directory.",
    "textdich": ""
  },
  {
    "start": 45339.6,
    "end": 45343.92,
    "text": "And I'm going to create a brand new file. And if you want to create an empty file,",
    "textdich": ""
  },
  {
    "start": 45343.92,
    "end": 45347.6,
    "text": "you can just say touch, and then I'm going to just call this dot e and v. All right,",
    "textdich": ""
  },
  {
    "start": 45347.6,
    "end": 45353.36,
    "text": "so we shouldn't do an LS minus LA, we should have that dot e and v file right here. And I'm going",
    "textdich": ""
  },
  {
    "start": 45353.36,
    "end": 45362.08,
    "text": "to open that up. And here, I can provide a list of all of the environment variables. So I can say,",
    "textdich": ""
  },
  {
    "start": 45362.88,
    "end": 45367.92,
    "text": "and keep in mind, this has to be in the same exact syntax. So we have to say just like we would put",
    "textdich": ""
  },
  {
    "start": 45367.92,
    "end": 45374.24,
    "text": "on the CLI, we'd say export, then the name of the variable. So I'll say, you know, my name again,",
    "textdich": ""
  },
  {
    "start": 45374.24,
    "end": 45378.08,
    "text": "she goes Sanjeev. And then let's maybe let's do my underscore password,",
    "textdich": ""
  },
  {
    "start": 45380.64,
    "end": 45389.92,
    "text": "which is going to be password 123. So I can save this file. And I can say, source,",
    "textdich": ""
  },
  {
    "start": 45389.92,
    "end": 45397.84,
    "text": "dot e and v. So this is going to set all of those environment variables. So if I do a print n v now,",
    "textdich": ""
  },
  {
    "start": 45397.84,
    "end": 45404.0,
    "text": "we do have my name. And somewhere along here, we've got my password. So that's another way",
    "textdich": ""
  },
  {
    "start": 45404.0,
    "end": 45407.2,
    "text": "of setting things. It's a it's a little bit easier to kind of keep everything in a file.",
    "textdich": ""
  },
  {
    "start": 45408.72,
    "end": 45413.12,
    "text": "But what I don't like is that I have to put it in this format where I put export and then",
    "textdich": ""
  },
  {
    "start": 45413.68,
    "end": 45419.12,
    "text": "the environment variable, what would be awesome is, if I could just somehow get it so that",
    "textdich": ""
  },
  {
    "start": 45419.12,
    "end": 45424.16,
    "text": "the environment variable file in my Ubuntu machine matches with the environment variable file",
    "textdich": ""
  },
  {
    "start": 45424.8,
    "end": 45429.84,
    "text": "on my local machine, I want to just be able to put the the key and the value pair like here.",
    "textdich": ""
  },
  {
    "start": 45429.84,
    "end": 45434.0,
    "text": "And so that way, I could just copy this, paste it into my production server and just change",
    "textdich": ""
  },
  {
    "start": 45434.0,
    "end": 45439.68,
    "text": "the values there. And so we can actually do that, it just requires a little bit of a modification.",
    "textdich": ""
  },
  {
    "start": 45439.68,
    "end": 45454.48,
    "text": "So let's go back here. And I'm just gonna unset both of these real quick. And we'll",
    "textdich": ""
  },
  {
    "start": 45454.48,
    "end": 45459.04,
    "text": "just double check it got removed. So they're removed. And we're going to open up",
    "textdich": ""
  },
  {
    "start": 45461.12,
    "end": 45464.08,
    "text": "the dot e and v file. And I'm going to just delete everything.",
    "textdich": ""
  },
  {
    "start": 45464.08,
    "end": 45473.44,
    "text": "And what I'm going to do is I'm actually just going to copy this for now, and just paste it in there.",
    "textdich": ""
  },
  {
    "start": 45473.44,
    "end": 45478.16,
    "text": "Let's just see if I can get all of this set from a file. And then we'll change the values later.",
    "textdich": ""
  },
  {
    "start": 45479.84,
    "end": 45485.12,
    "text": "And so when you have a regular file, like the one we have right here, where we don't have the word",
    "textdich": ""
  },
  {
    "start": 45485.12,
    "end": 45489.68,
    "text": "export in front of it, it does require a little bit more of a complex command. But all you have",
    "textdich": ""
  },
  {
    "start": 45489.68,
    "end": 45503.68,
    "text": "to do is you run this command. So you do set dash oh, all export, then source. And then you provide",
    "textdich": ""
  },
  {
    "start": 45503.68,
    "end": 45508.64,
    "text": "the path to the file. So this is going to be my home directory. So it's slash home slash Sanjeev,",
    "textdich": ""
  },
  {
    "start": 45508.64,
    "end": 45512.96,
    "text": "just make sure you swap it out with your specific username. And then we provide dot e and v.",
    "textdich": ""
  },
  {
    "start": 45512.96,
    "end": 45525.44,
    "text": "And then we say set plus, oh, all export. All right. And so now if I do a print and V,",
    "textdich": ""
  },
  {
    "start": 45525.44,
    "end": 45531.36,
    "text": "we can see I've got my database password, my database username, I've got my database port",
    "textdich": ""
  },
  {
    "start": 45531.36,
    "end": 45538.48,
    "text": "host name, and all of the variables that I set have now been set as environment variables. So",
    "textdich": ""
  },
  {
    "start": 45538.48,
    "end": 45545.04,
    "text": "that's what we're going to do. However, there's still one minor issue. If I exit out here, or",
    "textdich": ""
  },
  {
    "start": 45545.04,
    "end": 45553.36,
    "text": "actually sorry, not if I exit if I reboot. And I actually have to do a pseudo to actually reboot,",
    "textdich": ""
  },
  {
    "start": 45553.36,
    "end": 45557.28,
    "text": "but I'm going to reboot. And I'm going to show you guys that when you reload your machine,",
    "textdich": ""
  },
  {
    "start": 45557.28,
    "end": 45561.92,
    "text": "you'll lose your environment variables. So we'll give this about a minute or two to kind of boot",
    "textdich": ""
  },
  {
    "start": 45561.92,
    "end": 45567.92,
    "text": "back up. Although I find a bunch of machines boot up fairly quickly. So let's just give this a shot,",
    "textdich": ""
  },
  {
    "start": 45567.92,
    "end": 45576.4,
    "text": "see if we can connect. No, not yet. All right, so I've logged back in. After it rebooted,",
    "textdich": ""
  },
  {
    "start": 45576.4,
    "end": 45580.8,
    "text": "if I do a print and V, you're going to see that all of the environment variables that I set",
    "textdich": ""
  },
  {
    "start": 45580.8,
    "end": 45587.28,
    "text": "are all now gone. So how can we get all of these environment variables to persist through a reboot?",
    "textdich": ""
  },
  {
    "start": 45587.28,
    "end": 45590.96,
    "text": "Because if our machine goes down, comes back up, then we lose those environment variables,",
    "textdich": ""
  },
  {
    "start": 45590.96,
    "end": 45594.96,
    "text": "then our applications broken. Well, there's a couple of different ways that we can have",
    "textdich": ""
  },
  {
    "start": 45594.96,
    "end": 45600.64,
    "text": "environment variables persist through a reboot. One of the ways is let's go to our home directory.",
    "textdich": ""
  },
  {
    "start": 45602.08,
    "end": 45607.76,
    "text": "We're going to do an LS minus LA. And what I'm going to do is we're going to go into this dot",
    "textdich": ""
  },
  {
    "start": 45607.76,
    "end": 45613.52,
    "text": "profile file. And we're going to set that exact command that we had run to set my environment",
    "textdich": ""
  },
  {
    "start": 45613.52,
    "end": 45618.32,
    "text": "variables. Where is that command? This one right here in that file. So copy this.",
    "textdich": ""
  },
  {
    "start": 45618.32,
    "end": 45628.96,
    "text": "And then just do a vi dot profile. And then go to the bottom of the file. And below the last line,",
    "textdich": ""
  },
  {
    "start": 45628.96,
    "end": 45640.4,
    "text": "just paste that command in. And then we can just wq. All right, and so this is going to cause any",
    "textdich": ""
  },
  {
    "start": 45640.4,
    "end": 45646.24,
    "text": "time we open up a session or a terminal, even through a reboot, it's going to run that specific",
    "textdich": ""
  },
  {
    "start": 45646.24,
    "end": 45650.8,
    "text": "command so that those environment variables are all set. Right now, if you do a print nv,",
    "textdich": ""
  },
  {
    "start": 45651.36,
    "end": 45655.84,
    "text": "you will see that it's not set. And that's to be expected, because we were already connected",
    "textdich": ""
  },
  {
    "start": 45655.84,
    "end": 45667.36,
    "text": "to it. But if I exit out of here, reconnect, do a print nv, we can now see that the our",
    "textdich": ""
  },
  {
    "start": 45668.88,
    "end": 45671.92,
    "text": "environment variables are set. And then just to prove to you that this actually persists",
    "textdich": ""
  },
  {
    "start": 45671.92,
    "end": 45684.64,
    "text": "through reboot, we're going to reboot this machine. All right, so it's rebooted, let's do a print nv.",
    "textdich": ""
  },
  {
    "start": 45685.52,
    "end": 45690.72,
    "text": "And we can see all of our environment variables are still set. So this is the method that I'm going",
    "textdich": ""
  },
  {
    "start": 45690.72,
    "end": 45695.04,
    "text": "to go with. Keep in mind when it comes to environment variables, there are 1000 different",
    "textdich": ""
  },
  {
    "start": 45695.04,
    "end": 45699.2,
    "text": "ways to tackle this. And so people like to set their environment variables in different ways.",
    "textdich": ""
  },
  {
    "start": 45699.2,
    "end": 45703.6,
    "text": "This is just the way that I've done it. This is the simplest way. But there are, you know,",
    "textdich": ""
  },
  {
    "start": 45703.6,
    "end": 45708.88,
    "text": "a number of different other methods, some of them will probably be more recommended, better. But I",
    "textdich": ""
  },
  {
    "start": 45708.88,
    "end": 45714.0,
    "text": "want to keep things as simple as possible. The one thing I do want to kind of highlight is that",
    "textdich": ""
  },
  {
    "start": 45714.96,
    "end": 45720.8,
    "text": "our environment variable is stored in my home directory, it is not in the app directory where",
    "textdich": ""
  },
  {
    "start": 45720.8,
    "end": 45724.96,
    "text": "all my application code is. And that's important to me, because I don't want to put it in my",
    "textdich": ""
  },
  {
    "start": 45724.96,
    "end": 45730.24,
    "text": "application code, because I don't want it to accidentally get checked into get I don't want",
    "textdich": ""
  },
  {
    "start": 45730.24,
    "end": 45736.32,
    "text": "anyone to accidentally see my production passwords or anything like that, because then my entire",
    "textdich": ""
  },
  {
    "start": 45736.32,
    "end": 45739.92,
    "text": "application is compromised. So I like to keep it separate by moving it into a completely separate",
    "textdich": ""
  },
  {
    "start": 45739.92,
    "end": 45745.52,
    "text": "folder, so that there's no chance that it gets mixed up in my application code. All right,",
    "textdich": ""
  },
  {
    "start": 45745.52,
    "end": 45750.16,
    "text": "so since we can connect to our Postgres database, let's go ahead and actually create the database",
    "textdich": ""
  },
  {
    "start": 45750.16,
    "end": 45755.44,
    "text": "within this machine. So I'm going to select right click here, and I'm going to say create database,",
    "textdich": ""
  },
  {
    "start": 45756.16,
    "end": 45759.76,
    "text": "call your database or whatever you want, I'm just going to call it past API to keep things simple.",
    "textdich": ""
  },
  {
    "start": 45761.52,
    "end": 45765.92,
    "text": "And so now we have our database once we click on it. And so now it's up and running. And so since",
    "textdich": ""
  },
  {
    "start": 45765.92,
    "end": 45770.4,
    "text": "we have that information, and we have the information for connecting to our actual Postgres",
    "textdich": ""
  },
  {
    "start": 45770.4,
    "end": 45775.6,
    "text": "instance on this machine, let's update these environment variable files, so that they are",
    "textdich": ""
  },
  {
    "start": 45775.6,
    "end": 45780.56,
    "text": "accurate at this point, because I believe they're still pointing to whatever our production was",
    "textdich": ""
  },
  {
    "start": 45780.56,
    "end": 45788.24,
    "text": "set as. Sorry, our development environment. So here, the host name is still going to be local host.",
    "textdich": ""
  },
  {
    "start": 45788.96,
    "end": 45793.04,
    "text": "The port since I installed Postgres on the default port, we can keep that the same.",
    "textdich": ""
  },
  {
    "start": 45793.84,
    "end": 45797.92,
    "text": "You want to make sure you update your production password, I chose the same exact password,",
    "textdich": ""
  },
  {
    "start": 45797.92,
    "end": 45802.16,
    "text": "just to keep things simple. The database name, we just created one called fast API.",
    "textdich": ""
  },
  {
    "start": 45802.16,
    "end": 45808.56,
    "text": "Here, this is going to be the database username, if you want to, it is recommended to create another",
    "textdich": ""
  },
  {
    "start": 45809.44,
    "end": 45814.8,
    "text": "Postgres user. However, I'm just going to keep this as the default Postgres user to keep things",
    "textdich": ""
  },
  {
    "start": 45814.8,
    "end": 45821.44,
    "text": "as simple, you definitely want to upgrade, update the secret key, the algorithm, you can leave that",
    "textdich": ""
  },
  {
    "start": 45821.44,
    "end": 45834.88,
    "text": "as default. And then the access token, I'm going to make this a little bit longer. Let's do 300 minutes.",
    "textdich": ""
  },
  {
    "start": 45835.76,
    "end": 45842.72,
    "text": "All right, and now let's reactivate our environment. So I'm going to go into apps.",
    "textdich": ""
  },
  {
    "start": 45842.72,
    "end": 45853.68,
    "text": "And then we'll do source vnv bin activate, that's going to activate our virtual environment.",
    "textdich": ""
  },
  {
    "start": 45855.28,
    "end": 45861.76,
    "text": "And right now, you probably notice a little bit of an issue. And that is that we don't have any",
    "textdich": ""
  },
  {
    "start": 45861.76,
    "end": 45868.0,
    "text": "tables right now, we go to our schemas. And then our we got no tables in here. Oh, sorry,",
    "textdich": ""
  },
  {
    "start": 45868.0,
    "end": 45873.44,
    "text": "we're in the wrong database in the fast API, we've got no tables, right, nothing here.",
    "textdich": ""
  },
  {
    "start": 45874.88,
    "end": 45880.4,
    "text": "And so we have to set up all of our models now. However, since we are in our production environment,",
    "textdich": ""
  },
  {
    "start": 45880.4,
    "end": 45885.44,
    "text": "and since we've set up alembic, you'll see that this is dead simple. And when it comes to alembic,",
    "textdich": ""
  },
  {
    "start": 45885.44,
    "end": 45889.44,
    "text": "it's important that in your production environment, you never create revisions in your production",
    "textdich": ""
  },
  {
    "start": 45889.44,
    "end": 45894.72,
    "text": "environment, you only create it in your development environment, and you check it into Git. And since",
    "textdich": ""
  },
  {
    "start": 45894.72,
    "end": 45901.28,
    "text": "we checked it into Git, if we go to source, and then go into our alembic file folder, and do an",
    "textdich": ""
  },
  {
    "start": 45901.28,
    "end": 45908.16,
    "text": "LS and then go into versions, we have all of our revision files. And so what we can do is we could",
    "textdich": ""
  },
  {
    "start": 45908.16,
    "end": 45912.64,
    "text": "just ah, sorry, I didn't mean to hit exit got logged back in now. All right, make sure that",
    "textdich": ""
  },
  {
    "start": 45912.64,
    "end": 45917.44,
    "text": "virtual environment enabled every time I'm going to go into source. And what I'm going to do is",
    "textdich": ""
  },
  {
    "start": 45917.44,
    "end": 45930.48,
    "text": "I'm going to do alembic upgrade. And then head. So this is going to set up our database and it's",
    "textdich": ""
  },
  {
    "start": 45930.48,
    "end": 45938.0,
    "text": "going to upgrade it to the latest revision. All right. And take a look at that. It created all",
    "textdich": ""
  },
  {
    "start": 45938.0,
    "end": 45942.96,
    "text": "of the individual revisions one at a time. So we can, we can still roll back just the same exact",
    "textdich": ""
  },
  {
    "start": 45942.96,
    "end": 45948.0,
    "text": "way that we did in development. And with just a click of a button, we've got our entire database",
    "textdich": ""
  },
  {
    "start": 45948.0,
    "end": 45953.52,
    "text": "schema all set up. And we can just refresh this real quick, and then go into our tables. And you",
    "textdich": ""
  },
  {
    "start": 45953.52,
    "end": 45958.32,
    "text": "can see that we've got our three tables plus the alembic table as well. So now that we have our",
    "textdich": ""
  },
  {
    "start": 45958.32,
    "end": 45963.12,
    "text": "database all set, I think it's time we try to start our application again. So move into your",
    "textdich": ""
  },
  {
    "start": 45963.12,
    "end": 45968.56,
    "text": "apps directory. And if you've already, and if you haven't activated your virtual environment, do that",
    "textdich": ""
  },
  {
    "start": 45968.56,
    "end": 45976.72,
    "text": "again. Move into the source directory. And now we're going to run the same uvcorn command that we",
    "textdich": ""
  },
  {
    "start": 45976.72,
    "end": 45988.56,
    "text": "ran in our development environment. All right, so it says it's running on the local host IP address",
    "textdich": ""
  },
  {
    "start": 45988.56,
    "end": 45993.76,
    "text": "of this machine on port 8000, which is the default port. So let's try to connect to it. So what we",
    "textdich": ""
  },
  {
    "start": 45993.76,
    "end": 45999.84,
    "text": "have to do is grab this. And we're just going to paste the IP address into our browser. And we're",
    "textdich": ""
  },
  {
    "start": 45999.84,
    "end": 46009.76,
    "text": "going to do colon port 8000. And let's see if this works. And it looks like it didn't work. So what",
    "textdich": ""
  },
  {
    "start": 46009.76,
    "end": 46015.36,
    "text": "happened? Well, the problem here is that we needed to make sure that it can listen on any IP address.",
    "textdich": ""
  },
  {
    "start": 46015.36,
    "end": 46021.2,
    "text": "So when you just set this to 127 dot zero dot zero dot one, that means only this machine can access",
    "textdich": ""
  },
  {
    "start": 46021.2,
    "end": 46026.8,
    "text": "it. So I'm going to Ctrl C out of this, so we're going to stop it. And we're going to pass in one",
    "textdich": ""
  },
  {
    "start": 46026.8,
    "end": 46034.16,
    "text": "more flag, we're going to say dash dash host, and then provide the IP of 0000. So we're going to",
    "textdich": ""
  },
  {
    "start": 46034.16,
    "end": 46040.0,
    "text": "listen on any IP that this machine is potentially running. And if you wanted to, if I did a dash dash",
    "textdich": ""
  },
  {
    "start": 46040.0,
    "end": 46045.6,
    "text": "help real quick, we can also specify what port we want to listen on. So if I do dash dash port,",
    "textdich": ""
  },
  {
    "start": 46046.24,
    "end": 46050.32,
    "text": "I can provide a different port. So it doesn't go to the default port 8000. But I'm going to keep it",
    "textdich": ""
  },
  {
    "start": 46050.32,
    "end": 46053.84,
    "text": "as port 8000. You're going to see that it ultimately doesn't matter when we actually",
    "textdich": ""
  },
  {
    "start": 46053.84,
    "end": 46058.4,
    "text": "deploy, because we're going to deploy in a way that it's always going to use either port 80 or",
    "textdich": ""
  },
  {
    "start": 46058.4,
    "end": 46065.36,
    "text": "port 443, which is the default port for HTTP and HTTPS. So this is good enough. We're going to start",
    "textdich": ""
  },
  {
    "start": 46065.36,
    "end": 46070.96,
    "text": "it again. Now you can see it's listening on any IP. And we're going to refresh. And if you guys",
    "textdich": ""
  },
  {
    "start": 46070.96,
    "end": 46075.52,
    "text": "can't see that, because it's tiny, we can see that I got message Hello World, which is accessing that",
    "textdich": ""
  },
  {
    "start": 46075.52,
    "end": 46082.56,
    "text": "root path that we have. So it looks like things are working at this point. However, right now,",
    "textdich": ""
  },
  {
    "start": 46082.56,
    "end": 46089.68,
    "text": "you know, if we, if this program crashes, or if we reboot our machine, you're going to see that it",
    "textdich": ""
  },
  {
    "start": 46089.68,
    "end": 46094.88,
    "text": "doesn't actually restart automatically. And so what we're going to do is we're actually going",
    "textdich": ""
  },
  {
    "start": 46094.88,
    "end": 46102.88,
    "text": "to use a process manager. So we're going to use something called G unicorn. So control C out of",
    "textdich": ""
  },
  {
    "start": 46102.88,
    "end": 46107.04,
    "text": "that, instead of just starting our application with uvcorn, we're going to use G unicorn. And",
    "textdich": ""
  },
  {
    "start": 46107.04,
    "end": 46111.44,
    "text": "if you don't, if you haven't already installed it, which you probably haven't, do pip install",
    "textdich": ""
  },
  {
    "start": 46113.04,
    "end": 46120.64,
    "text": "G unicorn. And make sure you're in the virtual environment. And so G unicorn is going to be",
    "textdich": ""
  },
  {
    "start": 46120.64,
    "end": 46125.6,
    "text": "responsible for starting our application. Now, I've already got this installed, because I added it",
    "textdich": ""
  },
  {
    "start": 46125.6,
    "end": 46130.0,
    "text": "to my requirements dot txt file a little bit earlier. But if you haven't done that, that's",
    "textdich": ""
  },
  {
    "start": 46130.0,
    "end": 46134.48,
    "text": "fine, because I haven't told you guys to do that. So just do a pip install G unicorn. And if you get",
    "textdich": ""
  },
  {
    "start": 46134.48,
    "end": 46140.08,
    "text": "any errors, most likely, you'll need two other packages, you'll need pip, just so you'll need",
    "textdich": ""
  },
  {
    "start": 46140.08,
    "end": 46151.28,
    "text": "HTTP tools. And so you can just do a pip install of HTTP tools. And you'll also need one extra",
    "textdich": ""
  },
  {
    "start": 46151.28,
    "end": 46159.52,
    "text": "library, which is UV tools. So if you so if you hit any other errors moving forward, right, go",
    "textdich": ""
  },
  {
    "start": 46159.52,
    "end": 46164.96,
    "text": "ahead and install those two libraries, HTTP tools and UV tools. And that should fix any errors that",
    "textdich": ""
  },
  {
    "start": 46164.96,
    "end": 46169.36,
    "text": "you have. So those were some potential errors that I ran into when I was kind of doing a quick test",
    "textdich": ""
  },
  {
    "start": 46169.36,
    "end": 46177.12,
    "text": "run. But at this point, we should have access to our to a G unicorn command. So I can say G unicorn.",
    "textdich": ""
  },
  {
    "start": 46177.12,
    "end": 46183.28,
    "text": "And let's just do a quick quick dash dash help. Just to see what options we have. And here,",
    "textdich": ""
  },
  {
    "start": 46183.28,
    "end": 46187.52,
    "text": "what's nice is that you can actually set the number of workers. So you know, if you have if",
    "textdich": ""
  },
  {
    "start": 46187.52,
    "end": 46192.48,
    "text": "you're on a multi threaded machine, or you have a virtual machine with multiple CPUs, you could set",
    "textdich": ""
  },
  {
    "start": 46192.48,
    "end": 46196.16,
    "text": "up more than one worker so that they're all listening all at once. And then it's going to",
    "textdich": ""
  },
  {
    "start": 46196.16,
    "end": 46200.8,
    "text": "get load balanced across all of them. So we're going to set up for by default, just to show you",
    "textdich": ""
  },
  {
    "start": 46200.8,
    "end": 46205.12,
    "text": "you could set up one, it doesn't really change anything. So the command is going to be G unicorn",
    "textdich": ""
  },
  {
    "start": 46207.36,
    "end": 46211.44,
    "text": "dash w. So this is for the number of workers, we're gonna say I want four workers.",
    "textdich": ""
  },
  {
    "start": 46211.44,
    "end": 46227.36,
    "text": "And then we're going to say dash k. We're gonna say uvcorn dot workers dot capital uvcorn. Capital",
    "textdich": ""
  },
  {
    "start": 46227.36,
    "end": 46233.68,
    "text": "worker. Alright, and then now we just specify how to start our application like we normally do. So",
    "textdich": ""
  },
  {
    "start": 46233.68,
    "end": 46240.56,
    "text": "we go into our app folder, we grab the main file, and then we start app. And then, you know, just",
    "textdich": ""
  },
  {
    "start": 46240.56,
    "end": 46246.48,
    "text": "like we did with uvcorn a little bit while ago, we had to start it with the dash dash host, and then",
    "textdich": ""
  },
  {
    "start": 46246.48,
    "end": 46253.84,
    "text": "do all zeros. Here with G uvcorn, sorry, G unicorn, we have to use a dash dash bind, and then we do",
    "textdich": ""
  },
  {
    "start": 46253.84,
    "end": 46262.4,
    "text": "zero to zero to zero. And then we specify the port we want to listen on. Let me drag this so",
    "textdich": ""
  },
  {
    "start": 46262.4,
    "end": 46267.04,
    "text": "it looks a little easier to read. So we do that. And then the port that you want to listen on.",
    "textdich": ""
  },
  {
    "start": 46267.04,
    "end": 46275.6,
    "text": "Let's start that. And it looks like I got a couple of errors. So let's see what happened.",
    "textdich": ""
  },
  {
    "start": 46275.6,
    "end": 46282.56,
    "text": "Alright, and so if you get this error, UV loop, it means we're missing a library. And so like I said,",
    "textdich": ""
  },
  {
    "start": 46282.56,
    "end": 46286.24,
    "text": "if you get any errors, make sure you do the pip install HTTP tools,",
    "textdich": ""
  },
  {
    "start": 46286.24,
    "end": 46291.04,
    "text": "I should have this one already installed. And then you want to do a pip install UV tools.",
    "textdich": ""
  },
  {
    "start": 46291.04,
    "end": 46299.36,
    "text": "And I realized I've been making a mistake, it's not called UV tools, it's going to be UV loop.",
    "textdich": ""
  },
  {
    "start": 46304.24,
    "end": 46310.24,
    "text": "Alright, and so now it's successful. So not not UV tools, UV loop, I guess I got it mixed up with",
    "textdich": ""
  },
  {
    "start": 46310.24,
    "end": 46316.48,
    "text": "HTTP tools. And so you can go ahead and if you actually wanted to, if you did a pip freeze,",
    "textdich": ""
  },
  {
    "start": 46316.48,
    "end": 46323.92,
    "text": "you could go ahead and copy this and make this your new requirements.txt file that you check into",
    "textdich": ""
  },
  {
    "start": 46323.92,
    "end": 46329.2,
    "text": "Git. This is going to have G unicorn automatically in there because we already installed it. It's",
    "textdich": ""
  },
  {
    "start": 46329.2,
    "end": 46333.92,
    "text": "going to have UV loop. And it's going to have what is the last one that we needed HTTP tools,",
    "textdich": ""
  },
  {
    "start": 46333.92,
    "end": 46339.6,
    "text": "which is right here. And so you can check this version into Git. And so that way, it's all up",
    "textdich": ""
  },
  {
    "start": 46339.6,
    "end": 46344.56,
    "text": "to date. And so when you deploy to other Ubuntu machines or other computers, it's going to have",
    "textdich": ""
  },
  {
    "start": 46344.56,
    "end": 46349.52,
    "text": "all of these extra packages so you can deploy right away. All right, and now let's run the",
    "textdich": ""
  },
  {
    "start": 46349.52,
    "end": 46355.6,
    "text": "same G unicorn command. And now it looks like it started. It says it's listening on this port.",
    "textdich": ""
  },
  {
    "start": 46355.6,
    "end": 46359.36,
    "text": "And notice something interesting. Look at this, it actually started up for worker nodes. And you",
    "textdich": ""
  },
  {
    "start": 46359.36,
    "end": 46364.24,
    "text": "can even see the process IDs. So this is probably the parent ID. And then these are the little",
    "textdich": ""
  },
  {
    "start": 46364.24,
    "end": 46372.16,
    "text": "worker IDs. So if you wanted to, we can open up another connection. And I can do a ps dash aef",
    "textdich": ""
  },
  {
    "start": 46372.16,
    "end": 46380.96,
    "text": "pipe, grab, we could probably just grab for you, G, G unicorn. Yep. And so you can see all of the",
    "textdich": ""
  },
  {
    "start": 46380.96,
    "end": 46386.48,
    "text": "different processes that were started. And so there should be five of them 12345. One of them",
    "textdich": ""
  },
  {
    "start": 46386.48,
    "end": 46394.16,
    "text": "is the parent process. And then the four are the other child processes. All right, now that's",
    "textdich": ""
  },
  {
    "start": 46394.16,
    "end": 46398.88,
    "text": "working. Let's just do a refresh just to make sure we didn't break anything. And it's still working.",
    "textdich": ""
  },
  {
    "start": 46398.88,
    "end": 46403.44,
    "text": "And so if we do a refresh, you can see that we can still access our application. And if I go to",
    "textdich": ""
  },
  {
    "start": 46403.44,
    "end": 46409.36,
    "text": "slash docs, the documentation should still be there. Perfect. So it looks like our app is working,",
    "textdich": ""
  },
  {
    "start": 46409.36,
    "end": 46414.0,
    "text": "we can test it now, by testing the individual endpoints. But we're going to hold off on doing",
    "textdich": ""
  },
  {
    "start": 46414.0,
    "end": 46419.36,
    "text": "that, because we're going to make a few more changes. So the first thing is, right now,",
    "textdich": ""
  },
  {
    "start": 46420.48,
    "end": 46425.76,
    "text": "this is, this is running on our specific terminal. And so it kind of locks up our terminal,",
    "textdich": ""
  },
  {
    "start": 46425.76,
    "end": 46431.44,
    "text": "I want this to be running in the background. And more importantly, I want this to automatically",
    "textdich": ""
  },
  {
    "start": 46431.44,
    "end": 46436.72,
    "text": "start up on boot. Because right now, if we reboot our box, right, we'd have to manually log into",
    "textdich": ""
  },
  {
    "start": 46436.72,
    "end": 46442.32,
    "text": "this device and run the same command. So we have to find a way to kind of automate it so that upon",
    "textdich": ""
  },
  {
    "start": 46442.32,
    "end": 46446.72,
    "text": "reboot, it's going to run the application and we want it to run in the background so that we don't",
    "textdich": ""
  },
  {
    "start": 46446.72,
    "end": 46455.76,
    "text": "see any logs by default. And we'll tackle that in the next video. Alright guys, so in this video,",
    "textdich": ""
  },
  {
    "start": 46455.76,
    "end": 46461.2,
    "text": "we're going to figure out how we can have this command automatically run upon reboot, as well",
    "textdich": ""
  },
  {
    "start": 46461.2,
    "end": 46466.08,
    "text": "as how can we run this as a background process so that we don't hang our terminal. So what we're",
    "textdich": ""
  },
  {
    "start": 46466.08,
    "end": 46471.52,
    "text": "going to do is just do a Ctrl C to stop it for now. And we're gonna what we're gonna do is we're",
    "textdich": ""
  },
  {
    "start": 46471.52,
    "end": 46477.2,
    "text": "going to create our own service. And if you ever run system CTL, and then you know, either status",
    "textdich": ""
  },
  {
    "start": 46477.2,
    "end": 46485.2,
    "text": "or start, or, or restart, and then the name of some of some application that you wanted to run,",
    "textdich": ""
  },
  {
    "start": 46486.32,
    "end": 46491.04,
    "text": "you know, that is an example of making use of a service. And so what we're going to do is we're",
    "textdich": ""
  },
  {
    "start": 46491.04,
    "end": 46495.6,
    "text": "going to create we're going to make our own service, which starts this application here for us.",
    "textdich": ""
  },
  {
    "start": 46495.6,
    "end": 46504.4,
    "text": "And you'll see that it's actually pretty simple. If we go to slash at C slash system D. And then",
    "textdich": ""
  },
  {
    "start": 46504.4,
    "end": 46511.52,
    "text": "system, and I forgot to do a CD to move into that directory. If you do an LS, these are all of the",
    "textdich": ""
  },
  {
    "start": 46511.52,
    "end": 46516.56,
    "text": "services that have been installed on our machine. And we're just going to create a brand new one.",
    "textdich": ""
  },
  {
    "start": 46516.56,
    "end": 46521.44,
    "text": "So how do we create that we have to create a couple of files. And I have actually created them",
    "textdich": ""
  },
  {
    "start": 46521.44,
    "end": 46528.24,
    "text": "for you guys ahead of time. So if you check my GitHub repo, you will see a file called g unicorn",
    "textdich": ""
  },
  {
    "start": 46528.24,
    "end": 46534.0,
    "text": "dot service. And there's going to be a couple things that we have to change. So let me just",
    "textdich": ""
  },
  {
    "start": 46534.0,
    "end": 46537.76,
    "text": "walk you through what each one of these lines mean. So under unit here, we're just going to",
    "textdich": ""
  },
  {
    "start": 46537.76,
    "end": 46541.04,
    "text": "give you a description of what this is going to do. So this is going to be a G unicorn instance",
    "textdich": ""
  },
  {
    "start": 46541.84,
    "end": 46547.76,
    "text": "for to server API, you can put whatever description you want, you can say the demo fast API",
    "textdich": ""
  },
  {
    "start": 46547.76,
    "end": 46552.96,
    "text": "application doesn't really matter. After now, the next line right here, where it says after network",
    "textdich": ""
  },
  {
    "start": 46552.96,
    "end": 46558.24,
    "text": "dark target, what this is going to do is this is going to tell system D or Ubuntu machine,",
    "textdich": ""
  },
  {
    "start": 46558.24,
    "end": 46562.72,
    "text": "when to actually start this service. And so it's saying that, hey, we need our network service",
    "textdich": ""
  },
  {
    "start": 46562.72,
    "end": 46568.24,
    "text": "running before we can start our API. Because if the network's not up, then nothing else really",
    "textdich": ""
  },
  {
    "start": 46568.24,
    "end": 46572.56,
    "text": "matters. So we're going to wait for network to come up before we start the service. Then on the",
    "textdich": ""
  },
  {
    "start": 46572.56,
    "end": 46578.16,
    "text": "service, we're going to figure out we have to specify what user is going to, you know, run",
    "textdich": ""
  },
  {
    "start": 46578.16,
    "end": 46582.48,
    "text": "this service. So we need this to be associated with the user, I created a user called Sanjeev,",
    "textdich": ""
  },
  {
    "start": 46582.48,
    "end": 46586.48,
    "text": "so I'm going to update this. And then for group, you want to just put the same exact name as the",
    "textdich": ""
  },
  {
    "start": 46586.48,
    "end": 46592.64,
    "text": "user. Then we have to specify the working directory. And so this is going to be the directory,",
    "textdich": ""
  },
  {
    "start": 46592.64,
    "end": 46597.6,
    "text": "our service is going to be launched in. So go ahead and update this to point to the directory",
    "textdich": ""
  },
  {
    "start": 46597.6,
    "end": 46603.28,
    "text": "your app is running in. And if you don't know what that is, remember, just go home, then move",
    "textdich": ""
  },
  {
    "start": 46603.28,
    "end": 46608.88,
    "text": "into apps. And then you can go into the source folder if you want, and just type in PWD. So",
    "textdich": ""
  },
  {
    "start": 46608.88,
    "end": 46614.32,
    "text": "that's going to get you the exact path that you want. And so I have to update this with my username.",
    "textdich": ""
  },
  {
    "start": 46615.92,
    "end": 46620.64,
    "text": "And then the environment. So because we want this service to run the G unicorn command,",
    "textdich": ""
  },
  {
    "start": 46621.44,
    "end": 46626.24,
    "text": "which is right here, we needed to run in a virtual environment. So to actually set the",
    "textdich": ""
  },
  {
    "start": 46626.24,
    "end": 46631.44,
    "text": "virtual environment through this script, we have to say environment equals and then we set this",
    "textdich": ""
  },
  {
    "start": 46631.44,
    "end": 46637.76,
    "text": "path variable. And we just point it to the exact path to our bin folder. So once again,",
    "textdich": ""
  },
  {
    "start": 46637.76,
    "end": 46642.88,
    "text": "you don't know how to get there, just go to your app folder, go into your virtual environment,",
    "textdich": ""
  },
  {
    "start": 46643.68,
    "end": 46647.04,
    "text": "go into your bin folder, and then just type in PWD. And that's going to get you the path.",
    "textdich": ""
  },
  {
    "start": 46648.72,
    "end": 46652.56,
    "text": "And so I just have to update this with my username. And you'll just do the same thing,",
    "textdich": ""
  },
  {
    "start": 46652.56,
    "end": 46658.08,
    "text": "you just have to update the username, then we have to specify the exact command to run. So we",
    "textdich": ""
  },
  {
    "start": 46658.08,
    "end": 46663.28,
    "text": "have to provide the path to where the G unicorn command resides on. So it actually sits in the",
    "textdich": ""
  },
  {
    "start": 46663.28,
    "end": 46669.68,
    "text": "bin folder. So if you actually do an LS here, right, you can see the G unicorn command. And so",
    "textdich": ""
  },
  {
    "start": 46669.68,
    "end": 46674.88,
    "text": "that's going to give it the path to the command. And then after that, well, actually, I have to",
    "textdich": ""
  },
  {
    "start": 46674.88,
    "end": 46681.2,
    "text": "update my username once again. And after that, it's the same exact command that we ran for.",
    "textdich": ""
  },
  {
    "start": 46681.2,
    "end": 46687.6,
    "text": "So for workers dash k, then we have this long command right here. And then we specify how to",
    "textdich": ""
  },
  {
    "start": 46687.6,
    "end": 46691.04,
    "text": "start our application, which is this command, and then we're going to bind it to zero to zero to",
    "textdich": ""
  },
  {
    "start": 46691.04,
    "end": 46695.6,
    "text": "zero. And then you can pick whatever port that you want. And this is just a default config,",
    "textdich": ""
  },
  {
    "start": 46695.6,
    "end": 46700.24,
    "text": "don't worry too much about it, you need it, but I don't want to go too far into how Linux works",
    "textdich": ""
  },
  {
    "start": 46700.24,
    "end": 46705.68,
    "text": "to actually explain this, just know that this is just a standard procedure for creating a service.",
    "textdich": ""
  },
  {
    "start": 46705.68,
    "end": 46713.2,
    "text": "So to actually create the service now, what we do is let's go to slash Etsy, system d, then system.",
    "textdich": ""
  },
  {
    "start": 46716.56,
    "end": 46721.36,
    "text": "And let me deactivate my, we don't need to deactivate it's fine. We're going to create",
    "textdich": ""
  },
  {
    "start": 46721.36,
    "end": 46727.76,
    "text": "our service file here. And so I'm going to do a pseudo vi. And then the name of the service. So",
    "textdich": ""
  },
  {
    "start": 46727.76,
    "end": 46733.68,
    "text": "what do you want to call your service? So when you type in system, CTL, and then start, what's the",
    "textdich": ""
  },
  {
    "start": 46733.68,
    "end": 46737.12,
    "text": "name of the service you want to type in, you get to specify, I'm going to make it so that it's just",
    "textdich": ""
  },
  {
    "start": 46737.12,
    "end": 46743.2,
    "text": "called API, very simple, you can call it fast API, you can call it social media app, it doesn't really",
    "textdich": ""
  },
  {
    "start": 46743.2,
    "end": 46747.76,
    "text": "matter, it's up to you, but I'm going to call it API. And since I want to call it API, I'm going to",
    "textdich": ""
  },
  {
    "start": 46747.76,
    "end": 46757.44,
    "text": "create a file called API dot service. And then what we can do is just take this copy it, and we will",
    "textdich": ""
  },
  {
    "start": 46757.44,
    "end": 46767.68,
    "text": "paste it in here. Alright, and to test out our service, let's do a system CTL. Start API.",
    "textdich": ""
  },
  {
    "start": 46774.4,
    "end": 46781.2,
    "text": "And we're gonna have to put in our password. And so this started our API. And if we do a system",
    "textdich": ""
  },
  {
    "start": 46781.2,
    "end": 46788.72,
    "text": "CTL status API, whoops, there shouldn't be a space CTL status API, they should just give us the status",
    "textdich": ""
  },
  {
    "start": 46788.72,
    "end": 46794.16,
    "text": "of our service, we can see that looks like it failed, that's not good. And it's going to provide",
    "textdich": ""
  },
  {
    "start": 46794.16,
    "end": 46800.64,
    "text": "us some logs. And if we take a look at the logs, you can see algorithm field required access token",
    "textdich": ""
  },
  {
    "start": 46800.64,
    "end": 46806.72,
    "text": "expires field required. So it looks like something is wrong with our environment variables, because",
    "textdich": ""
  },
  {
    "start": 46806.72,
    "end": 46810.72,
    "text": "we saw the same exact error when we were originally setting this up before we got the environment",
    "textdich": ""
  },
  {
    "start": 46810.72,
    "end": 46816.72,
    "text": "variable. So for some reason, it's not actually accepting these environment variables. And the",
    "textdich": ""
  },
  {
    "start": 46816.72,
    "end": 46821.92,
    "text": "reason for this is that the service file, the service that you create doesn't have access to",
    "textdich": ""
  },
  {
    "start": 46821.92,
    "end": 46828.72,
    "text": "users environment variables. And if you actually go back to our home directory, and then we go to",
    "textdich": ""
  },
  {
    "start": 46828.72,
    "end": 46836.96,
    "text": "LS, LS minus LA. Remember, we created this ENV file, and then we loaded it in the dot profile. So",
    "textdich": ""
  },
  {
    "start": 46836.96,
    "end": 46842.0,
    "text": "the environment variables that get loaded from dot profile aren't accessible within",
    "textdich": ""
  },
  {
    "start": 46842.0,
    "end": 46847.28,
    "text": "a service. And that's just the way services work. So what we have to do is we have to pass in another",
    "textdich": ""
  },
  {
    "start": 46847.28,
    "end": 46854.32,
    "text": "field in our service config, so that it knows to pull the environment variables from that specific",
    "textdich": ""
  },
  {
    "start": 46854.32,
    "end": 46860.56,
    "text": "file. So what we can do here is in this file, we're going to go and just add another line,",
    "textdich": ""
  },
  {
    "start": 46860.56,
    "end": 46868.72,
    "text": "it doesn't matter where you add the line. But we want to say environment file, make sure to",
    "textdich": ""
  },
  {
    "start": 46868.72,
    "end": 46876.32,
    "text": "capitalize the E and the F equals and then you provide the path to your specific ENV file. So",
    "textdich": ""
  },
  {
    "start": 46876.32,
    "end": 46884.88,
    "text": "mine's going to be home slash Sanjeev dot ENV. And I'll just copy all of this again.",
    "textdich": ""
  },
  {
    "start": 46884.88,
    "end": 46897.52,
    "text": "And we'll go back into Etsy system D system. And then I'll just do a pseudo VI API dot service.",
    "textdich": ""
  },
  {
    "start": 46899.36,
    "end": 46900.96,
    "text": "And we're going to replace this file now.",
    "textdich": ""
  },
  {
    "start": 46905.52,
    "end": 46910.56,
    "text": "Alright, so now we should be able to import all of those environment variables. And you there's",
    "textdich": ""
  },
  {
    "start": 46910.56,
    "end": 46916.72,
    "text": "another way to do this, you can also set up a config file for your, your new service. However,",
    "textdich": ""
  },
  {
    "start": 46916.72,
    "end": 46921.84,
    "text": "I figured it's just easier because we already have our environment for our dot ENV file. So we can",
    "textdich": ""
  },
  {
    "start": 46921.84,
    "end": 46933.12,
    "text": "just continue to use that. And now if I do a system CTL restart API, and notice you don't have",
    "textdich": ""
  },
  {
    "start": 46933.12,
    "end": 46945.36,
    "text": "to type in API dot service, it's optional, you can you can technically do it like this. And it looks",
    "textdich": ""
  },
  {
    "start": 46945.36,
    "end": 46956.08,
    "text": "like since we actually changed the file, we have to run this command now. Alright, and so now let's",
    "textdich": ""
  },
  {
    "start": 46956.08,
    "end": 46968.96,
    "text": "do a system CTL restart. Sorry, not restart status API. And uh, looks like we got the same exact",
    "textdich": ""
  },
  {
    "start": 46968.96,
    "end": 46982.8,
    "text": "error. Let's just do a restart one more time. And we'll do a status. And now it's up and running.",
    "textdich": ""
  },
  {
    "start": 46982.8,
    "end": 46988.4,
    "text": "Perfect. Look at that. So we've got our four workers. These are the process IDs. And let's just",
    "textdich": ""
  },
  {
    "start": 46988.4,
    "end": 46994.48,
    "text": "double check and make sure that we can access our specific website. So I'm going to just refresh on",
    "textdich": ""
  },
  {
    "start": 46994.48,
    "end": 47000.16,
    "text": "the slash docs. And it looks like it works. Let's go to the root. And let's go to the root URL.",
    "textdich": ""
  },
  {
    "start": 47001.68,
    "end": 47008.08,
    "text": "I'll just change this to the root URL. And see if we get the API response. Perfect. So it looks like",
    "textdich": ""
  },
  {
    "start": 47008.08,
    "end": 47013.36,
    "text": "we've got our application up and running. There's just one last thing we need to do.",
    "textdich": ""
  },
  {
    "start": 47015.04,
    "end": 47018.8,
    "text": "And I wasn't sure if I had already covered this. But there's one last thing I want to do. And that",
    "textdich": ""
  },
  {
    "start": 47018.8,
    "end": 47023.76,
    "text": "is I want to make sure that our service automatically starts upon a reboot. So that way, you know, in",
    "textdich": ""
  },
  {
    "start": 47023.76,
    "end": 47029.04,
    "text": "case our machine goes down, whether it's because of a power failure or something like that, or maybe",
    "textdich": ""
  },
  {
    "start": 47029.04,
    "end": 47033.04,
    "text": "we perform some sort of upgrade, I wanted to automatically start this service so that our",
    "textdich": ""
  },
  {
    "start": 47033.04,
    "end": 47040.0,
    "text": "application is always up and running. If you do a system CTL status API, you can find out pretty",
    "textdich": ""
  },
  {
    "start": 47040.0,
    "end": 47045.2,
    "text": "easily whether this service is going to get started upon a reboot. So if you take a look right here",
    "textdich": ""
  },
  {
    "start": 47045.2,
    "end": 47049.28,
    "text": "under loaded, and then right here is the keyword that you're looking for, if you see disabled right",
    "textdich": ""
  },
  {
    "start": 47049.28,
    "end": 47053.6,
    "text": "here, that means that it's not going to automatically get started upon a reboot. If you see it's",
    "textdich": ""
  },
  {
    "start": 47053.6,
    "end": 47058.24,
    "text": "enabled, that means it will automatically get started upon a reboot. So to actually make sure",
    "textdich": ""
  },
  {
    "start": 47058.24,
    "end": 47065.28,
    "text": "that it actually does get started upon a reboot, just do a pseudo system CTL, enable and enable",
    "textdich": ""
  },
  {
    "start": 47065.28,
    "end": 47075.2,
    "text": "then the name of the service, which is API. And after that, if we do a status, again, we should",
    "textdich": ""
  },
  {
    "start": 47075.2,
    "end": 47079.76,
    "text": "see that it moved to enabled. And so now if we reboot our machine, and you guys can go ahead and",
    "textdich": ""
  },
  {
    "start": 47079.76,
    "end": 47086.56,
    "text": "test this, you'll see that it automatically starts up the service. Right now, the way that we have",
    "textdich": ""
  },
  {
    "start": 47086.56,
    "end": 47091.28,
    "text": "our deployment setup is that when we send a request to our server, you know, to the specific",
    "textdich": ""
  },
  {
    "start": 47091.28,
    "end": 47095.6,
    "text": "IP address of our server, and whatever port we decided to configure our app to listen on,",
    "textdich": ""
  },
  {
    "start": 47095.6,
    "end": 47101.6,
    "text": "we send that request directly to the app or G unicorn in general. And this is technically",
    "textdich": ""
  },
  {
    "start": 47101.6,
    "end": 47106.88,
    "text": "perfectly fine. However, you'll see that in more professional type deployments, what we'll have is",
    "textdich": ""
  },
  {
    "start": 47106.88,
    "end": 47114.56,
    "text": "a intermediary web server. So we'll have a web server running on our Ubuntu machine. And that",
    "textdich": ""
  },
  {
    "start": 47114.56,
    "end": 47120.4,
    "text": "web server will receive the original request and then act as a proxy and proxy that request to our",
    "textdich": ""
  },
  {
    "start": 47120.4,
    "end": 47126.08,
    "text": "specific application or G unicorn in this case. And so one of the common web servers that can be",
    "textdich": ""
  },
  {
    "start": 47126.08,
    "end": 47131.76,
    "text": "used for that is nginx. There's a couple others like traffic and HA proxy, you'll see that nginx",
    "textdich": ""
  },
  {
    "start": 47131.76,
    "end": 47137.36,
    "text": "is fairly popular, though. And some of the benefits of doing this, or configuring our",
    "textdich": ""
  },
  {
    "start": 47137.36,
    "end": 47143.28,
    "text": "application ultimately to be deployed like this is that nginx is optimized for SSL termination.",
    "textdich": ""
  },
  {
    "start": 47143.28,
    "end": 47149.28,
    "text": "So nginx is a high performance server, and it can perform all of the SSL termination. So when we",
    "textdich": ""
  },
  {
    "start": 47149.28,
    "end": 47155.28,
    "text": "when we send an HTTP s request, we can send it to our nginx server, the nginx server can process it",
    "textdich": ""
  },
  {
    "start": 47155.28,
    "end": 47160.72,
    "text": "and then forward it as a plain HTTP packet to our application. Because technically, we could",
    "textdich": ""
  },
  {
    "start": 47160.72,
    "end": 47166.88,
    "text": "configure our application to handle HTTPS, it's not optimized for that. Right? Our, our app is",
    "textdich": ""
  },
  {
    "start": 47166.88,
    "end": 47172.8,
    "text": "designed to just act as a plain API, when we start adding responsibilities like performing SSL",
    "textdich": ""
  },
  {
    "start": 47172.8,
    "end": 47179.44,
    "text": "offload, well, then you'll see that we start to see a degradation in performance. And nginx,",
    "textdich": ""
  },
  {
    "start": 47179.44,
    "end": 47183.76,
    "text": "like I said, is a high performance web server, it's optimized for this. So it makes sense to",
    "textdich": ""
  },
  {
    "start": 47183.76,
    "end": 47188.96,
    "text": "kind of handle that responsibility on nginx instead of our application. So that's what we're going to",
    "textdich": ""
  },
  {
    "start": 47188.96,
    "end": 47193.52,
    "text": "do, we're going to configure nginx. And this is going to act as the gateway into our system.",
    "textdich": ""
  },
  {
    "start": 47193.52,
    "end": 47198.8,
    "text": "So any request we send to our system, whether it's HTTPS, or HTTP doesn't really matter,",
    "textdich": ""
  },
  {
    "start": 47198.8,
    "end": 47204.64,
    "text": "we're going to send it to nginx. And if we send it as HTTPS, what nginx will do is it'll then take it",
    "textdich": ""
  },
  {
    "start": 47204.64,
    "end": 47210.16,
    "text": "and send it and forward it as an HTTP packet to our application. And so I'm going to walk you",
    "textdich": ""
  },
  {
    "start": 47210.16,
    "end": 47215.04,
    "text": "through how to set up nginx. It's not difficult, we do have one config file that we have to add. But",
    "textdich": ""
  },
  {
    "start": 47215.04,
    "end": 47221.36,
    "text": "outside of that, it's fairly easy to get this up and running. Let's install nginx. Now to install a",
    "textdich": ""
  },
  {
    "start": 47221.36,
    "end": 47228.88,
    "text": "package, we can do sudo apt install, and then nginx, and then dash y. For that installed nginx,",
    "textdich": ""
  },
  {
    "start": 47228.88,
    "end": 47235.44,
    "text": "if we do a system CTL, start nginx, that's going to start up the nginx service. And so now if you",
    "textdich": ""
  },
  {
    "start": 47235.44,
    "end": 47240.96,
    "text": "go to your server IP address, you're going to see that you get this welcome message. So this is just",
    "textdich": ""
  },
  {
    "start": 47240.96,
    "end": 47246.8,
    "text": "the default page that nginx loads up for you. And we're going to change this. So in nginx, what we",
    "textdich": ""
  },
  {
    "start": 47246.8,
    "end": 47252.24,
    "text": "want to do is we want to go to slash etsy nginx sites, and then available, it's important that",
    "textdich": ""
  },
  {
    "start": 47252.24,
    "end": 47256.24,
    "text": "you do available because there's also a site enabled, which is not what you want. You want",
    "textdich": ""
  },
  {
    "start": 47256.24,
    "end": 47261.84,
    "text": "available. And there's this default config file, or technically, this is a server block. And if we",
    "textdich": ""
  },
  {
    "start": 47261.84,
    "end": 47270.16,
    "text": "take a look at this, you can see the default configuration. In this case, just to show you",
    "textdich": ""
  },
  {
    "start": 47270.16,
    "end": 47273.92,
    "text": "what that looks like, you can see that this is handling HTTP traffic. That's why it's port 80,",
    "textdich": ""
  },
  {
    "start": 47273.92,
    "end": 47277.6,
    "text": "it's going to listen on port 80. And this is going to act as the default server. So all requests",
    "textdich": ""
  },
  {
    "start": 47277.6,
    "end": 47282.0,
    "text": "that come here are going to land on this server block. And we've got the same thing for IPv6 as",
    "textdich": ""
  },
  {
    "start": 47282.0,
    "end": 47287.36,
    "text": "well. And then this is the file that you actually see. So when you navigate to this page, it's",
    "textdich": ""
  },
  {
    "start": 47287.36,
    "end": 47295.36,
    "text": "actually loading up a file that's in slash bar slash www slash HTML. And then the server name,",
    "textdich": ""
  },
  {
    "start": 47295.36,
    "end": 47298.96,
    "text": "so this is going to be the actual domain name that's going to handle requests for this is",
    "textdich": ""
  },
  {
    "start": 47298.96,
    "end": 47304.0,
    "text": "basically saying everything. Everything else, don't worry too much about that. But what we're",
    "textdich": ""
  },
  {
    "start": 47304.0,
    "end": 47307.84,
    "text": "going to do is we're going to change that file a little bit. And I've provided an example file",
    "textdich": ""
  },
  {
    "start": 47307.84,
    "end": 47314.16,
    "text": "here. And so this is what an example file looks like, we can leave pretty much everything in",
    "textdich": ""
  },
  {
    "start": 47314.16,
    "end": 47319.44,
    "text": "place. The only thing I want to change is this location block. And so this is what is going to",
    "textdich": ""
  },
  {
    "start": 47319.44,
    "end": 47324.88,
    "text": "allow nginx to act as a proxy, specifically this line, this is the main line, you don't technically",
    "textdich": ""
  },
  {
    "start": 47324.88,
    "end": 47330.4,
    "text": "need the other ones, those are more of optimizations. But all this is saying is that any requests",
    "textdich": ""
  },
  {
    "start": 47331.68,
    "end": 47338.24,
    "text": "that match this, the the root path or beyond, essentially, is going to get proxied to local host",
    "textdich": ""
  },
  {
    "start": 47339.12,
    "end": 47344.56,
    "text": "port 8000, which is what G unicorns running on. So you just specify the IP address and the port",
    "textdich": ""
  },
  {
    "start": 47344.56,
    "end": 47350.0,
    "text": "that you want to proxy traffic for. And so since G unicorn was configured to run on port 8000,",
    "textdich": ""
  },
  {
    "start": 47350.0,
    "end": 47354.64,
    "text": "we're just going to forward it to G unicorn in this case. So I want you to just copy these",
    "textdich": ""
  },
  {
    "start": 47354.64,
    "end": 47359.36,
    "text": "lines here. And we're going to go in. And I'm going to just open up that default file now.",
    "textdich": ""
  },
  {
    "start": 47362.08,
    "end": 47364.08,
    "text": "And we can delete these three lines.",
    "textdich": ""
  },
  {
    "start": 47369.68,
    "end": 47373.92,
    "text": "I'm just gonna paste that in. And at that point, I can save this.",
    "textdich": ""
  },
  {
    "start": 47375.44,
    "end": 47378.32,
    "text": "And then we want to do a system CTL restart nginx.",
    "textdich": ""
  },
  {
    "start": 47378.32,
    "end": 47390.08,
    "text": "So it's restarted. And if I refresh this, right, we can now see our API. And if I go to slash docs,",
    "textdich": ""
  },
  {
    "start": 47393.44,
    "end": 47401.12,
    "text": "it should also work as well. So we got nginx setup. And running the last thing that we have to do",
    "textdich": ""
  },
  {
    "start": 47401.92,
    "end": 47407.12,
    "text": "regarding nginx specifically, well, it's not really nginx specific, but in general is that",
    "textdich": ""
  },
  {
    "start": 47407.12,
    "end": 47410.56,
    "text": "right now, if you take a look at it, you can see our web browser says not secure. And that's because",
    "textdich": ""
  },
  {
    "start": 47411.36,
    "end": 47420.72,
    "text": "I can actually copy this. I paste it, right, we're using HTTP, and not HTTPS. So we need to set this",
    "textdich": ""
  },
  {
    "start": 47420.72,
    "end": 47426.88,
    "text": "up for HTTPS. So how do we do that? Well, we're going to tackle that in the next video. But you're",
    "textdich": ""
  },
  {
    "start": 47426.88,
    "end": 47432.8,
    "text": "going to need a domain name if you want this to work with HTTPS. So I'll show you guys how to kind",
    "textdich": ""
  },
  {
    "start": 47432.8,
    "end": 47439.28,
    "text": "of grab a cheap domain name. However, if you don't have one, don't worry, you can just leave it as",
    "textdich": ""
  },
  {
    "start": 47439.28,
    "end": 47444.08,
    "text": "HTTPS for now. Or you can create a self signed certificate, whichever one works for you.",
    "textdich": ""
  },
  {
    "start": 47445.6,
    "end": 47450.72,
    "text": "For my application, I purchased a domain name called Sanjeev dot xyz. So if you've ever watched",
    "textdich": ""
  },
  {
    "start": 47450.72,
    "end": 47455.76,
    "text": "any of my other videos, this is always the default domain name that I use for demonstration purposes.",
    "textdich": ""
  },
  {
    "start": 47456.48,
    "end": 47460.72,
    "text": "You can see that I actually bought a dot xyz because they're the cheapest if you just want to",
    "textdich": ""
  },
  {
    "start": 47460.72,
    "end": 47466.16,
    "text": "play around just for learning purposes, I get a dot xyz, they're usually like $1 for like an",
    "textdich": ""
  },
  {
    "start": 47466.16,
    "end": 47470.88,
    "text": "entire year. But if you get a dot com, it's gonna be a little bit more expensive. However, depending",
    "textdich": ""
  },
  {
    "start": 47470.88,
    "end": 47475.92,
    "text": "on you know, what your domain name is, it at most is still well, not at most, but you can still find",
    "textdich": ""
  },
  {
    "start": 47475.92,
    "end": 47481.2,
    "text": "plenty at $12 per year. So it's not too bad. And I happened to purchase my domain name from names",
    "textdich": ""
  },
  {
    "start": 47481.2,
    "end": 47485.6,
    "text": "cheap. So this is my domain registrar. However, there's plenty of other options if you want to",
    "textdich": ""
  },
  {
    "start": 47485.6,
    "end": 47490.56,
    "text": "use GoDaddy, if you want to use any of the other any of the other websites, you can even use Amazon",
    "textdich": ""
  },
  {
    "start": 47490.56,
    "end": 47494.96,
    "text": "if you wanted to, feel free to use whichever one you want, you just need to get a domain name,",
    "textdich": ""
  },
  {
    "start": 47494.96,
    "end": 47497.92,
    "text": "I'm going to be using this one moving forward. So just keep that in mind.",
    "textdich": ""
  },
  {
    "start": 47499.6,
    "end": 47504.16,
    "text": "And what we want to do is we want to set up a couple of rules. And we actually have to point",
    "textdich": ""
  },
  {
    "start": 47504.16,
    "end": 47509.36,
    "text": "our domain name to digital ocean and digital ocean has this excellent write up how to point your",
    "textdich": ""
  },
  {
    "start": 47509.36,
    "end": 47513.36,
    "text": "digital ocean name servers from common domain registrars. And they actually show you how to do",
    "textdich": ""
  },
  {
    "start": 47513.36,
    "end": 47517.92,
    "text": "this for a lot of the main domain registrars. And they have names cheap here as well. So if you get",
    "textdich": ""
  },
  {
    "start": 47517.92,
    "end": 47522.24,
    "text": "one of these, you can just follow along. But you'll see that you know, any domain provider,",
    "textdich": ""
  },
  {
    "start": 47523.12,
    "end": 47527.36,
    "text": "you'll be able to kind of relatively click around and just kind of navigate yourself and figure out",
    "textdich": ""
  },
  {
    "start": 47527.36,
    "end": 47532.72,
    "text": "what's the equivalent gets for the most part, the UIs are all fairly similar. But if we go to down",
    "textdich": ""
  },
  {
    "start": 47532.72,
    "end": 47536.96,
    "text": "to names cheap, you can see that what we have to do is under the name server section, we have to",
    "textdich": ""
  },
  {
    "start": 47536.96,
    "end": 47542.0,
    "text": "do custom DNS. And then we point it to the DNS servers of digital ocean. So n s one digital",
    "textdich": ""
  },
  {
    "start": 47542.0,
    "end": 47547.36,
    "text": "ocean calm and as to n s three. Let's do that. And I've actually already set that up for us. So you",
    "textdich": ""
  },
  {
    "start": 47547.36,
    "end": 47552.56,
    "text": "just go under name servers, select custom domain, custom DNS. And then you have n s one digital",
    "textdich": ""
  },
  {
    "start": 47552.56,
    "end": 47556.96,
    "text": "ocean calm n s two digital ocean calm and n s three digital ocean calm. And there'll be a little",
    "textdich": ""
  },
  {
    "start": 47556.96,
    "end": 47561.2,
    "text": "checkmark. So just check that there. And at that point, it's going to point everything to our digital",
    "textdich": ""
  },
  {
    "start": 47561.2,
    "end": 47566.88,
    "text": "ocean servers. Then in digital ocean, if you just select your name here in your dashboard,",
    "textdich": ""
  },
  {
    "start": 47566.88,
    "end": 47576.08,
    "text": "what you want to do is you want to go to manage DNS on digital ocean. And then here you want to",
    "textdich": ""
  },
  {
    "start": 47576.08,
    "end": 47583.84,
    "text": "enter your domain. So this is going to be Sanjeev dot XYZ. We'll add this domain. And the first",
    "textdich": ""
  },
  {
    "start": 47583.84,
    "end": 47588.4,
    "text": "thing that we have to do is we have to create a record. So this is the root of your domain. So",
    "textdich": ""
  },
  {
    "start": 47588.4,
    "end": 47593.68,
    "text": "I'm just going to say at symbol, this is going to create an A record. And we want to select the",
    "textdich": ""
  },
  {
    "start": 47593.68,
    "end": 47599.04,
    "text": "specific droplet that we created. So this one's a bunch of fast API, you should only have one.",
    "textdich": ""
  },
  {
    "start": 47599.04,
    "end": 47602.64,
    "text": "But if you have other droplets, make sure you select the right one, and then select create",
    "textdich": ""
  },
  {
    "start": 47602.64,
    "end": 47608.96,
    "text": "record. And at this point, if we do Sanjeev dot XYZ, in our web browser, it's going to take us",
    "textdich": ""
  },
  {
    "start": 47611.04,
    "end": 47618.32,
    "text": "to our digital ocean server. However, keep in mind, the changes to DNS usually take a little",
    "textdich": ""
  },
  {
    "start": 47618.32,
    "end": 47622.4,
    "text": "while to propagate. So you could potentially have to wait up to an hour or two hours names,",
    "textdich": ""
  },
  {
    "start": 47622.4,
    "end": 47626.0,
    "text": "cheap says it could take up to a date, but it never takes a day. So if you don't see these",
    "textdich": ""
  },
  {
    "start": 47626.0,
    "end": 47630.0,
    "text": "changes immediately, just give it, you know, 1015 minutes, and then you'll see that they work.",
    "textdich": ""
  },
  {
    "start": 47630.0,
    "end": 47634.4,
    "text": "But I'm going to add one more. And that's going to be for my subdomain, because I don't want to",
    "textdich": ""
  },
  {
    "start": 47634.4,
    "end": 47640.8,
    "text": "just do Sanjeev dot XYZ. I also want to redirect WWW dot Sanjeev dot XYZ to my server. So I can",
    "textdich": ""
  },
  {
    "start": 47640.8,
    "end": 47648.8,
    "text": "create a C name record. And I can say WWW. And so you can see what this is going to look like.",
    "textdich": ""
  },
  {
    "start": 47650.08,
    "end": 47653.84,
    "text": "And I'm just going to say at symbol right here, that's going to point it to this record,",
    "textdich": ""
  },
  {
    "start": 47653.84,
    "end": 47658.88,
    "text": "essentially. Alright, and so what this is, what this is saying is that if you send a request",
    "textdich": ""
  },
  {
    "start": 47658.88,
    "end": 47662.48,
    "text": "to Sanjeev dot XYZ, it's going to send it to the IP address of our server. And then if you",
    "textdich": ""
  },
  {
    "start": 47662.48,
    "end": 47667.6,
    "text": "send a request to the subdomain of WWW dot Sanjeev dot XYZ, it's going to be an alias for Sanjeev",
    "textdich": ""
  },
  {
    "start": 47667.6,
    "end": 47674.48,
    "text": "XYZ. So it's essentially just going to follow this. Alright, and so now if I go to Sanjeev dot XYZ,",
    "textdich": ""
  },
  {
    "start": 47679.36,
    "end": 47685.44,
    "text": "you can see that we are successfully able to access our API. And if I go to slash docs,",
    "textdich": ""
  },
  {
    "start": 47685.44,
    "end": 47692.4,
    "text": "once again, this should still work as well. And that's pretty big. Let me minimize that. And if",
    "textdich": ""
  },
  {
    "start": 47692.4,
    "end": 47702.64,
    "text": "I do the same thing for my subdomain of WWW dot Sanjeev dot XYZ. This should also work. Alright,",
    "textdich": ""
  },
  {
    "start": 47702.64,
    "end": 47708.24,
    "text": "so we've got our domain set up. And once we have our domain, we can now finally set up SSL. So we",
    "textdich": ""
  },
  {
    "start": 47708.24,
    "end": 47713.44,
    "text": "can handle secure HTTPS traffic, because we don't want to send our application traffic over HTTP.",
    "textdich": ""
  },
  {
    "start": 47713.44,
    "end": 47717.36,
    "text": "And we want that nice little lock symbol, that green lock symbol. So we'll tackle that in the",
    "textdich": ""
  },
  {
    "start": 47717.36,
    "end": 47724.48,
    "text": "next video. Okay, so it's now time to set up SSL for our application. So I want you to search for",
    "textdich": ""
  },
  {
    "start": 47724.48,
    "end": 47730.72,
    "text": "certified. So this is the website for let's encrypt, which is a free SSL service. And here",
    "textdich": ""
  },
  {
    "start": 47730.72,
    "end": 47735.52,
    "text": "they've got excellent documentation. What we want to do is select to get certified instructions.",
    "textdich": ""
  },
  {
    "start": 47735.52,
    "end": 47739.92,
    "text": "And then we can just specify what software we're running. So this is for nginx. And the system is",
    "textdich": ""
  },
  {
    "start": 47739.92,
    "end": 47744.88,
    "text": "going to be a bunch of 20 dot 0.4. The reason it asked for this information is that it actually",
    "textdich": ""
  },
  {
    "start": 47744.88,
    "end": 47750.64,
    "text": "will automatically reconfigure nginx for you to handle HTTPS, because normally when you want to",
    "textdich": ""
  },
  {
    "start": 47750.64,
    "end": 47754.48,
    "text": "set up HTTPS, you have to change some configs and nginx, I think it's a little complicated.",
    "textdich": ""
  },
  {
    "start": 47755.6,
    "end": 47758.64,
    "text": "And so the it's saying the first thing that we have to do is we have to install snapd.",
    "textdich": ""
  },
  {
    "start": 47759.68,
    "end": 47766.0,
    "text": "If you installed a bunch of, you know, from DigitalOcean, snapd should automatically be",
    "textdich": ""
  },
  {
    "start": 47766.0,
    "end": 47772.56,
    "text": "installed for you. So you can do snap the dash dash version, I think. Or is it snap dash dash",
    "textdich": ""
  },
  {
    "start": 47772.56,
    "end": 47776.64,
    "text": "version? I think it's snap version. Yeah, okay, so it's snap. Okay, so we've got snap installed,",
    "textdich": ""
  },
  {
    "start": 47776.64,
    "end": 47783.76,
    "text": "that's perfect. And then what we want to do is we want to install with this command right here. So",
    "textdich": ""
  },
  {
    "start": 47783.76,
    "end": 47788.24,
    "text": "just copy this. And we're pretty much just going to follow this website, because I told like I said,",
    "textdich": ""
  },
  {
    "start": 47788.24,
    "end": 47796.24,
    "text": "the instructions are fantastic. So we'll install cert bot. Right, cert bots installed, then we",
    "textdich": ""
  },
  {
    "start": 47796.24,
    "end": 47802.64,
    "text": "want to do this command. But you have two options, you can either just generate a certificate.",
    "textdich": ""
  },
  {
    "start": 47805.6,
    "end": 47809.12,
    "text": "Or you can have cert bot automatically configure nginx for you,",
    "textdich": ""
  },
  {
    "start": 47809.12,
    "end": 47819.52,
    "text": "we're going to have cert bot do the work for us. And so we can just paste this in. And then we have",
    "textdich": ""
  },
  {
    "start": 47819.52,
    "end": 47831.04,
    "text": "to provide an email address. So this is going to be whatever email you want to use. And then we",
    "textdich": ""
  },
  {
    "start": 47831.04,
    "end": 47839.76,
    "text": "got to agree to the terms of service. You can do no for this one. Right, then we have to specify",
    "textdich": ""
  },
  {
    "start": 47839.76,
    "end": 47844.72,
    "text": "what domain names we want to generate a certificate for. So we want to generate a certificate for",
    "textdich": ""
  },
  {
    "start": 47844.72,
    "end": 47855.6,
    "text": "Sanjeev dot XYZ, in my case, and then www dot Sanjeev dot XYZ. All right, and it looks like it",
    "textdich": ""
  },
  {
    "start": 47855.6,
    "end": 47860.8,
    "text": "did some magic to our default config file that we were the we were originally changing. So if we",
    "textdich": ""
  },
  {
    "start": 47860.8,
    "end": 47864.8,
    "text": "actually go to the sites available folder, which we're already at, and just do a cat default,",
    "textdich": ""
  },
  {
    "start": 47866.48,
    "end": 47870.8,
    "text": "you're going to notice some changes to this file. And that's because cert bot actually made a whole",
    "textdich": ""
  },
  {
    "start": 47870.8,
    "end": 47879.92,
    "text": "bunch of changes. And the main change is where where are these changes? Not here, not here,",
    "textdich": ""
  },
  {
    "start": 47879.92,
    "end": 47887.68,
    "text": "here we go. So this server block is for SSL configuration. And so these are the changes",
    "textdich": ""
  },
  {
    "start": 47887.68,
    "end": 47893.6,
    "text": "they made. So we're going to listen on port 443. So that's the default SSL or HTTPS port. That's",
    "textdich": ""
  },
  {
    "start": 47893.6,
    "end": 47898.24,
    "text": "good. And I guess that's for IPv6. This is for IPv4. These are going to be the two certificates",
    "textdich": ""
  },
  {
    "start": 47898.24,
    "end": 47903.84,
    "text": "that were generated. And then there's a few other configs that it added. And we also have this",
    "textdich": ""
  },
  {
    "start": 47903.84,
    "end": 47909.04,
    "text": "server block right here, which is going to actually redirect HTTP requests to HTTPS. So we",
    "textdich": ""
  },
  {
    "start": 47909.04,
    "end": 47915.2,
    "text": "can never even use HTTP anymore. It's going to ensure that our clients always use HTTPS and",
    "textdich": ""
  },
  {
    "start": 47915.2,
    "end": 47922.56,
    "text": "no redirect them to HTTPS. And you can see that right here, you know, if host equals www.sanjeev.xyz,",
    "textdich": ""
  },
  {
    "start": 47922.56,
    "end": 47928.64,
    "text": "we want to send a 301 redirect to HTTPS, and then host request right here. And we're doing the same",
    "textdich": ""
  },
  {
    "start": 47928.64,
    "end": 47934.48,
    "text": "thing for just the Sanjeev dot x, y, z. And so that's all done by cert bot. And so now if I go",
    "textdich": ""
  },
  {
    "start": 47934.48,
    "end": 47945.28,
    "text": "here, and I do Sanjeev dot whoops, dot x, y, z, take a look at this, we get the little green lock,",
    "textdich": ""
  },
  {
    "start": 47945.28,
    "end": 47950.24,
    "text": "that means connection secure, that means we're using HTTPS. And you can see the HTTPS here. And",
    "textdich": ""
  },
  {
    "start": 47950.24,
    "end": 47958.64,
    "text": "if I hard code it to be HTTP. Look at that, it still has the lock because it redirected to HTTPS.",
    "textdich": ""
  },
  {
    "start": 47958.64,
    "end": 47966.24,
    "text": "And let's just make sure that the docs work now. And it looks like the docs still work. So we now",
    "textdich": ""
  },
  {
    "start": 47966.24,
    "end": 47973.68,
    "text": "have HTTPS setup on our nginx server. And just like we did with our service, we want to make sure that",
    "textdich": ""
  },
  {
    "start": 47973.68,
    "end": 47980.8,
    "text": "nginx has been set up to automatically start upon a reboot. So we could do a system CTL status nginx.",
    "textdich": ""
  },
  {
    "start": 47980.8,
    "end": 47985.44,
    "text": "And let's just quickly verify if it's if it has been set up to do so. And I can see that on mine,",
    "textdich": ""
  },
  {
    "start": 47985.44,
    "end": 47990.24,
    "text": "it's set up to be enabled. So it will automatically start upon reboot, which is what we want. And I",
    "textdich": ""
  },
  {
    "start": 47990.24,
    "end": 47995.04,
    "text": "think this is the default configuration when you install and set up nginx. However, if you see",
    "textdich": ""
  },
  {
    "start": 47995.04,
    "end": 48001.36,
    "text": "disabled here, just go ahead and do a system CTL, enable nginx. And that's going to make sure that",
    "textdich": ""
  },
  {
    "start": 48001.36,
    "end": 48007.28,
    "text": "it will be moved to an enabled state. So it'll get started upon a reboot. The last thing that we",
    "textdich": ""
  },
  {
    "start": 48007.28,
    "end": 48012.96,
    "text": "need to do to complete our deployment process is set up a firewall on our machine. And the reason",
    "textdich": ""
  },
  {
    "start": 48012.96,
    "end": 48017.04,
    "text": "we want to set up a firewall is just for basic security purposes, we want to make sure that we",
    "textdich": ""
  },
  {
    "start": 48017.04,
    "end": 48022.24,
    "text": "only open up ports that we're going to be using. Because right now you can access this box on any",
    "textdich": ""
  },
  {
    "start": 48022.24,
    "end": 48027.84,
    "text": "port. And we want to make sure that we really harden our system so that only the traffic that",
    "textdich": ""
  },
  {
    "start": 48027.84,
    "end": 48032.08,
    "text": "should be sent to this box is allowed to this box. We don't want people trying to connect to",
    "textdich": ""
  },
  {
    "start": 48032.08,
    "end": 48037.76,
    "text": "different services on our on our machine that they shouldn't be. So we're going to be using a the",
    "textdich": ""
  },
  {
    "start": 48037.76,
    "end": 48046.8,
    "text": "built in firewall called a UFW. And if we do a pseudo UFW status, UFW is the firewall. And so",
    "textdich": ""
  },
  {
    "start": 48046.8,
    "end": 48050.48,
    "text": "you can see right now it's inactive. And that's perfect. And what we have to do is we have to set",
    "textdich": ""
  },
  {
    "start": 48050.48,
    "end": 48054.8,
    "text": "up a whole bunch of rules. And we have to tell the firewall what kind of traffic should we allow",
    "textdich": ""
  },
  {
    "start": 48054.8,
    "end": 48062.72,
    "text": "to our machine. And we can run pseudo UFW allow and then we can specify, you know, what specific",
    "textdich": ""
  },
  {
    "start": 48062.72,
    "end": 48067.44,
    "text": "port we want to allow traffic on what specific IP addresses should we should be able to talk to. So",
    "textdich": ""
  },
  {
    "start": 48067.44,
    "end": 48071.52,
    "text": "since this is a public API, we want to make sure that technically anyone can access our server",
    "textdich": ""
  },
  {
    "start": 48072.32,
    "end": 48078.32,
    "text": "from HTTP and HTTPS. So we're going to do allow HTTP. So this is going to allow HTTP traffic.",
    "textdich": ""
  },
  {
    "start": 48078.32,
    "end": 48083.76,
    "text": "And you can see it created an IPv4 and an IPv6 rule, we want to allow HTTPS traffic.",
    "textdich": ""
  },
  {
    "start": 48084.8,
    "end": 48090.24,
    "text": "And keep in mind, we have to SSH to our machine so we can access it. So we have to allow SSH as well.",
    "textdich": ""
  },
  {
    "start": 48090.24,
    "end": 48104.24,
    "text": "And if you wanted to, you could also allow 5432. So that's going to be to allow postgres",
    "textdich": ""
  },
  {
    "start": 48104.24,
    "end": 48109.12,
    "text": "traffic. Now, the way we've set things up, you don't need to actually allow this port.",
    "textdich": ""
  },
  {
    "start": 48109.92,
    "end": 48115.52,
    "text": "Because technically, our app, right, our fast API is running on the local machine. So it's not going",
    "textdich": ""
  },
  {
    "start": 48115.52,
    "end": 48119.68,
    "text": "to be hindered by this firewall. So it can access the database because it's running on the local",
    "textdich": ""
  },
  {
    "start": 48119.68,
    "end": 48124.16,
    "text": "machine. So if you wanted to make it so that no one from the outside world can directly access your",
    "textdich": ""
  },
  {
    "start": 48124.16,
    "end": 48128.4,
    "text": "database, you would not want to allow this. And that's what a lot of people do, because it can be",
    "textdich": ""
  },
  {
    "start": 48128.4,
    "end": 48132.88,
    "text": "a little risky opening up your database port, because then people can potentially access your",
    "textdich": ""
  },
  {
    "start": 48132.88,
    "end": 48138.4,
    "text": "database. So it's up to you. However, if you want to be able to, you know, go to PG admin,",
    "textdich": ""
  },
  {
    "start": 48138.96,
    "end": 48144.32,
    "text": "and if you want to be able to connect to your box, remotely, then you're going to have to allow",
    "textdich": ""
  },
  {
    "start": 48144.32,
    "end": 48148.88,
    "text": "5432. So it's just up to you, it's your preference, do whatever you want to do, I'm going to allow",
    "textdich": ""
  },
  {
    "start": 48148.88,
    "end": 48153.6,
    "text": "this just for demonstration purposes. So I can show you that, hey, when you allow 5432, we can",
    "textdich": ""
  },
  {
    "start": 48153.6,
    "end": 48159.84,
    "text": "connect remotely. So I'll add that rule. And then finally, we have to start our firewall.",
    "textdich": ""
  },
  {
    "start": 48162.32,
    "end": 48170.8,
    "text": "We do sudo UFW enable. And it's just going to tell us that we could potentially lose connection",
    "textdich": ""
  },
  {
    "start": 48170.8,
    "end": 48175.92,
    "text": "because we're starting up a firewall, that's fine. And we've started up a firewall. So if I do a",
    "textdich": ""
  },
  {
    "start": 48175.92,
    "end": 48181.2,
    "text": "sudo UFW status, you can see that it's active. And you can see all the rules that it's put in place.",
    "textdich": ""
  },
  {
    "start": 48181.2,
    "end": 48187.92,
    "text": "So it's saying we allow port 80 traffic from anywhere, we're going to allow that port 443,",
    "textdich": ""
  },
  {
    "start": 48187.92,
    "end": 48193.52,
    "text": "we're going to allow from anywhere. And same thing with SSH and 5432, and all of the IPv6 rules as",
    "textdich": ""
  },
  {
    "start": 48193.52,
    "end": 48197.44,
    "text": "well. And then everything else is dropped and blocked. And let's just double check that we can",
    "textdich": ""
  },
  {
    "start": 48197.44,
    "end": 48201.76,
    "text": "access the docks. And it looks like we can and just to make sure it's not cached or something",
    "textdich": ""
  },
  {
    "start": 48201.76,
    "end": 48209.36,
    "text": "like that. Still works. And now we've got our firewall. And the firewall will start up",
    "textdich": ""
  },
  {
    "start": 48209.36,
    "end": 48213.2,
    "text": "automatically. So you don't actually have to configure anything else. If you do want to",
    "textdich": ""
  },
  {
    "start": 48213.2,
    "end": 48221.44,
    "text": "delete a rule, you can do sudo UFW, delete, allow, and then whatever rules you can do HTTP,",
    "textdich": ""
  },
  {
    "start": 48221.44,
    "end": 48229.04,
    "text": "or you can do 5432, whichever one you want to delete. But now that we have our application",
    "textdich": ""
  },
  {
    "start": 48229.04,
    "end": 48234.08,
    "text": "deployed, one of the common things that you're going to have to do is make changes to your",
    "textdich": ""
  },
  {
    "start": 48234.08,
    "end": 48238.24,
    "text": "application and then push out those changes. So I'm going to show you guys how we can do this in",
    "textdich": ""
  },
  {
    "start": 48238.24,
    "end": 48243.44,
    "text": "a manual process. Ultimately, if you're developing an application, it's best to set up a very",
    "textdich": ""
  },
  {
    "start": 48243.44,
    "end": 48247.6,
    "text": "efficient CI CD pipeline. But that's a little outside of the scope of this course. So I'm going",
    "textdich": ""
  },
  {
    "start": 48247.6,
    "end": 48251.52,
    "text": "to just show you how to do this manually. And you'll see that it only requires a couple of commands.",
    "textdich": ""
  },
  {
    "start": 48252.96,
    "end": 48256.56,
    "text": "So go ahead and make your changes, you know, whatever code changes. So I'm going to say,",
    "textdich": ""
  },
  {
    "start": 48256.56,
    "end": 48263.76,
    "text": "Hello, world, couple exclamation points. All right, we'll save that. And we're going to do is we're",
    "textdich": ""
  },
  {
    "start": 48263.76,
    "end": 48268.88,
    "text": "going to do a git add dash dash all again. And we're going to do a git commit dash m give it some",
    "textdich": ""
  },
  {
    "start": 48268.88,
    "end": 48278.48,
    "text": "meaningful message, changed the world. All right, and then we're going to do a git push. And before",
    "textdich": ""
  },
  {
    "start": 48278.48,
    "end": 48283.6,
    "text": "we do that, if you just type in, yeah, just do a git push, then we provide origin, which is the",
    "textdich": ""
  },
  {
    "start": 48283.6,
    "end": 48292.72,
    "text": "name of our remote, and then the branch that we're on. So we can say main. And that's going to push",
    "textdich": ""
  },
  {
    "start": 48292.72,
    "end": 48299.28,
    "text": "it up to our GitHub repository. And at that point, once it's there, you can just quickly verify if",
    "textdich": ""
  },
  {
    "start": 48299.28,
    "end": 48303.6,
    "text": "you want. But I'm going to assume that it's there. And then what we're going to do is we're going to",
    "textdich": ""
  },
  {
    "start": 48303.6,
    "end": 48309.84,
    "text": "go into our application folder, which is in our home directory, then we go into apps, and then",
    "textdich": ""
  },
  {
    "start": 48309.84,
    "end": 48314.56,
    "text": "source. And then here, we're just going to do a git pull. So it's going to pull all the changes",
    "textdich": ""
  },
  {
    "start": 48314.56,
    "end": 48322.08,
    "text": "that were made. So it's going to grab the latest changes. And we'll Alright, so we've pulled out",
    "textdich": ""
  },
  {
    "start": 48322.08,
    "end": 48328.96,
    "text": "all of our code now. And keep in mind, you know, if you had changed the requirements dot txt file,",
    "textdich": ""
  },
  {
    "start": 48328.96,
    "end": 48336.4,
    "text": "and you definitely want to do a pip install, you know, pip install, dash r requirements dot txt,",
    "textdich": ""
  },
  {
    "start": 48336.4,
    "end": 48340.96,
    "text": "if you did, but we didn't change any of that. So we don't need to do that. And what we can do now",
    "textdich": ""
  },
  {
    "start": 48340.96,
    "end": 48345.68,
    "text": "is we can we have to restart our application. Because if I just refresh this, you can see",
    "textdich": ""
  },
  {
    "start": 48345.68,
    "end": 48352.4,
    "text": "nothing's changed, there's no exclamation points. So we'll do a system pseudo system CTL, restart",
    "textdich": ""
  },
  {
    "start": 48353.68,
    "end": 48362.88,
    "text": "API. And let's try this out now. And we've got all of the exclamation points now. So that's",
    "textdich": ""
  },
  {
    "start": 48362.88,
    "end": 48368.32,
    "text": "how you push out changes through a manual process. But like I said, it's best to set up a CICD pipeline.",
    "textdich": ""
  },
  {
    "start": 48369.84,
    "end": 48374.24,
    "text": "In this section, we're going to focus on Docker rising our application. I originally wasn't going",
    "textdich": ""
  },
  {
    "start": 48374.24,
    "end": 48378.72,
    "text": "to do anything on Docker, but I figured I would just make a quick video, just to show you guys",
    "textdich": ""
  },
  {
    "start": 48378.72,
    "end": 48384.24,
    "text": "how we can quickly set up our fast API environment within a Docker based environment. And I'll also",
    "textdich": ""
  },
  {
    "start": 48384.24,
    "end": 48389.44,
    "text": "show you guys how to set up a Postgres database within Docker. This is going to be a fairly quick",
    "textdich": ""
  },
  {
    "start": 48389.44,
    "end": 48393.2,
    "text": "run through of Docker, I'm going to assume that you guys have a basic understanding of Docker,",
    "textdich": ""
  },
  {
    "start": 48393.2,
    "end": 48396.72,
    "text": "I'm going to assume that you already have Docker installed on your machine. So we're going to get",
    "textdich": ""
  },
  {
    "start": 48396.72,
    "end": 48403.76,
    "text": "right to it and get started on setting up our fast API within Docker. So I had Docker hub open,",
    "textdich": ""
  },
  {
    "start": 48403.76,
    "end": 48408.4,
    "text": "which is just, you know, a public repository of different images that we have access to,",
    "textdich": ""
  },
  {
    "start": 48408.4,
    "end": 48412.56,
    "text": "you can create an account if you want to, you don't have to create one at this stage,",
    "textdich": ""
  },
  {
    "start": 48412.56,
    "end": 48417.52,
    "text": "the only time we'll need to create an account for this course, is if you want to push an image up",
    "textdich": ""
  },
  {
    "start": 48417.52,
    "end": 48422.64,
    "text": "to a, you know, a repository hosted on Docker hub. If you don't want to do that, then you don't need",
    "textdich": ""
  },
  {
    "start": 48422.64,
    "end": 48427.92,
    "text": "to go ahead and create an account. But what we want to do is we want to figure out a image",
    "textdich": ""
  },
  {
    "start": 48427.92,
    "end": 48433.6,
    "text": "that we're going to use for our fast API, a Docker container. And so just go ahead and search for",
    "textdich": ""
  },
  {
    "start": 48433.6,
    "end": 48437.92,
    "text": "Python. And what we're going to do is we're going to use the official Python image. So select the",
    "textdich": ""
  },
  {
    "start": 48437.92,
    "end": 48442.24,
    "text": "official Python image. And you'll see that there's a couple of different options. So you can",
    "textdich": ""
  },
  {
    "start": 48443.2,
    "end": 48447.36,
    "text": "scroll down, you can see the different versions of Python. And we're actually going to use version",
    "textdich": ""
  },
  {
    "start": 48447.36,
    "end": 48454.24,
    "text": "3.9.7 in this case. But you could see that with the default Python image, we have all of the",
    "textdich": ""
  },
  {
    "start": 48454.24,
    "end": 48458.32,
    "text": "different versions that we could pretty much ever want. And then they got slim images, they got the",
    "textdich": ""
  },
  {
    "start": 48458.32,
    "end": 48464.24,
    "text": "Alpine images as well. But we're going to use just the standard image. Now, if we use this specific",
    "textdich": ""
  },
  {
    "start": 48464.24,
    "end": 48469.76,
    "text": "image, the problem with this is that this is just a basic image with Python, there's nothing else on",
    "textdich": ""
  },
  {
    "start": 48469.76,
    "end": 48475.52,
    "text": "it. And at that point, if we just have a basic Python container, then we have to do all of the",
    "textdich": ""
  },
  {
    "start": 48475.52,
    "end": 48480.88,
    "text": "work of copying our source code onto the Docker container. And then we have to install all of our",
    "textdich": ""
  },
  {
    "start": 48480.88,
    "end": 48485.92,
    "text": "dependencies and set up our application. And that kind of defeats the purpose of Docker, because the",
    "textdich": ""
  },
  {
    "start": 48485.92,
    "end": 48491.68,
    "text": "main idea behind Docker is that we actually create an image that has everything that we need to run",
    "textdich": ""
  },
  {
    "start": 48491.68,
    "end": 48496.4,
    "text": "our application. So we just start up the image, or I guess we technically start up the container,",
    "textdich": ""
  },
  {
    "start": 48496.4,
    "end": 48499.68,
    "text": "which is made from the image, and that should just have everything it needs. And it should",
    "textdich": ""
  },
  {
    "start": 48499.68,
    "end": 48505.04,
    "text": "just start working right away. So that's exactly what I want to do. And to actually get that to",
    "textdich": ""
  },
  {
    "start": 48505.04,
    "end": 48510.96,
    "text": "accomplish, we're going to have to create our own custom image. And all custom images need to start",
    "textdich": ""
  },
  {
    "start": 48510.96,
    "end": 48514.8,
    "text": "off with the base image. So we're going to start off with this base Python image. And we're going",
    "textdich": ""
  },
  {
    "start": 48514.8,
    "end": 48520.08,
    "text": "to customize it by doing a few things, including copying our source code into it, and installing",
    "textdich": ""
  },
  {
    "start": 48520.08,
    "end": 48526.0,
    "text": "all the dependencies, and setting up a few other details. So to actually create a custom Docker",
    "textdich": ""
  },
  {
    "start": 48526.0,
    "end": 48532.16,
    "text": "image, we're going to go to our project directory. And we're going to create a file that's referred",
    "textdich": ""
  },
  {
    "start": 48532.16,
    "end": 48540.0,
    "text": "to as a Docker file. Now, this Docker file is going to have all of the steps necessary to create",
    "textdich": ""
  },
  {
    "start": 48540.0,
    "end": 48544.88,
    "text": "our own custom image. And the first thing that we have to do is we have to set up or specify our",
    "textdich": ""
  },
  {
    "start": 48544.88,
    "end": 48552.56,
    "text": "base image. So we're going to use this Python 3.9 dot seven image as the base image. So what we do",
    "textdich": ""
  },
  {
    "start": 48552.56,
    "end": 48557.92,
    "text": "is we say from, and then the name of the image. So this is the Python image. And then if we want to,",
    "textdich": ""
  },
  {
    "start": 48557.92,
    "end": 48563.68,
    "text": "we can also do a version. So I'm going to do 3.9 dot seven. If you're wondering where I'm getting",
    "textdich": ""
  },
  {
    "start": 48563.68,
    "end": 48567.76,
    "text": "this from, this is all from the documentation, you just say from the name of the image, which",
    "textdich": ""
  },
  {
    "start": 48567.76,
    "end": 48572.32,
    "text": "in this case is Python. And then you can see the different tags. So if you want 3.9 dot seven slim",
    "textdich": ""
  },
  {
    "start": 48572.32,
    "end": 48577.52,
    "text": "bullseye, you got that. And if you want to see them going over that in an example, we're kind",
    "textdich": ""
  },
  {
    "start": 48577.52,
    "end": 48585.44,
    "text": "of basically just following this essentially. The next step is going to be an optional step,",
    "textdich": ""
  },
  {
    "start": 48585.44,
    "end": 48591.2,
    "text": "but I always like to do this, we're going to use the workator flag. And this is going to set the",
    "textdich": ""
  },
  {
    "start": 48591.2,
    "end": 48596.64,
    "text": "working directory. So I'm going to say this is going to be a user source slash app. Now how do",
    "textdich": ""
  },
  {
    "start": 48596.64,
    "end": 48601.52,
    "text": "I know that there's a folder called user slash source, I've actually run the Python image myself,",
    "textdich": ""
  },
  {
    "start": 48601.52,
    "end": 48605.6,
    "text": "and I checked to see where I could actually set up my application. So I found that there is a",
    "textdich": ""
  },
  {
    "start": 48606.24,
    "end": 48610.72,
    "text": "path here. And then I want to create a folder called app. And this is where I'm going to store",
    "textdich": ""
  },
  {
    "start": 48610.72,
    "end": 48615.2,
    "text": "all of my application code. And once again, you can take a look at the documentation. And it does",
    "textdich": ""
  },
  {
    "start": 48615.2,
    "end": 48619.2,
    "text": "the same thing. So if you ever lost, just take a look at the doc, and it's going to help explain",
    "textdich": ""
  },
  {
    "start": 48619.2,
    "end": 48624.16,
    "text": "things. But like I said, this is the optional command in this case, because what it really does",
    "textdich": ""
  },
  {
    "start": 48624.16,
    "end": 48629.84,
    "text": "is it's going to tell Docker, this is where all of the commands are going to essentially run from.",
    "textdich": ""
  },
  {
    "start": 48629.84,
    "end": 48634.64,
    "text": "So it's like doing a CD into slash user slash source slash app. And then anytime we give it",
    "textdich": ""
  },
  {
    "start": 48634.64,
    "end": 48638.4,
    "text": "any instructions, it's always going to do everything in that directory. So it's just going to help",
    "textdich": ""
  },
  {
    "start": 48638.4,
    "end": 48642.64,
    "text": "simplify some of the later steps. But it is technically optional. The next thing that I want",
    "textdich": ""
  },
  {
    "start": 48642.64,
    "end": 48648.48,
    "text": "to do is I want to copy our requirements dot txt file from our local machine onto our Docker",
    "textdich": ""
  },
  {
    "start": 48648.48,
    "end": 48657.92,
    "text": "container. So we use the copy command. We say we want to copy requirements dot txt. And then we",
    "textdich": ""
  },
  {
    "start": 48657.92,
    "end": 48664.56,
    "text": "have to specify the directory within our container or image that we want to copy it to. So I'm going",
    "textdich": ""
  },
  {
    "start": 48664.56,
    "end": 48669.6,
    "text": "to say dot slash. So where does this exactly point to? Well, remember, we set our working directory.",
    "textdich": ""
  },
  {
    "start": 48669.6,
    "end": 48674.24,
    "text": "So everything is going to be with regards to that directory. So when I say the current directory,",
    "textdich": ""
  },
  {
    "start": 48674.24,
    "end": 48680.16,
    "text": "that means this directory. Now, if we didn't have this line right here, then we would have to",
    "textdich": ""
  },
  {
    "start": 48680.16,
    "end": 48685.36,
    "text": "specify the full path to that directory. So you can see that it's kind of simplifying things for",
    "textdich": ""
  },
  {
    "start": 48685.36,
    "end": 48688.88,
    "text": "us. Because then we can just kind of say, hey, I want to use the current directory, because that's",
    "textdich": ""
  },
  {
    "start": 48688.88,
    "end": 48695.12,
    "text": "what the working directory is. And the next thing that I want to do is run a command, which is going",
    "textdich": ""
  },
  {
    "start": 48695.12,
    "end": 48699.84,
    "text": "to be responsible for installing all of our dependencies, because we have our requirements",
    "textdich": ""
  },
  {
    "start": 48699.84,
    "end": 48707.44,
    "text": "dot txt file copied into our Docker container. So we're going to do a pip install the dash R,",
    "textdich": ""
  },
  {
    "start": 48707.44,
    "end": 48715.28,
    "text": "and then requirements dot txt. And if you want to, we can also specify the dash, dash, no, dash,",
    "textdich": ""
  },
  {
    "start": 48715.92,
    "end": 48722.24,
    "text": "cash, dash, if you wanted to as well. And so that's going to install all of our dependencies.",
    "textdich": ""
  },
  {
    "start": 48722.24,
    "end": 48730.88,
    "text": "Then the next thing that I'm going to do is I'm going to do copy dot dot. So what does this mean,",
    "textdich": ""
  },
  {
    "start": 48730.88,
    "end": 48736.0,
    "text": "this is going to copy everything in our current directory. So all of our source code, and then",
    "textdich": ""
  },
  {
    "start": 48736.0,
    "end": 48740.32,
    "text": "it's going to copy it into the current directory in our container. So what is the current directory?",
    "textdich": ""
  },
  {
    "start": 48740.32,
    "end": 48744.08,
    "text": "Well, that's the one that's set by work there. And once again, if we don't have this defined,",
    "textdich": ""
  },
  {
    "start": 48744.08,
    "end": 48748.4,
    "text": "then we would have to specify the full path of slash user slash source slash app.",
    "textdich": ""
  },
  {
    "start": 48748.4,
    "end": 48756.96,
    "text": "Now, one thing that you might notice that's a little unusual is the fact that we copy all",
    "textdich": ""
  },
  {
    "start": 48756.96,
    "end": 48762.64,
    "text": "of our source code at the end right here, which is going to include everything in our directory,",
    "textdich": ""
  },
  {
    "start": 48762.64,
    "end": 48766.4,
    "text": "including the requirements dot txt file. So you might be wondering, well, why exactly do we copy",
    "textdich": ""
  },
  {
    "start": 48766.4,
    "end": 48772.32,
    "text": "just the requirements dot txt file up here? Well, this is a little bit of an optimization that",
    "textdich": ""
  },
  {
    "start": 48772.32,
    "end": 48777.84,
    "text": "doctor that Docker provides us. So when Docker runs, when we build images from a Docker file,",
    "textdich": ""
  },
  {
    "start": 48777.84,
    "end": 48783.04,
    "text": "it actually treats each one of these lines or steps as a layer of the image. So kind of builds",
    "textdich": ""
  },
  {
    "start": 48783.04,
    "end": 48788.48,
    "text": "an image by running the first layer, then creating the second layer, the third, fourth and fifth layer.",
    "textdich": ""
  },
  {
    "start": 48789.52,
    "end": 48794.64,
    "text": "And it actually catches the result of each step. So this is important, because when you catch the",
    "textdich": ""
  },
  {
    "start": 48794.64,
    "end": 48800.0,
    "text": "result, if nothing changes, then we can just use the cash results. So let's say I, you know, run",
    "textdich": ""
  },
  {
    "start": 48800.0,
    "end": 48805.12,
    "text": "this image, or I create an image from this file. It's going to take a certain amount of time,",
    "textdich": ""
  },
  {
    "start": 48805.12,
    "end": 48810.16,
    "text": "because it has to, it has to do a pip install requirements dot txt, where it's installing all",
    "textdich": ""
  },
  {
    "start": 48810.16,
    "end": 48815.92,
    "text": "the dependencies, which does take a decent amount of time. But if I run this again, right, and nothing",
    "textdich": ""
  },
  {
    "start": 48815.92,
    "end": 48819.92,
    "text": "changes, well, then it can just use the cash result, because it knows nothing's changed.",
    "textdich": ""
  },
  {
    "start": 48820.96,
    "end": 48828.96,
    "text": "And this is important, because when I change my source code here, maybe like my database.py file,",
    "textdich": ""
  },
  {
    "start": 48828.96,
    "end": 48833.28,
    "text": "it's going to see what steps changed, right? And so if I change my source code,",
    "textdich": ""
  },
  {
    "start": 48833.28,
    "end": 48838.4,
    "text": "does that change the base image? No, we're still using the same base image. Does it change the",
    "textdich": ""
  },
  {
    "start": 48838.4,
    "end": 48843.36,
    "text": "working directory that we used? Nope, still the same. Did it change the requirements dot txt file?",
    "textdich": ""
  },
  {
    "start": 48843.36,
    "end": 48849.12,
    "text": "Nope, still the same. Did it change any of the dependencies that we installed? Absolutely not.",
    "textdich": ""
  },
  {
    "start": 48849.12,
    "end": 48854.56,
    "text": "It only changed the final step. So this causes Docker to be able to use the cast result of step",
    "textdich": ""
  },
  {
    "start": 48854.56,
    "end": 48862.88,
    "text": "one, two, three, four, a step four, and it only has to rerun step five. But if we change requirements dot",
    "textdich": ""
  },
  {
    "start": 48862.88,
    "end": 48869.12,
    "text": "txt, this file right here, then it knows that this step changed here. So it's gonna have to",
    "textdich": ""
  },
  {
    "start": 48869.12,
    "end": 48875.52,
    "text": "rerun this step, then this step, then this step. Right. And so this gives us an advantage, because",
    "textdich": ""
  },
  {
    "start": 48875.52,
    "end": 48881.04,
    "text": "anytime we change our source code, we only have to run this last step. And if we change our",
    "textdich": ""
  },
  {
    "start": 48881.04,
    "end": 48885.36,
    "text": "requirements at txt, then we have to run all of these steps. And keep in mind that this step is",
    "textdich": ""
  },
  {
    "start": 48885.36,
    "end": 48891.12,
    "text": "the longest step. And so if I had actually like, if I can comment this out, so if I didn't have",
    "textdich": ""
  },
  {
    "start": 48891.12,
    "end": 48897.52,
    "text": "this line, and instead, I copied all of my source code right here, what would happen is, every time",
    "textdich": ""
  },
  {
    "start": 48897.52,
    "end": 48904.88,
    "text": "I changed any code in any of my files, I would have to rerun a pip install every single time.",
    "textdich": ""
  },
  {
    "start": 48904.88,
    "end": 48911.44,
    "text": "And that would cause us to have to rerun the longest step in our build process. And so that's",
    "textdich": ""
  },
  {
    "start": 48911.44,
    "end": 48915.52,
    "text": "why we have this optimization. That's why we copy the requirements at txt file so that we can cast",
    "textdich": ""
  },
  {
    "start": 48915.52,
    "end": 48920.48,
    "text": "that result. And so anytime we make any changes to that file, sorry, anytime we make any changes",
    "textdich": ""
  },
  {
    "start": 48920.48,
    "end": 48931.12,
    "text": "to our source code that's not in that file, we don't have to rerun a pip install. All right,",
    "textdich": ""
  },
  {
    "start": 48931.12,
    "end": 48936.08,
    "text": "and then finally, we have to give it the command that we want to run when we start the container.",
    "textdich": ""
  },
  {
    "start": 48936.08,
    "end": 48942.96,
    "text": "So we'll say CMD brackets. And so the command that we want to run is uvcorn app dot main app.",
    "textdich": ""
  },
  {
    "start": 48943.68,
    "end": 48949.04,
    "text": "And so the way we actually specify the command is we, we break out each word of the command. So here",
    "textdich": ""
  },
  {
    "start": 48949.04,
    "end": 48960.24,
    "text": "we do uvcorn. And then we say, app dot main app. And then here, we're going to pass in the the host",
    "textdich": ""
  },
  {
    "start": 48960.24,
    "end": 48964.88,
    "text": "flag and the port flag like we did on our Ubuntu machine. So we do dash dash host",
    "textdich": ""
  },
  {
    "start": 48969.28,
    "end": 48973.44,
    "text": "000. And we do dash dash port.",
    "textdich": ""
  },
  {
    "start": 48976.4,
    "end": 48982.24,
    "text": "That's gonna be 8000. Okay, so it's basically anytime you have a space between the commands,",
    "textdich": ""
  },
  {
    "start": 48982.24,
    "end": 48987.04,
    "text": "you just split it up into a different string within this list. That's just kind of the syntax",
    "textdich": ""
  },
  {
    "start": 48987.04,
    "end": 48992.72,
    "text": "that you have to use with these Docker files. But it's the same thing as running uvcorn app dot main",
    "textdich": ""
  },
  {
    "start": 48994.4,
    "end": 49004.0,
    "text": "app, and then dash dash host dash dash port 8000, 8000. So it's just going to essentially run this",
    "textdich": ""
  },
  {
    "start": 49004.0,
    "end": 49008.72,
    "text": "in our container, we just have to provide it in this format. Right. And so now our Docker file",
    "textdich": ""
  },
  {
    "start": 49008.72,
    "end": 49013.68,
    "text": "is complete, and we can actually build our image. So what we're going to do is I'm going to do a",
    "textdich": ""
  },
  {
    "start": 49013.68,
    "end": 49019.04,
    "text": "Docker, and then the command to build our images build. And then we'll do a dash dash help. So we",
    "textdich": ""
  },
  {
    "start": 49019.04,
    "end": 49026.64,
    "text": "can see all of the different flags. And most of these don't really matter. The only one I really",
    "textdich": ""
  },
  {
    "start": 49026.64,
    "end": 49032.64,
    "text": "care about is a tag. So I'm going to give this a name. So I'm going to say Docker build dash t,",
    "textdich": ""
  },
  {
    "start": 49032.64,
    "end": 49036.16,
    "text": "I'm going to give this image water a name that I think is reasonable, I'm just going to call this",
    "textdich": ""
  },
  {
    "start": 49036.16,
    "end": 49045.84,
    "text": "fast API. And we have to pass in one last argument, which I forgot, which is going to be the the",
    "textdich": ""
  },
  {
    "start": 49045.84,
    "end": 49050.72,
    "text": "context, you can think of the context is just kind of the directory where the Docker file is. So",
    "textdich": ""
  },
  {
    "start": 49050.72,
    "end": 49055.04,
    "text": "it's going to be in the current directory, because we can see the Docker file is in the root of our",
    "textdich": ""
  },
  {
    "start": 49055.04,
    "end": 49064.24,
    "text": "folder structure. So I could just say dot. And so now it's actually going to build our",
    "textdich": ""
  },
  {
    "start": 49064.24,
    "end": 49073.92,
    "text": "our image. And if I do a Docker image LS, we can see all of our Docker images. And you'll see that",
    "textdich": ""
  },
  {
    "start": 49073.92,
    "end": 49079.2,
    "text": "I've got a whole bunch. But we've got my fast API right up here. And so now we can go ahead and use",
    "textdich": ""
  },
  {
    "start": 49079.2,
    "end": 49086.48,
    "text": "this image for actually building out a container. And we can run a whole bunch of Docker commands",
    "textdich": ""
  },
  {
    "start": 49086.48,
    "end": 49091.12,
    "text": "like Docker run, and then specify the image image that you want to use and then pass in all the",
    "textdich": ""
  },
  {
    "start": 49091.12,
    "end": 49095.2,
    "text": "flags. But I don't like doing that. I don't like working with Docker run. Instead, I want to use",
    "textdich": ""
  },
  {
    "start": 49095.2,
    "end": 49100.08,
    "text": "Docker compose. And if you have never worked with Docker compose Docker compose, it does the same",
    "textdich": ""
  },
  {
    "start": 49100.08,
    "end": 49104.64,
    "text": "thing as running Docker commands on the CLI, we just provide all the instructions on a file so",
    "textdich": ""
  },
  {
    "start": 49104.64,
    "end": 49108.64,
    "text": "that we don't have to remember all of these long commands. With all of these extra flags, we",
    "textdich": ""
  },
  {
    "start": 49108.64,
    "end": 49112.8,
    "text": "literally write out the flags in a file. And then we can just say Docker compose up and it's going",
    "textdich": ""
  },
  {
    "start": 49112.8,
    "end": 49117.52,
    "text": "to bring up all of our containers. So we're going to take a look at Docker compose in the next video",
    "textdich": ""
  },
  {
    "start": 49117.52,
    "end": 49122.32,
    "text": "and see how we can get that set up. Alright, so we're going to learn about how we can use Docker",
    "textdich": ""
  },
  {
    "start": 49122.32,
    "end": 49127.44,
    "text": "compose to automatically spin up our containers with the desired configuration. And you're going",
    "textdich": ""
  },
  {
    "start": 49127.44,
    "end": 49130.96,
    "text": "to see that it's so much easier to use Docker compose than just running Docker run whenever",
    "textdich": ""
  },
  {
    "start": 49130.96,
    "end": 49135.6,
    "text": "you need to, because we can spin up multiple containers all with one command. And we can also",
    "textdich": ""
  },
  {
    "start": 49135.6,
    "end": 49140.72,
    "text": "tear them down all with one command. And to use Docker compose, we have to provide the set of",
    "textdich": ""
  },
  {
    "start": 49140.72,
    "end": 49148.4,
    "text": "instructions using a file called Docker dash compose dot YML. And so this is a YAML file. And",
    "textdich": ""
  },
  {
    "start": 49148.4,
    "end": 49153.28,
    "text": "if you don't know too much about YAML, it's just a, I guess, technically, like a markup language,",
    "textdich": ""
  },
  {
    "start": 49153.28,
    "end": 49157.92,
    "text": "I guess. But the most important thing to understand is that spacing matters. So this is",
    "textdich": ""
  },
  {
    "start": 49157.92,
    "end": 49162.08,
    "text": "kind of like Python, where you need to make sure that the tabs and the spaces are just right,",
    "textdich": ""
  },
  {
    "start": 49162.08,
    "end": 49164.4,
    "text": "and everything lines up, or then it's going to start to throw errors.",
    "textdich": ""
  },
  {
    "start": 49165.68,
    "end": 49169.6,
    "text": "And the first thing that we need to do is specify what version of Docker compose we want to use.",
    "textdich": ""
  },
  {
    "start": 49169.6,
    "end": 49173.68,
    "text": "So we say version. And I'm going to say just version three, it's not the latest,",
    "textdich": ""
  },
  {
    "start": 49173.68,
    "end": 49178.56,
    "text": "it's just come most common one. If you actually go to the Docker documentation for compose file,",
    "textdich": ""
  },
  {
    "start": 49178.56,
    "end": 49181.92,
    "text": "you'll see the different versions that you can specify. And you can actually take a look at the",
    "textdich": ""
  },
  {
    "start": 49181.92,
    "end": 49186.72,
    "text": "documentation and see what feature was introduced in what version so you can figure out what version",
    "textdich": ""
  },
  {
    "start": 49186.72,
    "end": 49192.08,
    "text": "you need to perform all of your operations, we're not doing anything special. So version three is",
    "textdich": ""
  },
  {
    "start": 49192.08,
    "end": 49200.0,
    "text": "just fine for us. Then within Docker compose, we have a concept of services. And so a service,",
    "textdich": ""
  },
  {
    "start": 49200.56,
    "end": 49205.36,
    "text": "really, at the heart of it is nothing more than just a container. So if you want Docker compose",
    "textdich": ""
  },
  {
    "start": 49205.36,
    "end": 49209.36,
    "text": "to spin you up a container, you have to define a service. If you want Docker compose to spin up",
    "textdich": ""
  },
  {
    "start": 49209.36,
    "end": 49214.64,
    "text": "four containers, we're going to have four different services, pretty simple. So we have to give each",
    "textdich": ""
  },
  {
    "start": 49214.64,
    "end": 49220.72,
    "text": "service or each container a name. So we're going to have one container for our fast API. And I'm",
    "textdich": ""
  },
  {
    "start": 49220.72,
    "end": 49227.12,
    "text": "just going to call this container API or the service API. And the first thing that we need to",
    "textdich": ""
  },
  {
    "start": 49227.12,
    "end": 49231.44,
    "text": "do is we have to specify either the image that we use. So I could technically say like image,",
    "textdich": ""
  },
  {
    "start": 49231.44,
    "end": 49237.68,
    "text": "and then we can point to like the Python image, or I can specify build, where we can essentially do",
    "textdich": ""
  },
  {
    "start": 49237.68,
    "end": 49242.72,
    "text": "the same thing that we did before in the previous video, where we ran a Docker build, and then",
    "textdich": ""
  },
  {
    "start": 49242.72,
    "end": 49248.48,
    "text": "provided the location of the Docker file. But we can just specify that here within Docker composed",
    "textdich": ""
  },
  {
    "start": 49248.48,
    "end": 49252.56,
    "text": "that Docker compose will automatically build the image for us if it doesn't exist. So we'll say",
    "textdich": ""
  },
  {
    "start": 49252.56,
    "end": 49258.64,
    "text": "Docker build, and then we specify the context of the path to the Docker file, which is the current",
    "textdich": ""
  },
  {
    "start": 49258.64,
    "end": 49262.88,
    "text": "directory, based off of where the Docker composes. So they're in the same directory. So I just say",
    "textdich": ""
  },
  {
    "start": 49262.88,
    "end": 49269.6,
    "text": "current directory. And then we have to specify a port that we want to open up because this is an",
    "textdich": ""
  },
  {
    "start": 49269.6,
    "end": 49274.88,
    "text": "API. So the outside world needs to be able to, to reach our container, but by default, all containers",
    "textdich": ""
  },
  {
    "start": 49274.88,
    "end": 49278.8,
    "text": "can't talk to the or sorry, by default, that the outside world can actually talk to your container.",
    "textdich": ""
  },
  {
    "start": 49278.8,
    "end": 49285.44,
    "text": "So we have to open up or poke holes on our local machine to open up some ports. So we say ports,",
    "textdich": ""
  },
  {
    "start": 49285.44,
    "end": 49292.48,
    "text": "and this expects an a an array of ports. And so there's two different ways to do an array. With",
    "textdich": ""
  },
  {
    "start": 49292.48,
    "end": 49297.52,
    "text": "YAML, or with a Docker compose file, we can do, you know, just an array like this, where we just",
    "textdich": ""
  },
  {
    "start": 49297.52,
    "end": 49303.36,
    "text": "provide a list of things. Or we can also do it like this, where we do a dash and then provide,",
    "textdich": ""
  },
  {
    "start": 49303.36,
    "end": 49308.08,
    "text": "provide, you know, something and then a dash for the next entry in the list. So I'm going to use",
    "textdich": ""
  },
  {
    "start": 49308.08,
    "end": 49314.08,
    "text": "this syntax because I kind of like it better. But to open a port, there's a specific format that",
    "textdich": ""
  },
  {
    "start": 49314.08,
    "end": 49317.6,
    "text": "we're going to use. So what we say is there's gonna be two numbers, there's going to be the",
    "textdich": ""
  },
  {
    "start": 49318.56,
    "end": 49327.92,
    "text": "port on local host. And then we do that. And then we do the port on container. All right,",
    "textdich": ""
  },
  {
    "start": 49327.92,
    "end": 49333.2,
    "text": "so what's essentially happening is we're telling Docker, if we receive traffic on our local host",
    "textdich": ""
  },
  {
    "start": 49333.2,
    "end": 49338.08,
    "text": "on this port, this port specified here, we're going to forward it to this specific port on the",
    "textdich": ""
  },
  {
    "start": 49338.08,
    "end": 49343.68,
    "text": "container. So the second number is a little bit easier to set up because it's going to be whatever",
    "textdich": ""
  },
  {
    "start": 49343.68,
    "end": 49348.16,
    "text": "port our applications running on. So if we take a look at our Docker file, we can see that our",
    "textdich": ""
  },
  {
    "start": 49348.16,
    "end": 49354.16,
    "text": "container is going to be listening on port 8000. So we want to set this second number to be port 8000.",
    "textdich": ""
  },
  {
    "start": 49356.4,
    "end": 49361.12,
    "text": "And keep in mind, you could choose to use any other value. So if you decided to use port",
    "textdich": ""
  },
  {
    "start": 49361.12,
    "end": 49366.88,
    "text": "80 here, then you would just change it to port 80 here. But I'm gonna leave it as 8000 just for",
    "textdich": ""
  },
  {
    "start": 49366.88,
    "end": 49373.28,
    "text": "simplicity sake. Then the second number that we're going to use is going to be the port on the local",
    "textdich": ""
  },
  {
    "start": 49373.28,
    "end": 49378.0,
    "text": "machine, or on the local host, which in this case is my Windows machine. But if it's on like a",
    "textdich": ""
  },
  {
    "start": 49378.0,
    "end": 49384.4,
    "text": "production server, it's going to be whatever machine or IP of that specific servers. And so here,",
    "textdich": ""
  },
  {
    "start": 49384.4,
    "end": 49389.36,
    "text": "we could specify any ports, if you can literally pick any port that's open. So if I said port 4000,",
    "textdich": ""
  },
  {
    "start": 49389.36,
    "end": 49395.84,
    "text": "what that means is that, you know, if I go to my my postman, this would be the equivalent of doing",
    "textdich": ""
  },
  {
    "start": 49395.84,
    "end": 49401.36,
    "text": "local host colon 4000, right, which is that first number. And so anytime we send traffic to that",
    "textdich": ""
  },
  {
    "start": 49401.36,
    "end": 49407.12,
    "text": "specific port on a local machine, it's going to route it to port 8000 in our container, which is",
    "textdich": ""
  },
  {
    "start": 49407.12,
    "end": 49415.44,
    "text": "what port our applications listening on. But if I change this to port 8000 as well, then our request",
    "textdich": ""
  },
  {
    "start": 49415.44,
    "end": 49421.84,
    "text": "would be local host port 8000. So I always like to have the two numbers match up because it's just",
    "textdich": ""
  },
  {
    "start": 49421.84,
    "end": 49427.2,
    "text": "simpler. But sometimes that's not an option. So just pick a open port on your local host machine,",
    "textdich": ""
  },
  {
    "start": 49427.2,
    "end": 49431.2,
    "text": "it doesn't really matter what it is, just make sure that you remember what it is. And I'm going",
    "textdich": ""
  },
  {
    "start": 49431.2,
    "end": 49436.32,
    "text": "to leave it like that. And I'll delete this line right here. And for now, I think this is good",
    "textdich": ""
  },
  {
    "start": 49436.32,
    "end": 49441.84,
    "text": "enough. And what we're gonna do is we're going to try to run this and see what happens. So I'll say",
    "textdich": ""
  },
  {
    "start": 49441.84,
    "end": 49447.44,
    "text": "Docker dash compose up. And then if I do a dash dash help, we can see some other flags that we",
    "textdich": ""
  },
  {
    "start": 49447.44,
    "end": 49452.32,
    "text": "may need. And the only flag that I really need right now is the dash D. So this is going to",
    "textdich": ""
  },
  {
    "start": 49452.32,
    "end": 49455.84,
    "text": "run the containers and in the background so that we're not automatically connected to it.",
    "textdich": ""
  },
  {
    "start": 49456.88,
    "end": 49459.92,
    "text": "So I'll do dash dash, sorry, just dash D.",
    "textdich": ""
  },
  {
    "start": 49463.92,
    "end": 49468.4,
    "text": "Right. And so you'll see, if you take a look, what's happening is we're rebuilding our image.",
    "textdich": ""
  },
  {
    "start": 49468.4,
    "end": 49472.0,
    "text": "So because we specified the build right here, it's going to build our image.",
    "textdich": ""
  },
  {
    "start": 49473.76,
    "end": 49477.84,
    "text": "And then it's going to start our containers. So you can see that it's creating fast API,",
    "textdich": ""
  },
  {
    "start": 49478.96,
    "end": 49485.2,
    "text": "underscore API underscore one. And so the the naming syntax comes from the project directory.",
    "textdich": ""
  },
  {
    "start": 49485.2,
    "end": 49490.0,
    "text": "So it's called fast API. Alright, so that's why the first word, then we do underscore,",
    "textdich": ""
  },
  {
    "start": 49490.0,
    "end": 49494.48,
    "text": "and the name of the service, so I called this service API, then it's API. And then it has the",
    "textdich": ""
  },
  {
    "start": 49494.48,
    "end": 49499.04,
    "text": "number one, because there's one instance. But if I told it to spin up four, then I'd have 123 and",
    "textdich": ""
  },
  {
    "start": 49499.04,
    "end": 49504.16,
    "text": "four. So we've got our container. If I do a Docker ps, we should be able to see.",
    "textdich": ""
  },
  {
    "start": 49506.24,
    "end": 49509.36,
    "text": "Nope, oh, we can see it's down. And that's because if I do a Docker ps dash a,",
    "textdich": ""
  },
  {
    "start": 49510.96,
    "end": 49517.12,
    "text": "and we can see that this one right here, looks like it stopped 43 seconds ago.",
    "textdich": ""
  },
  {
    "start": 49517.12,
    "end": 49525.68,
    "text": "And so it crashed for whatever reason. And that's okay. What we can do is I think we can actually",
    "textdich": ""
  },
  {
    "start": 49525.68,
    "end": 49533.44,
    "text": "see the logs after it goes down. So if I do Docker logs, fast API one, we can actually take a look",
    "textdich": ""
  },
  {
    "start": 49533.44,
    "end": 49537.92,
    "text": "at the logs at what caused it to go down. And we can see a couple things. But we can see that we",
    "textdich": ""
  },
  {
    "start": 49537.92,
    "end": 49544.72,
    "text": "get the pedantic error for our settings object, which is all of our environment variables. So",
    "textdich": ""
  },
  {
    "start": 49544.72,
    "end": 49548.56,
    "text": "obviously, a container is like its own separate machine. So it needs all of the environment",
    "textdich": ""
  },
  {
    "start": 49548.56,
    "end": 49554.88,
    "text": "variables passed to it, or then our application is going to crash. So how do we pass an environment",
    "textdich": ""
  },
  {
    "start": 49554.88,
    "end": 49563.28,
    "text": "variable in Docker? Pretty simple, we just pass a environment field. And then here, it's going to",
    "textdich": ""
  },
  {
    "start": 49563.28,
    "end": 49568.32,
    "text": "provide a you need to provide an array of environment variables. So I do dash. And then",
    "textdich": ""
  },
  {
    "start": 49568.32,
    "end": 49572.08,
    "text": "here, we just specify our environment variables. So I'm actually going to copy and paste this",
    "textdich": ""
  },
  {
    "start": 49572.08,
    "end": 49579.68,
    "text": "section right here. And so these are all of our environment variables. Keep in mind, if you don't",
    "textdich": ""
  },
  {
    "start": 49579.68,
    "end": 49583.52,
    "text": "want to actually write out all of your environment variables, we can actually use Docker to point",
    "textdich": ""
  },
  {
    "start": 49583.52,
    "end": 49589.52,
    "text": "to a dot env file or a environment file on your local machine. And if you want to do that,",
    "textdich": ""
  },
  {
    "start": 49589.52,
    "end": 49596.64,
    "text": "it's pretty simple. Here, we would just specify the env underscore file.",
    "textdich": ""
  },
  {
    "start": 49596.64,
    "end": 49602.48,
    "text": "And then you can actually provide multiple files. But in this case, you just provide the path to",
    "textdich": ""
  },
  {
    "start": 49602.48,
    "end": 49606.48,
    "text": "the file. So it's going to be in the current directory. And it's going to be dot env. So you",
    "textdich": ""
  },
  {
    "start": 49606.48,
    "end": 49611.68,
    "text": "can do either one or a combination of both. I'm just going to use this format so that we can see",
    "textdich": ""
  },
  {
    "start": 49611.68,
    "end": 49615.2,
    "text": "all of the environment variables. And I'm going to just comment this out for now just for documentation",
    "textdich": ""
  },
  {
    "start": 49615.2,
    "end": 49625.12,
    "text": "purposes. And now what we're going to do is we're going to do a Docker compose down just to tear",
    "textdich": ""
  },
  {
    "start": 49625.12,
    "end": 49634.88,
    "text": "everything down. And I'm going to bring it back up and detached. And notice this time, it didn't",
    "textdich": ""
  },
  {
    "start": 49634.88,
    "end": 49640.8,
    "text": "build the image. So why exactly didn't it build the image? Well, Docker compose is very simple.",
    "textdich": ""
  },
  {
    "start": 49640.8,
    "end": 49647.68,
    "text": "All it does is it goes to Docker image, basically just runs a Docker image LS. And it looks for the",
    "textdich": ""
  },
  {
    "start": 49647.68,
    "end": 49652.0,
    "text": "image that it would have created. And there's a very specific format that he uses, which is going",
    "textdich": ""
  },
  {
    "start": 49652.0,
    "end": 49657.44,
    "text": "to be the name of the folder or the directory, and then underscore and then the service. So since",
    "textdich": ""
  },
  {
    "start": 49657.44,
    "end": 49663.28,
    "text": "the image was already created previously, it doesn't recreate it. However, if you obviously",
    "textdich": ""
  },
  {
    "start": 49663.28,
    "end": 49667.92,
    "text": "make changes to your to your Docker file, and you want to make changes, then you would have to do",
    "textdich": ""
  },
  {
    "start": 49667.92,
    "end": 49677.2,
    "text": "Docker up. And if you look for the flags, there should be a dash dash. Let's see, build, this is",
    "textdich": ""
  },
  {
    "start": 49677.2,
    "end": 49682.64,
    "text": "going to force it to build a new image. So keep in mind, anytime the image has to change, and you've",
    "textdich": ""
  },
  {
    "start": 49682.64,
    "end": 49687.84,
    "text": "already but the image already exists, then you have to pass in that flag to force Docker compose to",
    "textdich": ""
  },
  {
    "start": 49687.84,
    "end": 49691.52,
    "text": "let it know that hey, I made some changes, I need you to rebuild it for me because Docker compose",
    "textdich": ""
  },
  {
    "start": 49691.52,
    "end": 49698.48,
    "text": "can't detect that. Alright, so now if we do a Docker ps, we can see that it's running now and",
    "textdich": ""
  },
  {
    "start": 49698.48,
    "end": 49706.24,
    "text": "it didn't crash. And we should be able to access it on port 8000. So if I actually go here,",
    "textdich": ""
  },
  {
    "start": 49706.24,
    "end": 49715.44,
    "text": "and just do localhost 8000 with the get request. Looks like it's working. Okay, so now that we can",
    "textdich": ""
  },
  {
    "start": 49715.44,
    "end": 49719.92,
    "text": "actually access our API, which is running in a container, the next thing that I want to do is I",
    "textdich": ""
  },
  {
    "start": 49719.92,
    "end": 49724.4,
    "text": "want to set up our Postgres database. And you might be thinking, well, we already have one installed",
    "textdich": ""
  },
  {
    "start": 49724.4,
    "end": 49729.12,
    "text": "on our local machine, why are we setting up another one? Well, a couple things. First of all,",
    "textdich": ""
  },
  {
    "start": 49729.12,
    "end": 49733.36,
    "text": "if we're already Docker rising our environment, it makes sense to set up our Postgres database,",
    "textdich": ""
  },
  {
    "start": 49733.36,
    "end": 49738.16,
    "text": "especially from a development perspective within a Docker container, because it's so much easier",
    "textdich": ""
  },
  {
    "start": 49738.16,
    "end": 49743.2,
    "text": "to set up a database in a container than it is to install it on our local machine, because we just",
    "textdich": ""
  },
  {
    "start": 49743.2,
    "end": 49747.68,
    "text": "spin up a pre built image. And that's it. So even if you don't actually want to Dockerize your",
    "textdich": ""
  },
  {
    "start": 49747.68,
    "end": 49752.48,
    "text": "application, from a development perspective, I strongly recommend you make use of Docker containers",
    "textdich": ""
  },
  {
    "start": 49752.48,
    "end": 49757.12,
    "text": "so that you can spin up a quick database just for testing purposes. But since we already have a",
    "textdich": ""
  },
  {
    "start": 49757.12,
    "end": 49761.84,
    "text": "Docker based application, now, we're going to just use a Postgres database that's running in a Docker",
    "textdich": ""
  },
  {
    "start": 49761.84,
    "end": 49766.88,
    "text": "container instead of on our local machine. Because if we take a look at the environment variables",
    "textdich": ""
  },
  {
    "start": 49766.88,
    "end": 49773.36,
    "text": "that we pass to our container, we provide a value of localhost. And so localhost means that the",
    "textdich": ""
  },
  {
    "start": 49773.36,
    "end": 49778.64,
    "text": "container is going to or the API running in the container is going to try to access a database",
    "textdich": ""
  },
  {
    "start": 49778.64,
    "end": 49783.68,
    "text": "running locally on that container, which it's not. So let's create a brand new service, which once",
    "textdich": ""
  },
  {
    "start": 49783.68,
    "end": 49790.32,
    "text": "again is nothing more than another container for running our Postgres database. And so I'm going",
    "textdich": ""
  },
  {
    "start": 49790.32,
    "end": 49796.48,
    "text": "to go down here. And we're going to create another service called Postgres. And here, we're going to",
    "textdich": ""
  },
  {
    "start": 49796.48,
    "end": 49801.2,
    "text": "provide a image flag, right? Because here we did build because we're building a custom image,",
    "textdich": ""
  },
  {
    "start": 49801.2,
    "end": 49806.08,
    "text": "here, we're going to use the pre built default Postgres image. So if we go back to Docker Hub",
    "textdich": ""
  },
  {
    "start": 49806.08,
    "end": 49809.76,
    "text": "and search for Postgres, you'll see this is the official Postgres image.",
    "textdich": ""
  },
  {
    "start": 49812.16,
    "end": 49815.52,
    "text": "And it is going to contain all of the documentation for setting up Postgres.",
    "textdich": ""
  },
  {
    "start": 49816.24,
    "end": 49818.88,
    "text": "But the main thing is there's a couple of environment variables that we have to pass.",
    "textdich": ""
  },
  {
    "start": 49818.88,
    "end": 49821.52,
    "text": "So first of all, the password that's going to be used for our database,",
    "textdich": ""
  },
  {
    "start": 49822.4,
    "end": 49826.0,
    "text": "we can give an optional Postgres user, but it's going to default to Postgres if we don't provide",
    "textdich": ""
  },
  {
    "start": 49826.0,
    "end": 49830.56,
    "text": "it. And then we also want to give it a Postgres database name. So we'll call it fast API,",
    "textdich": ""
  },
  {
    "start": 49830.56,
    "end": 49833.6,
    "text": "like we've been using in our development environment. And that should be all that",
    "textdich": ""
  },
  {
    "start": 49833.6,
    "end": 49838.8,
    "text": "we have to do for the most part. So here, I'll say environment.",
    "textdich": ""
  },
  {
    "start": 49838.8,
    "end": 49849.6,
    "text": "And we'll do Postgres underscore password equals and then we can give this anything we want. So",
    "textdich": ""
  },
  {
    "start": 49849.6,
    "end": 49858.24,
    "text": "password 123. And we want Postgres underscore DB. So this is going to be fast API. Alright,",
    "textdich": ""
  },
  {
    "start": 49858.24,
    "end": 49863.04,
    "text": "the next thing that we want to do is when it comes to data within a container, that data doesn't",
    "textdich": ""
  },
  {
    "start": 49863.04,
    "end": 49866.56,
    "text": "persist as soon as the container goes down. Alright, so when you delete the container,",
    "textdich": ""
  },
  {
    "start": 49866.56,
    "end": 49870.88,
    "text": "you lose all of your data. Alright, and so from a database perspective, we don't actually want to",
    "textdich": ""
  },
  {
    "start": 49870.88,
    "end": 49875.68,
    "text": "lose our data, we want that to persist, even if we kill off the container. So how do we actually",
    "textdich": ""
  },
  {
    "start": 49875.68,
    "end": 49881.36,
    "text": "save that data, we have to create something that's called a volume. And that's what allows us to save",
    "textdich": ""
  },
  {
    "start": 49881.36,
    "end": 49885.68,
    "text": "data from a container onto our local machine. So if we kill the container, we can always spin up",
    "textdich": ""
  },
  {
    "start": 49885.68,
    "end": 49891.44,
    "text": "a new container and just point it to those files. And there's a couple of different volumes that we",
    "textdich": ""
  },
  {
    "start": 49891.44,
    "end": 49896.64,
    "text": "can use or types of volumes and Docker. There's anonymous volumes named volumes. And I think bind",
    "textdich": ""
  },
  {
    "start": 49896.64,
    "end": 49902.08,
    "text": "mounts is the other one, we're going to make use of named volumes. And so to create a named volume",
    "textdich": ""
  },
  {
    "start": 49902.08,
    "end": 49907.44,
    "text": "here under the Postgres database, section or service, we're going to say volumes.",
    "textdich": ""
  },
  {
    "start": 49909.44,
    "end": 49913.92,
    "text": "And then we say dash, and then provide a name for the volume. So you call it whatever you want,",
    "textdich": ""
  },
  {
    "start": 49913.92,
    "end": 49919.68,
    "text": "I'm going to call this Postgres dash DB. Right, and then we have to specify the path in the container",
    "textdich": ""
  },
  {
    "start": 49919.68,
    "end": 49924.32,
    "text": "that we want to actually save. So what directory do we want to persist on our local machine? And",
    "textdich": ""
  },
  {
    "start": 49924.32,
    "end": 49929.44,
    "text": "the path that the Postgres container or image actually stores all of its data, we can actually",
    "textdich": ""
  },
  {
    "start": 49929.44,
    "end": 49934.64,
    "text": "take a look at the documentation to figure this out. If you search for volume. And so right here,",
    "textdich": ""
  },
  {
    "start": 49934.64,
    "end": 49938.64,
    "text": "this gives us an example. And this is going to tell us what we need to know. So we want to save",
    "textdich": ""
  },
  {
    "start": 49938.64,
    "end": 49944.0,
    "text": "slash bar slash lib Postgres ql slash data. So that's where it's going to save all that data.",
    "textdich": ""
  },
  {
    "start": 49944.0,
    "end": 49949.68,
    "text": "So we'll copy that. And once again, this is the path in the container that Postgres is going to",
    "textdich": ""
  },
  {
    "start": 49949.68,
    "end": 49953.36,
    "text": "write to. So that's where all of our tables, all of the entries are going to get stored. So we want",
    "textdich": ""
  },
  {
    "start": 49953.36,
    "end": 49958.88,
    "text": "to copy that essentially, and save it on our local machine. And the last thing that we want to do is",
    "textdich": ""
  },
  {
    "start": 49958.88,
    "end": 49964.4,
    "text": "anytime you use named volumes, we have to create another volume section globally, and then just",
    "textdich": ""
  },
  {
    "start": 49964.4,
    "end": 49970.96,
    "text": "pass the name that we created. So whatever is here, you just put it down here. And the reason we",
    "textdich": ""
  },
  {
    "start": 49970.96,
    "end": 49974.8,
    "text": "have to do this is because named volumes are designed so that technically multiple containers",
    "textdich": ""
  },
  {
    "start": 49974.8,
    "end": 49979.6,
    "text": "can access them. So you define it down here first, technically, and then multiple containers can",
    "textdich": ""
  },
  {
    "start": 49979.6,
    "end": 49986.8,
    "text": "reference them by just calling that. Alright, so we've got this setup. And actually, I realized I",
    "textdich": ""
  },
  {
    "start": 49986.8,
    "end": 49990.88,
    "text": "left my containers running. So what I'm going to do is I'm going to comment this out for a second,",
    "textdich": ""
  },
  {
    "start": 49991.84,
    "end": 49999.04,
    "text": "save this, and I'm going to do a Docker compose down. That's going to delete everything. Then",
    "textdich": ""
  },
  {
    "start": 49999.04,
    "end": 50005.28,
    "text": "we'll uncomment our Postgres service. Then the next thing that we want to do is we have to figure",
    "textdich": ""
  },
  {
    "start": 50005.28,
    "end": 50012.32,
    "text": "out, you know, what is the host name or what's the IP address of our Postgres database. And,",
    "textdich": ""
  },
  {
    "start": 50012.32,
    "end": 50017.2,
    "text": "you know, there's a couple of different ways to do that. But what's awesome about Docker is when",
    "textdich": ""
  },
  {
    "start": 50017.2,
    "end": 50022.72,
    "text": "you use Docker compose, it creates a custom network. And a Docker network uses DNS. So we can",
    "textdich": ""
  },
  {
    "start": 50022.72,
    "end": 50026.64,
    "text": "actually say to reach the Postgres database, instead of like looking for the IP address of",
    "textdich": ""
  },
  {
    "start": 50026.64,
    "end": 50033.84,
    "text": "that container, we can use DNS. And I can just say, if I try to reach the name Postgres, right,",
    "textdich": ""
  },
  {
    "start": 50033.84,
    "end": 50038.32,
    "text": "it's automatically going to resolve to our Postgres service. So whatever our service is called,",
    "textdich": ""
  },
  {
    "start": 50038.32,
    "end": 50042.0,
    "text": "we can just reference that. And this is going to allow this container to know that when you want",
    "textdich": ""
  },
  {
    "start": 50042.0,
    "end": 50046.48,
    "text": "to talk to the Postgres database, this name here is going to resolve to the IP address of this",
    "textdich": ""
  },
  {
    "start": 50046.48,
    "end": 50052.08,
    "text": "container. And so networking with Docker within Docker is so simple, because that's all we have",
    "textdich": ""
  },
  {
    "start": 50052.08,
    "end": 50056.08,
    "text": "to do. And then the rest of the things, the default port, the password, the database name,",
    "textdich": ""
  },
  {
    "start": 50056.08,
    "end": 50062.24,
    "text": "the database username, those should all be okay, we can just leave as default. And now I can then",
    "textdich": ""
  },
  {
    "start": 50062.24,
    "end": 50070.72,
    "text": "start this up. And it looks like image something's wrong with the image, I forgot to give the image.",
    "textdich": ""
  },
  {
    "start": 50070.72,
    "end": 50077.04,
    "text": "So what's the image name? It's just Postgres. So that's just whatever this name is, that's all you",
    "textdich": ""
  },
  {
    "start": 50077.04,
    "end": 50093.76,
    "text": "need. Alright, and so now we can see that it started up both. Let's just quickly test our API,",
    "textdich": ""
  },
  {
    "start": 50093.76,
    "end": 50098.4,
    "text": "so we didn't break anything. So that works. And then let's go to create user, make sure it's point",
    "textdich": ""
  },
  {
    "start": 50098.4,
    "end": 50105.52,
    "text": "to port 8000. In this case, and if we create user, right, you can see that we have successfully",
    "textdich": ""
  },
  {
    "start": 50105.52,
    "end": 50111.68,
    "text": "created the user. So it looks like we can now access the the database from our fast API container.",
    "textdich": ""
  },
  {
    "start": 50113.12,
    "end": 50118.64,
    "text": "Now, what I'm going to do now is delete everything again. So Docker compose down deletes everything.",
    "textdich": ""
  },
  {
    "start": 50118.64,
    "end": 50122.56,
    "text": "And you can see, I'm essentially able to destroy both of my containers with a single command. And",
    "textdich": ""
  },
  {
    "start": 50122.56,
    "end": 50127.36,
    "text": "that's kind of the power behind Docker compose. And ideally, we want our Postgres container to",
    "textdich": ""
  },
  {
    "start": 50127.36,
    "end": 50133.6,
    "text": "start up first, because our API is dependent on the container. So for our API, we can pass in",
    "textdich": ""
  },
  {
    "start": 50133.6,
    "end": 50142.08,
    "text": "another option. And I can say depends on and here we can specify a list of services, in this case,",
    "textdich": ""
  },
  {
    "start": 50142.08,
    "end": 50146.4,
    "text": "just Postgres. And so this is going to tell Docker, I want you to start the Postgres container",
    "textdich": ""
  },
  {
    "start": 50146.4,
    "end": 50153.04,
    "text": "before the API container starts. Now, technically, it's not going to wait for Postgres to actually",
    "textdich": ""
  },
  {
    "start": 50153.04,
    "end": 50156.88,
    "text": "fully initialize, it'll just start the container. So you still want to put in checks in your code",
    "textdich": ""
  },
  {
    "start": 50156.88,
    "end": 50161.28,
    "text": "to make sure that, you know, if you can't access the database, because it's not initialized,",
    "textdich": ""
  },
  {
    "start": 50161.28,
    "end": 50166.88,
    "text": "you want to keep retrying. And so once again, we can bring this back up with a single command.",
    "textdich": ""
  },
  {
    "start": 50168.8,
    "end": 50172.16,
    "text": "And if you take a look at the order, you can see that we started up the database first.",
    "textdich": ""
  },
  {
    "start": 50172.16,
    "end": 50177.28,
    "text": "So now you'll always start up your database first, and then start up fast API. And then you'll stop",
    "textdich": ""
  },
  {
    "start": 50177.28,
    "end": 50182.88,
    "text": "fast API first before stopping the database, because we set up the depends on. When it comes",
    "textdich": ""
  },
  {
    "start": 50182.88,
    "end": 50187.6,
    "text": "to working with Docker containers, we do experience a few extra challenges, especially from my",
    "textdich": ""
  },
  {
    "start": 50187.6,
    "end": 50192.08,
    "text": "development perspective. And I'm going to show you how those challenges actually work,",
    "textdich": ""
  },
  {
    "start": 50192.08,
    "end": 50197.84,
    "text": "or what those challenges actually are. And if I actually go back to my, my test request, wherever",
    "textdich": ""
  },
  {
    "start": 50197.84,
    "end": 50206.0,
    "text": "that is, where I'm just going to reach the default URL. So if I hit send, you can see it says Hello,",
    "textdich": ""
  },
  {
    "start": 50206.0,
    "end": 50210.8,
    "text": "world pushing out to Ubuntu, right? And that's because in my main.py file is just says Hello,",
    "textdich": ""
  },
  {
    "start": 50210.8,
    "end": 50218.48,
    "text": "world pushing out to Ubuntu. Now, if I save this, or change this, and then save this, and then I",
    "textdich": ""
  },
  {
    "start": 50218.48,
    "end": 50224.48,
    "text": "send a request, right, we still get the same response, I don't get the the new text that I added.",
    "textdich": ""
  },
  {
    "start": 50224.48,
    "end": 50229.2,
    "text": "So why is that? Well, there's a couple things that are happening. But the easiest way to figure",
    "textdich": ""
  },
  {
    "start": 50229.2,
    "end": 50232.8,
    "text": "this out is to actually poke around in your container and figure out what's happening. So",
    "textdich": ""
  },
  {
    "start": 50232.8,
    "end": 50238.16,
    "text": "I'm going to do Docker ps. And I want to see what the file system of fast API container actually",
    "textdich": ""
  },
  {
    "start": 50238.16,
    "end": 50245.2,
    "text": "looks like. So to do that, we do Docker exec dash it. So that's going to enter into interactive mode,",
    "textdich": ""
  },
  {
    "start": 50245.2,
    "end": 50251.92,
    "text": "we specify the container name, and then we type in the word bash. So what we're doing is we're",
    "textdich": ""
  },
  {
    "start": 50251.92,
    "end": 50256.48,
    "text": "entering interactive mode, and we're going to override the default command of the container.",
    "textdich": ""
  },
  {
    "start": 50256.48,
    "end": 50261.12,
    "text": "So the default command is specified right here from the Docker file. So we don't want to run that",
    "textdich": ""
  },
  {
    "start": 50261.12,
    "end": 50269.04,
    "text": "we just want to run bash, which is going to allow us to access the file system. That's the image",
    "textdich": ""
  },
  {
    "start": 50269.04,
    "end": 50276.72,
    "text": "name. So the name of the container is fast API underscore one. So let me add the one. So now you",
    "textdich": ""
  },
  {
    "start": 50276.72,
    "end": 50282.72,
    "text": "can see that we're we get a Linux prompt. So we're in the Linux file system. And if I go into app,",
    "textdich": ""
  },
  {
    "start": 50284.8,
    "end": 50289.6,
    "text": "and then go into, if I do cat, which is going to print out the contents of a file, we'll take a",
    "textdich": ""
  },
  {
    "start": 50289.6,
    "end": 50294.0,
    "text": "look at the main dot p y file. And you can see that it just says hello world pushing out to a",
    "textdich": ""
  },
  {
    "start": 50294.0,
    "end": 50299.92,
    "text": "bun to. So when I made these changes, and added these extra characters, it didn't get pushed out",
    "textdich": ""
  },
  {
    "start": 50299.92,
    "end": 50305.04,
    "text": "to our container. And if you're trying to figure out why that is, it's pretty obvious, right?",
    "textdich": ""
  },
  {
    "start": 50305.04,
    "end": 50312.16,
    "text": "Because what we did was we created a image which copied all of our code here, at that point in",
    "textdich": ""
  },
  {
    "start": 50312.16,
    "end": 50318.0,
    "text": "time. And then when we did a Docker compose up, it created the image. And then that was it.",
    "textdich": ""
  },
  {
    "start": 50318.0,
    "end": 50323.68,
    "text": "Like nothing else changes, right? Afterwards, we went in and changed the code, but the image was",
    "textdich": ""
  },
  {
    "start": 50323.68,
    "end": 50328.16,
    "text": "already created. So whatever is in the image, nothing changes after that point. So any changes",
    "textdich": ""
  },
  {
    "start": 50328.16,
    "end": 50332.72,
    "text": "we make will not get copied over to our container. So what do we do in this case? How do we get",
    "textdich": ""
  },
  {
    "start": 50332.72,
    "end": 50338.4,
    "text": "around this limitation? Well, what we can do is we can make use of a special volume called bind",
    "textdich": ""
  },
  {
    "start": 50338.4,
    "end": 50342.96,
    "text": "amount. And a bind mount is a special volume because it allows us to sync a folder on our",
    "textdich": ""
  },
  {
    "start": 50342.96,
    "end": 50350.48,
    "text": "local machine with a folder in our container. So this app folder, which has all of our application",
    "textdich": ""
  },
  {
    "start": 50350.48,
    "end": 50354.8,
    "text": "code, what we want to do is we want to sync this folder in our container with this folder here so",
    "textdich": ""
  },
  {
    "start": 50354.8,
    "end": 50360.24,
    "text": "that if any changes get made here, it's going to get copied over to our container. And so under",
    "textdich": ""
  },
  {
    "start": 50360.24,
    "end": 50367.44,
    "text": "volumes in our API, we're going to define a volume here. And I'll say volumes. All right,",
    "textdich": ""
  },
  {
    "start": 50367.44,
    "end": 50371.44,
    "text": "just like we did with Postgres, very similar, except we're going to use a different syntax,",
    "textdich": ""
  },
  {
    "start": 50371.44,
    "end": 50376.56,
    "text": "because this is a bind mount. So a bind mount, we have to first provide the path of the folder",
    "textdich": ""
  },
  {
    "start": 50376.56,
    "end": 50381.28,
    "text": "that we want to sync on our local machine. So this is our current directory. So we can just do dot",
    "textdich": ""
  },
  {
    "start": 50381.28,
    "end": 50387.84,
    "text": "slash for current directory. But if you wanted to sync just one individual folder, maybe like the",
    "textdich": ""
  },
  {
    "start": 50387.84,
    "end": 50392.08,
    "text": "app folder, then you can do dot slash app up to you, but I'm going to sync everything. And then",
    "textdich": ""
  },
  {
    "start": 50392.08,
    "end": 50396.32,
    "text": "we have to specify the path in our Docker container, which is going to be this folder right here.",
    "textdich": ""
  },
  {
    "start": 50396.32,
    "end": 50405.6,
    "text": "And that's going to automatically sync the the two folders. And if you wanted to add some extra",
    "textdich": ""
  },
  {
    "start": 50405.6,
    "end": 50412.24,
    "text": "security, you can do ro this means read only. So what this does is this makes it so your container",
    "textdich": ""
  },
  {
    "start": 50412.24,
    "end": 50417.2,
    "text": "can't change any of these files, because only we should be changing the files, not the container",
    "textdich": ""
  },
  {
    "start": 50417.2,
    "end": 50420.88,
    "text": "itself. So this just adds a little bit of extra security if you wanted to, but it's still",
    "textdich": ""
  },
  {
    "start": 50420.88,
    "end": 50427.52,
    "text": "technically optional. And let me exit out of here. And now we'll do a Docker dash compose down.",
    "textdich": ""
  },
  {
    "start": 50432.56,
    "end": 50441.92,
    "text": "And we'll do a Docker compose up again. And now let's just change this together altogether. So",
    "textdich": ""
  },
  {
    "start": 50442.88,
    "end": 50448.32,
    "text": "bind mount works. So if we see that, that means everything's working. So let's save it.",
    "textdich": ""
  },
  {
    "start": 50448.32,
    "end": 50456.56,
    "text": "And if I send, we can see that I get the old one now. Right. So whatever I changed here doesn't",
    "textdich": ""
  },
  {
    "start": 50456.56,
    "end": 50464.8,
    "text": "get copied over. So it looks like we didn't fix the issue. So let's actually take a look and see",
    "textdich": ""
  },
  {
    "start": 50464.8,
    "end": 50469.76,
    "text": "what's happening. And so how do we do that? We'll do the Docker exec command again, to go into the",
    "textdich": ""
  },
  {
    "start": 50469.76,
    "end": 50478.32,
    "text": "file system. Let's go into the app folder. And let's cat that main.py file. And this is interesting",
    "textdich": ""
  },
  {
    "start": 50478.32,
    "end": 50483.44,
    "text": "because it looks like the bind mount did work, because we can see that the code got updated. And",
    "textdich": ""
  },
  {
    "start": 50483.44,
    "end": 50494.56,
    "text": "if I make another change, again, this time, let's just add sort of. And if I cat this again, we can",
    "textdich": ""
  },
  {
    "start": 50494.56,
    "end": 50500.0,
    "text": "see that it's in there. So the bind mount is working. And it's syncing the code with our local directory",
    "textdich": ""
  },
  {
    "start": 50500.0,
    "end": 50508.24,
    "text": "and our container. But there's one issue. And if I go back to my Docker file, you can see that I have",
    "textdich": ""
  },
  {
    "start": 50508.24,
    "end": 50512.56,
    "text": "my command right here. But this doesn't have the dash dash reload flag, which is what we need to",
    "textdich": ""
  },
  {
    "start": 50512.56,
    "end": 50517.2,
    "text": "restart the application. So anytime we make changes, our code, we need to automatically reload",
    "textdich": ""
  },
  {
    "start": 50517.2,
    "end": 50521.84,
    "text": "when it detects any changes so that we can actually see the new application. And we didn't provide",
    "textdich": ""
  },
  {
    "start": 50521.84,
    "end": 50526.24,
    "text": "that in the Docker file. And so that's why it's not working. But this is actually a pretty simple",
    "textdich": ""
  },
  {
    "start": 50526.24,
    "end": 50532.72,
    "text": "fix. We just add the dash dash reload flag. So let's tear everything down. And we have a couple",
    "textdich": ""
  },
  {
    "start": 50532.72,
    "end": 50540.0,
    "text": "options. So I can go here and say dash dash reload. And that would work just fine. But instead of",
    "textdich": ""
  },
  {
    "start": 50540.0,
    "end": 50544.24,
    "text": "doing that, what I would rather do is I like this default one, because this is the one you technically",
    "textdich": ""
  },
  {
    "start": 50544.24,
    "end": 50549.36,
    "text": "use in production, because you don't want you don't want dash dash reload in production. But in",
    "textdich": ""
  },
  {
    "start": 50549.36,
    "end": 50557.2,
    "text": "our Docker compose file, we can actually override it. So we can provide another flag called command.",
    "textdich": ""
  },
  {
    "start": 50561.52,
    "end": 50567.2,
    "text": "And here we can provide a command to override that from the Docker file. So I'll say, Docker,",
    "textdich": ""
  },
  {
    "start": 50567.2,
    "end": 50582.72,
    "text": "sorry, uvcorn app dot main app dash dash host 000 dash dash port 8000 dash dash reload.",
    "textdich": ""
  },
  {
    "start": 50585.44,
    "end": 50587.04,
    "text": "Alright, and let's bring this back up.",
    "textdich": ""
  },
  {
    "start": 50589.6,
    "end": 50594.16,
    "text": "Let's just see what it is currently right now. So we got whatever it is now. And let's make a",
    "textdich": ""
  },
  {
    "start": 50594.16,
    "end": 50599.84,
    "text": "quick change. And I'll just delete all of this and change this back to Hello World.",
    "textdich": ""
  },
  {
    "start": 50602.88,
    "end": 50607.92,
    "text": "And let's test this out. And we can see that it does successfully update. And so now our",
    "textdich": ""
  },
  {
    "start": 50607.92,
    "end": 50613.92,
    "text": "bind mount works, and we automatically restart our code. So our development environment more closely",
    "textdich": ""
  },
  {
    "start": 50613.92,
    "end": 50620.4,
    "text": "matches up with what was what we had before, before we move to Docker. Okay, so if you haven't",
    "textdich": ""
  },
  {
    "start": 50620.4,
    "end": 50625.92,
    "text": "already done so, go ahead and create an account on Docker Hub, it's a free account. But I want to",
    "textdich": ""
  },
  {
    "start": 50625.92,
    "end": 50630.4,
    "text": "show you guys how we can set up a repository on Docker Hub, so that we can actually store our",
    "textdich": ""
  },
  {
    "start": 50630.4,
    "end": 50639.2,
    "text": "images here. And so Docker Hub is kind of like the, the Docker equivalent of GitHub, where it's",
    "textdich": ""
  },
  {
    "start": 50639.2,
    "end": 50645.28,
    "text": "kind of acting as a repository. But instead of a repository for our code, it's a repository for our",
    "textdich": ""
  },
  {
    "start": 50645.28,
    "end": 50649.36,
    "text": "images. So we can upload our images, anytime we make a new image, we can actually upload it so",
    "textdich": ""
  },
  {
    "start": 50649.36,
    "end": 50654.96,
    "text": "that we can track changes to our images over time. So make an account, and then we want to go into",
    "textdich": ""
  },
  {
    "start": 50654.96,
    "end": 50661.04,
    "text": "repositories. And we want to select create repository. And then give this a name, it doesn't",
    "textdich": ""
  },
  {
    "start": 50661.04,
    "end": 50664.8,
    "text": "really matter what you want to call it, I'm just gonna call it fast API. And then we're gonna do",
    "textdich": ""
  },
  {
    "start": 50664.8,
    "end": 50671.04,
    "text": "public because you only get one private repository. And so now we have a private repository, well,",
    "textdich": ""
  },
  {
    "start": 50671.04,
    "end": 50675.28,
    "text": "it's the public repository. And so this is the URL to the repository, which is going to be your",
    "textdich": ""
  },
  {
    "start": 50675.28,
    "end": 50681.92,
    "text": "username, this is my username. And then this is the name that I gave it to fast API. And so now",
    "textdich": ""
  },
  {
    "start": 50681.92,
    "end": 50690.16,
    "text": "what I want to do is I have an image, right, if I do Docker image, LS, we could see that I have my",
    "textdich": ""
  },
  {
    "start": 50690.16,
    "end": 50696.4,
    "text": "fast API underscore API. This is going to be the image that I want. And so how do I actually upload",
    "textdich": ""
  },
  {
    "start": 50696.4,
    "end": 50703.52,
    "text": "this image to to Docker Hub? Well, there's a command called Docker push. Alright, so if I do",
    "textdich": ""
  },
  {
    "start": 50703.52,
    "end": 50711.04,
    "text": "a Docker push dash dash help, you just pass in Docker push, and then the name of the image. So",
    "textdich": ""
  },
  {
    "start": 50711.04,
    "end": 50718.48,
    "text": "let's try doing that. We'll do Docker push. And then the name of the image, which remember yours",
    "textdich": ""
  },
  {
    "start": 50718.48,
    "end": 50722.08,
    "text": "is going to be a little bit different, because it's going to be based off of your, your folder.",
    "textdich": ""
  },
  {
    "start": 50723.28,
    "end": 50731.04,
    "text": "Let's try this. And it says requested access to resource is denied. So the first thing that we",
    "textdich": ""
  },
  {
    "start": 50731.04,
    "end": 50735.68,
    "text": "have to do is we actually have to do a Docker login. So we have to log into our account. So you",
    "textdich": ""
  },
  {
    "start": 50735.68,
    "end": 50740.8,
    "text": "do Docker login here, it's gonna ask for your credentials. So we'll do sloppy networks, in this",
    "textdich": ""
  },
  {
    "start": 50740.8,
    "end": 50746.56,
    "text": "case for me, and then it's gonna be whatever it is for you guys. And then now let's try to push it",
    "textdich": ""
  },
  {
    "start": 50746.56,
    "end": 50754.56,
    "text": "again. And once again, we get a access to resource is denied. So what exactly is happening here?",
    "textdich": ""
  },
  {
    "start": 50754.56,
    "end": 50759.36,
    "text": "Well, when we want to push up a image, right, there's a very specific naming convention",
    "textdich": ""
  },
  {
    "start": 50759.36,
    "end": 50766.48,
    "text": "that we have to use, right, we have to name it exactly like this sloppy networks slash fast API.",
    "textdich": ""
  },
  {
    "start": 50766.48,
    "end": 50771.28,
    "text": "And we even see an example right here. So you do Docker push, the name of your email, or your",
    "textdich": ""
  },
  {
    "start": 50771.28,
    "end": 50776.08,
    "text": "account name, then the name of the specific repository. And then you can give it an optional",
    "textdich": ""
  },
  {
    "start": 50776.08,
    "end": 50782.8,
    "text": "tag name. So what we got to do is we got to rename our image. So how do we do that? I think it's",
    "textdich": ""
  },
  {
    "start": 50782.8,
    "end": 50790.24,
    "text": "Docker image, I think, well, let's do dash dash help, just to see if we can figure it out. We want",
    "textdich": ""
  },
  {
    "start": 50792.08,
    "end": 50796.56,
    "text": "tag. So this essentially copies an image and renames it for you.",
    "textdich": ""
  },
  {
    "start": 50798.4,
    "end": 50802.0,
    "text": "So let's do Docker image tag dash dash help.",
    "textdich": ""
  },
  {
    "start": 50804.96,
    "end": 50810.08,
    "text": "And here, we just provide the the source image and then the target image. So what is my image",
    "textdich": ""
  },
  {
    "start": 50810.08,
    "end": 50818.8,
    "text": "called again, it's gonna be this one right here. And we just do Docker image tag, then the image",
    "textdich": ""
  },
  {
    "start": 50818.8,
    "end": 50824.16,
    "text": "that we want to rename, and then we give it the new name, which has to be your account, slash,",
    "textdich": ""
  },
  {
    "start": 50824.16,
    "end": 50829.68,
    "text": "then the repository, and then you have an optional, you know, tag, the default is just going to be",
    "textdich": ""
  },
  {
    "start": 50829.68,
    "end": 50834.64,
    "text": "latest. So I'm just going to leave it without a tag. So I do that. And if I do a Docker image,",
    "textdich": ""
  },
  {
    "start": 50834.64,
    "end": 50843.04,
    "text": "LS, we should see the new one right here. And so now I can do a Docker push.",
    "textdich": ""
  },
  {
    "start": 50846.16,
    "end": 50849.04,
    "text": "It looks like I didn't copy that. So let's try this one more time.",
    "textdich": ""
  },
  {
    "start": 50854.64,
    "end": 50859.28,
    "text": "And now it looks like it's pushing something. So let's give this a minute or two. And then once",
    "textdich": ""
  },
  {
    "start": 50859.28,
    "end": 50866.24,
    "text": "it's done, let's take a look to see if we have successfully pushed it to our repository. All",
    "textdich": ""
  },
  {
    "start": 50866.24,
    "end": 50871.2,
    "text": "right, so it looks like it's successfully pushed. So now if I go back to my Docker Hub page and do",
    "textdich": ""
  },
  {
    "start": 50871.2,
    "end": 50876.88,
    "text": "a refresh, we can see that last pushed was a few seconds ago. So now we've successfully pushed it",
    "textdich": ""
  },
  {
    "start": 50876.88,
    "end": 50882.56,
    "text": "to our Docker Hub. And so you know, if we set up an actual production Docker environment, we could",
    "textdich": ""
  },
  {
    "start": 50882.56,
    "end": 50889.04,
    "text": "just pull the image from this specific URL or this specific repository. Now, before we wrap up the",
    "textdich": ""
  },
  {
    "start": 50889.04,
    "end": 50894.08,
    "text": "Docker section of this course, there's one last thing that I want to show you guys. And that is",
    "textdich": ""
  },
  {
    "start": 50894.08,
    "end": 50898.4,
    "text": "that if you take a look at what we have right now, we have a identical clone of our previous",
    "textdich": ""
  },
  {
    "start": 50898.4,
    "end": 50903.28,
    "text": "development environment, but we're now developing within a Docker container. So our Docker container",
    "textdich": ""
  },
  {
    "start": 50903.28,
    "end": 50908.4,
    "text": "environment is a exact clone of our previous development environment. The issue is is that,",
    "textdich": ""
  },
  {
    "start": 50908.4,
    "end": 50912.16,
    "text": "you know, when we move to production, assuming that you're using Docker in production, which is",
    "textdich": ""
  },
  {
    "start": 50912.16,
    "end": 50916.16,
    "text": "kind of the main idea behind Docker is that your development environment and your production",
    "textdich": ""
  },
  {
    "start": 50916.16,
    "end": 50919.52,
    "text": "environment are almost exactly the same because you're using the same exact Docker images and",
    "textdich": ""
  },
  {
    "start": 50919.52,
    "end": 50924.08,
    "text": "containers. But if we try to use this Docker compose file in production, there's going to be",
    "textdich": ""
  },
  {
    "start": 50924.08,
    "end": 50928.88,
    "text": "a whole bunch of issues. First of all, obviously, these environment variables would need to change",
    "textdich": ""
  },
  {
    "start": 50928.88,
    "end": 50934.08,
    "text": "and we can't hardcode them, we wouldn't want the dash dash reload flag. And you certainly don't",
    "textdich": ""
  },
  {
    "start": 50934.08,
    "end": 50938.48,
    "text": "want to bind mount because the code shouldn't be changing. And then the ports that we use could",
    "textdich": ""
  },
  {
    "start": 50938.48,
    "end": 50945.76,
    "text": "also potentially be different. So even though Docker or so even though the Docker environments",
    "textdich": ""
  },
  {
    "start": 50945.76,
    "end": 50949.52,
    "text": "from our production development environment should be roughly similar, there are going to be some",
    "textdich": ""
  },
  {
    "start": 50949.52,
    "end": 50954.4,
    "text": "differences. And so we need to account for that. And so what I like to do is I actually like to",
    "textdich": ""
  },
  {
    "start": 50954.4,
    "end": 50958.56,
    "text": "create two different Docker compose files, one for development, and one for production. So that's",
    "textdich": ""
  },
  {
    "start": 50958.56,
    "end": 50964.08,
    "text": "what we're going to do. But first of all, let's do a Docker compose dash down that we can just tear",
    "textdich": ""
  },
  {
    "start": 50964.08,
    "end": 50988.72,
    "text": "everything down for a second. And once that's down, I'm going to copy this and paste it. And",
    "textdich": ""
  },
  {
    "start": 50988.72,
    "end": 50994.48,
    "text": "we're going to rename these files. So this one is going to be called Docker compose dash dev. So",
    "textdich": ""
  },
  {
    "start": 50994.48,
    "end": 50998.64,
    "text": "this is going to represent our development environment. And this one is going to represent",
    "textdich": ""
  },
  {
    "start": 50998.64,
    "end": 51009.84,
    "text": "our prod environment. Alright, so we've got our dev and our prod environment, the dev doesn't need",
    "textdich": ""
  },
  {
    "start": 51009.84,
    "end": 51013.84,
    "text": "to change because we had already set that up for development environment. The production one is",
    "textdich": ""
  },
  {
    "start": 51013.84,
    "end": 51018.88,
    "text": "going to change a little bit. So first of all, the command, right, we don't want the dash dash reload,",
    "textdich": ""
  },
  {
    "start": 51018.88,
    "end": 51023.12,
    "text": "so we could specify the exact command we want, which is the one without the dash dash reload.",
    "textdich": ""
  },
  {
    "start": 51024.24,
    "end": 51028.32,
    "text": "And that should be all that we need. However, keep in mind, this is the default command",
    "textdich": ""
  },
  {
    "start": 51028.32,
    "end": 51034.72,
    "text": "from the Docker file, right? So we could technically just remove this, or just comment it out.",
    "textdich": ""
  },
  {
    "start": 51035.28,
    "end": 51039.28,
    "text": "And so I'm just going to comment it out in this case. But if you wanted a specific custom command",
    "textdich": ""
  },
  {
    "start": 51039.28,
    "end": 51044.56,
    "text": "for production, you can just provide that here, the whole idea is that this file is going to represent",
    "textdich": ""
  },
  {
    "start": 51044.56,
    "end": 51050.96,
    "text": "all the changes for our production environment. Then maybe we want instead of listening on port",
    "textdich": ""
  },
  {
    "start": 51050.96,
    "end": 51059.68,
    "text": "8000, we want port 80. So that we can use our web browser. Most of the things can stay the same,",
    "textdich": ""
  },
  {
    "start": 51059.68,
    "end": 51068.08,
    "text": "the environment variables definitely need to change. And so with a production environment,",
    "textdich": ""
  },
  {
    "start": 51068.08,
    "end": 51072.24,
    "text": "we first of all, we're not going to hard code the values, we usually want to grab these,",
    "textdich": ""
  },
  {
    "start": 51072.24,
    "end": 51076.64,
    "text": "these values from the environment variable set on the host machine. So instead of actually",
    "textdich": ""
  },
  {
    "start": 51077.36,
    "end": 51081.28,
    "text": "hard coding these in, instead, we can reference environment variables. So to reference an",
    "textdich": ""
  },
  {
    "start": 51081.28,
    "end": 51087.44,
    "text": "environment variable, what we do is we do dollar curly braces, and then the name of the environment",
    "textdich": ""
  },
  {
    "start": 51087.44,
    "end": 51092.48,
    "text": "variable. So it's going to look on the you know, Linux machine that it's running on for a environment",
    "textdich": ""
  },
  {
    "start": 51092.48,
    "end": 51096.16,
    "text": "variable called database host name. So I figured we would just have the match, just to show you what",
    "textdich": ""
  },
  {
    "start": 51096.16,
    "end": 51100.08,
    "text": "that would look like. And then we're going to do the same for all of these. And I'm just going to",
    "textdich": ""
  },
  {
    "start": 51100.08,
    "end": 51107.28,
    "text": "copy and paste this once again. So it's going to look like this. So it's just grabbing the data,",
    "textdich": ""
  },
  {
    "start": 51107.28,
    "end": 51111.28,
    "text": "the environment variable from the local machine, keep in mind, they don't technically need to match.",
    "textdich": ""
  },
  {
    "start": 51112.08,
    "end": 51114.56,
    "text": "But it just makes it easier for troubleshooting purposes.",
    "textdich": ""
  },
  {
    "start": 51116.48,
    "end": 51121.52,
    "text": "And then for the Postgres database, right, we want the password to be the same environment variable.",
    "textdich": ""
  },
  {
    "start": 51121.52,
    "end": 51127.44,
    "text": "And then we would add the database name so that we're not hard coding that one as well.",
    "textdich": ""
  },
  {
    "start": 51132.4,
    "end": 51135.12,
    "text": "And we don't want the bind mount. So we will remove that.",
    "textdich": ""
  },
  {
    "start": 51138.72,
    "end": 51142.72,
    "text": "And that's about it. So that's all you have to do. So this just gives us both a development",
    "textdich": ""
  },
  {
    "start": 51142.72,
    "end": 51149.04,
    "text": "environment and a production environment. We'll save all of that. Now starting up Docker compose",
    "textdich": ""
  },
  {
    "start": 51149.04,
    "end": 51153.28,
    "text": "is going to be a little bit different now because we don't use the default Docker dash compose dot",
    "textdich": ""
  },
  {
    "start": 51153.28,
    "end": 51159.92,
    "text": "yaml file name. So if I do a Docker compose, if I can find that the up Docker dash compose up,",
    "textdich": ""
  },
  {
    "start": 51160.8,
    "end": 51164.48,
    "text": "you're gonna see that it throws an error, right? Because it says it can't find a Docker compose",
    "textdich": ""
  },
  {
    "start": 51164.48,
    "end": 51170.16,
    "text": "dot yaml, or dot yaml with an A, or compose a yaml or compose a yaml with an A. So it looks",
    "textdich": ""
  },
  {
    "start": 51170.16,
    "end": 51174.8,
    "text": "for only these file names. So when we have a custom file name, we have to do Docker dash compose.",
    "textdich": ""
  },
  {
    "start": 51174.8,
    "end": 51180.64,
    "text": "And then we pass in the dash f flag for the file name. And so we provide the path to the file. So",
    "textdich": ""
  },
  {
    "start": 51180.64,
    "end": 51187.44,
    "text": "it's just in the current directory. So I could just do Docker dash compose dash dev dot yaml.",
    "textdich": ""
  },
  {
    "start": 51187.44,
    "end": 51192.56,
    "text": "And then we just do an up and then dash D. And then we can start it back up.",
    "textdich": ""
  },
  {
    "start": 51194.48,
    "end": 51198.08,
    "text": "And if you want to bring up a production environment, then you would do dash dash",
    "textdich": ""
  },
  {
    "start": 51198.08,
    "end": 51201.52,
    "text": "prod. That's the only difference. So you don't really have to do anything else",
    "textdich": ""
  },
  {
    "start": 51201.52,
    "end": 51208.08,
    "text": "other than running the different specific Docker compose file. And the last thing that I want to",
    "textdich": ""
  },
  {
    "start": 51208.08,
    "end": 51212.88,
    "text": "change is actually, in your production environment, you don't actually ever want to build the image in",
    "textdich": ""
  },
  {
    "start": 51212.88,
    "end": 51216.8,
    "text": "a production environment. Instead, what's recommended is that when you're done developing,",
    "textdich": ""
  },
  {
    "start": 51216.8,
    "end": 51222.4,
    "text": "you push the brand new image to Docker hub, right? And then in the production environment,",
    "textdich": ""
  },
  {
    "start": 51222.4,
    "end": 51225.76,
    "text": "we just pull this image from Docker hub. So how do we pull this image from Docker hub?",
    "textdich": ""
  },
  {
    "start": 51225.76,
    "end": 51231.36,
    "text": "Easy, we chain we remove this build option. Remember, this is going to be in the prod file.",
    "textdich": ""
  },
  {
    "start": 51231.36,
    "end": 51238.72,
    "text": "And we set this to be a image. And here, we just set this to the name of the repository. So we just",
    "textdich": ""
  },
  {
    "start": 51238.72,
    "end": 51246.4,
    "text": "do, you know, your username slash fast API dash, not dash app, just fast API. So whatever is",
    "textdich": ""
  },
  {
    "start": 51246.4,
    "end": 51250.64,
    "text": "essentially right here. And then if you want a specific image with a specific tag, then you would",
    "textdich": ""
  },
  {
    "start": 51250.64,
    "end": 51257.92,
    "text": "add the tag as well. And so that's all we have to do, feel free to stop your containers now if you",
    "textdich": ""
  },
  {
    "start": 51257.92,
    "end": 51270.32,
    "text": "want. And even when you do a down, you want to make sure you do a dash F. So it knows which file to",
    "textdich": ""
  },
  {
    "start": 51270.32,
    "end": 51284.96,
    "text": "actually look for. And I misspelled that. And that's going to conclude the Docker section of",
    "textdich": ""
  },
  {
    "start": 51284.96,
    "end": 51289.52,
    "text": "this course. And so I think this is going to give you a solid foundation on how to Dockerize your",
    "textdich": ""
  },
  {
    "start": 51289.52,
    "end": 51294.64,
    "text": "fast API. Now currently, whenever we make changes to our code, whether it's implementing a new",
    "textdich": ""
  },
  {
    "start": 51294.64,
    "end": 51299.92,
    "text": "feature or modifying the behavior of a previous feature, or even fixing some bugs that we happen",
    "textdich": ""
  },
  {
    "start": 51299.92,
    "end": 51306.64,
    "text": "to catch, right, we have no idea if the changes we make break other functionality in our code.",
    "textdich": ""
  },
  {
    "start": 51307.2,
    "end": 51311.28,
    "text": "And so normally, anytime we make any changes, we then have to, you know, go into postman,",
    "textdich": ""
  },
  {
    "start": 51311.28,
    "end": 51315.92,
    "text": "and essentially manually test out every single scenario to ensure that things are working.",
    "textdich": ""
  },
  {
    "start": 51315.92,
    "end": 51320.64,
    "text": "And this isn't a very scalable solution. It's going to result in a lot of wasted hours for",
    "textdich": ""
  },
  {
    "start": 51320.64,
    "end": 51323.92,
    "text": "every single time you have make any changes to your code, you're gonna have to test everything",
    "textdich": ""
  },
  {
    "start": 51323.92,
    "end": 51329.04,
    "text": "because you don't know what, what code you've broken by making those changes. And so this",
    "textdich": ""
  },
  {
    "start": 51329.04,
    "end": 51334.08,
    "text": "is where, you know, an automated testing library comes into play, where we can define a whole",
    "textdich": ""
  },
  {
    "start": 51334.08,
    "end": 51338.16,
    "text": "bunch of tests to test a majority of the functionality of our code. And so that way,",
    "textdich": ""
  },
  {
    "start": 51338.16,
    "end": 51342.64,
    "text": "anytime we make changes to our code, we can run our test to see if we've broken anything.",
    "textdich": ""
  },
  {
    "start": 51343.2,
    "end": 51347.52,
    "text": "And keep in mind, you know, obviously, we can't test for everything. But we can at least test",
    "textdich": ""
  },
  {
    "start": 51347.52,
    "end": 51352.48,
    "text": "for enough things that we can catch some of the more obvious bugs. And so this section of the",
    "textdich": ""
  },
  {
    "start": 51352.48,
    "end": 51356.4,
    "text": "course is going to be dedicated to getting started with testing and really understanding",
    "textdich": ""
  },
  {
    "start": 51356.4,
    "end": 51360.4,
    "text": "the concepts of testing, and seeing how we can get started with a library like pytest.",
    "textdich": ""
  },
  {
    "start": 51361.84,
    "end": 51364.88,
    "text": "But I do want to provide one little disclaimer before moving forward.",
    "textdich": ""
  },
  {
    "start": 51365.84,
    "end": 51371.76,
    "text": "I wasn't originally going to post a section on testing for this course. And the reason for that",
    "textdich": ""
  },
  {
    "start": 51371.76,
    "end": 51375.44,
    "text": "is that I don't have much experience with testing, it's not something I do a lot of or in,",
    "textdich": ""
  },
  {
    "start": 51375.44,
    "end": 51380.72,
    "text": "or at all, really. And so I want to make sure that you guys understand where I'm coming from",
    "textdich": ""
  },
  {
    "start": 51380.72,
    "end": 51386.32,
    "text": "when it comes to testing. And that is that, you know, since I am not super proficient at testing,",
    "textdich": ""
  },
  {
    "start": 51386.32,
    "end": 51391.36,
    "text": "you know, I don't really feel too qualified to actually teach it. And so what I want you guys",
    "textdich": ""
  },
  {
    "start": 51391.36,
    "end": 51395.36,
    "text": "to do to take what I want you guys to take out of this section of the course is just to how to get",
    "textdich": ""
  },
  {
    "start": 51395.36,
    "end": 51400.16,
    "text": "started with testing, how do you set things up? And what's the main ideas behind a test,",
    "textdich": ""
  },
  {
    "start": 51400.16,
    "end": 51406.48,
    "text": "I may not necessarily be teaching the best, most efficient way to test, I may not be using the most",
    "textdich": ""
  },
  {
    "start": 51406.48,
    "end": 51411.28,
    "text": "efficient way of testing. And there may be scenarios where I may not even be following best practices.",
    "textdich": ""
  },
  {
    "start": 51411.28,
    "end": 51416.32,
    "text": "But I want to show you guys how we can at least get some integration tests set up. And then at",
    "textdich": ""
  },
  {
    "start": 51416.32,
    "end": 51419.68,
    "text": "that point, what you guys can do is you can just forget everything else that I've taught you when",
    "textdich": ""
  },
  {
    "start": 51419.68,
    "end": 51423.44,
    "text": "it comes to testing. Once you at least have the groundwork, then you guys can, you know, do your",
    "textdich": ""
  },
  {
    "start": 51423.44,
    "end": 51428.48,
    "text": "own research, figure out how you ultimately want to implement testing with any of your projects,",
    "textdich": ""
  },
  {
    "start": 51428.48,
    "end": 51433.6,
    "text": "and then go ahead and just run with that. So with that in mind, in the next video,",
    "textdich": ""
  },
  {
    "start": 51433.6,
    "end": 51439.36,
    "text": "we'll get started with get getting pytest installed and writing our first test. For testing,",
    "textdich": ""
  },
  {
    "start": 51439.36,
    "end": 51442.8,
    "text": "the library that we're going to be using is pytest. So if you do a quick Google search,",
    "textdich": ""
  },
  {
    "start": 51442.8,
    "end": 51446.88,
    "text": "you can just search for pytest. And the first result is going to take you to the documentation",
    "textdich": ""
  },
  {
    "start": 51446.88,
    "end": 51451.52,
    "text": "page for the pytest library. And so I recommend you guys take a quick look at this just to see",
    "textdich": ""
  },
  {
    "start": 51451.52,
    "end": 51455.44,
    "text": "how it gets set up. And if you want to do a little bit of reading before we actually get started",
    "textdich": ""
  },
  {
    "start": 51455.44,
    "end": 51460.72,
    "text": "writing our first test, definitely go ahead and do that. But once we've got that opened up,",
    "textdich": ""
  },
  {
    "start": 51460.72,
    "end": 51465.52,
    "text": "what we can do is we can install pytest. So we can just do pip install pytest, just like we would",
    "textdich": ""
  },
  {
    "start": 51465.52,
    "end": 51471.44,
    "text": "with any other package. Then once that's done, we have access to the pytest command. So just go",
    "textdich": ""
  },
  {
    "start": 51471.44,
    "end": 51475.92,
    "text": "ahead and run pytest and see what happens. So print out a few things, you notice that we can",
    "textdich": ""
  },
  {
    "start": 51475.92,
    "end": 51480.72,
    "text": "see that the test session starts. So this is when we start testing, I print out some information",
    "textdich": ""
  },
  {
    "start": 51480.72,
    "end": 51484.56,
    "text": "about the platform that we're running on. And that's okay, we can ignore all of that. And you'll",
    "textdich": ""
  },
  {
    "start": 51484.56,
    "end": 51488.72,
    "text": "notice that it says collected zero items, we'll talk about this in a bit. But the more important",
    "textdich": ""
  },
  {
    "start": 51488.72,
    "end": 51495.36,
    "text": "thing to look at is it says no test ran in point zero four seconds. And this is expected, you know,",
    "textdich": ""
  },
  {
    "start": 51495.36,
    "end": 51499.04,
    "text": "we haven't created any tests. So obviously, it's not going to be able to run any tests.",
    "textdich": ""
  },
  {
    "start": 51499.04,
    "end": 51503.44,
    "text": "But to run our testing, all we have to do is just run this command. And then you'll see that pytest",
    "textdich": ""
  },
  {
    "start": 51503.44,
    "end": 51508.16,
    "text": "will go through all of your tests run it to verify, you know, that they all pass. And if there's any",
    "textdich": ""
  },
  {
    "start": 51508.16,
    "end": 51512.56,
    "text": "errors or anything like that, it's going to report that. So it really is as simple as that. But let's",
    "textdich": ""
  },
  {
    "start": 51512.56,
    "end": 51519.52,
    "text": "go ahead and create our test. And I want to store our all of our tests inside a directory called",
    "textdich": ""
  },
  {
    "start": 51519.52,
    "end": 51524.56,
    "text": "tests. So inside the root directory of your project, just create a new folder, we'll call it tests.",
    "textdich": ""
  },
  {
    "start": 51525.92,
    "end": 51530.0,
    "text": "And technically, you can put this folder anywhere. If you wanted to put this test directory within",
    "textdich": ""
  },
  {
    "start": 51530.0,
    "end": 51534.24,
    "text": "your app directory, you absolutely could. It's a matter of personal preference, I'm just going to",
    "textdich": ""
  },
  {
    "start": 51534.24,
    "end": 51540.08,
    "text": "keep it outside of the app directory for now. And within here, I'm going to actually create a file.",
    "textdich": ""
  },
  {
    "start": 51540.08,
    "end": 51548.56,
    "text": "And this is going to store our first test, I'm just gonna call this my test dot py for now. All",
    "textdich": ""
  },
  {
    "start": 51548.56,
    "end": 51555.12,
    "text": "right. And we obviously need to test a part of our code, whether that's a a route or a path operation",
    "textdich": ""
  },
  {
    "start": 51555.12,
    "end": 51560.8,
    "text": "or a function, or a class, we need to test something. And right now, our code is a little",
    "textdich": ""
  },
  {
    "start": 51560.8,
    "end": 51564.48,
    "text": "advanced. And when I say advanced, I don't mean advanced, because anything we've done is super",
    "textdich": ""
  },
  {
    "start": 51564.48,
    "end": 51569.44,
    "text": "advanced. So far, it's advanced from the perspective of testing, where we're coming in from a background",
    "textdich": ""
  },
  {
    "start": 51569.44,
    "end": 51574.08,
    "text": "of no knowledge of testing. So we want to start out with testing the simplest functions. So I'm",
    "textdich": ""
  },
  {
    "start": 51574.08,
    "end": 51579.68,
    "text": "going to actually create a brand new module and essentially create the simplest module or function",
    "textdich": ""
  },
  {
    "start": 51579.68,
    "end": 51583.84,
    "text": "that I can possibly think of. So I'm going to create a new file, call it whatever you want.",
    "textdich": ""
  },
  {
    "start": 51583.84,
    "end": 51587.44,
    "text": "I'm going to call this calculations, because it's essentially going to be a bunch of functions that",
    "textdich": ""
  },
  {
    "start": 51587.44,
    "end": 51593.2,
    "text": "we use to perform certain calculations. And I'm going to define the world's simplest function,",
    "textdich": ""
  },
  {
    "start": 51593.2,
    "end": 51596.72,
    "text": "which is called add. And I think you can guess what this function is going to do, it's going to",
    "textdich": ""
  },
  {
    "start": 51596.72,
    "end": 51604.24,
    "text": "take two numbers, which is going to be type int. And it's just going to return the sum of them.",
    "textdich": ""
  },
  {
    "start": 51604.24,
    "end": 51610.56,
    "text": "So we just say return num one, plus num two. Right. And the reason once again is because this",
    "textdich": ""
  },
  {
    "start": 51610.56,
    "end": 51615.04,
    "text": "is going to be a very simple when it comes to testing. So you guys can at least have an",
    "textdich": ""
  },
  {
    "start": 51615.04,
    "end": 51621.52,
    "text": "understanding of how to actually perform these tests. So we've got this module defined inside",
    "textdich": ""
  },
  {
    "start": 51621.52,
    "end": 51627.68,
    "text": "our app directory. And then in our test folder, we've got our my test p y. And we're going to",
    "textdich": ""
  },
  {
    "start": 51627.68,
    "end": 51632.8,
    "text": "define our first test. So what is a test? Well, it's really just a function. It's either a function",
    "textdich": ""
  },
  {
    "start": 51632.8,
    "end": 51637.12,
    "text": "or a method within a class, we're going to start off with just doing functions, because it's just",
    "textdich": ""
  },
  {
    "start": 51637.12,
    "end": 51643.36,
    "text": "a lot easier. And we're going to call this function test underscore add. Why did I give it that name?",
    "textdich": ""
  },
  {
    "start": 51644.24,
    "end": 51648.64,
    "text": "Well, it's testing the add function. So I think that makes sense. And technically, the name,",
    "textdich": ""
  },
  {
    "start": 51648.64,
    "end": 51653.84,
    "text": "the naming does matter. But we'll come back to that in a bit. Now, how does this function actually",
    "textdich": ""
  },
  {
    "start": 51653.84,
    "end": 51659.52,
    "text": "work from a testing perspective? Well, it's very simple. You know, pytest will run through all of",
    "textdich": ""
  },
  {
    "start": 51659.52,
    "end": 51664.72,
    "text": "our tests. And when it runs through this specific test, what it's going to do is if it runs through",
    "textdich": ""
  },
  {
    "start": 51664.72,
    "end": 51669.92,
    "text": "it, and there's no errors get thrown. That means the test has passed, it's succeeded, that means",
    "textdich": ""
  },
  {
    "start": 51669.92,
    "end": 51676.08,
    "text": "our code is good. If our function throws an error of any kind, it's going to consider our function",
    "textdich": ""
  },
  {
    "start": 51676.08,
    "end": 51682.08,
    "text": "or our test as failing than the test has failed. So how exactly does that work? It's a simple,",
    "textdich": ""
  },
  {
    "start": 51682.08,
    "end": 51687.52,
    "text": "it's simple, we use something called assert. And if you aren't familiar with what the assert command",
    "textdich": ""
  },
  {
    "start": 51687.52,
    "end": 51695.28,
    "text": "does in Python, anytime you assert a true value, nothing's going to happen, the code just runs.",
    "textdich": ""
  },
  {
    "start": 51695.28,
    "end": 51701.76,
    "text": "However, if you assert a false value, that means it's going to throw an error. So it's, it's no",
    "textdich": ""
  },
  {
    "start": 51701.76,
    "end": 51706.48,
    "text": "different than raising an error or throwing an error. In Python, it's just a simple way of doing",
    "textdich": ""
  },
  {
    "start": 51706.48,
    "end": 51712.0,
    "text": "that for testing purposes. If we return something that's true, then the assert won't do anything.",
    "textdich": ""
  },
  {
    "start": 51712.0,
    "end": 51716.8,
    "text": "If we return something that's false, then it will raise a Python error. And I'm going to show you",
    "textdich": ""
  },
  {
    "start": 51716.8,
    "end": 51724.32,
    "text": "exactly how that works. So if I just say assert true. And before this, I'm just going to do a print",
    "textdich": ""
  },
  {
    "start": 51724.32,
    "end": 51733.04,
    "text": "testing add function. And then down here, I'm going to just call the test underscore add",
    "textdich": ""
  },
  {
    "start": 51735.68,
    "end": 51740.8,
    "text": "function right here. And I'm going to just run this as a normal Python module. So we're not",
    "textdich": ""
  },
  {
    "start": 51740.8,
    "end": 51743.68,
    "text": "going to even treat it as an actual test or anything like that. We're not even going to",
    "textdich": ""
  },
  {
    "start": 51743.68,
    "end": 51750.96,
    "text": "use pytest. So I'm just going to call Python. And keep in mind the commands Python on on Mac,",
    "textdich": ""
  },
  {
    "start": 51750.96,
    "end": 51755.28,
    "text": "but it's pi dash three on Windows. And then we're going to go into the test directory.",
    "textdich": ""
  },
  {
    "start": 51756.8,
    "end": 51761.84,
    "text": "I want to call my my test.py. And I'm going to show you what happens. All right, we can see it",
    "textdich": ""
  },
  {
    "start": 51761.84,
    "end": 51766.32,
    "text": "says testing add function, which is from this print statement. And then you can see the assert",
    "textdich": ""
  },
  {
    "start": 51766.32,
    "end": 51771.12,
    "text": "did nothing. So it just ran and everything's fine. And that's expected because like I said,",
    "textdich": ""
  },
  {
    "start": 51771.12,
    "end": 51777.6,
    "text": "assert only does something when we return a false value. So if I say false now, and I run this code,",
    "textdich": ""
  },
  {
    "start": 51777.6,
    "end": 51783.84,
    "text": "take a look at what happens. Hey, look, Python throws an error. So assert is simple as that",
    "textdich": ""
  },
  {
    "start": 51783.84,
    "end": 51788.4,
    "text": "true means nothing's going to happen false means it's going to throw an error. And we don't have",
    "textdich": ""
  },
  {
    "start": 51788.4,
    "end": 51793.2,
    "text": "to just say true or false, we can actually pass in a condition. So if I say one equals equals one,",
    "textdich": ""
  },
  {
    "start": 51793.76,
    "end": 51799.6,
    "text": "that's going to return true, right? So technically, an assertive true won't do anything. However,",
    "textdich": ""
  },
  {
    "start": 51799.6,
    "end": 51804.72,
    "text": "if I say one equals equals two, that's going to be a false statement. And if I run that,",
    "textdich": ""
  },
  {
    "start": 51804.72,
    "end": 51809.92,
    "text": "we could see that it asserts and it throws an error. So that's how we make use of assert",
    "textdich": ""
  },
  {
    "start": 51809.92,
    "end": 51816.64,
    "text": "within our testing functions. So I'm going to remove this. And we're actually going to test out",
    "textdich": ""
  },
  {
    "start": 51816.64,
    "end": 51821.2,
    "text": "our code now. So to test out our add function, the first thing that we have to do is we actually",
    "textdich": ""
  },
  {
    "start": 51821.2,
    "end": 51826.72,
    "text": "have to import it into this file. So we're going to import it. So we'll say from and we have to go",
    "textdich": ""
  },
  {
    "start": 51826.72,
    "end": 51832.88,
    "text": "into the app directory, and the calculations model module, so we'll say app dot calculations, import",
    "textdich": ""
  },
  {
    "start": 51832.88,
    "end": 51837.68,
    "text": "add. And now what we're gonna do is we're just going to call the add function like we normally",
    "textdich": ""
  },
  {
    "start": 51837.68,
    "end": 51844.16,
    "text": "do. And we need to give it some test data. So I want you to think of two numbers that you want",
    "textdich": ""
  },
  {
    "start": 51844.16,
    "end": 51849.44,
    "text": "to use for testing, add them up and what is the result should it be. So I'm going to say I'm going",
    "textdich": ""
  },
  {
    "start": 51849.44,
    "end": 51856.72,
    "text": "to do five and three. And I know that this function if it works properly should return a value of eight",
    "textdich": ""
  },
  {
    "start": 51856.72,
    "end": 51863.44,
    "text": "because five plus three equals eight. And so I can just take the sum, store that in a variable called",
    "textdich": ""
  },
  {
    "start": 51863.44,
    "end": 51869.52,
    "text": "sum. And what we can do is since I know some should ultimately be equal equal to eight,",
    "textdich": ""
  },
  {
    "start": 51869.52,
    "end": 51877.2,
    "text": "I can assert that and that should there should be no either. So I can say sum equals equals eight.",
    "textdich": ""
  },
  {
    "start": 51877.2,
    "end": 51882.16,
    "text": "So that means if if our code runs fine, some should ultimately equal eight. And if we assert",
    "textdich": ""
  },
  {
    "start": 51882.16,
    "end": 51887.68,
    "text": "eight equals eight, that means it's going to return true, and nothing should happen. Or pi",
    "textdich": ""
  },
  {
    "start": 51887.68,
    "end": 51894.0,
    "text": "test should consider it as passing. However, if I mess up my code, and for some reason to add",
    "textdich": ""
  },
  {
    "start": 51894.0,
    "end": 51899.68,
    "text": "function returns a value of 20, then when we do assert 20 equals eight, well, that's going to be",
    "textdich": ""
  },
  {
    "start": 51899.68,
    "end": 51903.6,
    "text": "false. And it's going to throw an error. And it's going to consider that as a failing test, because",
    "textdich": ""
  },
  {
    "start": 51903.6,
    "end": 51910.0,
    "text": "an error means a failed test. So that is the main idea behind a simple automated test within pi test,",
    "textdich": ""
  },
  {
    "start": 51910.0,
    "end": 51916.08,
    "text": "right? You just provide you run the code with some test data. And you know what the result should be,",
    "textdich": ""
  },
  {
    "start": 51916.08,
    "end": 51919.52,
    "text": "because you created this test data. And you just make sure that the result of the code",
    "textdich": ""
  },
  {
    "start": 51919.52,
    "end": 51926.32,
    "text": "matches with your expected result. So let's actually run our test now. So I'm going to do",
    "textdich": ""
  },
  {
    "start": 51927.2,
    "end": 51931.68,
    "text": "pi test. And let's see what happens. Right. And you see the same exact thing we saw before. Once",
    "textdich": ""
  },
  {
    "start": 51931.68,
    "end": 51938.16,
    "text": "again, it says it collected zero items, no tests ran. And so why exactly is this happening? Well,",
    "textdich": ""
  },
  {
    "start": 51938.16,
    "end": 51943.44,
    "text": "if we go to our documentation, and you scroll down to this feature section, you go to the auto",
    "textdich": ""
  },
  {
    "start": 51943.44,
    "end": 51950.24,
    "text": "discovery section. And so this auto discovery section is going to explain how pi tests finds all",
    "textdich": ""
  },
  {
    "start": 51950.24,
    "end": 51955.12,
    "text": "of the tests in your code. Because it does have a auto discovery functionality where it can actually",
    "textdich": ""
  },
  {
    "start": 51955.12,
    "end": 51959.36,
    "text": "go through all of your code, all of the directories and packages and recursively look through them",
    "textdich": ""
  },
  {
    "start": 51959.36,
    "end": 51965.2,
    "text": "and find the tests. But it looks for specific keywords. And you can see in these directories,",
    "textdich": ""
  },
  {
    "start": 51965.2,
    "end": 51971.36,
    "text": "it looks for any files that start with test. So you have to do test underscore and then some name,",
    "textdich": ""
  },
  {
    "start": 51971.36,
    "end": 51977.84,
    "text": "or some name underscore test p y. And if we go to our code, right, we named this my test,",
    "textdich": ""
  },
  {
    "start": 51977.84,
    "end": 51982.32,
    "text": "this does not match what it's going to look for. And that's why it doesn't actually find any test",
    "textdich": ""
  },
  {
    "start": 51982.32,
    "end": 51987.36,
    "text": "from that. So let's change this, I'm going to call this, I'm gonna rename this and I'm going to call",
    "textdich": ""
  },
  {
    "start": 51987.36,
    "end": 52003.36,
    "text": "this how about test underscore calculations. Alright, and so now, if I run this, you can see",
    "textdich": ""
  },
  {
    "start": 52003.36,
    "end": 52009.52,
    "text": "that it throws an error. But I realized that, you know, within my tests package, I do need to have",
    "textdich": ""
  },
  {
    "start": 52009.52,
    "end": 52015.2,
    "text": "the usual underscore in it underscore underscore dot p y to actually make it a package. So I'm",
    "textdich": ""
  },
  {
    "start": 52015.2,
    "end": 52020.48,
    "text": "going to do the same thing, I'll do underscore underscore in it, underscore underscore dot p y,",
    "textdich": ""
  },
  {
    "start": 52020.48,
    "end": 52026.4,
    "text": "because of that, it wasn't able to actually import the file properly. So let's let's save that. And",
    "textdich": ""
  },
  {
    "start": 52026.4,
    "end": 52031.68,
    "text": "let's try this again. So now if I run this, you could see that, hey, look, we collected one item.",
    "textdich": ""
  },
  {
    "start": 52031.68,
    "end": 52036.8,
    "text": "So I think it's safe to say that this collected one item probably means we have one test. So the",
    "textdich": ""
  },
  {
    "start": 52036.8,
    "end": 52042.48,
    "text": "number of tests equals items. And then we could see that inside the test package, we have a module",
    "textdich": ""
  },
  {
    "start": 52042.48,
    "end": 52048.88,
    "text": "called test underscore calculations dot p y. And then there's a little dot. So the dot reference",
    "textdich": ""
  },
  {
    "start": 52048.88,
    "end": 52055.36,
    "text": "represents one individual test. And a green dot means good. A red dot means it failed, right,",
    "textdich": ""
  },
  {
    "start": 52055.36,
    "end": 52060.16,
    "text": "green is passed, red is fail. And so if you have two tests, then you would see two dots. And then",
    "textdich": ""
  },
  {
    "start": 52060.16,
    "end": 52064.48,
    "text": "if the second test pass, it would be green, if it failed, it would be red, simple as that. And so",
    "textdich": ""
  },
  {
    "start": 52064.48,
    "end": 52069.92,
    "text": "now we have successfully ran our first test. And just to make our code a little bit simpler,",
    "textdich": ""
  },
  {
    "start": 52069.92,
    "end": 52077.12,
    "text": "right, I could just instead of having the sum variable, I can just cut this out, just paste it",
    "textdich": ""
  },
  {
    "start": 52077.12,
    "end": 52082.72,
    "text": "into here just to make it a little bit cleaner. And then we can remove all of this. And just to",
    "textdich": ""
  },
  {
    "start": 52082.72,
    "end": 52086.24,
    "text": "make sure I didn't break anything, let's run our test again. And we can see that once again,",
    "textdich": ""
  },
  {
    "start": 52086.24,
    "end": 52092.72,
    "text": "it worked just fine. Now, when it comes to the auto discovery of files, a few things to note,",
    "textdich": ""
  },
  {
    "start": 52092.72,
    "end": 52096.8,
    "text": "you don't necessarily have to follow this convention of test underscore calculations,",
    "textdich": ""
  },
  {
    "start": 52096.8,
    "end": 52102.24,
    "text": "if I actually rename this, and I call this, you know, my underscore, what did I call this my test",
    "textdich": ""
  },
  {
    "start": 52102.24,
    "end": 52109.68,
    "text": "dot p y. Right now, if I obviously run this, it's not going to find any tests, but I can pass in the",
    "textdich": ""
  },
  {
    "start": 52109.68,
    "end": 52116.0,
    "text": "specific path, or the specific module that I want to test. So if I do my test, dot p y, then it is",
    "textdich": ""
  },
  {
    "start": 52116.0,
    "end": 52121.44,
    "text": "able to find the test. But I like to have pytest be able to automatically find all my tests so that",
    "textdich": ""
  },
  {
    "start": 52121.44,
    "end": 52129.36,
    "text": "I don't have to specify this. So we'll rename this and go back to test underscore calculations,",
    "textdich": ""
  },
  {
    "start": 52130.16,
    "end": 52133.52,
    "text": "because it ultimately is a module that's going to be testing my calculations module.",
    "textdich": ""
  },
  {
    "start": 52135.36,
    "end": 52141.2,
    "text": "And another thing to note the name of the test within the module also matters. If I call this,",
    "textdich": ""
  },
  {
    "start": 52141.2,
    "end": 52145.92,
    "text": "you know, maybe something like testing underscore add, take a look at what happens.",
    "textdich": ""
  },
  {
    "start": 52145.92,
    "end": 52156.32,
    "text": "Whoops, I wanted to auto find it now. And I forgot to save it. Now, if I run this, looks like it still",
    "textdich": ""
  },
  {
    "start": 52156.32,
    "end": 52166.48,
    "text": "works. But let me change this to just something random. Right. And so now we can see that no tests",
    "textdich": ""
  },
  {
    "start": 52166.48,
    "end": 52172.96,
    "text": "ran. So the naming of the function absolutely matters when it comes to auto discovering tests.",
    "textdich": ""
  },
  {
    "start": 52172.96,
    "end": 52178.0,
    "text": "And you want to stick to the standard of test underscore something. And I think somewhere in",
    "textdich": ""
  },
  {
    "start": 52178.0,
    "end": 52183.6,
    "text": "this documentation, it's going to go over here we go test from those files, collect test items. So",
    "textdich": ""
  },
  {
    "start": 52183.6,
    "end": 52189.92,
    "text": "a test prefix test function or method outside of a class, or a test prefix test function or method",
    "textdich": ""
  },
  {
    "start": 52189.92,
    "end": 52194.64,
    "text": "inside a test prefix test clause. So it's got to start with test essentially, it doesn't necessarily",
    "textdich": ""
  },
  {
    "start": 52194.64,
    "end": 52199.36,
    "text": "have to be test underscore. That's why testing underscore add work to just fine. It does have",
    "textdich": ""
  },
  {
    "start": 52199.36,
    "end": 52203.76,
    "text": "to start with the word test. That's why if I said add underscore test, I don't think this will work",
    "textdich": ""
  },
  {
    "start": 52203.76,
    "end": 52209.6,
    "text": "actually shouldn't based off of their description, and it doesn't. So keep in mind that the naming",
    "textdich": ""
  },
  {
    "start": 52209.6,
    "end": 52213.44,
    "text": "does matter. And I recommend you stick to the convention of naming all of your testing modules",
    "textdich": ""
  },
  {
    "start": 52213.44,
    "end": 52217.84,
    "text": "test underscore, and the name of the module that you want to test, and then your functions test",
    "textdich": ""
  },
  {
    "start": 52217.84,
    "end": 52220.88,
    "text": "underscore and then the name of the function that you want to test or the functionality that you",
    "textdich": ""
  },
  {
    "start": 52220.88,
    "end": 52226.64,
    "text": "want to test. Now a couple of things to note, I'm going to run this test again. And you'll see that",
    "textdich": ""
  },
  {
    "start": 52226.64,
    "end": 52232.56,
    "text": "it doesn't really give us much detail as to what's happening. But we can pass in other flags to get",
    "textdich": ""
  },
  {
    "start": 52232.56,
    "end": 52237.04,
    "text": "a little bit more detail or to change the functionality. So if I do pytest dash dash help,",
    "textdich": ""
  },
  {
    "start": 52237.04,
    "end": 52241.92,
    "text": "you'll see that there's a lot of options. But I think something that would probably be helpful",
    "textdich": ""
  },
  {
    "start": 52241.92,
    "end": 52246.4,
    "text": "is like a dash v for verbose. And I think we should have that in here. So let's see if I can",
    "textdich": ""
  },
  {
    "start": 52246.4,
    "end": 52253.84,
    "text": "find that here we go dash v is increased verbosity. So we'll just do pytest dash v. And let's see what",
    "textdich": ""
  },
  {
    "start": 52253.84,
    "end": 52259.6,
    "text": "happens. And so now instead of just having a dot, it's actually going to list out the specific test",
    "textdich": ""
  },
  {
    "start": 52259.6,
    "end": 52263.28,
    "text": "that's running. So I think that's a little bit more helpful. And I usually like to run these tests",
    "textdich": ""
  },
  {
    "start": 52263.28,
    "end": 52267.68,
    "text": "with a little bit of extra verbosity, just that I know what's happening. However, maybe in an",
    "textdich": ""
  },
  {
    "start": 52267.68,
    "end": 52272.4,
    "text": "automated environment, you don't really care about that. And the other thing to note is that we have",
    "textdich": ""
  },
  {
    "start": 52272.4,
    "end": 52279.12,
    "text": "this print statement here. But nowhere in the output, do we actually see anything get printed",
    "textdich": ""
  },
  {
    "start": 52279.12,
    "end": 52283.76,
    "text": "out? I don't see testing add function anywhere in here. And the reason for that is that by default,",
    "textdich": ""
  },
  {
    "start": 52283.76,
    "end": 52288.4,
    "text": "pytest will not actually print out any of your print statements, we have to pass in an extra",
    "textdich": ""
  },
  {
    "start": 52288.4,
    "end": 52294.0,
    "text": "flag to do that. So to see the print statements, you have to pass in dash s. So now if I run this,",
    "textdich": ""
  },
  {
    "start": 52294.0,
    "end": 52299.6,
    "text": "we can see that we ran this specific test, and it ran testing add function. And so keep in mind,",
    "textdich": ""
  },
  {
    "start": 52299.6,
    "end": 52304.96,
    "text": "anytime you want to print something, you got to pass in the dash s flag. Okay, guys, so testing",
    "textdich": ""
  },
  {
    "start": 52304.96,
    "end": 52310.4,
    "text": "really is as simple as that. But before we go on to more complicated tests, I want to just make",
    "textdich": ""
  },
  {
    "start": 52310.4,
    "end": 52315.68,
    "text": "sure that we fully understand how this works. So we're going to create a few more dummy functions",
    "textdich": ""
  },
  {
    "start": 52315.68,
    "end": 52320.08,
    "text": "that we can use for testings. And if I go back to my calculations at p y, I've already written this",
    "textdich": ""
  },
  {
    "start": 52320.08,
    "end": 52323.68,
    "text": "out. So I'm just going to paste it in here not to waste your time. But you'll see that they all",
    "textdich": ""
  },
  {
    "start": 52323.68,
    "end": 52327.52,
    "text": "essentially do the same exact thing, they just perform some sort of mathematical operation. So",
    "textdich": ""
  },
  {
    "start": 52327.52,
    "end": 52331.36,
    "text": "I've got the subtract function, which just subtracts two numbers, I've got the multiply,",
    "textdich": ""
  },
  {
    "start": 52331.36,
    "end": 52336.16,
    "text": "which adds two numbers. And I've got the divide, which just divides two numbers. So let's test",
    "textdich": ""
  },
  {
    "start": 52336.16,
    "end": 52340.16,
    "text": "this out. Now, the first thing that we got to do is, well, let's import all of those. So they're",
    "textdich": ""
  },
  {
    "start": 52340.16,
    "end": 52352.32,
    "text": "subtract, multiply and divide. And let's define our function for subtracting. All right. And so",
    "textdich": ""
  },
  {
    "start": 52352.32,
    "end": 52357.12,
    "text": "just like before, I'm just I'm going to do a one liner. So I'm just gonna say assert and we'll say",
    "textdich": ""
  },
  {
    "start": 52357.12,
    "end": 52362.72,
    "text": "subtract two numbers. What numbers do I want to subtract? How about nine and four? Oops,",
    "textdich": ""
  },
  {
    "start": 52362.72,
    "end": 52368.08,
    "text": "nine comma four. And we know that nine minus four should equal five. So I can do assert equals equals",
    "textdich": ""
  },
  {
    "start": 52368.96,
    "end": 52380.24,
    "text": "five. All right. And if I run this again, all right, we can see that both tests pass.",
    "textdich": ""
  },
  {
    "start": 52381.36,
    "end": 52386.32,
    "text": "And just to make sure that you know, our testing actually works, let's actually go into our code.",
    "textdich": ""
  },
  {
    "start": 52386.32,
    "end": 52390.48,
    "text": "And let's essentially create a bug. So if I want to add two numbers, right, we know that's gonna",
    "textdich": ""
  },
  {
    "start": 52390.48,
    "end": 52395.68,
    "text": "be num one plus num two. But let's say, you know, one of our moron colleagues went in and",
    "textdich": ""
  },
  {
    "start": 52395.68,
    "end": 52401.44,
    "text": "added one, which is ultimately going to cause our function to break. And so ideally, if everything",
    "textdich": ""
  },
  {
    "start": 52401.44,
    "end": 52405.68,
    "text": "works fine in our testing, it should be able to catch this. Because if we add five plus three,",
    "textdich": ""
  },
  {
    "start": 52405.68,
    "end": 52409.12,
    "text": "it's going to do five plus three, and then it's going to add that extra one, it's going to return",
    "textdich": ""
  },
  {
    "start": 52409.12,
    "end": 52414.0,
    "text": "nine, nine equals equals eight is going to assert to a false, which is going to throw an error. So",
    "textdich": ""
  },
  {
    "start": 52414.0,
    "end": 52425.76,
    "text": "if we try this out now, we can see that it did in fact fail. And because we set this to be a verbose,",
    "textdich": ""
  },
  {
    "start": 52425.76,
    "end": 52430.4,
    "text": "we can see exactly what happened. So we ran the test add. And what happened was it is asserted",
    "textdich": ""
  },
  {
    "start": 52430.4,
    "end": 52435.68,
    "text": "add five comma three equals equals eight. So it's asserting nine equals eight. And that's",
    "textdich": ""
  },
  {
    "start": 52435.68,
    "end": 52441.52,
    "text": "going to throw an error. And so that way we see one failed one pass of the subtract function still",
    "textdich": ""
  },
  {
    "start": 52441.52,
    "end": 52446.56,
    "text": "passed, because we didn't touch the code for that. So I'm going to go back and fix our bug in this",
    "textdich": ""
  },
  {
    "start": 52446.56,
    "end": 52453.68,
    "text": "case. And we're going to just set up a couple more test functions for multiplying divide.",
    "textdich": ""
  },
  {
    "start": 52454.88,
    "end": 52460.64,
    "text": "And I can just really just copy these actually. I'll just change this to multiply,",
    "textdich": ""
  },
  {
    "start": 52460.64,
    "end": 52469.92,
    "text": "divide. And we'll just select a couple of numbers. So let's say",
    "textdich": ""
  },
  {
    "start": 52476.32,
    "end": 52481.36,
    "text": "and I realized, looks like that's a typo, this should be multiply with an L.",
    "textdich": ""
  },
  {
    "start": 52481.36,
    "end": 52491.84,
    "text": "All right, and we'll say four and three. So when we multiply four times three,",
    "textdich": ""
  },
  {
    "start": 52491.84,
    "end": 52500.0,
    "text": "that should equal 12. And for divide, we'll change the function that we're calling to be divide.",
    "textdich": ""
  },
  {
    "start": 52500.56,
    "end": 52508.4,
    "text": "And we'll do 25. So 20 divided by five should equal four. And so now if I save everything,",
    "textdich": ""
  },
  {
    "start": 52508.4,
    "end": 52514.56,
    "text": "we should ideally see all four of our tests pass. Let's try this out again. And you don't have to",
    "textdich": ""
  },
  {
    "start": 52514.56,
    "end": 52517.36,
    "text": "use the dash v or the dash s like if you're not printing anything, or you don't want to see it,",
    "textdich": ""
  },
  {
    "start": 52517.36,
    "end": 52520.96,
    "text": "you don't need the dash s. And maybe you don't want the verbosity. So you could technically",
    "textdich": ""
  },
  {
    "start": 52520.96,
    "end": 52525.44,
    "text": "remove those as well. And we can see that we get four dots, which means all four of our test",
    "textdich": ""
  },
  {
    "start": 52525.44,
    "end": 52531.76,
    "text": "functions have succeeded. If you're like me, the first thing that you may have noticed is that,",
    "textdich": ""
  },
  {
    "start": 52531.76,
    "end": 52537.68,
    "text": "you know, testing with one set of numbers doesn't seem ultra reliable, right, that doesn't necessarily",
    "textdich": ""
  },
  {
    "start": 52537.68,
    "end": 52542.08,
    "text": "assure us that the function that we wrote actually does what it's supposed to do, I would ideally",
    "textdich": ""
  },
  {
    "start": 52542.08,
    "end": 52547.12,
    "text": "like to test with a couple of different sets of numbers. And the way to do that is well, you know,",
    "textdich": ""
  },
  {
    "start": 52547.12,
    "end": 52551.36,
    "text": "I'm sure if you just took a guess, right, you're probably thinking, well, maybe we just copy this",
    "textdich": ""
  },
  {
    "start": 52551.36,
    "end": 52559.36,
    "text": "function, paste it, whoop, that should be back here. And then maybe just call this test add to",
    "textdich": ""
  },
  {
    "start": 52560.32,
    "end": 52564.08,
    "text": "maybe we don't need this print statement anymore. And then you provide the other sets of numbers.",
    "textdich": ""
  },
  {
    "start": 52564.08,
    "end": 52571.36,
    "text": "So maybe like four, and two should equal six. And then you try this out. And you run this.",
    "textdich": ""
  },
  {
    "start": 52572.56,
    "end": 52578.24,
    "text": "And we can see that that worked. And technically, you can do that. But pytest provides us a simpler",
    "textdich": ""
  },
  {
    "start": 52578.24,
    "end": 52582.16,
    "text": "way of doing this. So I'm going to delete this, because we don't need that. I'm going to show you",
    "textdich": ""
  },
  {
    "start": 52582.16,
    "end": 52589.36,
    "text": "how we can do this using something called parameterize. So I'm going to import pytest. So I'll say from",
    "textdich": ""
  },
  {
    "start": 52589.36,
    "end": 52600.4,
    "text": "I shall just say import pytest. And we're going to add a special decorator from the pytest library.",
    "textdich": ""
  },
  {
    "start": 52600.4,
    "end": 52609.44,
    "text": "So we say at pytest dot mark dot parameterize. And so here, we can essentially provide a list",
    "textdich": ""
  },
  {
    "start": 52609.44,
    "end": 52613.52,
    "text": "of numbers that we want to use for testing, and then provide what is the expected result.",
    "textdich": ""
  },
  {
    "start": 52613.52,
    "end": 52619.6,
    "text": "And so you know, our function takes two inputs, five and three. And we also need to provide what",
    "textdich": ""
  },
  {
    "start": 52619.6,
    "end": 52623.28,
    "text": "is the result. So these are all the values that we're providing, we have three values for this",
    "textdich": ""
  },
  {
    "start": 52623.28,
    "end": 52629.52,
    "text": "specific function. So we're going to tell this specific decorator, what are the three things that",
    "textdich": ""
  },
  {
    "start": 52629.52,
    "end": 52639.52,
    "text": "we want to provide for each test case. So in quotations, we'll do num one, num two, and then",
    "textdich": ""
  },
  {
    "start": 52639.52,
    "end": 52646.08,
    "text": "the expected value. Now what you call these doesn't matter, it's up to you, right? But these are going",
    "textdich": ""
  },
  {
    "start": 52646.08,
    "end": 52649.84,
    "text": "to be treated like variables, essentially. So you can call them what you whatever you want, you can",
    "textdich": ""
  },
  {
    "start": 52649.84,
    "end": 52656.64,
    "text": "call this x, you can call this y, you could call this result. It doesn't really matter. But I'm",
    "textdich": ""
  },
  {
    "start": 52656.64,
    "end": 52665.12,
    "text": "going to stick with num one, num two and expected. And more importantly, take a look at how this is",
    "textdich": ""
  },
  {
    "start": 52665.12,
    "end": 52672.32,
    "text": "set up, right? Your instinct is probably to do the end quote here and then quote here, quote here,",
    "textdich": ""
  },
  {
    "start": 52672.32,
    "end": 52676.24,
    "text": "and then quote here like that. That's not what we want. That is not how it actually works,",
    "textdich": ""
  },
  {
    "start": 52676.24,
    "end": 52679.6,
    "text": "which I don't know why they decided to do like this, but that's just what they've chosen.",
    "textdich": ""
  },
  {
    "start": 52679.6,
    "end": 52687.12,
    "text": "So instead, you remove these. And everything should just be one big string. So that's the",
    "textdich": ""
  },
  {
    "start": 52687.12,
    "end": 52692.48,
    "text": "first argument into this decorator. The second thing is going to be a list. And it's going to",
    "textdich": ""
  },
  {
    "start": 52692.48,
    "end": 52698.72,
    "text": "be a list of tuples and each tuple should represent one specific test case. So the first tuple,",
    "textdich": ""
  },
  {
    "start": 52699.52,
    "end": 52704.4,
    "text": "we're going to provide our test case values. So we want what is the value of num one. So in the",
    "textdich": ""
  },
  {
    "start": 52704.4,
    "end": 52709.44,
    "text": "first test, let's say we want three for num one, what's the second one, that's going to be num",
    "textdich": ""
  },
  {
    "start": 52709.44,
    "end": 52716.0,
    "text": "two, so it's going to line up with what we've put here. So say 32. And then what is going to be the",
    "textdich": ""
  },
  {
    "start": 52716.0,
    "end": 52722.24,
    "text": "expected value? Well, three plus two should equal five. So we just say five. And so that's our first",
    "textdich": ""
  },
  {
    "start": 52722.24,
    "end": 52727.04,
    "text": "test. If we want to add a second test, just do comma add another tuple. And let's just add another",
    "textdich": ""
  },
  {
    "start": 52727.04,
    "end": 52733.68,
    "text": "set of numbers. So let's say num one is seven. num two is one, we know that should equal eight.",
    "textdich": ""
  },
  {
    "start": 52733.68,
    "end": 52748.32,
    "text": "And just one more test. And here, I'll say 12. And four should give us 16. All right. And so now",
    "textdich": ""
  },
  {
    "start": 52748.32,
    "end": 52753.12,
    "text": "what we can do is we can pass these variable names into our test underscore add function.",
    "textdich": ""
  },
  {
    "start": 52754.24,
    "end": 52759.92,
    "text": "So I'll say num one, num two, and expected. Alright, so you want to make sure these match up",
    "textdich": ""
  },
  {
    "start": 52759.92,
    "end": 52763.6,
    "text": "with what you've placed here. Because if this was called x, then you want to make sure that this",
    "textdich": ""
  },
  {
    "start": 52763.6,
    "end": 52773.52,
    "text": "is called x. But we'll change that back. And now in our code, we want to replace all of our test",
    "textdich": ""
  },
  {
    "start": 52773.52,
    "end": 52780.0,
    "text": "values with these variables. So this is going to be num one, this is going to be num two. And this",
    "textdich": ""
  },
  {
    "start": 52780.0,
    "end": 52788.72,
    "text": "is going to be expected. And so now if I run this, and we'll just do a dash B just to see in more in",
    "textdich": ""
  },
  {
    "start": 52788.72,
    "end": 52793.68,
    "text": "detail what's happening, take a look at what's happening. Now, we can see that test add ran, and",
    "textdich": ""
  },
  {
    "start": 52793.68,
    "end": 52799.68,
    "text": "it ran with 325, which is the first test case, it passed, then it ran the same exact test with",
    "textdich": ""
  },
  {
    "start": 52799.68,
    "end": 52807.36,
    "text": "these values 718 that passed, and then it ran with these values. And that ran. And it passed just",
    "textdich": ""
  },
  {
    "start": 52807.36,
    "end": 52812.48,
    "text": "fine. And then finally, all of the other functions also passed as well. So this is one way of running",
    "textdich": ""
  },
  {
    "start": 52812.48,
    "end": 52817.76,
    "text": "the same test over with multiple values without having to just define 345 functions and just",
    "textdich": ""
  },
  {
    "start": 52817.76,
    "end": 52823.12,
    "text": "copying and pasting. It's a little bit cleaner doing it like this. So till now, we've just tested",
    "textdich": ""
  },
  {
    "start": 52823.12,
    "end": 52826.48,
    "text": "some simple functions. And you'll see that when it comes to testing, anytime you want to test a",
    "textdich": ""
  },
  {
    "start": 52826.48,
    "end": 52831.12,
    "text": "function, it's actually pretty easy. However, when you're working with classes, it gets a little bit",
    "textdich": ""
  },
  {
    "start": 52831.12,
    "end": 52835.84,
    "text": "trickier. And it usually involves having to write a little bit more code. So I've created a simple",
    "textdich": ""
  },
  {
    "start": 52835.84,
    "end": 52841.04,
    "text": "dummy class in this case called bank account. And this represents a person's bank account. And I've",
    "textdich": ""
  },
  {
    "start": 52841.04,
    "end": 52844.0,
    "text": "already written this out because I didn't want to waste your time writing this out. So if you want",
    "textdich": ""
  },
  {
    "start": 52844.0,
    "end": 52848.08,
    "text": "to pause this video and just copy down the code so you can follow along, go ahead and do that.",
    "textdich": ""
  },
  {
    "start": 52848.08,
    "end": 52851.28,
    "text": "But let me just quickly walk you through what this specific class is doing.",
    "textdich": ""
  },
  {
    "start": 52852.64,
    "end": 52857.2,
    "text": "But like I said, this represents a bank account. So first of all, we've got the constructor. So",
    "textdich": ""
  },
  {
    "start": 52857.2,
    "end": 52862.48,
    "text": "when we create a bank account, we can create a bank account with a specific amount of money,",
    "textdich": ""
  },
  {
    "start": 52862.48,
    "end": 52865.76,
    "text": "which is going to be referenced by the starting balance value. And then it's just going to set",
    "textdich": ""
  },
  {
    "start": 52865.76,
    "end": 52870.72,
    "text": "the balance property of the bank account class to be whatever you provide. If you don't provide",
    "textdich": ""
  },
  {
    "start": 52870.72,
    "end": 52875.84,
    "text": "a starting value, it's going to default to a value of zero. Then we've got three different methods,",
    "textdich": ""
  },
  {
    "start": 52875.84,
    "end": 52880.08,
    "text": "we've got deposit, which means we're going to deposit money into our bank account. So all we're",
    "textdich": ""
  },
  {
    "start": 52880.08,
    "end": 52884.32,
    "text": "doing is we're going to pass in a value. And then we're just going to add it to our total balance,",
    "textdich": ""
  },
  {
    "start": 52884.32,
    "end": 52888.24,
    "text": "withdraw is the opposite, we're going to subtract a certain amount from our balance.",
    "textdich": ""
  },
  {
    "start": 52889.04,
    "end": 52894.16,
    "text": "And then collect interest is simple, we're just collecting interest. So here, we just take our",
    "textdich": ""
  },
  {
    "start": 52894.16,
    "end": 52900.16,
    "text": "balance and then multiply it by 1.1, which I guess would represent a 1% interest rate. And so those",
    "textdich": ""
  },
  {
    "start": 52900.16,
    "end": 52905.68,
    "text": "are the three or four functions a methods and if you want to count the constructor method as well,",
    "textdich": ""
  },
  {
    "start": 52905.68,
    "end": 52911.12,
    "text": "that our bank account class has. So I want to go ahead and test this out now. So we'll go to our",
    "textdich": ""
  },
  {
    "start": 52911.12,
    "end": 52918.08,
    "text": "test calculations. And first of all, we want to import our bank account class. So let's create",
    "textdich": ""
  },
  {
    "start": 52918.08,
    "end": 52926.56,
    "text": "a test for our bank account. And the first thing I want to test is, let's create a brand new bank",
    "textdich": ""
  },
  {
    "start": 52926.56,
    "end": 52935.6,
    "text": "account, where we set the default value, the initial amount to be 50. So here, I'll say test.",
    "textdich": ""
  },
  {
    "start": 52937.04,
    "end": 52945.28,
    "text": "And I'm just gonna call this maybe test bank, set initial amount, I want this to be as descriptive",
    "textdich": ""
  },
  {
    "start": 52945.28,
    "end": 52950.16,
    "text": "as possible. And so here, what we're going to do is first of all, we're going to create a brand new",
    "textdich": ""
  },
  {
    "start": 52950.16,
    "end": 52957.6,
    "text": "bank account instance. And since this test is going to test to ensure that we have actually created a",
    "textdich": ""
  },
  {
    "start": 52957.6,
    "end": 52962.48,
    "text": "brand new bank account with a certain amount of money, I'm going to provide a value doesn't matter",
    "textdich": ""
  },
  {
    "start": 52962.48,
    "end": 52967.68,
    "text": "what value you decide to use, but I'm going to use 50. And we'll just store this in a variable called",
    "textdich": ""
  },
  {
    "start": 52969.04,
    "end": 52978.4,
    "text": "bank account. All right, and so to test if our function actually worked, or the functionality",
    "textdich": ""
  },
  {
    "start": 52978.4,
    "end": 52984.48,
    "text": "of our constructor method actually worked, what we're going to do is we just say assert. And we",
    "textdich": ""
  },
  {
    "start": 52984.48,
    "end": 52992.4,
    "text": "want to check the bank account dot balance property equals equals 50. Because we set the",
    "textdich": ""
  },
  {
    "start": 52992.4,
    "end": 52996.24,
    "text": "default value to be 50. And if we just quickly go back to our code, you can see that we set the",
    "textdich": ""
  },
  {
    "start": 52996.24,
    "end": 53001.84,
    "text": "starting balance, or we set our balance property to be whatever the starting balance is. It just",
    "textdich": ""
  },
  {
    "start": 53001.84,
    "end": 53005.76,
    "text": "happens to be a default of zero if we don't provide one, but we are providing one. And that's what we're",
    "textdich": ""
  },
  {
    "start": 53005.76,
    "end": 53013.68,
    "text": "testing. So we can test this, let's run our code now. And let's see if this worked. We can see that",
    "textdich": ""
  },
  {
    "start": 53013.68,
    "end": 53021.68,
    "text": "it did in fact work. And just to introduce a bug, maybe we set starting balance to be",
    "textdich": ""
  },
  {
    "start": 53023.92,
    "end": 53028.8,
    "text": "you know, minus one, right? So we've broken our code. Now, if we run this one more time,",
    "textdich": ""
  },
  {
    "start": 53030.08,
    "end": 53034.0,
    "text": "you can see it failed because we subtracted one. So we're asserting 49 equals equals 50,",
    "textdich": ""
  },
  {
    "start": 53034.0,
    "end": 53039.68,
    "text": "which throws an error, which means we ultimately fail the test. Let me remove that bug.",
    "textdich": ""
  },
  {
    "start": 53040.96,
    "end": 53044.08,
    "text": "Alright, the next thing that we want to do is let's test to make sure that the default",
    "textdich": ""
  },
  {
    "start": 53045.52,
    "end": 53048.8,
    "text": "starting balance works as well. So I'm going to create another function.",
    "textdich": ""
  },
  {
    "start": 53049.44,
    "end": 53056.16,
    "text": "And I'll call this about test bank, unscored default amount.",
    "textdich": ""
  },
  {
    "start": 53058.72,
    "end": 53060.96,
    "text": "So in this case, we're just going to create a brand new bank account.",
    "textdich": ""
  },
  {
    "start": 53060.96,
    "end": 53065.76,
    "text": "And we're not going to pass in a value. So it should default to zero if our code works.",
    "textdich": ""
  },
  {
    "start": 53066.72,
    "end": 53070.0,
    "text": "And then we'll store this in a variable just like we did before. And then we'll assert",
    "textdich": ""
  },
  {
    "start": 53072.48,
    "end": 53081.6,
    "text": "I can copy this. But now it should equal zero. Okay, and let's test this out now.",
    "textdich": ""
  },
  {
    "start": 53084.08,
    "end": 53088.96,
    "text": "And it looks like it works. So great. And let's just quickly go ahead and test our last two",
    "textdich": ""
  },
  {
    "start": 53088.96,
    "end": 53094.96,
    "text": "functions out. Sorry, we got three more actually. So let's test the withdrawing functionality. So",
    "textdich": ""
  },
  {
    "start": 53094.96,
    "end": 53107.44,
    "text": "we'll do test underscore withdraw. And here, we're going to initialize another bank account",
    "textdich": ""
  },
  {
    "start": 53107.44,
    "end": 53111.44,
    "text": "instance, because we have to do that every time we want to test it. I'm going to give it a default",
    "textdich": ""
  },
  {
    "start": 53111.44,
    "end": 53115.12,
    "text": "value of 50. It doesn't have to be 50. Once again, you can choose whatever number you want.",
    "textdich": ""
  },
  {
    "start": 53115.12,
    "end": 53119.6,
    "text": "And we'll store that in a variable called bank account.",
    "textdich": ""
  },
  {
    "start": 53124.88,
    "end": 53130.48,
    "text": "And we'll call the bank account withdraw method. And we're going to withdraw, you know, let's say",
    "textdich": ""
  },
  {
    "start": 53130.48,
    "end": 53136.72,
    "text": "$20. So we start out with 50, we withdraw 20, we know that the result should be 30. So if I just",
    "textdich": ""
  },
  {
    "start": 53136.72,
    "end": 53145.92,
    "text": "copy this assert statement, once again, I can just change this to 30. And it should be no problem.",
    "textdich": ""
  },
  {
    "start": 53148.08,
    "end": 53152.72,
    "text": "Run this, once again, all of our tests have passed. Let's try the deposit",
    "textdich": ""
  },
  {
    "start": 53153.28,
    "end": 53155.44,
    "text": "functionality now. So I'll create a test to test that.",
    "textdich": ""
  },
  {
    "start": 53158.8,
    "end": 53162.32,
    "text": "And I'm actually just going to copy all of this code, because it's pretty much identical.",
    "textdich": ""
  },
  {
    "start": 53162.32,
    "end": 53167.12,
    "text": "You'll see that testing can become a little repetitive, repetitive. We'll start out with",
    "textdich": ""
  },
  {
    "start": 53167.12,
    "end": 53173.04,
    "text": "an initial value of 50 doesn't really matter. We'll change the method to be deposit. Maybe we want",
    "textdich": ""
  },
  {
    "start": 53173.04,
    "end": 53185.6,
    "text": "to deposit $30. So 50 plus 30 should equal 80. We test this out. Looks like everything's working.",
    "textdich": ""
  },
  {
    "start": 53186.8,
    "end": 53189.68,
    "text": "And the last thing that we want to test is the collect interest method.",
    "textdich": ""
  },
  {
    "start": 53189.68,
    "end": 53198.24,
    "text": "So let's create a function for that. We'll do test underscore collect underscore interest.",
    "textdich": ""
  },
  {
    "start": 53205.36,
    "end": 53206.96,
    "text": "And once again, I'm going to copy this code.",
    "textdich": ""
  },
  {
    "start": 53209.76,
    "end": 53214.8,
    "text": "And we'll just use it here, which is going to change the method to interest or collect interest.",
    "textdich": ""
  },
  {
    "start": 53214.8,
    "end": 53221.84,
    "text": "Okay, so we start out with the value of 50. And so what should the interest be? Well, if I take a look",
    "textdich": ""
  },
  {
    "start": 53221.84,
    "end": 53227.76,
    "text": "at what my method actually does, it just takes the number multiplies by 1.1. So that should give us",
    "textdich": ""
  },
  {
    "start": 53228.56,
    "end": 53239.04,
    "text": "55, right? 1.1 times 50 should be 55. So I will say this should be 55. And let's see what happens.",
    "textdich": ""
  },
  {
    "start": 53239.04,
    "end": 53245.36,
    "text": "So if I run this, we can see that we did have one test failed. And I'm assuming it's going to be the",
    "textdich": ""
  },
  {
    "start": 53245.36,
    "end": 53251.6,
    "text": "last test, the one we just created. And we can see that the test collect underscore interest failed.",
    "textdich": ""
  },
  {
    "start": 53252.16,
    "end": 53257.36,
    "text": "And the reason for that is that it looks like bank account dot balance returns a value of 55 dot",
    "textdich": ""
  },
  {
    "start": 53257.36,
    "end": 53265.2,
    "text": "000001, which in Python is not the same thing as 55. So this isn't necessarily an issue with our",
    "textdich": ""
  },
  {
    "start": 53265.2,
    "end": 53269.92,
    "text": "code. It's just the way that, you know, we're comparing numbers in our test. So this is an",
    "textdich": ""
  },
  {
    "start": 53269.92,
    "end": 53274.64,
    "text": "issue with our test in this case, because it's not accounting for some of the different rounding",
    "textdich": ""
  },
  {
    "start": 53274.64,
    "end": 53278.8,
    "text": "and the way the calculations occur within Python. So what we're going to do is what we can just call",
    "textdich": ""
  },
  {
    "start": 53278.8,
    "end": 53285.84,
    "text": "the round method right here, and we can round it to, you know, five or six decimal places,",
    "textdich": ""
  },
  {
    "start": 53286.88,
    "end": 53292.48,
    "text": "depending on how accurate you want it to be. So it should now round it to, you know, this value,",
    "textdich": ""
  },
  {
    "start": 53292.48,
    "end": 53297.04,
    "text": "however many decimals is five or six, and then convert it to an integer. So then we can compare",
    "textdich": ""
  },
  {
    "start": 53297.04,
    "end": 53302.24,
    "text": "these two because this is an integer, this is technically a float. So not exactly they're not",
    "textdich": ""
  },
  {
    "start": 53302.24,
    "end": 53307.68,
    "text": "going to be equal in that case. So now if I run this, we can see that it did successfully pass.",
    "textdich": ""
  },
  {
    "start": 53307.68,
    "end": 53311.28,
    "text": "So that's just something to keep in mind. That's why I added that little extra test case,",
    "textdich": ""
  },
  {
    "start": 53311.28,
    "end": 53314.16,
    "text": "just to make sure that especially when it comes to those calculations, you got to make sure that",
    "textdich": ""
  },
  {
    "start": 53314.16,
    "end": 53319.84,
    "text": "you're comparing the right two numbers. If you look through all of the test cases for the bank",
    "textdich": ""
  },
  {
    "start": 53319.84,
    "end": 53324.4,
    "text": "account, you'll notice that there's some repetitive code, right for every single test case that we",
    "textdich": ""
  },
  {
    "start": 53324.4,
    "end": 53330.32,
    "text": "have for testing our bank account, you'll notice that we always have to initialize a bank account",
    "textdich": ""
  },
  {
    "start": 53330.32,
    "end": 53335.76,
    "text": "instance. And you can see that right now, look at that we are repeating our code across all of our",
    "textdich": ""
  },
  {
    "start": 53335.76,
    "end": 53341.6,
    "text": "tests. And when you get to more complex classes, more complex test case scenarios, right, you might",
    "textdich": ""
  },
  {
    "start": 53341.6,
    "end": 53347.2,
    "text": "have 50 tests for a single class. And we're in this case, just repeating the same exact code",
    "textdich": ""
  },
  {
    "start": 53347.2,
    "end": 53351.84,
    "text": "for each one of them. And so when it comes to writing these tests, you know, pytest does",
    "textdich": ""
  },
  {
    "start": 53351.84,
    "end": 53356.64,
    "text": "provide us with some tools that we can use to minimize the amount of repetitive code. And one",
    "textdich": ""
  },
  {
    "start": 53356.64,
    "end": 53362.08,
    "text": "of those is called fixtures. And a fixture is a very simple concept. It's nothing more than a",
    "textdich": ""
  },
  {
    "start": 53362.08,
    "end": 53367.76,
    "text": "function that gets run before each one of your tests, or at least the specific tests that you",
    "textdich": ""
  },
  {
    "start": 53367.76,
    "end": 53373.92,
    "text": "want. So we can create a function, which does nothing more than initialize a bank account and",
    "textdich": ""
  },
  {
    "start": 53373.92,
    "end": 53380.08,
    "text": "then return it to our function that's about to run. So I'll show you how we can do that. Right,",
    "textdich": ""
  },
  {
    "start": 53380.08,
    "end": 53383.68,
    "text": "the first thing we have to do is let's create our fixture. And I'm going to we can put it anywhere,",
    "textdich": ""
  },
  {
    "start": 53383.68,
    "end": 53387.2,
    "text": "I'm just going to put it here for now. But generally, you want to put it at the top of",
    "textdich": ""
  },
  {
    "start": 53387.2,
    "end": 53391.92,
    "text": "the file, actually, I'll stick to the best practice, I'll say, at pytest dot fixture.",
    "textdich": ""
  },
  {
    "start": 53396.32,
    "end": 53403.52,
    "text": "And then here, we create a name for our fixture. So I'll say, this is going to, you know, give us",
    "textdich": ""
  },
  {
    "start": 53403.52,
    "end": 53409.84,
    "text": "or initialize us a bank account with a zero initial value. So I'll call this zero underscore bank",
    "textdich": ""
  },
  {
    "start": 53409.84,
    "end": 53418.48,
    "text": "account. And so all we're going to do is we're just going to return an instance of bank account",
    "textdich": ""
  },
  {
    "start": 53419.28,
    "end": 53427.36,
    "text": "with an initial default value of zero. And then we'll create one more fixture.",
    "textdich": ""
  },
  {
    "start": 53427.36,
    "end": 53436.08,
    "text": "And this one is going to return a regular bank account with an initial value. And what value we",
    "textdich": ""
  },
  {
    "start": 53436.08,
    "end": 53441.44,
    "text": "want to give it we get to decide. So I'll just say return bank account. And in this case, 50.",
    "textdich": ""
  },
  {
    "start": 53443.2,
    "end": 53448.96,
    "text": "All right. And so now what we can do is, for all of these tests, I don't need to initialize them",
    "textdich": ""
  },
  {
    "start": 53448.96,
    "end": 53455.12,
    "text": "here, because I can have these guys reference the fixture. So to assign a fixture or have a fixture",
    "textdich": ""
  },
  {
    "start": 53455.12,
    "end": 53459.52,
    "text": "get called for a function, we just pass it in as an argument. So for test bank account set initial",
    "textdich": ""
  },
  {
    "start": 53459.52,
    "end": 53467.12,
    "text": "amount, we're going to reference the zero underscore bank account fixture. So what exactly happens is",
    "textdich": ""
  },
  {
    "start": 53467.12,
    "end": 53472.32,
    "text": "when pytest goes to run this test case, because it sees this as an argument into the function,",
    "textdich": ""
  },
  {
    "start": 53472.32,
    "end": 53477.68,
    "text": "it's going to oops, that should be a zero, okay. But what it's going to do is it's going to call",
    "textdich": ""
  },
  {
    "start": 53477.68,
    "end": 53483.36,
    "text": "this function before it actually runs the test case. So it calls this function. And then whatever",
    "textdich": ""
  },
  {
    "start": 53483.36,
    "end": 53488.64,
    "text": "we return here, which is the bank account gets passed into a variable called zero bank account.",
    "textdich": ""
  },
  {
    "start": 53489.2,
    "end": 53493.28,
    "text": "And so now, instead of creating a bank account instance, I can remove this.",
    "textdich": ""
  },
  {
    "start": 53494.48,
    "end": 53497.76,
    "text": "And I can reference this variable, which is zero underscore bank account.",
    "textdich": ""
  },
  {
    "start": 53500.0,
    "end": 53502.56,
    "text": "But let's test this out. Let's see if that broke anything.",
    "textdich": ""
  },
  {
    "start": 53502.56,
    "end": 53515.76,
    "text": "If we run this up, sorry, guys, let me undo this, I didn't mean to use this function. This is going",
    "textdich": ""
  },
  {
    "start": 53515.76,
    "end": 53521.68,
    "text": "to be the for the test bank account default amount. So we want to remove this one. My apologies,",
    "textdich": ""
  },
  {
    "start": 53521.68,
    "end": 53528.96,
    "text": "and we don't need that in this one. And then this will be zero underscore bank account.",
    "textdich": ""
  },
  {
    "start": 53528.96,
    "end": 53535.84,
    "text": "But now all tests should pass. Alright, so everything passes. But if you're still a little",
    "textdich": ""
  },
  {
    "start": 53535.84,
    "end": 53539.92,
    "text": "confused as to the you know, what exactly is happening behind the scenes, or what is the order",
    "textdich": ""
  },
  {
    "start": 53539.92,
    "end": 53546.32,
    "text": "of operations, I'm going to add a few print statements. So I'm going to say, testing my",
    "textdich": ""
  },
  {
    "start": 53546.32,
    "end": 53551.6,
    "text": "bank account. And then I'm going to put in a print statement inside my fixture as well,",
    "textdich": ""
  },
  {
    "start": 53551.6,
    "end": 53566.64,
    "text": "which is say, creating empty bank account. And so now if we run this, I want you to take a look at",
    "textdich": ""
  },
  {
    "start": 53566.64,
    "end": 53575.92,
    "text": "the code. And I realized I have to pass in the dash s flag to see the print statements. All right,",
    "textdich": ""
  },
  {
    "start": 53575.92,
    "end": 53583.52,
    "text": "so here we go, we're going to test bank set initial amount. So I know test bank default amount. And",
    "textdich": ""
  },
  {
    "start": 53583.52,
    "end": 53589.2,
    "text": "so you'll see that when we start this test, first things first is we create an empty bank account.",
    "textdich": ""
  },
  {
    "start": 53589.2,
    "end": 53593.68,
    "text": "That's that print statement for the fixture. So before the test even runs, we call the fixture,",
    "textdich": ""
  },
  {
    "start": 53593.68,
    "end": 53599.6,
    "text": "because we've defined that here, by saying, where is it that it's going to be a argument into the",
    "textdich": ""
  },
  {
    "start": 53599.6,
    "end": 53606.4,
    "text": "default amount test case, then after the fixtures run, which is just a function, we then run our",
    "textdich": ""
  },
  {
    "start": 53606.4,
    "end": 53611.44,
    "text": "actual test case, and then we get the print testing my bank account right after that. So once again,",
    "textdich": ""
  },
  {
    "start": 53611.44,
    "end": 53616.4,
    "text": "just to really drive home this point, a fixture is just a function that runs before a specific",
    "textdich": ""
  },
  {
    "start": 53616.4,
    "end": 53621.76,
    "text": "test case. That's all but the great part is we can use the same fixture for all of our other tests.",
    "textdich": ""
  },
  {
    "start": 53623.76,
    "end": 53629.04,
    "text": "So let's go to the next test, which is setting an initial amount. And in this case,",
    "textdich": ""
  },
  {
    "start": 53629.04,
    "end": 53633.52,
    "text": "we have this fixture right here, which is the bank account one. And so I'm going to say this",
    "textdich": ""
  },
  {
    "start": 53633.52,
    "end": 53639.76,
    "text": "is going to go to bank account. So this will call the bank account fixture, and then we can remove",
    "textdich": ""
  },
  {
    "start": 53639.76,
    "end": 53647.76,
    "text": "this line. And we can just keep this here, because it's referencing this variable now.",
    "textdich": ""
  },
  {
    "start": 53648.8,
    "end": 53654.4,
    "text": "And this should work now. So we run this once again, all tests pass. And I can just do this",
    "textdich": ""
  },
  {
    "start": 53654.4,
    "end": 53659.92,
    "text": "for all of them. So I can just call the bank account fixture. And I can just remove that",
    "textdich": ""
  },
  {
    "start": 53659.92,
    "end": 53673.28,
    "text": "line. Everything else can stay the same. And the same thing here as well. And finally, for the last",
    "textdich": ""
  },
  {
    "start": 53673.28,
    "end": 53680.64,
    "text": "one, we can do that. And so now you can see that we have saved us ourselves a couple of lines of",
    "textdich": ""
  },
  {
    "start": 53680.64,
    "end": 53688.72,
    "text": "code for each function. And if I run this, you can see that all the tests pass. So at this point,",
    "textdich": ""
  },
  {
    "start": 53688.72,
    "end": 53693.44,
    "text": "you're probably thinking, you know, this does this doesn't really look like it saved us a lot of code",
    "textdich": ""
  },
  {
    "start": 53693.44,
    "end": 53699.68,
    "text": "or a lot of, you know, coding out, however, there's going to be certain things that you want to do,",
    "textdich": ""
  },
  {
    "start": 53699.68,
    "end": 53705.52,
    "text": "that you want to initialize before every single test of your of your entire application. So maybe",
    "textdich": ""
  },
  {
    "start": 53705.52,
    "end": 53710.96,
    "text": "something like setting up a test database, right, you want that to be set up for each single test,",
    "textdich": ""
  },
  {
    "start": 53710.96,
    "end": 53715.44,
    "text": "having to manually do that for each test case would become very cumbersome. And then the lines",
    "textdich": ""
  },
  {
    "start": 53715.44,
    "end": 53719.92,
    "text": "of codes that you're repeating start to become a serious problem. And that's really one of the",
    "textdich": ""
  },
  {
    "start": 53720.56,
    "end": 53726.88,
    "text": "best use cases for for using fixtures is something like setting up a database or setting up, you know,",
    "textdich": ""
  },
  {
    "start": 53726.88,
    "end": 53731.04,
    "text": "some sort of email service or something that you're going to use across a lot of your tests,",
    "textdich": ""
  },
  {
    "start": 53731.04,
    "end": 53736.08,
    "text": "and then having to initialize that manually for each test is going to be is going to require a",
    "textdich": ""
  },
  {
    "start": 53736.08,
    "end": 53740.96,
    "text": "lot of work. And so that's where fixtures really help save us some time. Okay, what I want to do",
    "textdich": ""
  },
  {
    "start": 53740.96,
    "end": 53744.96,
    "text": "is I want to create one more test. And this test is going to be a little bit different. I'm going",
    "textdich": ""
  },
  {
    "start": 53744.96,
    "end": 53763.68,
    "text": "to call this test about bank transaction maybe. And so this is going to test us both depositing",
    "textdich": ""
  },
  {
    "start": 53763.68,
    "end": 53767.2,
    "text": "money and withdrawing money in one test case so that we can have a couple of different actions",
    "textdich": ""
  },
  {
    "start": 53767.2,
    "end": 53773.68,
    "text": "on a bank account. And so just like we've done before, when it comes to setting up a fixture so",
    "textdich": ""
  },
  {
    "start": 53773.68,
    "end": 53777.52,
    "text": "that we can retrieve an instance of our bank account class, I'm going to do the same thing,",
    "textdich": ""
  },
  {
    "start": 53777.52,
    "end": 53780.56,
    "text": "but we're going to use the zero bank account. So it starts out with no money.",
    "textdich": ""
  },
  {
    "start": 53786.0,
    "end": 53788.48,
    "text": "And then what we're going to do here is we're going to reference the zero when we're going",
    "textdich": ""
  },
  {
    "start": 53788.48,
    "end": 53801.68,
    "text": "to start off by depositing money. And let's say I'll deposit $200. And then we can also then",
    "textdich": ""
  },
  {
    "start": 53801.68,
    "end": 53807.68,
    "text": "withdraw certain amount of money. So now we're testing both in one specific test case, and I'll",
    "textdich": ""
  },
  {
    "start": 53807.68,
    "end": 53815.04,
    "text": "say I'll withdraw 100. And we know that we should ultimately be left with $100. So we'll do a cert",
    "textdich": ""
  },
  {
    "start": 53815.04,
    "end": 53826.88,
    "text": "zero bank account dot balance equals equals 100. So let's test this out.",
    "textdich": ""
  },
  {
    "start": 53826.88,
    "end": 53837.28,
    "text": "And let's see how this works. And that works as well. But what I wanted to do is for this specific",
    "textdich": ""
  },
  {
    "start": 53837.28,
    "end": 53843.44,
    "text": "test case, I wanted to show you that we can, we can use fixtures and parameterize so we can test",
    "textdich": ""
  },
  {
    "start": 53843.44,
    "end": 53847.6,
    "text": "multiple values like we did for this specific test case. So what I'm gonna do is I'm going to copy",
    "textdich": ""
  },
  {
    "start": 53847.6,
    "end": 53851.12,
    "text": "this so that we don't have to type this all from scratch. And we're going to create a couple of",
    "textdich": ""
  },
  {
    "start": 53851.12,
    "end": 53859.2,
    "text": "different test scenarios for this specific function. And in this case, we're going to have",
    "textdich": ""
  },
  {
    "start": 53859.2,
    "end": 53869.2,
    "text": "a deposited, we're going to have a withdrew. And we can have the expected amount and keep in mind,",
    "textdich": ""
  },
  {
    "start": 53869.2,
    "end": 53874.0,
    "text": "you're not limited to having three variables, you can put as many as you want, it just happens to",
    "textdich": ""
  },
  {
    "start": 53874.0,
    "end": 53879.92,
    "text": "work out that I only need three in this case. And then we can provide some test data. So how about",
    "textdich": ""
  },
  {
    "start": 53879.92,
    "end": 53885.52,
    "text": "the same one we have right now, we're going to deposit 100, 200, sorry, withdraw 100. And we",
    "textdich": ""
  },
  {
    "start": 53885.52,
    "end": 53894.64,
    "text": "expect 100 in the end. We can do the same thing. How about deposit 50, withdraw 10. And we should",
    "textdich": ""
  },
  {
    "start": 53894.64,
    "end": 53901.6,
    "text": "end up with 40. And then we've got our high roller, which is sitting there with a whopping $1,200.",
    "textdich": ""
  },
  {
    "start": 53901.6,
    "end": 53910.88,
    "text": "And he went through how about 200. And he's gonna end up with 1000 bucks at the end. So now we can",
    "textdich": ""
  },
  {
    "start": 53910.88,
    "end": 53925.92,
    "text": "pass deposited with drew and expected. And now we can use deposited here with drew here. And then",
    "textdich": ""
  },
  {
    "start": 53925.92,
    "end": 53938.48,
    "text": "we know what the expected is going to be. So let's try this out. All right, and we can see all three",
    "textdich": ""
  },
  {
    "start": 53938.48,
    "end": 53942.64,
    "text": "test cases run. And in this case, all three test cases passed. So I just wanted to show you guys",
    "textdich": ""
  },
  {
    "start": 53942.64,
    "end": 53948.16,
    "text": "that you can use this with our fixture. So it's okay, if you're using a fixture, you can still use",
    "textdich": ""
  },
  {
    "start": 53948.16,
    "end": 53954.32,
    "text": "the parameterize decorator in this case to test multiple scenarios. If we go back to our bank",
    "textdich": ""
  },
  {
    "start": 53954.32,
    "end": 53959.6,
    "text": "account class, and you take a look at the withdraw method, you'll notice that right now, we're not",
    "textdich": ""
  },
  {
    "start": 53959.6,
    "end": 53964.0,
    "text": "performing any check to make sure that the user has enough money. And that's not really how a bank",
    "textdich": ""
  },
  {
    "start": 53964.0,
    "end": 53968.08,
    "text": "account works. Because if you have 100 bucks, and you withdraw 500, the bank's gonna be like,",
    "textdich": ""
  },
  {
    "start": 53968.08,
    "end": 53972.24,
    "text": "we can't do that. So it just makes sense in our code to actually perform some sort of check.",
    "textdich": ""
  },
  {
    "start": 53972.88,
    "end": 53977.76,
    "text": "And so usually, you know, something simple as we'll say, hey, if amount that you're trying to",
    "textdich": ""
  },
  {
    "start": 53977.76,
    "end": 53984.56,
    "text": "withdraw is greater than your balance, well, what are we going to do? Well, we're probably going to",
    "textdich": ""
  },
  {
    "start": 53984.56,
    "end": 53992.0,
    "text": "raise an exception. So I'll say raise. And we're just gonna raise a standard Python exception.",
    "textdich": ""
  },
  {
    "start": 53992.0,
    "end": 53999.28,
    "text": "And we'll just say something in sufficient in sufficient funds in account.",
    "textdich": ""
  },
  {
    "start": 54002.48,
    "end": 54006.16,
    "text": "Right. However, if we do have enough money, then we will actually perform that operation.",
    "textdich": ""
  },
  {
    "start": 54006.16,
    "end": 54013.04,
    "text": "So this is all good. If we go to our test calculations, and we just add one more scenario",
    "textdich": ""
  },
  {
    "start": 54013.04,
    "end": 54021.6,
    "text": "in this case. But this time, we deposit, let's say only $10. And we try to withdraw,",
    "textdich": ""
  },
  {
    "start": 54023.28,
    "end": 54028.88,
    "text": "I don't know, 50. Well, what is the expected scenario, the expected value, and it doesn't",
    "textdich": ""
  },
  {
    "start": 54028.88,
    "end": 54032.56,
    "text": "really matter what we put in, because this is ultimately going to, you know, break,",
    "textdich": ""
  },
  {
    "start": 54032.56,
    "end": 54036.88,
    "text": "break our code, because we're raising an exception. So if I try to run this,",
    "textdich": ""
  },
  {
    "start": 54038.96,
    "end": 54043.2,
    "text": "right, it's going to fail. Because we're raising an exception. And remember,",
    "textdich": ""
  },
  {
    "start": 54043.2,
    "end": 54048.56,
    "text": "anytime you throw an error, that's going to automatically make the test fail. So what do",
    "textdich": ""
  },
  {
    "start": 54048.56,
    "end": 54052.32,
    "text": "we do? Well, first of all, let's remove this test case. Because for scenarios like this,",
    "textdich": ""
  },
  {
    "start": 54052.32,
    "end": 54057.12,
    "text": "where you expect to receive an error, we need to create a different test case. So I'll call this",
    "textdich": ""
  },
  {
    "start": 54057.12,
    "end": 54072.24,
    "text": "we'll have a test insufficient funds. And let's say we start out with, instead of using the",
    "textdich": ""
  },
  {
    "start": 54072.24,
    "end": 54077.68,
    "text": "zero bank account, whereas the instead, instead of using this bank account, we're going to use",
    "textdich": ""
  },
  {
    "start": 54077.68,
    "end": 54081.28,
    "text": "the zero bank account, and then we'll just try to withdraw money. So that's an easy way of testing",
    "textdich": ""
  },
  {
    "start": 54081.28,
    "end": 54093.92,
    "text": "it. So we'll say zero underscore bank account. So we'll have no money in our account. And we're",
    "textdich": ""
  },
  {
    "start": 54093.92,
    "end": 54098.8,
    "text": "going to withdraw some money. So we would do, you know, actually, I'll just do a regular bank",
    "textdich": ""
  },
  {
    "start": 54098.8,
    "end": 54103.04,
    "text": "account. I don't know why I want zero. So we'll start out with 50 bucks. And we'll try to do a",
    "textdich": ""
  },
  {
    "start": 54103.04,
    "end": 54110.0,
    "text": "bank account dot withdraw. And we'll try to withdraw $200. So that should raise the exception.",
    "textdich": ""
  },
  {
    "start": 54110.0,
    "end": 54116.0,
    "text": "But how exactly in our test do we tell Python it's expected to receive an exception? Because",
    "textdich": ""
  },
  {
    "start": 54116.0,
    "end": 54118.88,
    "text": "right now, if we run this, once again, we're going to get the same exact error,",
    "textdich": ""
  },
  {
    "start": 54120.08,
    "end": 54127.36,
    "text": "right failed. So what do we do? This is how you tell Python that you accept that you expect an",
    "textdich": ""
  },
  {
    "start": 54127.36,
    "end": 54132.96,
    "text": "exception you do with and then you call pytest. Remember, we imported pytest all the way at the",
    "textdich": ""
  },
  {
    "start": 54132.96,
    "end": 54140.48,
    "text": "top right here. So we'll do pytest dot raises. And then you provide the exception that you expect.",
    "textdich": ""
  },
  {
    "start": 54140.48,
    "end": 54144.56,
    "text": "So in this case, this is just a regular Python exception. So you can just say that. And then",
    "textdich": ""
  },
  {
    "start": 54144.56,
    "end": 54151.28,
    "text": "you provide the command that you're going to run. Okay, and so that way, if this command throws an",
    "textdich": ""
  },
  {
    "start": 54151.28,
    "end": 54157.52,
    "text": "error or raises an exception, pytest will be told to expect this. So then it would consider the test",
    "textdich": ""
  },
  {
    "start": 54157.52,
    "end": 54166.0,
    "text": "as passing. And now if I run this, we can see that the insufficient funds test passed. And if we go",
    "textdich": ""
  },
  {
    "start": 54166.0,
    "end": 54172.72,
    "text": "back to our code and actually remove this exception, we'll comment out that entire statement.",
    "textdich": ""
  },
  {
    "start": 54175.12,
    "end": 54181.04,
    "text": "What do you think is going to happen here? Right now it's failed, because it did not raise an",
    "textdich": ""
  },
  {
    "start": 54181.04,
    "end": 54186.08,
    "text": "exception, pytest is expecting an exception, and we didn't raise one. So then it considers that a",
    "textdich": ""
  },
  {
    "start": 54186.08,
    "end": 54190.08,
    "text": "error in our code, because when we expect an exception, we should expect an exception.",
    "textdich": ""
  },
  {
    "start": 54191.2,
    "end": 54198.32,
    "text": "So I'll uncomment this. And now, you know, in a in real code, right, you wouldn't just throw",
    "textdich": ""
  },
  {
    "start": 54199.12,
    "end": 54203.68,
    "text": "just a generic Python exception, you're going to usually create your own exception classes.",
    "textdich": ""
  },
  {
    "start": 54203.68,
    "end": 54207.52,
    "text": "So let's say we define our own exception. And I'll call this insufficient",
    "textdich": ""
  },
  {
    "start": 54207.52,
    "end": 54216.4,
    "text": "funds. And this is going to extend the exception class. And we'll just say there's no properties,",
    "textdich": ""
  },
  {
    "start": 54216.4,
    "end": 54222.4,
    "text": "I'll just say pass. And in this case, I'll say, we'll raise an insufficient fund in sufficient",
    "textdich": ""
  },
  {
    "start": 54222.4,
    "end": 54228.88,
    "text": "funds. Alright, so if I make this change, what do you think is going to happen? You think it's",
    "textdich": ""
  },
  {
    "start": 54228.88,
    "end": 54234.56,
    "text": "going to break our code? Well, let's run this, we can see that it passed. And the reason why it",
    "textdich": ""
  },
  {
    "start": 54234.56,
    "end": 54240.96,
    "text": "passed is because insufficient funds is a child class to the exception class. So when we say we",
    "textdich": ""
  },
  {
    "start": 54240.96,
    "end": 54245.68,
    "text": "accept, we expect an exception, technically, we are getting the exception, it's just,",
    "textdich": ""
  },
  {
    "start": 54245.68,
    "end": 54252.64,
    "text": "we haven't specified we specifically want a insufficient funds exception. And because this",
    "textdich": ""
  },
  {
    "start": 54252.64,
    "end": 54257.92,
    "text": "is inheriting from this class, Python says, hey, look, everything looks good. But if you did want",
    "textdich": ""
  },
  {
    "start": 54257.92,
    "end": 54263.68,
    "text": "to be as specific as possible, which is generally recommended, what we can do is I can import that",
    "textdich": ""
  },
  {
    "start": 54263.68,
    "end": 54272.64,
    "text": "exception. So we'll say from app calculations, we can import insufficient funds. And now here,",
    "textdich": ""
  },
  {
    "start": 54272.64,
    "end": 54287.44,
    "text": "we can say we expect, we expect a insufficient funds. And so now if I run this, we can see that",
    "textdich": ""
  },
  {
    "start": 54287.44,
    "end": 54295.2,
    "text": "it passes. And the benefit of this is that if for some reason, our code raised another type of",
    "textdich": ""
  },
  {
    "start": 54295.2,
    "end": 54300.24,
    "text": "exception, it would consider this test as failing. So if I go back to my code, and let's say that,",
    "textdich": ""
  },
  {
    "start": 54300.24,
    "end": 54304.4,
    "text": "you know, for some reason, something broken our code, and all of a sudden, instead of raising",
    "textdich": ""
  },
  {
    "start": 54304.4,
    "end": 54309.84,
    "text": "an insufficient funds error, we get some other kind of exception. And I can just simulate this",
    "textdich": ""
  },
  {
    "start": 54309.84,
    "end": 54314.8,
    "text": "by doing raise zero division error. So if you ever try to divide a number by zero, this is the",
    "textdich": ""
  },
  {
    "start": 54314.8,
    "end": 54331.52,
    "text": "the exception that's expected. And so now if I run this, right, we can see that the test failed",
    "textdich": ""
  },
  {
    "start": 54331.52,
    "end": 54338.24,
    "text": "because we expected a insufficient funds exception, but we got a zero division error. And so that",
    "textdich": ""
  },
  {
    "start": 54338.24,
    "end": 54341.76,
    "text": "considers the test as failing, because we've told that we've expected something, but we got something",
    "textdich": ""
  },
  {
    "start": 54341.76,
    "end": 54346.4,
    "text": "else. So it's generally best to explicitly define the exact exception that you expect so that you",
    "textdich": ""
  },
  {
    "start": 54346.4,
    "end": 54350.4,
    "text": "can make sure that, you know, that nothing else is broken, because technically, any part of your",
    "textdich": ""
  },
  {
    "start": 54350.4,
    "end": 54355.84,
    "text": "code can break and throw an error. And if it throws an error, and we just try to, if we just tell,",
    "textdich": ""
  },
  {
    "start": 54355.84,
    "end": 54360.48,
    "text": "you know, our test to expect any exception, then it may not be doing what we actually expect it to",
    "textdich": ""
  },
  {
    "start": 54360.48,
    "end": 54369.28,
    "text": "do. But we'll change this back. We don't need that anymore. Okay, so I think we have a good",
    "textdich": ""
  },
  {
    "start": 54369.28,
    "end": 54373.28,
    "text": "enough understanding on how to create a test. And I think it's time we actually started testing our",
    "textdich": ""
  },
  {
    "start": 54373.28,
    "end": 54379.36,
    "text": "application. When it comes to fast API, fast API automatically provides us a test client. All we",
    "textdich": ""
  },
  {
    "start": 54379.36,
    "end": 54387.2,
    "text": "have to do is we just say from fast API dot test client, import test client. And then all we have",
    "textdich": ""
  },
  {
    "start": 54387.2,
    "end": 54392.0,
    "text": "to do is then just pass in our fast API instance, which is stored under the variable app. And then",
    "textdich": ""
  },
  {
    "start": 54392.0,
    "end": 54397.76,
    "text": "we can just perform any requests to our application by doing client, which is what we named the test",
    "textdich": ""
  },
  {
    "start": 54397.76,
    "end": 54402.24,
    "text": "client, and then just doing a dot get or a dot post or whatever. And then we can get the response,",
    "textdich": ""
  },
  {
    "start": 54402.24,
    "end": 54405.52,
    "text": "and then we can assert anything that we want, just to make sure that we get the responses that we",
    "textdich": ""
  },
  {
    "start": 54405.52,
    "end": 54411.04,
    "text": "ultimately expect. And keep in mind, when you make use of this test client, right, if you take a look",
    "textdich": ""
  },
  {
    "start": 54411.04,
    "end": 54416.88,
    "text": "at the documentation, it says that you use this the same way you would any requests object. So if",
    "textdich": ""
  },
  {
    "start": 54416.88,
    "end": 54424.0,
    "text": "you ever use the request library from Python, right, this is the same exact object. So anything you",
    "textdich": ""
  },
  {
    "start": 54424.0,
    "end": 54428.32,
    "text": "could do with requests, you can do with the test client. So you can customize the request, you can,",
    "textdich": ""
  },
  {
    "start": 54428.32,
    "end": 54433.6,
    "text": "you know, change the HTTP method, you can add a body a payload, you can add a authorization header,",
    "textdich": ""
  },
  {
    "start": 54433.6,
    "end": 54438.16,
    "text": "it's really just doing what postman is doing for us. But we're going to do it through code instead",
    "textdich": ""
  },
  {
    "start": 54438.16,
    "end": 54442.4,
    "text": "of manually opening a postman. And then you know, you know, figuring out which requests we want to",
    "textdich": ""
  },
  {
    "start": 54442.4,
    "end": 54447.6,
    "text": "send, we're just going to do it out in Python. So we can do it all in an automatic automated fashion.",
    "textdich": ""
  },
  {
    "start": 54447.6,
    "end": 54451.92,
    "text": "But if you haven't worked with the request library, definitely take a look at this. Just take a look",
    "textdich": ""
  },
  {
    "start": 54451.92,
    "end": 54456.96,
    "text": "at how we generate requests. It's not too difficult, right? It's just request dot get, or in our case,",
    "textdich": ""
  },
  {
    "start": 54456.96,
    "end": 54459.84,
    "text": "we're going to call a client, but it doesn't really matter. And then you provide the URL that you want",
    "textdich": ""
  },
  {
    "start": 54459.84,
    "end": 54464.72,
    "text": "to run this against. And then you know, you can add in other properties like an auth header or",
    "textdich": ""
  },
  {
    "start": 54464.72,
    "end": 54471.28,
    "text": "anything like that. So it's just about customizing your specific HTTP request. And so I'm going to",
    "textdich": ""
  },
  {
    "start": 54471.28,
    "end": 54478.4,
    "text": "create a new file. And I'm going to call this how about test underscore users, this, this module",
    "textdich": ""
  },
  {
    "start": 54478.4,
    "end": 54485.28,
    "text": "represent tests for you know, creating users and, and getting users profiles information and things",
    "textdich": ""
  },
  {
    "start": 54485.28,
    "end": 54492.72,
    "text": "like that. And just like it shows in the fast API documentation, let's just copy this line right here.",
    "textdich": ""
  },
  {
    "start": 54500.16,
    "end": 54505.52,
    "text": "And then what we want to do is we want to import from our app package, go to our main file,",
    "textdich": ""
  },
  {
    "start": 54505.52,
    "end": 54510.96,
    "text": "we want to import our, our fast API instance. So we want to import this app right here so that we",
    "textdich": ""
  },
  {
    "start": 54510.96,
    "end": 54529.12,
    "text": "can actually test it. I'll say from app dot main import app. Alright, so we have our app instance.",
    "textdich": ""
  },
  {
    "start": 54529.12,
    "end": 54538.08,
    "text": "And we'll just copy this line right here, which is just setting our test client to a variable",
    "textdich": ""
  },
  {
    "start": 54538.08,
    "end": 54543.2,
    "text": "called client. And so now we can run whatever tests that we want. And I think, you know, just",
    "textdich": ""
  },
  {
    "start": 54543.2,
    "end": 54548.88,
    "text": "to keep things simple, let's start off with the simple route path that we have right here, just",
    "textdich": ""
  },
  {
    "start": 54548.88,
    "end": 54552.64,
    "text": "to test that this works. Because that way, we don't have to worry about authentication or",
    "textdich": ""
  },
  {
    "start": 54552.64,
    "end": 54558.16,
    "text": "passing any other data, let's start off with the simplest scenarios. So this is at the root URL.",
    "textdich": ""
  },
  {
    "start": 54558.16,
    "end": 54569.92,
    "text": "So we will go to our test users. And I'm just going to call this test route. Because it's not",
    "textdich": ""
  },
  {
    "start": 54569.92,
    "end": 54578.16,
    "text": "really a real function or anything like that. And then here, we'll say client dot. And since we are",
    "textdich": ""
  },
  {
    "start": 54578.16,
    "end": 54585.28,
    "text": "testing a specific path operation, this is a get method. So we want to send a get so we'll do client",
    "textdich": ""
  },
  {
    "start": 54585.28,
    "end": 54591.2,
    "text": "dot get, then the URL. So we can just say slash, we don't have to do, you know, localhost, because",
    "textdich": ""
  },
  {
    "start": 54591.2,
    "end": 54596.16,
    "text": "it's not technically a running server, we actually just pass the actual app instance. So we just say",
    "textdich": ""
  },
  {
    "start": 54596.16,
    "end": 54602.08,
    "text": "the route path. And then you can pass in other things like, you know, what payload and things",
    "textdich": ""
  },
  {
    "start": 54602.08,
    "end": 54608.88,
    "text": "like that. But we'll leave that for now. Leave it empty. And we'll, we'll store the response",
    "textdich": ""
  },
  {
    "start": 54609.84,
    "end": 54614.24,
    "text": "under a variable called res. And instead of doing an assert or anything like that,",
    "textdich": ""
  },
  {
    "start": 54614.24,
    "end": 54624.32,
    "text": "for now, I just want to print out the response. All right, and if I run this,",
    "textdich": ""
  },
  {
    "start": 54626.88,
    "end": 54631.6,
    "text": "okay, so a little bit annoying thing right now, it's going to run all of our tests. And if you",
    "textdich": ""
  },
  {
    "start": 54631.6,
    "end": 54636.88,
    "text": "just want to test one test or one module, then I recommend you just do the same thing except pass",
    "textdich": ""
  },
  {
    "start": 54636.88,
    "end": 54643.6,
    "text": "in the path to just your specific your specific module so that we don't run all of our tests all",
    "textdich": ""
  },
  {
    "start": 54643.6,
    "end": 54650.4,
    "text": "over again. So we can just run one in this case. And if we take a look at this, we can see that it",
    "textdich": ""
  },
  {
    "start": 54650.4,
    "end": 54656.4,
    "text": "just prints out a response object, not very helpful. But if you want to see what's the actual payload,",
    "textdich": ""
  },
  {
    "start": 54656.4,
    "end": 54665.92,
    "text": "we can say dot chase on to see what the data looks like. And so then I can run this. And we can see",
    "textdich": ""
  },
  {
    "start": 54665.92,
    "end": 54673.76,
    "text": "that hey, look, we get message Hello World. And if I wanted to grab the message property, I could say",
    "textdich": ""
  },
  {
    "start": 54673.76,
    "end": 54681.44,
    "text": "dot get. And then message and it should return Hello World. Let's try this out one more time.",
    "textdich": ""
  },
  {
    "start": 54684.56,
    "end": 54688.56,
    "text": "And we can see that it prints out Hello World. So to test that this route actually works,",
    "textdich": ""
  },
  {
    "start": 54688.56,
    "end": 54695.68,
    "text": "what we can do is we can just do an assert. And I could say assert and then literally just copy",
    "textdich": ""
  },
  {
    "start": 54695.68,
    "end": 54704.32,
    "text": "this exact message. And I can say, hey, the message should return a value of Hello World.",
    "textdich": ""
  },
  {
    "start": 54705.92,
    "end": 54710.0,
    "text": "It's as simple as that. It's no different than what we did before with our, you know,",
    "textdich": ""
  },
  {
    "start": 54710.0,
    "end": 54714.72,
    "text": "our addition function, right? We're just performing some action, you know, running our code and then",
    "textdich": ""
  },
  {
    "start": 54714.72,
    "end": 54719.84,
    "text": "making sure that the results are what we expect them to be. And so now if I run this again,",
    "textdich": ""
  },
  {
    "start": 54719.84,
    "end": 54726.48,
    "text": "right, once again, still passes because it does return a value of Hello World for the message",
    "textdich": ""
  },
  {
    "start": 54726.48,
    "end": 54730.72,
    "text": "property. And we can assert multiple things, right? It's not just one, we can do a second test case.",
    "textdich": ""
  },
  {
    "start": 54730.72,
    "end": 54737.68,
    "text": "And I can say res dot and we can access a property called status code is even recommending that. So",
    "textdich": ""
  },
  {
    "start": 54737.68,
    "end": 54744.16,
    "text": "we can say get me the status code. And I could say, well, I expect this to be a, you know, if we don't",
    "textdich": ""
  },
  {
    "start": 54744.16,
    "end": 54748.48,
    "text": "change what the default status code is, it's going to default to a value of 200 as per the fast API",
    "textdich": ""
  },
  {
    "start": 54748.48,
    "end": 54753.92,
    "text": "documentation. So this should be a 200, we shouldn't get any other values. So if I run this,",
    "textdich": ""
  },
  {
    "start": 54756.32,
    "end": 54760.96,
    "text": "once again, everything works. But if I go into my code and create a little bug, let's say,",
    "textdich": ""
  },
  {
    "start": 54763.2,
    "end": 54768.16,
    "text": "I just add, you know, an exclamation point or something. Then if I run this,",
    "textdich": ""
  },
  {
    "start": 54770.8,
    "end": 54777.28,
    "text": "we can see that it fails. And that's because we expected Hello World, but we got Hello World",
    "textdich": ""
  },
  {
    "start": 54777.28,
    "end": 54784.64,
    "text": "exclamation. Let's change that back. And this time, let's create a different bug, let's actually",
    "textdich": ""
  },
  {
    "start": 54784.64,
    "end": 54791.2,
    "text": "change what is the status code. And so I can't exactly remember how to do that. So let's go to",
    "textdich": ""
  },
  {
    "start": 54791.2,
    "end": 54799.52,
    "text": "our post router. And we just set the status code right here like this. So if I copy this, and go",
    "textdich": ""
  },
  {
    "start": 54799.52,
    "end": 54807.92,
    "text": "back to here. And actually, was it in the decorator? Yeah, it's in the decorator, you put that in there.",
    "textdich": ""
  },
  {
    "start": 54807.92,
    "end": 54817.6,
    "text": "And we have to import status. And so now if I try this out,",
    "textdich": ""
  },
  {
    "start": 54820.24,
    "end": 54825.28,
    "text": "and run this, once again, it's going to fail. And that's because we're asserting. And the response",
    "textdich": ""
  },
  {
    "start": 54825.28,
    "end": 54831.44,
    "text": "was a 201. But we expected a 200 as per our test, which over here says it should be 200. And it",
    "textdich": ""
  },
  {
    "start": 54831.44,
    "end": 54835.2,
    "text": "throws an error. So you can see we could test a lot of different things, you can choose to test",
    "textdich": ""
  },
  {
    "start": 54835.2,
    "end": 54839.44,
    "text": "each and every property that you're interested in to make sure that the response is exactly what",
    "textdich": ""
  },
  {
    "start": 54839.44,
    "end": 54850.4,
    "text": "you expect it to be. But at this point, I think we understand how to send requests. So let me just,",
    "textdich": ""
  },
  {
    "start": 54850.4,
    "end": 54853.92,
    "text": "first of all, undo those changes that I just made, just to make sure I don't break anything else in",
    "textdich": ""
  },
  {
    "start": 54853.92,
    "end": 54860.48,
    "text": "my app. And we no longer need to import that. So remove that, we'll save everything. And let's just",
    "textdich": ""
  },
  {
    "start": 54860.48,
    "end": 54864.48,
    "text": "run our test one more time, just to make sure that everything's good. And it looks like everything",
    "textdich": ""
  },
  {
    "start": 54864.48,
    "end": 54869.04,
    "text": "passes. Before moving any further, I want to show you a couple of other flags that we can pass",
    "textdich": ""
  },
  {
    "start": 54869.68,
    "end": 54875.04,
    "text": "to the pytest command so that we can kind of tweak the behavior of our testing. And the first thing",
    "textdich": ""
  },
  {
    "start": 54875.04,
    "end": 54878.8,
    "text": "I want to do is if you take a look at the output, you can see that we get a whole bunch of warnings.",
    "textdich": ""
  },
  {
    "start": 54879.44,
    "end": 54883.2,
    "text": "And, you know, depending on how many packages and libraries that you have installed, you could",
    "textdich": ""
  },
  {
    "start": 54883.2,
    "end": 54888.16,
    "text": "potentially see a lot more warnings. And I actually hate looking at these things. So what I normally",
    "textdich": ""
  },
  {
    "start": 54888.16,
    "end": 54894.24,
    "text": "like to do is I usually like to pass in the dash dash, I think it's a disable warnings, I think.",
    "textdich": ""
  },
  {
    "start": 54894.24,
    "end": 54898.16,
    "text": "And so now if I run this, you can see that there's no more warnings. And we just see the",
    "textdich": ""
  },
  {
    "start": 54898.16,
    "end": 54902.56,
    "text": "testing information. So I think that looks a lot cleaner. And then the other thing that I want to",
    "textdich": ""
  },
  {
    "start": 54902.56,
    "end": 54908.96,
    "text": "show you guys is, till now all of our, you know, testing when we've broken a specific function or",
    "textdich": ""
  },
  {
    "start": 54908.96,
    "end": 54914.24,
    "text": "class, we've only had one test fail. And I want to show you what happens when you have multiple",
    "textdich": ""
  },
  {
    "start": 54914.24,
    "end": 54920.0,
    "text": "tests fail. So we go all the way to the top in the test calculations folder, and then maybe I just",
    "textdich": ""
  },
  {
    "start": 54920.0,
    "end": 54925.92,
    "text": "change, you know, the subtract function. So I'll change this to be six, so we know that it's going",
    "textdich": ""
  },
  {
    "start": 54925.92,
    "end": 54932.16,
    "text": "to error out. And then also at the bottom, I'm going to test, change this test right here,",
    "textdich": ""
  },
  {
    "start": 54932.16,
    "end": 54941.92,
    "text": "so it returns 56 instead of 55. And so if we run this, and I'm going to do dash v, so we can see",
    "textdich": ""
  },
  {
    "start": 54941.92,
    "end": 54946.48,
    "text": "verbose, but you don't have to do that. But if you take a look at what happens, you can see that,",
    "textdich": ""
  },
  {
    "start": 54946.48,
    "end": 54952.16,
    "text": "you know, it runs the first three tests, and then the fourth test fails, and then it just continues",
    "textdich": ""
  },
  {
    "start": 54952.16,
    "end": 54955.52,
    "text": "running through all of the other tests, and then it fails on the next one, and then it finishes",
    "textdich": ""
  },
  {
    "start": 54955.52,
    "end": 54960.16,
    "text": "running all of the other tests. So the default behavior is when a test fails, we're going to",
    "textdich": ""
  },
  {
    "start": 54960.16,
    "end": 54964.88,
    "text": "continue running all of the other tests. And this may not be the behavior you want. So maybe you've",
    "textdich": ""
  },
  {
    "start": 54964.88,
    "end": 54969.52,
    "text": "changed your code, and you just want to see if we've broken anything. And so you want your code to",
    "textdich": ""
  },
  {
    "start": 54969.52,
    "end": 54972.48,
    "text": "ideally, you know, run through the test, and the first time it fails, you want it to stop,",
    "textdich": ""
  },
  {
    "start": 54972.48,
    "end": 54976.32,
    "text": "so that you can, you know, then fix that issue and then run through the rest of the tests.",
    "textdich": ""
  },
  {
    "start": 54977.52,
    "end": 54981.84,
    "text": "Afterwards, or, you know, you can manually run it again, because, you know, right now,",
    "textdich": ""
  },
  {
    "start": 54981.84,
    "end": 54987.76,
    "text": "we only have like 1617 tests, so it doesn't take that long. But when you start to write a lot more",
    "textdich": ""
  },
  {
    "start": 54987.76,
    "end": 54992.48,
    "text": "tests, and your code starts to grow, these tests can take, you know, minutes, sometimes more than",
    "textdich": ""
  },
  {
    "start": 54992.48,
    "end": 54996.72,
    "text": "that, depending on, you know, are you using an external API, are you using a database, these all",
    "textdich": ""
  },
  {
    "start": 54996.72,
    "end": 55000.4,
    "text": "add a significant amount of time for your test. And so if you just want to see if you've broken",
    "textdich": ""
  },
  {
    "start": 55000.4,
    "end": 55005.52,
    "text": "anything, you may want pytest to stop on the first failure. So if you ever want pytest to do that,",
    "textdich": ""
  },
  {
    "start": 55005.52,
    "end": 55010.88,
    "text": "all you have to do is you have to pass in the dash x flag. So this will tell pytest to stop",
    "textdich": ""
  },
  {
    "start": 55010.88,
    "end": 55016.08,
    "text": "after the first test fails. So if I run this, you can see that we get passed, passed, passed,",
    "textdich": ""
  },
  {
    "start": 55016.08,
    "end": 55020.64,
    "text": "and then the first test failed, and then we stop and we don't do anything else. And so those are",
    "textdich": ""
  },
  {
    "start": 55020.64,
    "end": 55024.16,
    "text": "just the two flags that I wanted to go over, I don't think we'll really cover any other specific",
    "textdich": ""
  },
  {
    "start": 55024.16,
    "end": 55028.96,
    "text": "flags. I just wanted to go over these two, because they just just happen to be two of the ones that",
    "textdich": ""
  },
  {
    "start": 55028.96,
    "end": 55035.92,
    "text": "I do like to use occasionally. But let's make sure we go ahead and change all of our code back. So I",
    "textdich": ""
  },
  {
    "start": 55035.92,
    "end": 55043.2,
    "text": "think we changed this one, this should be back to five. And this should be changed back to 55.",
    "textdich": ""
  },
  {
    "start": 55043.2,
    "end": 55048.32,
    "text": "And just to make sure let's just run our code once more, just to make sure we didn't break",
    "textdich": ""
  },
  {
    "start": 55048.32,
    "end": 55054.4,
    "text": "anything in, we could see all 16 tests pass. So now that we know how to simulate a request to our",
    "textdich": ""
  },
  {
    "start": 55054.4,
    "end": 55061.44,
    "text": "API, let's create a test for testing the user create functionality. So what we're doing is we're",
    "textdich": ""
  },
  {
    "start": 55061.44,
    "end": 55066.8,
    "text": "going to create a user. And we're going to test this specific route right here where we create a",
    "textdich": ""
  },
  {
    "start": 55066.8,
    "end": 55072.88,
    "text": "user. So let's try this out. We're gonna do the same thing. I'll call this def test underscore,",
    "textdich": ""
  },
  {
    "start": 55072.88,
    "end": 55083.52,
    "text": "create underscore user. And here, I can say res equals client, like we did before. But this time,",
    "textdich": ""
  },
  {
    "start": 55083.52,
    "end": 55093.52,
    "text": "it's going to be a POST request. And the URL, that's going to be slash users. All right. And then",
    "textdich": ""
  },
  {
    "start": 55093.52,
    "end": 55099.36,
    "text": "since we're now sending a request, you know, to create a user, we have to send data in the body.",
    "textdich": ""
  },
  {
    "start": 55099.36,
    "end": 55105.68,
    "text": "So to send data in the body, you say JSON equals, and then you pass in a Python dictionary. So this",
    "textdich": ""
  },
  {
    "start": 55105.68,
    "end": 55111.92,
    "text": "is going to get sent as the body. And if you go back to our specific route, which is right here,",
    "textdich": ""
  },
  {
    "start": 55112.8,
    "end": 55117.36,
    "text": "you can see that we expect the users create schema. So if we take a look at the schemas,",
    "textdich": ""
  },
  {
    "start": 55117.36,
    "end": 55125.36,
    "text": "you can see that somewhere in here, whereas user create, here we go, we expect an email and a",
    "textdich": ""
  },
  {
    "start": 55125.36,
    "end": 55137.68,
    "text": "password. So let's send an email and a password. And so for email, we'll say this is going to be",
    "textdich": ""
  },
  {
    "start": 55137.68,
    "end": 55157.92,
    "text": "hello 123 at gmail.com. And the password is going to be password 123. And just to see that it works,",
    "textdich": ""
  },
  {
    "start": 55157.92,
    "end": 55164.88,
    "text": "let's do a print. And I'll say res dot JSON. And then the test requirements that you know,",
    "textdich": ""
  },
  {
    "start": 55164.88,
    "end": 55168.8,
    "text": "how do we verify that it works? Well, let's start off with something very simple. So we'll say",
    "textdich": ""
  },
  {
    "start": 55168.8,
    "end": 55176.24,
    "text": "assert. And I'll say res dot status code. We know that when we create a user, we expect a 201. And",
    "textdich": ""
  },
  {
    "start": 55176.24,
    "end": 55181.2,
    "text": "we can just verify that by taking a look at the path operation. But I think this should be good.",
    "textdich": ""
  },
  {
    "start": 55181.2,
    "end": 55189.36,
    "text": "And then now if I run this, and I'm going to run just this file. So I'll say test test user.",
    "textdich": ""
  },
  {
    "start": 55189.36,
    "end": 55197.44,
    "text": "And let's see what happens. So we see both of them passed. And how do we verify that? Well,",
    "textdich": ""
  },
  {
    "start": 55198.64,
    "end": 55205.68,
    "text": "I mean, we should see this user in our database, right? So if I go to my PG admin, go to my database,",
    "textdich": ""
  },
  {
    "start": 55206.24,
    "end": 55217.2,
    "text": "and we'll go to our schemas, tables, and go to users, and we'll do a view edit all. All right,",
    "textdich": ""
  },
  {
    "start": 55217.2,
    "end": 55222.72,
    "text": "we can see the Hello 123. So it was successfully created. I'm just going to quickly delete this",
    "textdich": ""
  },
  {
    "start": 55222.72,
    "end": 55228.32,
    "text": "again. Well, actually, let me show you what happens if we don't. I'm actually going to do something",
    "textdich": ""
  },
  {
    "start": 55228.32,
    "end": 55234.56,
    "text": "unique here, I'm going to say, well, actually, let's just do an assert. And I'll say, res dot",
    "textdich": ""
  },
  {
    "start": 55236.08,
    "end": 55245.68,
    "text": "JSON dot get. And we want to get one field just to verify that it's correct. So what's the data",
    "textdich": ""
  },
  {
    "start": 55245.68,
    "end": 55250.72,
    "text": "going to look like when it comes back? Well, we should see a print, but I didn't. That's because",
    "textdich": ""
  },
  {
    "start": 55250.72,
    "end": 55256.8,
    "text": "I forgot to do the dash s flag. But I'm going back to the route, we're going to send the response as",
    "textdich": ""
  },
  {
    "start": 55256.8,
    "end": 55266.48,
    "text": "a user out. So we expected to match this specific this specific model right here. So it should have",
    "textdich": ""
  },
  {
    "start": 55266.48,
    "end": 55275.36,
    "text": "an ID, an email and a created at. So let's add that in there. I expect the email to be",
    "textdich": ""
  },
  {
    "start": 55275.36,
    "end": 55288.4,
    "text": "two equal equal the email that I gave it. And you can really do as many, you know, asserts as you",
    "textdich": ""
  },
  {
    "start": 55288.4,
    "end": 55293.44,
    "text": "want. So you could verify each single property has been set, you can verify that an ID has been set,",
    "textdich": ""
  },
  {
    "start": 55293.44,
    "end": 55297.84,
    "text": "I'm just going to keep it simple, we'll just say just the email, we'll just run that check. And so",
    "textdich": ""
  },
  {
    "start": 55297.84,
    "end": 55308.16,
    "text": "we'll run it again. And I'm going to do the dash s flag as well. All right, and we see that it failed.",
    "textdich": ""
  },
  {
    "start": 55311.52,
    "end": 55315.92,
    "text": "And we can see that it failed because there's a duplicate key violates unique constraint of email.",
    "textdich": ""
  },
  {
    "start": 55315.92,
    "end": 55321.76,
    "text": "And that's because this user was already created. So I can't recreate him. So let me delete this.",
    "textdich": ""
  },
  {
    "start": 55321.76,
    "end": 55329.52,
    "text": "And I don't think I yeah, if I select the number and then go to Oh, no, it doesn't look like I can.",
    "textdich": ""
  },
  {
    "start": 55331.68,
    "end": 55334.8,
    "text": "There we go. Now once I select that number, I can delete this user.",
    "textdich": ""
  },
  {
    "start": 55336.88,
    "end": 55338.32,
    "text": "And then we could save that to database.",
    "textdich": ""
  },
  {
    "start": 55338.32,
    "end": 55353.04,
    "text": "And so now if I run this again, we should see it work. And we can see that both tests pass.",
    "textdich": ""
  },
  {
    "start": 55354.8,
    "end": 55358.8,
    "text": "And we can see that both of our certain statements were checked and validated,",
    "textdich": ""
  },
  {
    "start": 55358.8,
    "end": 55363.44,
    "text": "and they both looked good. But instead of doing it like this, we can even take it one step further.",
    "textdich": ""
  },
  {
    "start": 55363.44,
    "end": 55371.6,
    "text": "Instead, what we can do is I can actually import this user out schema into my test. So I can say,",
    "textdich": ""
  },
  {
    "start": 55372.64,
    "end": 55382.24,
    "text": "from app dot schemas import user out. And then I can remove this print statement.",
    "textdich": ""
  },
  {
    "start": 55382.24,
    "end": 55393.52,
    "text": "And what I can do is here, I can actually use the schemas. Actually, sorry,",
    "textdich": ""
  },
  {
    "start": 55394.24,
    "end": 55397.36,
    "text": "I'm actually going to change this import, I'm going to just import all schemas.",
    "textdich": ""
  },
  {
    "start": 55398.24,
    "end": 55405.92,
    "text": "So say from app, import schemas. And now I can actually create a new",
    "textdich": ""
  },
  {
    "start": 55405.92,
    "end": 55415.12,
    "text": "pedantic model, and I'll say schemas dot user out. So we're going to create a new schema,",
    "textdich": ""
  },
  {
    "start": 55415.12,
    "end": 55422.8,
    "text": "save this as a variable, I'll call this new user. And we can pass in the data that we get back from",
    "textdich": ""
  },
  {
    "start": 55422.8,
    "end": 55430.88,
    "text": "the response, I can say res dot JSON. And remember, we have to actually unpack the dictionary. So it's",
    "textdich": ""
  },
  {
    "start": 55430.88,
    "end": 55436.72,
    "text": "in the right format to create a new user out model. And now this is going to perform a certain level",
    "textdich": ""
  },
  {
    "start": 55436.72,
    "end": 55442.48,
    "text": "of validation. So it's going to confirm, hey, do we have an ID? Do we have an email? Do we have a",
    "textdich": ""
  },
  {
    "start": 55442.48,
    "end": 55447.04,
    "text": "what was the other thing that we needed? And do we have a created app? So it's going to make sure",
    "textdich": ""
  },
  {
    "start": 55447.04,
    "end": 55450.56,
    "text": "it's got these three things, it's not going to check to make sure that it's the right email,",
    "textdich": ""
  },
  {
    "start": 55450.56,
    "end": 55454.16,
    "text": "it's not going to check to see if the right ID, but it's going to check to make sure that at least",
    "textdich": ""
  },
  {
    "start": 55454.16,
    "end": 55458.56,
    "text": "it has these three properties. So it automatically does some of the validation for us. And it'll",
    "textdich": ""
  },
  {
    "start": 55458.56,
    "end": 55462.8,
    "text": "throw a an error if one of those are missing. And if it throws an error, then obviously,",
    "textdich": ""
  },
  {
    "start": 55462.8,
    "end": 55468.08,
    "text": "pytest will consider this test a failure. So by doing this, we've kind of, we've kind of saved",
    "textdich": ""
  },
  {
    "start": 55468.08,
    "end": 55471.36,
    "text": "us a little time. And now I can actually change this instead of doing this, I could say,",
    "textdich": ""
  },
  {
    "start": 55472.16,
    "end": 55479.68,
    "text": "new underscore user dot email equals this value. So now if I run this, hopefully this works.",
    "textdich": ""
  },
  {
    "start": 55479.68,
    "end": 55487.44,
    "text": "And it looks like it failed. And let's quickly see what happened here.",
    "textdich": ""
  },
  {
    "start": 55490.72,
    "end": 55498.56,
    "text": "Oh, once again, I forgot to delete the user beforehand. I will delete him and then try",
    "textdich": ""
  },
  {
    "start": 55498.56,
    "end": 55505.44,
    "text": "this test one more time. And they passed. So I think this is what we're going to do moving",
    "textdich": ""
  },
  {
    "start": 55505.44,
    "end": 55510.56,
    "text": "forward, we're going to make use of our pedantic models to do some of the validation for us",
    "textdich": ""
  },
  {
    "start": 55510.56,
    "end": 55514.8,
    "text": "automatically so that we don't have like, you know, 60 or seven, probably not 60, but we won't have",
    "textdich": ""
  },
  {
    "start": 55514.8,
    "end": 55518.72,
    "text": "510 different assert statements, which you can absolutely do. And you probably do want to, but",
    "textdich": ""
  },
  {
    "start": 55518.72,
    "end": 55522.48,
    "text": "this will remove some of them, because it's at least checking to see if some of them are there.",
    "textdich": ""
  },
  {
    "start": 55523.12,
    "end": 55527.36,
    "text": "So before moving any further, you know, we need to address something important. And that is that",
    "textdich": ""
  },
  {
    "start": 55527.36,
    "end": 55534.48,
    "text": "right now we are using our development database for our tests. And that's not good. I don't want",
    "textdich": ""
  },
  {
    "start": 55534.48,
    "end": 55539.6,
    "text": "to use my development database, I want to create my own separate database to perform testing on",
    "textdich": ""
  },
  {
    "start": 55539.6,
    "end": 55544.72,
    "text": "so that I don't get in the way of development, or staging or any of our production databases,",
    "textdich": ""
  },
  {
    "start": 55544.72,
    "end": 55549.68,
    "text": "I want to create a completely separate database for testing. Right now, when we, you know, import",
    "textdich": ""
  },
  {
    "start": 55549.68,
    "end": 55554.8,
    "text": "our client, right, we're going to be using whatever the database is that we've defined",
    "textdich": ""
  },
  {
    "start": 55555.44,
    "end": 55560.24,
    "text": "in the rest of our app, which is going to be our fast API database within PG admin. And we can see",
    "textdich": ""
  },
  {
    "start": 55560.24,
    "end": 55564.64,
    "text": "that right here. And so that's why I'm having to go in and, you know, make sure that it's created,",
    "textdich": ""
  },
  {
    "start": 55564.64,
    "end": 55570.24,
    "text": "and we've already got some other data which could potentially break our tests. And so I want to make",
    "textdich": ""
  },
  {
    "start": 55570.24,
    "end": 55574.08,
    "text": "sure that we have a completely separate database for testing so that it does not get in the way of",
    "textdich": ""
  },
  {
    "start": 55574.08,
    "end": 55580.24,
    "text": "anything else. So how exactly do we do that? Well, one of the great parts about the way we've set up",
    "textdich": ""
  },
  {
    "start": 55580.24,
    "end": 55585.2,
    "text": "our database is if we actually go to our database.py file, right, you can see that we've actually set",
    "textdich": ""
  },
  {
    "start": 55585.2,
    "end": 55589.84,
    "text": "up a date, a dependency. So when we set up our dependency, you can see we created this function",
    "textdich": ""
  },
  {
    "start": 55589.84,
    "end": 55595.84,
    "text": "called get DB. And this get DB actually returns the session local. So this is what allows us to",
    "textdich": ""
  },
  {
    "start": 55595.84,
    "end": 55601.36,
    "text": "actually, you know, make queries using SQL alchemy. And that comes from this right here,",
    "textdich": ""
  },
  {
    "start": 55601.36,
    "end": 55606.64,
    "text": "from the session maker, where we passed in all of our database connection details. And if we go",
    "textdich": ""
  },
  {
    "start": 55606.64,
    "end": 55610.4,
    "text": "into any one of our routes, it doesn't really matter which one, you can see that we pass in",
    "textdich": ""
  },
  {
    "start": 55610.4,
    "end": 55615.52,
    "text": "the dependency into the route. And the great part about having dependencies is that it's very easy",
    "textdich": ""
  },
  {
    "start": 55615.52,
    "end": 55620.0,
    "text": "to override a dependency in any environment, especially a testing environment, we can say,",
    "textdich": ""
  },
  {
    "start": 55620.0,
    "end": 55624.64,
    "text": "hey, instead of passing in, you know, get DB, we can say, you know, something like,",
    "textdich": ""
  },
  {
    "start": 55625.44,
    "end": 55629.68,
    "text": "get, I don't know, underscore test underscore DB, which is going to be a function that returns a",
    "textdich": ""
  },
  {
    "start": 55629.68,
    "end": 55634.48,
    "text": "test instance of our database instead of our development instance of our database. So I'm",
    "textdich": ""
  },
  {
    "start": 55634.48,
    "end": 55639.68,
    "text": "going to show you guys how we can set that up and how easy that is. So we'll go back to our test",
    "textdich": ""
  },
  {
    "start": 55639.68,
    "end": 55645.92,
    "text": "users. And we're essentially just going to copy all of this right here. So I want you to copy",
    "textdich": ""
  },
  {
    "start": 55645.92,
    "end": 55651.12,
    "text": "this all the way up to the URL. And we'll have to set up some imports. And we'll come back to that",
    "textdich": ""
  },
  {
    "start": 55651.12,
    "end": 55661.36,
    "text": "in a second. So let's create some space. Alright, so we've got all of this, and we need to import",
    "textdich": ""
  },
  {
    "start": 55661.36,
    "end": 55670.72,
    "text": "a few things. So we'll start off by we'll have to import settings. So we'll say from app import.",
    "textdich": ""
  },
  {
    "start": 55672.8,
    "end": 55678.4,
    "text": "Actually, we'll say from app dot config import, I think it's settings. Yep.",
    "textdich": ""
  },
  {
    "start": 55679.2,
    "end": 55683.12,
    "text": "Alright, so we've got that cleared. We then have to import create engine.",
    "textdich": ""
  },
  {
    "start": 55683.12,
    "end": 55692.56,
    "text": "And so we'll go up here and I'll say from SQL alchemy, import, create underscore engine.",
    "textdich": ""
  },
  {
    "start": 55694.64,
    "end": 55698.4,
    "text": "And then we need our session maker as well. And I think if I hover over this,",
    "textdich": ""
  },
  {
    "start": 55698.4,
    "end": 55703.68,
    "text": "can I? Nope, it doesn't look like it'll auto import that for me. So I'll say from SQL alchemy",
    "textdich": ""
  },
  {
    "start": 55703.68,
    "end": 55711.68,
    "text": "dot or m import session maker. All right, looks like we got most of the issues, we still need",
    "textdich": ""
  },
  {
    "start": 55711.68,
    "end": 55722.08,
    "text": "declarative base. And we'll import that. I'll say from SQL alchemy dot ext dot declarative,",
    "textdich": ""
  },
  {
    "start": 55722.88,
    "end": 55727.36,
    "text": "import declarative base. And if you guys don't know where I'm getting this, I'm literally just",
    "textdich": ""
  },
  {
    "start": 55727.36,
    "end": 55732.0,
    "text": "copying this straight from this file. So everything that's here, I'm just you can just copy it as well.",
    "textdich": ""
  },
  {
    "start": 55734.48,
    "end": 55738.4,
    "text": "And if we go down, I think we have everything, right, we no longer have any errors. So we've got",
    "textdich": ""
  },
  {
    "start": 55738.4,
    "end": 55745.04,
    "text": "all of our imports. And so this is the function that returns our session local. So this is what",
    "textdich": ""
  },
  {
    "start": 55745.04,
    "end": 55749.12,
    "text": "allows us to query the database. This is our session object, right? And this is how it's set up",
    "textdich": ""
  },
  {
    "start": 55749.92,
    "end": 55754.08,
    "text": "exactly in the database.py file. So what I'm going to do is I'm going to create another function,",
    "textdich": ""
  },
  {
    "start": 55754.08,
    "end": 55761.76,
    "text": "but this time I call it override underscore, get underscore DB. And this is going to return",
    "textdich": ""
  },
  {
    "start": 55761.76,
    "end": 55768.4,
    "text": "this session local instance. But I'm going to rename this just so I don't get it confused. And",
    "textdich": ""
  },
  {
    "start": 55768.4,
    "end": 55775.12,
    "text": "I'll call this testing session local. And then I'll reference this. All right. And so that means",
    "textdich": ""
  },
  {
    "start": 55775.12,
    "end": 55779.44,
    "text": "right now in our current application, we're referencing the one that we created in our",
    "textdich": ""
  },
  {
    "start": 55779.44,
    "end": 55784.32,
    "text": "database.py file. But the one in our test, we're going to actually make use of this new one right",
    "textdich": ""
  },
  {
    "start": 55784.32,
    "end": 55793.52,
    "text": "here, if we call this override, get DB. So how exactly do we override the database or any dependency",
    "textdich": ""
  },
  {
    "start": 55793.52,
    "end": 55799.92,
    "text": "really? Well, fast API has a section on here. And I think if I search for dependency,",
    "textdich": ""
  },
  {
    "start": 55805.52,
    "end": 55807.2,
    "text": "testing dependencies with overrides.",
    "textdich": ""
  },
  {
    "start": 55807.2,
    "end": 55815.84,
    "text": "Right, to actually set up the override, you just do app dot dependency override. And then you provide",
    "textdich": ""
  },
  {
    "start": 55815.84,
    "end": 55820.4,
    "text": "what you want to override it with. And there's actually a better example. If I go to testing",
    "textdich": ""
  },
  {
    "start": 55820.4,
    "end": 55828.08,
    "text": "database, this will actually show you how to do that. So we've got the override DB, where we've",
    "textdich": ""
  },
  {
    "start": 55828.08,
    "end": 55833.52,
    "text": "created a different session object. And to override it, we just do app dot dependency overrides,",
    "textdich": ""
  },
  {
    "start": 55833.52,
    "end": 55838.72,
    "text": "we pass in what we specify the dependency we want to override, which is anything with get DB,",
    "textdich": ""
  },
  {
    "start": 55838.72,
    "end": 55842.96,
    "text": "and then we want to override it with override underscore get DB. So essentially, all that's",
    "textdich": ""
  },
  {
    "start": 55842.96,
    "end": 55849.2,
    "text": "really doing is in the functions, any of our routes, right, you can see we've got this depends",
    "textdich": ""
  },
  {
    "start": 55849.2,
    "end": 55854.4,
    "text": "get DB. So when we run that command right here, this override, all it's going to do is it's going",
    "textdich": ""
  },
  {
    "start": 55854.4,
    "end": 55860.0,
    "text": "to swap this out with the function that we have right here under test users, called override,",
    "textdich": ""
  },
  {
    "start": 55860.0,
    "end": 55864.96,
    "text": "get DB, which is just going to give a different session object. And this session object can point",
    "textdich": ""
  },
  {
    "start": 55864.96,
    "end": 55869.28,
    "text": "to another Postgres database. That's all we're doing. It's really that simple. That's why we set",
    "textdich": ""
  },
  {
    "start": 55869.28,
    "end": 55874.32,
    "text": "up that, that dependency when we first started configuring our database so that we can easily",
    "textdich": ""
  },
  {
    "start": 55874.32,
    "end": 55879.28,
    "text": "test this during testing, because we can just use the override functionality that's used within a",
    "textdich": ""
  },
  {
    "start": 55879.28,
    "end": 55890.24,
    "text": "fast API. So I'm going to copy this. And right here, I'm going to paste it down here. And I realize",
    "textdich": ""
  },
  {
    "start": 55890.24,
    "end": 55895.04,
    "text": "this I misspelled override. But we do have to import get DB now. So let's import that.",
    "textdich": ""
  },
  {
    "start": 55896.64,
    "end": 55903.04,
    "text": "They'll say from app dot database, import, get underscore DB. And so it's going to swap",
    "textdich": ""
  },
  {
    "start": 55903.04,
    "end": 55908.48,
    "text": "the dependencies out. And since we're still referencing the app object, we're going to pass",
    "textdich": ""
  },
  {
    "start": 55908.48,
    "end": 55913.76,
    "text": "that into test client. And so now, anytime we use this client, it's going to use the new database.",
    "textdich": ""
  },
  {
    "start": 55914.88,
    "end": 55919.76,
    "text": "Now, currently, our database is using the environment variables, which once again,",
    "textdich": ""
  },
  {
    "start": 55919.76,
    "end": 55923.6,
    "text": "is going to point to our development database. So there's a couple of things we can do.",
    "textdich": ""
  },
  {
    "start": 55924.4,
    "end": 55933.76,
    "text": "Since this is testing, we 100% could just hard code our URL, because I mean, it's our testing",
    "textdich": ""
  },
  {
    "start": 55933.76,
    "end": 55937.6,
    "text": "database, who cares if our password and our information is already out there. So we could",
    "textdich": ""
  },
  {
    "start": 55937.6,
    "end": 55943.04,
    "text": "technically do an F string. Actually, we don't even need an F string, I could just say,",
    "textdich": ""
  },
  {
    "start": 55943.04,
    "end": 55949.84,
    "text": "Postgres queue, whoops, there should be a string. Postgres ql colon slash slash,",
    "textdich": ""
  },
  {
    "start": 55949.84,
    "end": 55954.8,
    "text": "then we have the username. Right now for my, for my database, it's just Postgres.",
    "textdich": ""
  },
  {
    "start": 55955.92,
    "end": 55961.44,
    "text": "And then we have the password, which is password 123. Remember, this would technically be for your",
    "textdich": ""
  },
  {
    "start": 55961.44,
    "end": 55967.76,
    "text": "testing database. So it's not technically a problem if you put this in there and hard code it. However,",
    "textdich": ""
  },
  {
    "start": 55967.76,
    "end": 55972.72,
    "text": "you'll see that we could just use the environment variables and make a small tweak. But I'm just",
    "textdich": ""
  },
  {
    "start": 55972.72,
    "end": 55977.92,
    "text": "going to quickly write this out for you guys if you wanted to see it. And then the hosting is",
    "textdich": ""
  },
  {
    "start": 55977.92,
    "end": 55983.52,
    "text": "gonna be localhost ports can be 5432. And then our database name, so we could call this, you know,",
    "textdich": ""
  },
  {
    "start": 55983.52,
    "end": 55987.92,
    "text": "my print, my development database is called fast API, I could call my testing database, maybe fast",
    "textdich": ""
  },
  {
    "start": 55987.92,
    "end": 55991.36,
    "text": "API underscore test. So whatever my project name is, and then underscore test, you can call it",
    "textdich": ""
  },
  {
    "start": 55991.36,
    "end": 55997.36,
    "text": "whatever you want. And so I could just hard code that and then comment this out. Something like",
    "textdich": ""
  },
  {
    "start": 55997.36,
    "end": 56005.68,
    "text": "that, or I could use this same thing, but just do a underscore test here. And so that way, I don't",
    "textdich": ""
  },
  {
    "start": 56005.68,
    "end": 56008.56,
    "text": "have to hard code anything, it's going to actually pull it from the environment variables.",
    "textdich": ""
  },
  {
    "start": 56010.08,
    "end": 56012.96,
    "text": "So whichever method works for you, ultimately, that's all that matters.",
    "textdich": ""
  },
  {
    "start": 56012.96,
    "end": 56020.56,
    "text": "Now, I technically already have a fast API test database. So I'm going to actually delete this",
    "textdich": ""
  },
  {
    "start": 56020.56,
    "end": 56029.36,
    "text": "for now, we'll say delete drop. Alright, so I'm now in, however, your Postgres instance set up,",
    "textdich": ""
  },
  {
    "start": 56029.36,
    "end": 56033.68,
    "text": "but since we're going to be using a database called fast API underscore test, we actually have to",
    "textdich": ""
  },
  {
    "start": 56033.68,
    "end": 56040.64,
    "text": "create one. So I'll say create database. And I'll say fast API underscore test. Okay, so we've got",
    "textdich": ""
  },
  {
    "start": 56040.64,
    "end": 56050.4,
    "text": "our test database created. And we've set up the override. Let's now actually test this out. So",
    "textdich": ""
  },
  {
    "start": 56050.4,
    "end": 56060.16,
    "text": "we're going to do one last thing. And I realize, since we have a brand new database, there's no",
    "textdich": ""
  },
  {
    "start": 56060.16,
    "end": 56068.08,
    "text": "tables, right? If I go down to schemas tables, right, there's nothing there. So we actually have",
    "textdich": ""
  },
  {
    "start": 56068.08,
    "end": 56075.28,
    "text": "to build out our our tables before we actually do anything. So easiest way to do that is just copy",
    "textdich": ""
  },
  {
    "start": 56076.0,
    "end": 56080.88,
    "text": "was my main file, here we go, this command right here. So this will tell SQL coming to build all",
    "textdich": ""
  },
  {
    "start": 56080.88,
    "end": 56085.44,
    "text": "the tables based off of the models, we could use alembic as well. So I'll show you guys how we can",
    "textdich": ""
  },
  {
    "start": 56085.44,
    "end": 56090.56,
    "text": "kind of get alembic set up in our testing database so that it actually performs the migrations",
    "textdich": ""
  },
  {
    "start": 56090.56,
    "end": 56094.0,
    "text": "before test. But for now, we're going to keep things simple. And we're going to use this.",
    "textdich": ""
  },
  {
    "start": 56094.0,
    "end": 56102.72,
    "text": "And so I'll just paste it right there. And we can remove this models, I don't know why that's there.",
    "textdich": ""
  },
  {
    "start": 56102.72,
    "end": 56107.68,
    "text": "And you can see that we get a warning right here. So we don't have anything based. So we actually",
    "textdich": ""
  },
  {
    "start": 56107.68,
    "end": 56115.6,
    "text": "have to import that from our database file. So I'll say from app database, import base.",
    "textdich": ""
  },
  {
    "start": 56115.6,
    "end": 56123.68,
    "text": "And I realized we actually don't need this line right here. So we'll remove that. All right,",
    "textdich": ""
  },
  {
    "start": 56123.68,
    "end": 56130.24,
    "text": "so now our test database is completely set up. And when we when we actually run our first test,",
    "textdich": ""
  },
  {
    "start": 56130.24,
    "end": 56134.32,
    "text": "it's going to run this right here, which should create all of our tables for us.",
    "textdich": ""
  },
  {
    "start": 56135.76,
    "end": 56140.0,
    "text": "So let's take a look at our test create user. Everything should be good. We shouldn't have to",
    "textdich": ""
  },
  {
    "start": 56140.0,
    "end": 56147.44,
    "text": "touch anything. And our URL should point to fast API underscore test. So let's try this out. And",
    "textdich": ""
  },
  {
    "start": 56147.44,
    "end": 56154.08,
    "text": "I'm just going to refresh this. And yep, we shouldn't have any tables. Good. Perfect. And",
    "textdich": ""
  },
  {
    "start": 56154.08,
    "end": 56163.2,
    "text": "let's run this now. But let's run just the test users. All right, and both of them passed. So",
    "textdich": ""
  },
  {
    "start": 56163.2,
    "end": 56168.64,
    "text": "how can we verify both of them passed? Well, let's go to our tables, I'm going to refresh this,",
    "textdich": ""
  },
  {
    "start": 56169.28,
    "end": 56173.6,
    "text": "we can now see we've got all three tables, right. And that's because we ran this specific well,",
    "textdich": ""
  },
  {
    "start": 56173.6,
    "end": 56180.72,
    "text": "I'll document this command right here. And if I do a users, and then where is it? If you edit a",
    "textdich": ""
  },
  {
    "start": 56180.72,
    "end": 56187.2,
    "text": "all data, all rows, right, we can see that our user was successfully created. So we have now",
    "textdich": ""
  },
  {
    "start": 56187.2,
    "end": 56192.96,
    "text": "gotten our test database set up so that we no longer interfere with our development database.",
    "textdich": ""
  },
  {
    "start": 56192.96,
    "end": 56196.72,
    "text": "And keep in mind, right, it does your test database doesn't even have to run on your local",
    "textdich": ""
  },
  {
    "start": 56196.72,
    "end": 56201.04,
    "text": "machine, you can run it anywhere, you can run in a Docker container, you can run on a remote machine,",
    "textdich": ""
  },
  {
    "start": 56201.04,
    "end": 56205.92,
    "text": "you pass in the details of your test database, and then your testing environment will handle the",
    "textdich": ""
  },
  {
    "start": 56205.92,
    "end": 56211.52,
    "text": "rest. So now that we've got our test database, and we've successfully ran our tests, if we run our",
    "textdich": ""
  },
  {
    "start": 56211.52,
    "end": 56216.8,
    "text": "test one more time, take a look at what happens. We get an error, right? And we get an error,",
    "textdich": ""
  },
  {
    "start": 56216.8,
    "end": 56221.44,
    "text": "because we saw this before in our development database, we already have a user. So we get this",
    "textdich": ""
  },
  {
    "start": 56221.44,
    "end": 56226.08,
    "text": "duplicate key violates unique constraint, because this user already exists. So when we run this,",
    "textdich": ""
  },
  {
    "start": 56226.08,
    "end": 56231.04,
    "text": "again, we try to create a new user with the same exact email. And this obviously causes things to",
    "textdich": ""
  },
  {
    "start": 56231.04,
    "end": 56235.76,
    "text": "break. And so how do we get around this limitation, right? I want to be able to run my test as many",
    "textdich": ""
  },
  {
    "start": 56235.76,
    "end": 56240.4,
    "text": "times as possible. And I wanted to kind of start out with the clean slate. Well, we can make use",
    "textdich": ""
  },
  {
    "start": 56240.4,
    "end": 56245.2,
    "text": "of fixtures. So let's take a look at our fixture. And if you already forgot what a fixture was,",
    "textdich": ""
  },
  {
    "start": 56245.2,
    "end": 56251.2,
    "text": "it's just a function that runs before your test runs. I'm going to create a fixture. And I'm going",
    "textdich": ""
  },
  {
    "start": 56251.2,
    "end": 56256.32,
    "text": "to have to do we already import pytest? We did not import pytest. So let me import that in here.",
    "textdich": ""
  },
  {
    "start": 56256.96,
    "end": 56266.16,
    "text": "We'll say import pytest. And I'm going to say, I'm going to create my fixture.",
    "textdich": ""
  },
  {
    "start": 56271.2,
    "end": 56276.64,
    "text": "Call this whatever you want. I'm going to call this client. So this is actually going to return",
    "textdich": ""
  },
  {
    "start": 56276.64,
    "end": 56280.24,
    "text": "is actually going to return our client, right? This is our client object right here,",
    "textdich": ""
  },
  {
    "start": 56280.24,
    "end": 56284.32,
    "text": "which is the test client, which is what we use to actually generate the request. So I'm going to",
    "textdich": ""
  },
  {
    "start": 56284.32,
    "end": 56291.2,
    "text": "call this def client. And what this is going to do is I'm going to remove this line right here",
    "textdich": ""
  },
  {
    "start": 56291.2,
    "end": 56299.68,
    "text": "and just copy this. And I'm going to say return this. And we can just remove this line at that",
    "textdich": ""
  },
  {
    "start": 56299.68,
    "end": 56305.68,
    "text": "point. So this is going to return our test client instance. And so now to get this to actually work,",
    "textdich": ""
  },
  {
    "start": 56305.68,
    "end": 56314.08,
    "text": "I'm going to pass in our client. And so now this client object references the client that we get",
    "textdich": ""
  },
  {
    "start": 56314.08,
    "end": 56319.76,
    "text": "from this fixture. And we'll do the same thing here. So what exactly has this solved? Right now,",
    "textdich": ""
  },
  {
    "start": 56319.76,
    "end": 56324.32,
    "text": "it hasn't really done anything for us, right? Our code is going to work exactly the same. You know,",
    "textdich": ""
  },
  {
    "start": 56324.32,
    "end": 56330.88,
    "text": "if I save things and run it again, right, same exact issue. And obviously, I can go in,",
    "textdich": ""
  },
  {
    "start": 56330.88,
    "end": 56341.36,
    "text": "and I can delete this. And then run this, right, it's going to work just fine. But it is nice,",
    "textdich": ""
  },
  {
    "start": 56341.36,
    "end": 56347.76,
    "text": "because we now have this function that runs before each one of these tests that gives us our testing",
    "textdich": ""
  },
  {
    "start": 56347.76,
    "end": 56353.92,
    "text": "client. And what's even better is I can actually change this a little bit. Because I can change",
    "textdich": ""
  },
  {
    "start": 56353.92,
    "end": 56359.52,
    "text": "this to be a yield. Right, when you change the yield, what it does is it gives us a little bit",
    "textdich": ""
  },
  {
    "start": 56359.52,
    "end": 56370.8,
    "text": "more flexibility, because now we can, you know, run our code before we return our test client.",
    "textdich": ""
  },
  {
    "start": 56371.76,
    "end": 56380.96,
    "text": "And after the yield, we can then run our code. Actually, this should be run our code before we",
    "textdich": ""
  },
  {
    "start": 56380.96,
    "end": 56389.2,
    "text": "run our test. And then this is going to run our code after our test finishes. So now we can put",
    "textdich": ""
  },
  {
    "start": 56389.2,
    "end": 56394.64,
    "text": "in logic for you know, what should we run before our code runs or before our test runs, we then",
    "textdich": ""
  },
  {
    "start": 56395.28,
    "end": 56398.4,
    "text": "yield, which is the same thing as return, it's going to return our test client.",
    "textdich": ""
  },
  {
    "start": 56398.96,
    "end": 56407.84,
    "text": "And then we can run some code after the test finishes. So what we can do is before our code",
    "textdich": ""
  },
  {
    "start": 56407.84,
    "end": 56419.44,
    "text": "runs, I can copy this line right here. So before our code runs, I can create my tables. And then",
    "textdich": ""
  },
  {
    "start": 56419.44,
    "end": 56426.24,
    "text": "after my code runs, I can drop my tables. If you want to drop a table, you just run based on metadata",
    "textdich": ""
  },
  {
    "start": 56426.24,
    "end": 56433.52,
    "text": "dot drop all instead of create all, and it's going to drop these tables. And so now every single time",
    "textdich": ""
  },
  {
    "start": 56433.52,
    "end": 56437.04,
    "text": "my tests run, I'm essentially going to be starting out with the clean slate, it's going to drop all",
    "textdich": ""
  },
  {
    "start": 56437.04,
    "end": 56440.48,
    "text": "of our tables, all the data in each table, it's going to return the test client, we're going to",
    "textdich": ""
  },
  {
    "start": 56440.48,
    "end": 56447.12,
    "text": "run the test, and then sorry, it's, I messed that up. So when we when we finish a test, we're going",
    "textdich": ""
  },
  {
    "start": 56447.12,
    "end": 56451.52,
    "text": "to drop all of our tables, delete our data, then the next time the test runs, what's going to happen",
    "textdich": ""
  },
  {
    "start": 56451.52,
    "end": 56454.8,
    "text": "is we're going to create all the tables again, because there's no tables, we're then going to",
    "textdich": ""
  },
  {
    "start": 56454.8,
    "end": 56458.8,
    "text": "run the test. And then just like we did before, we're going to then drop all of our tables again.",
    "textdich": ""
  },
  {
    "start": 56459.92,
    "end": 56463.12,
    "text": "So what I'm going to do is, first of all, I'm going to manually drop these.",
    "textdich": ""
  },
  {
    "start": 56463.12,
    "end": 56469.76,
    "text": "And I'm going to have to drop votes first, or that's gonna throw some foreign key errors. And",
    "textdich": ""
  },
  {
    "start": 56469.76,
    "end": 56478.72,
    "text": "then we'll drop posts. And then users. Okay, so now everything should work. And I'm actually going",
    "textdich": ""
  },
  {
    "start": 56478.72,
    "end": 56483.36,
    "text": "to test this out. So once again, just to reiterate, we're going to create our tables, because we don't",
    "textdich": ""
  },
  {
    "start": 56483.36,
    "end": 56488.48,
    "text": "have any, we're going to then run our test, right yield just returns our test client to our create",
    "textdich": ""
  },
  {
    "start": 56488.48,
    "end": 56493.36,
    "text": "user. And then we can, you know, perform all this logic. After that's done, we'll then drop the",
    "textdich": ""
  },
  {
    "start": 56493.36,
    "end": 56500.32,
    "text": "tables again. So we start from scratch the next time around. So let's try this out. All right,",
    "textdich": ""
  },
  {
    "start": 56500.32,
    "end": 56507.36,
    "text": "everything's worked. And if I actually go back to here and hit refresh tables, you can see there's",
    "textdich": ""
  },
  {
    "start": 56507.36,
    "end": 56513.36,
    "text": "no tables, because we dropped the tables after we're done. And if I run this again, it works,",
    "textdich": ""
  },
  {
    "start": 56513.36,
    "end": 56516.56,
    "text": "we can run this as many times as we want, we don't have to worry about duplicate users,",
    "textdich": ""
  },
  {
    "start": 56516.56,
    "end": 56521.36,
    "text": "because we're clearing out our database. And there's one more thing that you can do as well.",
    "textdich": ""
  },
  {
    "start": 56521.36,
    "end": 56531.2,
    "text": "If you wanted to, we could actually take this drop all and move it up here. So what's the what's the",
    "textdich": ""
  },
  {
    "start": 56531.2,
    "end": 56535.12,
    "text": "benefit of doing like this? Or why would you want to do it like this? Well, the nice part about this",
    "textdich": ""
  },
  {
    "start": 56535.12,
    "end": 56538.88,
    "text": "is right, it's going to clear out anything we had previously, it's going to create our tables, and",
    "textdich": ""
  },
  {
    "start": 56538.88,
    "end": 56543.76,
    "text": "then it's going to run our test. And then the next test that we run, we're once again going to clear",
    "textdich": ""
  },
  {
    "start": 56543.76,
    "end": 56548.8,
    "text": "out our table. Yeah, we're going to clear it out. And then we're going to build our new tables again.",
    "textdich": ""
  },
  {
    "start": 56549.68,
    "end": 56555.68,
    "text": "So this way, if you if your test fails, you can, you know, pass in the dash, you know, x flag to",
    "textdich": ""
  },
  {
    "start": 56555.68,
    "end": 56558.88,
    "text": "stop after it fails. And what's going to happen is it's going to keep all your tables and all the",
    "textdich": ""
  },
  {
    "start": 56558.88,
    "end": 56563.68,
    "text": "data. So you can see what was the current state of your database, when the test failed, so that",
    "textdich": ""
  },
  {
    "start": 56563.68,
    "end": 56567.6,
    "text": "you can, you know, ideally have a little bit of better idea of what's happening, troubleshoot a",
    "textdich": ""
  },
  {
    "start": 56567.6,
    "end": 56571.68,
    "text": "little bit more, because you have access to your, to your tables. Whereas if it's if this is down",
    "textdich": ""
  },
  {
    "start": 56571.68,
    "end": 56575.92,
    "text": "here, right, it's just going to delete the tables after you're done, you can't even see it. So it's",
    "textdich": ""
  },
  {
    "start": 56575.92,
    "end": 56580.32,
    "text": "a matter of personal preference. But I like to keep the tables after it's done. So that you know,",
    "textdich": ""
  },
  {
    "start": 56580.32,
    "end": 56584.96,
    "text": "if I do want to stop it and just kind of poke around and take a look, then I can. And if you",
    "textdich": ""
  },
  {
    "start": 56584.96,
    "end": 56591.92,
    "text": "guys don't want to use SQL alchemy, you can do the same thing with alembic, right, I can, I can",
    "textdich": ""
  },
  {
    "start": 56591.92,
    "end": 56600.48,
    "text": "import, you know, alembic dot config. Actually, it would I think the technically the import is from",
    "textdich": ""
  },
  {
    "start": 56600.48,
    "end": 56607.44,
    "text": "alembic dot config, import config. Sorry, not that. Nope, nope, it's a from alembic import command.",
    "textdich": ""
  },
  {
    "start": 56608.16,
    "end": 56614.4,
    "text": "So what we can theoretically do is, in here, instead of using these, we could say something like,",
    "textdich": ""
  },
  {
    "start": 56615.6,
    "end": 56623.12,
    "text": "I think it's command dot upgrade. So you can upgrade. And then you can go up upgrade to,",
    "textdich": ""
  },
  {
    "start": 56623.12,
    "end": 56627.68,
    "text": "I think, head, right. So this will build out all the tables for you. And then after you're done,",
    "textdich": ""
  },
  {
    "start": 56627.68,
    "end": 56634.0,
    "text": "you could then go in and say, command dot downgrade to base or something, right? You'd",
    "textdich": ""
  },
  {
    "start": 56634.0,
    "end": 56638.24,
    "text": "have to make sure you set up alembic with all of the right environment variables and things like",
    "textdich": ""
  },
  {
    "start": 56638.24,
    "end": 56643.04,
    "text": "that. But that's all you would have to do if you didn't want to use SQL alchemy's built in",
    "textdich": ""
  },
  {
    "start": 56643.04,
    "end": 56648.08,
    "text": "functionality. So I'm going to just delete that just to keep things simple. Now, we're going to",
    "textdich": ""
  },
  {
    "start": 56648.08,
    "end": 56652.08,
    "text": "let SQL alchemy build the tables for us moving forward, just because it's a little bit quicker",
    "textdich": ""
  },
  {
    "start": 56652.08,
    "end": 56658.0,
    "text": "than having to, you know, build all of your revisions and things like that. So one of the cool",
    "textdich": ""
  },
  {
    "start": 56658.0,
    "end": 56662.96,
    "text": "things with fixtures is that we can actually configure a fixture to be dependent on another",
    "textdich": ""
  },
  {
    "start": 56662.96,
    "end": 56667.76,
    "text": "fixture. So we can essentially pass one fixture into an argument of another fixture. And the reason",
    "textdich": ""
  },
  {
    "start": 56667.76,
    "end": 56672.88,
    "text": "why I want to do this is I want to have one fixture that returns my database object. So if I want to",
    "textdich": ""
  },
  {
    "start": 56672.88,
    "end": 56678.16,
    "text": "ever manipulate data directly, and I want another fixture that returns my client, so this, this one",
    "textdich": ""
  },
  {
    "start": 56678.16,
    "end": 56683.36,
    "text": "is returning our client. So I want that. But I also want another one that returns just our database",
    "textdich": ""
  },
  {
    "start": 56683.36,
    "end": 56688.56,
    "text": "object. So what I'm going to do is I'm actually going to create a new fixture. I'll say pytest",
    "textdich": ""
  },
  {
    "start": 56688.56,
    "end": 56693.28,
    "text": "dot fixture. And we can call this whatever you want, you can call it, you know, like DB or session,",
    "textdich": ""
  },
  {
    "start": 56693.28,
    "end": 56699.36,
    "text": "I'm just gonna call it session. And I'm actually going to move the logic of deleting and creating",
    "textdich": ""
  },
  {
    "start": 56699.36,
    "end": 56705.12,
    "text": "our tables up to here, because this is kind of handling all the logic for the database. And you",
    "textdich": ""
  },
  {
    "start": 56705.12,
    "end": 56709.12,
    "text": "see all of this override functionality, what I'm actually going to do is I'm going to just copy",
    "textdich": ""
  },
  {
    "start": 56709.12,
    "end": 56720.8,
    "text": "this section right here. And paste it into here. Alright, so this session fixture is going to",
    "textdich": ""
  },
  {
    "start": 56720.8,
    "end": 56726.64,
    "text": "yield the database object. So the database object that we used to query things. And what I can do",
    "textdich": ""
  },
  {
    "start": 56726.64,
    "end": 56734.16,
    "text": "now is I can pass in session, the session fixture into my client fixture. And so by doing it like",
    "textdich": ""
  },
  {
    "start": 56734.16,
    "end": 56739.6,
    "text": "this, what's going to happen is any time I go to one of my tests, and I pass in the client fixture",
    "textdich": ""
  },
  {
    "start": 56739.6,
    "end": 56745.12,
    "text": "as a essentially as a dependency, it's going to call this one. And the client fixture will actually",
    "textdich": ""
  },
  {
    "start": 56745.12,
    "end": 56750.56,
    "text": "call the session fixture before it runs. So it's intelligent to understand that a requirement for",
    "textdich": ""
  },
  {
    "start": 56750.56,
    "end": 56754.48,
    "text": "the client fixture is the session fixture. So we're going to run all this code, it's going to return",
    "textdich": ""
  },
  {
    "start": 56754.48,
    "end": 56759.52,
    "text": "the DB object, which is going to be passed into client as session. And then here we can perform",
    "textdich": ""
  },
  {
    "start": 56759.52,
    "end": 56767.2,
    "text": "all the logically that we normally would. And I'm going to once again, copy this override DB right",
    "textdich": ""
  },
  {
    "start": 56767.2,
    "end": 56778.72,
    "text": "here. And we can remove this. And we can remove that. No, actually, sorry, I didn't mean to remove",
    "textdich": ""
  },
  {
    "start": 56778.72,
    "end": 56788.32,
    "text": "that. Just space these out a little bit. So it's part of the override get DB function. And here",
    "textdich": ""
  },
  {
    "start": 56788.32,
    "end": 56793.12,
    "text": "instead of yielding DB, since there's no DB, we're going to yield session, which is the DB. So we'll",
    "textdich": ""
  },
  {
    "start": 56793.12,
    "end": 56807.12,
    "text": "say session. And then session dot close. And I'm going to copy this line right here. Do the override",
    "textdich": ""
  },
  {
    "start": 56807.12,
    "end": 56815.84,
    "text": "right here. And then we return a brand new test client. Okay, and the benefit of this is that not",
    "textdich": ""
  },
  {
    "start": 56815.84,
    "end": 56822.56,
    "text": "only do we get access to the client, if we wanted to, we can also get access to the database as well.",
    "textdich": ""
  },
  {
    "start": 56822.56,
    "end": 56828.24,
    "text": "So I could say session. And then I can go in here and I can make queries like session dot query,",
    "textdich": ""
  },
  {
    "start": 56828.24,
    "end": 56833.6,
    "text": "you know, models dot post, blah, right? So now I have access to the database object as well. And",
    "textdich": ""
  },
  {
    "start": 56833.6,
    "end": 56839.68,
    "text": "so I can make queries and I have access to the client. But if I call just the client, remember,",
    "textdich": ""
  },
  {
    "start": 56839.68,
    "end": 56845.36,
    "text": "the session database is a input argument into the client fixture. So the session will always run",
    "textdich": ""
  },
  {
    "start": 56845.36,
    "end": 56849.84,
    "text": "first. And then client will run because we're calling it right here. And then we just moved",
    "textdich": ""
  },
  {
    "start": 56849.84,
    "end": 56854.24,
    "text": "the override get DB function into here as well as the override right here. And then as usual,",
    "textdich": ""
  },
  {
    "start": 56854.24,
    "end": 56857.92,
    "text": "we return the test client. So let's make sure we didn't break anything. Let's test out our code.",
    "textdich": ""
  },
  {
    "start": 56858.56,
    "end": 56860.96,
    "text": "And something's happening with my terminal. So let me open a new one.",
    "textdich": ""
  },
  {
    "start": 56862.32,
    "end": 56864.32,
    "text": "So let's try this again. I'm just going to do py test,",
    "textdich": ""
  },
  {
    "start": 56865.36,
    "end": 56870.08,
    "text": "test slash and then test underscore users. Nope, test calculations, users.",
    "textdich": ""
  },
  {
    "start": 56870.08,
    "end": 56878.48,
    "text": "All right, and to pass so perfect. Looks like we didn't break anything. And we've got a much nicer",
    "textdich": ""
  },
  {
    "start": 56878.48,
    "end": 56883.2,
    "text": "way of setting up our code, we can actually remove this override that's not within a fixture,",
    "textdich": ""
  },
  {
    "start": 56883.2,
    "end": 56887.84,
    "text": "we no longer need that. And we no longer need to create all right here outside of any of the",
    "textdich": ""
  },
  {
    "start": 56887.84,
    "end": 56893.68,
    "text": "fixtures, because we're doing it all within the fixtures now. And once again, I just want to make",
    "textdich": ""
  },
  {
    "start": 56893.68,
    "end": 56899.84,
    "text": "sure I didn't break anything. So let's test that out. And we can see to have passed perfect. All",
    "textdich": ""
  },
  {
    "start": 56899.84,
    "end": 56904.8,
    "text": "right. So right now, our test users file is a little bit cluttered with all of this database",
    "textdich": ""
  },
  {
    "start": 56904.8,
    "end": 56909.92,
    "text": "information. And I would like to move all of our database specific code to another file.",
    "textdich": ""
  },
  {
    "start": 56909.92,
    "end": 56914.72,
    "text": "So under our test folder, I'm going to create a new file, and we can just call this database.py.",
    "textdich": ""
  },
  {
    "start": 56916.32,
    "end": 56921.28,
    "text": "And I'm going to essentially move all of my database code to that file. And that includes",
    "textdich": ""
  },
  {
    "start": 56921.28,
    "end": 56928.08,
    "text": "the fixtures as well. So these two fixtures, all of this, actually everything, we don't need any of",
    "textdich": ""
  },
  {
    "start": 56928.08,
    "end": 56935.68,
    "text": "this in our test users file. And we can just paste it into here. Now this is going to break things",
    "textdich": ""
  },
  {
    "start": 56935.68,
    "end": 56940.96,
    "text": "because obviously, it has no idea what scheme Okay, well, actually, before we do that, we do need",
    "textdich": ""
  },
  {
    "start": 56940.96,
    "end": 56949.04,
    "text": "to have schemas in here. So let me find where schemas is, and we'll just cut that out. But the",
    "textdich": ""
  },
  {
    "start": 56949.04,
    "end": 56954.64,
    "text": "other issue is, is that we no longer have access to the client fixture. So we have to import that",
    "textdich": ""
  },
  {
    "start": 56954.64,
    "end": 56964.96,
    "text": "so I'll do from current directory database import was a client, I think it's client. Yep. So now we",
    "textdich": ""
  },
  {
    "start": 56964.96,
    "end": 56971.76,
    "text": "have client. And remember, we don't need to import. Actually, we may need to import session,",
    "textdich": ""
  },
  {
    "start": 56971.76,
    "end": 56979.2,
    "text": "let's just double check to see if this causes any issues. So let me save everything.",
    "textdich": ""
  },
  {
    "start": 56979.2,
    "end": 56984.16,
    "text": "And let's test this out. Let's see if this works.",
    "textdich": ""
  },
  {
    "start": 56988.96,
    "end": 56994.24,
    "text": "Looks like we got two errors. Yep. And if you take a look at the errors, it says the session",
    "textdich": ""
  },
  {
    "start": 56994.24,
    "end": 57002.4,
    "text": "fixture is not found. So we actually have to import the session fixture from this file,",
    "textdich": ""
  },
  {
    "start": 57002.4,
    "end": 57007.76,
    "text": "even though we don't actually call session in here, because client is dependent on session,",
    "textdich": ""
  },
  {
    "start": 57007.76,
    "end": 57013.28,
    "text": "because client is ultimately calling session, we need to make sure that session is also imported.",
    "textdich": ""
  },
  {
    "start": 57013.28,
    "end": 57020.0,
    "text": "So we have to do session here as well. And so now I think this should fix our issue.",
    "textdich": ""
  },
  {
    "start": 57024.24,
    "end": 57028.48,
    "text": "Now, if we run this, yep, both tests have successfully passed. And if you actually take",
    "textdich": ""
  },
  {
    "start": 57028.48,
    "end": 57032.64,
    "text": "a look at our test file, you can see our test file is a lot cleaner, it's really just got our",
    "textdich": ""
  },
  {
    "start": 57032.64,
    "end": 57037.92,
    "text": "two tests and a couple of imports. And before we move on any further, there's one thing I want to",
    "textdich": ""
  },
  {
    "start": 57037.92,
    "end": 57042.48,
    "text": "point out. And I ran into this issue when I was, you know, run doing a dry run through my code.",
    "textdich": ""
  },
  {
    "start": 57043.12,
    "end": 57047.92,
    "text": "If you actually take a look at your routers, and we'll go to since we're taking a look at test,",
    "textdich": ""
  },
  {
    "start": 57047.92,
    "end": 57052.56,
    "text": "create user, this is going to be this slash users. So we go to users and then create user,",
    "textdich": ""
  },
  {
    "start": 57052.56,
    "end": 57057.6,
    "text": "right, you can see that the prefix is slash users. So the route you want to go to is slash users.",
    "textdich": ""
  },
  {
    "start": 57057.6,
    "end": 57063.04,
    "text": "And then you can see that we have to append whatever is here. So here it's appending slash.",
    "textdich": ""
  },
  {
    "start": 57063.04,
    "end": 57069.68,
    "text": "Now, the way that pytest works is that or actually the way that anything works is that if you actually",
    "textdich": ""
  },
  {
    "start": 57069.68,
    "end": 57074.72,
    "text": "send a request to slash users, it's a little bit different than slash users slash. And I'm actually",
    "textdich": ""
  },
  {
    "start": 57074.72,
    "end": 57081.76,
    "text": "going to show you what happens when we do that. So I'm going to, first of all, open up a UV coin set.",
    "textdich": ""
  },
  {
    "start": 57081.76,
    "end": 57090.48,
    "text": "So I've started, I've started out my API. And if we go to create user, here, I'm going to users and",
    "textdich": ""
  },
  {
    "start": 57090.48,
    "end": 57095.6,
    "text": "not users slash, right? I'm not doing slash, I'm doing slash user, I'm just doing users, which is",
    "textdich": ""
  },
  {
    "start": 57096.8,
    "end": 57104.72,
    "text": "where did it go? Here? Where did I put my the things I just typed? Let's",
    "textdich": ""
  },
  {
    "start": 57106.56,
    "end": 57110.08,
    "text": "Yeah, here. So what we're doing is we're sending a request to this one,",
    "textdich": ""
  },
  {
    "start": 57110.08,
    "end": 57113.36,
    "text": "not the one above it, because the other one above it has a slash at the end,",
    "textdich": ""
  },
  {
    "start": 57113.36,
    "end": 57118.96,
    "text": "we don't have that trailing slash. So if I create a test user, without that trailing slash,",
    "textdich": ""
  },
  {
    "start": 57118.96,
    "end": 57126.0,
    "text": "hit send. Take a look at what happens in the logs, it says that when we get a request to slash users,",
    "textdich": ""
  },
  {
    "start": 57126.0,
    "end": 57131.52,
    "text": "we're going to send a 307 redirect to slash user slash, because technically the routes on slash",
    "textdich": ""
  },
  {
    "start": 57131.52,
    "end": 57137.52,
    "text": "users slash, and fast API is intelligent enough to actually send the redirect to here. However,",
    "textdich": ""
  },
  {
    "start": 57137.52,
    "end": 57143.44,
    "text": "this creates an issue with our testing. Because if I just do slash, what's going to happen is when",
    "textdich": ""
  },
  {
    "start": 57143.44,
    "end": 57150.32,
    "text": "I do this res dot status code, check, it's going to check for 307 and not the final 207 that the",
    "textdich": ""
  },
  {
    "start": 57150.32,
    "end": 57156.64,
    "text": "final 201. And I could show that to you guys. So let me go down here. We'll run our test real quick.",
    "textdich": ""
  },
  {
    "start": 57158.56,
    "end": 57160.8,
    "text": "And you'll see that it fails. And it fails because",
    "textdich": ""
  },
  {
    "start": 57160.8,
    "end": 57171.36,
    "text": "well, there's a couple of issues, it fails, it's it says it fails because our validation for a",
    "textdich": ""
  },
  {
    "start": 57171.36,
    "end": 57175.84,
    "text": "schema failed. But I'm going to skip that and comment that out. And I'll comment this line up,",
    "textdich": ""
  },
  {
    "start": 57175.84,
    "end": 57180.4,
    "text": "I just want to take a look at the status code. Because obviously, if there's a redirect,",
    "textdich": ""
  },
  {
    "start": 57180.4,
    "end": 57186.56,
    "text": "there's no information in there. And you can see that this fails because the response code is 307.",
    "textdich": ""
  },
  {
    "start": 57186.56,
    "end": 57191.28,
    "text": "So that's why you want to make sure you add that trailing slasher, then you'll run into some issues.",
    "textdich": ""
  },
  {
    "start": 57191.92,
    "end": 57197.36,
    "text": "So we've got our create user test pretty much done. You can feel free to customize it however",
    "textdich": ""
  },
  {
    "start": 57197.36,
    "end": 57200.8,
    "text": "you want. If you want to add a few extra assert statements, feel free to do that. But we're going",
    "textdich": ""
  },
  {
    "start": 57200.8,
    "end": 57205.84,
    "text": "to move on to login. So let's actually handle setting up the login. So I'm going to do def",
    "textdich": ""
  },
  {
    "start": 57206.56,
    "end": 57214.4,
    "text": "test underscore login, underscore user. All right. And this test is going to be dependent on the",
    "textdich": ""
  },
  {
    "start": 57214.4,
    "end": 57217.52,
    "text": "client fixture, because we need to be able to send a request. So I'm going to pass in client.",
    "textdich": ""
  },
  {
    "start": 57218.32,
    "end": 57223.04,
    "text": "And I'm actually going to copy this line right here. We'll change it, of course, but",
    "textdich": ""
  },
  {
    "start": 57224.08,
    "end": 57231.12,
    "text": "all right. And so we're going to this is going to go to slash login. And there's no trailing slash",
    "textdich": ""
  },
  {
    "start": 57231.12,
    "end": 57235.84,
    "text": "on this one, just because if you actually look at our specific route, for login, I think it's under",
    "textdich": ""
  },
  {
    "start": 57235.84,
    "end": 57240.72,
    "text": "auth.py. You can see there's no prefix here, it's just slash login. So we don't need the trailing",
    "textdich": ""
  },
  {
    "start": 57240.72,
    "end": 57244.8,
    "text": "slash on this one, you just have to figure out how you set yours up and make sure it matches accordingly.",
    "textdich": ""
  },
  {
    "start": 57247.28,
    "end": 57254.8,
    "text": "We do slash login. But in this case, we don't want to send this data in the body. Instead,",
    "textdich": ""
  },
  {
    "start": 57254.8,
    "end": 57259.52,
    "text": "remember, if you go to postman, and you go to login user, we don't send it in the well,",
    "textdich": ""
  },
  {
    "start": 57259.52,
    "end": 57262.32,
    "text": "we do send it in the body. But instead of using the normal,",
    "textdich": ""
  },
  {
    "start": 57264.72,
    "end": 57267.68,
    "text": "normal JSON format, we have to send it as form data, remember.",
    "textdich": ""
  },
  {
    "start": 57267.68,
    "end": 57276.88,
    "text": "And so to change this to be form data, you just change JSON to be data. And we've got the same",
    "textdich": ""
  },
  {
    "start": 57276.88,
    "end": 57286.48,
    "text": "credentials. So this should work. And let's just quickly just do a assert. And what is a login",
    "textdich": ""
  },
  {
    "start": 57286.48,
    "end": 57300.48,
    "text": "return? A login returns a it should just be a 200. So we'll do a 200 assert res dot status code",
    "textdich": ""
  },
  {
    "start": 57301.76,
    "end": 57307.12,
    "text": "equals equals 200. All right, and let's test this out now.",
    "textdich": ""
  },
  {
    "start": 57307.12,
    "end": 57316.96,
    "text": "And it looks like we got an error. So what happened here? Let's take a look. It looks",
    "textdich": ""
  },
  {
    "start": 57316.96,
    "end": 57324.32,
    "text": "like we got a 422 as our status code, why would we get a 422? And if we take a look at our logs,",
    "textdich": ""
  },
  {
    "start": 57324.32,
    "end": 57330.08,
    "text": "we don't really get much information here. So what I'm going to do is we're just going to print",
    "textdich": ""
  },
  {
    "start": 57330.08,
    "end": 57338.24,
    "text": "res dot JSON. So we can see what's going on. Why did we get a 422? Is there any other details",
    "textdich": ""
  },
  {
    "start": 57338.24,
    "end": 57347.36,
    "text": "that's going to provide us? So I'll do a dash s. So it prints it out. And we can see in the print",
    "textdich": ""
  },
  {
    "start": 57347.36,
    "end": 57352.4,
    "text": "statement, it says, Oh, look at this, there's some sort of validation issue detail, block body",
    "textdich": ""
  },
  {
    "start": 57352.4,
    "end": 57362.08,
    "text": "username message field required type value error missing. So remember the the field for the email",
    "textdich": ""
  },
  {
    "start": 57362.08,
    "end": 57366.56,
    "text": "when you log in is not actually called email, it's called username. So we have to fix that.",
    "textdich": ""
  },
  {
    "start": 57366.56,
    "end": 57373.04,
    "text": "So it's going to be username. All right, now let's test this out once more.",
    "textdich": ""
  },
  {
    "start": 57376.88,
    "end": 57381.12,
    "text": "All right, we get another failure. So let's see this time we get a 403. Okay, interesting.",
    "textdich": ""
  },
  {
    "start": 57381.12,
    "end": 57388.16,
    "text": "So what's happening? Why do we get a 403? Let's see. detail says invalid credentials. Interesting.",
    "textdich": ""
  },
  {
    "start": 57388.16,
    "end": 57398.24,
    "text": "So if I go back to my login route, right, you could see that we get a, a 403 if the user doesn't",
    "textdich": ""
  },
  {
    "start": 57398.24,
    "end": 57403.76,
    "text": "exist, which means we couldn't find a user with that specific email, or if the password that was",
    "textdich": ""
  },
  {
    "start": 57403.76,
    "end": 57408.64,
    "text": "provided doesn't match what's in the database. So this is one of the issues, it's either the",
    "textdich": ""
  },
  {
    "start": 57408.64,
    "end": 57412.96,
    "text": "user doesn't exist, or the email doesn't exist, or the password is incorrect. So let's go into",
    "textdich": ""
  },
  {
    "start": 57412.96,
    "end": 57421.36,
    "text": "PG admin. And if you left your, your database config, so that you don't drop it at the end,",
    "textdich": ""
  },
  {
    "start": 57421.36,
    "end": 57425.76,
    "text": "instead, you drop it before a test case starts, you should be able to see all of your test data.",
    "textdich": ""
  },
  {
    "start": 57425.76,
    "end": 57434.72,
    "text": "So I'm going to refresh this. And if I go to users, view, edit data, all rows, right, there's",
    "textdich": ""
  },
  {
    "start": 57434.72,
    "end": 57440.96,
    "text": "no users. Well, that's interesting, right? Because if I go to my code, during our test create user,",
    "textdich": ""
  },
  {
    "start": 57440.96,
    "end": 57448.64,
    "text": "we should have created a brand new user. So why can't we log in as this user? Well, that's easy",
    "textdich": ""
  },
  {
    "start": 57448.64,
    "end": 57456.8,
    "text": "to explain. So if I actually go to my, my database.py, we have these fixtures. And the fixtures have a",
    "textdich": ""
  },
  {
    "start": 57456.8,
    "end": 57463.68,
    "text": "specific scope, which means when do they run? And right now, they're using the default function",
    "textdich": ""
  },
  {
    "start": 57463.68,
    "end": 57469.2,
    "text": "scope. What that means is they're going to run for every they're going to run before every single",
    "textdich": ""
  },
  {
    "start": 57469.2,
    "end": 57476.64,
    "text": "function that's dependent on them. So that means when we run test users, right, we can see that",
    "textdich": ""
  },
  {
    "start": 57476.64,
    "end": 57483.12,
    "text": "test root client, right, since we're passing client into test root, we're going to run our",
    "textdich": ""
  },
  {
    "start": 57483.12,
    "end": 57488.56,
    "text": "fixtures before we run this function. Then before the next test, we're going to run our fixture",
    "textdich": ""
  },
  {
    "start": 57488.56,
    "end": 57494.96,
    "text": "again. And then before this test, we're going to run our fixture again as well. So why does that",
    "textdich": ""
  },
  {
    "start": 57494.96,
    "end": 57500.24,
    "text": "actually cause the user get deleted? Pretty simple, because we run this test, right? The test create",
    "textdich": ""
  },
  {
    "start": 57500.24,
    "end": 57506.4,
    "text": "user, the users in the database, then we start to run the test login user. And so since we're",
    "textdich": ""
  },
  {
    "start": 57506.4,
    "end": 57510.8,
    "text": "dependent on the client fixture, we go to the database.py file, we can see that the client",
    "textdich": ""
  },
  {
    "start": 57510.8,
    "end": 57516.72,
    "text": "calls session, session, what does session do? Well, it drops the database, or it drops all the",
    "textdich": ""
  },
  {
    "start": 57516.72,
    "end": 57521.36,
    "text": "tables, at least. And then it creates a all of the new tables. So we get a brand new database,",
    "textdich": ""
  },
  {
    "start": 57521.92,
    "end": 57529.84,
    "text": "every single test that we run. That's why the user isn't there. And if you want to learn more",
    "textdich": ""
  },
  {
    "start": 57529.84,
    "end": 57539.36,
    "text": "about scopes, I recommend you go here. And then I think I go to API reference, I think. And then",
    "textdich": ""
  },
  {
    "start": 57539.36,
    "end": 57558.08,
    "text": "fixtures, not no, let's go to examples. And go to fixtures right here. And then here I can search",
    "textdich": ""
  },
  {
    "start": 57558.08,
    "end": 57574.4,
    "text": "for scope. Here we can see the different scopes. So the default right now is that our scope is",
    "textdich": ""
  },
  {
    "start": 57574.4,
    "end": 57578.64,
    "text": "functions, which means that the fixture is destroyed at the end of each test, and it's run",
    "textdich": ""
  },
  {
    "start": 57578.64,
    "end": 57584.08,
    "text": "for every single function. We then have a fixture that sets to a scope of class, which means that",
    "textdich": ""
  },
  {
    "start": 57584.08,
    "end": 57591.04,
    "text": "it'll run once per class, and it'll run all the tests in the class. Then we have a fixture module.",
    "textdich": ""
  },
  {
    "start": 57591.04,
    "end": 57595.76,
    "text": "So when a fixture is set to a module, that means for all of the tests in a specific module, right,",
    "textdich": ""
  },
  {
    "start": 57595.76,
    "end": 57600.16,
    "text": "like in this case, all of the tests here, we're going to run the fixture just once at the beginning.",
    "textdich": ""
  },
  {
    "start": 57600.16,
    "end": 57605.6,
    "text": "And then we're not going to run it again, for that module. So all of the tests will have access to",
    "textdich": ""
  },
  {
    "start": 57605.6,
    "end": 57612.32,
    "text": "just that first instance run essentially. And then we also have it for package where it's going to",
    "textdich": ""
  },
  {
    "start": 57612.32,
    "end": 57617.76,
    "text": "run once per package. And then we also have session where it's going to run once at the",
    "textdich": ""
  },
  {
    "start": 57617.76,
    "end": 57624.72,
    "text": "start of the testing session, and it's going to get destroyed. And you can see how we can set the",
    "textdich": ""
  },
  {
    "start": 57624.72,
    "end": 57630.56,
    "text": "scope right here, you just do scope equals and then whichever one you want. So if we go back to",
    "textdich": ""
  },
  {
    "start": 57630.56,
    "end": 57637.6,
    "text": "here, and we see this, this fixture, right, we could say, since the default is function,",
    "textdich": ""
  },
  {
    "start": 57637.6,
    "end": 57644.16,
    "text": "it's the equivalent of doing scope equals function. And the same thing goes for the,",
    "textdich": ""
  },
  {
    "start": 57645.68,
    "end": 57650.8,
    "text": "the session, the database one as well. So these are going to run and get destroyed every single",
    "textdich": ""
  },
  {
    "start": 57650.8,
    "end": 57654.48,
    "text": "function. So at the end, the function, we're going to delete this test client, and then we're going",
    "textdich": ""
  },
  {
    "start": 57654.48,
    "end": 57658.4,
    "text": "to create a brand new one for the next one, which causes our database to get wiped and destroyed.",
    "textdich": ""
  },
  {
    "start": 57659.04,
    "end": 57664.4,
    "text": "So if we want our login user to be able to access what was created here,",
    "textdich": ""
  },
  {
    "start": 57664.4,
    "end": 57671.52,
    "text": "we could theoretically change the scope to be module instead. And I could change this for both.",
    "textdich": ""
  },
  {
    "start": 57675.44,
    "end": 57682.32,
    "text": "And so now what happens is, at the start of this module, when we start running the test here,",
    "textdich": ""
  },
  {
    "start": 57682.32,
    "end": 57686.56,
    "text": "we're going to run the fixture, right? Because the test root is calling it. So we'll run the",
    "textdich": ""
  },
  {
    "start": 57686.56,
    "end": 57692.24,
    "text": "fixture at the beginning. And we're going to just do it once, right? So then we all you know, we'll",
    "textdich": ""
  },
  {
    "start": 57692.24,
    "end": 57697.2,
    "text": "call this one, which doesn't really do anything, we'll then create the user. But since we don't",
    "textdich": ""
  },
  {
    "start": 57697.2,
    "end": 57703.6,
    "text": "ever run the fixture, again, we never end up running this session either. So we don't end up",
    "textdich": ""
  },
  {
    "start": 57703.6,
    "end": 57709.28,
    "text": "dropping our database or our tables. So we'll actually keep that same fixture. And then we'll",
    "textdich": ""
  },
  {
    "start": 57709.28,
    "end": 57713.2,
    "text": "run through all of our tests. And only at the end, will we destroy that fixture. So we have",
    "textdich": ""
  },
  {
    "start": 57713.2,
    "end": 57718.96,
    "text": "essentially access to all of the the tour database, the end for the entire module in this case.",
    "textdich": ""
  },
  {
    "start": 57718.96,
    "end": 57730.88,
    "text": "And so now if I actually run this right, you can see all of our tests pass because the fixture",
    "textdich": ""
  },
  {
    "start": 57732.16,
    "end": 57737.2,
    "text": "will last the entirety of the module, I could even use package or session, both of them would",
    "textdich": ""
  },
  {
    "start": 57737.2,
    "end": 57742.24,
    "text": "have worked. But this creates a little bit of an issue. Because this means that this test",
    "textdich": ""
  },
  {
    "start": 57743.2,
    "end": 57748.24,
    "text": "is dependent on this test completing. So if this test fails, then obviously this test is going to",
    "textdich": ""
  },
  {
    "start": 57748.24,
    "end": 57755.04,
    "text": "fail. And it actually creates issues. Because if I move this to the top, right, and I accidentally",
    "textdich": ""
  },
  {
    "start": 57755.04,
    "end": 57760.32,
    "text": "move my login user to before test create user, then this is going to break our tests once again,",
    "textdich": ""
  },
  {
    "start": 57760.32,
    "end": 57766.88,
    "text": "because we need to create the user before we log in the user. And so in general, what we've done is",
    "textdich": ""
  },
  {
    "start": 57766.88,
    "end": 57773.44,
    "text": "bad practice, you don't want to make tests be dependent on other tests, each and every single",
    "textdich": ""
  },
  {
    "start": 57773.44,
    "end": 57779.28,
    "text": "test needs to operate and run independently, they should not be reliant on other tests. If they are,",
    "textdich": ""
  },
  {
    "start": 57779.28,
    "end": 57784.48,
    "text": "it is not a valid test. And you're doing it wrong. You want to make sure that all tests can run",
    "textdich": ""
  },
  {
    "start": 57784.48,
    "end": 57789.84,
    "text": "independently of one another. So what we've done so far with this little hack of changing the scope",
    "textdich": ""
  },
  {
    "start": 57789.84,
    "end": 57795.76,
    "text": "to be module is not a good solution. So in the next video, we'll take a look at what we can do",
    "textdich": ""
  },
  {
    "start": 57795.76,
    "end": 57802.0,
    "text": "to kind of overcome this limitation, this issue, so that we can make our login test case independent",
    "textdich": ""
  },
  {
    "start": 57802.0,
    "end": 57808.56,
    "text": "of our create user test case. Okay, guys, I wanted to make sure that, you know, we really did",
    "textdich": ""
  },
  {
    "start": 57808.56,
    "end": 57812.8,
    "text": "understand what scopes are when it comes to fixtures, because I feel like I didn't do that",
    "textdich": ""
  },
  {
    "start": 57812.8,
    "end": 57817.76,
    "text": "good of a job explaining it. So hopefully, this video will help explain it a little bit more.",
    "textdich": ""
  },
  {
    "start": 57818.48,
    "end": 57822.56,
    "text": "And all I'm going to do is under our session fixture, I'm going to just do a little print",
    "textdich": ""
  },
  {
    "start": 57822.56,
    "end": 57829.12,
    "text": "statement right here that says my session fixture ran. And this is, you know, I'm recording this",
    "textdich": ""
  },
  {
    "start": 57829.12,
    "end": 57832.64,
    "text": "video in the future. So I've got all of the other tests that we're going to cover done already. And",
    "textdich": ""
  },
  {
    "start": 57832.64,
    "end": 57836.48,
    "text": "I've kind of broken it out into test posts. This is testing all of our post path operations,",
    "textdich": ""
  },
  {
    "start": 57836.48,
    "end": 57841.04,
    "text": "we've got one for users and one for votes. And I'm going to show you guys what happens when we use",
    "textdich": ""
  },
  {
    "start": 57841.04,
    "end": 57846.48,
    "text": "the default scope, which is it's scoped per function, right? This is the equivalent of doing",
    "textdich": ""
  },
  {
    "start": 57846.48,
    "end": 57852.8,
    "text": "scope equals function, which means that we're going to run this fixture for every single",
    "textdich": ""
  },
  {
    "start": 57852.8,
    "end": 57859.44,
    "text": "function that requests it. And so if I remove this, because once again, it's the default,",
    "textdich": ""
  },
  {
    "start": 57859.44,
    "end": 57862.24,
    "text": "and I run my tests, I want you to take a look at what happens.",
    "textdich": ""
  },
  {
    "start": 57866.16,
    "end": 57870.88,
    "text": "For every single test that we run one dot represents the test, we can see it prints out.",
    "textdich": ""
  },
  {
    "start": 57872.96,
    "end": 57875.92,
    "text": "And so it's running through all the tests and tests underscore posts, and then it's going to",
    "textdich": ""
  },
  {
    "start": 57875.92,
    "end": 57880.8,
    "text": "run all the tests under in test underscore users, and then votes. So you could see that because",
    "textdich": ""
  },
  {
    "start": 57880.8,
    "end": 57886.24,
    "text": "this is set to function, we're going to run this entire session, fixture this function,",
    "textdich": ""
  },
  {
    "start": 57887.12,
    "end": 57892.96,
    "text": "every single test that we have, or at least every single test that's requesting this specific",
    "textdich": ""
  },
  {
    "start": 57892.96,
    "end": 57898.8,
    "text": "fixture. That's why we see it run every single time. Now, if we change the scope to module,",
    "textdich": ""
  },
  {
    "start": 57898.8,
    "end": 57904.16,
    "text": "the behavior is going to be a little bit different. Now, if I change the scope to module, what's going",
    "textdich": ""
  },
  {
    "start": 57904.16,
    "end": 57912.48,
    "text": "to happen is that for every module that has a test that's requesting this specific session fixture,",
    "textdich": ""
  },
  {
    "start": 57912.48,
    "end": 57919.28,
    "text": "we're only going to run this fixture one time per module. And so now if I save this,",
    "textdich": ""
  },
  {
    "start": 57920.64,
    "end": 57925.76,
    "text": "and I'm going to no longer do dash v, I'm just going to do just dash s, so we can see this get",
    "textdich": ""
  },
  {
    "start": 57925.76,
    "end": 57929.12,
    "text": "printed out without too much extra data, because we're going to see a lot of tests fail. And that's",
    "textdich": ""
  },
  {
    "start": 57929.12,
    "end": 57938.0,
    "text": "perfectly okay. I want you to notice what's happening. So notice how the print statement ran",
    "textdich": ""
  },
  {
    "start": 57938.0,
    "end": 57946.4,
    "text": "here. And then the print statement ran here. And I had to cancel out of that, because usually I end",
    "textdich": ""
  },
  {
    "start": 57946.4,
    "end": 57954.64,
    "text": "up with a ton of errors, and then I lose my data. But you could see that the first module, which is",
    "textdich": ""
  },
  {
    "start": 57954.64,
    "end": 57960.96,
    "text": "tests underscore py, we could see that my fixture ran because it's because I told it to run because",
    "textdich": ""
  },
  {
    "start": 57960.96,
    "end": 57967.44,
    "text": "one of the tests is requesting it, it runs, then one of the tests runs. And then the next test",
    "textdich": ""
  },
  {
    "start": 57967.44,
    "end": 57971.68,
    "text": "runs, and then the next test runs. So you could see that this is not printing out per test,",
    "textdich": ""
  },
  {
    "start": 57971.68,
    "end": 57978.08,
    "text": "it's only printing out one time per module. So when tests underscore posts, py ran for the first",
    "textdich": ""
  },
  {
    "start": 57978.08,
    "end": 57983.6,
    "text": "time. And the first test required this specific fixture, it ran once, then it didn't run for any",
    "textdich": ""
  },
  {
    "start": 57983.6,
    "end": 57987.76,
    "text": "of the other ones. That's why we see them all fail. And then the next module loads up and we",
    "textdich": ""
  },
  {
    "start": 57987.76,
    "end": 57993.6,
    "text": "start running tests from there. So we run the fixture just one time. And then we don't run it",
    "textdich": ""
  },
  {
    "start": 57993.6,
    "end": 57999.12,
    "text": "ever again. So you can see seven other, I think it's six or seven other tests ran with no other",
    "textdich": ""
  },
  {
    "start": 57999.12,
    "end": 58005.12,
    "text": "modules with with the fixture not running any other time. And then we can see the same thing",
    "textdich": ""
  },
  {
    "start": 58005.12,
    "end": 58010.64,
    "text": "for votes, we can see that my fixture ran just one time. So this means that it's going to run",
    "textdich": ""
  },
  {
    "start": 58010.64,
    "end": 58017.68,
    "text": "only once per module. We also have session. So if I do session, it's going to be even more different,",
    "textdich": ""
  },
  {
    "start": 58017.68,
    "end": 58023.44,
    "text": "you're going to see it run only one time for my entire testing session. So you can see my fixture",
    "textdich": ""
  },
  {
    "start": 58023.44,
    "end": 58028.4,
    "text": "ran, it's going to keep going through, which is perfectly fine. And then when we get to the next",
    "textdich": ""
  },
  {
    "start": 58028.4,
    "end": 58035.44,
    "text": "module, we should see it not run at all. Right. And so you can see it didn't print again. So it's",
    "textdich": ""
  },
  {
    "start": 58035.44,
    "end": 58039.76,
    "text": "going to go through all of the different modules. And I'm going to cancel out of that before I get",
    "textdich": ""
  },
  {
    "start": 58039.76,
    "end": 58045.6,
    "text": "too many errors. Right. But now it only runs once per entire testing session. So that's when the",
    "textdich": ""
  },
  {
    "start": 58045.6,
    "end": 58049.68,
    "text": "scope comes into play. So keep in mind, you know, depending on what you're trying to accomplish,",
    "textdich": ""
  },
  {
    "start": 58049.68,
    "end": 58054.64,
    "text": "you may need to tweak the scopes of your fixtures, depending on what they're supposed to be doing.",
    "textdich": ""
  },
  {
    "start": 58055.2,
    "end": 58060.24,
    "text": "But for our database, we want to keep it set to function, which is the default value, because we",
    "textdich": ""
  },
  {
    "start": 58060.24,
    "end": 58065.68,
    "text": "want to load up a brand new database by dropping our tables and then creating new ones every single",
    "textdich": ""
  },
  {
    "start": 58065.68,
    "end": 58071.04,
    "text": "time we run our test. So the default works perfectly fine for us. Now, to make our login",
    "textdich": ""
  },
  {
    "start": 58071.04,
    "end": 58076.88,
    "text": "user test independent of any other test, so it's not reliant on a specific order or setting the",
    "textdich": ""
  },
  {
    "start": 58076.88,
    "end": 58082.4,
    "text": "fixtures to be of a specific scope. What we want to do is before our login user test runs, I want",
    "textdich": ""
  },
  {
    "start": 58082.4,
    "end": 58087.28,
    "text": "to actually go in define a function that will get called, that will actually create a brand new",
    "textdich": ""
  },
  {
    "start": 58087.28,
    "end": 58093.52,
    "text": "user so that we can actually test the login user out. And so, you know, as soon as I said the words,",
    "textdich": ""
  },
  {
    "start": 58093.52,
    "end": 58097.76,
    "text": "I want to run a function before test runs, the first thing that should click in your head is you",
    "textdich": ""
  },
  {
    "start": 58097.76,
    "end": 58103.12,
    "text": "want to run a fixture or you want to create a new fixture. So we can actually create a fixture that",
    "textdich": ""
  },
  {
    "start": 58103.12,
    "end": 58108.88,
    "text": "will create a test user for us. So up here at the top of this file, let's create a new fixture. And",
    "textdich": ""
  },
  {
    "start": 58108.88,
    "end": 58112.64,
    "text": "I'm actually going to delete this test, we don't actually need it anymore. It's just taking up",
    "textdich": ""
  },
  {
    "start": 58112.64,
    "end": 58124.64,
    "text": "space, or I can at least comment it out, I guess. And I'm going to define a fixture here. And we",
    "textdich": ""
  },
  {
    "start": 58124.64,
    "end": 58144.08,
    "text": "have to import pytest. So we'll say from import pytest. And we'll say at pytest.fixture. And I'm",
    "textdich": ""
  },
  {
    "start": 58144.08,
    "end": 58151.52,
    "text": "going to call this test user. So it's gonna be responsible for creating a test user. And this is",
    "textdich": ""
  },
  {
    "start": 58151.52,
    "end": 58159.04,
    "text": "actually going to make a call to our create user route. So we actually need access to client,",
    "textdich": ""
  },
  {
    "start": 58159.04,
    "end": 58162.0,
    "text": "so that we can actually make that request. And there's two different ways of doing this,",
    "textdich": ""
  },
  {
    "start": 58162.0,
    "end": 58167.2,
    "text": "right? We could just have access to the session object, we can have access to session object,",
    "textdich": ""
  },
  {
    "start": 58167.2,
    "end": 58172.24,
    "text": "and we can just, you know, session dot, you know, I think what is it, I actually know it would be",
    "textdich": ""
  },
  {
    "start": 58172.24,
    "end": 58177.84,
    "text": "like models, dot user, and then pass in the data for a test user, and then create it directly with",
    "textdich": ""
  },
  {
    "start": 58177.84,
    "end": 58182.64,
    "text": "the database. Or we could just make a call to our API and actually have it run through that. So I'm",
    "textdich": ""
  },
  {
    "start": 58182.64,
    "end": 58190.08,
    "text": "going to do that because it's a little bit simpler for now. But I'm going to define a a dictionary",
    "textdich": ""
  },
  {
    "start": 58190.08,
    "end": 58200.24,
    "text": "with the data that I'm going to use for my user. So I'm going to have the email. And actually,",
    "textdich": ""
  },
  {
    "start": 58200.24,
    "end": 58208.16,
    "text": "it's going to be a little bit easier if I just paste this in. So we have the email set to something",
    "textdich": ""
  },
  {
    "start": 58208.16,
    "end": 58215.12,
    "text": "and then the password set to something. And I'm going to change this back to client.",
    "textdich": ""
  },
  {
    "start": 58218.16,
    "end": 58224.8,
    "text": "And now I can say res equals client dot post, and we'll send it to users.",
    "textdich": ""
  },
  {
    "start": 58224.8,
    "end": 58232.56,
    "text": "And then the data for the new user can just be user underscore data. And just kind of like what",
    "textdich": ""
  },
  {
    "start": 58232.56,
    "end": 58237.12,
    "text": "we've done here, we can, you know, just to make sure that this didn't error out, we can do an",
    "textdich": ""
  },
  {
    "start": 58237.12,
    "end": 58247.68,
    "text": "assert and just say, you know, res dot status code equals equals to a one. If that's good,",
    "textdich": ""
  },
  {
    "start": 58247.68,
    "end": 58253.2,
    "text": "I think it's safe to assume we didn't run into any errors on on the back end. But then what I want",
    "textdich": ""
  },
  {
    "start": 58253.2,
    "end": 58258.72,
    "text": "to do is not only do I want to create the test user, I want to actually return the information",
    "textdich": ""
  },
  {
    "start": 58258.72,
    "end": 58264.72,
    "text": "about the user so that this login user will have the correct data to send when he tries to log in.",
    "textdich": ""
  },
  {
    "start": 58265.44,
    "end": 58269.2,
    "text": "That way, if we ever change this data, we should automatically update this data.",
    "textdich": ""
  },
  {
    "start": 58270.64,
    "end": 58278.4,
    "text": "So what are we going to return? Well, we have access to what is it called to res dot JSON.",
    "textdich": ""
  },
  {
    "start": 58278.4,
    "end": 58285.36,
    "text": "And if I print that out, we can just quickly take a look at what that looks like. And for now,",
    "textdich": ""
  },
  {
    "start": 58285.36,
    "end": 58292.0,
    "text": "I'm just going to return nothing, I guess that's fine, I'll just return nothing. And here I'm going",
    "textdich": ""
  },
  {
    "start": 58292.0,
    "end": 58302.88,
    "text": "to change this to be, I'm going to pass in the test user. So that also runs. And so now this",
    "textdich": ""
  },
  {
    "start": 58302.88,
    "end": 58308.16,
    "text": "login user is dependent on two different fixtures, client and test user. And before we do anything",
    "textdich": ""
  },
  {
    "start": 58308.16,
    "end": 58312.56,
    "text": "else, let's make sure we clean up the scope, we don't need these to be set to that anymore.",
    "textdich": ""
  },
  {
    "start": 58314.08,
    "end": 58323.44,
    "text": "And if we run our tests. All right, the data we get back, we get the username.",
    "textdich": ""
  },
  {
    "start": 58324.8,
    "end": 58330.0,
    "text": "I'm sorry, that's not what I want this print, we get the ID, the email and the created at.",
    "textdich": ""
  },
  {
    "start": 58332.64,
    "end": 58336.32,
    "text": "So what we'll do is I'm going to actually take this dictionary,",
    "textdich": ""
  },
  {
    "start": 58336.32,
    "end": 58341.2,
    "text": "and I'm going to pass in the password as well. Because when I actually go to log in the user,",
    "textdich": ""
  },
  {
    "start": 58341.2,
    "end": 58345.68,
    "text": "I need to make sure that he has access to what my password is. But that doesn't get returned",
    "textdich": ""
  },
  {
    "start": 58345.68,
    "end": 58351.36,
    "text": "in the response. So what we have to do is, we'll have to add a new field. So I'll say new underscore",
    "textdich": ""
  },
  {
    "start": 58351.36,
    "end": 58358.88,
    "text": "user equals, you know, res dot JSON. So we get that dictionary, and then we'll say new underscore",
    "textdich": ""
  },
  {
    "start": 58358.88,
    "end": 58367.2,
    "text": "user, we'll add in a new key called password. And I'll pass in user underscore data, which is this",
    "textdich": ""
  },
  {
    "start": 58367.2,
    "end": 58373.12,
    "text": "dictionary up here, and we'll grab the password from here. And what I'm going to do is then return",
    "textdich": ""
  },
  {
    "start": 58373.12,
    "end": 58380.56,
    "text": "new underscore user. And so anytime someone calls test user, or anytime we have a test that's",
    "textdich": ""
  },
  {
    "start": 58380.56,
    "end": 58385.92,
    "text": "dependent on that, it's going to run this function, it's going to return the new user. And so now that",
    "textdich": ""
  },
  {
    "start": 58385.92,
    "end": 58394.88,
    "text": "we have the new user, what we can do is I can say the username is test underscore user. And then",
    "textdich": ""
  },
  {
    "start": 58394.88,
    "end": 58402.64,
    "text": "we'll grab the email key, and then the password will be test underscore user. And this will be",
    "textdich": ""
  },
  {
    "start": 58402.64,
    "end": 58407.68,
    "text": "password. Okay, and so that way, if I ever change the password up here, it's going to automatically",
    "textdich": ""
  },
  {
    "start": 58407.68,
    "end": 58414.08,
    "text": "get updated down here. So we don't ever have to worry about that. And one thing to note is that",
    "textdich": ""
  },
  {
    "start": 58414.08,
    "end": 58422.24,
    "text": "technically, if I deleted this and just call a test user, right, test user would technically call",
    "textdich": ""
  },
  {
    "start": 58422.24,
    "end": 58427.28,
    "text": "client. And that would go all the way back here. And then client would technically call session.",
    "textdich": ""
  },
  {
    "start": 58427.28,
    "end": 58433.6,
    "text": "So it would call all of these functions automatically for us. However, the one issue is",
    "textdich": ""
  },
  {
    "start": 58433.6,
    "end": 58437.6,
    "text": "that in this test, we still need to make a call with clients. So we still have to",
    "textdich": ""
  },
  {
    "start": 58438.48,
    "end": 58443.76,
    "text": "pass in the client object so that we can make use of it. But I did want to highlight that because",
    "textdich": ""
  },
  {
    "start": 58443.76,
    "end": 58449.6,
    "text": "this fixture is dependent on client, it will run whatever code is in the client fixture. And because",
    "textdich": ""
  },
  {
    "start": 58449.6,
    "end": 58453.84,
    "text": "client is dependent on session, it will run whatever code is there within the session.",
    "textdich": ""
  },
  {
    "start": 58453.84,
    "end": 58459.6,
    "text": "So it's all done automatically for us. Right. So the order once again, is going to be we'll run",
    "textdich": ""
  },
  {
    "start": 58460.4,
    "end": 58464.88,
    "text": "session first, we'll then run client, and then we'll run this test user.",
    "textdich": ""
  },
  {
    "start": 58464.88,
    "end": 58475.92,
    "text": "So let's test this out. Now. Hopefully, this works. And it passed perfect. Look at that,",
    "textdich": ""
  },
  {
    "start": 58475.92,
    "end": 58481.84,
    "text": "guys, we were now successfully able to log in a user. So that's cool and all. But I want to do a",
    "textdich": ""
  },
  {
    "start": 58481.84,
    "end": 58487.76,
    "text": "little bit more validation for the login user route, just to make sure that you know, we got a token,",
    "textdich": ""
  },
  {
    "start": 58487.76,
    "end": 58493.36,
    "text": "the token is valid, and just do a few extra checks. So just like we did with the test create user,",
    "textdich": ""
  },
  {
    "start": 58493.36,
    "end": 58498.8,
    "text": "we have we can take use or we can make use of the pedantic model that we use for the response. So",
    "textdich": ""
  },
  {
    "start": 58498.8,
    "end": 58504.64,
    "text": "if I go into my auth.py under routers, and we can see for the login, the response model set to a",
    "textdich": ""
  },
  {
    "start": 58504.64,
    "end": 58513.12,
    "text": "schema token. So let's import token inside our test users.py. So here schemas, we already have",
    "textdich": ""
  },
  {
    "start": 58513.12,
    "end": 58524.32,
    "text": "access to schemas. And so I can say token, or what should I call this? I'll just call this login.",
    "textdich": ""
  },
  {
    "start": 58524.32,
    "end": 58534.4,
    "text": "Res, which equals and then we'll call in schemas dot. I think it was a token. Was it token or token",
    "textdich": ""
  },
  {
    "start": 58534.4,
    "end": 58542.24,
    "text": "data? I think it was token. Well, let's just double check. It's token perfect. Okay, so token,",
    "textdich": ""
  },
  {
    "start": 58542.24,
    "end": 58549.28,
    "text": "and then what we're going to do is we're going to spread res dot JSON. All right, so that's going",
    "textdich": ""
  },
  {
    "start": 58549.28,
    "end": 58554.48,
    "text": "to perform a little bit of validation. Right. And then when we get a token, I want to actually",
    "textdich": ""
  },
  {
    "start": 58554.48,
    "end": 58561.36,
    "text": "validate it. So how exactly do we validate it? Well, we want to decode the token. And so all of",
    "textdich": ""
  },
  {
    "start": 58561.36,
    "end": 58565.36,
    "text": "the logic that I'm going to implement here is essentially the logic that we use within our",
    "textdich": ""
  },
  {
    "start": 58565.36,
    "end": 58571.04,
    "text": "OAuth 2.py file. So when we want to get the user, we want to verify the access token is valid. So",
    "textdich": ""
  },
  {
    "start": 58571.04,
    "end": 58575.92,
    "text": "how do we do that? The all of the logic is right here. So we're going to decode the token. And we're",
    "textdich": ""
  },
  {
    "start": 58575.92,
    "end": 58580.32,
    "text": "going to make sure that the user ID is within that token. And that's all I'm really going to do at",
    "textdich": ""
  },
  {
    "start": 58580.32,
    "end": 58600.4,
    "text": "that point. So I will copy this. And we have to import JWT from. So from, I don't know if it's",
    "textdich": ""
  },
  {
    "start": 58600.4,
    "end": 58609.76,
    "text": "Jose or Josie, who knows. So import JWT. And what we'll decode is going to be in the login underscore",
    "textdich": ""
  },
  {
    "start": 58609.76,
    "end": 58620.64,
    "text": "res under the access token property. And then we have to pass in the secret key as well as the",
    "textdich": ""
  },
  {
    "start": 58620.64,
    "end": 58628.88,
    "text": "algorithm. So the secret key can be accessed with settings dot. Well, I have to import my big. So",
    "textdich": ""
  },
  {
    "start": 58628.88,
    "end": 58639.2,
    "text": "we'll say from app dot config, import settings. And now we have access to our environment variable.",
    "textdich": ""
  },
  {
    "start": 58639.2,
    "end": 58647.44,
    "text": "So I'll do settings dot secret key. And then the same thing goes for the algorithm. So I'll set",
    "textdich": ""
  },
  {
    "start": 58647.44,
    "end": 58659.44,
    "text": "this to settings dot algorithm. So we're able to de load it, decode it. And then I'll remove this",
    "textdich": ""
  },
  {
    "start": 58659.44,
    "end": 58669.2,
    "text": "check, I'll just say, ID equals payload dot get user ID. Alright, and so once we get the user ID",
    "textdich": ""
  },
  {
    "start": 58669.2,
    "end": 58678.48,
    "text": "from the token, what we can do now is I can just assert does ID equal equal. And then is it going",
    "textdich": ""
  },
  {
    "start": 58678.48,
    "end": 58682.64,
    "text": "to match the ID of test user. So if we take a look at what test user was that's coming from this",
    "textdich": ""
  },
  {
    "start": 58682.64,
    "end": 58688.72,
    "text": "picture. And so it's going to return Oh, it looks like I did not know no, it should be on there. So",
    "textdich": ""
  },
  {
    "start": 58688.72,
    "end": 58694.96,
    "text": "since we grabbed the response, the ID should be there. So we can just call this test underscore",
    "textdich": ""
  },
  {
    "start": 58694.96,
    "end": 58701.12,
    "text": "user. And then we can just call ID. So I think that's a little bit more of a valid check,",
    "textdich": ""
  },
  {
    "start": 58701.12,
    "end": 58705.04,
    "text": "because it's actually decoding the token just to make sure we didn't break anything there. And",
    "textdich": ""
  },
  {
    "start": 58705.04,
    "end": 58719.84,
    "text": "one more thing we can assert login underscore res dot token type. So this should be set to bear.",
    "textdich": ""
  },
  {
    "start": 58719.84,
    "end": 58731.2,
    "text": "Alright, so let's test that out now. And everything worked. I think I've got one",
    "textdich": ""
  },
  {
    "start": 58731.2,
    "end": 58735.76,
    "text": "random print statement that I don't want. So I'll just remove that. And we have now successfully",
    "textdich": ""
  },
  {
    "start": 58735.76,
    "end": 58741.6,
    "text": "completed our login user test. Okay, guys, so before we actually create any more new tests,",
    "textdich": ""
  },
  {
    "start": 58741.6,
    "end": 58745.28,
    "text": "what I want to do is I want to create a special file under our test directory,",
    "textdich": ""
  },
  {
    "start": 58745.28,
    "end": 58752.56,
    "text": "called conf test.py. So this is a special file that py test uses. And it allows us to define",
    "textdich": ""
  },
  {
    "start": 58752.56,
    "end": 58757.92,
    "text": "fixtures in here. And any fixtures you define in this file will automatically be accessible to",
    "textdich": ""
  },
  {
    "start": 58757.92,
    "end": 58762.8,
    "text": "any of our tests within this package. So it's package specific. So anything within the test",
    "textdich": ""
  },
  {
    "start": 58762.8,
    "end": 58769.2,
    "text": "package, even sub packages will automatically have access to any of these fixtures. The reason I want",
    "textdich": ""
  },
  {
    "start": 58769.2,
    "end": 58773.84,
    "text": "to do this is I want to take all of our database code essentially, or well, our database fixtures,",
    "textdich": ""
  },
  {
    "start": 58773.84,
    "end": 58782.4,
    "text": "and I want to copy all of it. And I want to move it to Conf test. And so by moving it to Conf test,",
    "textdich": ""
  },
  {
    "start": 58782.4,
    "end": 58787.36,
    "text": "this fixture, the session fixture, as well as the client fixture, will all be accessible to,",
    "textdich": ""
  },
  {
    "start": 58787.36,
    "end": 58792.08,
    "text": "you know, test calculations, test users, any other test files within the test folder,",
    "textdich": ""
  },
  {
    "start": 58793.2,
    "end": 58800.48,
    "text": "automatically. And so now, I don't actually have to import anything. So I don't need to import from",
    "textdich": ""
  },
  {
    "start": 58800.48,
    "end": 58806.4,
    "text": "Conf test, it'll automatically do that, it'll automatically have access to client. And it",
    "textdich": ""
  },
  {
    "start": 58806.4,
    "end": 58810.8,
    "text": "automatically have access to session. And what I'm actually going to do is I'm going to move this test",
    "textdich": ""
  },
  {
    "start": 58810.8,
    "end": 58825.6,
    "text": "user to Conf test as well. And so that way, because I imagine that even for other modules that I",
    "textdich": ""
  },
  {
    "start": 58825.6,
    "end": 58831.44,
    "text": "create, you know, especially like for voting, and a few and creating posts, they're going to need test",
    "textdich": ""
  },
  {
    "start": 58831.44,
    "end": 58835.84,
    "text": "users as well. So it makes sense to put this in this contest. So everyone has access to it. And",
    "textdich": ""
  },
  {
    "start": 58835.84,
    "end": 58842.24,
    "text": "I don't have to go around constantly importing things around like that. And now within our test",
    "textdich": ""
  },
  {
    "start": 58842.24,
    "end": 58848.72,
    "text": "users, I should be able to leave everything else. And you'll see that we're not importing client or",
    "textdich": ""
  },
  {
    "start": 58848.72,
    "end": 58855.52,
    "text": "test user anywhere here. But when I run this, we should see no issues. So let's give this a try.",
    "textdich": ""
  },
  {
    "start": 58859.44,
    "end": 58864.24,
    "text": "And you can see all of our tests passed with absolutely no issues, because we are importing",
    "textdich": ""
  },
  {
    "start": 58864.24,
    "end": 58870.64,
    "text": "those from the contest file. And keep in mind, you know, let's say I created a new package,",
    "textdich": ""
  },
  {
    "start": 58870.64,
    "end": 58879.76,
    "text": "I'll call this whatever about API or something, it doesn't really matter what I call it. And I've",
    "textdich": ""
  },
  {
    "start": 58879.76,
    "end": 58887.6,
    "text": "got a whole bunch of tests in here, you know, test underscore something that p y. Because this",
    "textdich": ""
  },
  {
    "start": 58887.6,
    "end": 58892.96,
    "text": "package is still within the test package, it'll have access to all of the mud, all of the fixtures",
    "textdich": ""
  },
  {
    "start": 58892.96,
    "end": 58898.56,
    "text": "in the contest p y. But within a package, I can also create a new contest. So I can make a new",
    "textdich": ""
  },
  {
    "start": 58898.56,
    "end": 58905.36,
    "text": "contest.py down here as well. And when I do it within this package, then test users doesn't have",
    "textdich": ""
  },
  {
    "start": 58905.36,
    "end": 58910.56,
    "text": "access to that one. But anything within the API package will have access to the fixtures and in",
    "textdich": ""
  },
  {
    "start": 58910.56,
    "end": 58915.68,
    "text": "the API folder as well. So contest is package specific. So every directory you create, you can",
    "textdich": ""
  },
  {
    "start": 58915.68,
    "end": 58920.88,
    "text": "create a separate contest file, so that you can essentially scope fixtures, or you can make it so",
    "textdich": ""
  },
  {
    "start": 58920.88,
    "end": 58925.76,
    "text": "that fixtures are automatically imported into certain parts of your tests, and not others.",
    "textdich": ""
  },
  {
    "start": 58925.76,
    "end": 58932.08,
    "text": "But we'll delete that because I don't actually need that. Alright, so we finished our successful",
    "textdich": ""
  },
  {
    "start": 58932.08,
    "end": 58937.28,
    "text": "login user test. The next thing we want to test is for a failed login. So I'll do the same thing,",
    "textdich": ""
  },
  {
    "start": 58937.28,
    "end": 58947.92,
    "text": "I'll call this about test incorrect login. And once again, a few things need to happen. Let's",
    "textdich": ""
  },
  {
    "start": 58949.2,
    "end": 58952.8,
    "text": "we want the test user so that a test user gets created. So we can try to log in",
    "textdich": ""
  },
  {
    "start": 58952.8,
    "end": 58957.28,
    "text": "with his credentials, or at least with the wrong credentials this time. And we do need access to",
    "textdich": ""
  },
  {
    "start": 58957.28,
    "end": 58964.32,
    "text": "client just because we're going to be making a request. And here I'll say res equals client dot",
    "textdich": ""
  },
  {
    "start": 58964.32,
    "end": 58976.08,
    "text": "post. And we'll say login. And for the login data, we'll say data equals and then we'll do a",
    "textdich": ""
  },
  {
    "start": 58976.08,
    "end": 58988.88,
    "text": "dictionary here the username, we can use, in this case, test underscore user, email. And then for",
    "textdich": ""
  },
  {
    "start": 58988.88,
    "end": 58994.32,
    "text": "the password, we can just I mean, we could just give it any arbitrary password, we'll just say",
    "textdich": ""
  },
  {
    "start": 58994.32,
    "end": 58999.36,
    "text": "wrong password. So we know that's the wrong password. And so when a user enters in the wrong",
    "textdich": ""
  },
  {
    "start": 58999.36,
    "end": 59008.88,
    "text": "credentials, we should get a 403. So we'll say assert res dot status code equals equals 403.",
    "textdich": ""
  },
  {
    "start": 59011.04,
    "end": 59017.2,
    "text": "And in the response, it should tell us that we have invalid credentials. So I'll say assert",
    "textdich": ""
  },
  {
    "start": 59017.76,
    "end": 59026.96,
    "text": "response dot JSON, so we'll convert it to JSON, we will get the detail property. And that should",
    "textdich": ""
  },
  {
    "start": 59026.96,
    "end": 59032.64,
    "text": "equal invalid credentials, make sure you get the capitalization correct, because it's going to do",
    "textdich": ""
  },
  {
    "start": 59032.64,
    "end": 59038.48,
    "text": "an exact comparison. And just to confirm if that's what the capitalization looks like, it should be",
    "textdich": ""
  },
  {
    "start": 59038.48,
    "end": 59044.8,
    "text": "invalid credentials. So just copy it directly from here. And this should be res not response.",
    "textdich": ""
  },
  {
    "start": 59044.8,
    "end": 59060.8,
    "text": "Let's try this out. All right, and the incorrect login worked. Perfect. So that means we did get a",
    "textdich": ""
  },
  {
    "start": 59060.8,
    "end": 59066.64,
    "text": "receipt, we did receive a 403. And we did receive the message invalid credentials. But not only do",
    "textdich": ""
  },
  {
    "start": 59066.64,
    "end": 59071.76,
    "text": "I want to test the wrong password, I also want to test wrong email as well. And I also want to test",
    "textdich": ""
  },
  {
    "start": 59071.76,
    "end": 59078.48,
    "text": "wrong email and wrong password and a few different things. So how do we do that? Well, we can use",
    "textdich": ""
  },
  {
    "start": 59078.48,
    "end": 59085.6,
    "text": "parameterize, right? So let's import pytest, which we already have. And we'll define our decorator.",
    "textdich": ""
  },
  {
    "start": 59085.6,
    "end": 59093.68,
    "text": "So pytest dot mark dot parameterize. So what are the properties that we want to pass, we're going to",
    "textdich": ""
  },
  {
    "start": 59093.68,
    "end": 59101.04,
    "text": "give it the attempted email, the attempted password. And then we can use parameterize.",
    "textdich": ""
  },
  {
    "start": 59101.04,
    "end": 59109.76,
    "text": "And then we could also get the status code. And we could also, you know, match on a specific",
    "textdich": ""
  },
  {
    "start": 59109.76,
    "end": 59113.2,
    "text": "detailed message if you have a different detailed message for wrong password, wrong email, but we",
    "textdich": ""
  },
  {
    "start": 59113.2,
    "end": 59120.72,
    "text": "don't. So I'm not going to include that. And then now we'll just give an array with all about why",
    "textdich": ""
  },
  {
    "start": 59120.72,
    "end": 59125.68,
    "text": "does it do that. And so we'll here we'll define our tuples. And I'm going to copy and paste this",
    "textdich": ""
  },
  {
    "start": 59125.68,
    "end": 59130.8,
    "text": "part just because I don't want to have to make you guys sit through this. But I've got a couple of",
    "textdich": ""
  },
  {
    "start": 59130.8,
    "end": 59136.88,
    "text": "different test scenarios. So here I've got the email being wrong email at gmail.com with the",
    "textdich": ""
  },
  {
    "start": 59136.88,
    "end": 59143.12,
    "text": "correct password, we expect to 403. I've got the right email wrong password, I've got the wrong",
    "textdich": ""
  },
  {
    "start": 59143.12,
    "end": 59149.28,
    "text": "email, wrong password. I've also got no password, sorry, no email. So if you put none, this is",
    "textdich": ""
  },
  {
    "start": 59149.28,
    "end": 59154.88,
    "text": "essentially leaving in blank. So with this set to none, you'll see that our API actually will send",
    "textdich": ""
  },
  {
    "start": 59154.88,
    "end": 59160.56,
    "text": "a 422 because the schema validation fails because it expects a username or password. And then we'll",
    "textdich": ""
  },
  {
    "start": 59160.56,
    "end": 59165.52,
    "text": "try sending it with the correct email, but no password at all, we should get a 422 in this case,",
    "textdich": ""
  },
  {
    "start": 59165.52,
    "end": 59171.12,
    "text": "because pedantic performance validation and found that it was missing fields.",
    "textdich": ""
  },
  {
    "start": 59172.32,
    "end": 59176.24,
    "text": "So that's what I'm doing here. And then we're just going to update all of this. So the email,",
    "textdich": ""
  },
  {
    "start": 59177.52,
    "end": 59183.2,
    "text": "we yeah, the email no longer going to be test user. It's going to be",
    "textdich": ""
  },
  {
    "start": 59183.2,
    "end": 59192.88,
    "text": "well, actually, we fresh all we have to pass it into our function. So email, password, and status",
    "textdich": ""
  },
  {
    "start": 59192.88,
    "end": 59205.84,
    "text": "code. So we'll say email, password is going to be password. And status code is going to be status",
    "textdich": ""
  },
  {
    "start": 59205.84,
    "end": 59212.4,
    "text": "code. And we'll get rid of this check. Just because the invalid credentials won't apply when we get",
    "textdich": ""
  },
  {
    "start": 59212.4,
    "end": 59226.08,
    "text": "the 422. Let's try this out now. And we can see all of our tests have successfully passed. So we",
    "textdich": ""
  },
  {
    "start": 59226.08,
    "end": 59231.04,
    "text": "have now finally set up a test for making sure that when a user does not provide the proper",
    "textdich": ""
  },
  {
    "start": 59231.04,
    "end": 59237.68,
    "text": "credentials, we get the right response code and the right data back. And keep in mind guys, right,",
    "textdich": ""
  },
  {
    "start": 59237.68,
    "end": 59241.76,
    "text": "in this case, I just set this up to be a very simple test just to check on the status code.",
    "textdich": ""
  },
  {
    "start": 59241.76,
    "end": 59246.08,
    "text": "But you could check any single field that you want. It's up to you, you can make your tests as",
    "textdich": ""
  },
  {
    "start": 59246.08,
    "end": 59250.48,
    "text": "specific as possible, you can make them a little bit more generic, it's up to you to decide on",
    "textdich": ""
  },
  {
    "start": 59250.48,
    "end": 59256.64,
    "text": "what you want to validate yourself. And like I said, I'm trying to keep this as basic as possible,",
    "textdich": ""
  },
  {
    "start": 59256.64,
    "end": 59260.88,
    "text": "try to just make sure that we focus on how to actually create tests, and less on the actual",
    "textdich": ""
  },
  {
    "start": 59260.88,
    "end": 59265.76,
    "text": "specific tests. That's all of the things that I want to do for all of the user tests. Let's move",
    "textdich": ""
  },
  {
    "start": 59265.76,
    "end": 59272.4,
    "text": "on to all of the post tests. So tests when it comes to creating reading, updating and deleting",
    "textdich": ""
  },
  {
    "start": 59272.4,
    "end": 59276.24,
    "text": "posts. So I'm going to store this in a separate module just to keep things nice and organized.",
    "textdich": ""
  },
  {
    "start": 59276.24,
    "end": 59279.76,
    "text": "However, you can keep everything in one file if you really wanted to, but",
    "textdich": ""
  },
  {
    "start": 59280.32,
    "end": 59283.28,
    "text": "no reason to do that. So I'll call this test underscore post p y.",
    "textdich": ""
  },
  {
    "start": 59285.6,
    "end": 59290.8,
    "text": "Now, when it comes to working with posts, we do have to deal with a little bit of an extra",
    "textdich": ""
  },
  {
    "start": 59290.8,
    "end": 59296.16,
    "text": "challenge. And that is, if you take a look at all of our posts, path operations, they all",
    "textdich": ""
  },
  {
    "start": 59296.72,
    "end": 59304.24,
    "text": "require authentication. So how exactly do we deal with authentication? When it comes to testing?",
    "textdich": ""
  },
  {
    "start": 59304.8,
    "end": 59310.24,
    "text": "Well, you're probably thinking, you know, we could, you know, define a post, define a test,",
    "textdich": ""
  },
  {
    "start": 59310.24,
    "end": 59316.88,
    "text": "and we can call this, you know, get all posts or something, right? And then here, we can pass in",
    "textdich": ""
  },
  {
    "start": 59316.88,
    "end": 59327.2,
    "text": "client. And then maybe test user. So we have access to that. And then we would just do, you know,",
    "textdich": ""
  },
  {
    "start": 59327.2,
    "end": 59335.76,
    "text": "client dot post, login. So we log in, we get a token. And then after we get the token, then we",
    "textdich": ""
  },
  {
    "start": 59335.76,
    "end": 59342.48,
    "text": "can then we can make a request to post. And that is technically valid. But what I would like to do",
    "textdich": ""
  },
  {
    "start": 59342.48,
    "end": 59347.2,
    "text": "is I'd write I'd rather set up a fixture that automatically does this for us. But instead of,",
    "textdich": ""
  },
  {
    "start": 59348.4,
    "end": 59354.24,
    "text": "but instead of actually making a request to our API, I want to just import the the method,",
    "textdich": ""
  },
  {
    "start": 59354.8,
    "end": 59360.24,
    "text": "the OAuth 2 method for creating an access token. So we can just import this into our test so that",
    "textdich": ""
  },
  {
    "start": 59360.24,
    "end": 59365.68,
    "text": "we can actually fake our own token or create our own token without having to use the entire API",
    "textdich": ""
  },
  {
    "start": 59365.68,
    "end": 59370.16,
    "text": "and go all the way through back into this same exact method to get a token because that seems",
    "textdich": ""
  },
  {
    "start": 59370.16,
    "end": 59373.28,
    "text": "like a waste. And we're testing a whole bunch of other things that we don't want to test in this",
    "textdich": ""
  },
  {
    "start": 59373.28,
    "end": 59379.28,
    "text": "specific test. So what we're going to do is we're going to go to comp test. And I'm going to create",
    "textdich": ""
  },
  {
    "start": 59379.28,
    "end": 59388.16,
    "text": "a new fixture. I'm going to grab this. And I'm going to call this token. So we'll say token,",
    "textdich": ""
  },
  {
    "start": 59388.16,
    "end": 59392.16,
    "text": "and this is going to be dependent on test user. So we need a user to get created first before",
    "textdich": ""
  },
  {
    "start": 59392.16,
    "end": 59398.32,
    "text": "we run this fixture. And what we're going to do is we're going to import this specific",
    "textdich": ""
  },
  {
    "start": 59398.32,
    "end": 59402.08,
    "text": "function right here, create access token from OAuth 2.",
    "textdich": ""
  },
  {
    "start": 59408.24,
    "end": 59414.64,
    "text": "And so I'll go from app dot OAuth to import, create access token.",
    "textdich": ""
  },
  {
    "start": 59418.8,
    "end": 59422.88,
    "text": "And just to quickly recap on how that function works, we pass in a dictionary.",
    "textdich": ""
  },
  {
    "start": 59422.88,
    "end": 59432.8,
    "text": "But I don't actually know what is in the dictionary. So let's go to where is this? Who calls this?",
    "textdich": ""
  },
  {
    "start": 59432.8,
    "end": 59442.16,
    "text": "I think it's no, it should be under users. Yeah. So create user. No, it should be under login. So",
    "textdich": ""
  },
  {
    "start": 59442.16,
    "end": 59448.48,
    "text": "under login, this is where we create the token. So we pass in data, which is just a property called",
    "textdich": ""
  },
  {
    "start": 59448.48,
    "end": 59453.44,
    "text": "user ID, and then we pass in the ID. That's all pretty straightforward. So we can do that.",
    "textdich": ""
  },
  {
    "start": 59459.12,
    "end": 59465.68,
    "text": "So we'll call create access token. And it's going to be a dictionary. And we call this",
    "textdich": ""
  },
  {
    "start": 59466.96,
    "end": 59471.68,
    "text": "was a user underscore ID. And we're going to pass in. And we can get the ID of the user",
    "textdich": ""
  },
  {
    "start": 59471.68,
    "end": 59475.28,
    "text": "from test underscore user, which is being passed in and we'll grab the ID property.",
    "textdich": ""
  },
  {
    "start": 59475.28,
    "end": 59482.24,
    "text": "And we'll just return this. So this is going to return a token. And that's why we call this",
    "textdich": ""
  },
  {
    "start": 59482.24,
    "end": 59486.8,
    "text": "function token. Then what I'm going to do is I'm going to create a another fixture. I know there's",
    "textdich": ""
  },
  {
    "start": 59486.8,
    "end": 59492.16,
    "text": "a lot of fixtures here. But you'll understand why I want to do this. So I'll do def. And here I'm",
    "textdich": ""
  },
  {
    "start": 59492.16,
    "end": 59499.84,
    "text": "going to call this authorized underscore client. The reason I'm calling that is, if we take a look",
    "textdich": ""
  },
  {
    "start": 59499.84,
    "end": 59505.6,
    "text": "at our current client, this just gives us an unauthenticated client, this new fixture will give",
    "textdich": ""
  },
  {
    "start": 59505.6,
    "end": 59510.64,
    "text": "us a authenticated client. So anytime we want to deal with any path operations that require",
    "textdich": ""
  },
  {
    "start": 59510.64,
    "end": 59515.12,
    "text": "authentication, we can just call this client the authorized client instead of the regular client.",
    "textdich": ""
  },
  {
    "start": 59515.12,
    "end": 59521.52,
    "text": "So that's going to save us a lot of time. And this is going to require the regular client",
    "textdich": ""
  },
  {
    "start": 59521.52,
    "end": 59531.2,
    "text": "and token because we need to get a token. Alright, so we have access to the original client. And what",
    "textdich": ""
  },
  {
    "start": 59531.2,
    "end": 59535.6,
    "text": "we can do is we can update the headers, because we need to pass the token inside the header. So we",
    "textdich": ""
  },
  {
    "start": 59535.6,
    "end": 59542.88,
    "text": "do client dot headers. And then we have to pass in a dictionary. And what we want to do is we want to",
    "textdich": ""
  },
  {
    "start": 59543.44,
    "end": 59548.32,
    "text": "spread out all of the current headers. So we do client dot headers. And then we want to add one",
    "textdich": ""
  },
  {
    "start": 59548.32,
    "end": 59554.8,
    "text": "more, which is going to be the authorization. And this is going to be an f string, because we need",
    "textdich": ""
  },
  {
    "start": 59554.8,
    "end": 59565.44,
    "text": "to add the word bearer before, and then we can pass in token. And then we'll return this client.",
    "textdich": ""
  },
  {
    "start": 59566.48,
    "end": 59570.24,
    "text": "So it's basically taking the original client, and then just adding this specific header",
    "textdich": ""
  },
  {
    "start": 59570.24,
    "end": 59580.24,
    "text": "that we get from the token fixture. That's all. And so now when we go into get all posts,",
    "textdich": ""
  },
  {
    "start": 59584.16,
    "end": 59586.08,
    "text": "and I forgot to put the word test before it.",
    "textdich": ""
  },
  {
    "start": 59587.92,
    "end": 59591.12,
    "text": "Instead of client, we want to import authorized client.",
    "textdich": ""
  },
  {
    "start": 59591.12,
    "end": 59601.76,
    "text": "We don't necessarily need test user. At this point, it'll automatically get called because, you know,",
    "textdich": ""
  },
  {
    "start": 59602.88,
    "end": 59609.6,
    "text": "this calls token token calls test user, we only need to pass in test user if we want access to",
    "textdich": ""
  },
  {
    "start": 59609.6,
    "end": 59613.92,
    "text": "specific user data, but we're not using any of the information at the moment. So I'll do",
    "textdich": ""
  },
  {
    "start": 59613.92,
    "end": 59624.48,
    "text": "authorized client dot get is going to be slash posts. We'll set the response equal to that.",
    "textdich": ""
  },
  {
    "start": 59627.28,
    "end": 59631.44,
    "text": "And we'll just do a print res dot JSON just to see what that looks like.",
    "textdich": ""
  },
  {
    "start": 59634.16,
    "end": 59637.76,
    "text": "And I believe the status code should be a 200 because we're retrieving data. So I'll do res",
    "textdich": ""
  },
  {
    "start": 59637.76,
    "end": 59645.68,
    "text": "dot status code equals equals 200. Let's just take a look and see what exactly is happening here.",
    "textdich": ""
  },
  {
    "start": 59648.56,
    "end": 59650.16,
    "text": "And now it's going to be test posts.",
    "textdich": ""
  },
  {
    "start": 59655.84,
    "end": 59658.24,
    "text": "And we get an error. So let's see what happened.",
    "textdich": ""
  },
  {
    "start": 59659.12,
    "end": 59664.24,
    "text": "Authorized client not found. So let's I think I forgot to save. Let's try this again.",
    "textdich": ""
  },
  {
    "start": 59664.24,
    "end": 59671.68,
    "text": "And I forgot to turn this into a fixture. So right now it's just a regular function. So",
    "textdich": ""
  },
  {
    "start": 59671.68,
    "end": 59675.04,
    "text": "let's make sure I add the fixture there. So it's accessible to everyone.",
    "textdich": ""
  },
  {
    "start": 59677.92,
    "end": 59685.36,
    "text": "And now if I run this, okay, so one passed, let's take a look at the data that we got back.",
    "textdich": ""
  },
  {
    "start": 59685.36,
    "end": 59693.2,
    "text": "So when I did a print, print of res dot JSON to see the data, I got an empty array. And the reason",
    "textdich": ""
  },
  {
    "start": 59693.2,
    "end": 59697.52,
    "text": "we got an empty array is that there's no test data in our database, there's no test posts,",
    "textdich": ""
  },
  {
    "start": 59698.24,
    "end": 59702.32,
    "text": "genome. So we're going to have to actually create some test posts before we run this test that we",
    "textdich": ""
  },
  {
    "start": 59702.32,
    "end": 59709.44,
    "text": "can actually verify that we got what we expected to get. So just like we did with the login user,",
    "textdich": ""
  },
  {
    "start": 59709.44,
    "end": 59714.08,
    "text": "where we created a test user before, we're going to have to do this with our posts, we need to",
    "textdich": ""
  },
  {
    "start": 59714.08,
    "end": 59718.4,
    "text": "create a whole bunch of posts, and then verify that we are able to retrieve those posts. So we'll",
    "textdich": ""
  },
  {
    "start": 59718.4,
    "end": 59724.56,
    "text": "tackle that in the next video. So let's create a fixture that will create a few initial posts so",
    "textdich": ""
  },
  {
    "start": 59724.56,
    "end": 59730.0,
    "text": "that we can actually test retrieving all posts. And we can use that same fixture for performing",
    "textdich": ""
  },
  {
    "start": 59730.0,
    "end": 59734.64,
    "text": "a few other tests or things like updating a post, right, we would need to have a post in our database",
    "textdich": ""
  },
  {
    "start": 59734.64,
    "end": 59738.64,
    "text": "to update a post, same thing with deleting anything with getting an individual post.",
    "textdich": ""
  },
  {
    "start": 59738.64,
    "end": 59742.64,
    "text": "So this fixture is definitely going to be very reusable across a lot of our tests.",
    "textdich": ""
  },
  {
    "start": 59742.64,
    "end": 59746.96,
    "text": "So let's figure out where we want to store our fixture, we could keep it in our test that posts",
    "textdich": ""
  },
  {
    "start": 59746.96,
    "end": 59752.56,
    "text": "test underscore post file, because all of our posts, all of our test posts, sorry, our",
    "textdich": ""
  },
  {
    "start": 59753.68,
    "end": 59758.64,
    "text": "tests for post data, I guess, if you want to call it that will require that fixture probably.",
    "textdich": ""
  },
  {
    "start": 59758.64,
    "end": 59765.28,
    "text": "However, there are going to be other tests in our application that will need posts initially. So when",
    "textdich": ""
  },
  {
    "start": 59765.28,
    "end": 59769.04,
    "text": "you want to vote, we need a post already in our database. So I'm actually going to put it in our",
    "textdich": ""
  },
  {
    "start": 59769.04,
    "end": 59773.6,
    "text": "conf test file so that you know, everyone has access to it. Well, technically, anyone can access",
    "textdich": ""
  },
  {
    "start": 59773.6,
    "end": 59778.16,
    "text": "any fixture if they import it, but having it in the confidence file makes it simpler because we",
    "textdich": ""
  },
  {
    "start": 59778.16,
    "end": 59782.32,
    "text": "don't have to import it. So I'm going to put it in here. And I'm going to this, this fixture is",
    "textdich": ""
  },
  {
    "start": 59782.32,
    "end": 59786.8,
    "text": "going to be a little bit different, just because we're actually going to create the posts in the",
    "textdich": ""
  },
  {
    "start": 59786.8,
    "end": 59797.84,
    "text": "database ourselves. So here, I'm going to call this test underscore posts. And so what we need is",
    "textdich": ""
  },
  {
    "start": 59797.84,
    "end": 59801.84,
    "text": "a couple of things. So first of all, we need a test user, because if we don't have a user,",
    "textdich": ""
  },
  {
    "start": 59801.84,
    "end": 59806.0,
    "text": "we can't create posts, because all posts need to be associated with the user. Since we're going",
    "textdich": ""
  },
  {
    "start": 59806.0,
    "end": 59815.92,
    "text": "to work with the database, we're going to pass in session also. All right, and let's define some",
    "textdich": ""
  },
  {
    "start": 59815.92,
    "end": 59828.08,
    "text": "post data. So I'm going to create an array of dictionaries. And I'm actually going to copy and",
    "textdich": ""
  },
  {
    "start": 59828.08,
    "end": 59840.16,
    "text": "paste some data just because I don't want you guys to sit and watch as usual. All right, so what",
    "textdich": ""
  },
  {
    "start": 59840.16,
    "end": 59844.88,
    "text": "we're doing here now is we're creating three posts. So in this post data, I have an array,",
    "textdich": ""
  },
  {
    "start": 59844.88,
    "end": 59848.72,
    "text": "or sorry, in a list, and then a dictionary. And then here, we're providing the title,",
    "textdich": ""
  },
  {
    "start": 59849.36,
    "end": 59854.96,
    "text": "and the content, and the owner ID. Alright, so that's going to create a post. And we're",
    "textdich": ""
  },
  {
    "start": 59854.96,
    "end": 59859.12,
    "text": "grabbing the owner ID from the test user fixture. And we're just gonna grab the ID from that. So",
    "textdich": ""
  },
  {
    "start": 59859.12,
    "end": 59862.72,
    "text": "we're saying the owner ID, and then I'm just going to create another post here and another post here,",
    "textdich": ""
  },
  {
    "start": 59862.72,
    "end": 59867.84,
    "text": "for the same user is essentially creating three posts. And so now, since we have access to session,",
    "textdich": ""
  },
  {
    "start": 59867.84,
    "end": 59872.0,
    "text": "we can actually just directly tap into our database and create that information for us,",
    "textdich": ""
  },
  {
    "start": 59872.0,
    "end": 59878.8,
    "text": "or those posts. So we can do well, the when it comes to SQL alchemy,",
    "textdich": ""
  },
  {
    "start": 59878.8,
    "end": 59887.6,
    "text": "if you want to add multiple entries into a database, we have access to the add all method,",
    "textdich": ""
  },
  {
    "start": 59887.6,
    "end": 59895.44,
    "text": "so we can call session dot add underscore all. And then here, we have to pass in a list",
    "textdich": ""
  },
  {
    "start": 59898.88,
    "end": 59903.52,
    "text": "of user models. So we would this would be, you know, schemas,",
    "textdich": ""
  },
  {
    "start": 59903.52,
    "end": 59909.92,
    "text": "but not schemas, we'd actually have to import models. So I'm going to import, do I have models",
    "textdich": ""
  },
  {
    "start": 59909.92,
    "end": 59916.56,
    "text": "already in here doesn't look like it. So I'll import that as well. So we'll say from app dot,",
    "textdich": ""
  },
  {
    "start": 59917.52,
    "end": 59931.2,
    "text": "let's just say from app, import models. And I can say models dot user. So we'll create a new user",
    "textdich": ""
  },
  {
    "start": 59931.2,
    "end": 59935.28,
    "text": "model. And then we have to pass in all of this data. So right, we would need to be title equals,",
    "textdich": ""
  },
  {
    "start": 59935.84,
    "end": 59944.32,
    "text": "you know, blah, and then then content equals blah. And then we'd have to do another one. So I'd",
    "textdich": ""
  },
  {
    "start": 59944.32,
    "end": 59955.28,
    "text": "copy this, paste this in here. And so on, and then this would add it all at once. Now I can manually",
    "textdich": ""
  },
  {
    "start": 59955.28,
    "end": 59961.2,
    "text": "hard code this value into here, just to kind of keep things simple. And I could do that. And actually,",
    "textdich": ""
  },
  {
    "start": 59961.2,
    "end": 59966.0,
    "text": "I will show you how to do that just just in case, but I'll show you what I did when I was doing a",
    "textdich": ""
  },
  {
    "start": 59966.0,
    "end": 59974.16,
    "text": "dry run. So I'll copy the title is going to be set to first title. The second title is going to be",
    "textdich": ""
  },
  {
    "start": 59974.16,
    "end": 59989.28,
    "text": "here content and second content. And then the owner ID is going to be the same for both luckily,",
    "textdich": ""
  },
  {
    "start": 59989.92,
    "end": 60001.76,
    "text": "well, all three actually. And that's not in the right format.",
    "textdich": ""
  },
  {
    "start": 60001.76,
    "end": 60009.2,
    "text": "Oh, don't do that. It should be equals. And then the same thing here.",
    "textdich": ""
  },
  {
    "start": 60016.72,
    "end": 60020.4,
    "text": "And if we wanted to, we can copy this last one and then put the third one in.",
    "textdich": ""
  },
  {
    "start": 60022.16,
    "end": 60030.32,
    "text": "This will be called third title. Third content. All right, let's save this. The auto formatter",
    "textdich": ""
  },
  {
    "start": 60030.32,
    "end": 60036.24,
    "text": "did not do much to help me out here still looks pretty ugly, but that's okay. And so that's one",
    "textdich": ""
  },
  {
    "start": 60036.24,
    "end": 60041.36,
    "text": "way of doing this. So it'll add it all. And then all we have to do is just do a session dot commit.",
    "textdich": ""
  },
  {
    "start": 60043.76,
    "end": 60047.04,
    "text": "And then to get all the data back, I can just do a session dot query.",
    "textdich": ""
  },
  {
    "start": 60048.48,
    "end": 60053.04,
    "text": "And we'll just say models dot post. Oh, this should be user, by the way, not",
    "textdich": ""
  },
  {
    "start": 60053.04,
    "end": 60066.48,
    "text": "I mean, this should be post not user, because we're creating a post and not a user with a",
    "textdich": ""
  },
  {
    "start": 60066.48,
    "end": 60074.64,
    "text": "models dot post. And we can just grab all of them. Now, if you wanted to be able to take this",
    "textdich": ""
  },
  {
    "start": 60074.64,
    "end": 60080.08,
    "text": "dictionary and convert it easily to this format, there's a couple things you have to do. But",
    "textdich": ""
  },
  {
    "start": 60080.08,
    "end": 60083.52,
    "text": "technically, you could just leave like this and it'll work fine. But just this is a little bit",
    "textdich": ""
  },
  {
    "start": 60083.52,
    "end": 60087.76,
    "text": "more of Python than anything else. If you didn't want to hard code it in like this,",
    "textdich": ""
  },
  {
    "start": 60087.76,
    "end": 60090.88,
    "text": "because at this point, we don't even need this dictionary. But if you wanted to take this",
    "textdich": ""
  },
  {
    "start": 60090.88,
    "end": 60099.2,
    "text": "dictionary and convert it into a list of user models or sorry, post models, what we can do is",
    "textdich": ""
  },
  {
    "start": 60099.2,
    "end": 60105.52,
    "text": "we can use the map function. And so the map function works like this, you call map,",
    "textdich": ""
  },
  {
    "start": 60105.52,
    "end": 60112.16,
    "text": "then you call some function that you define yourself. And then you call the posts underscore",
    "textdich": ""
  },
  {
    "start": 60112.96,
    "end": 60117.44,
    "text": "data list that we have up here. And so this function, what it's going to do is it's going",
    "textdich": ""
  },
  {
    "start": 60117.44,
    "end": 60122.48,
    "text": "to iterate through this list. And it's going to take each item in the list, which is a dictionary,",
    "textdich": ""
  },
  {
    "start": 60122.48,
    "end": 60128.48,
    "text": "and it's going to convert it into a model dot post. So how exactly does that look? Well,",
    "textdich": ""
  },
  {
    "start": 60128.48,
    "end": 60135.92,
    "text": "let's first of all, let's rename this. And I'm just gonna call this maybe create user model. And",
    "textdich": ""
  },
  {
    "start": 60135.92,
    "end": 60142.56,
    "text": "I'll define a function up here. And I don't know why I keep saying user it's a post,",
    "textdich": ""
  },
  {
    "start": 60143.76,
    "end": 60147.6,
    "text": "reading posts, not users, create post underscore model.",
    "textdich": ""
  },
  {
    "start": 60152.4,
    "end": 60157.2,
    "text": "And this is going to get passed in some, some, some object, but technically, what's going to",
    "textdich": ""
  },
  {
    "start": 60157.2,
    "end": 60163.6,
    "text": "get passed into this function is each dictionary. So I'll call this post underscore data.",
    "textdich": ""
  },
  {
    "start": 60164.72,
    "end": 60167.76,
    "text": "Well, actually, don't call post data, I'll just call this post.",
    "textdich": ""
  },
  {
    "start": 60169.44,
    "end": 60172.16,
    "text": "And so we have to put the logic of converting a dictionary",
    "textdich": ""
  },
  {
    "start": 60173.36,
    "end": 60179.76,
    "text": "into a post model. And that's pretty easy. All we have to do is just say, models dot post.",
    "textdich": ""
  },
  {
    "start": 60179.76,
    "end": 60187.44,
    "text": "And then we take post, and then we spread it. That's it. Alright, so what's happening here is",
    "textdich": ""
  },
  {
    "start": 60187.44,
    "end": 60192.88,
    "text": "we're taking the dictionary, which is what it's going to get passed into here. And then we're",
    "textdich": ""
  },
  {
    "start": 60192.88,
    "end": 60197.68,
    "text": "taking it and spreading it so it looks like title equals blah, content equals blah. And then we can",
    "textdich": ""
  },
  {
    "start": 60197.68,
    "end": 60209.36,
    "text": "just return that. And then this map, we just set it equal to some variable, I'll call this maybe",
    "textdich": ""
  },
  {
    "start": 60210.64,
    "end": 60220.8,
    "text": "post map. And I'm forgetting an E. Okay, so then, so that's going to return. So that's going to,",
    "textdich": ""
  },
  {
    "start": 60220.8,
    "end": 60224.56,
    "text": "so that's going to essentially convert all of those two user models, but it doesn't return a",
    "textdich": ""
  },
  {
    "start": 60224.56,
    "end": 60229.92,
    "text": "list, it returns a map, which isn't quite the same thing. So to convert it to a list, all we have to",
    "textdich": ""
  },
  {
    "start": 60229.92,
    "end": 60238.72,
    "text": "do is then say, posts, equals, we just say list, and then post underscore map. So I'll convert it",
    "textdich": ""
  },
  {
    "start": 60238.72,
    "end": 60243.68,
    "text": "to a list. And then under a session dot at all, instead of hard coding those values, I can just",
    "textdich": ""
  },
  {
    "start": 60243.68,
    "end": 60250.8,
    "text": "say session dot add underscore all. And I just pass in posts. And we can just comment out this",
    "textdich": ""
  },
  {
    "start": 60250.8,
    "end": 60258.48,
    "text": "line right here. Either one works, choose whichever one you like, I don't really care. But this is all",
    "textdich": ""
  },
  {
    "start": 60258.48,
    "end": 60267.04,
    "text": "we need to do, we just have to return this. I'll save this as posts. And we'll return posts.",
    "textdich": ""
  },
  {
    "start": 60269.04,
    "end": 60274.64,
    "text": "And that should create three posts in our database. And so now if I go to test posts,",
    "textdich": ""
  },
  {
    "start": 60274.64,
    "end": 60292.96,
    "text": "and make this reliant on what did I call it get test posts. If I then run this, you can see that",
    "textdich": ""
  },
  {
    "start": 60292.96,
    "end": 60301.92,
    "text": "we did in fact get multiple test posts. And it's up to you to decide what checks you want to perform.",
    "textdich": ""
  },
  {
    "start": 60301.92,
    "end": 60308.8,
    "text": "If we go to our post route, and we take a look at the schemas, you can see that it's going to be a",
    "textdich": ""
  },
  {
    "start": 60308.8,
    "end": 60314.24,
    "text": "type list of schemas that post out a list comes from the typing library. So let's see if we can",
    "textdich": ""
  },
  {
    "start": 60314.24,
    "end": 60319.36,
    "text": "actually do this. I never actually tried this with this. But I think it should work. So I will import",
    "textdich": ""
  },
  {
    "start": 60319.36,
    "end": 60337.6,
    "text": "that. And then we'll also import from app from app import schemas. And I'll just say",
    "textdich": ""
  },
  {
    "start": 60337.6,
    "end": 60353.52,
    "text": "posts equals res dot JSON. And I'll say actually schemas dot what is it post out? Yep, it's going to",
    "textdich": ""
  },
  {
    "start": 60353.52,
    "end": 60363.6,
    "text": "be post out. I don't think that'll work because yeah, I don't think that'll work because we're",
    "textdich": ""
  },
  {
    "start": 60363.6,
    "end": 60368.56,
    "text": "this is expecting one individual post, but this is going to be a list of posts. So I don't actually,",
    "textdich": ""
  },
  {
    "start": 60369.2,
    "end": 60374.72,
    "text": "I wonder if I can do, yeah, we'd have to do this manually, like we'd have to iterate through it and",
    "textdich": ""
  },
  {
    "start": 60374.72,
    "end": 60380.16,
    "text": "then basically copy it out. And I think that would just take too much work. So we'll leave this",
    "textdich": ""
  },
  {
    "start": 60380.16,
    "end": 60384.56,
    "text": "section out. If you guys want to take that as a challenge, you can essentially create a post",
    "textdich": ""
  },
  {
    "start": 60384.56,
    "end": 60393.36,
    "text": "pedantic model for each entry within within the response and then try to validate each single one.",
    "textdich": ""
  },
  {
    "start": 60393.36,
    "end": 60397.92,
    "text": "So instead, I'm just going to do a simple check, I'm just going to say assert. And we'll just grab",
    "textdich": ""
  },
  {
    "start": 60397.92,
    "end": 60407.6,
    "text": "the length of response dot JSON. And I'm going to set this equal equal to length of test underscore",
    "textdich": ""
  },
  {
    "start": 60407.6,
    "end": 60414.96,
    "text": "posts, just to make sure that we get three exact posts. And if we ever change the number of posts",
    "textdich": ""
  },
  {
    "start": 60414.96,
    "end": 60418.64,
    "text": "that we have, this should automatically get updated. I think that's a good enough check for",
    "textdich": ""
  },
  {
    "start": 60418.64,
    "end": 60426.64,
    "text": "this test. Let's try this again. And we shouldn't get any errors and it looks like it passed just",
    "textdich": ""
  },
  {
    "start": 60426.64,
    "end": 60432.08,
    "text": "fine. Okay, so I figured, you know what, let me go ahead and just show you how we can actually",
    "textdich": ""
  },
  {
    "start": 60432.72,
    "end": 60436.96,
    "text": "do the validation using our schemas, we're going to use the same exact logic that we use here when",
    "textdich": ""
  },
  {
    "start": 60436.96,
    "end": 60442.64,
    "text": "it comes to performing the map, because we're essentially going to take a list of dictionaries",
    "textdich": ""
  },
  {
    "start": 60442.64,
    "end": 60451.04,
    "text": "and convert it to a list of schema models. So we're going to go back to our post our test.",
    "textdich": ""
  },
  {
    "start": 60451.92,
    "end": 60454.72,
    "text": "And what we're going to do is we're going to first define a function",
    "textdich": ""
  },
  {
    "start": 60456.88,
    "end": 60461.92,
    "text": "that's called, I don't know, we can call it validate. And this is going to receive a post.",
    "textdich": ""
  },
  {
    "start": 60461.92,
    "end": 60468.72,
    "text": "And that's going to be a post that's going to be a dictionary that we get back. And all we're going",
    "textdich": ""
  },
  {
    "start": 60468.72,
    "end": 60476.96,
    "text": "to do is we're going to return schemas dot post out. And here, we're going to pass in the data,",
    "textdich": ""
  },
  {
    "start": 60476.96,
    "end": 60481.76,
    "text": "we're just going to unpack it with post. So that's all we have to do. And then we can call the map",
    "textdich": ""
  },
  {
    "start": 60481.76,
    "end": 60488.0,
    "text": "function like we did before. And I'll store this in a variable called a post posts underscore map,",
    "textdich": ""
  },
  {
    "start": 60488.0,
    "end": 60493.6,
    "text": "which equals map, we're going to call the validate function, and we're going to pass in res dot JSON.",
    "textdich": ""
  },
  {
    "start": 60496.0,
    "end": 60498.48,
    "text": "And so we have a map, if you wanted to, you could technically",
    "textdich": ""
  },
  {
    "start": 60499.52,
    "end": 60505.28,
    "text": "convert it to a list by calling list post dot map, but we're not doing anything with that data.",
    "textdich": ""
  },
  {
    "start": 60505.28,
    "end": 60510.48,
    "text": "However, just to show you, we can just print this out real quick. And so now if I run this,",
    "textdich": ""
  },
  {
    "start": 60510.48,
    "end": 60518.88,
    "text": "and we take a look at the print statement, you can see, we've got a post out model. And it does all",
    "textdich": ""
  },
  {
    "start": 60518.88,
    "end": 60522.88,
    "text": "the validation. So it's going to make sure all of the properties are set and are there. And because",
    "textdich": ""
  },
  {
    "start": 60522.88,
    "end": 60529.76,
    "text": "we have it set as a post, as a post out pedantic model, you'll see that it's very easy to perform",
    "textdich": ""
  },
  {
    "start": 60529.76,
    "end": 60536.16,
    "text": "extra checks with the cert statement. So now I can do other checks, like maybe I want to say,",
    "textdich": ""
  },
  {
    "start": 60536.16,
    "end": 60549.68,
    "text": "actually, let me first save this as a variable say posts list equals list of posts map. Oh,",
    "textdich": ""
  },
  {
    "start": 60549.68,
    "end": 60556.08,
    "text": "and that's supposed to be post map. We have access to this list. And now what I can do is I can just",
    "textdich": ""
  },
  {
    "start": 60556.08,
    "end": 60567.52,
    "text": "say, assert. And here we can grab posts underscore list, grab the first post. And we can check certain",
    "textdich": ""
  },
  {
    "start": 60567.52,
    "end": 60574.64,
    "text": "fields, I could say like, Hey, does the ID sorry, it's gonna be the post dot ID. Does that equal",
    "textdich": ""
  },
  {
    "start": 60574.64,
    "end": 60583.44,
    "text": "equal test underscore posts? We'll grab the first object, and then grab the ID. Well, actually,",
    "textdich": ""
  },
  {
    "start": 60583.44,
    "end": 60589.68,
    "text": "it's going to be, I think I could do just dot ID. Yeah, because test post, keep in mind, when we do",
    "textdich": ""
  },
  {
    "start": 60589.68,
    "end": 60597.44,
    "text": "test post, this is going to return this is going to return a not a pedantic model or a dictionary,",
    "textdich": ""
  },
  {
    "start": 60597.44,
    "end": 60602.32,
    "text": "but this is going to return a SQL alchemy model. So a little bit different. But we just call it",
    "textdich": ""
  },
  {
    "start": 60602.32,
    "end": 60611.52,
    "text": "dot ID. And I think this should work. So let's test this out. I did not work. What happened here?",
    "textdich": ""
  },
  {
    "start": 60611.52,
    "end": 60618.72,
    "text": "Yep. So I accidentally grabbed. I see. Yeah, that so this is expected just because I don't know the",
    "textdich": ""
  },
  {
    "start": 60618.72,
    "end": 60626.32,
    "text": "order that we're going to retrieve the posts in. I didn't provide a order by filter criteria when",
    "textdich": ""
  },
  {
    "start": 60626.32,
    "end": 60631.84,
    "text": "it comes to my my get post functionality. So it could be returning any posts right now it's saying",
    "textdich": ""
  },
  {
    "start": 60631.84,
    "end": 60637.44,
    "text": "that a this ID happens to be to this one happens to be one. So it the order doesn't matter. So this",
    "textdich": ""
  },
  {
    "start": 60637.44,
    "end": 60642.64,
    "text": "isn't exactly the best way to do it. But if you want to figure out a way to set up the order,",
    "textdich": ""
  },
  {
    "start": 60642.64,
    "end": 60646.56,
    "text": "so that you always receive maybe the post with the lowest ID, and then you compare the two,",
    "textdich": ""
  },
  {
    "start": 60646.56,
    "end": 60649.92,
    "text": "that would be perfectly fine. And then you can check other properties like what's the",
    "textdich": ""
  },
  {
    "start": 60649.92,
    "end": 60654.88,
    "text": "the title? Does it match up with what we should expect it to be? Does the content match up with",
    "textdich": ""
  },
  {
    "start": 60654.88,
    "end": 60660.96,
    "text": "the content, you can put as many asserts as you can. But by having by doing this, we are able to",
    "textdich": ""
  },
  {
    "start": 60660.96,
    "end": 60665.76,
    "text": "perform a validation to ensure that at least we get what we expect, all the fields are there. And",
    "textdich": ""
  },
  {
    "start": 60665.76,
    "end": 60670.4,
    "text": "then it's just up to us to set up the necessary search to verify that the values are correct.",
    "textdich": ""
  },
  {
    "start": 60671.76,
    "end": 60675.44,
    "text": "But I'll remove that. And I think it's okay, just to keep it like this for now. All right,",
    "textdich": ""
  },
  {
    "start": 60675.44,
    "end": 60680.56,
    "text": "so we set up a test for getting all posts. And what I want to do now is I want to test to make",
    "textdich": ""
  },
  {
    "start": 60680.56,
    "end": 60686.56,
    "text": "sure that a unauthenticated user is not able to retrieve all the posts. So I'll create a new test",
    "textdich": ""
  },
  {
    "start": 60686.56,
    "end": 60696.24,
    "text": "and I'll call this test. How about unauthorized user underscore get underscore all underscore posts.",
    "textdich": ""
  },
  {
    "start": 60696.56,
    "end": 60702.56,
    "text": "And instead of using authorized client, because we want to test if a unauthenticated user tries to",
    "textdich": ""
  },
  {
    "start": 60702.56,
    "end": 60706.96,
    "text": "access as they get a 401, we'll just use the regular client, which is going to be a non logged",
    "textdich": ""
  },
  {
    "start": 60706.96,
    "end": 60713.36,
    "text": "in user. And we want to make sure that test posts are here as well. And remember, because we're",
    "textdich": ""
  },
  {
    "start": 60713.36,
    "end": 60720.08,
    "text": "calling test posts, that's going to ensure that because test post is reliant on test user, it",
    "textdich": ""
  },
  {
    "start": 60720.08,
    "end": 60724.8,
    "text": "will in fact be a test user as well. So just to give you a heads up, we don't actually have to",
    "textdich": ""
  },
  {
    "start": 60724.8,
    "end": 60729.68,
    "text": "pass in test user into here, because this should handle that automatically. And here I'll just say",
    "textdich": ""
  },
  {
    "start": 60729.68,
    "end": 60739.36,
    "text": "res equals client dot get. And we'll just go to posts again. And I'm just going to assert a simple",
    "textdich": ""
  },
  {
    "start": 60739.36,
    "end": 60748.48,
    "text": "401. So res dot status code equals equals 401. That's really the only check I want to do there.",
    "textdich": ""
  },
  {
    "start": 60748.48,
    "end": 60751.36,
    "text": "If they're unauthorized or unauthorized, there's no other things to check really.",
    "textdich": ""
  },
  {
    "start": 60752.56,
    "end": 60758.48,
    "text": "And we can see that it did successfully pass. Okay, so we've tested the get all posts, we're",
    "textdich": ""
  },
  {
    "start": 60758.48,
    "end": 60763.68,
    "text": "going to now move on to getting an individual post by an ID. But before we do that, I think",
    "textdich": ""
  },
  {
    "start": 60763.68,
    "end": 60768.8,
    "text": "it's best to actually test getting an individual post by ID when you're an unauthenticated user,",
    "textdich": ""
  },
  {
    "start": 60768.8,
    "end": 60773.36,
    "text": "because we can essentially just copy this code. And I can just paste it here. And instead of",
    "textdich": ""
  },
  {
    "start": 60773.36,
    "end": 60781.36,
    "text": "doing a user get all posts, this will be user underscore get one post. And so everything else",
    "textdich": ""
  },
  {
    "start": 60781.36,
    "end": 60788.08,
    "text": "can be the same, we just have to change the specific URL. And so in this case, we're just",
    "textdich": ""
  },
  {
    "start": 60788.08,
    "end": 60792.32,
    "text": "going to grab the ID of one of the posts. So here, I'm going to change this to an F string.",
    "textdich": ""
  },
  {
    "start": 60792.32,
    "end": 60802.08,
    "text": "And I'm going to say test underscore posts. I will grab the first one. And then remember,",
    "textdich": ""
  },
  {
    "start": 60802.08,
    "end": 60806.88,
    "text": "this is a SQL alchemy model. And so we actually have to convert it to a dictionary. So we have",
    "textdich": ""
  },
  {
    "start": 60806.88,
    "end": 60817.68,
    "text": "to do dot underscore underscore dict underscore underscore. Sorry, the test post is not a SQL",
    "textdich": ""
  },
  {
    "start": 60817.68,
    "end": 60822.24,
    "text": "is it a secret? I think I could do ID. I think that should work. Actually, nevermind. I think we",
    "textdich": ""
  },
  {
    "start": 60822.24,
    "end": 60831.2,
    "text": "should be able to do that. That should be fine. And this should be a 401. So let's test this out.",
    "textdich": ""
  },
  {
    "start": 60831.76,
    "end": 60840.4,
    "text": "Let's make sure that this works. And that works. And what I also want to do is I want to test for",
    "textdich": ""
  },
  {
    "start": 60840.4,
    "end": 60848.08,
    "text": "a post test to retrieve a post with an ID that doesn't exist, I guess. So I'll call this a def",
    "textdich": ""
  },
  {
    "start": 60848.08,
    "end": 60863.68,
    "text": "test. Get one post, how about not exist. So this one, we're going to need an authorized client.",
    "textdich": ""
  },
  {
    "start": 60863.68,
    "end": 60874.72,
    "text": "And then test underscore posts as well. And I'm going to copy this. But we're going to",
    "textdich": ""
  },
  {
    "start": 60874.72,
    "end": 60887.76,
    "text": "change this and I'm going to hard code some random number like 88888. And then we'll just",
    "textdich": ""
  },
  {
    "start": 60887.76,
    "end": 60897.04,
    "text": "assert res dot status underscore code equals equals 404. Alright, so now we're going to try",
    "textdich": ""
  },
  {
    "start": 60897.04,
    "end": 60905.84,
    "text": "to retrieve a post that doesn't exist. And it looks like it passed perfect. So now let's actually",
    "textdich": ""
  },
  {
    "start": 60905.84,
    "end": 60910.8,
    "text": "try to retrieve a valid post. This one's gonna be a little bit more work. So we'll say def test,",
    "textdich": ""
  },
  {
    "start": 60910.8,
    "end": 60928.0,
    "text": "get one post. And we're going to copy these two. And I'm going to copy this one right here. We're",
    "textdich": ""
  },
  {
    "start": 60928.0,
    "end": 60933.6,
    "text": "going to retrieve the first post from test posts with an ID of zero, I think. And I'm just going",
    "textdich": ""
  },
  {
    "start": 60933.6,
    "end": 60941.76,
    "text": "to rename this to authorized client. And let's just do a print, let's see what this looks like.",
    "textdich": ""
  },
  {
    "start": 60941.76,
    "end": 60953.84,
    "text": "So we'll say res dot JSON. All right, and that's going to run. And it printed out the post. So we",
    "textdich": ""
  },
  {
    "start": 60953.84,
    "end": 60959.92,
    "text": "can see what that looks like. And just like we did before, we can also do a validation. So I can say",
    "textdich": ""
  },
  {
    "start": 60959.92,
    "end": 60976.08,
    "text": "post equals schema schema dot what is it? I think it's post out. Yeah, post out. And we're going to",
    "textdich": ""
  },
  {
    "start": 60976.08,
    "end": 60988.16,
    "text": "pass in res dot JSON. And do we need to unpack it? I think we have to unpack it. Let me let me",
    "textdich": ""
  },
  {
    "start": 60988.16,
    "end": 60992.8,
    "text": "print out post just to see what that looks like. Actually, I could just take a look at what we did",
    "textdich": ""
  },
  {
    "start": 60992.8,
    "end": 61006.64,
    "text": "up here. Yeah, we have done back it or spread it whatever it's called. Yep. So now we've got our",
    "textdich": ""
  },
  {
    "start": 61006.64,
    "end": 61012.48,
    "text": "post model. Well, it's our pedantic model. And so that does some level of validation. And then at",
    "textdich": ""
  },
  {
    "start": 61012.48,
    "end": 61018.88,
    "text": "this point, what we can do is I can say assert, and I can say does post dot and then take a look",
    "textdich": ""
  },
  {
    "start": 61018.88,
    "end": 61030.88,
    "text": "at the format, we have to grab the the post property. So it's this first one. Yeah. Yeah,",
    "textdich": ""
  },
  {
    "start": 61030.88,
    "end": 61036.96,
    "text": "so we'll grab post dot post dot ID equals equals, then we're going to compare it to the ID",
    "textdich": ""
  },
  {
    "start": 61036.96,
    "end": 61052.64,
    "text": "from test underscore posts. So it's a test underscore posts, zero dot ID. And I think that",
    "textdich": ""
  },
  {
    "start": 61052.64,
    "end": 61061.84,
    "text": "should still work. Alright, that works. And we can check a few other things. So we can say post",
    "textdich": ""
  },
  {
    "start": 61061.84,
    "end": 61073.76,
    "text": "dot post dot content. And if you're wondering why it's post dot post, remember, if you actually take",
    "textdich": ""
  },
  {
    "start": 61073.76,
    "end": 61078.96,
    "text": "a look at our schemas, our post out, you can see that we have to grab the information about the",
    "textdich": ""
  },
  {
    "start": 61078.96,
    "end": 61083.28,
    "text": "post, we have to go into the post property. And then from in there, we can then take a look at all",
    "textdich": ""
  },
  {
    "start": 61083.28,
    "end": 61098.16,
    "text": "of these fields. So that's why we have to do it like that. And we'll say test underscore posts,",
    "textdich": ""
  },
  {
    "start": 61101.12,
    "end": 61105.28,
    "text": "zero, and then let's see if we can do content, I believe this will actually throw an error.",
    "textdich": ""
  },
  {
    "start": 61105.28,
    "end": 61114.32,
    "text": "Because this is a SQL alchemy model. So it's going to, oh, that actually did work. I'm surprised.",
    "textdich": ""
  },
  {
    "start": 61114.32,
    "end": 61120.32,
    "text": "Okay. Alright, that worked. So if you guys want to, you can also essentially copy this line and",
    "textdich": ""
  },
  {
    "start": 61120.32,
    "end": 61127.92,
    "text": "then check to see if the titles match. You can essentially check every property if you really",
    "textdich": ""
  },
  {
    "start": 61127.92,
    "end": 61136.24,
    "text": "want to. So we'll just run that one last time. Perfect. And I'm just gonna remove this print",
    "textdich": ""
  },
  {
    "start": 61136.24,
    "end": 61140.72,
    "text": "statement. And so those are all of the tests that I want to do when it comes to retrieving an",
    "textdich": ""
  },
  {
    "start": 61140.72,
    "end": 61144.96,
    "text": "individual post, I think. I'm sure there's a couple of tests you guys might be able to think of. So",
    "textdich": ""
  },
  {
    "start": 61144.96,
    "end": 61148.8,
    "text": "feel free to implement that. But I think that's a good starting point on this. But in the next",
    "textdich": ""
  },
  {
    "start": 61148.8,
    "end": 61153.04,
    "text": "video, we'll take a look at creating a post. Okay, so let's move on to creating a post,",
    "textdich": ""
  },
  {
    "start": 61153.04,
    "end": 61159.2,
    "text": "I'll create a function, we'll call this test, create post. And we're going to need an authorized",
    "textdich": ""
  },
  {
    "start": 61159.2,
    "end": 61166.56,
    "text": "client. We're going to need a test user for sure. And lastly, this is purely optional. If you want",
    "textdich": ""
  },
  {
    "start": 61166.56,
    "end": 61171.2,
    "text": "to, we could also set up all of our test posts. If you wanted some posts in the database before",
    "textdich": ""
  },
  {
    "start": 61171.2,
    "end": 61175.68,
    "text": "you created one just to potentially see if you run into any issues when it comes to creating posts,",
    "textdich": ""
  },
  {
    "start": 61175.68,
    "end": 61181.84,
    "text": "when there's already posts, but it's optional. And we're going to set the res and we'll set this",
    "textdich": ""
  },
  {
    "start": 61181.84,
    "end": 61190.72,
    "text": "to authorized client dot post. And the URL is going to be slash posts. And then let's give all",
    "textdich": ""
  },
  {
    "start": 61190.72,
    "end": 61199.28,
    "text": "of the data for our new post. So we'll say JSON equals title. And you know what, instead of doing",
    "textdich": ""
  },
  {
    "start": 61199.28,
    "end": 61210.16,
    "text": "this, let's go ahead and set up a pytest dot what was it called? I already forgot what it's what",
    "textdich": ""
  },
  {
    "start": 61210.16,
    "end": 61216.88,
    "text": "did we call it a parameter. So Mark parameterized so that we can test multiple different values.",
    "textdich": ""
  },
  {
    "start": 61219.92,
    "end": 61225.28,
    "text": "Mark dot why is that not working? Okay, I have to import pytest.",
    "textdich": ""
  },
  {
    "start": 61226.32,
    "end": 61228.96,
    "text": "We don't need this line right here. So we'll say import pytest.",
    "textdich": ""
  },
  {
    "start": 61228.96,
    "end": 61242.96,
    "text": "And so what are the values that we need? How about title? We need title for sure. We need content.",
    "textdich": ""
  },
  {
    "start": 61242.96,
    "end": 61256.4,
    "text": "And then we can also give a published value if we wanted to. And then let's give all of our come",
    "textdich": ""
  },
  {
    "start": 61256.4,
    "end": 61263.6,
    "text": "on VSCR. Don't do that. Alright, fresh tuple. What do we want the title? How about awesome new title?",
    "textdich": ""
  },
  {
    "start": 61263.6,
    "end": 61277.04,
    "text": "Oh, awesome new title. What's the content? Awesome new content. And what do we want published to be?",
    "textdich": ""
  },
  {
    "start": 61277.04,
    "end": 61286.32,
    "text": "How about true? And we're going to copy this and I'm just going to put in some new values.",
    "textdich": ""
  },
  {
    "start": 61288.08,
    "end": 61302.4,
    "text": "Favorite pizza. And we'll say I love pepperoni. Oh, published. Let's say that's still a work in",
    "textdich": ""
  },
  {
    "start": 61302.4,
    "end": 61315.52,
    "text": "progress. I'll list skyscrapers. Alright, so we've got some test data. Let's pass those values in.",
    "textdich": ""
  },
  {
    "start": 61315.52,
    "end": 61330.64,
    "text": "So title is going to be set to title content is going to be set to content.",
    "textdich": ""
  },
  {
    "start": 61330.64,
    "end": 61344.16,
    "text": "And then finally, published will be set to published.",
    "textdich": ""
  },
  {
    "start": 61350.16,
    "end": 61353.6,
    "text": "Alright, we get a response back, let's do a little bit of validation with our",
    "textdich": ""
  },
  {
    "start": 61353.6,
    "end": 61360.96,
    "text": "pedantic model. So I can say schemas dot post. And we'll just take the response,",
    "textdich": ""
  },
  {
    "start": 61362.08,
    "end": 61368.0,
    "text": "convert it to JSON, of course, and set that to create it underscore post.",
    "textdich": ""
  },
  {
    "start": 61372.72,
    "end": 61378.16,
    "text": "And then we can just run a couple of checks. So let's assert the status code.",
    "textdich": ""
  },
  {
    "start": 61378.16,
    "end": 61383.28,
    "text": "status code. So for creating a new post, that should be a 201.",
    "textdich": ""
  },
  {
    "start": 61387.76,
    "end": 61393.76,
    "text": "And then for we can just assert a few extra values. So I could say like res dot",
    "textdich": ""
  },
  {
    "start": 61393.76,
    "end": 61410.72,
    "text": "actually, I can grab created underscore post dot title should equal title. And I can just do that.",
    "textdich": ""
  },
  {
    "start": 61411.44,
    "end": 61416.24,
    "text": "I need two equals. And then I can just copy this a few times will change this content",
    "textdich": ""
  },
  {
    "start": 61416.24,
    "end": 61429.28,
    "text": "content, and then published.",
    "textdich": ""
  },
  {
    "start": 61434.0,
    "end": 61437.68,
    "text": "And while we're at it, we can also verify that the owner ID gets set. So I can say created",
    "textdich": ""
  },
  {
    "start": 61437.68,
    "end": 61448.56,
    "text": "underscore post dot owner underscore ID equals equals and then we can grab a test user",
    "textdich": ""
  },
  {
    "start": 61451.2,
    "end": 61456.96,
    "text": "ID. So I think that's a good number of things to check. So at this point,",
    "textdich": ""
  },
  {
    "start": 61456.96,
    "end": 61459.12,
    "text": "I think it's safe to say that all of these should work.",
    "textdich": ""
  },
  {
    "start": 61459.12,
    "end": 61469.6,
    "text": "And all of those past awesome. So we've got the create post done. There's one other thing that",
    "textdich": ""
  },
  {
    "start": 61469.6,
    "end": 61477.36,
    "text": "I want to test with create post because if you go back to our, where does it our schemas? Where's",
    "textdich": ""
  },
  {
    "start": 61477.36,
    "end": 61485.52,
    "text": "our schema? I don't know if we have a create post post create. So that's just going to be from post",
    "textdich": ""
  },
  {
    "start": 61485.52,
    "end": 61490.72,
    "text": "base, we can see published is set to a default value of true. So let's test to see if the default",
    "textdich": ""
  },
  {
    "start": 61490.72,
    "end": 61498.88,
    "text": "value of true gets set. And we theoretically could have put this test in here just by doing a none",
    "textdich": ""
  },
  {
    "start": 61498.88,
    "end": 61502.4,
    "text": "here. But I like to separate this out into a different test because we are testing a different",
    "textdich": ""
  },
  {
    "start": 61502.4,
    "end": 61510.64,
    "text": "functionality in this case. So we'll say test, create post default, published, true.",
    "textdich": ""
  },
  {
    "start": 61510.64,
    "end": 61520.16,
    "text": "I'll do authorized underscore client and test user. Once again, we don't need test posts. But",
    "textdich": ""
  },
  {
    "start": 61520.16,
    "end": 61522.64,
    "text": "if you want to have it in the database, just to make sure that everything's",
    "textdich": ""
  },
  {
    "start": 61523.44,
    "end": 61526.48,
    "text": "not broken when you already have posts already in there, we can keep that in.",
    "textdich": ""
  },
  {
    "start": 61529.2,
    "end": 61534.56,
    "text": "And I'm just going to copy this. Actually, I could essentially copy all of this.",
    "textdich": ""
  },
  {
    "start": 61534.56,
    "end": 61551.52,
    "text": "And we can just give it arbitrary titles and then published will leave out published. We don't want",
    "textdich": ""
  },
  {
    "start": 61551.52,
    "end": 61571.92,
    "text": "that anymore. And I'll just copy these values here. And published should be set to true by",
    "textdich": ""
  },
  {
    "start": 61571.92,
    "end": 61576.24,
    "text": "default. So even though we're not passing it, it should get set. Everything else should still be",
    "textdich": ""
  },
  {
    "start": 61576.24,
    "end": 61589.92,
    "text": "just fine. So let's test that out. Oh, it looks like it failed. So what happened here?",
    "textdich": ""
  },
  {
    "start": 61589.92,
    "end": 61607.44,
    "text": "Oh, I just pasted in the wrong values.",
    "textdich": ""
  },
  {
    "start": 61612.16,
    "end": 61616.56,
    "text": "All right, and then one last thing, just like we did for all the other routes within the post,",
    "textdich": ""
  },
  {
    "start": 61616.56,
    "end": 61620.56,
    "text": "we also want to test if we're not logged in. So I'm going to copy this one",
    "textdich": ""
  },
  {
    "start": 61622.96,
    "end": 61626.32,
    "text": "and just rename it. So test unauthorized user",
    "textdich": ""
  },
  {
    "start": 61630.8,
    "end": 61634.8,
    "text": "create post, we don't need to have test user in there. But why not?",
    "textdich": ""
  },
  {
    "start": 61638.08,
    "end": 61641.12,
    "text": "And I'm going to just copy this right here.",
    "textdich": ""
  },
  {
    "start": 61641.12,
    "end": 61651.2,
    "text": "And then just change this to a plain client. All right, and this should work.",
    "textdich": ""
  },
  {
    "start": 61658.0,
    "end": 61662.08,
    "text": "All right, and that passed as well. So we have got all of the create post tests done.",
    "textdich": ""
  },
  {
    "start": 61662.72,
    "end": 61667.6,
    "text": "I think in the next video, we will tackle either deleting or updating a post. Okay,",
    "textdich": ""
  },
  {
    "start": 61667.6,
    "end": 61671.92,
    "text": "so let's move on to deleting posts. And the first thing that we're going to do is we're going to",
    "textdich": ""
  },
  {
    "start": 61671.92,
    "end": 61680.32,
    "text": "test a unauthorized user trying to delete a post. And we'll say test unauthorized whoops,",
    "textdich": ""
  },
  {
    "start": 61684.64,
    "end": 61691.84,
    "text": "delete post. And we'll have client test underscore user. And we'll definitely need test posts in this",
    "textdich": ""
  },
  {
    "start": 61691.84,
    "end": 61705.04,
    "text": "case. And then we can essentially copy well, copy this one right up here. And we'll change this to",
    "textdich": ""
  },
  {
    "start": 61706.08,
    "end": 61713.28,
    "text": "we don't need the body anymore. And the route is going to be we're going to pass test underscore",
    "textdich": ""
  },
  {
    "start": 61713.28,
    "end": 61739.28,
    "text": "posts zero dot ID. All right, let's test that out.",
    "textdich": ""
  },
  {
    "start": 61743.28,
    "end": 61753.04,
    "text": "Yep, and I realized this should be a delete actually not a post. That's why I got some other",
    "textdich": ""
  },
  {
    "start": 61753.04,
    "end": 61762.32,
    "text": "status code. Perfect. Alright, so we got that one to pass. And so now let's test a valid deletion.",
    "textdich": ""
  },
  {
    "start": 61762.32,
    "end": 61768.72,
    "text": "So I'll say test, delete post. And ideally, I guess we should be calling like success,",
    "textdich": ""
  },
  {
    "start": 61768.72,
    "end": 61774.64,
    "text": "like we successfully deleted it. And this time, we'll get the authorized underscore client.",
    "textdich": ""
  },
  {
    "start": 61777.2,
    "end": 61784.72,
    "text": "We'll get the test user and the test underscore posts. All right, we'll call this same request here",
    "textdich": ""
  },
  {
    "start": 61787.6,
    "end": 61789.44,
    "text": "and just change this to authorized client.",
    "textdich": ""
  },
  {
    "start": 61789.44,
    "end": 61801.92,
    "text": "And this should give us a 204. I mean, you theoretically could also, you know, then fetch",
    "textdich": ""
  },
  {
    "start": 61801.92,
    "end": 61807.04,
    "text": "all posts again, just to verify that the total number of posts is one less. But we're not going",
    "textdich": ""
  },
  {
    "start": 61807.04,
    "end": 61821.36,
    "text": "to do that in this case, you could however, do that. And that failed. So what happened here,",
    "textdich": ""
  },
  {
    "start": 61821.36,
    "end": 61828.0,
    "text": "a 422. And two things. So I don't even know how this one ran with the same issue, we should,",
    "textdich": ""
  },
  {
    "start": 61828.56,
    "end": 61832.96,
    "text": "we need to make that an f string. So I genuinely don't know why that actually worked.",
    "textdich": ""
  },
  {
    "start": 61832.96,
    "end": 61836.24,
    "text": "A little alarming, but let's test both of those out.",
    "textdich": ""
  },
  {
    "start": 61842.64,
    "end": 61844.8,
    "text": "All right, all of them passed. So we've got that done.",
    "textdich": ""
  },
  {
    "start": 61847.04,
    "end": 61851.68,
    "text": "Let's test deleting a non existent post. So an ID that doesn't exist in our database,",
    "textdich": ""
  },
  {
    "start": 61851.68,
    "end": 61866.64,
    "text": "I'll say test delete post non exist. And I'll just copy these. And I'll copy this. Actually,",
    "textdich": ""
  },
  {
    "start": 61866.64,
    "end": 61876.0,
    "text": "I'll just copy all of this. And I'll just change this to be some ridiculously high number. And",
    "textdich": ""
  },
  {
    "start": 61876.0,
    "end": 61892.96,
    "text": "this should be a 404. All right, that one looks good. Alright, so the next one's going to be a",
    "textdich": ""
  },
  {
    "start": 61892.96,
    "end": 61898.96,
    "text": "little bit trickier. We're going to create a test where a user tries to delete a post that isn't",
    "textdich": ""
  },
  {
    "start": 61898.96,
    "end": 61906.8,
    "text": "theirs. They try to delete a post that's owned by someone else. So we'll say test, delete other",
    "textdich": ""
  },
  {
    "start": 61907.76,
    "end": 61917.44,
    "text": "user post. Now there's a couple of issues here. So first of all, we need to actually have more",
    "textdich": ""
  },
  {
    "start": 61917.44,
    "end": 61924.88,
    "text": "than one user in the database. And we need to have posts owned by multiple users now. So this",
    "textdich": ""
  },
  {
    "start": 61924.88,
    "end": 61929.84,
    "text": "creates a couple of challenges. So how exactly are we going to set up more than one user? Well,",
    "textdich": ""
  },
  {
    "start": 61931.68,
    "end": 61937.28,
    "text": "I think it's best to use fixtures like we always have. And ideally, I would have set up a test",
    "textdich": ""
  },
  {
    "start": 61937.28,
    "end": 61945.12,
    "text": "user. Where is it my test user, I would have set up a test user to actually create multiple users",
    "textdich": ""
  },
  {
    "start": 61945.12,
    "end": 61950.88,
    "text": "in our database, but I didn't. So I just have one. If we had set it up to the multiple user in the",
    "textdich": ""
  },
  {
    "start": 61950.88,
    "end": 61955.04,
    "text": "database, then this test would be a little bit easier. Since I didn't, what I'm going to do is",
    "textdich": ""
  },
  {
    "start": 61955.04,
    "end": 61961.12,
    "text": "I'm essentially going to copy this, I'm going to copy this. And right above it, I'm going to create",
    "textdich": ""
  },
  {
    "start": 61961.12,
    "end": 61965.52,
    "text": "just a second one. I know it's not very original, probably not the most efficient way of doing",
    "textdich": ""
  },
  {
    "start": 61965.52,
    "end": 61971.28,
    "text": "things. And it's gonna be dependent on client. And we're just going to put a one or something,",
    "textdich": ""
  },
  {
    "start": 61971.28,
    "end": 61976.08,
    "text": "it doesn't really matter. Just so that we have another user, I'll make this 123. And so now we",
    "textdich": ""
  },
  {
    "start": 61976.08,
    "end": 61984.32,
    "text": "have two users, which is perfect. And down here in my posts data, what I'm actually going to do is",
    "textdich": ""
  },
  {
    "start": 61984.32,
    "end": 61995.52,
    "text": "I'm going to create one extra post. And we could just copy this data right here. And here, I'm",
    "textdich": ""
  },
  {
    "start": 61995.52,
    "end": 62000.96,
    "text": "actually going to pass in an extra picture, which is going to be test underscore user two. So before",
    "textdich": ""
  },
  {
    "start": 62000.96,
    "end": 62008.08,
    "text": "test post gets created, we're going to create the second user. And here, I could just grab the idea",
    "textdich": ""
  },
  {
    "start": 62008.08,
    "end": 62012.96,
    "text": "of test user two. And actually, I don't even need to do that. I don't know why I did that. Let's,",
    "textdich": ""
  },
  {
    "start": 62012.96,
    "end": 62017.76,
    "text": "we don't even need to create a post owned by that user. We'll leave it like this for now.",
    "textdich": ""
  },
  {
    "start": 62020.24,
    "end": 62023.04,
    "text": "Nope, I was right. Actually, we do. I don't know why I'm flip flopping like this. So,",
    "textdich": ""
  },
  {
    "start": 62023.04,
    "end": 62032.0,
    "text": "so the fourth post 1234 is going to be owned by test user two. And so now if I go back to test",
    "textdich": ""
  },
  {
    "start": 62032.0,
    "end": 62036.64,
    "text": "posts, here, we're going to be logged in, remember, authorized client is always going to be logged in",
    "textdich": ""
  },
  {
    "start": 62036.64,
    "end": 62042.88,
    "text": "as user one. So we're going to try to delete that fourth post. And so we can do that by grabbing",
    "textdich": ""
  },
  {
    "start": 62042.88,
    "end": 62053.12,
    "text": "the ID of the fourth post. So we'll say test underscore curly braces, test underscore posts.",
    "textdich": ""
  },
  {
    "start": 62053.12,
    "end": 62062.72,
    "text": "We'll grab the fourth one, which is an index of three. And then we'll grab ID. And this should,",
    "textdich": ""
  },
  {
    "start": 62064.0,
    "end": 62067.52,
    "text": "I forget what kind of error it should get or what status code.",
    "textdich": ""
  },
  {
    "start": 62067.52,
    "end": 62089.76,
    "text": "I think it's 403. So we'll do assert res dot status, underscore code equals equals 403.",
    "textdich": ""
  },
  {
    "start": 62089.76,
    "end": 62099.6,
    "text": "And it looks like that's successfully passed. And so that one's good. And that pretty much",
    "textdich": ""
  },
  {
    "start": 62099.6,
    "end": 62104.56,
    "text": "wraps up all of the delete tests that I want. And then in the next video, we'll take a look",
    "textdich": ""
  },
  {
    "start": 62104.56,
    "end": 62112.32,
    "text": "at updating posts. Alright, so let's update a post also a def test underscore update post.",
    "textdich": ""
  },
  {
    "start": 62112.32,
    "end": 62123.44,
    "text": "Here, we need an authorized client. And we'll need a test user. And we'll need test underscore posts.",
    "textdich": ""
  },
  {
    "start": 62125.76,
    "end": 62130.08,
    "text": "Alright, and I'm going to define a dictionary with the values that I want to update. And so here,",
    "textdich": ""
  },
  {
    "start": 62130.08,
    "end": 62134.96,
    "text": "I've got the title, the content, and then the ID, which I'm grabbing from test posts. And I'm just",
    "textdich": ""
  },
  {
    "start": 62134.96,
    "end": 62143.92,
    "text": "going to use the first test post in there. And I'll say res equals authorized client dot I think",
    "textdich": ""
  },
  {
    "start": 62143.92,
    "end": 62153.36,
    "text": "it's put. And then we're going to do an f string. And we'll say slash posts. And this one will be",
    "textdich": ""
  },
  {
    "start": 62153.36,
    "end": 62167.28,
    "text": "test underscore posts zero dot ID. And then we have to pass in the data. So we'll do JSON equals",
    "textdich": ""
  },
  {
    "start": 62168.8,
    "end": 62172.56,
    "text": "data. So we're passing in this dictionary.",
    "textdich": ""
  },
  {
    "start": 62172.56,
    "end": 62183.84,
    "text": "Alright, and just like we do with the other routes, if we go to the update post,",
    "textdich": ""
  },
  {
    "start": 62187.76,
    "end": 62191.44,
    "text": "technically, we're sending it out with the schema of posts. So we can just quickly validate",
    "textdich": ""
  },
  {
    "start": 62191.44,
    "end": 62202.72,
    "text": "it on our end on the test as well. So I can say updated post equals schemas dot post. And we'll",
    "textdich": ""
  },
  {
    "start": 62202.72,
    "end": 62214.16,
    "text": "pass in res dot JSON. And then we can assert a couple things. So we'll say res dot status code",
    "textdich": ""
  },
  {
    "start": 62214.16,
    "end": 62222.08,
    "text": "is going to equal what's an update, I guess we use 200 in that case. And then we can assert",
    "textdich": ""
  },
  {
    "start": 62222.08,
    "end": 62228.64,
    "text": "a few things. So we want to make sure that the new title we can do updated underscore post dot",
    "textdich": ""
  },
  {
    "start": 62228.64,
    "end": 62244.88,
    "text": "title equals equals data dot updated. Sorry, data dot. This is a dictionary so title. And we can do",
    "textdich": ""
  },
  {
    "start": 62244.88,
    "end": 62262.0,
    "text": "the same thing for the content. And I think that should be everything that we need. And just to,",
    "textdich": ""
  },
  {
    "start": 62262.96,
    "end": 62267.84,
    "text": "you know, just to make sure that my tests don't take too long, I'm going to start commenting out",
    "textdich": ""
  },
  {
    "start": 62267.84,
    "end": 62273.04,
    "text": "all of my other code, all of my other tests in this file, just to make things a little bit quicker.",
    "textdich": ""
  },
  {
    "start": 62273.04,
    "end": 62277.68,
    "text": "But you can see how it starts to slow down on just with just a couple of tests, really. So",
    "textdich": ""
  },
  {
    "start": 62279.44,
    "end": 62284.56,
    "text": "we can see that it did successfully pass. So that's good. We've got the first update post test.",
    "textdich": ""
  },
  {
    "start": 62287.52,
    "end": 62290.88,
    "text": "The next thing I want to do is I want to try to update another user's post.",
    "textdich": ""
  },
  {
    "start": 62290.88,
    "end": 62306.4,
    "text": "So we'll say update other user post. So this we need authorized client. We need test user. And we",
    "textdich": ""
  },
  {
    "start": 62306.4,
    "end": 62316.08,
    "text": "need test user to and test underscore posts. So we're going to try to update that last post.",
    "textdich": ""
  },
  {
    "start": 62316.08,
    "end": 62319.36,
    "text": "And so I'm going to define a dictionary with the values I want to update it with.",
    "textdich": ""
  },
  {
    "start": 62319.36,
    "end": 62327.44,
    "text": "So same thing, title, content, the only difference is the ID is going to be, I think it's actually",
    "textdich": ""
  },
  {
    "start": 62327.44,
    "end": 62335.04,
    "text": "three, the ID is going to be of the third, sorry, the fourth item in that list. And I just want to",
    "textdich": ""
  },
  {
    "start": 62335.04,
    "end": 62343.36,
    "text": "make sure it's the fourth one. So 1234. So yeah, we need a value of three. And I'm going to copy this",
    "textdich": ""
  },
  {
    "start": 62343.36,
    "end": 62365.04,
    "text": "and just change this to three. And we should get a status code of 403. And let's test that out.",
    "textdich": ""
  },
  {
    "start": 62365.04,
    "end": 62376.32,
    "text": "Perfect. And the last thing we need to do is a unauthenticated user trying to update a post.",
    "textdich": ""
  },
  {
    "start": 62376.32,
    "end": 62385.28,
    "text": "Actually, there's two more tests. So let me grab unauthorized user, this one right here.",
    "textdich": ""
  },
  {
    "start": 62385.28,
    "end": 62402.32,
    "text": "And this is going to be a put. And that should return a 401. And the last thing that we need",
    "textdich": ""
  },
  {
    "start": 62402.32,
    "end": 62416.0,
    "text": "is, and actually, I need to update this name. So unauthorized test update post. We can also set",
    "textdich": ""
  },
  {
    "start": 62416.0,
    "end": 62422.88,
    "text": "up a test to update a post that doesn't exist. And I believe we can just copy the deleting the",
    "textdich": ""
  },
  {
    "start": 62422.88,
    "end": 62437.04,
    "text": "post that doesn't exist delete post delete post non exist. So I could just copy this one. And",
    "textdich": ""
  },
  {
    "start": 62437.04,
    "end": 62453.92,
    "text": "change this to a put. And we'll change the name to be update. And let's test this out. Hopefully",
    "textdich": ""
  },
  {
    "start": 62453.92,
    "end": 62465.84,
    "text": "everything works. Oh, one failed what happened here. Okay, so it tries to validate it because",
    "textdich": ""
  },
  {
    "start": 62465.84,
    "end": 62470.96,
    "text": "I didn't provide any data. So I can just copy this data right here, just so we can give it something.",
    "textdich": ""
  },
  {
    "start": 62474.32,
    "end": 62482.32,
    "text": "And so we can say, JSON equals data. That's going to prevent us from getting validation errors.",
    "textdich": ""
  },
  {
    "start": 62486.08,
    "end": 62490.8,
    "text": "And that passed perfect. So let's take all that I'm just going to uncomment everything else.",
    "textdich": ""
  },
  {
    "start": 62490.8,
    "end": 62498.16,
    "text": "We can get all of our tests back. And that's going to wrap up updating posts. And that's",
    "textdich": ""
  },
  {
    "start": 62498.16,
    "end": 62505.84,
    "text": "actually going to wrap up all of my post cases. And so I guess the last thing that we got to do",
    "textdich": ""
  },
  {
    "start": 62505.84,
    "end": 62510.08,
    "text": "is set up all of the voting tests, then there's only going to be a couple of voting tests, but",
    "textdich": ""
  },
  {
    "start": 62510.08,
    "end": 62515.92,
    "text": "it should be fairly quick. Alright, so let's move on to setting up our test for voting,",
    "textdich": ""
  },
  {
    "start": 62515.92,
    "end": 62523.6,
    "text": "I'm going to create a new file, we'll call this test underscore votes.py. And let's define our",
    "textdich": ""
  },
  {
    "start": 62523.6,
    "end": 62529.92,
    "text": "first function. So I'll call this a test vote on post. So this is going to be a successful vote",
    "textdich": ""
  },
  {
    "start": 62529.92,
    "end": 62538.64,
    "text": "on a post. What do we need? We need an authorized client, of course. And we need to make sure that",
    "textdich": ""
  },
  {
    "start": 62538.64,
    "end": 62549.52,
    "text": "there's some posts already in our database. Alright, and now I can do a authorized client dot",
    "textdich": ""
  },
  {
    "start": 62550.8,
    "end": 62561.2,
    "text": "post. And here, this is going to be the vote endpoint. And let's just give it some data. So",
    "textdich": ""
  },
  {
    "start": 62561.2,
    "end": 62570.8,
    "text": "here, we're going to pass the post ID. So this will be post underscore ID. And we'll grab the",
    "textdich": ""
  },
  {
    "start": 62571.76,
    "end": 62581.68,
    "text": "first item in our list. Test posts dot ID. And I forgot my curly braces. That's why it's giving",
    "textdich": ""
  },
  {
    "start": 62581.68,
    "end": 62593.84,
    "text": "me an error right now. And we'll say what is the other direction. So we're going to be voting. So",
    "textdich": ""
  },
  {
    "start": 62593.84,
    "end": 62600.08,
    "text": "there's going to be a dir set to one. Alright, and now technically, if you look at what's happening,",
    "textdich": ""
  },
  {
    "start": 62600.08,
    "end": 62604.72,
    "text": "right, we're logged in as user one, and test posts. And if we go back to that fixture,",
    "textdich": ""
  },
  {
    "start": 62604.72,
    "end": 62612.32,
    "text": "where is this guy that's owned by user one as well. So technically, we're voting on our own post.",
    "textdich": ""
  },
  {
    "start": 62612.32,
    "end": 62617.04,
    "text": "But if you look at our code, we didn't actually put any checks to stop us from liking one of our",
    "textdich": ""
  },
  {
    "start": 62617.04,
    "end": 62623.12,
    "text": "own posts. So it's perfectly fine in our test to do that, just because our code is right now",
    "textdich": ""
  },
  {
    "start": 62623.12,
    "end": 62627.04,
    "text": "allowing it. If you didn't want to do it, then first of all, we'd have to update this code to",
    "textdich": ""
  },
  {
    "start": 62627.04,
    "end": 62630.56,
    "text": "make sure that we perform a check to verify that, hey, are we voting on our own code? If so,",
    "textdich": ""
  },
  {
    "start": 62630.56,
    "end": 62635.68,
    "text": "sorry, voting on our own post, then we should reject it. But we don't have that implemented.",
    "textdich": ""
  },
  {
    "start": 62635.68,
    "end": 62638.88,
    "text": "So for our test, it's perfectly fine, because that's how our application works.",
    "textdich": ""
  },
  {
    "start": 62639.52,
    "end": 62643.2,
    "text": "But obviously, if you wanted to, to make sure that you're testing someone else's post,",
    "textdich": ""
  },
  {
    "start": 62643.92,
    "end": 62648.96,
    "text": "then you could just obviously pick the last item. So the third item in the array,",
    "textdich": ""
  },
  {
    "start": 62648.96,
    "end": 62652.48,
    "text": "because that's owned by test user two, you just would have to make sure that you",
    "textdich": ""
  },
  {
    "start": 62652.48,
    "end": 62662.24,
    "text": "pass in test user two, in this case, just to make sure that he gets initialized. But that's a good",
    "textdich": ""
  },
  {
    "start": 62662.24,
    "end": 62666.4,
    "text": "assignment for you guys, I would see if you guys can implement logic to make sure that you can't",
    "textdich": ""
  },
  {
    "start": 62666.4,
    "end": 62671.2,
    "text": "vote on your own post. And then go ahead and create your very own test to make sure that if",
    "textdich": ""
  },
  {
    "start": 62671.2,
    "end": 62675.76,
    "text": "a user tries to vote on his own post, he gets an error of some kind. But for us, this is good",
    "textdich": ""
  },
  {
    "start": 62675.76,
    "end": 62680.96,
    "text": "enough. I'll leave it as three just so we're voting on someone else's post. I'm okay with that.",
    "textdich": ""
  },
  {
    "start": 62680.96,
    "end": 62688.8,
    "text": "And we can just assert res dot status code equals equals 201. Don't really need to check anything",
    "textdich": ""
  },
  {
    "start": 62688.8,
    "end": 62700.56,
    "text": "else. And now I can just change this to test votes. Okay, so that one successfully passed.",
    "textdich": ""
  },
  {
    "start": 62703.68,
    "end": 62707.2,
    "text": "All right, the next thing I want to test on is what happens when a user tries to",
    "textdich": ""
  },
  {
    "start": 62707.2,
    "end": 62712.4,
    "text": "vote or like a post that he's already liked. So we'll call this a def test underscore vote",
    "textdich": ""
  },
  {
    "start": 62712.4,
    "end": 62722.88,
    "text": "underscore twice underscore post. And so we'll need an authorized client will definitely test",
    "textdich": ""
  },
  {
    "start": 62722.88,
    "end": 62728.64,
    "text": "posts. But there's one little issue with this one, right, we need to have a post that's already",
    "textdich": ""
  },
  {
    "start": 62728.64,
    "end": 62735.6,
    "text": "been voted on. And we don't have that right now. So how do we do that? Well, I mean, theoretically,",
    "textdich": ""
  },
  {
    "start": 62735.6,
    "end": 62742.0,
    "text": "we could initialize our test post fixture with some votes. But instead of doing that, I'm going",
    "textdich": ""
  },
  {
    "start": 62742.0,
    "end": 62746.32,
    "text": "to actually create a new fixture. And I'm going to keep it in this file, because all this fixture",
    "textdich": ""
  },
  {
    "start": 62746.32,
    "end": 62752.8,
    "text": "will do is it will set up one of our posts to have a vote on it already. And I don't think really",
    "textdich": ""
  },
  {
    "start": 62752.8,
    "end": 62758.24,
    "text": "anybody else in any other test in our application is going to need that outside of the voting file,",
    "textdich": ""
  },
  {
    "start": 62758.24,
    "end": 62763.44,
    "text": "because that's the only one that's concerned with voting. So let's test that out. So we'll import",
    "textdich": ""
  },
  {
    "start": 62763.44,
    "end": 62782.64,
    "text": "py test. And we'll set up our fixture. So py test dot fixture. And I'll call this test vote maybe.",
    "textdich": ""
  },
  {
    "start": 62785.6,
    "end": 62788.32,
    "text": "And so for this picture to work, we definitely need an authorized client.",
    "textdich": ""
  },
  {
    "start": 62788.32,
    "end": 62802.88,
    "text": "Actually, we don't need an authorized client. We'll need a we'll need test posts. We'll need a",
    "textdich": ""
  },
  {
    "start": 62802.88,
    "end": 62806.72,
    "text": "session because we're going to just change it in the database directly. And then we'll need our",
    "textdich": ""
  },
  {
    "start": 62806.72,
    "end": 62812.4,
    "text": "test user. And so let's, well, we're going to have to import our models. So I'm going to say import",
    "textdich": ""
  },
  {
    "start": 62812.4,
    "end": 62825.76,
    "text": "import from app import models. And I'm going to say models dot vote. So let's create a new vote.",
    "textdich": ""
  },
  {
    "start": 62827.04,
    "end": 62832.4,
    "text": "So we're gonna have to pass in the post underscore ID, which is going to equal test underscore user.",
    "textdich": ""
  },
  {
    "start": 62833.6,
    "end": 62839.6,
    "text": "We'll grab the third one, dot ID. And then we need to pass in the user ID,",
    "textdich": ""
  },
  {
    "start": 62839.6,
    "end": 62845.92,
    "text": "which equals Oh, it looks like we actually Yeah, we already have the test user. So I can say test",
    "textdich": ""
  },
  {
    "start": 62845.92,
    "end": 62860.4,
    "text": "underscore user ID. And then I can just do session dot add new vote. And I need to create a variable",
    "textdich": ""
  },
  {
    "start": 62860.4,
    "end": 62872.24,
    "text": "or store this in a variable. So new vote. And then we can do session dot commit. And so down here,",
    "textdich": ""
  },
  {
    "start": 62872.24,
    "end": 62890.96,
    "text": "I can pass in test underscore vote. And I'll say res equals authorized client dot post.",
    "textdich": ""
  },
  {
    "start": 62890.96,
    "end": 62908.88,
    "text": "And then JSON equals what is the post ID we'll grab this from test underscore posts,",
    "textdich": ""
  },
  {
    "start": 62908.88,
    "end": 62927.36,
    "text": "grab the third. And we'll grab the ID. And then we'll set the the dir to be a one.",
    "textdich": ""
  },
  {
    "start": 62929.44,
    "end": 62936.72,
    "text": "We're trying to re vote on that vote. And we should get a 409. So we'll do a cert res dot",
    "textdich": ""
  },
  {
    "start": 62936.72,
    "end": 62950.16,
    "text": "status code equals equals 409. All right, let's test that out. One error. Oh, man, what happened",
    "textdich": ""
  },
  {
    "start": 62950.16,
    "end": 62961.2,
    "text": "here? That's a key error. So something very simple happened. And I see my mistake, there should be",
    "textdich": ""
  },
  {
    "start": 62961.2,
    "end": 62978.16,
    "text": "test posts. All right, let's try that out now. And that worked. Perfect. All right, now let's",
    "textdich": ""
  },
  {
    "start": 62978.16,
    "end": 62993.04,
    "text": "try successfully deleting a vote. And so we will need all of these will also need a test vote.",
    "textdich": ""
  },
  {
    "start": 62993.04,
    "end": 63006.56,
    "text": "And so we do res equals authorized client dot post once again. I'm just gonna copy all of this.",
    "textdich": ""
  },
  {
    "start": 63006.56,
    "end": 63019.32,
    "text": "So we got that and then the direction is going to be zero for deletion. And then we just need to",
    "textdich": ""
  },
  {
    "start": 63019.32,
    "end": 63033.12,
    "text": "assert res dot status code. This is going to equal I think we just left it as a 201. Okay,",
    "textdich": ""
  },
  {
    "start": 63033.12,
    "end": 63039.2,
    "text": "so that worked. And then now we want to delete a vote that doesn't exist. So unlike a post that",
    "textdich": ""
  },
  {
    "start": 63039.2,
    "end": 63053.28,
    "text": "doesn't that we never liked. So we'll say def test underscore, delete, vote, non exist. So we need",
    "textdich": ""
  },
  {
    "start": 63053.28,
    "end": 63058.64,
    "text": "the same exact stuff right here. I'm just gonna copy all of this for now. And then we'll change",
    "textdich": ""
  },
  {
    "start": 63058.64,
    "end": 63070.68,
    "text": "up the few details. direction zero, same post. But I'll just grab. Actually, we don't want the test",
    "textdich": ""
  },
  {
    "start": 63070.68,
    "end": 63074.92,
    "text": "vote because we want to make sure that there isn't a vote. So we're going to remove that fixture.",
    "textdich": ""
  },
  {
    "start": 63074.92,
    "end": 63090.12,
    "text": "And this should be a 404. Let's try that. That worked. And then finally, let's try voting on",
    "textdich": ""
  },
  {
    "start": 63090.12,
    "end": 63096.08,
    "text": "a post that doesn't exist. So yeah, liking a post that doesn't exist. So we'll say def toast,",
    "textdich": ""
  },
  {
    "start": 63096.08,
    "end": 63117.36,
    "text": "test, vote, post non exist. And copy all of these. I copy this that the direction to one and the ID",
    "textdich": ""
  },
  {
    "start": 63117.36,
    "end": 63138.2,
    "text": "is going to be 8000. And we expect the status code to be 404 as well. All right, it looks",
    "textdich": ""
  },
  {
    "start": 63138.2,
    "end": 63142.08,
    "text": "like everything's good. The last thing that we just want to check is make sure that a user who",
    "textdich": ""
  },
  {
    "start": 63142.08,
    "end": 63156.92,
    "text": "isn't authenticated can't vote. So I will copy this test vote on authorized user. And then we",
    "textdich": ""
  },
  {
    "start": 63156.92,
    "end": 63170.84,
    "text": "want just the regular client in this case. We'll do test posts, three dot ID. And this should be",
    "textdich": ""
  },
  {
    "start": 63170.84,
    "end": 63185.28,
    "text": "was it a 401? I can't remember, let me go to the other one, it should be 401. Okay. All right,",
    "textdich": ""
  },
  {
    "start": 63185.28,
    "end": 63191.52,
    "text": "guys, so I think we've covered all of the tests that I wanted to cover. We don't need this test",
    "textdich": ""
  },
  {
    "start": 63191.52,
    "end": 63196.52,
    "text": "calculations p y file, but I'll keep it in there in the repo just so you can take a look at it. The",
    "textdich": ""
  },
  {
    "start": 63196.52,
    "end": 63202.32,
    "text": "database.py file is absolutely useless now. So I'm actually going to just delete, I'll keep it in",
    "textdich": ""
  },
  {
    "start": 63202.32,
    "end": 63207.52,
    "text": "there just in case you want to see it. But most of it's moved to conflict test.py. But just to",
    "textdich": ""
  },
  {
    "start": 63207.52,
    "end": 63213.76,
    "text": "make sure that everything's still working, I'm going to run my tests for all Oh, what happened",
    "textdich": ""
  },
  {
    "start": 63213.76,
    "end": 63223.04,
    "text": "here? Nope, nope, nope, oh, oh. Okay, yeah, that was wild. All right, move this. Let's see what",
    "textdich": ""
  },
  {
    "start": 63223.04,
    "end": 63235.16,
    "text": "happens. Hopefully everything passes. And all 46 tests have successfully passed. So that pretty",
    "textdich": ""
  },
  {
    "start": 63235.16,
    "end": 63240.64,
    "text": "much wraps up all of the testing section. I recommend you guys think of different scenarios",
    "textdich": ""
  },
  {
    "start": 63240.64,
    "end": 63245.88,
    "text": "that could potentially break our application and set up tests for each and every individual scenario,",
    "textdich": ""
  },
  {
    "start": 63245.88,
    "end": 63250.28,
    "text": "because that's how you successfully set up tests, because you want to make sure you cover every",
    "textdich": ""
  },
  {
    "start": 63250.28,
    "end": 63256.56,
    "text": "individual corner case that you can possibly think of. Currently, when it comes to adding in new",
    "textdich": ""
  },
  {
    "start": 63256.56,
    "end": 63261.84,
    "text": "features and making changes to our code, we have to go through a very manual and cumbersome process",
    "textdich": ""
  },
  {
    "start": 63261.84,
    "end": 63266.88,
    "text": "before we can get those changes pushed out to our production environment. And so what I think would",
    "textdich": ""
  },
  {
    "start": 63266.88,
    "end": 63272.12,
    "text": "be good is for us to set up a CI CD pipeline so that we can do all of this in an automated fashion.",
    "textdich": ""
  },
  {
    "start": 63272.12,
    "end": 63276.96,
    "text": "So I've created a couple of slides just to kind of go over what our CI CD pipeline is going to do.",
    "textdich": ""
  },
  {
    "start": 63276.96,
    "end": 63283.6,
    "text": "And I've got the generic definition of CI CD. And it's probably not a very good definition. And I",
    "textdich": ""
  },
  {
    "start": 63283.6,
    "end": 63286.24,
    "text": "was thinking about just leaving out the slide, because it doesn't really provide much, but I",
    "textdich": ""
  },
  {
    "start": 63286.24,
    "end": 63291.96,
    "text": "figured I just added just in case. So CI CD stands for continuous integration and continuous delivery.",
    "textdich": ""
  },
  {
    "start": 63291.96,
    "end": 63298.28,
    "text": "So continuous integration is the automated process to build package and test your application. And",
    "textdich": ""
  },
  {
    "start": 63298.28,
    "end": 63303.32,
    "text": "then the continuous delivery picks up where your continuous integration ends and automates the whole",
    "textdich": ""
  },
  {
    "start": 63303.32,
    "end": 63308.64,
    "text": "delivery of the application. So continuous delivery is responsible for actually pushing out those",
    "textdich": ""
  },
  {
    "start": 63308.64,
    "end": 63314.6,
    "text": "changes to your production network. So those two things make up our CI CD pipeline. But let's",
    "textdich": ""
  },
  {
    "start": 63314.6,
    "end": 63320.04,
    "text": "actually take a look at what our whole manual process looks like right now so that we can see",
    "textdich": ""
  },
  {
    "start": 63320.04,
    "end": 63327.92,
    "text": "where a lot of the extraneous time consumption and manual process takes place. So our current",
    "textdich": ""
  },
  {
    "start": 63327.92,
    "end": 63333.0,
    "text": "manual process is that, you know, we're going to make some changes to our code. And then we're",
    "textdich": ""
  },
  {
    "start": 63333.0,
    "end": 63336.92,
    "text": "going to commit those changes to get right because you know, we don't want to lose those changes. And",
    "textdich": ""
  },
  {
    "start": 63336.92,
    "end": 63341.48,
    "text": "then after that, we want to go ahead and run py tests so that we can verify that our changes",
    "textdich": ""
  },
  {
    "start": 63341.48,
    "end": 63347.68,
    "text": "didn't actually break any known functionality to our code. And if our tests pass, we have an",
    "textdich": ""
  },
  {
    "start": 63347.68,
    "end": 63352.8,
    "text": "optional step of, you know, building any images, so things like Docker images, if we happen to be",
    "textdich": ""
  },
  {
    "start": 63352.8,
    "end": 63356.52,
    "text": "running Docker in our development and production environment, if we're not, then this is an",
    "textdich": ""
  },
  {
    "start": 63356.52,
    "end": 63361.8,
    "text": "optional step. However, when it comes to the build phase, in this case, that some people refer to",
    "textdich": ""
  },
  {
    "start": 63361.8,
    "end": 63367.68,
    "text": "other programming languages might require you to kind of build the application at the end to",
    "textdich": ""
  },
  {
    "start": 63367.68,
    "end": 63372.2,
    "text": "actually be able to deploy it on Python, you don't really need to do that. So that's why it's kind of",
    "textdich": ""
  },
  {
    "start": 63372.2,
    "end": 63377.4,
    "text": "an optional step here if you're not using Docker. But after we do that, we then move on to deploying",
    "textdich": ""
  },
  {
    "start": 63377.4,
    "end": 63382.72,
    "text": "our application. So I just have one row called deploy here. But keep in mind this, this one",
    "textdich": ""
  },
  {
    "start": 63382.72,
    "end": 63387.44,
    "text": "little block could represent multiple steps. Because depending on how you actually deploy",
    "textdich": ""
  },
  {
    "start": 63387.44,
    "end": 63392.96,
    "text": "your application, making any changes or updating the code in your production environment could",
    "textdich": ""
  },
  {
    "start": 63392.96,
    "end": 63399.88,
    "text": "actually involve a very complex process. So with git or sorry, with Heroku, right, it's obviously a",
    "textdich": ""
  },
  {
    "start": 63399.88,
    "end": 63407.6,
    "text": "very simple process, because all we do is we just do a git push to Heroku. And that's going to",
    "textdich": ""
  },
  {
    "start": 63407.6,
    "end": 63412.52,
    "text": "automatically cause Heroku to kind of handle all of the the updating of the processes. So that's a",
    "textdich": ""
  },
  {
    "start": 63412.52,
    "end": 63417.36,
    "text": "feature that's built into Heroku. But we only get that if we use Heroku, there's obviously a number",
    "textdich": ""
  },
  {
    "start": 63417.36,
    "end": 63423.56,
    "text": "of different ways that we can deploy our application. If we decide to go the route of deploying our",
    "textdich": ""
  },
  {
    "start": 63423.56,
    "end": 63429.76,
    "text": "application on an Ubuntu server, then the deployment process in this case would be us logging into our",
    "textdich": ""
  },
  {
    "start": 63429.76,
    "end": 63434.96,
    "text": "server, us pulling in the new code with the changes, and then restarting the service so that our",
    "textdich": ""
  },
  {
    "start": 63434.96,
    "end": 63440.68,
    "text": "application actually uses the new code. But if you're using, you know, some other production",
    "textdich": ""
  },
  {
    "start": 63440.68,
    "end": 63445.32,
    "text": "environment, or you use some other method to deploy your application, this could be an even more",
    "textdich": ""
  },
  {
    "start": 63445.32,
    "end": 63449.4,
    "text": "complex process, something to keep in mind. So even though it's just one block listed here, it",
    "textdich": ""
  },
  {
    "start": 63449.4,
    "end": 63456.92,
    "text": "could actually be, you know, numerous steps. Alright, and so now I want to show you guys what",
    "textdich": ""
  },
  {
    "start": 63456.92,
    "end": 63464.12,
    "text": "our automated CICD pipeline is going to look like after we set it up. And so just like we did in the",
    "textdich": ""
  },
  {
    "start": 63464.12,
    "end": 63468.68,
    "text": "manual process, we're going to make changes to our code, obviously, that's a manual step, because we",
    "textdich": ""
  },
  {
    "start": 63468.68,
    "end": 63473.6,
    "text": "have to implement the changes to our code. And then we're going to commit those changes. And with a",
    "textdich": ""
  },
  {
    "start": 63473.6,
    "end": 63478.12,
    "text": "CICD pipeline, or specifically with the one we're building, that's all the manual steps that we have",
    "textdich": ""
  },
  {
    "start": 63478.12,
    "end": 63482.8,
    "text": "to do, we are done, we don't have to touch our keyboard or our mouse. It's basically hands off",
    "textdich": ""
  },
  {
    "start": 63482.8,
    "end": 63488.28,
    "text": "at this point, and we're going to let automation take over. And so usually when you commit changes",
    "textdich": ""
  },
  {
    "start": 63488.28,
    "end": 63493.88,
    "text": "to your code, that's going to trigger our CICD pipeline to run. And so what happens is our",
    "textdich": ""
  },
  {
    "start": 63493.88,
    "end": 63499.4,
    "text": "continuous integration phase starts at this point, as soon as we commit those changes. So in the CI",
    "textdich": ""
  },
  {
    "start": 63499.4,
    "end": 63505.04,
    "text": "phase, we do the first thing that we do is we pull our source code. So we pull our source code so",
    "textdich": ""
  },
  {
    "start": 63505.04,
    "end": 63509.84,
    "text": "that we can actually work with it. We then install any dependencies. So this is the equivalent of",
    "textdich": ""
  },
  {
    "start": 63509.84,
    "end": 63515.72,
    "text": "installing all of the dependencies listed in our requirements that txt file, we then run our",
    "textdich": ""
  },
  {
    "start": 63515.72,
    "end": 63521.28,
    "text": "automated tests. And so that's running pytest. And then you know, assuming the test pass, we then",
    "textdich": ""
  },
  {
    "start": 63521.28,
    "end": 63526.68,
    "text": "build any images, this is once again, an optional step for us. It's only in that's only needed if",
    "textdich": ""
  },
  {
    "start": 63526.68,
    "end": 63531.88,
    "text": "we are have if we use Docker. But that wraps up the continuous integration phase. So once that's",
    "textdich": ""
  },
  {
    "start": 63531.88,
    "end": 63537.24,
    "text": "done, the continuous delivery phase is going to take over. And so the continuous delivery phase,",
    "textdich": ""
  },
  {
    "start": 63537.24,
    "end": 63541.6,
    "text": "what it's going to do is it's either going to grab the latest code, or the new build image,",
    "textdich": ""
  },
  {
    "start": 63541.6,
    "end": 63546.96,
    "text": "depending on what our deployment model actually is. And with the new image or code, it's going to",
    "textdich": ""
  },
  {
    "start": 63546.96,
    "end": 63553.08,
    "text": "then have all the logic needed to push that new image or the new code into our production and",
    "textdich": ""
  },
  {
    "start": 63553.08,
    "end": 63557.72,
    "text": "make sure that our production is actually using our brand new code. And so these two steps are",
    "textdich": ""
  },
  {
    "start": 63557.72,
    "end": 63561.52,
    "text": "really the only manual steps can be continuous integration in the continuous delivery phase is",
    "textdich": ""
  },
  {
    "start": 63561.52,
    "end": 63569.44,
    "text": "all done in an automated fashion, through code essentially. And so some of the more common CI CD",
    "textdich": ""
  },
  {
    "start": 63569.44,
    "end": 63576.96,
    "text": "tools include Jenkins, Travis CI, circle CI, and, and GitHub actions. Now for our course,",
    "textdich": ""
  },
  {
    "start": 63576.96,
    "end": 63581.68,
    "text": "we're actually going to use GitHub actions just because it's already integrated into GitHub,",
    "textdich": ""
  },
  {
    "start": 63581.68,
    "end": 63586.16,
    "text": "it's free, we don't need to install anything on our local machine, there's no software that we",
    "textdich": ""
  },
  {
    "start": 63586.16,
    "end": 63591.4,
    "text": "have to set up because it's all hosted on GitHub. So it's like a hosted service. And it's just going",
    "textdich": ""
  },
  {
    "start": 63591.4,
    "end": 63597.64,
    "text": "to make things very clean, very simple, and it's free. So it's going to make and so everyone will",
    "textdich": ""
  },
  {
    "start": 63597.64,
    "end": 63606.48,
    "text": "be able to have access to it. So what exactly is a CI CD tool? What does it provide? And so every",
    "textdich": ""
  },
  {
    "start": 63606.48,
    "end": 63612.24,
    "text": "time I heard CI CD before I learned what it is, I always thought it was a very complex thing. And",
    "textdich": ""
  },
  {
    "start": 63612.24,
    "end": 63616.88,
    "text": "then when you find out what it actually is, it's actually this stupidly simple, it isn't there's",
    "textdich": ""
  },
  {
    "start": 63616.88,
    "end": 63623.04,
    "text": "no magic behind CI CD. It's all very manual, even though it's an automated process, you'll see that",
    "textdich": ""
  },
  {
    "start": 63623.04,
    "end": 63627.04,
    "text": "when we actually go to configure it, it's not really doing anything special. It's doing everything",
    "textdich": ""
  },
  {
    "start": 63627.04,
    "end": 63632.0,
    "text": "that we already do. But we're just providing instructions to a machine. So a CI CD tool,",
    "textdich": ""
  },
  {
    "start": 63632.0,
    "end": 63639.04,
    "text": "what it does is it provides us a runner. And so a runner is just a fancy term for a computer, or a",
    "textdich": ""
  },
  {
    "start": 63639.04,
    "end": 63643.04,
    "text": "virtual machine, it doesn't really matter, you know, what is the underlying infrastructure,",
    "textdich": ""
  },
  {
    "start": 63643.04,
    "end": 63647.6,
    "text": "they give you a little machine that we can provide a bunch of commands for to run.",
    "textdich": ""
  },
  {
    "start": 63648.56,
    "end": 63654.16,
    "text": "Alright, so just like in our terminal, where we run commands like pytest or, or pip install, right,",
    "textdich": ""
  },
  {
    "start": 63654.16,
    "end": 63660.08,
    "text": "we provide these commands to a computer. And these commands are usually configured or provided in a",
    "textdich": ""
  },
  {
    "start": 63660.08,
    "end": 63664.96,
    "text": "YAML or JSON file, or even through a GUI, depending on what your CI CD tool is. But the different",
    "textdich": ""
  },
  {
    "start": 63664.96,
    "end": 63670.48,
    "text": "commands that we provide that little mini computer to run, make up all of the actions that our",
    "textdich": ""
  },
  {
    "start": 63670.48,
    "end": 63678.4,
    "text": "pipeline will perform. And this pipeline, or this virtual machine that we have is going to run based",
    "textdich": ""
  },
  {
    "start": 63678.4,
    "end": 63683.36,
    "text": "off of some event getting triggered. And so like I mentioned, this is usually us either doing a get",
    "textdich": ""
  },
  {
    "start": 63683.36,
    "end": 63688.16,
    "text": "push or performing like a merge pull a merge request, it doesn't really matter. There's a lot",
    "textdich": ""
  },
  {
    "start": 63688.16,
    "end": 63693.04,
    "text": "of different events that you can configure depending on your CI CD tool, you can also set",
    "textdich": ""
  },
  {
    "start": 63693.04,
    "end": 63696.8,
    "text": "it up to run every single night at two in the morning. There's a lot of different options,",
    "textdich": ""
  },
  {
    "start": 63696.8,
    "end": 63701.28,
    "text": "but mostly it's going to be based off of a get push. And I wanted to provide just a quick example",
    "textdich": ""
  },
  {
    "start": 63701.28,
    "end": 63707.92,
    "text": "config of what our CI CD pipeline is going to look like when we're done. So this is just a little",
    "textdich": ""
  },
  {
    "start": 63707.92,
    "end": 63712.88,
    "text": "snapshot of it's not all of it. But I wanted to show you just how simple setting up a CI CD pipeline",
    "textdich": ""
  },
  {
    "start": 63712.88,
    "end": 63718.8,
    "text": "is. So this is the YAML file that we use to kind of tell the machine, what are the steps that we",
    "textdich": ""
  },
  {
    "start": 63718.8,
    "end": 63724.08,
    "text": "want it to perform. And so you can see here, we've got this section called steps. So already, you",
    "textdich": ""
  },
  {
    "start": 63724.08,
    "end": 63729.68,
    "text": "can tell we're just providing it a list of steps. Now, the syntax may be a little foreign, but",
    "textdich": ""
  },
  {
    "start": 63729.68,
    "end": 63733.84,
    "text": "you'll see that it's pretty easy to learn. You'll see that the first step that we have is there's",
    "textdich": ""
  },
  {
    "start": 63733.84,
    "end": 63738.24,
    "text": "this thing called action slash checkout. So what this is actually doing is it's telling our machine",
    "textdich": ""
  },
  {
    "start": 63738.24,
    "end": 63743.36,
    "text": "to pull our code. So after we do a get push, it's going to pull our brand new code so that we can",
    "textdich": ""
  },
  {
    "start": 63743.36,
    "end": 63748.48,
    "text": "actually do something with the code. And then the next step is here, we're setting up Python 3.9.",
    "textdich": ""
  },
  {
    "start": 63748.48,
    "end": 63754.0,
    "text": "So all it's doing is it's installing Python 3.9 for us. And then afterwards, we have to update",
    "textdich": ""
  },
  {
    "start": 63754.0,
    "end": 63758.48,
    "text": "PIP. So it's going to run Python dash m pip install dash dash upgrade PIP. So that's going to upgrade",
    "textdich": ""
  },
  {
    "start": 63758.48,
    "end": 63762.48,
    "text": "PIP. So we have the latest version, then we're going to install the dependency. So that's PIP",
    "textdich": ""
  },
  {
    "start": 63762.48,
    "end": 63767.04,
    "text": "install dash r requirements dot txt. So you can see all the things that we do on our local machine,",
    "textdich": ""
  },
  {
    "start": 63767.04,
    "end": 63771.52,
    "text": "we're just telling this little machine to do the same thing. And then afterwards, we then run",
    "textdich": ""
  },
  {
    "start": 63772.08,
    "end": 63776.64,
    "text": "pytest. So that's going to first install pytest. And then we just run pytest. Right, just like we",
    "textdich": ""
  },
  {
    "start": 63776.64,
    "end": 63780.8,
    "text": "did on our local machine, we're just telling the machine to do the same exact thing. So we're just",
    "textdich": ""
  },
  {
    "start": 63780.8,
    "end": 63786.08,
    "text": "telling the machine a list of instructions that we have done by ourselves manually, we're just",
    "textdich": ""
  },
  {
    "start": 63786.08,
    "end": 63791.04,
    "text": "giving that list to it so it can run automatically. And so hopefully you guys see just how simple",
    "textdich": ""
  },
  {
    "start": 63791.04,
    "end": 63796.24,
    "text": "a CICD pipeline is, there's nothing magical to it. It's just like telling a machine, this is what",
    "textdich": ""
  },
  {
    "start": 63796.24,
    "end": 63801.36,
    "text": "we want to do. I want you to run this every single time we do a git push. Alright, so hopefully you",
    "textdich": ""
  },
  {
    "start": 63801.36,
    "end": 63806.24,
    "text": "guys understand this. In the next video, we'll get started on setting up GitHub actions so that we",
    "textdich": ""
  },
  {
    "start": 63806.24,
    "end": 63811.68,
    "text": "can actually build out our CICD pipeline. Right before we get started with working with GitHub",
    "textdich": ""
  },
  {
    "start": 63811.68,
    "end": 63816.8,
    "text": "actions, I want you to open up a couple of web pages. So if you go to the GitHub actions documents",
    "textdich": ""
  },
  {
    "start": 63816.8,
    "end": 63821.04,
    "text": "page, I definitely recommend you pull this up. Take a look at the quick start page in the reference",
    "textdich": ""
  },
  {
    "start": 63821.04,
    "end": 63825.92,
    "text": "page just to get an idea of how to work with GitHub actions. I will cover everything but you",
    "textdich": ""
  },
  {
    "start": 63825.92,
    "end": 63829.84,
    "text": "know, you are going to forget some things I cover. So definitely know where the documentation is,",
    "textdich": ""
  },
  {
    "start": 63830.64,
    "end": 63836.0,
    "text": "pull up the GitHub marketplace as well. So this is where we can look up built in actions that we can",
    "textdich": ""
  },
  {
    "start": 63836.0,
    "end": 63842.64,
    "text": "use in our CICD pipeline that have kind of handled a lot of the more complex logic. And then on top",
    "textdich": ""
  },
  {
    "start": 63842.64,
    "end": 63848.24,
    "text": "of that, you'll see that GitHub has this example tutorial on how to set up a CICD pipeline for a",
    "textdich": ""
  },
  {
    "start": 63848.24,
    "end": 63854.16,
    "text": "Python application. So this is what I kind of looked at to get started with building out a CICD",
    "textdich": ""
  },
  {
    "start": 63854.16,
    "end": 63859.36,
    "text": "pipeline for our fast API. And it kind of covers most of the things we do that we need. So if you",
    "textdich": ""
  },
  {
    "start": 63859.36,
    "end": 63862.96,
    "text": "want to, you could just follow this. And I think at that point, you'll have a good idea as to how",
    "textdich": ""
  },
  {
    "start": 63862.96,
    "end": 63866.72,
    "text": "to work with this. But once again, like I said, we're going to cover everything from scratch.",
    "textdich": ""
  },
  {
    "start": 63868.4,
    "end": 63872.48,
    "text": "But if we go to the documentation, you go to quick start right here, it tells you that we",
    "textdich": ""
  },
  {
    "start": 63872.48,
    "end": 63878.08,
    "text": "want to create a folder called GitHub. And then in that folder, we want to create a folder called",
    "textdich": ""
  },
  {
    "start": 63878.08,
    "end": 63886.64,
    "text": "workflows. So let's go ahead and do that. So in our main project directory, let me just minimize",
    "textdich": ""
  },
  {
    "start": 63886.64,
    "end": 63893.68,
    "text": "everything, I'm going to create a brand new folder. And I'll call this dot GitHub. And then we want",
    "textdich": ""
  },
  {
    "start": 63893.68,
    "end": 63902.16,
    "text": "a new folder within here called workflows. Alright, and so here, we can define all of our workflows,",
    "textdich": ""
  },
  {
    "start": 63902.16,
    "end": 63906.72,
    "text": "which kind of make up our CICD pipeline, you can have more than one, you don't need to just have",
    "textdich": ""
  },
  {
    "start": 63906.72,
    "end": 63911.04,
    "text": "one in this case, but we're just going to use one because we're keeping things simple. And so here,",
    "textdich": ""
  },
  {
    "start": 63911.04,
    "end": 63915.12,
    "text": "this is where we're going to create a yaml file. So if you aren't familiar with yaml, it's just a",
    "textdich": ""
  },
  {
    "start": 63915.76,
    "end": 63922.16,
    "text": "certain type of markup language that's commonly used for like, config files and things like that,",
    "textdich": ""
  },
  {
    "start": 63922.16,
    "end": 63926.4,
    "text": "because it's very easy to read. But the most important thing to keep in mind is that spacing",
    "textdich": ""
  },
  {
    "start": 63926.4,
    "end": 63931.52,
    "text": "matters in yaml. So you definitely want to make sure that all the things are lined up very carefully,",
    "textdich": ""
  },
  {
    "start": 63931.52,
    "end": 63937.12,
    "text": "just like it was when it comes to like the Docker compose file. So we'll go here, and I'm going to",
    "textdich": ""
  },
  {
    "start": 63937.12,
    "end": 63944.24,
    "text": "create a brand new file. And I'm going to call this build dash deploy dot yaml. Alright, and so we're",
    "textdich": ""
  },
  {
    "start": 63944.24,
    "end": 63948.56,
    "text": "going to give this workflow a name. So even though we gave it the file a name, we actually have to",
    "textdich": ""
  },
  {
    "start": 63948.56,
    "end": 63952.72,
    "text": "provide a name here. So we just do name and feel free to call it whatever you want. I'm just going",
    "textdich": ""
  },
  {
    "start": 63952.72,
    "end": 63961.36,
    "text": "to call this build and deploy code. Okay, and then we have to define when should our workflow or",
    "textdich": ""
  },
  {
    "start": 63961.36,
    "end": 63966.32,
    "text": "in this case, which is our CI CD pipeline, when should it run when should it trigger what triggers",
    "textdich": ""
  },
  {
    "start": 63966.32,
    "end": 63975.36,
    "text": "our code to run. And so like I mentioned, it's usually a, either a, a pull request or a git push.",
    "textdich": ""
  },
  {
    "start": 63975.36,
    "end": 63984.0,
    "text": "So to specify when we trigger this, you pass in the on field. And then you specify, you know,",
    "textdich": ""
  },
  {
    "start": 63984.0,
    "end": 63990.96,
    "text": "should this be a push or a pull request? Or should it run for both? And so if you want this to run",
    "textdich": ""
  },
  {
    "start": 63990.96,
    "end": 63996.96,
    "text": "only on git pushes, you would just do on push. If you wanted to run on pull request, you do pull",
    "textdich": ""
  },
  {
    "start": 63996.96,
    "end": 64004.48,
    "text": "request here. But if you wanted to run for both, both git push and pull request, then you would do",
    "textdich": ""
  },
  {
    "start": 64004.48,
    "end": 64011.36,
    "text": "push and pull request. And there's a lot of flexibility to so the way we have it set up right",
    "textdich": ""
  },
  {
    "start": 64011.36,
    "end": 64016.32,
    "text": "here, this would happen on every push on every single branch, and every pull request on every",
    "textdich": ""
  },
  {
    "start": 64016.32,
    "end": 64020.48,
    "text": "single branch. But there's a possibility that maybe you don't want this to run for all of your",
    "textdich": ""
  },
  {
    "start": 64020.48,
    "end": 64026.08,
    "text": "branches, right? Maybe you only want this to run on the main branch, and a couple of other branches,",
    "textdich": ""
  },
  {
    "start": 64026.08,
    "end": 64030.8,
    "text": "and then the rest of the branches you don't really care about. So what you can do is we can go down",
    "textdich": ""
  },
  {
    "start": 64030.8,
    "end": 64035.44,
    "text": "a level, and then hit tab in this case. And remember, like I said, spacing matters. So we'll",
    "textdich": ""
  },
  {
    "start": 64035.44,
    "end": 64044.88,
    "text": "say push. And then here, you can define all of the branches that should run whenever you do a push.",
    "textdich": ""
  },
  {
    "start": 64044.88,
    "end": 64051.28,
    "text": "So if I hear I pass in main, what's going to happen is that this workflow is going to trigger",
    "textdich": ""
  },
  {
    "start": 64051.28,
    "end": 64056.32,
    "text": "every time we do a push, specifically only to the main branch and no other branches. And so you can",
    "textdich": ""
  },
  {
    "start": 64056.32,
    "end": 64062.96,
    "text": "provide a list of all the branches. So this is, you know, another branch. This is, you know, maybe",
    "textdich": ""
  },
  {
    "start": 64062.96,
    "end": 64067.76,
    "text": "some feature branch, all the names of the branches that you want your workflow to run on, you can",
    "textdich": ""
  },
  {
    "start": 64067.76,
    "end": 64074.16,
    "text": "specify that. And this is one way of providing a list in YAML. The other way is to actually go down",
    "textdich": ""
  },
  {
    "start": 64074.16,
    "end": 64080.64,
    "text": "here, and then do a dash, and then provide the name. So I would do main, and then, you know,",
    "textdich": ""
  },
  {
    "start": 64080.64,
    "end": 64089.12,
    "text": "some other branch, and so on. And then if we wanted to, we could also customize all of the",
    "textdich": ""
  },
  {
    "start": 64090.08,
    "end": 64096.0,
    "text": "branches that should trigger this workflow on a pull request as well. So if I do pull request,",
    "textdich": ""
  },
  {
    "start": 64096.0,
    "end": 64108.0,
    "text": "and then I do branches, and this should be moved back here. And then here, I do branches.",
    "textdich": ""
  },
  {
    "start": 64108.0,
    "end": 64114.24,
    "text": "And then I can do a list here as well. And I'll just call this, we'll give an example branch,",
    "textdich": ""
  },
  {
    "start": 64114.24,
    "end": 64121.04,
    "text": "I'll say, test branch. Right. And so just to kind of read this through, anytime we do a push to",
    "textdich": ""
  },
  {
    "start": 64121.04,
    "end": 64125.04,
    "text": "either one of these branches, it's going to run our code. And anytime we do a pull request to",
    "textdich": ""
  },
  {
    "start": 64125.04,
    "end": 64129.84,
    "text": "this specific branch, it's going to run our code as well. So that's just how to set this up. We're",
    "textdich": ""
  },
  {
    "start": 64129.84,
    "end": 64134.48,
    "text": "not going to do any of that, because we just have one branch in this case. So I'm just going to say,",
    "textdich": ""
  },
  {
    "start": 64134.48,
    "end": 64142.64,
    "text": "we're going to have run this on push and pull requests for all branches. And if we actually",
    "textdich": ""
  },
  {
    "start": 64142.64,
    "end": 64149.84,
    "text": "go to the documentation, I think the reference page, you can go to the reference page and then",
    "textdich": ""
  },
  {
    "start": 64149.84,
    "end": 64154.32,
    "text": "select events that trigger workflows. And that's going to cover everything that we just covered.",
    "textdich": ""
  },
  {
    "start": 64154.32,
    "end": 64158.16,
    "text": "So it's going to go over all of that. And you'll even see that there's a scheduled event. So you",
    "textdich": ""
  },
  {
    "start": 64158.16,
    "end": 64162.0,
    "text": "can tell it to run kind of like a cron job, like, hey, I want this to run every single hour. And",
    "textdich": ""
  },
  {
    "start": 64162.0,
    "end": 64166.96,
    "text": "there's a few other like manual events that you can trigger. And a couple of like webhook",
    "textdich": ""
  },
  {
    "start": 64166.96,
    "end": 64170.56,
    "text": "integrations as well. But we're not going to do any of that, we're just going to keep things simple",
    "textdich": ""
  },
  {
    "start": 64170.56,
    "end": 64176.48,
    "text": "for now. Alright, so once we've defined what's going to trigger our workflow, we have to then",
    "textdich": ""
  },
  {
    "start": 64176.48,
    "end": 64182.72,
    "text": "create a job. And so if you go to the documentation, the GitHub actions documentation says that a job",
    "textdich": ""
  },
  {
    "start": 64182.72,
    "end": 64187.52,
    "text": "is just a set of steps that execute on the same runner. So our runner is just a virtual machine.",
    "textdich": ""
  },
  {
    "start": 64187.52,
    "end": 64193.36,
    "text": "So when our workflow runs, right, it's going to, we have to provide it a job, which is just a list",
    "textdich": ""
  },
  {
    "start": 64193.36,
    "end": 64198.4,
    "text": "of steps that's going to run on that specific runner in that case. And so here I'll go to jobs,",
    "textdich": ""
  },
  {
    "start": 64198.4,
    "end": 64202.16,
    "text": "this is where we provide a list of jobs, we're going to start out with just one in this case,",
    "textdich": ""
  },
  {
    "start": 64202.16,
    "end": 64206.4,
    "text": "and we can give this whatever name we want, I'm going to call this job one, not a very good name,",
    "textdich": ""
  },
  {
    "start": 64206.4,
    "end": 64209.28,
    "text": "we're going to rename it in the future. But I want to just keep it simple for now.",
    "textdich": ""
  },
  {
    "start": 64209.28,
    "end": 64215.28,
    "text": "And what we want to do is we want to specify what type of machine do we want to run this on. And so",
    "textdich": ""
  },
  {
    "start": 64215.28,
    "end": 64221.28,
    "text": "like I said, a CI CD tool like GitHub actions is going to provide us a machine, a computer,",
    "textdich": ""
  },
  {
    "start": 64221.28,
    "end": 64226.08,
    "text": "and we have to specify what operating system do we want to run it on. So we're going to just use it",
    "textdich": ""
  },
  {
    "start": 64226.08,
    "end": 64230.4,
    "text": "on on Linux. But keep in mind, you can run this on Windows, you can run this on Mac, you can even",
    "textdich": ""
  },
  {
    "start": 64230.4,
    "end": 64236.4,
    "text": "run it on all three if you want to test all of them. But since our deployment, our since our",
    "textdich": ""
  },
  {
    "start": 64236.4,
    "end": 64239.6,
    "text": "production environment is running on a Linux machine, I think it makes sense that we do all",
    "textdich": ""
  },
  {
    "start": 64239.6,
    "end": 64247.12,
    "text": "of the testing and all of this on a Linux machine. So you pass in the runs on field. And then here",
    "textdich": ""
  },
  {
    "start": 64247.12,
    "end": 64252.56,
    "text": "we say Ubuntu latest, this is gonna be the latest Ubuntu version. And if we go to the reference",
    "textdich": ""
  },
  {
    "start": 64252.56,
    "end": 64258.96,
    "text": "page here, and go to the workflow syntax, I think, and we go to jobs, that's going to provide us all",
    "textdich": ""
  },
  {
    "start": 64258.96,
    "end": 64263.76,
    "text": "of the information when it comes to what we can run this on. So you can see here, we can provide",
    "textdich": ""
  },
  {
    "start": 64263.76,
    "end": 64269.68,
    "text": "Windows 2022. Or you can just grab Windows latest, we've also got, and I realized the text is probably",
    "textdich": ""
  },
  {
    "start": 64269.68,
    "end": 64275.52,
    "text": "small for you guys. We got different versions of Windows, we got Ubuntu latest, which in this case,",
    "textdich": ""
  },
  {
    "start": 64275.52,
    "end": 64279.76,
    "text": "at the moment, it's just going to be the same thing as writing Ubuntu 20.0.4. But you can grab",
    "textdich": ""
  },
  {
    "start": 64279.76,
    "end": 64284.96,
    "text": "any one of these specific Ubuntu versions as well as Mac OS 11, and some of the other previous Mac",
    "textdich": ""
  },
  {
    "start": 64284.96,
    "end": 64289.84,
    "text": "versions. But like I said, we're going to stick to just running on Ubuntu, and we might as well",
    "textdich": ""
  },
  {
    "start": 64289.84,
    "end": 64294.16,
    "text": "just grab the latest version. And so once we specify the operating system, the next thing that",
    "textdich": ""
  },
  {
    "start": 64294.16,
    "end": 64299.6,
    "text": "we have to do is provide a list of steps. So we kind of went over what the steps would look like",
    "textdich": ""
  },
  {
    "start": 64299.6,
    "end": 64305.6,
    "text": "when we did the little PowerPoint demonstration. So we hear we say steps. And then we provide a",
    "textdich": ""
  },
  {
    "start": 64305.6,
    "end": 64310.24,
    "text": "list of steps. So when it comes to lists in yaml, you just do the dash, and then you provide the",
    "textdich": ""
  },
  {
    "start": 64310.24,
    "end": 64317.36,
    "text": "lists. And usually when it comes to a specific step, we give it the specific command that we",
    "textdich": ""
  },
  {
    "start": 64317.36,
    "end": 64322.8,
    "text": "want to run, as well as a name, like a human readable name, so that when we look through the",
    "textdich": ""
  },
  {
    "start": 64322.8,
    "end": 64327.76,
    "text": "logs, we know which step is doing what so we can say like, hey, this step is installing Python,",
    "textdich": ""
  },
  {
    "start": 64327.76,
    "end": 64336.16,
    "text": "or this step is running pytest. And so here we say name, this is where we provide a description",
    "textdich": ""
  },
  {
    "start": 64336.16,
    "end": 64339.84,
    "text": "for what we're about to do. So the first thing that we always want to do is we want to check",
    "textdich": ""
  },
  {
    "start": 64339.84,
    "end": 64348.32,
    "text": "out our code. And so I'm gonna say, hey, this is checking. Or I'll just say this is pulling get",
    "textdich": ""
  },
  {
    "start": 64348.32,
    "end": 64353.76,
    "text": "repo, right, it's gonna pull our code. And then we have to provide the uses. So this is the actual",
    "textdich": ""
  },
  {
    "start": 64353.76,
    "end": 64361.6,
    "text": "command that needs to run on our machine to pull our repo. And with GitHub actions, like I said,",
    "textdich": ""
  },
  {
    "start": 64361.6,
    "end": 64367.6,
    "text": "there's a marketplace of pre built actions that we can use to, you know, essentially perform various",
    "textdich": ""
  },
  {
    "start": 64367.6,
    "end": 64372.72,
    "text": "tasks. So pulling your code is a very common task. So they've definitely got an action for this.",
    "textdich": ""
  },
  {
    "start": 64372.72,
    "end": 64375.6,
    "text": "And so if I just search for checkout, because I know that's what it's called,",
    "textdich": ""
  },
  {
    "start": 64377.52,
    "end": 64381.68,
    "text": "you can see this is the one we want. And so this is, this is what's going to be",
    "textdich": ""
  },
  {
    "start": 64381.68,
    "end": 64387.92,
    "text": "responsible for pulling your code. And so here you just say uses, you do actions slash checkout v2.",
    "textdich": ""
  },
  {
    "start": 64390.72,
    "end": 64397.2,
    "text": "And you could specify a specific repository that you want to pull, however, GitHub already knows",
    "textdich": ""
  },
  {
    "start": 64397.2,
    "end": 64401.52,
    "text": "what repository we're working on, because we did a get push. And since all of this is integrated",
    "textdich": ""
  },
  {
    "start": 64401.52,
    "end": 64406.88,
    "text": "together, we don't actually have to pass in any other field. However, you know, if you look at",
    "textdich": ""
  },
  {
    "start": 64406.88,
    "end": 64412.24,
    "text": "the documentation, you can specify what specific repository you want, as well as you know, any SSH",
    "textdich": ""
  },
  {
    "start": 64412.24,
    "end": 64416.32,
    "text": "keys that you may need and things like that. But this is GitHub action. So it's all already hosted",
    "textdich": ""
  },
  {
    "start": 64416.32,
    "end": 64421.04,
    "text": "on GitHub. So it's a pretty simplified process. So all we have to do is just copy this right here.",
    "textdich": ""
  },
  {
    "start": 64421.92,
    "end": 64426.48,
    "text": "And we can just kind of continue down and just provide as many extra steps as we want. I'm just",
    "textdich": ""
  },
  {
    "start": 64426.48,
    "end": 64430.88,
    "text": "going to provide a very simple step after this, just to show you, you know, a step is just nothing",
    "textdich": ""
  },
  {
    "start": 64430.88,
    "end": 64438.88,
    "text": "more than us giving a command. So I'm going to name this one. Say hi to Sanjeev. And what we can do",
    "textdich": ""
  },
  {
    "start": 64438.88,
    "end": 64444.56,
    "text": "is this is a special action that's that we grabbed from the marketplace. But if you just want to run",
    "textdich": ""
  },
  {
    "start": 64444.56,
    "end": 64449.44,
    "text": "a command on the machine, which is just a Linux machine, we can run any specific Linux command",
    "textdich": ""
  },
  {
    "start": 64449.44,
    "end": 64454.16,
    "text": "that we want, because we have access to the CLI, all we have to do is just use the run keyword,",
    "textdich": ""
  },
  {
    "start": 64454.16,
    "end": 64458.96,
    "text": "and then we specify the command we want. So if you wanted to install a, you know, a package,",
    "textdich": ""
  },
  {
    "start": 64458.96,
    "end": 64464.24,
    "text": "we could do, you know, sudo apt, install whatever, or if you want to reload the machine, you know,",
    "textdich": ""
  },
  {
    "start": 64464.24,
    "end": 64468.0,
    "text": "you could do a reboot, I'm not sure why you would do that. So all I'm just going to do is I'm going",
    "textdich": ""
  },
  {
    "start": 64468.0,
    "end": 64472.72,
    "text": "to just make it say echo, which is just going to echo out exactly what I type in here, I'm going to",
    "textdich": ""
  },
  {
    "start": 64472.72,
    "end": 64479.44,
    "text": "say, Hello, Sanjeev. And so it's just going to run this command on our Linux machine. And so this is",
    "textdich": ""
  },
  {
    "start": 64479.44,
    "end": 64484.56,
    "text": "a very simple example so far. But I think that's a good starting point so that we can actually",
    "textdich": ""
  },
  {
    "start": 64484.56,
    "end": 64490.4,
    "text": "understand what's happening. And what we want to do is we now want to actually push this changes",
    "textdich": ""
  },
  {
    "start": 64491.04,
    "end": 64498.24,
    "text": "to our Git repository. So let me open up my terminal. Make sure you do save all. And so once",
    "textdich": ""
  },
  {
    "start": 64498.24,
    "end": 64502.08,
    "text": "we push this, this will actually be part of our repository. And it's going to actually trigger",
    "textdich": ""
  },
  {
    "start": 64503.44,
    "end": 64508.32,
    "text": "GitHub actions to actually trigger this workflow, because we said that on every push,",
    "textdich": ""
  },
  {
    "start": 64508.32,
    "end": 64517.92,
    "text": "we should run this workflow. So I'll do git add all. I'll do a git push. Sorry, git commit dash m",
    "textdich": ""
  },
  {
    "start": 64518.8,
    "end": 64526.8,
    "text": "adding first GitHub action. And then we'll do a git push. And we can do an origin main if you want",
    "textdich": ""
  },
  {
    "start": 64526.8,
    "end": 64536.0,
    "text": "to be specific. All right, so it's been pushed. And so now if we go to our GitHub repository,",
    "textdich": ""
  },
  {
    "start": 64536.0,
    "end": 64543.68,
    "text": "there's a actions tab right here. And so you'll see that I had a previous I had a couple of other",
    "textdich": ""
  },
  {
    "start": 64543.68,
    "end": 64548.32,
    "text": "actions that ran because I was doing a dry run. But you'll see that the most recent one,",
    "textdich": ""
  },
  {
    "start": 64548.32,
    "end": 64552.24,
    "text": "which is the one we had, which is called adding first GitHub action. So this actually comes from",
    "textdich": ""
  },
  {
    "start": 64552.24,
    "end": 64557.84,
    "text": "the commit name. And we can select this. And we can see exactly what happened. So this gives us",
    "textdich": ""
  },
  {
    "start": 64557.84,
    "end": 64562.64,
    "text": "a little summary, we can see that we have one job called job one. And then we can see that the job",
    "textdich": ""
  },
  {
    "start": 64562.64,
    "end": 64566.48,
    "text": "ran and it successfully ran and it took four seconds. And if you click on the job,",
    "textdich": ""
  },
  {
    "start": 64566.48,
    "end": 64570.64,
    "text": "you'll see all of the steps. So the first thing is it sets up the job. And so you can see that",
    "textdich": ""
  },
  {
    "start": 64570.64,
    "end": 64575.12,
    "text": "it's creating a runner, which is once again, just a virtual machine. And then it's going to provide",
    "textdich": ""
  },
  {
    "start": 64575.12,
    "end": 64580.32,
    "text": "us a button to because we specified that as our operating system. It's going to set up a virtual",
    "textdich": ""
  },
  {
    "start": 64580.32,
    "end": 64584.88,
    "text": "environment, don't worry too much about that. It's going to handle all of the GitHub permissions",
    "textdich": ""
  },
  {
    "start": 64584.88,
    "end": 64590.72,
    "text": "because it's all integrated with GitHub. Then we go down to the first action, which was pulling the",
    "textdich": ""
  },
  {
    "start": 64590.72,
    "end": 64595.92,
    "text": "git repo, because we did say action slash checkout v2. So then it's going to pull the GitHub repo.",
    "textdich": ""
  },
  {
    "start": 64596.56,
    "end": 64601.68,
    "text": "And then we could see the second option. Sorry, the second action, which was say hi to Sanjeev.",
    "textdich": ""
  },
  {
    "start": 64601.68,
    "end": 64605.52,
    "text": "So all it's doing is just running this command on our Linux machine. So it's just saying echo,",
    "textdich": ""
  },
  {
    "start": 64605.52,
    "end": 64610.64,
    "text": "hello, Sanjeev, and then it just prints out. Hello, Sanjeev. So this is all a CSCD pipeline",
    "textdich": ""
  },
  {
    "start": 64610.64,
    "end": 64615.76,
    "text": "is it's just providing a bunch of instructions for a little machine on the internet to run for us.",
    "textdich": ""
  },
  {
    "start": 64615.76,
    "end": 64619.28,
    "text": "Now, technically, the machine doesn't have to be on the internet, it doesn't have to be hosted.",
    "textdich": ""
  },
  {
    "start": 64619.28,
    "end": 64624.64,
    "text": "There's some CICD tools that you host to yourselves on your on your own machine or your own server,",
    "textdich": ""
  },
  {
    "start": 64624.64,
    "end": 64629.6,
    "text": "so that they actually handle running all of this. Because even though GitHub actions is free,",
    "textdich": ""
  },
  {
    "start": 64629.6,
    "end": 64633.44,
    "text": "they only give you a certain number of build minutes for free. And then after that, they'll",
    "textdich": ""
  },
  {
    "start": 64633.44,
    "end": 64637.92,
    "text": "start charging for it. So depending on how many times you build, it may actually be more cost",
    "textdich": ""
  },
  {
    "start": 64637.92,
    "end": 64642.56,
    "text": "effective to just set it up yourself. And then it looks like, you know, GitHub actions, there's a",
    "textdich": ""
  },
  {
    "start": 64642.56,
    "end": 64646.96,
    "text": "post pulling git repo. So it's going to perform a few other like cleanup actions, and then it's",
    "textdich": ""
  },
  {
    "start": 64646.96,
    "end": 64654.72,
    "text": "going to then clean up the job. So we have successfully created our first simple example,",
    "textdich": ""
  },
  {
    "start": 64654.72,
    "end": 64661.36,
    "text": "CICD pipeline or GitHub actions workflow in this case. So let's take our GitHub actions to the next",
    "textdich": ""
  },
  {
    "start": 64661.36,
    "end": 64666.64,
    "text": "step. And I'm going to actually remove this example, I just wanted to show you guys how to do that.",
    "textdich": ""
  },
  {
    "start": 64666.64,
    "end": 64670.96,
    "text": "But after we pull our GitHub repo, the next thing that I want to do is I want to set up Python.",
    "textdich": ""
  },
  {
    "start": 64670.96,
    "end": 64678.4,
    "text": "And so to set up Python, once again, we can go back to the marketplace, if I can find it,",
    "textdich": ""
  },
  {
    "start": 64679.36,
    "end": 64684.32,
    "text": "because you know, setting up Python seems like a very common task. So we can just search for Python.",
    "textdich": ""
  },
  {
    "start": 64686.4,
    "end": 64690.88,
    "text": "And keep in mind, when it comes to setting up Python, you could technically just do the same",
    "textdich": ""
  },
  {
    "start": 64690.88,
    "end": 64694.8,
    "text": "thing where we can say uses, and then we can, you know, run the command on a Linux machine to install",
    "textdich": ""
  },
  {
    "start": 64694.8,
    "end": 64699.84,
    "text": "Python, which would be something like sudo apt install Python, right, we could 100% do that.",
    "textdich": ""
  },
  {
    "start": 64699.84,
    "end": 64704.4,
    "text": "And that would 100% work. But because this is such a common task, the task, there's already",
    "textdich": ""
  },
  {
    "start": 64704.4,
    "end": 64710.4,
    "text": "a pre built action. So we don't even have to do that. And I think I searched Python,",
    "textdich": ""
  },
  {
    "start": 64710.4,
    "end": 64716.32,
    "text": "did that work? It didn't look like it worked. And here we go, set up Python down here.",
    "textdich": ""
  },
  {
    "start": 64717.2,
    "end": 64722.24,
    "text": "So this is going to be responsible for setting up and installing Python on our machine.",
    "textdich": ""
  },
  {
    "start": 64722.24,
    "end": 64725.28,
    "text": "And you'll see an example of how to do this, you just say uses,",
    "textdich": ""
  },
  {
    "start": 64725.28,
    "end": 64730.16,
    "text": "action slash setup Python at v2. And then you say with and then you specify the version. And then",
    "textdich": ""
  },
  {
    "start": 64730.16,
    "end": 64734.96,
    "text": "you can also provide the architecture as well. And what's really cool about this is that,",
    "textdich": ""
  },
  {
    "start": 64734.96,
    "end": 64739.36,
    "text": "let's say we wanted to test our code on multiple different versions of Python.",
    "textdich": ""
  },
  {
    "start": 64739.36,
    "end": 64743.76,
    "text": "Well, we can go under the strategy section. So right under where it says runs on,",
    "textdich": ""
  },
  {
    "start": 64743.76,
    "end": 64748.64,
    "text": "we can do strategy. And then we can provide a matrix and then a list of versions. So if we",
    "textdich": ""
  },
  {
    "start": 64748.64,
    "end": 64754.8,
    "text": "want to test version 3.7 version 3.8 3.9 3.6, and make sure that our code works on all of them,",
    "textdich": ""
  },
  {
    "start": 64754.8,
    "end": 64759.6,
    "text": "we can then create this matrix here. And then when we go to set up our Python,",
    "textdich": ""
  },
  {
    "start": 64760.32,
    "end": 64764.24,
    "text": "right, we would say with and then for Python version, instead of providing one specific version,",
    "textdich": ""
  },
  {
    "start": 64764.24,
    "end": 64769.36,
    "text": "we actually pass this is a essentially a variable syntax in YAML. And then we just call matrix dot",
    "textdich": ""
  },
  {
    "start": 64769.36,
    "end": 64775.28,
    "text": "Python version, which is referencing this list right here. And so it'll just run our actions",
    "textdich": ""
  },
  {
    "start": 64775.28,
    "end": 64779.6,
    "text": "for all of these versions just to verify that everything works in all of the versions.",
    "textdich": ""
  },
  {
    "start": 64779.6,
    "end": 64782.88,
    "text": "But we're going to keep it simple. We're just going to do version 3.9. If you want to play",
    "textdich": ""
  },
  {
    "start": 64782.88,
    "end": 64786.48,
    "text": "around with it, I definitely recommend you try testing this out. But for us, it doesn't really",
    "textdich": ""
  },
  {
    "start": 64786.48,
    "end": 64792.32,
    "text": "matter. But keep in mind, it looks like you can even do the same thing for different operating",
    "textdich": ""
  },
  {
    "start": 64792.32,
    "end": 64797.92,
    "text": "systems. So if you want to test on Ubuntu, Mac and Windows, you can do the same thing as well.",
    "textdich": ""
  },
  {
    "start": 64797.92,
    "end": 64805.28,
    "text": "But like I said, we're going to keep things very simple. And I'm actually going to change this to",
    "textdich": ""
  },
  {
    "start": 64805.28,
    "end": 64816.0,
    "text": "name, give this a name, I'm going to say install Python version 3.9. And we'll say users and then",
    "textdich": ""
  },
  {
    "start": 64816.0,
    "end": 64825.68,
    "text": "we'll call that action now. So we'll do actions slash set up dash Python at V two. And then we",
    "textdich": ""
  },
  {
    "start": 64825.68,
    "end": 64836.0,
    "text": "pass in with tab. And we'll say Python dash version. And we'll say 3.9. And I think that's",
    "textdich": ""
  },
  {
    "start": 64836.0,
    "end": 64841.28,
    "text": "all we have to do. Let me see the example. Python version 3.9. Yep, that's all we can leave the",
    "textdich": ""
  },
  {
    "start": 64841.28,
    "end": 64846.8,
    "text": "architecture, I'm going to use the default, which looks like it defaults to x64. So not a problem",
    "textdich": ""
  },
  {
    "start": 64846.8,
    "end": 64854.72,
    "text": "in our case. Alright, and then after installing Python, the next thing that I want to do",
    "textdich": ""
  },
  {
    "start": 64854.72,
    "end": 64863.12,
    "text": "is I want to upgrade pip. So I'll create a description of update pip. And then we'll say",
    "textdich": ""
  },
  {
    "start": 64863.12,
    "end": 64869.84,
    "text": "uses actually instead of uses, we're just going to run a command on the Linux shell. So we'll say",
    "textdich": ""
  },
  {
    "start": 64869.84,
    "end": 64881.76,
    "text": "run. And we just run Python dash m pip install dash dash upgrade pip. So this is the command that",
    "textdich": ""
  },
  {
    "start": 64881.76,
    "end": 64886.48,
    "text": "you'd run on any Linux operating system, or even on a Windows machine to upgrade pip. And then the",
    "textdich": ""
  },
  {
    "start": 64886.48,
    "end": 64891.68,
    "text": "next thing that I want to do is we're going to install all of our dependencies. So since we",
    "textdich": ""
  },
  {
    "start": 64891.68,
    "end": 64896.4,
    "text": "pulled our Git repo, right with the actions checkout, we're going to have access to all of this",
    "textdich": ""
  },
  {
    "start": 64896.4,
    "end": 64900.08,
    "text": "code, and we're going to have access to our requirements at txt. So we have to make sure that",
    "textdich": ""
  },
  {
    "start": 64900.08,
    "end": 64908.4,
    "text": "we install all of these packages there as well. And so here, I'll just say this is install all",
    "textdich": ""
  },
  {
    "start": 64908.4,
    "end": 64917.92,
    "text": "dependencies. And the command that we're going to run for this is going to be a and you guys should",
    "textdich": ""
  },
  {
    "start": 64917.92,
    "end": 64928.0,
    "text": "know this, this is just pip install dash r requirements dot txt. Alright, so let's I think",
    "textdich": ""
  },
  {
    "start": 64928.0,
    "end": 64934.4,
    "text": "this is a good starting point. Let's try committing our code again. I'll just do git add dash dash",
    "textdich": ""
  },
  {
    "start": 64934.4,
    "end": 64944.32,
    "text": "all we'll do a git commit dash m added more steps. And then we'll do a git push origin main.",
    "textdich": ""
  },
  {
    "start": 64946.72,
    "end": 64954.24,
    "text": "Alright, and then we'll go back to actions. And we can see that our workflow is starting to run.",
    "textdich": ""
  },
  {
    "start": 64954.24,
    "end": 64958.24,
    "text": "That's why it's yellow. And we can take a look at its current status. So it's still running job one,",
    "textdich": ""
  },
  {
    "start": 64958.24,
    "end": 64962.16,
    "text": "which is the name we gave it. And we can just kind of follow along. So it looks like it pulled our",
    "textdich": ""
  },
  {
    "start": 64962.16,
    "end": 64968.8,
    "text": "repo install whoops, installed Python version 3.9. It's then an updated pip. And that's already",
    "textdich": ""
  },
  {
    "start": 64968.8,
    "end": 64972.72,
    "text": "completed. And now it's installing all the dependencies. So obviously, installing all the",
    "textdich": ""
  },
  {
    "start": 64972.72,
    "end": 64975.92,
    "text": "dependencies takes a certain amount of time, that's probably going to be the longest,",
    "textdich": ""
  },
  {
    "start": 64975.92,
    "end": 64982.0,
    "text": "specific step in our GitHub workflow at this point. All right, and it looks like that ran.",
    "textdich": ""
  },
  {
    "start": 64982.0,
    "end": 64985.28,
    "text": "And then it's essentially cleaning things up. And then it's completed. And we get the beautiful",
    "textdich": ""
  },
  {
    "start": 64985.28,
    "end": 64992.96,
    "text": "green check mark. So we can just close out of this go back. And you can even see the list of",
    "textdich": ""
  },
  {
    "start": 64992.96,
    "end": 64997.44,
    "text": "all of our workflows that GitHub actions is detected. So we have built in deploy code. So",
    "textdich": ""
  },
  {
    "start": 64997.44,
    "end": 65002.88,
    "text": "that's the only workflow that we have. But keep in mind, I can create essentially as many different",
    "textdich": ""
  },
  {
    "start": 65002.88,
    "end": 65009.12,
    "text": "yaml files inside this workflow folders to have a different workflow. So I might have one specific",
    "textdich": ""
  },
  {
    "start": 65009.12,
    "end": 65014.08,
    "text": "set of I might have a workflow specifically for one branch and a completely separate workflow",
    "textdich": ""
  },
  {
    "start": 65014.08,
    "end": 65018.48,
    "text": "for another branch. It just gives you a lot of customizability. But we're just going to have one",
    "textdich": ""
  },
  {
    "start": 65018.48,
    "end": 65023.12,
    "text": "workflow that works across all of our branches. Now, the next thing that I want to do is I want",
    "textdich": ""
  },
  {
    "start": 65023.12,
    "end": 65030.08,
    "text": "to run pytest. So to run pytest, right, it's a pretty simple process. So let me set up the name",
    "textdich": ""
  },
  {
    "start": 65030.08,
    "end": 65042.64,
    "text": "first. I will say, whoops, test with pytest. And then we'll say run. All right, and I need to run",
    "textdich": ""
  },
  {
    "start": 65042.64,
    "end": 65047.44,
    "text": "two commands. So if you ever want to provide a list of commands to run, instead of having to",
    "textdich": ""
  },
  {
    "start": 65047.44,
    "end": 65054.4,
    "text": "create multiple different steps, I can do a pipe, go down the line, and just provide the list of",
    "textdich": ""
  },
  {
    "start": 65054.4,
    "end": 65058.96,
    "text": "commands. So we'll do pip install pytest. And then we can go down the line and provide the",
    "textdich": ""
  },
  {
    "start": 65058.96,
    "end": 65063.28,
    "text": "second command. So then we just run pytest. And you can, you know, pass in whatever flags if you",
    "textdich": ""
  },
  {
    "start": 65063.28,
    "end": 65068.48,
    "text": "want the dash v and the dash s. But I'm going to keep it simple. And we're just going to keep it",
    "textdich": ""
  },
  {
    "start": 65068.48,
    "end": 65075.84,
    "text": "blank for now. Let's save this. And I'm going to then do the same thing. We'll do a git add dash",
    "textdich": ""
  },
  {
    "start": 65075.84,
    "end": 65087.2,
    "text": "dash all will do a git commit dash m. And I'll say added pytest step. And then we'll do a git push",
    "textdich": ""
  },
  {
    "start": 65087.2,
    "end": 65094.72,
    "text": "origin main again. And so from from a learning perspective, right, this is kind of a slow process",
    "textdich": ""
  },
  {
    "start": 65094.72,
    "end": 65098.56,
    "text": "because we have to push all of our changes. And then now we have to wait for this whole thing to",
    "textdich": ""
  },
  {
    "start": 65098.56,
    "end": 65103.84,
    "text": "run. But once you understand how all of this works, and how easy it is to set up, you won't have to",
    "textdich": ""
  },
  {
    "start": 65103.84,
    "end": 65108.24,
    "text": "keep doing this every single time or every single project, you can just essentially copy and paste",
    "textdich": ""
  },
  {
    "start": 65108.24,
    "end": 65115.12,
    "text": "most of your workflow. Alright, so it looks like it's completed. And we get a red X. So it looks",
    "textdich": ""
  },
  {
    "start": 65115.12,
    "end": 65119.92,
    "text": "like something broke. And that's to be expected. And it's going to highlight what specific test",
    "textdich": ""
  },
  {
    "start": 65119.92,
    "end": 65126.16,
    "text": "failed, or sorry, what specific step failed, but we can see that it was the running pytest. So if",
    "textdich": ""
  },
  {
    "start": 65126.16,
    "end": 65131.36,
    "text": "I just open this up a bit, and then expand it, we can take a look at what the error was. So it looks",
    "textdich": ""
  },
  {
    "start": 65131.36,
    "end": 65135.92,
    "text": "like it installed pytest. And that seems to have worked fine. And then down here, you can see that",
    "textdich": ""
  },
  {
    "start": 65135.92,
    "end": 65141.04,
    "text": "there's a couple of validation errors. And so it says that, you know, we didn't provide a database",
    "textdich": ""
  },
  {
    "start": 65142.24,
    "end": 65146.24,
    "text": "host name port. So it looks like there's the issues with environment variables. And that makes",
    "textdich": ""
  },
  {
    "start": 65146.24,
    "end": 65150.8,
    "text": "sense, because this is a brand new computer that we haven't touched. So none of the environment",
    "textdich": ""
  },
  {
    "start": 65150.8,
    "end": 65155.36,
    "text": "variables have been set up. So obviously, it has no environment variables. And our",
    "textdich": ""
  },
  {
    "start": 65155.92,
    "end": 65160.8,
    "text": "pedantic validation of environment variables should have failed, and it did absolutely fail.",
    "textdich": ""
  },
  {
    "start": 65160.8,
    "end": 65166.64,
    "text": "So this is all to be expected. And so in the next video, we'll figure out how we can set environment",
    "textdich": ""
  },
  {
    "start": 65166.64,
    "end": 65173.76,
    "text": "variables in our workflows so that we can provide the information for reaching our specific database.",
    "textdich": ""
  },
  {
    "start": 65173.76,
    "end": 65178.32,
    "text": "But there's a couple of different ways that we can set up environment variables. And there's a",
    "textdich": ""
  },
  {
    "start": 65178.32,
    "end": 65182.72,
    "text": "couple of different places where we can define them. So I'm going to show you a job how to set",
    "textdich": ""
  },
  {
    "start": 65182.72,
    "end": 65187.2,
    "text": "a job specific environment variable. That means this is an environment variable that will only",
    "textdich": ""
  },
  {
    "start": 65187.2,
    "end": 65192.88,
    "text": "be accessible from within one job. So in this case, our job that we've been working on is called job",
    "textdich": ""
  },
  {
    "start": 65192.88,
    "end": 65196.72,
    "text": "one. And so if you want to set an environment variable, you just set it right here. So we say",
    "textdich": ""
  },
  {
    "start": 65196.72,
    "end": 65201.76,
    "text": "env. And then you provide all of your environment variables. So in this case, let's say we want",
    "textdich": ""
  },
  {
    "start": 65201.76,
    "end": 65213.12,
    "text": "database host name. And in this case, it's going to be local host, we've now successfully sent",
    "textdich": ""
  },
  {
    "start": 65213.12,
    "end": 65216.24,
    "text": "set up one environment variable, and I'm just going to copy and paste all the others.",
    "textdich": ""
  },
  {
    "start": 65219.2,
    "end": 65223.44,
    "text": "And so now we've defined all of our environment variables, in this case,",
    "textdich": ""
  },
  {
    "start": 65224.56,
    "end": 65229.84,
    "text": "and that should fix the issue. But I want to show you guys what other environment variables",
    "textdich": ""
  },
  {
    "start": 65229.84,
    "end": 65234.16,
    "text": "that we have as well. And if you want to know where I'm kind of getting all this information,",
    "textdich": ""
  },
  {
    "start": 65234.16,
    "end": 65238.72,
    "text": "like I said, we have the documentation, and there should be a section for environment variables here.",
    "textdich": ""
  },
  {
    "start": 65239.28,
    "end": 65243.68,
    "text": "And so I think we should see the same thing, right? Yep, we see the same thing. So ENV under",
    "textdich": ""
  },
  {
    "start": 65243.68,
    "end": 65248.32,
    "text": "the specific job. And you just provide the list of all of your environment variables.",
    "textdich": ""
  },
  {
    "start": 65249.44,
    "end": 65254.16,
    "text": "And then there's some built in ones. So these are default environment variables that get set for you.",
    "textdich": ""
  },
  {
    "start": 65254.16,
    "end": 65261.2,
    "text": "So here you can see, what's the run number? What's the GitHub job? What's the action path,",
    "textdich": ""
  },
  {
    "start": 65261.2,
    "end": 65264.72,
    "text": "we can even see what's a repository. So if you want to get the name of your repository,",
    "textdich": ""
  },
  {
    "start": 65264.72,
    "end": 65269.6,
    "text": "you can reference this specific environment variable, but we don't need to do any of that.",
    "textdich": ""
  },
  {
    "start": 65269.6,
    "end": 65275.52,
    "text": "But what I do want to show you is, you know, if I had gone in and then created a second job called",
    "textdich": ""
  },
  {
    "start": 65275.52,
    "end": 65281.2,
    "text": "job two, right, this environment variable that we defined here is not available, because this is",
    "textdich": ""
  },
  {
    "start": 65281.2,
    "end": 65286.0,
    "text": "defined under job one. So if you want to have a environment variable that's shared across all of",
    "textdich": ""
  },
  {
    "start": 65286.0,
    "end": 65293.84,
    "text": "your jobs, I can specify an environment variable here, I can say ENV. And then I just provide my",
    "textdich": ""
  },
  {
    "start": 65293.84,
    "end": 65297.52,
    "text": "environment variable. So I could just copy this one as an example. And we can provide this. So",
    "textdich": ""
  },
  {
    "start": 65297.52,
    "end": 65303.36,
    "text": "then database host name is going to be available for job one, and job two. But for now, we're just",
    "textdich": ""
  },
  {
    "start": 65303.36,
    "end": 65307.04,
    "text": "going to remove that because we don't really need it. We don't really need that right now. And I'm",
    "textdich": ""
  },
  {
    "start": 65307.04,
    "end": 65314.48,
    "text": "going to keep everything as default in this case. And we're going to check this into get so I'm",
    "textdich": ""
  },
  {
    "start": 65314.48,
    "end": 65323.28,
    "text": "going to do a git add dash dash all do a git commit dash m added in v variables. And we'll do a git",
    "textdich": ""
  },
  {
    "start": 65323.28,
    "end": 65331.6,
    "text": "push origin main. Okay, and then back to our actions page. If I see the added environment",
    "textdich": ""
  },
  {
    "start": 65331.6,
    "end": 65337.52,
    "text": "variable section, we can see that failed. Once again, this is going to be expected. So if we",
    "textdich": ""
  },
  {
    "start": 65337.52,
    "end": 65343.44,
    "text": "go under, hope it looks like there's a weird failure, no steps defined. Okay, so we got an",
    "textdich": ""
  },
  {
    "start": 65343.44,
    "end": 65347.44,
    "text": "error because I accidentally left job two, so it doesn't like it the fact that I have jobs to with",
    "textdich": ""
  },
  {
    "start": 65347.44,
    "end": 65356.8,
    "text": "no steps. So we're going to save this again, and we're going to do another commit. And I'll just",
    "textdich": ""
  },
  {
    "start": 65356.8,
    "end": 65365.68,
    "text": "call this committing again, because I'm getting lazy. Right. And let's just make sure that we've",
    "textdich": ""
  },
  {
    "start": 65365.68,
    "end": 65370.24,
    "text": "kicked this off. Alright, so it looks like you kicked it off. And there's no, like major show",
    "textdich": ""
  },
  {
    "start": 65370.24,
    "end": 65374.56,
    "text": "stopping errors at the beginning. But we should still see this fail. And that's to be expected.",
    "textdich": ""
  },
  {
    "start": 65374.56,
    "end": 65379.6,
    "text": "But I just want to make sure that we no longer have issues with environment variables. And I want",
    "textdich": ""
  },
  {
    "start": 65379.6,
    "end": 65384.24,
    "text": "to make sure that the environment variables that we set did successfully get applied to our runner.",
    "textdich": ""
  },
  {
    "start": 65384.24,
    "end": 65390.32,
    "text": "Okay, guys, so a couple of things to point out. So there's a whole bunch of errors. And that's to be",
    "textdich": ""
  },
  {
    "start": 65390.32,
    "end": 65395.44,
    "text": "expected. And that's okay. But we can see that it did process all of our environment variables. So",
    "textdich": ""
  },
  {
    "start": 65395.44,
    "end": 65399.6,
    "text": "that's great. So we did fix that issue. But you'll notice that, you know, when we're running our test,",
    "textdich": ""
  },
  {
    "start": 65399.6,
    "end": 65404.32,
    "text": "we get a whole bunch of errors. And then eventually, you'll see a whole bunch of SQL alchemy errors.",
    "textdich": ""
  },
  {
    "start": 65404.32,
    "end": 65408.4,
    "text": "And the reason we see a whole bunch of SQL alchemy errors is because if you look at the",
    "textdich": ""
  },
  {
    "start": 65408.4,
    "end": 65412.08,
    "text": "environment variables, we're pointing to localhost for our database, there's no database on this",
    "textdich": ""
  },
  {
    "start": 65412.08,
    "end": 65416.24,
    "text": "runner, this is a brand new computer that why would there be a database installed. So we do",
    "textdich": ""
  },
  {
    "start": 65416.24,
    "end": 65421.92,
    "text": "eventually have to set up a database for testing on the runner itself, or we would have to point",
    "textdich": ""
  },
  {
    "start": 65421.92,
    "end": 65427.84,
    "text": "it to a remote database, whether that's hosted on Heroku, or AWS, it doesn't matter. But you know,",
    "textdich": ""
  },
  {
    "start": 65427.84,
    "end": 65432.24,
    "text": "for testing purposes in your CI CD pipeline, I'd rather create one on our runner that we can just",
    "textdich": ""
  },
  {
    "start": 65432.24,
    "end": 65438.0,
    "text": "quickly spin up for testing. So once again, I just wanted to point out how to set up environment",
    "textdich": ""
  },
  {
    "start": 65438.0,
    "end": 65442.24,
    "text": "variables. The one thing I don't like, and I want to make sure I want to teach you guys is that,",
    "textdich": ""
  },
  {
    "start": 65442.24,
    "end": 65447.36,
    "text": "in this case, we're hard coding these values in here. And so this is all stored in our repository,",
    "textdich": ""
  },
  {
    "start": 65447.36,
    "end": 65451.92,
    "text": "anyone can have access to it. This is our test database. So it's not a big deal. But I do want",
    "textdich": ""
  },
  {
    "start": 65451.92,
    "end": 65460.48,
    "text": "to show you how we can how we can store these as secrets, so that the runner has access to them,",
    "textdich": ""
  },
  {
    "start": 65460.48,
    "end": 65464.64,
    "text": "but no one else can see them because storing it in here could potentially cause issues.",
    "textdich": ""
  },
  {
    "start": 65464.64,
    "end": 65471.36,
    "text": "You know, if you didn't want this, these, these, the the password and the username for your test",
    "textdich": ""
  },
  {
    "start": 65471.36,
    "end": 65476.08,
    "text": "database to get out, in my case, I don't really care. But you know, it is important for you guys",
    "textdich": ""
  },
  {
    "start": 65476.08,
    "end": 65482.56,
    "text": "on to understand how to actually do that. So as I mentioned in the last video, our environment",
    "textdich": ""
  },
  {
    "start": 65482.56,
    "end": 65486.64,
    "text": "variables are hard coded into our workflow. So technically, when we check this into Git, anyone",
    "textdich": ""
  },
  {
    "start": 65486.64,
    "end": 65490.64,
    "text": "can see it, which may or may not be a problem. But if it is a problem, I'm gonna show you guys how",
    "textdich": ""
  },
  {
    "start": 65490.64,
    "end": 65496.72,
    "text": "we can work with GitHub secrets. So if we go to our GitHub page and go to settings, here, there's",
    "textdich": ""
  },
  {
    "start": 65496.72,
    "end": 65502.72,
    "text": "a section called secrets. So we can define secrets that we can use and access in our workflows.",
    "textdich": ""
  },
  {
    "start": 65504.24,
    "end": 65509.52,
    "text": "And so this is a repository secret. That means it's globally accessible across the entire",
    "textdich": ""
  },
  {
    "start": 65509.52,
    "end": 65514.0,
    "text": "repository across all branches. There's no you know, any kind of environments or anything like",
    "textdich": ""
  },
  {
    "start": 65514.0,
    "end": 65518.88,
    "text": "that. So we'll select new repository secret. And here, we just give it a name. So if you take a",
    "textdich": ""
  },
  {
    "start": 65518.88,
    "end": 65522.24,
    "text": "look at our environment variables, I figured, since that's what it's going to represent,",
    "textdich": ""
  },
  {
    "start": 65522.24,
    "end": 65526.48,
    "text": "we might as well use the same one. So I'll say database host name, in this case, and then just",
    "textdich": ""
  },
  {
    "start": 65526.48,
    "end": 65532.64,
    "text": "give it a value. So local host, that's it, right? It's just a key value pair, we do add secret,",
    "textdich": ""
  },
  {
    "start": 65532.64,
    "end": 65538.08,
    "text": "and then you'll see it's stored in here. And so now, in our code, if we want to reference",
    "textdich": ""
  },
  {
    "start": 65538.72,
    "end": 65544.32,
    "text": "the this secret, which I happen to call database host name, we just copy the name of the secret.",
    "textdich": ""
  },
  {
    "start": 65544.32,
    "end": 65554.08,
    "text": "And then what we do is we use dollar curly brace curly brace, so two sets of curly braces. And we",
    "textdich": ""
  },
  {
    "start": 65554.08,
    "end": 65559.76,
    "text": "say secrets dot and then the name of the secret. So this will allow the runner to access the secret",
    "textdich": ""
  },
  {
    "start": 65560.48,
    "end": 65567.12,
    "text": "from our GitHub repo, so that our our workflow code doesn't actually expose all of this information.",
    "textdich": ""
  },
  {
    "start": 65569.68,
    "end": 65572.72,
    "text": "And so this is what you want to do for your passwords and things like that, especially",
    "textdich": ""
  },
  {
    "start": 65572.72,
    "end": 65577.68,
    "text": "when it comes to storing the information for connecting to your production database, which",
    "textdich": ""
  },
  {
    "start": 65577.68,
    "end": 65584.48,
    "text": "we will do in one of the later lessons. But before we proceed any further, I want to actually show",
    "textdich": ""
  },
  {
    "start": 65584.48,
    "end": 65589.28,
    "text": "you another option. So I'm actually going to remove this repository secret in this case,",
    "textdich": ""
  },
  {
    "start": 65589.28,
    "end": 65596.24,
    "text": "which is, once again, a global secret that our entire repo can access. Instead, what I like to",
    "textdich": ""
  },
  {
    "start": 65596.24,
    "end": 65600.88,
    "text": "do is I like to set up environments. So you can set up a whole bunch of secrets that are available",
    "textdich": ""
  },
  {
    "start": 65600.88,
    "end": 65604.88,
    "text": "depending on what the environment is. So I can create one for testing, one for development,",
    "textdich": ""
  },
  {
    "start": 65604.88,
    "end": 65610.08,
    "text": "one for production, gives us a lot of flexibility. So I'm going to create a new environment. I'm",
    "textdich": ""
  },
  {
    "start": 65610.08,
    "end": 65619.68,
    "text": "going to call this testing. And within the environment, we're right, we're under the testing",
    "textdich": ""
  },
  {
    "start": 65619.68,
    "end": 65624.64,
    "text": "environment, we can add a secret here. And so we're gonna do the same thing, I'm going to call",
    "textdich": ""
  },
  {
    "start": 65624.64,
    "end": 65633.12,
    "text": "database host name. And in this case, we'll say, local host, we'll add the secret. And we can",
    "textdich": ""
  },
  {
    "start": 65633.12,
    "end": 65639.92,
    "text": "provide as many secrets as we want. And then what we can do is, in our job, we can specify what the",
    "textdich": ""
  },
  {
    "start": 65639.92,
    "end": 65648.96,
    "text": "environment is for the job. So I can say, and oops, environment. And then we provide the name,",
    "textdich": ""
  },
  {
    "start": 65648.96,
    "end": 65654.48,
    "text": "which is going to be testing, right, this is going to match up with whatever name we gave here. So I",
    "textdich": ""
  },
  {
    "start": 65654.48,
    "end": 65659.6,
    "text": "called it testing. So we give this the name testing, and it's going to have access to all of the",
    "textdich": ""
  },
  {
    "start": 65659.6,
    "end": 65663.76,
    "text": "environment variables that we defined here. And the way to access them is exactly the same way",
    "textdich": ""
  },
  {
    "start": 65663.76,
    "end": 65668.08,
    "text": "you just do dollar to curly braces, secrets, and then the name of the environment variable.",
    "textdich": ""
  },
  {
    "start": 65668.08,
    "end": 65672.08,
    "text": "Now, if there's an overlap with the name of your environment variables, when it comes to",
    "textdich": ""
  },
  {
    "start": 65672.72,
    "end": 65676.88,
    "text": "the ones that you set in your environment, as well as the one you set globally for the repository,",
    "textdich": ""
  },
  {
    "start": 65676.88,
    "end": 65681.44,
    "text": "I don't actually know who takes precedence. I suspect it's probably the environment, but you",
    "textdich": ""
  },
  {
    "start": 65681.44,
    "end": 65685.04,
    "text": "should check the documentation to verify. But we don't have any global secrets, I'm going to be",
    "textdich": ""
  },
  {
    "start": 65685.04,
    "end": 65690.24,
    "text": "using environments for everything. So this keeps things nice and simple. And so now that we've set",
    "textdich": ""
  },
  {
    "start": 65690.24,
    "end": 65697.6,
    "text": "up this one, let's go ahead and just set up all of these while we have the option. And so we're",
    "textdich": ""
  },
  {
    "start": 65697.6,
    "end": 65715.36,
    "text": "going to set the port as well. Here, we'll set the password. And we've got the database name,",
    "textdich": ""
  },
  {
    "start": 65715.36,
    "end": 65725.28,
    "text": "which will just say fast API. Then the database username and autofills, because, you know,",
    "textdich": ""
  },
  {
    "start": 65725.28,
    "end": 65730.08,
    "text": "I ran through this all in a quick trial run before I started recording. So it's kind of cached in",
    "textdich": ""
  },
  {
    "start": 65730.08,
    "end": 65750.08,
    "text": "there. All right, and so now that we have all of our environment variables or our environment",
    "textdich": ""
  },
  {
    "start": 65750.08,
    "end": 65755.76,
    "text": "secret set, we could just change all of these to reference those secrets. We just do the same",
    "textdich": ""
  },
  {
    "start": 65755.76,
    "end": 65767.92,
    "text": "process. And in this case, it's just going to be the same exact name as the key in this case.",
    "textdich": ""
  },
  {
    "start": 65773.04,
    "end": 65778.32,
    "text": "Alright, and so now that we got all of these set, let's just save this. And I'm going to check this",
    "textdich": ""
  },
  {
    "start": 65778.32,
    "end": 65782.56,
    "text": "into Git now, just to make sure that you know, everything is kind of working so far.",
    "textdich": ""
  },
  {
    "start": 65790.88,
    "end": 65794.0,
    "text": "And we'll take a look at the job real quick. And hopefully,",
    "textdich": ""
  },
  {
    "start": 65794.0,
    "end": 65799.76,
    "text": "there's no errors or only errors that we expect to see. And what did I call this one?",
    "textdich": ""
  },
  {
    "start": 65799.76,
    "end": 65809.12,
    "text": "Asdf. Oh, okay. So it looks like it failed already. So we clearly did something wrong.",
    "textdich": ""
  },
  {
    "start": 65809.12,
    "end": 65814.96,
    "text": "This workflow is not valid. unrecognized name database underscore port. Well,",
    "textdich": ""
  },
  {
    "start": 65814.96,
    "end": 65818.56,
    "text": "what happened there? And it even tells me the position. So if I like show more",
    "textdich": ""
  },
  {
    "start": 65821.12,
    "end": 65823.84,
    "text": "database underscore password. So let's see, what did we mess up?",
    "textdich": ""
  },
  {
    "start": 65823.84,
    "end": 65831.84,
    "text": "Yeah, simple mistake, I forgot the secrets dot before all of my variables. So that's why",
    "textdich": ""
  },
  {
    "start": 65831.84,
    "end": 65835.68,
    "text": "it had no idea what that was, we have to reference secrets to actually get access to them.",
    "textdich": ""
  },
  {
    "start": 65839.76,
    "end": 65841.6,
    "text": "And now let's try this one more time.",
    "textdich": ""
  },
  {
    "start": 65841.6,
    "end": 65852.72,
    "text": "All right, this looks a little better.",
    "textdich": ""
  },
  {
    "start": 65858.88,
    "end": 65863.12,
    "text": "All right. And so now if we look at the test with pytest, you can see that the environment",
    "textdich": ""
  },
  {
    "start": 65863.12,
    "end": 65869.68,
    "text": "variables were passed in and GitHub will automatically kind of hide what all of the",
    "textdich": ""
  },
  {
    "start": 65869.68,
    "end": 65873.36,
    "text": "very the secrets are because once again, they're secret, so you shouldn't see them. But it does",
    "textdich": ""
  },
  {
    "start": 65873.36,
    "end": 65877.36,
    "text": "show that we were successfully able to retrieve them. And we got the same error down here. This",
    "textdich": ""
  },
  {
    "start": 65877.36,
    "end": 65882.32,
    "text": "is just an issue with accessing the database, because there is no database on on local host.",
    "textdich": ""
  },
  {
    "start": 65882.32,
    "end": 65885.44,
    "text": "So it's trying to connect to a database that doesn't exist, which is going to create all",
    "textdich": ""
  },
  {
    "start": 65885.44,
    "end": 65890.08,
    "text": "sorts of issues. So in the next video, we'll figure out what we can do to set up a test",
    "textdich": ""
  },
  {
    "start": 65890.08,
    "end": 65896.0,
    "text": "database on our runner so that we can actually run our tests. So when it comes to setting up a",
    "textdich": ""
  },
  {
    "start": 65896.0,
    "end": 65901.2,
    "text": "database on our runner, the easiest way to do that is to create a service container. So what's going",
    "textdich": ""
  },
  {
    "start": 65901.2,
    "end": 65905.84,
    "text": "to happen to GitHub actions is actually going to allow us to spin up a Docker container, which",
    "textdich": ""
  },
  {
    "start": 65905.84,
    "end": 65911.6,
    "text": "really is the easiest way to set up Docker on sorry, to set up Postgres on a remote machine.",
    "textdich": ""
  },
  {
    "start": 65911.6,
    "end": 65916.32,
    "text": "That way, we don't have to worry about any issues with potential installation of a Postgres database.",
    "textdich": ""
  },
  {
    "start": 65916.32,
    "end": 65920.64,
    "text": "And so I recommend you take a look at this tutorial, which kind of walks you through how",
    "textdich": ""
  },
  {
    "start": 65920.64,
    "end": 65925.04,
    "text": "to set up a Postgres service container. And it just gives you an example in this case,",
    "textdich": ""
  },
  {
    "start": 65925.04,
    "end": 65929.2,
    "text": "which we are essentially just going to copy in this case. But here, we just under jobs,",
    "textdich": ""
  },
  {
    "start": 65929.2,
    "end": 65935.2,
    "text": "we specify a service, we give this service specific name or label. And then we just tell",
    "textdich": ""
  },
  {
    "start": 65935.2,
    "end": 65939.2,
    "text": "the image that we want to use. And in this case, we're just using the default Postgres image. This",
    "textdich": ""
  },
  {
    "start": 65939.2,
    "end": 65943.44,
    "text": "is the one that comes from Docker Hub, by the way, but you could technically use any image that you",
    "textdich": ""
  },
  {
    "start": 65943.44,
    "end": 65948.24,
    "text": "wanted to, but Postgres, so we might as well just use the default one. And then we can pass environment",
    "textdich": ""
  },
  {
    "start": 65948.24,
    "end": 65953.12,
    "text": "variables into the Docker container as well. So one of the things that we want to do is set up the",
    "textdich": ""
  },
  {
    "start": 65953.12,
    "end": 65960.48,
    "text": "password for Postgres, as well as even potentially the database name. And then what we want to do is",
    "textdich": ""
  },
  {
    "start": 65960.48,
    "end": 65964.72,
    "text": "we want to set up some health checks to wait until Postgres has started. Because until Postgres",
    "textdich": ""
  },
  {
    "start": 65964.72,
    "end": 65968.96,
    "text": "starts, we should not run any tests because the tests are going to fail because the database is",
    "textdich": ""
  },
  {
    "start": 65968.96,
    "end": 65973.2,
    "text": "down. So we want to make sure that Postgres is up and ready before we actually start running our",
    "textdich": ""
  },
  {
    "start": 65973.2,
    "end": 65978.24,
    "text": "tests. So we're essentially just going to copy this line here. But let's go back to our code. And",
    "textdich": ""
  },
  {
    "start": 65978.24,
    "end": 65983.84,
    "text": "we'll take a look at how to do this step by step. And so I'll just go under the environment variable",
    "textdich": ""
  },
  {
    "start": 65983.84,
    "end": 65990.48,
    "text": "section here. And we'll create a section called services. And I'm going to create a service called",
    "textdich": ""
  },
  {
    "start": 65990.48,
    "end": 65996.48,
    "text": "Postgres. And we're going to provide the image just like we saw in that example. And that's going to",
    "textdich": ""
  },
  {
    "start": 65996.48,
    "end": 66003.36,
    "text": "be Postgres. And let's pass some environment variables. So the first thing is going to be the",
    "textdich": ""
  },
  {
    "start": 66003.36,
    "end": 66011.52,
    "text": "Postgres password. So we're going to do Postgres underscore password. And here for the password,",
    "textdich": ""
  },
  {
    "start": 66011.52,
    "end": 66015.12,
    "text": "we can literally reference the same exact secret because they're going to be using the same password.",
    "textdich": ""
  },
  {
    "start": 66018.72,
    "end": 66026.0,
    "text": "And then we also want to give it a custom database name. So we want to automatically create the fast",
    "textdich": ""
  },
  {
    "start": 66026.0,
    "end": 66031.92,
    "text": "API underscore test database so that we don't have to do it in code. So I'll do Postgres underscore",
    "textdich": ""
  },
  {
    "start": 66031.92,
    "end": 66044.72,
    "text": "DB. And we'll do dollar dollar. And then here I can pass in with my database name. So this is just",
    "textdich": ""
  },
  {
    "start": 66044.72,
    "end": 66050.24,
    "text": "going to be fast API at this point. But we want fast API underscore test. Because that's what our",
    "textdich": ""
  },
  {
    "start": 66050.24,
    "end": 66057.68,
    "text": "code has been set up to run. So we'll do underscore test, right? So this is kind of like string",
    "textdich": ""
  },
  {
    "start": 66057.68,
    "end": 66063.04,
    "text": "interpolation. So same thing. And then at that point, I think our Docker container is pretty",
    "textdich": ""
  },
  {
    "start": 66063.04,
    "end": 66067.68,
    "text": "much set up, we do have to specify the ports that we want to open up. So we'll say ports.",
    "textdich": ""
  },
  {
    "start": 66069.68,
    "end": 66075.92,
    "text": "And you know, we want to do 5432. And then 5432. So this is what we want. And you're probably",
    "textdich": ""
  },
  {
    "start": 66075.92,
    "end": 66083.68,
    "text": "thinking, well, can we use the the variables here? And I tried to do this, I tried to paste this here,",
    "textdich": ""
  },
  {
    "start": 66083.68,
    "end": 66087.92,
    "text": "and then paste this here. And I actually got errors, I don't know why it didn't work. But for",
    "textdich": ""
  },
  {
    "start": 66087.92,
    "end": 66091.84,
    "text": "some reason, this wasn't allowed. So you have to hard code these values, unfortunately.",
    "textdich": ""
  },
  {
    "start": 66094.56,
    "end": 66098.16,
    "text": "And then lastly, let's set up the options. So I'm going to just copy these options right here.",
    "textdich": ""
  },
  {
    "start": 66098.16,
    "end": 66116.64,
    "text": "Because we want those health checks for sure. Let's save this and make sure that all the spacing",
    "textdich": ""
  },
  {
    "start": 66116.64,
    "end": 66121.92,
    "text": "lines up because a lot of times the spacings can mess up things. I have a auto format or so with",
    "textdich": ""
  },
  {
    "start": 66121.92,
    "end": 66127.52,
    "text": "for yaml syntax, it'll automatically format it so that all the spacing is set up properly.",
    "textdich": ""
  },
  {
    "start": 66127.52,
    "end": 66132.4,
    "text": "You want to make sure that you do it manually or set up or install a extension in VS code,",
    "textdich": ""
  },
  {
    "start": 66132.4,
    "end": 66137.28,
    "text": "if that's not for you. Okay, so we've got our Postgres database,",
    "textdich": ""
  },
  {
    "start": 66137.28,
    "end": 66159.92,
    "text": "and I think we should be good to go. So let's try this get add all get commit. All right, and so we",
    "textdich": ""
  },
  {
    "start": 66159.92,
    "end": 66166.0,
    "text": "can see that our most recent test in this case happened to succeed. And if you actually go to",
    "textdich": ""
  },
  {
    "start": 66166.0,
    "end": 66172.4,
    "text": "the test with py test, and just see the results, we could see that 46 tests pass with no issues.",
    "textdich": ""
  },
  {
    "start": 66174.24,
    "end": 66178.08,
    "text": "And so that means it did successfully connect to our database. And after that,",
    "textdich": ""
  },
  {
    "start": 66178.08,
    "end": 66185.36,
    "text": "it essentially completed the job. So now we've successfully added a database and we've successfully",
    "textdich": ""
  },
  {
    "start": 66185.36,
    "end": 66193.36,
    "text": "set up our CI pipeline, this is the CI portion of things to pull our code, install Python, set up,",
    "textdich": ""
  },
  {
    "start": 66193.36,
    "end": 66198.72,
    "text": "you know, install all the dependencies, and to run our test. So all of this happens in an automated",
    "textdich": ""
  },
  {
    "start": 66198.72,
    "end": 66204.4,
    "text": "fashion now, just by doing a git push. So you could see how easy it is to get things started.",
    "textdich": ""
  },
  {
    "start": 66204.4,
    "end": 66209.2,
    "text": "And so I think from the CI perspective, the last thing I want to show you guys is how to",
    "textdich": ""
  },
  {
    "start": 66211.12,
    "end": 66219.2,
    "text": "essentially create a Docker image in our runner and push that out to to Docker hub so that our",
    "textdich": ""
  },
  {
    "start": 66219.2,
    "end": 66222.96,
    "text": "production network can then pull that brand new image. So there's a couple of things that we have",
    "textdich": ""
  },
  {
    "start": 66222.96,
    "end": 66228.96,
    "text": "to do to get Docker working in our GitHub workflow. The first thing is we need to have a repository",
    "textdich": ""
  },
  {
    "start": 66228.96,
    "end": 66234.24,
    "text": "set up on Docker hub to store our images. And if you did not create one during the Docker section,",
    "textdich": ""
  },
  {
    "start": 66234.24,
    "end": 66238.56,
    "text": "go ahead and create a new one. So log into Docker hub, select Create repository and just give this",
    "textdich": ""
  },
  {
    "start": 66238.56,
    "end": 66242.88,
    "text": "a name that you can remember. In this case is going to be fast API, I'm going to call it that",
    "textdich": ""
  },
  {
    "start": 66242.88,
    "end": 66247.76,
    "text": "and then make it public just to keep it simple. And so this is our repo. And then it's going to",
    "textdich": ""
  },
  {
    "start": 66247.76,
    "end": 66253.68,
    "text": "tell us how to actually push an image to it. And then if you go to this page right here, so docs",
    "textdich": ""
  },
  {
    "start": 66253.68,
    "end": 66260.24,
    "text": "dot Docker calm slash CI CD slash GitHub actions, it's got an excellent tutorial that we can follow",
    "textdich": ""
  },
  {
    "start": 66260.24,
    "end": 66268.16,
    "text": "for setting up Docker with our GitHub actions. And so if we go back to our Docker hub, the first",
    "textdich": ""
  },
  {
    "start": 66268.16,
    "end": 66273.92,
    "text": "thing that we want to do is we want to get an access token. So let's go here. And I think we",
    "textdich": ""
  },
  {
    "start": 66273.92,
    "end": 66281.44,
    "text": "go under settings, or well, it doesn't look like it's here. Maybe account settings. Yep, and then",
    "textdich": ""
  },
  {
    "start": 66281.44,
    "end": 66291.76,
    "text": "security and then we can select new access token. And maybe we can call this GitHub actions. And",
    "textdich": ""
  },
  {
    "start": 66291.76,
    "end": 66296.32,
    "text": "we're going to give it, you know, whatever permission that you want. Does the Docker give",
    "textdich": ""
  },
  {
    "start": 66296.32,
    "end": 66303.12,
    "text": "us information on what permissions doesn't look like it. In this case, so just go ahead and select",
    "textdich": ""
  },
  {
    "start": 66303.12,
    "end": 66309.6,
    "text": "all of them for now. Alright, and so it's going to give you your access token. Make sure that",
    "textdich": ""
  },
  {
    "start": 66310.24,
    "end": 66314.08,
    "text": "you don't share this with anyone else. And it's only going to be displayed once. So go ahead and",
    "textdich": ""
  },
  {
    "start": 66314.08,
    "end": 66323.84,
    "text": "copy it and make sure that you have this. Then what it's telling us to do is we want to create a",
    "textdich": ""
  },
  {
    "start": 66326.4,
    "end": 66332.4,
    "text": "secret for both our username, as well as the Docker hub access token. So let's create these",
    "textdich": ""
  },
  {
    "start": 66332.4,
    "end": 66338.08,
    "text": "two secrets in GitHub for Docker hub access token and Docker hub username. And I actually forgot",
    "textdich": ""
  },
  {
    "start": 66338.08,
    "end": 66345.6,
    "text": "what my username was. Okay, so it's sloppy networks. And so here we'll go into settings.",
    "textdich": ""
  },
  {
    "start": 66346.72,
    "end": 66353.6,
    "text": "And feel free to use either the global repository secrets or environment secrets. I'm going to just",
    "textdich": ""
  },
  {
    "start": 66353.6,
    "end": 66357.6,
    "text": "put this in the testing environment for now. But you can use either one in this case.",
    "textdich": ""
  },
  {
    "start": 66357.6,
    "end": 66368.64,
    "text": "And so we got Docker underscore hub underscore username. This is going to be sloppy networks",
    "textdich": ""
  },
  {
    "start": 66368.64,
    "end": 66377.76,
    "text": "for me, but it's gonna be something else for you guys. And the last one is going to be Docker hub.",
    "textdich": ""
  },
  {
    "start": 66377.76,
    "end": 66398.16,
    "text": "What is it Docker hub access token. Right. And so once we get that set up, you'll see that they're",
    "textdich": ""
  },
  {
    "start": 66398.16,
    "end": 66402.32,
    "text": "going to give us the steps on how to actually set this up in our yaml file, you can ignore the",
    "textdich": ""
  },
  {
    "start": 66402.32,
    "end": 66407.68,
    "text": "original the the setup process. And what we want to do is we want to go down to the this section",
    "textdich": ""
  },
  {
    "start": 66407.68,
    "end": 66412.16,
    "text": "right here, which shows us how to log into Docker hub. So we can literally just copy this straight",
    "textdich": ""
  },
  {
    "start": 66412.16,
    "end": 66419.92,
    "text": "up. And just paste it in here. So we can just say, we'll do it at the what step should we do",
    "textdich": ""
  },
  {
    "start": 66419.92,
    "end": 66425.6,
    "text": "this at? We'll do it at the end, just because why not? Because some of you guys might not be",
    "textdich": ""
  },
  {
    "start": 66425.6,
    "end": 66430.24,
    "text": "interested in setting up Docker. So it's going to be an optional step at the end. So we'll log",
    "textdich": ""
  },
  {
    "start": 66430.24,
    "end": 66434.96,
    "text": "into Docker hub using this built in action from the marketplace. And then here, it's just going",
    "textdich": ""
  },
  {
    "start": 66434.96,
    "end": 66439.68,
    "text": "to provide two properties, username and password, which is going to reference the two secrets that",
    "textdich": ""
  },
  {
    "start": 66439.68,
    "end": 66449.68,
    "text": "we created. All right, and then we want to set up Docker build x. So we'll copy this one as well.",
    "textdich": ""
  },
  {
    "start": 66449.68,
    "end": 66467.36,
    "text": "All right, and then we have the build and push step right here, which in this case, it's a once",
    "textdich": ""
  },
  {
    "start": 66467.36,
    "end": 66471.52,
    "text": "again, a built in action. And all it's going to do is we're going to provide a path to the context.",
    "textdich": ""
  },
  {
    "start": 66471.52,
    "end": 66477.44,
    "text": "So this is essentially where is the Docker file located. And we, this is technically optional.",
    "textdich": ""
  },
  {
    "start": 66477.44,
    "end": 66482.48,
    "text": "But if you want to, you can hard code the specific Docker file. I think it should default to this one,",
    "textdich": ""
  },
  {
    "start": 66482.48,
    "end": 66486.48,
    "text": "because that's the default Docker file. But we'll just put it in just in case. And then the push is",
    "textdich": ""
  },
  {
    "start": 66486.48,
    "end": 66491.44,
    "text": "means not only are we going to build the Docker image, we're also going to push it up to Docker",
    "textdich": ""
  },
  {
    "start": 66491.44,
    "end": 66496.96,
    "text": "hub. And then we have to give it a specific tag. And if we go back to Docker hub, and I go to my",
    "textdich": ""
  },
  {
    "start": 66496.96,
    "end": 66503.28,
    "text": "repositories, and I go to my fast API, it's going to show me the format of the tag that I need,",
    "textdich": ""
  },
  {
    "start": 66503.28,
    "end": 66507.12,
    "text": "so that I can actually push it up properly. So it's going to be the username slash, and then the name",
    "textdich": ""
  },
  {
    "start": 66507.12,
    "end": 66511.12,
    "text": "of the repository, which is fast API. And then we can also give it an optional tag name as well.",
    "textdich": ""
  },
  {
    "start": 66512.64,
    "end": 66515.92,
    "text": "So once again, we're going to copy this and just update a few fields.",
    "textdich": ""
  },
  {
    "start": 66523.04,
    "end": 66526.8,
    "text": "Everything else should be just fine. The only thing that we have to change is this is going to",
    "textdich": ""
  },
  {
    "start": 66526.8,
    "end": 66530.64,
    "text": "be fast API. And it's going to reference the username. So it's going to be in the exact format.",
    "textdich": ""
  },
  {
    "start": 66530.64,
    "end": 66533.92,
    "text": "And if you want to give it a very specific tag, you can give that as well. But I'm going to just",
    "textdich": ""
  },
  {
    "start": 66533.92,
    "end": 66538.16,
    "text": "give it the default latest. And then here, it's just printing out the image digest, which is for",
    "textdich": ""
  },
  {
    "start": 66538.16,
    "end": 66543.44,
    "text": "us is optional. You'll see that it does provide us some optional things that we can do for",
    "textdich": ""
  },
  {
    "start": 66543.44,
    "end": 66549.76,
    "text": "optimization. So we can use the build cache so that we don't have to read download all of our",
    "textdich": ""
  },
  {
    "start": 66549.76,
    "end": 66555.04,
    "text": "images every time we run because that's going to extend the build time and the runtime for our",
    "textdich": ""
  },
  {
    "start": 66555.04,
    "end": 66562.16,
    "text": "runner, which is eventually going to cause us a certain amount of money. So this is the code that",
    "textdich": ""
  },
  {
    "start": 66562.16,
    "end": 66567.12,
    "text": "you can use. And if you look at the bottom right here, this is going to show us all of the code at",
    "textdich": ""
  },
  {
    "start": 66567.12,
    "end": 66572.4,
    "text": "the very end. So we can literally just copy all of this if we wanted to, and just use that instead",
    "textdich": ""
  },
  {
    "start": 66572.4,
    "end": 66580.88,
    "text": "of what we put. So that's what we will do. So let me just delete all of this and then paste it in.",
    "textdich": ""
  },
  {
    "start": 66585.44,
    "end": 66591.12,
    "text": "And we have everything. And once again, we just want to change the name to be the repository name,",
    "textdich": ""
  },
  {
    "start": 66591.12,
    "end": 66594.56,
    "text": "which is right here, we could also use a secret for that. But don't worry too much about that.",
    "textdich": ""
  },
  {
    "start": 66597.6,
    "end": 66605.36,
    "text": "And that should be all that we have to do for the Docker integration. If you don't have a Docker",
    "textdich": ""
  },
  {
    "start": 66605.36,
    "end": 66610.96,
    "text": "file, then I recommend you well, I'll just pause this video, create a file in your root and the",
    "textdich": ""
  },
  {
    "start": 66610.96,
    "end": 66615.28,
    "text": "root of your project directory called Docker file with a capital D and just copy all of this. Or",
    "textdich": ""
  },
  {
    "start": 66615.28,
    "end": 66622.96,
    "text": "you can follow what I go through in the Docker section if you guys skip that. And I think that",
    "textdich": ""
  },
  {
    "start": 66622.96,
    "end": 66628.96,
    "text": "should be everything that we need. So let's go ahead and push this and pray that it does not",
    "textdich": ""
  },
  {
    "start": 66628.96,
    "end": 66632.72,
    "text": "break anything. And it works just the way we expect it to. So we'll do get add dash dash all",
    "textdich": ""
  },
  {
    "start": 66632.72,
    "end": 66650.48,
    "text": "get commit added Docker. And then we'll do a git push origin. Yep, and it failed. So fully expected",
    "textdich": ""
  },
  {
    "start": 66650.48,
    "end": 66658.0,
    "text": "this. A step cannot have both uses and run keys. So what did we break here? Actually, it should",
    "textdich": ""
  },
  {
    "start": 66658.0,
    "end": 66669.6,
    "text": "where is it telling us this? Yeah, this spacing got messed up. So that was a very obvious mistake",
    "textdich": ""
  },
  {
    "start": 66669.6,
    "end": 66679.52,
    "text": "that I should have caught. I just have to move this back right there. And that should fix everything.",
    "textdich": ""
  },
  {
    "start": 66679.52,
    "end": 66693.6,
    "text": "So let's do this again. Alright, so so far, it's not aired out. So it looks like things look okay.",
    "textdich": ""
  },
  {
    "start": 66699.68,
    "end": 66704.56,
    "text": "And we can see the build and push section failed. So let's see if there's an error.",
    "textdich": ""
  },
  {
    "start": 66704.56,
    "end": 66711.12,
    "text": "And it looks like the there's some issue with the driver. Please switch to a different driver Docker",
    "textdich": ""
  },
  {
    "start": 66711.12,
    "end": 66719.68,
    "text": "build x create dash dash use. But let's see what that is in this case. And I realized the documentation",
    "textdich": ""
  },
  {
    "start": 66719.68,
    "end": 66725.28,
    "text": "was a little confusing this section that we copied at the end. It didn't include one of these steps,",
    "textdich": ""
  },
  {
    "start": 66725.28,
    "end": 66732.24,
    "text": "which is the build x step. So before we are actually after we log in, we want to set up a build x,",
    "textdich": ""
  },
  {
    "start": 66732.24,
    "end": 66736.56,
    "text": "which is the mistake that we ran into. So we want to copy this page right here,",
    "textdich": ""
  },
  {
    "start": 66736.56,
    "end": 66748.48,
    "text": "this section, and then we'll run that right after the login. And so now if we do a get at all",
    "textdich": ""
  },
  {
    "start": 66748.48,
    "end": 66764.08,
    "text": "get commit dash m. And then I get push origin main. Okay, so I think this time, everything should work.",
    "textdich": ""
  },
  {
    "start": 66764.08,
    "end": 66769.92,
    "text": "But just to reiterate, because I think I went a little bit quickly. The steps are we first log",
    "textdich": ""
  },
  {
    "start": 66769.92,
    "end": 66776.56,
    "text": "into Docker using the login action right here. Then the next thing is we used, we set up build x",
    "textdich": ""
  },
  {
    "start": 66776.56,
    "end": 66782.88,
    "text": "we set up build x. And then we call the build and push action in this case. And we here we specify",
    "textdich": ""
  },
  {
    "start": 66782.88,
    "end": 66787.12,
    "text": "the context, which is saying just this current directory, and then the location of our Docker",
    "textdich": ""
  },
  {
    "start": 66787.12,
    "end": 66790.72,
    "text": "file. And then we're going to use build x for the builder. And we set push to be true, because we",
    "textdich": ""
  },
  {
    "start": 66790.72,
    "end": 66795.44,
    "text": "want to actually push it to the to the GitHub repo. And then here, the repo is going to be our",
    "textdich": ""
  },
  {
    "start": 66795.44,
    "end": 66801.52,
    "text": "username slash, then the repository name, which is happens to be fast API, we could store this in a",
    "textdich": ""
  },
  {
    "start": 66801.52,
    "end": 66807.92,
    "text": "secret, but I decided not to. And then these are just copied from the, the documentation so that",
    "textdich": ""
  },
  {
    "start": 66807.92,
    "end": 66812.0,
    "text": "we can catch all of the images, so that we don't have to keep running all of this from scratch,",
    "textdich": ""
  },
  {
    "start": 66812.0,
    "end": 66817.36,
    "text": "which is a fairly long process. And then here, we're just spitting out the image digest. And if",
    "textdich": ""
  },
  {
    "start": 66817.36,
    "end": 66823.6,
    "text": "we take a look at our workflows, and we can see that the last one, which is called asdf successfully",
    "textdich": ""
  },
  {
    "start": 66823.6,
    "end": 66831.2,
    "text": "ran. And if I actually go back to my Docker hub in this case, and just hit refresh, right,",
    "textdich": ""
  },
  {
    "start": 66831.2,
    "end": 66837.68,
    "text": "we can see that we did successfully push an image a minute ago. So that means we have now successfully",
    "textdich": ""
  },
  {
    "start": 66837.68,
    "end": 66845.68,
    "text": "completed our entire CI portion of our CI CI CD pipeline. The next step is to set up the",
    "textdich": ""
  },
  {
    "start": 66845.68,
    "end": 66850.64,
    "text": "continuous delivery, which is a matter of just providing a whole bunch of commands needed to",
    "textdich": ""
  },
  {
    "start": 66852.16,
    "end": 66858.08,
    "text": "actually push out our new code to our production network. And, you know, moving forward, just to",
    "textdich": ""
  },
  {
    "start": 66858.08,
    "end": 66861.76,
    "text": "kind of keep things simple. And as quick as possible, I'm actually going to copy out all",
    "textdich": ""
  },
  {
    "start": 66861.76,
    "end": 66865.6,
    "text": "of the Docker steps, because we're not even using Docker in production. So we don't actually need",
    "textdich": ""
  },
  {
    "start": 66865.6,
    "end": 66869.84,
    "text": "this. So we'll just comment that out just to make things as quick and as snappy as possible,",
    "textdich": ""
  },
  {
    "start": 66869.84,
    "end": 66876.08,
    "text": "so that we don't use too many of our build minutes. So now that we set up the continuous integration",
    "textdich": ""
  },
  {
    "start": 66876.08,
    "end": 66881.92,
    "text": "part of our CI CD pipeline, it's now time to move on to the continuous delivery aspect",
    "textdich": ""
  },
  {
    "start": 66881.92,
    "end": 66887.84,
    "text": "of our CI CD pipeline. So this part is going to be responsible for pushing out the update",
    "textdich": ""
  },
  {
    "start": 66887.84,
    "end": 66892.96,
    "text": "to our production environment so that our code or our production environment is running our newest",
    "textdich": ""
  },
  {
    "start": 66892.96,
    "end": 66902.0,
    "text": "and latest code. So there's a couple things we can do. And I'm actually going to do this up here,",
    "textdich": ""
  },
  {
    "start": 66902.0,
    "end": 66905.52,
    "text": "actually, we'll just do it down here, it's fine. So what we could do is, you know, just to keep",
    "textdich": ""
  },
  {
    "start": 66905.52,
    "end": 66910.08,
    "text": "things simple, I could just provide another step, right? And we can give this, you know, whatever",
    "textdich": ""
  },
  {
    "start": 66910.08,
    "end": 66918.88,
    "text": "name we want, I could say, name, and then hey, this is push changes to production. And then we",
    "textdich": ""
  },
  {
    "start": 66918.88,
    "end": 66925.12,
    "text": "can, you know, provide the steps needed to actually push those changes out. However, instead of doing",
    "textdich": ""
  },
  {
    "start": 66925.12,
    "end": 66929.92,
    "text": "it like this, what I would like to do is I actually want to break it out into a separate job so that",
    "textdich": ""
  },
  {
    "start": 66929.92,
    "end": 66934.64,
    "text": "we can kind of have things nice and organized. And what I actually want to do is I want to rename",
    "textdich": ""
  },
  {
    "start": 66934.64,
    "end": 66940.32,
    "text": "job one because it's not very descriptive, I'm going to rename it to build. And then I'm going",
    "textdich": ""
  },
  {
    "start": 66940.32,
    "end": 66948.56,
    "text": "to create a second job. And we'll call this one deploy. So we've got two different jobs. However,",
    "textdich": ""
  },
  {
    "start": 66948.56,
    "end": 66954.24,
    "text": "the, the issue with jobs is that they don't behave the way that you think they would. And let me",
    "textdich": ""
  },
  {
    "start": 66954.24,
    "end": 66962.0,
    "text": "delete this. The way that jobs work is that, by default, in GitHub, the jobs run in parallel.",
    "textdich": ""
  },
  {
    "start": 66962.0,
    "end": 66969.52,
    "text": "And so what I mean by that is that when our workflow runs, GitHub is actually going to run",
    "textdich": ""
  },
  {
    "start": 66969.52,
    "end": 66976.4,
    "text": "the build job, and the deploy job in parallel at the same exact time. Now, we would definitely not",
    "textdich": ""
  },
  {
    "start": 66976.4,
    "end": 66980.8,
    "text": "want to do that, because that would mean before we've even, you know, run our tests and done",
    "textdich": ""
  },
  {
    "start": 66980.8,
    "end": 66985.68,
    "text": "anything else, we would try to actually deploy our new changes, which would be a terrible thing to",
    "textdich": ""
  },
  {
    "start": 66985.68,
    "end": 66992.32,
    "text": "happen. So we don't want it to run in parallel. How exactly do we configure that? Well, we pass in",
    "textdich": ""
  },
  {
    "start": 66992.32,
    "end": 66999.92,
    "text": "an option called runs. Sorry, needs. So you say needs. And here we we tell it the list of",
    "textdich": ""
  },
  {
    "start": 67000.88,
    "end": 67006.8,
    "text": "jobs that need to complete before this job can run. So here we just say this needs to wait for",
    "textdich": ""
  },
  {
    "start": 67007.92,
    "end": 67013.04,
    "text": "the build job to run before this job runs. And so we just pass that into here.",
    "textdich": ""
  },
  {
    "start": 67013.04,
    "end": 67019.04,
    "text": "And you could pass in multiple, multiple jobs if you wanted to, we only have one other one. So this",
    "textdich": ""
  },
  {
    "start": 67019.04,
    "end": 67026.08,
    "text": "is going to cause this to run in a sequential order. And just like with the other job, we need",
    "textdich": ""
  },
  {
    "start": 67026.08,
    "end": 67031.76,
    "text": "the runs on property to define, you know, that we want to run this on Ubuntu latest. And then I'm",
    "textdich": ""
  },
  {
    "start": 67031.76,
    "end": 67037.04,
    "text": "just going to create a test step. In this case, we'll do steps. And the first step is going to say,",
    "textdich": ""
  },
  {
    "start": 67037.04,
    "end": 67045.76,
    "text": "uses, actually, I'm just gonna say name, you know, deploying stuff. And here, I'm just gonna run a",
    "textdich": ""
  },
  {
    "start": 67045.76,
    "end": 67056.8,
    "text": "command on our server. And I'll just say echo going to deploy some stuff. All right, so let's test",
    "textdich": ""
  },
  {
    "start": 67056.8,
    "end": 67074.96,
    "text": "this out. I'll do a git add dash dash all git commit dash m. And if we go ahead and check GitHub,",
    "textdich": ""
  },
  {
    "start": 67076.4,
    "end": 67081.92,
    "text": "and go to our actions, let's take a look at what happened in the adding deploy. And so you can see",
    "textdich": ""
  },
  {
    "start": 67081.92,
    "end": 67086.88,
    "text": "now that we have two different jobs, we can actually see the two different jobs here. And so look like",
    "textdich": ""
  },
  {
    "start": 67086.88,
    "end": 67091.92,
    "text": "build ran just fine. And then look like deploy also ran just fine. And so if I take a look at the",
    "textdich": ""
  },
  {
    "start": 67091.92,
    "end": 67096.56,
    "text": "deploying stuff, we can see that I ran the command going to deploy some stuff and it was successfully",
    "textdich": ""
  },
  {
    "start": 67096.56,
    "end": 67100.4,
    "text": "deployed, although we didn't actually deploy anything. But you get the gist of it. So now it's",
    "textdich": ""
  },
  {
    "start": 67100.4,
    "end": 67105.2,
    "text": "just a matter of figuring out what commands we need to run to actually push those changes out to our",
    "textdich": ""
  },
  {
    "start": 67105.2,
    "end": 67109.84,
    "text": "production server. And so you know, we covered two different deployment models in this course,",
    "textdich": ""
  },
  {
    "start": 67109.84,
    "end": 67114.08,
    "text": "there's Heroku, and then there's the Ubuntu server. So we're going to start off by going over how we",
    "textdich": ""
  },
  {
    "start": 67114.08,
    "end": 67120.56,
    "text": "can actually handle this with Heroku. And if we go to our code, right here, we're going to provide",
    "textdich": ""
  },
  {
    "start": 67120.56,
    "end": 67126.56,
    "text": "the steps to actually push an update to Heroku. Now, if you don't remember what we actually did to",
    "textdich": ""
  },
  {
    "start": 67126.56,
    "end": 67131.84,
    "text": "push changes out to Heroku, do a git remote, I think, yep, so this is going to list out to the",
    "textdich": ""
  },
  {
    "start": 67133.28,
    "end": 67137.92,
    "text": "the Heroku remote. So if you want to actually push out the changes to your Heroku application,",
    "textdich": ""
  },
  {
    "start": 67137.92,
    "end": 67142.88,
    "text": "you would do a git push Heroku, and then your branch, which is main, and that's going to update",
    "textdich": ""
  },
  {
    "start": 67142.88,
    "end": 67149.92,
    "text": "our application. It's pretty simple with Heroku. So in this machine, right in our CI CD pipeline,",
    "textdich": ""
  },
  {
    "start": 67149.92,
    "end": 67156.56,
    "text": "it's not quite as simple as running git push Heroku main just because we don't have Heroku",
    "textdich": ""
  },
  {
    "start": 67156.56,
    "end": 67160.96,
    "text": "installed on this machine, because when we set up Heroku, we had to install the Heroku CLI,",
    "textdich": ""
  },
  {
    "start": 67160.96,
    "end": 67167.92,
    "text": "we had to run Heroku login, put in our credentials. And then we had to pull we have to get our git",
    "textdich": ""
  },
  {
    "start": 67167.92,
    "end": 67172.72,
    "text": "repo, we have to add the Heroku remote, and then we have to do a git push. So there's a couple of",
    "textdich": ""
  },
  {
    "start": 67172.72,
    "end": 67177.76,
    "text": "different steps. And so manually doing it, I just want to kind of write this out, we would, you know,",
    "textdich": ""
  },
  {
    "start": 67177.76,
    "end": 67186.8,
    "text": "install Heroku CLI. We would, actually, before we even do that, we would, first of all, you know,",
    "textdich": ""
  },
  {
    "start": 67186.8,
    "end": 67193.68,
    "text": "pull our GitHub repo. Because remember, this job is essentially starting everything from scratch,",
    "textdich": ""
  },
  {
    "start": 67195.36,
    "end": 67199.92,
    "text": "potentially on a different machine. So anything we did here, none of this stuff is available. So we",
    "textdich": ""
  },
  {
    "start": 67199.92,
    "end": 67205.12,
    "text": "don't actually have access to the repo that we pulled here. So we would have to do it again here.",
    "textdich": ""
  },
  {
    "start": 67205.12,
    "end": 67211.44,
    "text": "So we pulled the repo, we install Heroku CLI, then we do a Heroku login. And then we do a",
    "textdich": ""
  },
  {
    "start": 67211.44,
    "end": 67219.92,
    "text": "we have to add in a remote and get and I forget the command. So but we'll just say add git remote",
    "textdich": ""
  },
  {
    "start": 67219.92,
    "end": 67228.08,
    "text": "for Heroku. And then we have to do a git push Heroku main. So those are the steps that we would",
    "textdich": ""
  },
  {
    "start": 67228.08,
    "end": 67236.56,
    "text": "have to run to actually deploy our application in our CI CD pipeline. And this is all technically",
    "textdich": ""
  },
  {
    "start": 67236.56,
    "end": 67242.88,
    "text": "possible, you can manually do this. But it's actually a kind of a pain in the butt to actually",
    "textdich": ""
  },
  {
    "start": 67242.88,
    "end": 67252.48,
    "text": "do this. And instead, what I recommend you do is look for a a, a action in the GitHub marketplace",
    "textdich": ""
  },
  {
    "start": 67252.48,
    "end": 67256.64,
    "text": "that kind of does this all under the hood. So that's what we're going to do. Because, you know,",
    "textdich": ""
  },
  {
    "start": 67256.64,
    "end": 67261.28,
    "text": "deploying to Heroku is a very common task. So if I go to the marketplace, which I forget which tab",
    "textdich": ""
  },
  {
    "start": 67261.28,
    "end": 67268.64,
    "text": "was the marketplace. Oh, I think it's this one. Yeah. And so here, if I search for Heroku,",
    "textdich": ""
  },
  {
    "start": 67270.64,
    "end": 67277.36,
    "text": "you'll see that we have a couple of different options. For deploying to Heroku in the marketplace,",
    "textdich": ""
  },
  {
    "start": 67277.36,
    "end": 67282.0,
    "text": "let me just see view all because I got to figure out which one is the one that I want. And this",
    "textdich": ""
  },
  {
    "start": 67282.0,
    "end": 67287.68,
    "text": "is the one that I want by Akilesh and s. So this is the one that's got the most stars. So we'll",
    "textdich": ""
  },
  {
    "start": 67287.68,
    "end": 67293.76,
    "text": "select this one. And you'll see that in the example, the way that we actually deploy to Heroku is we",
    "textdich": ""
  },
  {
    "start": 67293.76,
    "end": 67300.32,
    "text": "have to get a Heroku API key, we have to provide our Heroku app name. And then we have to provide",
    "textdich": ""
  },
  {
    "start": 67300.32,
    "end": 67308.88,
    "text": "our Heroku email. So let's get this from our account. And then we will create secrets within",
    "textdich": ""
  },
  {
    "start": 67308.88,
    "end": 67312.24,
    "text": "our GitHub repository. So we can store that information because we don't want to hardcode",
    "textdich": ""
  },
  {
    "start": 67312.24,
    "end": 67322.08,
    "text": "that into our YAML file. So going back to Heroku, if you go to your account, which is the little",
    "textdich": ""
  },
  {
    "start": 67322.08,
    "end": 67327.92,
    "text": "logo here, then select account settings, you'll see that the API key is right here. So we can just",
    "textdich": ""
  },
  {
    "start": 67327.92,
    "end": 67332.88,
    "text": "say reveal. And then I'm just going to copy this key. And what we're going to do is we're going to",
    "textdich": ""
  },
  {
    "start": 67332.88,
    "end": 67338.64,
    "text": "go to our GitHub repository, we'll go to settings. And then we can create our secret. So you can",
    "textdich": ""
  },
  {
    "start": 67338.64,
    "end": 67343.92,
    "text": "create our secret. So you can create a global repository secret. Or you can do what I'm going",
    "textdich": ""
  },
  {
    "start": 67343.92,
    "end": 67348.08,
    "text": "to do, which is I'm going to create a brand new environment for production. We'll call this",
    "textdich": ""
  },
  {
    "start": 67348.08,
    "end": 67363.52,
    "text": "production. That is not how you spell production. And we're going to add a secret. And I'm going to",
    "textdich": ""
  },
  {
    "start": 67363.52,
    "end": 67368.48,
    "text": "well paste the value here. But the name I'm going to just stick to what they used, just to make it",
    "textdich": ""
  },
  {
    "start": 67368.48,
    "end": 67377.52,
    "text": "easier to remember. So Heroku underscore API key add secret. And then what else do we need,",
    "textdich": ""
  },
  {
    "start": 67377.52,
    "end": 67383.52,
    "text": "we have to add the email. So let's create a secret for the email as well. Because why not,",
    "textdich": ""
  },
  {
    "start": 67383.52,
    "end": 67389.36,
    "text": "they didn't do that. But we're going to be a little bit more secure. And I'll call this Heroku",
    "textdich": ""
  },
  {
    "start": 67389.36,
    "end": 67400.08,
    "text": "underscore email. And this is just going to be your email that you use to register. And then if",
    "textdich": ""
  },
  {
    "start": 67400.08,
    "end": 67406.4,
    "text": "you want to, you can also add the Heroku app name as a secret as well. You don't have to do this,",
    "textdich": ""
  },
  {
    "start": 67406.4,
    "end": 67414.08,
    "text": "but I'm going to do it. And what did I call my app, I can't even remember. Fast API,",
    "textdich": ""
  },
  {
    "start": 67414.08,
    "end": 67423.12,
    "text": "Sanjeev yours is going to be different. So make sure you update it accordingly. Okay, so",
    "textdich": ""
  },
  {
    "start": 67424.72,
    "end": 67433.44,
    "text": "wait, what happened here? Why is there only two? I think I may have accidentally overridden one of",
    "textdich": ""
  },
  {
    "start": 67433.44,
    "end": 67439.36,
    "text": "these keys. So let me let me put this information back in just in case because you can't actually",
    "textdich": ""
  },
  {
    "start": 67439.36,
    "end": 67446.48,
    "text": "look at the keys after you save them, you can only update them. Okay, so we updated that and then",
    "textdich": ""
  },
  {
    "start": 67449.36,
    "end": 67451.44,
    "text": "the API key, I have to copy this once more.",
    "textdich": ""
  },
  {
    "start": 67454.64,
    "end": 67460.0,
    "text": "All right, so we've got those. And then let me once again, add the Heroku app name, this is going",
    "textdich": ""
  },
  {
    "start": 67460.0,
    "end": 67475.28,
    "text": "to be Alright, so now we've got our three keys, hopefully I set those all up correctly. And keep",
    "textdich": ""
  },
  {
    "start": 67475.28,
    "end": 67482.0,
    "text": "in mind the name of this environment is called production. So for the other job, which is the",
    "textdich": ""
  },
  {
    "start": 67482.0,
    "end": 67488.64,
    "text": "deploy job, we're going to specify the environment, just same way we did with the first job, just by",
    "textdich": ""
  },
  {
    "start": 67488.64,
    "end": 67498.16,
    "text": "referencing this code right here and just updating the name. And so this is going to be production.",
    "textdich": ""
  },
  {
    "start": 67502.64,
    "end": 67507.92,
    "text": "And then we can remove this unnecessary step. And actually, I'll change this to be",
    "textdich": ""
  },
  {
    "start": 67507.92,
    "end": 67512.48,
    "text": "deploying to Heroku. And then we'll change this to be used.",
    "textdich": ""
  },
  {
    "start": 67512.48,
    "end": 67519.68,
    "text": "And so just like in the documentation, actually, I might as well just copy it because it's a little",
    "textdich": ""
  },
  {
    "start": 67519.68,
    "end": 67539.2,
    "text": "bit easier. So I can just copy this. And we can just update the app name with the secret that we",
    "textdich": ""
  },
  {
    "start": 67539.2,
    "end": 67554.96,
    "text": "defined. As well as the secret for the email.",
    "textdich": ""
  },
  {
    "start": 67554.96,
    "end": 67573.36,
    "text": "And that's all we have to do for the Heroku side of things we don't it's as simple as that. So",
    "textdich": ""
  },
  {
    "start": 67573.36,
    "end": 67577.52,
    "text": "that's why I always recommend you look for a built in action, so that you don't have to perform",
    "textdich": ""
  },
  {
    "start": 67577.52,
    "end": 67583.36,
    "text": "all of these steps by yourself. And I realized before we even do that, we have to actually pull",
    "textdich": ""
  },
  {
    "start": 67583.36,
    "end": 67588.88,
    "text": "our code, just like we did in the first job. So we're going to copy that section right here where",
    "textdich": ""
  },
  {
    "start": 67588.88,
    "end": 67603.12,
    "text": "we pull the repo. All right, so we've got the repo, and then we deploy to Heroku. And so what I'm",
    "textdich": ""
  },
  {
    "start": 67603.12,
    "end": 67609.84,
    "text": "going to do now is we want to check our code real quick, and make some changes that that'll be easy",
    "textdich": ""
  },
  {
    "start": 67609.84,
    "end": 67614.0,
    "text": "to kind of quickly just test and see that we actually pushed out of changes. So under our",
    "textdich": ""
  },
  {
    "start": 67614.0,
    "end": 67619.6,
    "text": "main.py file, you know, I'm just gonna do what I always do. I'm just gonna add successfully",
    "textdich": ""
  },
  {
    "start": 67620.56,
    "end": 67629.92,
    "text": "deployed from CI CD pipeline. Okay, and so I'm gonna save that. And then now we want to",
    "textdich": ""
  },
  {
    "start": 67629.92,
    "end": 67643.12,
    "text": "do a git add dash dash all get commit dash m push to Heroku example. And then we'll do a git push",
    "textdich": ""
  },
  {
    "start": 67643.12,
    "end": 67654.0,
    "text": "origin main. And before I do that, let me go to my app. So if I actually go to my app on Heroku,",
    "textdich": ""
  },
  {
    "start": 67654.0,
    "end": 67658.96,
    "text": "we can see it just says message Hello, world. And so after we commit these changes, we should see",
    "textdich": ""
  },
  {
    "start": 67658.96,
    "end": 67665.04,
    "text": "it send the new message message. So I'm going to send going to push this to GitHub now. And our",
    "textdich": ""
  },
  {
    "start": 67665.04,
    "end": 67672.56,
    "text": "CI CD pipeline should run and push those changes out. Alright, so now if I go back to GitHub, and",
    "textdich": ""
  },
  {
    "start": 67672.56,
    "end": 67678.4,
    "text": "we take a look at the actions, I can see my push to Heroku example succeeded. And so you can see",
    "textdich": ""
  },
  {
    "start": 67678.4,
    "end": 67682.64,
    "text": "both the build phase and the deploy phase both succeeded. And if we want to take a look at the",
    "textdich": ""
  },
  {
    "start": 67682.64,
    "end": 67687.6,
    "text": "notes, and then just see what happened with the deploying to Heroku section, we'll see the logs",
    "textdich": ""
  },
  {
    "start": 67687.6,
    "end": 67693.36,
    "text": "for this specific step. And so it looks like we can see Heroku is running in this case, and it",
    "textdich": ""
  },
  {
    "start": 67693.36,
    "end": 67699.36,
    "text": "looks like everything worked. So if I go back to my app, and hit refresh, right, we could see we",
    "textdich": ""
  },
  {
    "start": 67699.36,
    "end": 67705.92,
    "text": "get the new message. So we have successfully updated Heroku using our CI CD pipeline. It's as",
    "textdich": ""
  },
  {
    "start": 67705.92,
    "end": 67712.56,
    "text": "simple as that. And before I wrap up this video, this section or this video on deploying to Heroku,",
    "textdich": ""
  },
  {
    "start": 67712.56,
    "end": 67718.0,
    "text": "I found this one good article that shows you how to deploy to Heroku in a manual way. So if you",
    "textdich": ""
  },
  {
    "start": 67718.0,
    "end": 67723.76,
    "text": "don't want to use the built in, or the pre configured GitHub action, you can actually create",
    "textdich": ""
  },
  {
    "start": 67723.76,
    "end": 67729.92,
    "text": "a custom workflow when it comes to, you know, actually manually logging in, and then pushing",
    "textdich": ""
  },
  {
    "start": 67729.92,
    "end": 67737.12,
    "text": "all of these changes out to Heroku, the manual way instead of using that pre built action. But",
    "textdich": ""
  },
  {
    "start": 67737.12,
    "end": 67741.28,
    "text": "this is a little bit more complex. And this would only really be needed under very specific",
    "textdich": ""
  },
  {
    "start": 67741.28,
    "end": 67746.72,
    "text": "circumstances, or just for learning, or just for learning purposes. So take a look at if you want",
    "textdich": ""
  },
  {
    "start": 67746.72,
    "end": 67750.64,
    "text": "to see how it's done manually, but you never actually have to do that. Now, before we move",
    "textdich": ""
  },
  {
    "start": 67750.64,
    "end": 67755.68,
    "text": "any further, there's one thing that I want to check to make sure that our CI CD pipeline properly",
    "textdich": ""
  },
  {
    "start": 67755.68,
    "end": 67760.64,
    "text": "does. And that is that if we get any kind of errors in the build job, I want to make sure that",
    "textdich": ""
  },
  {
    "start": 67760.64,
    "end": 67765.44,
    "text": "the deploy job does not run, right. And so when I say errors, it could be anything, right, maybe",
    "textdich": ""
  },
  {
    "start": 67765.44,
    "end": 67772.16,
    "text": "we're unable to install all of our dependencies, or maybe, and more importantly, if our tests fail,",
    "textdich": ""
  },
  {
    "start": 67772.16,
    "end": 67777.6,
    "text": "right, if my tests fail, I don't want to push my broken code out to production. So I want to make",
    "textdich": ""
  },
  {
    "start": 67777.6,
    "end": 67782.96,
    "text": "sure that if the test fails, we stop right there. And we don't proceed any further with the deploy.",
    "textdich": ""
  },
  {
    "start": 67782.96,
    "end": 67787.04,
    "text": "And so from a configuration perspective, you don't technically have to do anything. That's the",
    "textdich": ""
  },
  {
    "start": 67787.04,
    "end": 67793.52,
    "text": "default configuration. But I do want to verify that it actually does what we expect it to. So in",
    "textdich": ""
  },
  {
    "start": 67793.52,
    "end": 67799.92,
    "text": "the tests files, or if I can find it, tests, I'm going to go to, you know, it doesn't really matter",
    "textdich": ""
  },
  {
    "start": 67799.92,
    "end": 67806.48,
    "text": "what test, I'm just going to go on to test posts. And I'm just going to modify this to an incorrect",
    "textdich": ""
  },
  {
    "start": 67806.48,
    "end": 67812.64,
    "text": "value. I'm gonna put this in the notes, change to this one. So I remember which one I changed,",
    "textdich": ""
  },
  {
    "start": 67812.64,
    "end": 67818.64,
    "text": "so I can change it back from 200. So this should cause this test to fail. And if the test fails,",
    "textdich": ""
  },
  {
    "start": 67818.64,
    "end": 67826.16,
    "text": "then we want to make sure that we don't deploy. And I'm also going to go back to our main.py file",
    "textdich": ""
  },
  {
    "start": 67826.16,
    "end": 67833.52,
    "text": "to actually make some visible changes by changing this back to Hello World, to see if our code",
    "textdich": ""
  },
  {
    "start": 67833.52,
    "end": 67840.88,
    "text": "actually got updated accidentally or not. So we got everything set. We'll do a git add once again.",
    "textdich": ""
  },
  {
    "start": 67840.88,
    "end": 67853.52,
    "text": "We'll do a git commit dash m broke stuff. And then we'll do a git or git push origin main.",
    "textdich": ""
  },
  {
    "start": 67853.52,
    "end": 67867.2,
    "text": "And we'll let that run. Alright, so going back to GitHub. Now, let me go back to these, the actions",
    "textdich": ""
  },
  {
    "start": 67867.2,
    "end": 67872.24,
    "text": "page. And we can see the last run, it looks like it failed. So let's see where it failed. And so",
    "textdich": ""
  },
  {
    "start": 67872.24,
    "end": 67878.64,
    "text": "you could see here, it failed in the build stage, and then the deploy stage, I select this, this",
    "textdich": ""
  },
  {
    "start": 67878.64,
    "end": 67883.68,
    "text": "check was skipped. So that means we actually did properly skip the deploy phase because the build",
    "textdich": ""
  },
  {
    "start": 67883.68,
    "end": 67889.44,
    "text": "phase failed. And we can see that we exited with an error code because one of our tests failed.",
    "textdich": ""
  },
  {
    "start": 67889.44,
    "end": 67897.28,
    "text": "Awesome. So let's go back. Let's fix this code real quick. And it was a test posts. And we'll",
    "textdich": ""
  },
  {
    "start": 67897.28,
    "end": 67905.12,
    "text": "change that back to a 200. I don't need those notes anymore. And now let's push out those changes",
    "textdich": ""
  },
  {
    "start": 67905.12,
    "end": 67924.96,
    "text": "once more. Alright, and we'll go back to GitHub again. And let's go back to actions. And let's",
    "textdich": ""
  },
  {
    "start": 67924.96,
    "end": 67930.16,
    "text": "take a look and we can see the last one did get deployed built and deployed successfully. So if",
    "textdich": ""
  },
  {
    "start": 67930.16,
    "end": 67938.08,
    "text": "I go to Heroku, refresh this, we should see that this gets updated just fine. Right. So now that",
    "textdich": ""
  },
  {
    "start": 67938.08,
    "end": 67944.88,
    "text": "we can deploy our updates to Heroku, let's take a look at how we can deploy our updates to our",
    "textdich": ""
  },
  {
    "start": 67944.88,
    "end": 67952.24,
    "text": "Ubuntu server. So once again, it's just a matter of figuring out what exactly are the commands",
    "textdich": ""
  },
  {
    "start": 67952.24,
    "end": 67958.48,
    "text": "that we would need to run to update our production environment. So there's going to be a couple",
    "textdich": ""
  },
  {
    "start": 67958.48,
    "end": 67967.12,
    "text": "things. The first thing is, first of all, we would have to log into our Ubuntu server. And then",
    "textdich": ""
  },
  {
    "start": 67967.12,
    "end": 67971.44,
    "text": "once we log in, when I say a login to our bunches, or I mean, like SSH to it, we would then have to",
    "textdich": ""
  },
  {
    "start": 67972.64,
    "end": 67980.64,
    "text": "move into our slash app slash source directory. And then we would run a git pool so that we can",
    "textdich": ""
  },
  {
    "start": 67980.64,
    "end": 67993.36,
    "text": "pull the latest code and then we'd have to do a a system CTL restart API. So how exactly do we",
    "textdich": ""
  },
  {
    "start": 67993.36,
    "end": 67998.0,
    "text": "do all of this? How do we log into our bunches server? How do we SSH to it? Well, there's a",
    "textdich": ""
  },
  {
    "start": 67998.0,
    "end": 68006.0,
    "text": "there's a really nice built in action. I can find the marketplace again. And I believe it's called",
    "textdich": ""
  },
  {
    "start": 68006.0,
    "end": 68015.92,
    "text": "SSH dash action. And I don't think that's I can't find it in here the one I used. But it's by Apple",
    "textdich": ""
  },
  {
    "start": 68015.92,
    "end": 68022.16,
    "text": "Boy. And I'll just do Apple Boy SSH. So search for that. That's there we go. This is the one we want",
    "textdich": ""
  },
  {
    "start": 68022.16,
    "end": 68027.76,
    "text": "SSH remote command. So this will allow you to run commands on a remote machine. So let's take a look",
    "textdich": ""
  },
  {
    "start": 68027.76,
    "end": 68032.96,
    "text": "at how to do this. Here, they give you an example. So you have to pass in the host, which is the IP",
    "textdich": ""
  },
  {
    "start": 68032.96,
    "end": 68039.28,
    "text": "address, the username and the password. And then the SSH port is optional. But I think it should",
    "textdich": ""
  },
  {
    "start": 68039.28,
    "end": 68045.92,
    "text": "default to to port 22, which is the one that's running on our bunches server. So we don't actually",
    "textdich": ""
  },
  {
    "start": 68045.92,
    "end": 68050.88,
    "text": "have to define that. But that's all we really need. And then the script is going to be the commands",
    "textdich": ""
  },
  {
    "start": 68050.88,
    "end": 68060.08,
    "text": "that we want to run on the remote machine. So let's set this up. And I'll go down to here. And I'll",
    "textdich": ""
  },
  {
    "start": 68060.08,
    "end": 68073.04,
    "text": "say name and deploy to Ubuntu server. And we're gonna say uses Apple Boy slash SSH dash action at",
    "textdich": ""
  },
  {
    "start": 68073.04,
    "end": 68082.16,
    "text": "master. And then with the first we have to provide a host. And I'm going to store this in a secret.",
    "textdich": ""
  },
  {
    "start": 68082.16,
    "end": 68095.68,
    "text": "And we'll call this what do you think we should call this about a bun to underscore host. Actually,",
    "textdich": ""
  },
  {
    "start": 68095.68,
    "end": 68104.32,
    "text": "we'll call this prod host. And then username, same thing, we're going to store this in a secret. So",
    "textdich": ""
  },
  {
    "start": 68104.32,
    "end": 68115.68,
    "text": "we'll do secrets dot prod, username, and then password. Once again, in another secret. And I'll",
    "textdich": ""
  },
  {
    "start": 68115.68,
    "end": 68125.28,
    "text": "call this prod password. Alright, then we have to provide the commands that we want to run. And so",
    "textdich": ""
  },
  {
    "start": 68125.28,
    "end": 68130.4,
    "text": "since we're going to use more than one command, we're going to do the little pipe symbol. And then",
    "textdich": ""
  },
  {
    "start": 68130.4,
    "end": 68134.0,
    "text": "here, we just list out the command. So the first thing that we want to do is we need to move into",
    "textdich": ""
  },
  {
    "start": 68134.0,
    "end": 68140.4,
    "text": "our app directory. So it's going to be the app slash source. And make sure there is no front slash",
    "textdich": ""
  },
  {
    "start": 68140.4,
    "end": 68148.88,
    "text": "that's going to break things. Then we want to do a Git pull. Now this is where it might get a",
    "textdich": ""
  },
  {
    "start": 68148.88,
    "end": 68155.76,
    "text": "little interesting. I'm going to do it the wrong way first. So we do a system CTL restart API,",
    "textdich": ""
  },
  {
    "start": 68155.76,
    "end": 68164.24,
    "text": "but we do need pseudo privilege. So we'll do pseudo restart API, or whatever you call it yours. And",
    "textdich": ""
  },
  {
    "start": 68164.24,
    "end": 68168.64,
    "text": "so let's define these secrets real quick. And we'll go into the environments and then we'll go to",
    "textdich": ""
  },
  {
    "start": 68168.64,
    "end": 68186.96,
    "text": "our production environment. And so just go ahead and just create them here. All right, and then",
    "textdich": ""
  },
  {
    "start": 68186.96,
    "end": 68190.48,
    "text": "we're gonna put in our password, I'm not going to show this one to you guys. So I'm just going to",
    "textdich": ""
  },
  {
    "start": 68190.48,
    "end": 68206.24,
    "text": "pause the video and then add it myself. And then finally, we need the the username. And I believe",
    "textdich": ""
  },
  {
    "start": 68206.24,
    "end": 68212.72,
    "text": "I called mine just Sanjeev. I think that should work hopefully. And so now we've got all of our",
    "textdich": ""
  },
  {
    "start": 68212.72,
    "end": 68224.72,
    "text": "secrets. And I think we should be good to go prod host username password. Let's try this. Actually,",
    "textdich": ""
  },
  {
    "start": 68224.72,
    "end": 68227.92,
    "text": "before we do that, I'm going to make one more change to the codes that we can actually see",
    "textdich": ""
  },
  {
    "start": 68227.92,
    "end": 68236.08,
    "text": "the changes. And so this is pushing out to Ubuntu. And we're gonna have to do a git add once again,",
    "textdich": ""
  },
  {
    "start": 68236.08,
    "end": 68254.08,
    "text": "and then git commit and then git push origin main. All right, and let's go back now. Let's check on",
    "textdich": ""
  },
  {
    "start": 68254.08,
    "end": 68259.84,
    "text": "our actions. And it looks like it's still running. So it's in the deploy phase. And it looks like",
    "textdich": ""
  },
  {
    "start": 68259.84,
    "end": 68267.12,
    "text": "it's connecting up and it looks like it just finished. And it failed. So what exactly happened",
    "textdich": ""
  },
  {
    "start": 68267.12,
    "end": 68275.04,
    "text": "here? If we take a look at the logs, it says, pseudo, a terminal is required to read the password.",
    "textdich": ""
  },
  {
    "start": 68275.04,
    "end": 68278.96,
    "text": "So it's basically saying that when you run the pseudo command, you know, you get the prompt so",
    "textdich": ""
  },
  {
    "start": 68278.96,
    "end": 68284.4,
    "text": "that you can input the pseudo password. And since this is all through a remote SSH connection,",
    "textdich": ""
  },
  {
    "start": 68284.4,
    "end": 68291.28,
    "text": "that's not really an option. So we have to pass in the dash s option, the dash s flag. And so the",
    "textdich": ""
  },
  {
    "start": 68291.28,
    "end": 68296.88,
    "text": "way we actually define this is going to be actually pretty interesting. But let's see, where is my",
    "textdich": ""
  },
  {
    "start": 68296.88,
    "end": 68304.88,
    "text": "file. So to use the dash s flag, what we're going to do is we're going to say echo. And then we're",
    "textdich": ""
  },
  {
    "start": 68304.88,
    "end": 68313.36,
    "text": "going to echo the password, our pseudo password, and then we pipe into the next command and we do",
    "textdich": ""
  },
  {
    "start": 68313.36,
    "end": 68321.52,
    "text": "pseudo dash s. So the dash s means that we're going to accept what the password as an argument,",
    "textdich": ""
  },
  {
    "start": 68321.52,
    "end": 68327.28,
    "text": "essentially. And the this pipe command, what it's doing is we, we run echo and then whatever our",
    "textdich": ""
  },
  {
    "start": 68327.28,
    "end": 68333.2,
    "text": "password is. So this we actually replace with the actual password. And it's going to pass that into",
    "textdich": ""
  },
  {
    "start": 68333.2,
    "end": 68338.48,
    "text": "the input of this command. So it's going to pass it into the dash s flag, essentially. So that's",
    "textdich": ""
  },
  {
    "start": 68338.48,
    "end": 68344.08,
    "text": "how you do this with a one line command. Here, we're just going to pass our same environment",
    "textdich": ""
  },
  {
    "start": 68344.08,
    "end": 68354.72,
    "text": "variable. So we'll do secrets dot prod password. And I think that should fix it actually. So we'll",
    "textdich": ""
  },
  {
    "start": 68354.72,
    "end": 68373.44,
    "text": "do a git add dash dash all git commit dash m password fix and git push. Okay, so let's go back",
    "textdich": ""
  },
  {
    "start": 68373.44,
    "end": 68379.68,
    "text": "to our actions. We can see that the password fix commit ran just fine and is succeeded to the build",
    "textdich": ""
  },
  {
    "start": 68379.68,
    "end": 68385.76,
    "text": "phase and the deploy phase succeeded. So if I go to my Ubuntu server, and I and we take a look at",
    "textdich": ""
  },
  {
    "start": 68385.76,
    "end": 68391.04,
    "text": "this, we can see that we did get the updated code. So we did successfully update our production",
    "textdich": ""
  },
  {
    "start": 68391.04,
    "end": 68396.16,
    "text": "server. And on top of that, technically, since we never took out the code for Heroku, we should see",
    "textdich": ""
  },
  {
    "start": 68396.16,
    "end": 68403.12,
    "text": "Heroku also deploy. So if I go to my Heroku app, we can see that pushed out to Ubuntu. So we now",
    "textdich": ""
  },
  {
    "start": 68403.12,
    "end": 68410.96,
    "text": "have successfully completed our CI CD pipeline, we set up all of the continuous integration steps,",
    "textdich": ""
  },
  {
    "start": 68410.96,
    "end": 68417.68,
    "text": "which included copying our source code, installing all of the Python dependencies, testing our",
    "textdich": ""
  },
  {
    "start": 68417.68,
    "end": 68422.16,
    "text": "application, and then we set up the CD phase, which was just a matter of pushing those changes",
    "textdich": ""
  },
  {
    "start": 68422.16,
    "end": 68437.76,
    "text": "out to our production environment.",
    "textdich": ""
  }
]